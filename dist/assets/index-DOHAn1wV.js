function _mergeNamespaces(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const Ee in r)if(Ee!=="default"&&!(Ee in n)){const Te=Object.getOwnPropertyDescriptor(r,Ee);Te&&Object.defineProperty(n,Ee,Te.get?Te:{enumerable:!0,get:()=>r[Ee]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const Ee of document.querySelectorAll('link[rel="modulepreload"]'))r(Ee);new MutationObserver(Ee=>{for(const Te of Ee)if(Te.type==="childList")for(const Re of Te.addedNodes)Re.tagName==="LINK"&&Re.rel==="modulepreload"&&r(Re)}).observe(document,{childList:!0,subtree:!0});function t(Ee){const Te={};return Ee.integrity&&(Te.integrity=Ee.integrity),Ee.referrerPolicy&&(Te.referrerPolicy=Ee.referrerPolicy),Ee.crossOrigin==="use-credentials"?Te.credentials="include":Ee.crossOrigin==="anonymous"?Te.credentials="omit":Te.credentials="same-origin",Te}function r(Ee){if(Ee.ep)return;Ee.ep=!0;const Te=t(Ee);fetch(Ee.href,Te)}})();var commonjsGlobal$2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function getAugmentedNamespace(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){var Ee=!1;try{Ee=this instanceof r}catch{}return Ee?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var Ee=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,Ee.get?Ee:{enumerable:!0,get:function(){return n[r]}})}),t}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),Ee=Symbol.for("react.profiler"),Te=Symbol.for("react.provider"),Re=Symbol.for("react.context"),Me=Symbol.for("react.forward_ref"),Ve=Symbol.for("react.suspense"),De=Symbol.for("react.memo"),$e=Symbol.for("react.lazy"),Oe=Symbol.iterator;function Ce($n){return $n===null||typeof $n!="object"?null:($n=Oe&&$n[Oe]||$n["@@iterator"],typeof $n=="function"?$n:null)}var Be={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ue=Object.assign,We={};function He($n,kn,In){this.props=$n,this.context=kn,this.refs=We,this.updater=In||Be}He.prototype.isReactComponent={},He.prototype.setState=function($n,kn){if(typeof $n!="object"&&typeof $n!="function"&&$n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$n,kn,"setState")},He.prototype.forceUpdate=function($n){this.updater.enqueueForceUpdate(this,$n,"forceUpdate")};function Ge(){}Ge.prototype=He.prototype;function Ye($n,kn,In){this.props=$n,this.context=kn,this.refs=We,this.updater=In||Be}var Je=Ye.prototype=new Ge;Je.constructor=Ye,Ue(Je,He.prototype),Je.isPureReactComponent=!0;var Ze=Array.isArray,fn=Object.prototype.hasOwnProperty,yn={current:null},mn={key:!0,ref:!0,__self:!0,__source:!0};function pn($n,kn,In){var Kn,Qn={},rr=null,or=null;if(kn!=null)for(Kn in kn.ref!==void 0&&(or=kn.ref),kn.key!==void 0&&(rr=""+kn.key),kn)fn.call(kn,Kn)&&!mn.hasOwnProperty(Kn)&&(Qn[Kn]=kn[Kn]);var pr=arguments.length-2;if(pr===1)Qn.children=In;else if(1<pr){for(var mr=Array(pr),Er=0;Er<pr;Er++)mr[Er]=arguments[Er+2];Qn.children=mr}if($n&&$n.defaultProps)for(Kn in pr=$n.defaultProps,pr)Qn[Kn]===void 0&&(Qn[Kn]=pr[Kn]);return{$$typeof:n,type:$n,key:rr,ref:or,props:Qn,_owner:yn.current}}function un($n,kn){return{$$typeof:n,type:$n.type,key:kn,ref:$n.ref,props:$n.props,_owner:$n._owner}}function bn($n){return typeof $n=="object"&&$n!==null&&$n.$$typeof===n}function gn($n){var kn={"=":"=0",":":"=2"};return"$"+$n.replace(/[=:]/g,function(In){return kn[In]})}var xn=/\/+/g;function En($n,kn){return typeof $n=="object"&&$n!==null&&$n.key!=null?gn(""+$n.key):kn.toString(36)}function Pn($n,kn,In,Kn,Qn){var rr=typeof $n;(rr==="undefined"||rr==="boolean")&&($n=null);var or=!1;if($n===null)or=!0;else switch(rr){case"string":case"number":or=!0;break;case"object":switch($n.$$typeof){case n:case e:or=!0}}if(or)return or=$n,Qn=Qn(or),$n=Kn===""?"."+En(or,0):Kn,Ze(Qn)?(In="",$n!=null&&(In=$n.replace(xn,"$&/")+"/"),Pn(Qn,kn,In,"",function(Er){return Er})):Qn!=null&&(bn(Qn)&&(Qn=un(Qn,In+(!Qn.key||or&&or.key===Qn.key?"":(""+Qn.key).replace(xn,"$&/")+"/")+$n)),kn.push(Qn)),1;if(or=0,Kn=Kn===""?".":Kn+":",Ze($n))for(var pr=0;pr<$n.length;pr++){rr=$n[pr];var mr=Kn+En(rr,pr);or+=Pn(rr,kn,In,mr,Qn)}else if(mr=Ce($n),typeof mr=="function")for($n=mr.call($n),pr=0;!(rr=$n.next()).done;)rr=rr.value,mr=Kn+En(rr,pr++),or+=Pn(rr,kn,In,mr,Qn);else if(rr==="object")throw kn=String($n),Error("Objects are not valid as a React child (found: "+(kn==="[object Object]"?"object with keys {"+Object.keys($n).join(", ")+"}":kn)+"). If you meant to render a collection of children, use an array instead.");return or}function Ln($n,kn,In){if($n==null)return $n;var Kn=[],Qn=0;return Pn($n,Kn,"","",function(rr){return kn.call(In,rr,Qn++)}),Kn}function Cn($n){if($n._status===-1){var kn=$n._result;kn=kn(),kn.then(function(In){($n._status===0||$n._status===-1)&&($n._status=1,$n._result=In)},function(In){($n._status===0||$n._status===-1)&&($n._status=2,$n._result=In)}),$n._status===-1&&($n._status=0,$n._result=kn)}if($n._status===1)return $n._result.default;throw $n._result}var Dn={current:null},Un={transition:null},Wn={ReactCurrentDispatcher:Dn,ReactCurrentBatchConfig:Un,ReactCurrentOwner:yn};function On(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:Ln,forEach:function($n,kn,In){Ln($n,function(){kn.apply(this,arguments)},In)},count:function($n){var kn=0;return Ln($n,function(){kn++}),kn},toArray:function($n){return Ln($n,function(kn){return kn})||[]},only:function($n){if(!bn($n))throw Error("React.Children.only expected to receive a single React element child.");return $n}},react_production_min.Component=He,react_production_min.Fragment=t,react_production_min.Profiler=Ee,react_production_min.PureComponent=Ye,react_production_min.StrictMode=r,react_production_min.Suspense=Ve,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wn,react_production_min.act=On,react_production_min.cloneElement=function($n,kn,In){if($n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$n+".");var Kn=Ue({},$n.props),Qn=$n.key,rr=$n.ref,or=$n._owner;if(kn!=null){if(kn.ref!==void 0&&(rr=kn.ref,or=yn.current),kn.key!==void 0&&(Qn=""+kn.key),$n.type&&$n.type.defaultProps)var pr=$n.type.defaultProps;for(mr in kn)fn.call(kn,mr)&&!mn.hasOwnProperty(mr)&&(Kn[mr]=kn[mr]===void 0&&pr!==void 0?pr[mr]:kn[mr])}var mr=arguments.length-2;if(mr===1)Kn.children=In;else if(1<mr){pr=Array(mr);for(var Er=0;Er<mr;Er++)pr[Er]=arguments[Er+2];Kn.children=pr}return{$$typeof:n,type:$n.type,key:Qn,ref:rr,props:Kn,_owner:or}},react_production_min.createContext=function($n){return $n={$$typeof:Re,_currentValue:$n,_currentValue2:$n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$n.Provider={$$typeof:Te,_context:$n},$n.Consumer=$n},react_production_min.createElement=pn,react_production_min.createFactory=function($n){var kn=pn.bind(null,$n);return kn.type=$n,kn},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function($n){return{$$typeof:Me,render:$n}},react_production_min.isValidElement=bn,react_production_min.lazy=function($n){return{$$typeof:$e,_payload:{_status:-1,_result:$n},_init:Cn}},react_production_min.memo=function($n,kn){return{$$typeof:De,type:$n,compare:kn===void 0?null:kn}},react_production_min.startTransition=function($n){var kn=Un.transition;Un.transition={};try{$n()}finally{Un.transition=kn}},react_production_min.unstable_act=On,react_production_min.useCallback=function($n,kn){return Dn.current.useCallback($n,kn)},react_production_min.useContext=function($n){return Dn.current.useContext($n)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function($n){return Dn.current.useDeferredValue($n)},react_production_min.useEffect=function($n,kn){return Dn.current.useEffect($n,kn)},react_production_min.useId=function(){return Dn.current.useId()},react_production_min.useImperativeHandle=function($n,kn,In){return Dn.current.useImperativeHandle($n,kn,In)},react_production_min.useInsertionEffect=function($n,kn){return Dn.current.useInsertionEffect($n,kn)},react_production_min.useLayoutEffect=function($n,kn){return Dn.current.useLayoutEffect($n,kn)},react_production_min.useMemo=function($n,kn){return Dn.current.useMemo($n,kn)},react_production_min.useReducer=function($n,kn,In){return Dn.current.useReducer($n,kn,In)},react_production_min.useRef=function($n){return Dn.current.useRef($n)},react_production_min.useState=function($n){return Dn.current.useState($n)},react_production_min.useSyncExternalStore=function($n,kn,In){return Dn.current.useSyncExternalStore($n,kn,In)},react_production_min.useTransition=function(){return Dn.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var n=requireReact(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,Ee=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Te={key:!0,ref:!0,__self:!0,__source:!0};function Re(Me,Ve,De){var $e,Oe={},Ce=null,Be=null;De!==void 0&&(Ce=""+De),Ve.key!==void 0&&(Ce=""+Ve.key),Ve.ref!==void 0&&(Be=Ve.ref);for($e in Ve)r.call(Ve,$e)&&!Te.hasOwnProperty($e)&&(Oe[$e]=Ve[$e]);if(Me&&Me.defaultProps)for($e in Ve=Me.defaultProps,Ve)Oe[$e]===void 0&&(Oe[$e]=Ve[$e]);return{$$typeof:e,type:Me,key:Ce,ref:Be,props:Oe,_owner:Ee.current}}return reactJsxRuntime_production_min.Fragment=t,reactJsxRuntime_production_min.jsx=Re,reactJsxRuntime_production_min.jsxs=Re,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(n){function e(Un,Wn){var On=Un.length;Un.push(Wn);e:for(;0<On;){var $n=On-1>>>1,kn=Un[$n];if(0<Ee(kn,Wn))Un[$n]=Wn,Un[On]=kn,On=$n;else break e}}function t(Un){return Un.length===0?null:Un[0]}function r(Un){if(Un.length===0)return null;var Wn=Un[0],On=Un.pop();if(On!==Wn){Un[0]=On;e:for(var $n=0,kn=Un.length,In=kn>>>1;$n<In;){var Kn=2*($n+1)-1,Qn=Un[Kn],rr=Kn+1,or=Un[rr];if(0>Ee(Qn,On))rr<kn&&0>Ee(or,Qn)?(Un[$n]=or,Un[rr]=On,$n=rr):(Un[$n]=Qn,Un[Kn]=On,$n=Kn);else if(rr<kn&&0>Ee(or,On))Un[$n]=or,Un[rr]=On,$n=rr;else break e}}return Wn}function Ee(Un,Wn){var On=Un.sortIndex-Wn.sortIndex;return On!==0?On:Un.id-Wn.id}if(typeof performance=="object"&&typeof performance.now=="function"){var Te=performance;n.unstable_now=function(){return Te.now()}}else{var Re=Date,Me=Re.now();n.unstable_now=function(){return Re.now()-Me}}var Ve=[],De=[],$e=1,Oe=null,Ce=3,Be=!1,Ue=!1,We=!1,He=typeof setTimeout=="function"?setTimeout:null,Ge=typeof clearTimeout=="function"?clearTimeout:null,Ye=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Je(Un){for(var Wn=t(De);Wn!==null;){if(Wn.callback===null)r(De);else if(Wn.startTime<=Un)r(De),Wn.sortIndex=Wn.expirationTime,e(Ve,Wn);else break;Wn=t(De)}}function Ze(Un){if(We=!1,Je(Un),!Ue)if(t(Ve)!==null)Ue=!0,Cn(fn);else{var Wn=t(De);Wn!==null&&Dn(Ze,Wn.startTime-Un)}}function fn(Un,Wn){Ue=!1,We&&(We=!1,Ge(pn),pn=-1),Be=!0;var On=Ce;try{for(Je(Wn),Oe=t(Ve);Oe!==null&&(!(Oe.expirationTime>Wn)||Un&&!gn());){var $n=Oe.callback;if(typeof $n=="function"){Oe.callback=null,Ce=Oe.priorityLevel;var kn=$n(Oe.expirationTime<=Wn);Wn=n.unstable_now(),typeof kn=="function"?Oe.callback=kn:Oe===t(Ve)&&r(Ve),Je(Wn)}else r(Ve);Oe=t(Ve)}if(Oe!==null)var In=!0;else{var Kn=t(De);Kn!==null&&Dn(Ze,Kn.startTime-Wn),In=!1}return In}finally{Oe=null,Ce=On,Be=!1}}var yn=!1,mn=null,pn=-1,un=5,bn=-1;function gn(){return!(n.unstable_now()-bn<un)}function xn(){if(mn!==null){var Un=n.unstable_now();bn=Un;var Wn=!0;try{Wn=mn(!0,Un)}finally{Wn?En():(yn=!1,mn=null)}}else yn=!1}var En;if(typeof Ye=="function")En=function(){Ye(xn)};else if(typeof MessageChannel<"u"){var Pn=new MessageChannel,Ln=Pn.port2;Pn.port1.onmessage=xn,En=function(){Ln.postMessage(null)}}else En=function(){He(xn,0)};function Cn(Un){mn=Un,yn||(yn=!0,En())}function Dn(Un,Wn){pn=He(function(){Un(n.unstable_now())},Wn)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Un){Un.callback=null},n.unstable_continueExecution=function(){Ue||Be||(Ue=!0,Cn(fn))},n.unstable_forceFrameRate=function(Un){0>Un||125<Un?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):un=0<Un?Math.floor(1e3/Un):5},n.unstable_getCurrentPriorityLevel=function(){return Ce},n.unstable_getFirstCallbackNode=function(){return t(Ve)},n.unstable_next=function(Un){switch(Ce){case 1:case 2:case 3:var Wn=3;break;default:Wn=Ce}var On=Ce;Ce=Wn;try{return Un()}finally{Ce=On}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Un,Wn){switch(Un){case 1:case 2:case 3:case 4:case 5:break;default:Un=3}var On=Ce;Ce=Un;try{return Wn()}finally{Ce=On}},n.unstable_scheduleCallback=function(Un,Wn,On){var $n=n.unstable_now();switch(typeof On=="object"&&On!==null?(On=On.delay,On=typeof On=="number"&&0<On?$n+On:$n):On=$n,Un){case 1:var kn=-1;break;case 2:kn=250;break;case 5:kn=1073741823;break;case 4:kn=1e4;break;default:kn=5e3}return kn=On+kn,Un={id:$e++,callback:Wn,priorityLevel:Un,startTime:On,expirationTime:kn,sortIndex:-1},On>$n?(Un.sortIndex=On,e(De,Un),t(Ve)===null&&Un===t(De)&&(We?(Ge(pn),pn=-1):We=!0,Dn(Ze,On-$n))):(Un.sortIndex=kn,e(Ve,Un),Ue||Be||(Ue=!0,Cn(fn))),Un},n.unstable_shouldYield=gn,n.unstable_wrapCallback=function(Un){var Wn=Ce;return function(){var On=Ce;Ce=Wn;try{return Un.apply(this,arguments)}finally{Ce=On}}}}(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var n=requireReact(),e=requireScheduler();function t(ze){for(var qe="https://reactjs.org/docs/error-decoder.html?invariant="+ze,Ke=1;Ke<arguments.length;Ke++)qe+="&args[]="+encodeURIComponent(arguments[Ke]);return"Minified React error #"+ze+"; visit "+qe+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,Ee={};function Te(ze,qe){Re(ze,qe),Re(ze+"Capture",qe)}function Re(ze,qe){for(Ee[ze]=qe,ze=0;ze<qe.length;ze++)r.add(qe[ze])}var Me=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ve=Object.prototype.hasOwnProperty,De=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$e={},Oe={};function Ce(ze){return Ve.call(Oe,ze)?!0:Ve.call($e,ze)?!1:De.test(ze)?Oe[ze]=!0:($e[ze]=!0,!1)}function Be(ze,qe,Ke,dn){if(Ke!==null&&Ke.type===0)return!1;switch(typeof qe){case"function":case"symbol":return!0;case"boolean":return dn?!1:Ke!==null?!Ke.acceptsBooleans:(ze=ze.toLowerCase().slice(0,5),ze!=="data-"&&ze!=="aria-");default:return!1}}function Ue(ze,qe,Ke,dn){if(qe===null||typeof qe>"u"||Be(ze,qe,Ke,dn))return!0;if(dn)return!1;if(Ke!==null)switch(Ke.type){case 3:return!qe;case 4:return qe===!1;case 5:return isNaN(qe);case 6:return isNaN(qe)||1>qe}return!1}function We(ze,qe,Ke,dn,vn,Sn,jn){this.acceptsBooleans=qe===2||qe===3||qe===4,this.attributeName=dn,this.attributeNamespace=vn,this.mustUseProperty=Ke,this.propertyName=ze,this.type=qe,this.sanitizeURL=Sn,this.removeEmptyString=jn}var He={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(ze){He[ze]=new We(ze,0,!1,ze,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(ze){var qe=ze[0];He[qe]=new We(qe,1,!1,ze[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(ze){He[ze]=new We(ze,2,!1,ze.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(ze){He[ze]=new We(ze,2,!1,ze,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(ze){He[ze]=new We(ze,3,!1,ze.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(ze){He[ze]=new We(ze,3,!0,ze,null,!1,!1)}),["capture","download"].forEach(function(ze){He[ze]=new We(ze,4,!1,ze,null,!1,!1)}),["cols","rows","size","span"].forEach(function(ze){He[ze]=new We(ze,6,!1,ze,null,!1,!1)}),["rowSpan","start"].forEach(function(ze){He[ze]=new We(ze,5,!1,ze.toLowerCase(),null,!1,!1)});var Ge=/[\-:]([a-z])/g;function Ye(ze){return ze[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(ze){var qe=ze.replace(Ge,Ye);He[qe]=new We(qe,1,!1,ze,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(ze){var qe=ze.replace(Ge,Ye);He[qe]=new We(qe,1,!1,ze,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(ze){var qe=ze.replace(Ge,Ye);He[qe]=new We(qe,1,!1,ze,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(ze){He[ze]=new We(ze,1,!1,ze.toLowerCase(),null,!1,!1)}),He.xlinkHref=new We("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(ze){He[ze]=new We(ze,1,!1,ze.toLowerCase(),null,!0,!0)});function Je(ze,qe,Ke,dn){var vn=He.hasOwnProperty(qe)?He[qe]:null;(vn!==null?vn.type!==0:dn||!(2<qe.length)||qe[0]!=="o"&&qe[0]!=="O"||qe[1]!=="n"&&qe[1]!=="N")&&(Ue(qe,Ke,vn,dn)&&(Ke=null),dn||vn===null?Ce(qe)&&(Ke===null?ze.removeAttribute(qe):ze.setAttribute(qe,""+Ke)):vn.mustUseProperty?ze[vn.propertyName]=Ke===null?vn.type===3?!1:"":Ke:(qe=vn.attributeName,dn=vn.attributeNamespace,Ke===null?ze.removeAttribute(qe):(vn=vn.type,Ke=vn===3||vn===4&&Ke===!0?"":""+Ke,dn?ze.setAttributeNS(dn,qe,Ke):ze.setAttribute(qe,Ke))))}var Ze=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fn=Symbol.for("react.element"),yn=Symbol.for("react.portal"),mn=Symbol.for("react.fragment"),pn=Symbol.for("react.strict_mode"),un=Symbol.for("react.profiler"),bn=Symbol.for("react.provider"),gn=Symbol.for("react.context"),xn=Symbol.for("react.forward_ref"),En=Symbol.for("react.suspense"),Pn=Symbol.for("react.suspense_list"),Ln=Symbol.for("react.memo"),Cn=Symbol.for("react.lazy"),Dn=Symbol.for("react.offscreen"),Un=Symbol.iterator;function Wn(ze){return ze===null||typeof ze!="object"?null:(ze=Un&&ze[Un]||ze["@@iterator"],typeof ze=="function"?ze:null)}var On=Object.assign,$n;function kn(ze){if($n===void 0)try{throw Error()}catch(Ke){var qe=Ke.stack.trim().match(/\n( *(at )?)/);$n=qe&&qe[1]||""}return`
`+$n+ze}var In=!1;function Kn(ze,qe){if(!ze||In)return"";In=!0;var Ke=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(qe)if(qe=function(){throw Error()},Object.defineProperty(qe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(qe,[])}catch(Nr){var dn=Nr}Reflect.construct(ze,[],qe)}else{try{qe.call()}catch(Nr){dn=Nr}ze.call(qe.prototype)}else{try{throw Error()}catch(Nr){dn=Nr}ze()}}catch(Nr){if(Nr&&dn&&typeof Nr.stack=="string"){for(var vn=Nr.stack.split(`
`),Sn=dn.stack.split(`
`),jn=vn.length-1,sr=Sn.length-1;1<=jn&&0<=sr&&vn[jn]!==Sn[sr];)sr--;for(;1<=jn&&0<=sr;jn--,sr--)if(vn[jn]!==Sn[sr]){if(jn!==1||sr!==1)do if(jn--,sr--,0>sr||vn[jn]!==Sn[sr]){var dr=`
`+vn[jn].replace(" at new "," at ");return ze.displayName&&dr.includes("<anonymous>")&&(dr=dr.replace("<anonymous>",ze.displayName)),dr}while(1<=jn&&0<=sr);break}}}finally{In=!1,Error.prepareStackTrace=Ke}return(ze=ze?ze.displayName||ze.name:"")?kn(ze):""}function Qn(ze){switch(ze.tag){case 5:return kn(ze.type);case 16:return kn("Lazy");case 13:return kn("Suspense");case 19:return kn("SuspenseList");case 0:case 2:case 15:return ze=Kn(ze.type,!1),ze;case 11:return ze=Kn(ze.type.render,!1),ze;case 1:return ze=Kn(ze.type,!0),ze;default:return""}}function rr(ze){if(ze==null)return null;if(typeof ze=="function")return ze.displayName||ze.name||null;if(typeof ze=="string")return ze;switch(ze){case mn:return"Fragment";case yn:return"Portal";case un:return"Profiler";case pn:return"StrictMode";case En:return"Suspense";case Pn:return"SuspenseList"}if(typeof ze=="object")switch(ze.$$typeof){case gn:return(ze.displayName||"Context")+".Consumer";case bn:return(ze._context.displayName||"Context")+".Provider";case xn:var qe=ze.render;return ze=ze.displayName,ze||(ze=qe.displayName||qe.name||"",ze=ze!==""?"ForwardRef("+ze+")":"ForwardRef"),ze;case Ln:return qe=ze.displayName||null,qe!==null?qe:rr(ze.type)||"Memo";case Cn:qe=ze._payload,ze=ze._init;try{return rr(ze(qe))}catch{}}return null}function or(ze){var qe=ze.type;switch(ze.tag){case 24:return"Cache";case 9:return(qe.displayName||"Context")+".Consumer";case 10:return(qe._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return ze=qe.render,ze=ze.displayName||ze.name||"",qe.displayName||(ze!==""?"ForwardRef("+ze+")":"ForwardRef");case 7:return"Fragment";case 5:return qe;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rr(qe);case 8:return qe===pn?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof qe=="function")return qe.displayName||qe.name||null;if(typeof qe=="string")return qe}return null}function pr(ze){switch(typeof ze){case"boolean":case"number":case"string":case"undefined":return ze;case"object":return ze;default:return""}}function mr(ze){var qe=ze.type;return(ze=ze.nodeName)&&ze.toLowerCase()==="input"&&(qe==="checkbox"||qe==="radio")}function Er(ze){var qe=mr(ze)?"checked":"value",Ke=Object.getOwnPropertyDescriptor(ze.constructor.prototype,qe),dn=""+ze[qe];if(!ze.hasOwnProperty(qe)&&typeof Ke<"u"&&typeof Ke.get=="function"&&typeof Ke.set=="function"){var vn=Ke.get,Sn=Ke.set;return Object.defineProperty(ze,qe,{configurable:!0,get:function(){return vn.call(this)},set:function(jn){dn=""+jn,Sn.call(this,jn)}}),Object.defineProperty(ze,qe,{enumerable:Ke.enumerable}),{getValue:function(){return dn},setValue:function(jn){dn=""+jn},stopTracking:function(){ze._valueTracker=null,delete ze[qe]}}}}function jr(ze){ze._valueTracker||(ze._valueTracker=Er(ze))}function Kr(ze){if(!ze)return!1;var qe=ze._valueTracker;if(!qe)return!0;var Ke=qe.getValue(),dn="";return ze&&(dn=mr(ze)?ze.checked?"true":"false":ze.value),ze=dn,ze!==Ke?(qe.setValue(ze),!0):!1}function Hr(ze){if(ze=ze||(typeof document<"u"?document:void 0),typeof ze>"u")return null;try{return ze.activeElement||ze.body}catch{return ze.body}}function xr(ze,qe){var Ke=qe.checked;return On({},qe,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:Ke??ze._wrapperState.initialChecked})}function nr(ze,qe){var Ke=qe.defaultValue==null?"":qe.defaultValue,dn=qe.checked!=null?qe.checked:qe.defaultChecked;Ke=pr(qe.value!=null?qe.value:Ke),ze._wrapperState={initialChecked:dn,initialValue:Ke,controlled:qe.type==="checkbox"||qe.type==="radio"?qe.checked!=null:qe.value!=null}}function Oi(ze,qe){qe=qe.checked,qe!=null&&Je(ze,"checked",qe,!1)}function Ti(ze,qe){Oi(ze,qe);var Ke=pr(qe.value),dn=qe.type;if(Ke!=null)dn==="number"?(Ke===0&&ze.value===""||ze.value!=Ke)&&(ze.value=""+Ke):ze.value!==""+Ke&&(ze.value=""+Ke);else if(dn==="submit"||dn==="reset"){ze.removeAttribute("value");return}qe.hasOwnProperty("value")?qr(ze,qe.type,Ke):qe.hasOwnProperty("defaultValue")&&qr(ze,qe.type,pr(qe.defaultValue)),qe.checked==null&&qe.defaultChecked!=null&&(ze.defaultChecked=!!qe.defaultChecked)}function yi(ze,qe,Ke){if(qe.hasOwnProperty("value")||qe.hasOwnProperty("defaultValue")){var dn=qe.type;if(!(dn!=="submit"&&dn!=="reset"||qe.value!==void 0&&qe.value!==null))return;qe=""+ze._wrapperState.initialValue,Ke||qe===ze.value||(ze.value=qe),ze.defaultValue=qe}Ke=ze.name,Ke!==""&&(ze.name=""),ze.defaultChecked=!!ze._wrapperState.initialChecked,Ke!==""&&(ze.name=Ke)}function qr(ze,qe,Ke){(qe!=="number"||Hr(ze.ownerDocument)!==ze)&&(Ke==null?ze.defaultValue=""+ze._wrapperState.initialValue:ze.defaultValue!==""+Ke&&(ze.defaultValue=""+Ke))}var di=Array.isArray;function Zr(ze,qe,Ke,dn){if(ze=ze.options,qe){qe={};for(var vn=0;vn<Ke.length;vn++)qe["$"+Ke[vn]]=!0;for(Ke=0;Ke<ze.length;Ke++)vn=qe.hasOwnProperty("$"+ze[Ke].value),ze[Ke].selected!==vn&&(ze[Ke].selected=vn),vn&&dn&&(ze[Ke].defaultSelected=!0)}else{for(Ke=""+pr(Ke),qe=null,vn=0;vn<ze.length;vn++){if(ze[vn].value===Ke){ze[vn].selected=!0,dn&&(ze[vn].defaultSelected=!0);return}qe!==null||ze[vn].disabled||(qe=ze[vn])}qe!==null&&(qe.selected=!0)}}function mi(ze,qe){if(qe.dangerouslySetInnerHTML!=null)throw Error(t(91));return On({},qe,{value:void 0,defaultValue:void 0,children:""+ze._wrapperState.initialValue})}function pi(ze,qe){var Ke=qe.value;if(Ke==null){if(Ke=qe.children,qe=qe.defaultValue,Ke!=null){if(qe!=null)throw Error(t(92));if(di(Ke)){if(1<Ke.length)throw Error(t(93));Ke=Ke[0]}qe=Ke}qe==null&&(qe=""),Ke=qe}ze._wrapperState={initialValue:pr(Ke)}}function Wi(ze,qe){var Ke=pr(qe.value),dn=pr(qe.defaultValue);Ke!=null&&(Ke=""+Ke,Ke!==ze.value&&(ze.value=Ke),qe.defaultValue==null&&ze.defaultValue!==Ke&&(ze.defaultValue=Ke)),dn!=null&&(ze.defaultValue=""+dn)}function si(ze){var qe=ze.textContent;qe===ze._wrapperState.initialValue&&qe!==""&&qe!==null&&(ze.value=qe)}function _r(ze){switch(ze){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dr(ze,qe){return ze==null||ze==="http://www.w3.org/1999/xhtml"?_r(qe):ze==="http://www.w3.org/2000/svg"&&qe==="foreignObject"?"http://www.w3.org/1999/xhtml":ze}var Xr,Gr=function(ze){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(qe,Ke,dn,vn){MSApp.execUnsafeLocalFunction(function(){return ze(qe,Ke,dn,vn)})}:ze}(function(ze,qe){if(ze.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in ze)ze.innerHTML=qe;else{for(Xr=Xr||document.createElement("div"),Xr.innerHTML="<svg>"+qe.valueOf().toString()+"</svg>",qe=Xr.firstChild;ze.firstChild;)ze.removeChild(ze.firstChild);for(;qe.firstChild;)ze.appendChild(qe.firstChild)}});function ii(ze,qe){if(qe){var Ke=ze.firstChild;if(Ke&&Ke===ze.lastChild&&Ke.nodeType===3){Ke.nodeValue=qe;return}}ze.textContent=qe}var hi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mi=["Webkit","ms","Moz","O"];Object.keys(hi).forEach(function(ze){Mi.forEach(function(qe){qe=qe+ze.charAt(0).toUpperCase()+ze.substring(1),hi[qe]=hi[ze]})});function ji(ze,qe,Ke){return qe==null||typeof qe=="boolean"||qe===""?"":Ke||typeof qe!="number"||qe===0||hi.hasOwnProperty(ze)&&hi[ze]?(""+qe).trim():qe+"px"}function Ur(ze,qe){ze=ze.style;for(var Ke in qe)if(qe.hasOwnProperty(Ke)){var dn=Ke.indexOf("--")===0,vn=ji(Ke,qe[Ke],dn);Ke==="float"&&(Ke="cssFloat"),dn?ze.setProperty(Ke,vn):ze[Ke]=vn}}var Pi=On({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bi(ze,qe){if(qe){if(Pi[ze]&&(qe.children!=null||qe.dangerouslySetInnerHTML!=null))throw Error(t(137,ze));if(qe.dangerouslySetInnerHTML!=null){if(qe.children!=null)throw Error(t(60));if(typeof qe.dangerouslySetInnerHTML!="object"||!("__html"in qe.dangerouslySetInnerHTML))throw Error(t(61))}if(qe.style!=null&&typeof qe.style!="object")throw Error(t(62))}}function vi(ze,qe){if(ze.indexOf("-")===-1)return typeof qe.is=="string";switch(ze){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ri=null;function ui(ze){return ze=ze.target||ze.srcElement||window,ze.correspondingUseElement&&(ze=ze.correspondingUseElement),ze.nodeType===3?ze.parentNode:ze}var vs=null,ds=null,ns=null;function ni(ze){if(ze=bu(ze)){if(typeof vs!="function")throw Error(t(280));var qe=ze.stateNode;qe&&(qe=Bu(qe),vs(ze.stateNode,ze.type,qe))}}function oi(ze){ds?ns?ns.push(ze):ns=[ze]:ds=ze}function Di(){if(ds){var ze=ds,qe=ns;if(ns=ds=null,ni(ze),qe)for(ze=0;ze<qe.length;ze++)ni(qe[ze])}}function Ns(ze,qe){return ze(qe)}function mo(){}var Js=!1;function ki(ze,qe,Ke){if(Js)return ze(qe,Ke);Js=!0;try{return Ns(ze,qe,Ke)}finally{Js=!1,(ds!==null||ns!==null)&&(mo(),Di())}}function ms(ze,qe){var Ke=ze.stateNode;if(Ke===null)return null;var dn=Bu(Ke);if(dn===null)return null;Ke=dn[qe];e:switch(qe){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(dn=!dn.disabled)||(ze=ze.type,dn=!(ze==="button"||ze==="input"||ze==="select"||ze==="textarea")),ze=!dn;break e;default:ze=!1}if(ze)return null;if(Ke&&typeof Ke!="function")throw Error(t(231,qe,typeof Ke));return Ke}var So=!1;if(Me)try{var Ms={};Object.defineProperty(Ms,"passive",{get:function(){So=!0}}),window.addEventListener("test",Ms,Ms),window.removeEventListener("test",Ms,Ms)}catch{So=!1}function Zs(ze,qe,Ke,dn,vn,Sn,jn,sr,dr){var Nr=Array.prototype.slice.call(arguments,3);try{qe.apply(Ke,Nr)}catch(Qr){this.onError(Qr)}}var ws=!1,Cs=null,xs=!1,Yo=null,ta={onError:function(ze){ws=!0,Cs=ze}};function oo(ze,qe,Ke,dn,vn,Sn,jn,sr,dr){ws=!1,Cs=null,Zs.apply(ta,arguments)}function Hn(ze,qe,Ke,dn,vn,Sn,jn,sr,dr){if(oo.apply(this,arguments),ws){if(ws){var Nr=Cs;ws=!1,Cs=null}else throw Error(t(198));xs||(xs=!0,Yo=Nr)}}function ir(ze){var qe=ze,Ke=ze;if(ze.alternate)for(;qe.return;)qe=qe.return;else{ze=qe;do qe=ze,(qe.flags&4098)!==0&&(Ke=qe.return),ze=qe.return;while(ze)}return qe.tag===3?Ke:null}function ur(ze){if(ze.tag===13){var qe=ze.memoizedState;if(qe===null&&(ze=ze.alternate,ze!==null&&(qe=ze.memoizedState)),qe!==null)return qe.dehydrated}return null}function gr(ze){if(ir(ze)!==ze)throw Error(t(188))}function Pr(ze){var qe=ze.alternate;if(!qe){if(qe=ir(ze),qe===null)throw Error(t(188));return qe!==ze?null:ze}for(var Ke=ze,dn=qe;;){var vn=Ke.return;if(vn===null)break;var Sn=vn.alternate;if(Sn===null){if(dn=vn.return,dn!==null){Ke=dn;continue}break}if(vn.child===Sn.child){for(Sn=vn.child;Sn;){if(Sn===Ke)return gr(vn),ze;if(Sn===dn)return gr(vn),qe;Sn=Sn.sibling}throw Error(t(188))}if(Ke.return!==dn.return)Ke=vn,dn=Sn;else{for(var jn=!1,sr=vn.child;sr;){if(sr===Ke){jn=!0,Ke=vn,dn=Sn;break}if(sr===dn){jn=!0,dn=vn,Ke=Sn;break}sr=sr.sibling}if(!jn){for(sr=Sn.child;sr;){if(sr===Ke){jn=!0,Ke=Sn,dn=vn;break}if(sr===dn){jn=!0,dn=Sn,Ke=vn;break}sr=sr.sibling}if(!jn)throw Error(t(189))}}if(Ke.alternate!==dn)throw Error(t(190))}if(Ke.tag!==3)throw Error(t(188));return Ke.stateNode.current===Ke?ze:qe}function Cr(ze){return ze=Pr(ze),ze!==null?Jr(ze):null}function Jr(ze){if(ze.tag===5||ze.tag===6)return ze;for(ze=ze.child;ze!==null;){var qe=Jr(ze);if(qe!==null)return qe;ze=ze.sibling}return null}var _i=e.unstable_scheduleCallback,fi=e.unstable_cancelCallback,Ui=e.unstable_shouldYield,gs=e.unstable_requestPaint,Hi=e.unstable_now,Vs=e.unstable_getCurrentPriorityLevel,Or=e.unstable_ImmediatePriority,Fi=e.unstable_UserBlockingPriority,rs=e.unstable_NormalPriority,go=e.unstable_LowPriority,Uo=e.unstable_IdlePriority,Ea=null,Po=null;function dl(ze){if(Po&&typeof Po.onCommitFiberRoot=="function")try{Po.onCommitFiberRoot(Ea,ze,void 0,(ze.current.flags&128)===128)}catch{}}var _s=Math.clz32?Math.clz32:hl,qa=Math.log,zs=Math.LN2;function hl(ze){return ze>>>=0,ze===0?32:31-(qa(ze)/zs|0)|0}var Wa=64,na=4194304;function ra(ze){switch(ze&-ze){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return ze&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return ze&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return ze}}function ao(ze,qe){var Ke=ze.pendingLanes;if(Ke===0)return 0;var dn=0,vn=ze.suspendedLanes,Sn=ze.pingedLanes,jn=Ke&268435455;if(jn!==0){var sr=jn&~vn;sr!==0?dn=ra(sr):(Sn&=jn,Sn!==0&&(dn=ra(Sn)))}else jn=Ke&~vn,jn!==0?dn=ra(jn):Sn!==0&&(dn=ra(Sn));if(dn===0)return 0;if(qe!==0&&qe!==dn&&(qe&vn)===0&&(vn=dn&-dn,Sn=qe&-qe,vn>=Sn||vn===16&&(Sn&4194240)!==0))return qe;if((dn&4)!==0&&(dn|=Ke&16),qe=ze.entangledLanes,qe!==0)for(ze=ze.entanglements,qe&=dn;0<qe;)Ke=31-_s(qe),vn=1<<Ke,dn|=ze[Ke],qe&=~vn;return dn}function Va(ze,qe){switch(ze){case 1:case 2:case 4:return qe+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return qe+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ts(ze,qe){for(var Ke=ze.suspendedLanes,dn=ze.pingedLanes,vn=ze.expirationTimes,Sn=ze.pendingLanes;0<Sn;){var jn=31-_s(Sn),sr=1<<jn,dr=vn[jn];dr===-1?((sr&Ke)===0||(sr&dn)!==0)&&(vn[jn]=Va(sr,qe)):dr<=qe&&(ze.expiredLanes|=sr),Sn&=~sr}}function Io(ze){return ze=ze.pendingLanes&-1073741825,ze!==0?ze:ze&1073741824?1073741824:0}function Ha(){var ze=Wa;return Wa<<=1,(Wa&4194240)===0&&(Wa=64),ze}function ja(ze){for(var qe=[],Ke=0;31>Ke;Ke++)qe.push(ze);return qe}function ha(ze,qe,Ke){ze.pendingLanes|=qe,qe!==536870912&&(ze.suspendedLanes=0,ze.pingedLanes=0),ze=ze.eventTimes,qe=31-_s(qe),ze[qe]=Ke}function ls(ze,qe){var Ke=ze.pendingLanes&~qe;ze.pendingLanes=qe,ze.suspendedLanes=0,ze.pingedLanes=0,ze.expiredLanes&=qe,ze.mutableReadLanes&=qe,ze.entangledLanes&=qe,qe=ze.entanglements;var dn=ze.eventTimes;for(ze=ze.expirationTimes;0<Ke;){var vn=31-_s(Ke),Sn=1<<vn;qe[vn]=0,dn[vn]=-1,ze[vn]=-1,Ke&=~Sn}}function Ta(ze,qe){var Ke=ze.entangledLanes|=qe;for(ze=ze.entanglements;Ke;){var dn=31-_s(Ke),vn=1<<dn;vn&qe|ze[dn]&qe&&(ze[dn]|=qe),Ke&=~vn}}var ss=0;function zo(ze){return ze&=-ze,1<ze?4<ze?(ze&268435455)!==0?16:536870912:4:1}var Yi,tl,Zi,Xi,Ga,ia=!1,Ro=[],lo=null,ko=null,qo=null,Vi=new Map,Xo=new Map,fa=[],Vl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tl(ze,qe){switch(ze){case"focusin":case"focusout":lo=null;break;case"dragenter":case"dragleave":ko=null;break;case"mouseover":case"mouseout":qo=null;break;case"pointerover":case"pointerout":Vi.delete(qe.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xo.delete(qe.pointerId)}}function Ks(ze,qe,Ke,dn,vn,Sn){return ze===null||ze.nativeEvent!==Sn?(ze={blockedOn:qe,domEventName:Ke,eventSystemFlags:dn,nativeEvent:Sn,targetContainers:[vn]},qe!==null&&(qe=bu(qe),qe!==null&&tl(qe)),ze):(ze.eventSystemFlags|=dn,qe=ze.targetContainers,vn!==null&&qe.indexOf(vn)===-1&&qe.push(vn),ze)}function Aa(ze,qe,Ke,dn,vn){switch(qe){case"focusin":return lo=Ks(lo,ze,qe,Ke,dn,vn),!0;case"dragenter":return ko=Ks(ko,ze,qe,Ke,dn,vn),!0;case"mouseover":return qo=Ks(qo,ze,qe,Ke,dn,vn),!0;case"pointerover":var Sn=vn.pointerId;return Vi.set(Sn,Ks(Vi.get(Sn)||null,ze,qe,Ke,dn,vn)),!0;case"gotpointercapture":return Sn=vn.pointerId,Xo.set(Sn,Ks(Xo.get(Sn)||null,ze,qe,Ke,dn,vn)),!0}return!1}function Al(ze){var qe=Wl(ze.target);if(qe!==null){var Ke=ir(qe);if(Ke!==null){if(qe=Ke.tag,qe===13){if(qe=ur(Ke),qe!==null){ze.blockedOn=qe,Ga(ze.priority,function(){Zi(Ke)});return}}else if(qe===3&&Ke.stateNode.current.memoizedState.isDehydrated){ze.blockedOn=Ke.tag===3?Ke.stateNode.containerInfo:null;return}}}ze.blockedOn=null}function Mn(ze){if(ze.blockedOn!==null)return!1;for(var qe=ze.targetContainers;0<qe.length;){var Ke=_o(ze.domEventName,ze.eventSystemFlags,qe[0],ze.nativeEvent);if(Ke===null){Ke=ze.nativeEvent;var dn=new Ke.constructor(Ke.type,Ke);Ri=dn,Ke.target.dispatchEvent(dn),Ri=null}else return qe=bu(Ke),qe!==null&&tl(qe),ze.blockedOn=Ke,!1;qe.shift()}return!0}function zn(ze,qe,Ke){Mn(ze)&&Ke.delete(qe)}function Jn(){ia=!1,lo!==null&&Mn(lo)&&(lo=null),ko!==null&&Mn(ko)&&(ko=null),qo!==null&&Mn(qo)&&(qo=null),Vi.forEach(zn),Xo.forEach(zn)}function ar(ze,qe){ze.blockedOn===qe&&(ze.blockedOn=null,ia||(ia=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Jn)))}function br(ze){function qe(vn){return ar(vn,ze)}if(0<Ro.length){ar(Ro[0],ze);for(var Ke=1;Ke<Ro.length;Ke++){var dn=Ro[Ke];dn.blockedOn===ze&&(dn.blockedOn=null)}}for(lo!==null&&ar(lo,ze),ko!==null&&ar(ko,ze),qo!==null&&ar(qo,ze),Vi.forEach(qe),Xo.forEach(qe),Ke=0;Ke<fa.length;Ke++)dn=fa[Ke],dn.blockedOn===ze&&(dn.blockedOn=null);for(;0<fa.length&&(Ke=fa[0],Ke.blockedOn===null);)Al(Ke),Ke.blockedOn===null&&fa.shift()}var kr=Ze.ReactCurrentBatchConfig,ti=!0;function li(ze,qe,Ke,dn){var vn=ss,Sn=kr.transition;kr.transition=null;try{ss=1,Gi(ze,qe,Ke,dn)}finally{ss=vn,kr.transition=Sn}}function es(ze,qe,Ke,dn){var vn=ss,Sn=kr.transition;kr.transition=null;try{ss=4,Gi(ze,qe,Ke,dn)}finally{ss=vn,kr.transition=Sn}}function Gi(ze,qe,Ke,dn){if(ti){var vn=_o(ze,qe,Ke,dn);if(vn===null)Vu(ze,qe,dn,hs,Ke),Tl(ze,dn);else if(Aa(vn,ze,qe,Ke,dn))dn.stopPropagation();else if(Tl(ze,dn),qe&4&&-1<Vl.indexOf(ze)){for(;vn!==null;){var Sn=bu(vn);if(Sn!==null&&Yi(Sn),Sn=_o(ze,qe,Ke,dn),Sn===null&&Vu(ze,qe,dn,hs,Ke),Sn===vn)break;vn=Sn}vn!==null&&dn.stopPropagation()}else Vu(ze,qe,dn,null,Ke)}}var hs=null;function _o(ze,qe,Ke,dn){if(hs=null,ze=ui(dn),ze=Wl(ze),ze!==null)if(qe=ir(ze),qe===null)ze=null;else if(Ke=qe.tag,Ke===13){if(ze=ur(qe),ze!==null)return ze;ze=null}else if(Ke===3){if(qe.stateNode.current.memoizedState.isDehydrated)return qe.tag===3?qe.stateNode.containerInfo:null;ze=null}else qe!==ze&&(ze=null);return hs=ze,null}function io(ze){switch(ze){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vs()){case Or:return 1;case Fi:return 4;case rs:case go:return 16;case Uo:return 536870912;default:return 16}default:return 16}}var Rr=null,Ki=null,os=null;function Do(){if(os)return os;var ze,qe=Ki,Ke=qe.length,dn,vn="value"in Rr?Rr.value:Rr.textContent,Sn=vn.length;for(ze=0;ze<Ke&&qe[ze]===vn[ze];ze++);var jn=Ke-ze;for(dn=1;dn<=jn&&qe[Ke-dn]===vn[Sn-dn];dn++);return os=vn.slice(ze,1<dn?1-dn:void 0)}function Ys(ze){var qe=ze.keyCode;return"charCode"in ze?(ze=ze.charCode,ze===0&&qe===13&&(ze=13)):ze=qe,ze===10&&(ze=13),32<=ze||ze===13?ze:0}function Fo(){return!0}function wn(){return!1}function Fn(ze){function qe(Ke,dn,vn,Sn,jn){this._reactName=Ke,this._targetInst=vn,this.type=dn,this.nativeEvent=Sn,this.target=jn,this.currentTarget=null;for(var sr in ze)ze.hasOwnProperty(sr)&&(Ke=ze[sr],this[sr]=Ke?Ke(Sn):Sn[sr]);return this.isDefaultPrevented=(Sn.defaultPrevented!=null?Sn.defaultPrevented:Sn.returnValue===!1)?Fo:wn,this.isPropagationStopped=wn,this}return On(qe.prototype,{preventDefault:function(){this.defaultPrevented=!0;var Ke=this.nativeEvent;Ke&&(Ke.preventDefault?Ke.preventDefault():typeof Ke.returnValue!="unknown"&&(Ke.returnValue=!1),this.isDefaultPrevented=Fo)},stopPropagation:function(){var Ke=this.nativeEvent;Ke&&(Ke.stopPropagation?Ke.stopPropagation():typeof Ke.cancelBubble!="unknown"&&(Ke.cancelBubble=!0),this.isPropagationStopped=Fo)},persist:function(){},isPersistent:Fo}),qe}var er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(ze){return ze.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lr=Fn(er),yr=On({},er,{view:0,detail:0}),$r=Fn(yr),Wr,gi,wi,$i=On({},yr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pa,button:0,buttons:0,relatedTarget:function(ze){return ze.relatedTarget===void 0?ze.fromElement===ze.srcElement?ze.toElement:ze.fromElement:ze.relatedTarget},movementX:function(ze){return"movementX"in ze?ze.movementX:(ze!==wi&&(wi&&ze.type==="mousemove"?(Wr=ze.screenX-wi.screenX,gi=ze.screenY-wi.screenY):gi=Wr=0,wi=ze),Wr)},movementY:function(ze){return"movementY"in ze?ze.movementY:gi}}),Qi=Fn($i),ys=On({},$i,{dataTransfer:0}),qs=Fn(ys),Xs=On({},yr,{relatedTarget:0}),Es=Fn(Xs),uo=On({},er,{animationName:0,elapsedTime:0,pseudoElement:0}),Ls=Fn(uo),Co=On({},er,{clipboardData:function(ze){return"clipboardData"in ze?ze.clipboardData:window.clipboardData}}),Ka=Fn(Co),nl=On({},er,{data:0}),Xl=Fn(nl),Sl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jl(ze){var qe=this.nativeEvent;return qe.getModifierState?qe.getModifierState(ze):(ze=Sa[ze])?!!qe[ze]:!1}function pa(){return jl}var Qe=On({},yr,{key:function(ze){if(ze.key){var qe=Sl[ze.key]||ze.key;if(qe!=="Unidentified")return qe}return ze.type==="keypress"?(ze=Ys(ze),ze===13?"Enter":String.fromCharCode(ze)):ze.type==="keydown"||ze.type==="keyup"?yo[ze.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pa,charCode:function(ze){return ze.type==="keypress"?Ys(ze):0},keyCode:function(ze){return ze.type==="keydown"||ze.type==="keyup"?ze.keyCode:0},which:function(ze){return ze.type==="keypress"?Ys(ze):ze.type==="keydown"||ze.type==="keyup"?ze.keyCode:0}}),An=Fn(Qe),Nn=On({},$i,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yn=Fn(Nn),vr=On({},yr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pa}),Mr=Fn(vr),ei=On({},er,{propertyName:0,elapsedTime:0,pseudoElement:0}),As=Fn(ei),eo=On({},$i,{deltaX:function(ze){return"deltaX"in ze?ze.deltaX:"wheelDeltaX"in ze?-ze.wheelDeltaX:0},deltaY:function(ze){return"deltaY"in ze?ze.deltaY:"wheelDeltaY"in ze?-ze.wheelDeltaY:"wheelDelta"in ze?-ze.wheelDelta:0},deltaZ:0,deltaMode:0}),us=Fn(eo),fs=[9,13,27,32],Ss=Me&&"CompositionEvent"in window,sa=null;Me&&"documentMode"in document&&(sa=document.documentMode);var Qo=Me&&"TextEvent"in window&&!sa,Pa=Me&&(!Ss||sa&&8<sa&&11>=sa),rl=" ",ma=!1;function ga(ze,qe){switch(ze){case"keyup":return fs.indexOf(qe.keyCode)!==-1;case"keydown":return qe.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $l(ze){return ze=ze.detail,typeof ze=="object"&&"data"in ze?ze.data:null}var ya=!1;function Bl(ze,qe){switch(ze){case"compositionend":return $l(qe);case"keypress":return qe.which!==32?null:(ma=!0,rl);case"textInput":return ze=qe.data,ze===rl&&ma?null:ze;default:return null}}function Ou(ze,qe){if(ya)return ze==="compositionend"||!Ss&&ga(ze,qe)?(ze=Do(),os=Ki=Rr=null,ya=!1,ze):null;switch(ze){case"paste":return null;case"keypress":if(!(qe.ctrlKey||qe.altKey||qe.metaKey)||qe.ctrlKey&&qe.altKey){if(qe.char&&1<qe.char.length)return qe.char;if(qe.which)return String.fromCharCode(qe.which)}return null;case"compositionend":return Pa&&qe.locale!=="ko"?null:qe.data;default:return null}}var Ul={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function co(ze){var qe=ze&&ze.nodeName&&ze.nodeName.toLowerCase();return qe==="input"?!!Ul[ze.type]:qe==="textarea"}function Ju(ze,qe,Ke,dn){oi(dn),qe=ic(qe,"onChange"),0<qe.length&&(Ke=new lr("onChange","change",null,Ke,dn),ze.push({event:Ke,listeners:qe}))}var Ia=null,Ra=null;function cu(ze){Du(ze,0)}function zl(ze){var qe=iu(ze);if(Kr(qe))return ze}function du(ze,qe){if(ze==="change")return qe}var Ql=!1;if(Me){var Pl;if(Me){var Il="oninput"in document;if(!Il){var pl=document.createElement("div");pl.setAttribute("oninput","return;"),Il=typeof pl.oninput=="function"}Pl=Il}else Pl=!1;Ql=Pl&&(!document.documentMode||9<document.documentMode)}function hu(){Ia&&(Ia.detachEvent("onpropertychange",ka),Ra=Ia=null)}function ka(ze){if(ze.propertyName==="value"&&zl(Ra)){var qe=[];Ju(qe,Ra,ze,ui(ze)),ki(cu,qe)}}function ml(ze,qe,Ke){ze==="focusin"?(hu(),Ia=qe,Ra=Ke,Ia.attachEvent("onpropertychange",ka)):ze==="focusout"&&hu()}function Ws(ze){if(ze==="selectionchange"||ze==="keyup"||ze==="keydown")return zl(Ra)}function Hs(ze,qe){if(ze==="click")return zl(qe)}function bo(ze,qe){if(ze==="input"||ze==="change")return zl(qe)}function vo(ze,qe){return ze===qe&&(ze!==0||1/ze===1/qe)||ze!==ze&&qe!==qe}var Vo=typeof Object.is=="function"?Object.is:vo;function gl(ze,qe){if(Vo(ze,qe))return!0;if(typeof ze!="object"||ze===null||typeof qe!="object"||qe===null)return!1;var Ke=Object.keys(ze),dn=Object.keys(qe);if(Ke.length!==dn.length)return!1;for(dn=0;dn<Ke.length;dn++){var vn=Ke[dn];if(!Ve.call(qe,vn)||!Vo(ze[vn],qe[vn]))return!1}return!0}function il(ze){for(;ze&&ze.firstChild;)ze=ze.firstChild;return ze}function fu(ze,qe){var Ke=il(ze);ze=0;for(var dn;Ke;){if(Ke.nodeType===3){if(dn=ze+Ke.textContent.length,ze<=qe&&dn>=qe)return{node:Ke,offset:qe-ze};ze=dn}e:{for(;Ke;){if(Ke.nextSibling){Ke=Ke.nextSibling;break e}Ke=Ke.parentNode}Ke=void 0}Ke=il(Ke)}}function xc(ze,qe){return ze&&qe?ze===qe?!0:ze&&ze.nodeType===3?!1:qe&&qe.nodeType===3?xc(ze,qe.parentNode):"contains"in ze?ze.contains(qe):ze.compareDocumentPosition?!!(ze.compareDocumentPosition(qe)&16):!1:!1}function Ec(){for(var ze=window,qe=Hr();qe instanceof ze.HTMLIFrameElement;){try{var Ke=typeof qe.contentWindow.location.href=="string"}catch{Ke=!1}if(Ke)ze=qe.contentWindow;else break;qe=Hr(ze.document)}return qe}function Zu(ze){var qe=ze&&ze.nodeName&&ze.nodeName.toLowerCase();return qe&&(qe==="input"&&(ze.type==="text"||ze.type==="search"||ze.type==="tel"||ze.type==="url"||ze.type==="password")||qe==="textarea"||ze.contentEditable==="true")}function Kc(ze){var qe=Ec(),Ke=ze.focusedElem,dn=ze.selectionRange;if(qe!==Ke&&Ke&&Ke.ownerDocument&&xc(Ke.ownerDocument.documentElement,Ke)){if(dn!==null&&Zu(Ke)){if(qe=dn.start,ze=dn.end,ze===void 0&&(ze=qe),"selectionStart"in Ke)Ke.selectionStart=qe,Ke.selectionEnd=Math.min(ze,Ke.value.length);else if(ze=(qe=Ke.ownerDocument||document)&&qe.defaultView||window,ze.getSelection){ze=ze.getSelection();var vn=Ke.textContent.length,Sn=Math.min(dn.start,vn);dn=dn.end===void 0?Sn:Math.min(dn.end,vn),!ze.extend&&Sn>dn&&(vn=dn,dn=Sn,Sn=vn),vn=fu(Ke,Sn);var jn=fu(Ke,dn);vn&&jn&&(ze.rangeCount!==1||ze.anchorNode!==vn.node||ze.anchorOffset!==vn.offset||ze.focusNode!==jn.node||ze.focusOffset!==jn.offset)&&(qe=qe.createRange(),qe.setStart(vn.node,vn.offset),ze.removeAllRanges(),Sn>dn?(ze.addRange(qe),ze.extend(jn.node,jn.offset)):(qe.setEnd(jn.node,jn.offset),ze.addRange(qe)))}}for(qe=[],ze=Ke;ze=ze.parentNode;)ze.nodeType===1&&qe.push({element:ze,left:ze.scrollLeft,top:ze.scrollTop});for(typeof Ke.focus=="function"&&Ke.focus(),Ke=0;Ke<qe.length;Ke++)ze=qe[Ke],ze.element.scrollLeft=ze.left,ze.element.scrollTop=ze.top}}var Yc=Me&&"documentMode"in document&&11>=document.documentMode,Jl=null,ec=null,pu=null,tc=!1;function Tc(ze,qe,Ke){var dn=Ke.window===Ke?Ke.document:Ke.nodeType===9?Ke:Ke.ownerDocument;tc||Jl==null||Jl!==Hr(dn)||(dn=Jl,"selectionStart"in dn&&Zu(dn)?dn={start:dn.selectionStart,end:dn.selectionEnd}:(dn=(dn.ownerDocument&&dn.ownerDocument.defaultView||window).getSelection(),dn={anchorNode:dn.anchorNode,anchorOffset:dn.anchorOffset,focusNode:dn.focusNode,focusOffset:dn.focusOffset}),pu&&gl(pu,dn)||(pu=dn,dn=ic(ec,"onSelect"),0<dn.length&&(qe=new lr("onSelect","select",null,qe,Ke),ze.push({event:qe,listeners:dn}),qe.target=Jl)))}function Nu(ze,qe){var Ke={};return Ke[ze.toLowerCase()]=qe.toLowerCase(),Ke["Webkit"+ze]="webkit"+qe,Ke["Moz"+ze]="moz"+qe,Ke}var Zl={animationend:Nu("Animation","AnimationEnd"),animationiteration:Nu("Animation","AnimationIteration"),animationstart:Nu("Animation","AnimationStart"),transitionend:Nu("Transition","TransitionEnd")},eu={},Ac={};Me&&(Ac=document.createElement("div").style,"AnimationEvent"in window||(delete Zl.animationend.animation,delete Zl.animationiteration.animation,delete Zl.animationstart.animation),"TransitionEvent"in window||delete Zl.transitionend.transition);function Mu(ze){if(eu[ze])return eu[ze];if(!Zl[ze])return ze;var qe=Zl[ze],Ke;for(Ke in qe)if(qe.hasOwnProperty(Ke)&&Ke in Ac)return eu[ze]=qe[Ke];return ze}var Sc=Mu("animationend"),Pc=Mu("animationiteration"),Ic=Mu("animationstart"),Rc=Mu("transitionend"),kc=new Map,Cc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _l(ze,qe){kc.set(ze,qe),Te(qe,[ze])}for(var mu=0;mu<Cc.length;mu++){var ba=Cc[mu],Ya=ba.toLowerCase(),nc=ba[0].toUpperCase()+ba.slice(1);_l(Ya,"on"+nc)}_l(Sc,"onAnimationEnd"),_l(Pc,"onAnimationIteration"),_l(Ic,"onAnimationStart"),_l("dblclick","onDoubleClick"),_l("focusin","onFocus"),_l("focusout","onBlur"),_l(Rc,"onTransitionEnd"),Re("onMouseEnter",["mouseout","mouseover"]),Re("onMouseLeave",["mouseout","mouseover"]),Re("onPointerEnter",["pointerout","pointerover"]),Re("onPointerLeave",["pointerout","pointerover"]),Te("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Te("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Te("onBeforeInput",["compositionend","keypress","textInput","paste"]),Te("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Te("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Te("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xc=new Set("cancel close invalid load scroll toggle".split(" ").concat(ql));function Lu(ze,qe,Ke){var dn=ze.type||"unknown-event";ze.currentTarget=Ke,Hn(dn,qe,void 0,ze),ze.currentTarget=null}function Du(ze,qe){qe=(qe&4)!==0;for(var Ke=0;Ke<ze.length;Ke++){var dn=ze[Ke],vn=dn.event;dn=dn.listeners;e:{var Sn=void 0;if(qe)for(var jn=dn.length-1;0<=jn;jn--){var sr=dn[jn],dr=sr.instance,Nr=sr.currentTarget;if(sr=sr.listener,dr!==Sn&&vn.isPropagationStopped())break e;Lu(vn,sr,Nr),Sn=dr}else for(jn=0;jn<dn.length;jn++){if(sr=dn[jn],dr=sr.instance,Nr=sr.currentTarget,sr=sr.listener,dr!==Sn&&vn.isPropagationStopped())break e;Lu(vn,sr,Nr),Sn=dr}}}if(xs)throw ze=Yo,xs=!1,Yo=null,ze}function js(ze,qe){var Ke=qe[Oa];Ke===void 0&&(Ke=qe[Oa]=new Set);var dn=ze+"__bubble";Ke.has(dn)||(Fu(qe,ze,2,!1),Ke.add(dn))}function rc(ze,qe,Ke){var dn=0;qe&&(dn|=4),Fu(Ke,ze,dn,qe)}var gu="_reactListening"+Math.random().toString(36).slice(2);function tu(ze){if(!ze[gu]){ze[gu]=!0,r.forEach(function(Ke){Ke!=="selectionchange"&&(Xc.has(Ke)||rc(Ke,!1,ze),rc(Ke,!0,ze))});var qe=ze.nodeType===9?ze:ze.ownerDocument;qe===null||qe[gu]||(qe[gu]=!0,rc("selectionchange",!1,qe))}}function Fu(ze,qe,Ke,dn){switch(io(qe)){case 1:var vn=li;break;case 4:vn=es;break;default:vn=Gi}Ke=vn.bind(null,qe,Ke,ze),vn=void 0,!So||qe!=="touchstart"&&qe!=="touchmove"&&qe!=="wheel"||(vn=!0),dn?vn!==void 0?ze.addEventListener(qe,Ke,{capture:!0,passive:vn}):ze.addEventListener(qe,Ke,!0):vn!==void 0?ze.addEventListener(qe,Ke,{passive:vn}):ze.addEventListener(qe,Ke,!1)}function Vu(ze,qe,Ke,dn,vn){var Sn=dn;if((qe&1)===0&&(qe&2)===0&&dn!==null)e:for(;;){if(dn===null)return;var jn=dn.tag;if(jn===3||jn===4){var sr=dn.stateNode.containerInfo;if(sr===vn||sr.nodeType===8&&sr.parentNode===vn)break;if(jn===4)for(jn=dn.return;jn!==null;){var dr=jn.tag;if((dr===3||dr===4)&&(dr=jn.stateNode.containerInfo,dr===vn||dr.nodeType===8&&dr.parentNode===vn))return;jn=jn.return}for(;sr!==null;){if(jn=Wl(sr),jn===null)return;if(dr=jn.tag,dr===5||dr===6){dn=Sn=jn;continue e}sr=sr.parentNode}}dn=dn.return}ki(function(){var Nr=Sn,Qr=ui(Ke),ri=[];e:{var Yr=kc.get(ze);if(Yr!==void 0){var bi=lr,Ii=ze;switch(ze){case"keypress":if(Ys(Ke)===0)break e;case"keydown":case"keyup":bi=An;break;case"focusin":Ii="focus",bi=Es;break;case"focusout":Ii="blur",bi=Es;break;case"beforeblur":case"afterblur":bi=Es;break;case"click":if(Ke.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":bi=Qi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":bi=qs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":bi=Mr;break;case Sc:case Pc:case Ic:bi=Ls;break;case Rc:bi=As;break;case"scroll":bi=$r;break;case"wheel":bi=us;break;case"copy":case"cut":case"paste":bi=Ka;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":bi=Yn}var Ci=(qe&4)!==0,Bo=!Ci&&ze==="scroll",Ar=Ci?Yr!==null?Yr+"Capture":null:Yr;Ci=[];for(var fr=Nr,Ir;fr!==null;){Ir=fr;var ai=Ir.stateNode;if(Ir.tag===5&&ai!==null&&(Ir=ai,Ar!==null&&(ai=ms(fr,Ar),ai!=null&&Ci.push(ju(fr,ai,Ir)))),Bo)break;fr=fr.return}0<Ci.length&&(Yr=new bi(Yr,Ii,null,Ke,Qr),ri.push({event:Yr,listeners:Ci}))}}if((qe&7)===0){e:{if(Yr=ze==="mouseover"||ze==="pointerover",bi=ze==="mouseout"||ze==="pointerout",Yr&&Ke!==Ri&&(Ii=Ke.relatedTarget||Ke.fromElement)&&(Wl(Ii)||Ii[oa]))break e;if((bi||Yr)&&(Yr=Qr.window===Qr?Qr:(Yr=Qr.ownerDocument)?Yr.defaultView||Yr.parentWindow:window,bi?(Ii=Ke.relatedTarget||Ke.toElement,bi=Nr,Ii=Ii?Wl(Ii):null,Ii!==null&&(Bo=ir(Ii),Ii!==Bo||Ii.tag!==5&&Ii.tag!==6)&&(Ii=null)):(bi=null,Ii=Nr),bi!==Ii)){if(Ci=Qi,ai="onMouseLeave",Ar="onMouseEnter",fr="mouse",(ze==="pointerout"||ze==="pointerover")&&(Ci=Yn,ai="onPointerLeave",Ar="onPointerEnter",fr="pointer"),Bo=bi==null?Yr:iu(bi),Ir=Ii==null?Yr:iu(Ii),Yr=new Ci(ai,fr+"leave",bi,Ke,Qr),Yr.target=Bo,Yr.relatedTarget=Ir,ai=null,Wl(Qr)===Nr&&(Ci=new Ci(Ar,fr+"enter",Ii,Ke,Qr),Ci.target=Ir,Ci.relatedTarget=Bo,ai=Ci),Bo=ai,bi&&Ii)t:{for(Ci=bi,Ar=Ii,fr=0,Ir=Ci;Ir;Ir=nu(Ir))fr++;for(Ir=0,ai=Ar;ai;ai=nu(ai))Ir++;for(;0<fr-Ir;)Ci=nu(Ci),fr--;for(;0<Ir-fr;)Ar=nu(Ar),Ir--;for(;fr--;){if(Ci===Ar||Ar!==null&&Ci===Ar.alternate)break t;Ci=nu(Ci),Ar=nu(Ar)}Ci=null}else Ci=null;bi!==null&&Qc(ri,Yr,bi,Ci,!1),Ii!==null&&Bo!==null&&Qc(ri,Bo,Ii,Ci,!0)}}e:{if(Yr=Nr?iu(Nr):window,bi=Yr.nodeName&&Yr.nodeName.toLowerCase(),bi==="select"||bi==="input"&&Yr.type==="file")var Li=du;else if(co(Yr))if(Ql)Li=bo;else{Li=Ws;var zi=ml}else(bi=Yr.nodeName)&&bi.toLowerCase()==="input"&&(Yr.type==="checkbox"||Yr.type==="radio")&&(Li=Hs);if(Li&&(Li=Li(ze,Nr))){Ju(ri,Li,Ke,Qr);break e}zi&&zi(ze,Yr,Nr),ze==="focusout"&&(zi=Yr._wrapperState)&&zi.controlled&&Yr.type==="number"&&qr(Yr,"number",Yr.value)}switch(zi=Nr?iu(Nr):window,ze){case"focusin":(co(zi)||zi.contentEditable==="true")&&(Jl=zi,ec=Nr,pu=null);break;case"focusout":pu=ec=Jl=null;break;case"mousedown":tc=!0;break;case"contextmenu":case"mouseup":case"dragend":tc=!1,Tc(ri,Ke,Qr);break;case"selectionchange":if(Yc)break;case"keydown":case"keyup":Tc(ri,Ke,Qr)}var qi;if(Ss)e:{switch(ze){case"compositionstart":var ts="onCompositionStart";break e;case"compositionend":ts="onCompositionEnd";break e;case"compositionupdate":ts="onCompositionUpdate";break e}ts=void 0}else ya?ga(ze,Ke)&&(ts="onCompositionEnd"):ze==="keydown"&&Ke.keyCode===229&&(ts="onCompositionStart");ts&&(Pa&&Ke.locale!=="ko"&&(ya||ts!=="onCompositionStart"?ts==="onCompositionEnd"&&ya&&(qi=Do()):(Rr=Qr,Ki="value"in Rr?Rr.value:Rr.textContent,ya=!0)),zi=ic(Nr,ts),0<zi.length&&(ts=new Xl(ts,ze,null,Ke,Qr),ri.push({event:ts,listeners:zi}),qi?ts.data=qi:(qi=$l(Ke),qi!==null&&(ts.data=qi)))),(qi=Qo?Bl(ze,Ke):Ou(ze,Ke))&&(Nr=ic(Nr,"onBeforeInput"),0<Nr.length&&(Qr=new Xl("onBeforeInput","beforeinput",null,Ke,Qr),ri.push({event:Qr,listeners:Nr}),Qr.data=qi))}Du(ri,qe)})}function ju(ze,qe,Ke){return{instance:ze,listener:qe,currentTarget:Ke}}function ic(ze,qe){for(var Ke=qe+"Capture",dn=[];ze!==null;){var vn=ze,Sn=vn.stateNode;vn.tag===5&&Sn!==null&&(vn=Sn,Sn=ms(ze,Ke),Sn!=null&&dn.unshift(ju(ze,Sn,vn)),Sn=ms(ze,qe),Sn!=null&&dn.push(ju(ze,Sn,vn))),ze=ze.return}return dn}function nu(ze){if(ze===null)return null;do ze=ze.return;while(ze&&ze.tag!==5);return ze||null}function Qc(ze,qe,Ke,dn,vn){for(var Sn=qe._reactName,jn=[];Ke!==null&&Ke!==dn;){var sr=Ke,dr=sr.alternate,Nr=sr.stateNode;if(dr!==null&&dr===dn)break;sr.tag===5&&Nr!==null&&(sr=Nr,vn?(dr=ms(Ke,Sn),dr!=null&&jn.unshift(ju(Ke,dr,sr))):vn||(dr=ms(Ke,Sn),dr!=null&&jn.push(ju(Ke,dr,sr)))),Ke=Ke.return}jn.length!==0&&ze.push({event:qe,listeners:jn})}var Od=/\r\n?/g,Nd=/\u0000|\uFFFD/g;function Jc(ze){return(typeof ze=="string"?ze:""+ze).replace(Od,`
`).replace(Nd,"")}function sc(ze,qe,Ke){if(qe=Jc(qe),Jc(ze)!==qe&&Ke)throw Error(t(425))}function _u(){}var $u=null,ru=null;function Oc(ze,qe){return ze==="textarea"||ze==="noscript"||typeof qe.children=="string"||typeof qe.children=="number"||typeof qe.dangerouslySetInnerHTML=="object"&&qe.dangerouslySetInnerHTML!==null&&qe.dangerouslySetInnerHTML.__html!=null}var Nc=typeof setTimeout=="function"?setTimeout:void 0,Zc=typeof clearTimeout=="function"?clearTimeout:void 0,ed=typeof Promise=="function"?Promise:void 0,Md=typeof queueMicrotask=="function"?queueMicrotask:typeof ed<"u"?function(ze){return ed.resolve(null).then(ze).catch(Ld)}:Nc;function Ld(ze){setTimeout(function(){throw ze})}function Mc(ze,qe){var Ke=qe,dn=0;do{var vn=Ke.nextSibling;if(ze.removeChild(Ke),vn&&vn.nodeType===8)if(Ke=vn.data,Ke==="/$"){if(dn===0){ze.removeChild(vn),br(qe);return}dn--}else Ke!=="$"&&Ke!=="$?"&&Ke!=="$!"||dn++;Ke=vn}while(Ke);br(qe)}function va(ze){for(;ze!=null;ze=ze.nextSibling){var qe=ze.nodeType;if(qe===1||qe===3)break;if(qe===8){if(qe=ze.data,qe==="$"||qe==="$!"||qe==="$?")break;if(qe==="/$")return null}}return ze}function Xa(ze){ze=ze.previousSibling;for(var qe=0;ze;){if(ze.nodeType===8){var Ke=ze.data;if(Ke==="$"||Ke==="$!"||Ke==="$?"){if(qe===0)return ze;qe--}else Ke==="/$"&&qe++}ze=ze.previousSibling}return null}var Ca=Math.random().toString(36).slice(2),yl="__reactFiber$"+Ca,yu="__reactProps$"+Ca,oa="__reactContainer$"+Ca,Oa="__reactEvents$"+Ca,Dd="__reactListeners$"+Ca,Fd="__reactHandles$"+Ca;function Wl(ze){var qe=ze[yl];if(qe)return qe;for(var Ke=ze.parentNode;Ke;){if(qe=Ke[oa]||Ke[yl]){if(Ke=qe.alternate,qe.child!==null||Ke!==null&&Ke.child!==null)for(ze=Xa(ze);ze!==null;){if(Ke=ze[yl])return Ke;ze=Xa(ze)}return qe}ze=Ke,Ke=ze.parentNode}return null}function bu(ze){return ze=ze[yl]||ze[oa],!ze||ze.tag!==5&&ze.tag!==6&&ze.tag!==13&&ze.tag!==3?null:ze}function iu(ze){if(ze.tag===5||ze.tag===6)return ze.stateNode;throw Error(t(33))}function Bu(ze){return ze[yu]||null}var Lc=[],Rl=-1;function sl(ze){return{current:ze}}function Os(ze){0>Rl||(ze.current=Lc[Rl],Lc[Rl]=null,Rl--)}function Ds(ze,qe){Rl++,Lc[Rl]=ze.current,ze.current=qe}var Hl={},Jo=sl(Hl),Na=sl(!1),su=Hl;function vu(ze,qe){var Ke=ze.type.contextTypes;if(!Ke)return Hl;var dn=ze.stateNode;if(dn&&dn.__reactInternalMemoizedUnmaskedChildContext===qe)return dn.__reactInternalMemoizedMaskedChildContext;var vn={},Sn;for(Sn in Ke)vn[Sn]=qe[Sn];return dn&&(ze=ze.stateNode,ze.__reactInternalMemoizedUnmaskedChildContext=qe,ze.__reactInternalMemoizedMaskedChildContext=vn),vn}function Ma(ze){return ze=ze.childContextTypes,ze!=null}function oc(){Os(Na),Os(Jo)}function nd(ze,qe,Ke){if(Jo.current!==Hl)throw Error(t(168));Ds(Jo,qe),Ds(Na,Ke)}function Dc(ze,qe,Ke){var dn=ze.stateNode;if(qe=qe.childContextTypes,typeof dn.getChildContext!="function")return Ke;dn=dn.getChildContext();for(var vn in dn)if(!(vn in qe))throw Error(t(108,or(ze)||"Unknown",vn));return On({},Ke,dn)}function ou(ze){return ze=(ze=ze.stateNode)&&ze.__reactInternalMemoizedMergedChildContext||Hl,su=Jo.current,Ds(Jo,ze),Ds(Na,Na.current),!0}function rd(ze,qe,Ke){var dn=ze.stateNode;if(!dn)throw Error(t(169));Ke?(ze=Dc(ze,qe,su),dn.__reactInternalMemoizedMergedChildContext=ze,Os(Na),Os(Jo),Ds(Jo,ze)):Os(Na),Ds(Na,Ke)}var kl=null,Uu=!1,Xe=!1;function hn(ze){kl===null?kl=[ze]:kl.push(ze)}function Tn(ze){Uu=!0,hn(ze)}function Rn(){if(!Xe&&kl!==null){Xe=!0;var ze=0,qe=ss;try{var Ke=kl;for(ss=1;ze<Ke.length;ze++){var dn=Ke[ze];do dn=dn(!0);while(dn!==null)}kl=null,Uu=!1}catch(vn){throw kl!==null&&(kl=kl.slice(ze+1)),_i(Or,Rn),vn}finally{ss=qe,Xe=!1}}return null}var Vn=[],Bn=0,qn=null,Gn=0,Xn=[],Zn=0,cr=null,Tr=1,tr="";function hr(ze,qe){Vn[Bn++]=Gn,Vn[Bn++]=qn,qn=ze,Gn=qe}function wr(ze,qe,Ke){Xn[Zn++]=Tr,Xn[Zn++]=tr,Xn[Zn++]=cr,cr=ze;var dn=Tr;ze=tr;var vn=32-_s(dn)-1;dn&=~(1<<vn),Ke+=1;var Sn=32-_s(qe)+vn;if(30<Sn){var jn=vn-vn%5;Sn=(dn&(1<<jn)-1).toString(32),dn>>=jn,vn-=jn,Tr=1<<32-_s(qe)+vn|Ke<<vn|dn,tr=Sn+ze}else Tr=1<<Sn|Ke<<vn|dn,tr=ze}function Vr(ze){ze.return!==null&&(hr(ze,1),wr(ze,1,0))}function Sr(ze){for(;ze===qn;)qn=Vn[--Bn],Vn[Bn]=null,Gn=Vn[--Bn],Vn[Bn]=null;for(;ze===cr;)cr=Xn[--Zn],Xn[Zn]=null,tr=Xn[--Zn],Xn[Zn]=null,Tr=Xn[--Zn],Xn[Zn]=null}var Lr=null,Fr=null,Br=!1,zr=null;function Ni(ze,qe){var Ke=El(5,null,null,0);Ke.elementType="DELETED",Ke.stateNode=qe,Ke.return=ze,qe=ze.deletions,qe===null?(ze.deletions=[Ke],ze.flags|=16):qe.push(Ke)}function xi(ze,qe){switch(ze.tag){case 5:var Ke=ze.type;return qe=qe.nodeType!==1||Ke.toLowerCase()!==qe.nodeName.toLowerCase()?null:qe,qe!==null?(ze.stateNode=qe,Lr=ze,Fr=va(qe.firstChild),!0):!1;case 6:return qe=ze.pendingProps===""||qe.nodeType!==3?null:qe,qe!==null?(ze.stateNode=qe,Lr=ze,Fr=null,!0):!1;case 13:return qe=qe.nodeType!==8?null:qe,qe!==null?(Ke=cr!==null?{id:Tr,overflow:tr}:null,ze.memoizedState={dehydrated:qe,treeContext:Ke,retryLane:1073741824},Ke=El(18,null,null,0),Ke.stateNode=qe,Ke.return=ze,ze.child=Ke,Lr=ze,Fr=null,!0):!1;default:return!1}}function is(ze){return(ze.mode&1)!==0&&(ze.flags&128)===0}function Si(ze){if(Br){var qe=Fr;if(qe){var Ke=qe;if(!xi(ze,qe)){if(is(ze))throw Error(t(418));qe=va(Ke.nextSibling);var dn=Lr;qe&&xi(ze,qe)?Ni(dn,Ke):(ze.flags=ze.flags&-4097|2,Br=!1,Lr=ze)}}else{if(is(ze))throw Error(t(418));ze.flags=ze.flags&-4097|2,Br=!1,Lr=ze}}}function ps(ze){for(ze=ze.return;ze!==null&&ze.tag!==5&&ze.tag!==3&&ze.tag!==13;)ze=ze.return;Lr=ze}function ho(ze){if(ze!==Lr)return!1;if(!Br)return ps(ze),Br=!0,!1;var qe;if((qe=ze.tag!==3)&&!(qe=ze.tag!==5)&&(qe=ze.type,qe=qe!=="head"&&qe!=="body"&&!Oc(ze.type,ze.memoizedProps)),qe&&(qe=Fr)){if(is(ze))throw as(),Error(t(418));for(;qe;)Ni(ze,qe),qe=va(qe.nextSibling)}if(ps(ze),ze.tag===13){if(ze=ze.memoizedState,ze=ze!==null?ze.dehydrated:null,!ze)throw Error(t(317));e:{for(ze=ze.nextSibling,qe=0;ze;){if(ze.nodeType===8){var Ke=ze.data;if(Ke==="/$"){if(qe===0){Fr=va(ze.nextSibling);break e}qe--}else Ke!=="$"&&Ke!=="$!"&&Ke!=="$?"||qe++}ze=ze.nextSibling}Fr=null}}else Fr=Lr?va(ze.stateNode.nextSibling):null;return!0}function as(){for(var ze=Fr;ze;)ze=va(ze.nextSibling)}function Ei(){Fr=Lr=null,Br=!1}function ci(ze){zr===null?zr=[ze]:zr.push(ze)}var wo=Ze.ReactCurrentBatchConfig;function Ji(ze,qe,Ke){if(ze=Ke.ref,ze!==null&&typeof ze!="function"&&typeof ze!="object"){if(Ke._owner){if(Ke=Ke._owner,Ke){if(Ke.tag!==1)throw Error(t(309));var dn=Ke.stateNode}if(!dn)throw Error(t(147,ze));var vn=dn,Sn=""+ze;return qe!==null&&qe.ref!==null&&typeof qe.ref=="function"&&qe.ref._stringRef===Sn?qe.ref:(qe=function(jn){var sr=vn.refs;jn===null?delete sr[Sn]:sr[Sn]=jn},qe._stringRef=Sn,qe)}if(typeof ze!="string")throw Error(t(284));if(!Ke._owner)throw Error(t(290,ze))}return ze}function cs(ze,qe){throw ze=Object.prototype.toString.call(qe),Error(t(31,ze==="[object Object]"?"object with keys {"+Object.keys(qe).join(", ")+"}":ze))}function Gs(ze){var qe=ze._init;return qe(ze._payload)}function Wo(ze){function qe(Ar,fr){if(ze){var Ir=Ar.deletions;Ir===null?(Ar.deletions=[fr],Ar.flags|=16):Ir.push(fr)}}function Ke(Ar,fr){if(!ze)return null;for(;fr!==null;)qe(Ar,fr),fr=fr.sibling;return null}function dn(Ar,fr){for(Ar=new Map;fr!==null;)fr.key!==null?Ar.set(fr.key,fr):Ar.set(fr.index,fr),fr=fr.sibling;return Ar}function vn(Ar,fr){return Ar=ku(Ar,fr),Ar.index=0,Ar.sibling=null,Ar}function Sn(Ar,fr,Ir){return Ar.index=Ir,ze?(Ir=Ar.alternate,Ir!==null?(Ir=Ir.index,Ir<fr?(Ar.flags|=2,fr):Ir):(Ar.flags|=2,fr)):(Ar.flags|=1048576,fr)}function jn(Ar){return ze&&Ar.alternate===null&&(Ar.flags|=2),Ar}function sr(Ar,fr,Ir,ai){return fr===null||fr.tag!==6?(fr=hh(Ir,Ar.mode,ai),fr.return=Ar,fr):(fr=vn(fr,Ir),fr.return=Ar,fr)}function dr(Ar,fr,Ir,ai){var Li=Ir.type;return Li===mn?Qr(Ar,fr,Ir.props.children,ai,Ir.key):fr!==null&&(fr.elementType===Li||typeof Li=="object"&&Li!==null&&Li.$$typeof===Cn&&Gs(Li)===fr.type)?(ai=vn(fr,Ir.props),ai.ref=Ji(Ar,fr,Ir),ai.return=Ar,ai):(ai=Td(Ir.type,Ir.key,Ir.props,null,Ar.mode,ai),ai.ref=Ji(Ar,fr,Ir),ai.return=Ar,ai)}function Nr(Ar,fr,Ir,ai){return fr===null||fr.tag!==4||fr.stateNode.containerInfo!==Ir.containerInfo||fr.stateNode.implementation!==Ir.implementation?(fr=fh(Ir,Ar.mode,ai),fr.return=Ar,fr):(fr=vn(fr,Ir.children||[]),fr.return=Ar,fr)}function Qr(Ar,fr,Ir,ai,Li){return fr===null||fr.tag!==7?(fr=Xu(Ir,Ar.mode,ai,Li),fr.return=Ar,fr):(fr=vn(fr,Ir),fr.return=Ar,fr)}function ri(Ar,fr,Ir){if(typeof fr=="string"&&fr!==""||typeof fr=="number")return fr=hh(""+fr,Ar.mode,Ir),fr.return=Ar,fr;if(typeof fr=="object"&&fr!==null){switch(fr.$$typeof){case fn:return Ir=Td(fr.type,fr.key,fr.props,null,Ar.mode,Ir),Ir.ref=Ji(Ar,null,fr),Ir.return=Ar,Ir;case yn:return fr=fh(fr,Ar.mode,Ir),fr.return=Ar,fr;case Cn:var ai=fr._init;return ri(Ar,ai(fr._payload),Ir)}if(di(fr)||Wn(fr))return fr=Xu(fr,Ar.mode,Ir,null),fr.return=Ar,fr;cs(Ar,fr)}return null}function Yr(Ar,fr,Ir,ai){var Li=fr!==null?fr.key:null;if(typeof Ir=="string"&&Ir!==""||typeof Ir=="number")return Li!==null?null:sr(Ar,fr,""+Ir,ai);if(typeof Ir=="object"&&Ir!==null){switch(Ir.$$typeof){case fn:return Ir.key===Li?dr(Ar,fr,Ir,ai):null;case yn:return Ir.key===Li?Nr(Ar,fr,Ir,ai):null;case Cn:return Li=Ir._init,Yr(Ar,fr,Li(Ir._payload),ai)}if(di(Ir)||Wn(Ir))return Li!==null?null:Qr(Ar,fr,Ir,ai,null);cs(Ar,Ir)}return null}function bi(Ar,fr,Ir,ai,Li){if(typeof ai=="string"&&ai!==""||typeof ai=="number")return Ar=Ar.get(Ir)||null,sr(fr,Ar,""+ai,Li);if(typeof ai=="object"&&ai!==null){switch(ai.$$typeof){case fn:return Ar=Ar.get(ai.key===null?Ir:ai.key)||null,dr(fr,Ar,ai,Li);case yn:return Ar=Ar.get(ai.key===null?Ir:ai.key)||null,Nr(fr,Ar,ai,Li);case Cn:var zi=ai._init;return bi(Ar,fr,Ir,zi(ai._payload),Li)}if(di(ai)||Wn(ai))return Ar=Ar.get(Ir)||null,Qr(fr,Ar,ai,Li,null);cs(fr,ai)}return null}function Ii(Ar,fr,Ir,ai){for(var Li=null,zi=null,qi=fr,ts=fr=0,da=null;qi!==null&&ts<Ir.length;ts++){qi.index>ts?(da=qi,qi=null):da=qi.sibling;var ks=Yr(Ar,qi,Ir[ts],ai);if(ks===null){qi===null&&(qi=da);break}ze&&qi&&ks.alternate===null&&qe(Ar,qi),fr=Sn(ks,fr,ts),zi===null?Li=ks:zi.sibling=ks,zi=ks,qi=da}if(ts===Ir.length)return Ke(Ar,qi),Br&&hr(Ar,ts),Li;if(qi===null){for(;ts<Ir.length;ts++)qi=ri(Ar,Ir[ts],ai),qi!==null&&(fr=Sn(qi,fr,ts),zi===null?Li=qi:zi.sibling=qi,zi=qi);return Br&&hr(Ar,ts),Li}for(qi=dn(Ar,qi);ts<Ir.length;ts++)da=bi(qi,Ar,ts,Ir[ts],ai),da!==null&&(ze&&da.alternate!==null&&qi.delete(da.key===null?ts:da.key),fr=Sn(da,fr,ts),zi===null?Li=da:zi.sibling=da,zi=da);return ze&&qi.forEach(function(Cu){return qe(Ar,Cu)}),Br&&hr(Ar,ts),Li}function Ci(Ar,fr,Ir,ai){var Li=Wn(Ir);if(typeof Li!="function")throw Error(t(150));if(Ir=Li.call(Ir),Ir==null)throw Error(t(151));for(var zi=Li=null,qi=fr,ts=fr=0,da=null,ks=Ir.next();qi!==null&&!ks.done;ts++,ks=Ir.next()){qi.index>ts?(da=qi,qi=null):da=qi.sibling;var Cu=Yr(Ar,qi,ks.value,ai);if(Cu===null){qi===null&&(qi=da);break}ze&&qi&&Cu.alternate===null&&qe(Ar,qi),fr=Sn(Cu,fr,ts),zi===null?Li=Cu:zi.sibling=Cu,zi=Cu,qi=da}if(ks.done)return Ke(Ar,qi),Br&&hr(Ar,ts),Li;if(qi===null){for(;!ks.done;ts++,ks=Ir.next())ks=ri(Ar,ks.value,ai),ks!==null&&(fr=Sn(ks,fr,ts),zi===null?Li=ks:zi.sibling=ks,zi=ks);return Br&&hr(Ar,ts),Li}for(qi=dn(Ar,qi);!ks.done;ts++,ks=Ir.next())ks=bi(qi,Ar,ts,ks.value,ai),ks!==null&&(ze&&ks.alternate!==null&&qi.delete(ks.key===null?ts:ks.key),fr=Sn(ks,fr,ts),zi===null?Li=ks:zi.sibling=ks,zi=ks);return ze&&qi.forEach(function(ip){return qe(Ar,ip)}),Br&&hr(Ar,ts),Li}function Bo(Ar,fr,Ir,ai){if(typeof Ir=="object"&&Ir!==null&&Ir.type===mn&&Ir.key===null&&(Ir=Ir.props.children),typeof Ir=="object"&&Ir!==null){switch(Ir.$$typeof){case fn:e:{for(var Li=Ir.key,zi=fr;zi!==null;){if(zi.key===Li){if(Li=Ir.type,Li===mn){if(zi.tag===7){Ke(Ar,zi.sibling),fr=vn(zi,Ir.props.children),fr.return=Ar,Ar=fr;break e}}else if(zi.elementType===Li||typeof Li=="object"&&Li!==null&&Li.$$typeof===Cn&&Gs(Li)===zi.type){Ke(Ar,zi.sibling),fr=vn(zi,Ir.props),fr.ref=Ji(Ar,zi,Ir),fr.return=Ar,Ar=fr;break e}Ke(Ar,zi);break}else qe(Ar,zi);zi=zi.sibling}Ir.type===mn?(fr=Xu(Ir.props.children,Ar.mode,ai,Ir.key),fr.return=Ar,Ar=fr):(ai=Td(Ir.type,Ir.key,Ir.props,null,Ar.mode,ai),ai.ref=Ji(Ar,fr,Ir),ai.return=Ar,Ar=ai)}return jn(Ar);case yn:e:{for(zi=Ir.key;fr!==null;){if(fr.key===zi)if(fr.tag===4&&fr.stateNode.containerInfo===Ir.containerInfo&&fr.stateNode.implementation===Ir.implementation){Ke(Ar,fr.sibling),fr=vn(fr,Ir.children||[]),fr.return=Ar,Ar=fr;break e}else{Ke(Ar,fr);break}else qe(Ar,fr);fr=fr.sibling}fr=fh(Ir,Ar.mode,ai),fr.return=Ar,Ar=fr}return jn(Ar);case Cn:return zi=Ir._init,Bo(Ar,fr,zi(Ir._payload),ai)}if(di(Ir))return Ii(Ar,fr,Ir,ai);if(Wn(Ir))return Ci(Ar,fr,Ir,ai);cs(Ar,Ir)}return typeof Ir=="string"&&Ir!==""||typeof Ir=="number"?(Ir=""+Ir,fr!==null&&fr.tag===6?(Ke(Ar,fr.sibling),fr=vn(fr,Ir),fr.return=Ar,Ar=fr):(Ke(Ar,fr),fr=hh(Ir,Ar.mode,ai),fr.return=Ar,Ar=fr),jn(Ar)):Ke(Ar,fr)}return Bo}var Oo=Wo(!0),so=Wo(!1),jo=sl(null),Ho=null,to=null,bs=null;function Ps(){bs=to=Ho=null}function no(ze){var qe=jo.current;Os(jo),ze._currentValue=qe}function Is(ze,qe,Ke){for(;ze!==null;){var dn=ze.alternate;if((ze.childLanes&qe)!==qe?(ze.childLanes|=qe,dn!==null&&(dn.childLanes|=qe)):dn!==null&&(dn.childLanes&qe)!==qe&&(dn.childLanes|=qe),ze===Ke)break;ze=ze.return}}function fo(ze,qe){Ho=ze,bs=to=null,ze=ze.dependencies,ze!==null&&ze.firstContext!==null&&((ze.lanes&qe)!==0&&(Ja=!0),ze.firstContext=null)}function po(ze){var qe=ze._currentValue;if(bs!==ze)if(ze={context:ze,memoizedValue:qe,next:null},to===null){if(Ho===null)throw Error(t(308));to=ze,Ho.dependencies={lanes:0,firstContext:ze}}else to=to.next=ze;return qe}var $s=null;function aa(ze){$s===null?$s=[ze]:$s.push(ze)}function Fs(ze,qe,Ke,dn){var vn=qe.interleaved;return vn===null?(Ke.next=Ke,aa(qe)):(Ke.next=vn.next,vn.next=Ke),qe.interleaved=Ke,Bs(ze,dn)}function Bs(ze,qe){ze.lanes|=qe;var Ke=ze.alternate;for(Ke!==null&&(Ke.lanes|=qe),Ke=ze,ze=ze.return;ze!==null;)ze.childLanes|=qe,Ke=ze.alternate,Ke!==null&&(Ke.childLanes|=qe),Ke=ze,ze=ze.return;return Ke.tag===3?Ke.stateNode:null}var No=!1;function Zo(ze){ze.updateQueue={baseState:ze.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function La(ze,qe){ze=ze.updateQueue,qe.updateQueue===ze&&(qe.updateQueue={baseState:ze.baseState,firstBaseUpdate:ze.firstBaseUpdate,lastBaseUpdate:ze.lastBaseUpdate,shared:ze.shared,effects:ze.effects})}function xo(ze,qe){return{eventTime:ze,lane:qe,tag:0,payload:null,callback:null,next:null}}function Eo(ze,qe,Ke){var dn=ze.updateQueue;if(dn===null)return null;if(dn=dn.shared,(Rs&2)!==0){var vn=dn.pending;return vn===null?qe.next=qe:(qe.next=vn.next,vn.next=qe),dn.pending=qe,Bs(ze,Ke)}return vn=dn.interleaved,vn===null?(qe.next=qe,aa(dn)):(qe.next=vn.next,vn.next=qe),dn.interleaved=qe,Bs(ze,Ke)}function la(ze,qe,Ke){if(qe=qe.updateQueue,qe!==null&&(qe=qe.shared,(Ke&4194240)!==0)){var dn=qe.lanes;dn&=ze.pendingLanes,Ke|=dn,qe.lanes=Ke,Ta(ze,Ke)}}function Us(ze,qe){var Ke=ze.updateQueue,dn=ze.alternate;if(dn!==null&&(dn=dn.updateQueue,Ke===dn)){var vn=null,Sn=null;if(Ke=Ke.firstBaseUpdate,Ke!==null){do{var jn={eventTime:Ke.eventTime,lane:Ke.lane,tag:Ke.tag,payload:Ke.payload,callback:Ke.callback,next:null};Sn===null?vn=Sn=jn:Sn=Sn.next=jn,Ke=Ke.next}while(Ke!==null);Sn===null?vn=Sn=qe:Sn=Sn.next=qe}else vn=Sn=qe;Ke={baseState:dn.baseState,firstBaseUpdate:vn,lastBaseUpdate:Sn,shared:dn.shared,effects:dn.effects},ze.updateQueue=Ke;return}ze=Ke.lastBaseUpdate,ze===null?Ke.firstBaseUpdate=qe:ze.next=qe,Ke.lastBaseUpdate=qe}function ua(ze,qe,Ke,dn){var vn=ze.updateQueue;No=!1;var Sn=vn.firstBaseUpdate,jn=vn.lastBaseUpdate,sr=vn.shared.pending;if(sr!==null){vn.shared.pending=null;var dr=sr,Nr=dr.next;dr.next=null,jn===null?Sn=Nr:jn.next=Nr,jn=dr;var Qr=ze.alternate;Qr!==null&&(Qr=Qr.updateQueue,sr=Qr.lastBaseUpdate,sr!==jn&&(sr===null?Qr.firstBaseUpdate=Nr:sr.next=Nr,Qr.lastBaseUpdate=dr))}if(Sn!==null){var ri=vn.baseState;jn=0,Qr=Nr=dr=null,sr=Sn;do{var Yr=sr.lane,bi=sr.eventTime;if((dn&Yr)===Yr){Qr!==null&&(Qr=Qr.next={eventTime:bi,lane:0,tag:sr.tag,payload:sr.payload,callback:sr.callback,next:null});e:{var Ii=ze,Ci=sr;switch(Yr=qe,bi=Ke,Ci.tag){case 1:if(Ii=Ci.payload,typeof Ii=="function"){ri=Ii.call(bi,ri,Yr);break e}ri=Ii;break e;case 3:Ii.flags=Ii.flags&-65537|128;case 0:if(Ii=Ci.payload,Yr=typeof Ii=="function"?Ii.call(bi,ri,Yr):Ii,Yr==null)break e;ri=On({},ri,Yr);break e;case 2:No=!0}}sr.callback!==null&&sr.lane!==0&&(ze.flags|=64,Yr=vn.effects,Yr===null?vn.effects=[sr]:Yr.push(sr))}else bi={eventTime:bi,lane:Yr,tag:sr.tag,payload:sr.payload,callback:sr.callback,next:null},Qr===null?(Nr=Qr=bi,dr=ri):Qr=Qr.next=bi,jn|=Yr;if(sr=sr.next,sr===null){if(sr=vn.shared.pending,sr===null)break;Yr=sr,sr=Yr.next,Yr.next=null,vn.lastBaseUpdate=Yr,vn.shared.pending=null}}while(!0);if(Qr===null&&(dr=ri),vn.baseState=dr,vn.firstBaseUpdate=Nr,vn.lastBaseUpdate=Qr,qe=vn.shared.interleaved,qe!==null){vn=qe;do jn|=vn.lane,vn=vn.next;while(vn!==qe)}else Sn===null&&(vn.shared.lanes=0);Hu|=jn,ze.lanes=jn,ze.memoizedState=ri}}function Qa(ze,qe,Ke){if(ze=qe.effects,qe.effects=null,ze!==null)for(qe=0;qe<ze.length;qe++){var dn=ze[qe],vn=dn.callback;if(vn!==null){if(dn.callback=null,dn=Ke,typeof vn!="function")throw Error(t(191,vn));vn.call(dn)}}}var ol={},Go=sl(ol),To=sl(ol),Gl=sl(ol);function Cl(ze){if(ze===ol)throw Error(t(174));return ze}function wu(ze,qe){switch(Ds(Gl,qe),Ds(To,ze),Ds(Go,ol),ze=qe.nodeType,ze){case 9:case 11:qe=(qe=qe.documentElement)?qe.namespaceURI:Dr(null,"");break;default:ze=ze===8?qe.parentNode:qe,qe=ze.namespaceURI||null,ze=ze.tagName,qe=Dr(qe,ze)}Os(Go),Ds(Go,qe)}function bl(){Os(Go),Os(To),Os(Gl)}function sd(ze){Cl(Gl.current);var qe=Cl(Go.current),Ke=Dr(qe,ze.type);qe!==Ke&&(Ds(To,ze),Ds(Go,Ke))}function Fc(ze){To.current===ze&&(Os(Go),Os(To))}var Qs=sl(0);function al(ze){for(var qe=ze;qe!==null;){if(qe.tag===13){var Ke=qe.memoizedState;if(Ke!==null&&(Ke=Ke.dehydrated,Ke===null||Ke.data==="$?"||Ke.data==="$!"))return qe}else if(qe.tag===19&&qe.memoizedProps.revealOrder!==void 0){if((qe.flags&128)!==0)return qe}else if(qe.child!==null){qe.child.return=qe,qe=qe.child;continue}if(qe===ze)break;for(;qe.sibling===null;){if(qe.return===null||qe.return===ze)return null;qe=qe.return}qe.sibling.return=qe.return,qe=qe.sibling}return null}var Vc=[];function jc(){for(var ze=0;ze<Vc.length;ze++)Vc[ze]._workInProgressVersionPrimary=null;Vc.length=0}var ac=Ze.ReactCurrentDispatcher,uc=Ze.ReactCurrentBatchConfig,vl=0,ro=null,Mo=null,Ao=null,xu=!1,Ol=!1,Eu=0,Vd=0;function $o(){throw Error(t(321))}function cc(ze,qe){if(qe===null)return!1;for(var Ke=0;Ke<qe.length&&Ke<ze.length;Ke++)if(!Vo(ze[Ke],qe[Ke]))return!1;return!0}function zu(ze,qe,Ke,dn,vn,Sn){if(vl=Sn,ro=qe,qe.memoizedState=null,qe.updateQueue=null,qe.lanes=0,ac.current=ze===null||ze.memoizedState===null?kf:Cf,ze=Ke(dn,vn),Ol){Sn=0;do{if(Ol=!1,Eu=0,25<=Sn)throw Error(t(301));Sn+=1,Ao=Mo=null,qe.updateQueue=null,ac.current=Of,ze=Ke(dn,vn)}while(Ol)}if(ac.current=cd,qe=Mo!==null&&Mo.next!==null,vl=0,Ao=Mo=ro=null,xu=!1,qe)throw Error(t(300));return ze}function wl(){var ze=Eu!==0;return Eu=0,ze}function ll(){var ze={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ao===null?ro.memoizedState=Ao=ze:Ao=Ao.next=ze,Ao}function $a(){if(Mo===null){var ze=ro.alternate;ze=ze!==null?ze.memoizedState:null}else ze=Mo.next;var qe=Ao===null?ro.memoizedState:Ao.next;if(qe!==null)Ao=qe,Mo=ze;else{if(ze===null)throw Error(t(310));Mo=ze,ze={memoizedState:Mo.memoizedState,baseState:Mo.baseState,baseQueue:Mo.baseQueue,queue:Mo.queue,next:null},Ao===null?ro.memoizedState=Ao=ze:Ao=Ao.next=ze}return Ao}function qu(ze,qe){return typeof qe=="function"?qe(ze):qe}function dc(ze){var qe=$a(),Ke=qe.queue;if(Ke===null)throw Error(t(311));Ke.lastRenderedReducer=ze;var dn=Mo,vn=dn.baseQueue,Sn=Ke.pending;if(Sn!==null){if(vn!==null){var jn=vn.next;vn.next=Sn.next,Sn.next=jn}dn.baseQueue=vn=Sn,Ke.pending=null}if(vn!==null){Sn=vn.next,dn=dn.baseState;var sr=jn=null,dr=null,Nr=Sn;do{var Qr=Nr.lane;if((vl&Qr)===Qr)dr!==null&&(dr=dr.next={lane:0,action:Nr.action,hasEagerState:Nr.hasEagerState,eagerState:Nr.eagerState,next:null}),dn=Nr.hasEagerState?Nr.eagerState:ze(dn,Nr.action);else{var ri={lane:Qr,action:Nr.action,hasEagerState:Nr.hasEagerState,eagerState:Nr.eagerState,next:null};dr===null?(sr=dr=ri,jn=dn):dr=dr.next=ri,ro.lanes|=Qr,Hu|=Qr}Nr=Nr.next}while(Nr!==null&&Nr!==Sn);dr===null?jn=dn:dr.next=sr,Vo(dn,qe.memoizedState)||(Ja=!0),qe.memoizedState=dn,qe.baseState=jn,qe.baseQueue=dr,Ke.lastRenderedState=dn}if(ze=Ke.interleaved,ze!==null){vn=ze;do Sn=vn.lane,ro.lanes|=Sn,Hu|=Sn,vn=vn.next;while(vn!==ze)}else vn===null&&(Ke.lanes=0);return[qe.memoizedState,Ke.dispatch]}function Kl(ze){var qe=$a(),Ke=qe.queue;if(Ke===null)throw Error(t(311));Ke.lastRenderedReducer=ze;var dn=Ke.dispatch,vn=Ke.pending,Sn=qe.memoizedState;if(vn!==null){Ke.pending=null;var jn=vn=vn.next;do Sn=ze(Sn,jn.action),jn=jn.next;while(jn!==vn);Vo(Sn,qe.memoizedState)||(Ja=!0),qe.memoizedState=Sn,qe.baseQueue===null&&(qe.baseState=Sn),Ke.lastRenderedState=Sn}return[Sn,dn]}function od(){}function $c(ze,qe){var Ke=ro,dn=$a(),vn=qe(),Sn=!Vo(dn.memoizedState,vn);if(Sn&&(dn.memoizedState=vn,Ja=!0),dn=dn.queue,pc(ld.bind(null,Ke,dn,ze),[ze]),dn.getSnapshot!==qe||Sn||Ao!==null&&Ao.memoizedState.tag&1){if(Ke.flags|=2048,Ba(9,Bc.bind(null,Ke,dn,vn,qe),void 0,null),ca===null)throw Error(t(349));(vl&30)!==0||ad(Ke,qe,vn)}return vn}function ad(ze,qe,Ke){ze.flags|=16384,ze={getSnapshot:qe,value:Ke},qe=ro.updateQueue,qe===null?(qe={lastEffect:null,stores:null},ro.updateQueue=qe,qe.stores=[ze]):(Ke=qe.stores,Ke===null?qe.stores=[ze]:Ke.push(ze))}function Bc(ze,qe,Ke,dn){qe.value=Ke,qe.getSnapshot=dn,Tu(qe)&&hc(ze)}function ld(ze,qe,Ke){return Ke(function(){Tu(qe)&&hc(ze)})}function Tu(ze){var qe=ze.getSnapshot;ze=ze.value;try{var Ke=qe();return!Vo(ze,Ke)}catch{return!0}}function hc(ze){var qe=Bs(ze,1);qe!==null&&Fl(qe,ze,1,-1)}function Wu(ze){var qe=ll();return typeof ze=="function"&&(ze=ze()),qe.memoizedState=qe.baseState=ze,ze={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qu,lastRenderedState:ze},qe.queue=ze,ze=ze.dispatch=Rf.bind(null,ro,ze),[qe.memoizedState,ze]}function Ba(ze,qe,Ke,dn){return ze={tag:ze,create:qe,destroy:Ke,deps:dn,next:null},qe=ro.updateQueue,qe===null?(qe={lastEffect:null,stores:null},ro.updateQueue=qe,qe.lastEffect=ze.next=ze):(Ke=qe.lastEffect,Ke===null?qe.lastEffect=ze.next=ze:(dn=Ke.next,Ke.next=ze,ze.next=dn,qe.lastEffect=ze)),ze}function Nl(){return $a().memoizedState}function ul(ze,qe,Ke,dn){var vn=ll();ro.flags|=ze,vn.memoizedState=Ba(1|qe,Ke,void 0,dn===void 0?null:dn)}function au(ze,qe,Ke,dn){var vn=$a();dn=dn===void 0?null:dn;var Sn=void 0;if(Mo!==null){var jn=Mo.memoizedState;if(Sn=jn.destroy,dn!==null&&cc(dn,jn.deps)){vn.memoizedState=Ba(qe,Ke,Sn,dn);return}}ro.flags|=ze,vn.memoizedState=Ba(1|qe,Ke,Sn,dn)}function fc(ze,qe){return ul(8390656,8,ze,qe)}function pc(ze,qe){return au(2048,8,ze,qe)}function ud(ze,qe){return au(4,2,ze,qe)}function mc(ze,qe){return au(4,4,ze,qe)}function gc(ze,qe){if(typeof qe=="function")return ze=ze(),qe(ze),function(){qe(null)};if(qe!=null)return ze=ze(),qe.current=ze,function(){qe.current=null}}function bh(ze,qe,Ke){return Ke=Ke!=null?Ke.concat([ze]):null,au(4,4,gc.bind(null,qe,ze),Ke)}function jd(){}function wh(ze,qe){var Ke=$a();qe=qe===void 0?null:qe;var dn=Ke.memoizedState;return dn!==null&&qe!==null&&cc(qe,dn[1])?dn[0]:(Ke.memoizedState=[ze,qe],ze)}function xh(ze,qe){var Ke=$a();qe=qe===void 0?null:qe;var dn=Ke.memoizedState;return dn!==null&&qe!==null&&cc(qe,dn[1])?dn[0]:(ze=ze(),Ke.memoizedState=[ze,qe],ze)}function Eh(ze,qe,Ke){return(vl&21)===0?(ze.baseState&&(ze.baseState=!1,Ja=!0),ze.memoizedState=Ke):(Vo(Ke,qe)||(Ke=Ha(),ro.lanes|=Ke,Hu|=Ke,ze.baseState=!0),qe)}function Sf(ze,qe){var Ke=ss;ss=Ke!==0&&4>Ke?Ke:4,ze(!0);var dn=uc.transition;uc.transition={};try{ze(!1),qe()}finally{ss=Ke,uc.transition=dn}}function Th(){return $a().memoizedState}function Pf(ze,qe,Ke){var dn=Iu(ze);if(Ke={lane:dn,action:Ke,hasEagerState:!1,eagerState:null,next:null},Ah(ze))Sh(qe,Ke);else if(Ke=Fs(ze,qe,Ke,dn),Ke!==null){var vn=za();Fl(Ke,ze,dn,vn),Ph(Ke,qe,dn)}}function Rf(ze,qe,Ke){var dn=Iu(ze),vn={lane:dn,action:Ke,hasEagerState:!1,eagerState:null,next:null};if(Ah(ze))Sh(qe,vn);else{var Sn=ze.alternate;if(ze.lanes===0&&(Sn===null||Sn.lanes===0)&&(Sn=qe.lastRenderedReducer,Sn!==null))try{var jn=qe.lastRenderedState,sr=Sn(jn,Ke);if(vn.hasEagerState=!0,vn.eagerState=sr,Vo(sr,jn)){var dr=qe.interleaved;dr===null?(vn.next=vn,aa(qe)):(vn.next=dr.next,dr.next=vn),qe.interleaved=vn;return}}catch{}finally{}Ke=Fs(ze,qe,vn,dn),Ke!==null&&(vn=za(),Fl(Ke,ze,dn,vn),Ph(Ke,qe,dn))}}function Ah(ze){var qe=ze.alternate;return ze===ro||qe!==null&&qe===ro}function Sh(ze,qe){Ol=xu=!0;var Ke=ze.pending;Ke===null?qe.next=qe:(qe.next=Ke.next,Ke.next=qe),ze.pending=qe}function Ph(ze,qe,Ke){if((Ke&4194240)!==0){var dn=qe.lanes;dn&=ze.pendingLanes,Ke|=dn,qe.lanes=Ke,Ta(ze,Ke)}}var cd={readContext:po,useCallback:$o,useContext:$o,useEffect:$o,useImperativeHandle:$o,useInsertionEffect:$o,useLayoutEffect:$o,useMemo:$o,useReducer:$o,useRef:$o,useState:$o,useDebugValue:$o,useDeferredValue:$o,useTransition:$o,useMutableSource:$o,useSyncExternalStore:$o,useId:$o,unstable_isNewReconciler:!1},kf={readContext:po,useCallback:function(ze,qe){return ll().memoizedState=[ze,qe===void 0?null:qe],ze},useContext:po,useEffect:fc,useImperativeHandle:function(ze,qe,Ke){return Ke=Ke!=null?Ke.concat([ze]):null,ul(4194308,4,gc.bind(null,qe,ze),Ke)},useLayoutEffect:function(ze,qe){return ul(4194308,4,ze,qe)},useInsertionEffect:function(ze,qe){return ul(4,2,ze,qe)},useMemo:function(ze,qe){var Ke=ll();return qe=qe===void 0?null:qe,ze=ze(),Ke.memoizedState=[ze,qe],ze},useReducer:function(ze,qe,Ke){var dn=ll();return qe=Ke!==void 0?Ke(qe):qe,dn.memoizedState=dn.baseState=qe,ze={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ze,lastRenderedState:qe},dn.queue=ze,ze=ze.dispatch=Pf.bind(null,ro,ze),[dn.memoizedState,ze]},useRef:function(ze){var qe=ll();return ze={current:ze},qe.memoizedState=ze},useState:Wu,useDebugValue:jd,useDeferredValue:function(ze){return ll().memoizedState=ze},useTransition:function(){var ze=Wu(!1),qe=ze[0];return ze=Sf.bind(null,ze[1]),ll().memoizedState=ze,[qe,ze]},useMutableSource:function(){},useSyncExternalStore:function(ze,qe,Ke){var dn=ro,vn=ll();if(Br){if(Ke===void 0)throw Error(t(407));Ke=Ke()}else{if(Ke=qe(),ca===null)throw Error(t(349));(vl&30)!==0||ad(dn,qe,Ke)}vn.memoizedState=Ke;var Sn={value:Ke,getSnapshot:qe};return vn.queue=Sn,fc(ld.bind(null,dn,Sn,ze),[ze]),dn.flags|=2048,Ba(9,Bc.bind(null,dn,Sn,Ke,qe),void 0,null),Ke},useId:function(){var ze=ll(),qe=ca.identifierPrefix;if(Br){var Ke=tr,dn=Tr;Ke=(dn&~(1<<32-_s(dn)-1)).toString(32)+Ke,qe=":"+qe+"R"+Ke,Ke=Eu++,0<Ke&&(qe+="H"+Ke.toString(32)),qe+=":"}else Ke=Vd++,qe=":"+qe+"r"+Ke.toString(32)+":";return ze.memoizedState=qe},unstable_isNewReconciler:!1},Cf={readContext:po,useCallback:wh,useContext:po,useEffect:pc,useImperativeHandle:bh,useInsertionEffect:ud,useLayoutEffect:mc,useMemo:xh,useReducer:dc,useRef:Nl,useState:function(){return dc(qu)},useDebugValue:jd,useDeferredValue:function(ze){var qe=$a();return Eh(qe,Mo.memoizedState,ze)},useTransition:function(){var ze=dc(qu)[0],qe=$a().memoizedState;return[ze,qe]},useMutableSource:od,useSyncExternalStore:$c,useId:Th,unstable_isNewReconciler:!1},Of={readContext:po,useCallback:wh,useContext:po,useEffect:pc,useImperativeHandle:bh,useInsertionEffect:ud,useLayoutEffect:mc,useMemo:xh,useReducer:Kl,useRef:Nl,useState:function(){return Kl(qu)},useDebugValue:jd,useDeferredValue:function(ze){var qe=$a();return Mo===null?qe.memoizedState=ze:Eh(qe,Mo.memoizedState,ze)},useTransition:function(){var ze=Kl(qu)[0],qe=$a().memoizedState;return[ze,qe]},useMutableSource:od,useSyncExternalStore:$c,useId:Th,unstable_isNewReconciler:!1};function Ml(ze,qe){if(ze&&ze.defaultProps){qe=On({},qe),ze=ze.defaultProps;for(var Ke in ze)qe[Ke]===void 0&&(qe[Ke]=ze[Ke]);return qe}return qe}function $d(ze,qe,Ke,dn){qe=ze.memoizedState,Ke=Ke(dn,qe),Ke=Ke==null?qe:On({},qe,Ke),ze.memoizedState=Ke,ze.lanes===0&&(ze.updateQueue.baseState=Ke)}var dd={isMounted:function(ze){return(ze=ze._reactInternals)?ir(ze)===ze:!1},enqueueSetState:function(ze,qe,Ke){ze=ze._reactInternals;var dn=za(),vn=Iu(ze),Sn=xo(dn,vn);Sn.payload=qe,Ke!=null&&(Sn.callback=Ke),qe=Eo(ze,Sn,vn),qe!==null&&(Fl(qe,ze,vn,dn),la(qe,ze,vn))},enqueueReplaceState:function(ze,qe,Ke){ze=ze._reactInternals;var dn=za(),vn=Iu(ze),Sn=xo(dn,vn);Sn.tag=1,Sn.payload=qe,Ke!=null&&(Sn.callback=Ke),qe=Eo(ze,Sn,vn),qe!==null&&(Fl(qe,ze,vn,dn),la(qe,ze,vn))},enqueueForceUpdate:function(ze,qe){ze=ze._reactInternals;var Ke=za(),dn=Iu(ze),vn=xo(Ke,dn);vn.tag=2,qe!=null&&(vn.callback=qe),qe=Eo(ze,vn,dn),qe!==null&&(Fl(qe,ze,dn,Ke),la(qe,ze,dn))}};function Ih(ze,qe,Ke,dn,vn,Sn,jn){return ze=ze.stateNode,typeof ze.shouldComponentUpdate=="function"?ze.shouldComponentUpdate(dn,Sn,jn):qe.prototype&&qe.prototype.isPureReactComponent?!gl(Ke,dn)||!gl(vn,Sn):!0}function Rh(ze,qe,Ke){var dn=!1,vn=Hl,Sn=qe.contextType;return typeof Sn=="object"&&Sn!==null?Sn=po(Sn):(vn=Ma(qe)?su:Jo.current,dn=qe.contextTypes,Sn=(dn=dn!=null)?vu(ze,vn):Hl),qe=new qe(Ke,Sn),ze.memoizedState=qe.state!==null&&qe.state!==void 0?qe.state:null,qe.updater=dd,ze.stateNode=qe,qe._reactInternals=ze,dn&&(ze=ze.stateNode,ze.__reactInternalMemoizedUnmaskedChildContext=vn,ze.__reactInternalMemoizedMaskedChildContext=Sn),qe}function kh(ze,qe,Ke,dn){ze=qe.state,typeof qe.componentWillReceiveProps=="function"&&qe.componentWillReceiveProps(Ke,dn),typeof qe.UNSAFE_componentWillReceiveProps=="function"&&qe.UNSAFE_componentWillReceiveProps(Ke,dn),qe.state!==ze&&dd.enqueueReplaceState(qe,qe.state,null)}function Bd(ze,qe,Ke,dn){var vn=ze.stateNode;vn.props=Ke,vn.state=ze.memoizedState,vn.refs={},Zo(ze);var Sn=qe.contextType;typeof Sn=="object"&&Sn!==null?vn.context=po(Sn):(Sn=Ma(qe)?su:Jo.current,vn.context=vu(ze,Sn)),vn.state=ze.memoizedState,Sn=qe.getDerivedStateFromProps,typeof Sn=="function"&&($d(ze,qe,Sn,Ke),vn.state=ze.memoizedState),typeof qe.getDerivedStateFromProps=="function"||typeof vn.getSnapshotBeforeUpdate=="function"||typeof vn.UNSAFE_componentWillMount!="function"&&typeof vn.componentWillMount!="function"||(qe=vn.state,typeof vn.componentWillMount=="function"&&vn.componentWillMount(),typeof vn.UNSAFE_componentWillMount=="function"&&vn.UNSAFE_componentWillMount(),qe!==vn.state&&dd.enqueueReplaceState(vn,vn.state,null),ua(ze,Ke,vn,dn),vn.state=ze.memoizedState),typeof vn.componentDidMount=="function"&&(ze.flags|=4194308)}function _c(ze,qe){try{var Ke="",dn=qe;do Ke+=Qn(dn),dn=dn.return;while(dn);var vn=Ke}catch(Sn){vn=`
Error generating stack: `+Sn.message+`
`+Sn.stack}return{value:ze,source:qe,stack:vn,digest:null}}function Ud(ze,qe,Ke){return{value:ze,source:null,stack:Ke??null,digest:qe??null}}function zd(ze,qe){try{console.error(qe.value)}catch(Ke){setTimeout(function(){throw Ke})}}var Nf=typeof WeakMap=="function"?WeakMap:Map;function Ch(ze,qe,Ke){Ke=xo(-1,Ke),Ke.tag=3,Ke.payload={element:null};var dn=qe.value;return Ke.callback=function(){yd||(yd=!0,ih=dn),zd(ze,qe)},Ke}function Oh(ze,qe,Ke){Ke=xo(-1,Ke),Ke.tag=3;var dn=ze.type.getDerivedStateFromError;if(typeof dn=="function"){var vn=qe.value;Ke.payload=function(){return dn(vn)},Ke.callback=function(){zd(ze,qe)}}var Sn=ze.stateNode;return Sn!==null&&typeof Sn.componentDidCatch=="function"&&(Ke.callback=function(){zd(ze,qe),typeof dn!="function"&&(Su===null?Su=new Set([this]):Su.add(this));var jn=qe.stack;this.componentDidCatch(qe.value,{componentStack:jn!==null?jn:""})}),Ke}function Nh(ze,qe,Ke){var dn=ze.pingCache;if(dn===null){dn=ze.pingCache=new Nf;var vn=new Set;dn.set(qe,vn)}else vn=dn.get(qe),vn===void 0&&(vn=new Set,dn.set(qe,vn));vn.has(Ke)||(vn.add(Ke),ze=Gf.bind(null,ze,qe,Ke),qe.then(ze,ze))}function Mh(ze){do{var qe;if((qe=ze.tag===13)&&(qe=ze.memoizedState,qe=qe!==null?qe.dehydrated!==null:!0),qe)return ze;ze=ze.return}while(ze!==null);return null}function Lh(ze,qe,Ke,dn,vn){return(ze.mode&1)===0?(ze===qe?ze.flags|=65536:(ze.flags|=128,Ke.flags|=131072,Ke.flags&=-52805,Ke.tag===1&&(Ke.alternate===null?Ke.tag=17:(qe=xo(-1,1),qe.tag=2,Eo(Ke,qe,1))),Ke.lanes|=1),ze):(ze.flags|=65536,ze.lanes=vn,ze)}var Mf=Ze.ReactCurrentOwner,Ja=!1;function Ua(ze,qe,Ke,dn){qe.child=ze===null?so(qe,null,Ke,dn):Oo(qe,ze.child,Ke,dn)}function Dh(ze,qe,Ke,dn,vn){Ke=Ke.render;var Sn=qe.ref;return fo(qe,vn),dn=zu(ze,qe,Ke,dn,Sn,vn),Ke=wl(),ze!==null&&!Ja?(qe.updateQueue=ze.updateQueue,qe.flags&=-2053,ze.lanes&=~vn,lu(ze,qe,vn)):(Br&&Ke&&Vr(qe),qe.flags|=1,Ua(ze,qe,dn,vn),qe.child)}function Fh(ze,qe,Ke,dn,vn){if(ze===null){var Sn=Ke.type;return typeof Sn=="function"&&!dh(Sn)&&Sn.defaultProps===void 0&&Ke.compare===null&&Ke.defaultProps===void 0?(qe.tag=15,qe.type=Sn,Vh(ze,qe,Sn,dn,vn)):(ze=Td(Ke.type,null,dn,qe,qe.mode,vn),ze.ref=qe.ref,ze.return=qe,qe.child=ze)}if(Sn=ze.child,(ze.lanes&vn)===0){var jn=Sn.memoizedProps;if(Ke=Ke.compare,Ke=Ke!==null?Ke:gl,Ke(jn,dn)&&ze.ref===qe.ref)return lu(ze,qe,vn)}return qe.flags|=1,ze=ku(Sn,dn),ze.ref=qe.ref,ze.return=qe,qe.child=ze}function Vh(ze,qe,Ke,dn,vn){if(ze!==null){var Sn=ze.memoizedProps;if(gl(Sn,dn)&&ze.ref===qe.ref)if(Ja=!1,qe.pendingProps=dn=Sn,(ze.lanes&vn)!==0)(ze.flags&131072)!==0&&(Ja=!0);else return qe.lanes=ze.lanes,lu(ze,qe,vn)}return qd(ze,qe,Ke,dn,vn)}function jh(ze,qe,Ke){var dn=qe.pendingProps,vn=dn.children,Sn=ze!==null?ze.memoizedState:null;if(dn.mode==="hidden")if((qe.mode&1)===0)qe.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ds(bc,cl),cl|=Ke;else{if((Ke&1073741824)===0)return ze=Sn!==null?Sn.baseLanes|Ke:Ke,qe.lanes=qe.childLanes=1073741824,qe.memoizedState={baseLanes:ze,cachePool:null,transitions:null},qe.updateQueue=null,Ds(bc,cl),cl|=ze,null;qe.memoizedState={baseLanes:0,cachePool:null,transitions:null},dn=Sn!==null?Sn.baseLanes:Ke,Ds(bc,cl),cl|=dn}else Sn!==null?(dn=Sn.baseLanes|Ke,qe.memoizedState=null):dn=Ke,Ds(bc,cl),cl|=dn;return Ua(ze,qe,vn,Ke),qe.child}function $h(ze,qe){var Ke=qe.ref;(ze===null&&Ke!==null||ze!==null&&ze.ref!==Ke)&&(qe.flags|=512,qe.flags|=2097152)}function qd(ze,qe,Ke,dn,vn){var Sn=Ma(Ke)?su:Jo.current;return Sn=vu(qe,Sn),fo(qe,vn),Ke=zu(ze,qe,Ke,dn,Sn,vn),dn=wl(),ze!==null&&!Ja?(qe.updateQueue=ze.updateQueue,qe.flags&=-2053,ze.lanes&=~vn,lu(ze,qe,vn)):(Br&&dn&&Vr(qe),qe.flags|=1,Ua(ze,qe,Ke,vn),qe.child)}function Bh(ze,qe,Ke,dn,vn){if(Ma(Ke)){var Sn=!0;ou(qe)}else Sn=!1;if(fo(qe,vn),qe.stateNode===null)fd(ze,qe),Rh(qe,Ke,dn),Bd(qe,Ke,dn,vn),dn=!0;else if(ze===null){var jn=qe.stateNode,sr=qe.memoizedProps;jn.props=sr;var dr=jn.context,Nr=Ke.contextType;typeof Nr=="object"&&Nr!==null?Nr=po(Nr):(Nr=Ma(Ke)?su:Jo.current,Nr=vu(qe,Nr));var Qr=Ke.getDerivedStateFromProps,ri=typeof Qr=="function"||typeof jn.getSnapshotBeforeUpdate=="function";ri||typeof jn.UNSAFE_componentWillReceiveProps!="function"&&typeof jn.componentWillReceiveProps!="function"||(sr!==dn||dr!==Nr)&&kh(qe,jn,dn,Nr),No=!1;var Yr=qe.memoizedState;jn.state=Yr,ua(qe,dn,jn,vn),dr=qe.memoizedState,sr!==dn||Yr!==dr||Na.current||No?(typeof Qr=="function"&&($d(qe,Ke,Qr,dn),dr=qe.memoizedState),(sr=No||Ih(qe,Ke,sr,dn,Yr,dr,Nr))?(ri||typeof jn.UNSAFE_componentWillMount!="function"&&typeof jn.componentWillMount!="function"||(typeof jn.componentWillMount=="function"&&jn.componentWillMount(),typeof jn.UNSAFE_componentWillMount=="function"&&jn.UNSAFE_componentWillMount()),typeof jn.componentDidMount=="function"&&(qe.flags|=4194308)):(typeof jn.componentDidMount=="function"&&(qe.flags|=4194308),qe.memoizedProps=dn,qe.memoizedState=dr),jn.props=dn,jn.state=dr,jn.context=Nr,dn=sr):(typeof jn.componentDidMount=="function"&&(qe.flags|=4194308),dn=!1)}else{jn=qe.stateNode,La(ze,qe),sr=qe.memoizedProps,Nr=qe.type===qe.elementType?sr:Ml(qe.type,sr),jn.props=Nr,ri=qe.pendingProps,Yr=jn.context,dr=Ke.contextType,typeof dr=="object"&&dr!==null?dr=po(dr):(dr=Ma(Ke)?su:Jo.current,dr=vu(qe,dr));var bi=Ke.getDerivedStateFromProps;(Qr=typeof bi=="function"||typeof jn.getSnapshotBeforeUpdate=="function")||typeof jn.UNSAFE_componentWillReceiveProps!="function"&&typeof jn.componentWillReceiveProps!="function"||(sr!==ri||Yr!==dr)&&kh(qe,jn,dn,dr),No=!1,Yr=qe.memoizedState,jn.state=Yr,ua(qe,dn,jn,vn);var Ii=qe.memoizedState;sr!==ri||Yr!==Ii||Na.current||No?(typeof bi=="function"&&($d(qe,Ke,bi,dn),Ii=qe.memoizedState),(Nr=No||Ih(qe,Ke,Nr,dn,Yr,Ii,dr)||!1)?(Qr||typeof jn.UNSAFE_componentWillUpdate!="function"&&typeof jn.componentWillUpdate!="function"||(typeof jn.componentWillUpdate=="function"&&jn.componentWillUpdate(dn,Ii,dr),typeof jn.UNSAFE_componentWillUpdate=="function"&&jn.UNSAFE_componentWillUpdate(dn,Ii,dr)),typeof jn.componentDidUpdate=="function"&&(qe.flags|=4),typeof jn.getSnapshotBeforeUpdate=="function"&&(qe.flags|=1024)):(typeof jn.componentDidUpdate!="function"||sr===ze.memoizedProps&&Yr===ze.memoizedState||(qe.flags|=4),typeof jn.getSnapshotBeforeUpdate!="function"||sr===ze.memoizedProps&&Yr===ze.memoizedState||(qe.flags|=1024),qe.memoizedProps=dn,qe.memoizedState=Ii),jn.props=dn,jn.state=Ii,jn.context=dr,dn=Nr):(typeof jn.componentDidUpdate!="function"||sr===ze.memoizedProps&&Yr===ze.memoizedState||(qe.flags|=4),typeof jn.getSnapshotBeforeUpdate!="function"||sr===ze.memoizedProps&&Yr===ze.memoizedState||(qe.flags|=1024),dn=!1)}return Wd(ze,qe,Ke,dn,Sn,vn)}function Wd(ze,qe,Ke,dn,vn,Sn){$h(ze,qe);var jn=(qe.flags&128)!==0;if(!dn&&!jn)return vn&&rd(qe,Ke,!1),lu(ze,qe,Sn);dn=qe.stateNode,Mf.current=qe;var sr=jn&&typeof Ke.getDerivedStateFromError!="function"?null:dn.render();return qe.flags|=1,ze!==null&&jn?(qe.child=Oo(qe,ze.child,null,Sn),qe.child=Oo(qe,null,sr,Sn)):Ua(ze,qe,sr,Sn),qe.memoizedState=dn.state,vn&&rd(qe,Ke,!0),qe.child}function Uh(ze){var qe=ze.stateNode;qe.pendingContext?nd(ze,qe.pendingContext,qe.pendingContext!==qe.context):qe.context&&nd(ze,qe.context,!1),wu(ze,qe.containerInfo)}function zh(ze,qe,Ke,dn,vn){return Ei(),ci(vn),qe.flags|=256,Ua(ze,qe,Ke,dn),qe.child}var Hd={dehydrated:null,treeContext:null,retryLane:0};function Gd(ze){return{baseLanes:ze,cachePool:null,transitions:null}}function qh(ze,qe,Ke){var dn=qe.pendingProps,vn=Qs.current,Sn=!1,jn=(qe.flags&128)!==0,sr;if((sr=jn)||(sr=ze!==null&&ze.memoizedState===null?!1:(vn&2)!==0),sr?(Sn=!0,qe.flags&=-129):(ze===null||ze.memoizedState!==null)&&(vn|=1),Ds(Qs,vn&1),ze===null)return Si(qe),ze=qe.memoizedState,ze!==null&&(ze=ze.dehydrated,ze!==null)?((qe.mode&1)===0?qe.lanes=1:ze.data==="$!"?qe.lanes=8:qe.lanes=1073741824,null):(jn=dn.children,ze=dn.fallback,Sn?(dn=qe.mode,Sn=qe.child,jn={mode:"hidden",children:jn},(dn&1)===0&&Sn!==null?(Sn.childLanes=0,Sn.pendingProps=jn):Sn=Ad(jn,dn,0,null),ze=Xu(ze,dn,Ke,null),Sn.return=qe,ze.return=qe,Sn.sibling=ze,qe.child=Sn,qe.child.memoizedState=Gd(Ke),qe.memoizedState=Hd,ze):Kd(qe,jn));if(vn=ze.memoizedState,vn!==null&&(sr=vn.dehydrated,sr!==null))return Lf(ze,qe,jn,dn,sr,vn,Ke);if(Sn){Sn=dn.fallback,jn=qe.mode,vn=ze.child,sr=vn.sibling;var dr={mode:"hidden",children:dn.children};return(jn&1)===0&&qe.child!==vn?(dn=qe.child,dn.childLanes=0,dn.pendingProps=dr,qe.deletions=null):(dn=ku(vn,dr),dn.subtreeFlags=vn.subtreeFlags&14680064),sr!==null?Sn=ku(sr,Sn):(Sn=Xu(Sn,jn,Ke,null),Sn.flags|=2),Sn.return=qe,dn.return=qe,dn.sibling=Sn,qe.child=dn,dn=Sn,Sn=qe.child,jn=ze.child.memoizedState,jn=jn===null?Gd(Ke):{baseLanes:jn.baseLanes|Ke,cachePool:null,transitions:jn.transitions},Sn.memoizedState=jn,Sn.childLanes=ze.childLanes&~Ke,qe.memoizedState=Hd,dn}return Sn=ze.child,ze=Sn.sibling,dn=ku(Sn,{mode:"visible",children:dn.children}),(qe.mode&1)===0&&(dn.lanes=Ke),dn.return=qe,dn.sibling=null,ze!==null&&(Ke=qe.deletions,Ke===null?(qe.deletions=[ze],qe.flags|=16):Ke.push(ze)),qe.child=dn,qe.memoizedState=null,dn}function Kd(ze,qe){return qe=Ad({mode:"visible",children:qe},ze.mode,0,null),qe.return=ze,ze.child=qe}function hd(ze,qe,Ke,dn){return dn!==null&&ci(dn),Oo(qe,ze.child,null,Ke),ze=Kd(qe,qe.pendingProps.children),ze.flags|=2,qe.memoizedState=null,ze}function Lf(ze,qe,Ke,dn,vn,Sn,jn){if(Ke)return qe.flags&256?(qe.flags&=-257,dn=Ud(Error(t(422))),hd(ze,qe,jn,dn)):qe.memoizedState!==null?(qe.child=ze.child,qe.flags|=128,null):(Sn=dn.fallback,vn=qe.mode,dn=Ad({mode:"visible",children:dn.children},vn,0,null),Sn=Xu(Sn,vn,jn,null),Sn.flags|=2,dn.return=qe,Sn.return=qe,dn.sibling=Sn,qe.child=dn,(qe.mode&1)!==0&&Oo(qe,ze.child,null,jn),qe.child.memoizedState=Gd(jn),qe.memoizedState=Hd,Sn);if((qe.mode&1)===0)return hd(ze,qe,jn,null);if(vn.data==="$!"){if(dn=vn.nextSibling&&vn.nextSibling.dataset,dn)var sr=dn.dgst;return dn=sr,Sn=Error(t(419)),dn=Ud(Sn,dn,void 0),hd(ze,qe,jn,dn)}if(sr=(jn&ze.childLanes)!==0,Ja||sr){if(dn=ca,dn!==null){switch(jn&-jn){case 4:vn=2;break;case 16:vn=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:vn=32;break;case 536870912:vn=268435456;break;default:vn=0}vn=(vn&(dn.suspendedLanes|jn))!==0?0:vn,vn!==0&&vn!==Sn.retryLane&&(Sn.retryLane=vn,Bs(ze,vn),Fl(dn,ze,vn,-1))}return ch(),dn=Ud(Error(t(421))),hd(ze,qe,jn,dn)}return vn.data==="$?"?(qe.flags|=128,qe.child=ze.child,qe=Kf.bind(null,ze),vn._reactRetry=qe,null):(ze=Sn.treeContext,Fr=va(vn.nextSibling),Lr=qe,Br=!0,zr=null,ze!==null&&(Xn[Zn++]=Tr,Xn[Zn++]=tr,Xn[Zn++]=cr,Tr=ze.id,tr=ze.overflow,cr=qe),qe=Kd(qe,dn.children),qe.flags|=4096,qe)}function Wh(ze,qe,Ke){ze.lanes|=qe;var dn=ze.alternate;dn!==null&&(dn.lanes|=qe),Is(ze.return,qe,Ke)}function Yd(ze,qe,Ke,dn,vn){var Sn=ze.memoizedState;Sn===null?ze.memoizedState={isBackwards:qe,rendering:null,renderingStartTime:0,last:dn,tail:Ke,tailMode:vn}:(Sn.isBackwards=qe,Sn.rendering=null,Sn.renderingStartTime=0,Sn.last=dn,Sn.tail=Ke,Sn.tailMode=vn)}function Hh(ze,qe,Ke){var dn=qe.pendingProps,vn=dn.revealOrder,Sn=dn.tail;if(Ua(ze,qe,dn.children,Ke),dn=Qs.current,(dn&2)!==0)dn=dn&1|2,qe.flags|=128;else{if(ze!==null&&(ze.flags&128)!==0)e:for(ze=qe.child;ze!==null;){if(ze.tag===13)ze.memoizedState!==null&&Wh(ze,Ke,qe);else if(ze.tag===19)Wh(ze,Ke,qe);else if(ze.child!==null){ze.child.return=ze,ze=ze.child;continue}if(ze===qe)break e;for(;ze.sibling===null;){if(ze.return===null||ze.return===qe)break e;ze=ze.return}ze.sibling.return=ze.return,ze=ze.sibling}dn&=1}if(Ds(Qs,dn),(qe.mode&1)===0)qe.memoizedState=null;else switch(vn){case"forwards":for(Ke=qe.child,vn=null;Ke!==null;)ze=Ke.alternate,ze!==null&&al(ze)===null&&(vn=Ke),Ke=Ke.sibling;Ke=vn,Ke===null?(vn=qe.child,qe.child=null):(vn=Ke.sibling,Ke.sibling=null),Yd(qe,!1,vn,Ke,Sn);break;case"backwards":for(Ke=null,vn=qe.child,qe.child=null;vn!==null;){if(ze=vn.alternate,ze!==null&&al(ze)===null){qe.child=vn;break}ze=vn.sibling,vn.sibling=Ke,Ke=vn,vn=ze}Yd(qe,!0,Ke,null,Sn);break;case"together":Yd(qe,!1,null,null,void 0);break;default:qe.memoizedState=null}return qe.child}function fd(ze,qe){(qe.mode&1)===0&&ze!==null&&(ze.alternate=null,qe.alternate=null,qe.flags|=2)}function lu(ze,qe,Ke){if(ze!==null&&(qe.dependencies=ze.dependencies),Hu|=qe.lanes,(Ke&qe.childLanes)===0)return null;if(ze!==null&&qe.child!==ze.child)throw Error(t(153));if(qe.child!==null){for(ze=qe.child,Ke=ku(ze,ze.pendingProps),qe.child=Ke,Ke.return=qe;ze.sibling!==null;)ze=ze.sibling,Ke=Ke.sibling=ku(ze,ze.pendingProps),Ke.return=qe;Ke.sibling=null}return qe.child}function Df(ze,qe,Ke){switch(qe.tag){case 3:Uh(qe),Ei();break;case 5:sd(qe);break;case 1:Ma(qe.type)&&ou(qe);break;case 4:wu(qe,qe.stateNode.containerInfo);break;case 10:var dn=qe.type._context,vn=qe.memoizedProps.value;Ds(jo,dn._currentValue),dn._currentValue=vn;break;case 13:if(dn=qe.memoizedState,dn!==null)return dn.dehydrated!==null?(Ds(Qs,Qs.current&1),qe.flags|=128,null):(Ke&qe.child.childLanes)!==0?qh(ze,qe,Ke):(Ds(Qs,Qs.current&1),ze=lu(ze,qe,Ke),ze!==null?ze.sibling:null);Ds(Qs,Qs.current&1);break;case 19:if(dn=(Ke&qe.childLanes)!==0,(ze.flags&128)!==0){if(dn)return Hh(ze,qe,Ke);qe.flags|=128}if(vn=qe.memoizedState,vn!==null&&(vn.rendering=null,vn.tail=null,vn.lastEffect=null),Ds(Qs,Qs.current),dn)break;return null;case 22:case 23:return qe.lanes=0,jh(ze,qe,Ke)}return lu(ze,qe,Ke)}var Gh,Xd,Kh,Yh;Gh=function(ze,qe){for(var Ke=qe.child;Ke!==null;){if(Ke.tag===5||Ke.tag===6)ze.appendChild(Ke.stateNode);else if(Ke.tag!==4&&Ke.child!==null){Ke.child.return=Ke,Ke=Ke.child;continue}if(Ke===qe)break;for(;Ke.sibling===null;){if(Ke.return===null||Ke.return===qe)return;Ke=Ke.return}Ke.sibling.return=Ke.return,Ke=Ke.sibling}},Xd=function(){},Kh=function(ze,qe,Ke,dn){var vn=ze.memoizedProps;if(vn!==dn){ze=qe.stateNode,Cl(Go.current);var Sn=null;switch(Ke){case"input":vn=xr(ze,vn),dn=xr(ze,dn),Sn=[];break;case"select":vn=On({},vn,{value:void 0}),dn=On({},dn,{value:void 0}),Sn=[];break;case"textarea":vn=mi(ze,vn),dn=mi(ze,dn),Sn=[];break;default:typeof vn.onClick!="function"&&typeof dn.onClick=="function"&&(ze.onclick=_u)}Bi(Ke,dn);var jn;Ke=null;for(Nr in vn)if(!dn.hasOwnProperty(Nr)&&vn.hasOwnProperty(Nr)&&vn[Nr]!=null)if(Nr==="style"){var sr=vn[Nr];for(jn in sr)sr.hasOwnProperty(jn)&&(Ke||(Ke={}),Ke[jn]="")}else Nr!=="dangerouslySetInnerHTML"&&Nr!=="children"&&Nr!=="suppressContentEditableWarning"&&Nr!=="suppressHydrationWarning"&&Nr!=="autoFocus"&&(Ee.hasOwnProperty(Nr)?Sn||(Sn=[]):(Sn=Sn||[]).push(Nr,null));for(Nr in dn){var dr=dn[Nr];if(sr=vn?.[Nr],dn.hasOwnProperty(Nr)&&dr!==sr&&(dr!=null||sr!=null))if(Nr==="style")if(sr){for(jn in sr)!sr.hasOwnProperty(jn)||dr&&dr.hasOwnProperty(jn)||(Ke||(Ke={}),Ke[jn]="");for(jn in dr)dr.hasOwnProperty(jn)&&sr[jn]!==dr[jn]&&(Ke||(Ke={}),Ke[jn]=dr[jn])}else Ke||(Sn||(Sn=[]),Sn.push(Nr,Ke)),Ke=dr;else Nr==="dangerouslySetInnerHTML"?(dr=dr?dr.__html:void 0,sr=sr?sr.__html:void 0,dr!=null&&sr!==dr&&(Sn=Sn||[]).push(Nr,dr)):Nr==="children"?typeof dr!="string"&&typeof dr!="number"||(Sn=Sn||[]).push(Nr,""+dr):Nr!=="suppressContentEditableWarning"&&Nr!=="suppressHydrationWarning"&&(Ee.hasOwnProperty(Nr)?(dr!=null&&Nr==="onScroll"&&js("scroll",ze),Sn||sr===dr||(Sn=[])):(Sn=Sn||[]).push(Nr,dr))}Ke&&(Sn=Sn||[]).push("style",Ke);var Nr=Sn;(qe.updateQueue=Nr)&&(qe.flags|=4)}},Yh=function(ze,qe,Ke,dn){Ke!==dn&&(qe.flags|=4)};function Uc(ze,qe){if(!Br)switch(ze.tailMode){case"hidden":qe=ze.tail;for(var Ke=null;qe!==null;)qe.alternate!==null&&(Ke=qe),qe=qe.sibling;Ke===null?ze.tail=null:Ke.sibling=null;break;case"collapsed":Ke=ze.tail;for(var dn=null;Ke!==null;)Ke.alternate!==null&&(dn=Ke),Ke=Ke.sibling;dn===null?qe||ze.tail===null?ze.tail=null:ze.tail.sibling=null:dn.sibling=null}}function Da(ze){var qe=ze.alternate!==null&&ze.alternate.child===ze.child,Ke=0,dn=0;if(qe)for(var vn=ze.child;vn!==null;)Ke|=vn.lanes|vn.childLanes,dn|=vn.subtreeFlags&14680064,dn|=vn.flags&14680064,vn.return=ze,vn=vn.sibling;else for(vn=ze.child;vn!==null;)Ke|=vn.lanes|vn.childLanes,dn|=vn.subtreeFlags,dn|=vn.flags,vn.return=ze,vn=vn.sibling;return ze.subtreeFlags|=dn,ze.childLanes=Ke,qe}function Ff(ze,qe,Ke){var dn=qe.pendingProps;switch(Sr(qe),qe.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Da(qe),null;case 1:return Ma(qe.type)&&oc(),Da(qe),null;case 3:return dn=qe.stateNode,bl(),Os(Na),Os(Jo),jc(),dn.pendingContext&&(dn.context=dn.pendingContext,dn.pendingContext=null),(ze===null||ze.child===null)&&(ho(qe)?qe.flags|=4:ze===null||ze.memoizedState.isDehydrated&&(qe.flags&256)===0||(qe.flags|=1024,zr!==null&&(ah(zr),zr=null))),Xd(ze,qe),Da(qe),null;case 5:Fc(qe);var vn=Cl(Gl.current);if(Ke=qe.type,ze!==null&&qe.stateNode!=null)Kh(ze,qe,Ke,dn,vn),ze.ref!==qe.ref&&(qe.flags|=512,qe.flags|=2097152);else{if(!dn){if(qe.stateNode===null)throw Error(t(166));return Da(qe),null}if(ze=Cl(Go.current),ho(qe)){dn=qe.stateNode,Ke=qe.type;var Sn=qe.memoizedProps;switch(dn[yl]=qe,dn[yu]=Sn,ze=(qe.mode&1)!==0,Ke){case"dialog":js("cancel",dn),js("close",dn);break;case"iframe":case"object":case"embed":js("load",dn);break;case"video":case"audio":for(vn=0;vn<ql.length;vn++)js(ql[vn],dn);break;case"source":js("error",dn);break;case"img":case"image":case"link":js("error",dn),js("load",dn);break;case"details":js("toggle",dn);break;case"input":nr(dn,Sn),js("invalid",dn);break;case"select":dn._wrapperState={wasMultiple:!!Sn.multiple},js("invalid",dn);break;case"textarea":pi(dn,Sn),js("invalid",dn)}Bi(Ke,Sn),vn=null;for(var jn in Sn)if(Sn.hasOwnProperty(jn)){var sr=Sn[jn];jn==="children"?typeof sr=="string"?dn.textContent!==sr&&(Sn.suppressHydrationWarning!==!0&&sc(dn.textContent,sr,ze),vn=["children",sr]):typeof sr=="number"&&dn.textContent!==""+sr&&(Sn.suppressHydrationWarning!==!0&&sc(dn.textContent,sr,ze),vn=["children",""+sr]):Ee.hasOwnProperty(jn)&&sr!=null&&jn==="onScroll"&&js("scroll",dn)}switch(Ke){case"input":jr(dn),yi(dn,Sn,!0);break;case"textarea":jr(dn),si(dn);break;case"select":case"option":break;default:typeof Sn.onClick=="function"&&(dn.onclick=_u)}dn=vn,qe.updateQueue=dn,dn!==null&&(qe.flags|=4)}else{jn=vn.nodeType===9?vn:vn.ownerDocument,ze==="http://www.w3.org/1999/xhtml"&&(ze=_r(Ke)),ze==="http://www.w3.org/1999/xhtml"?Ke==="script"?(ze=jn.createElement("div"),ze.innerHTML="<script><\/script>",ze=ze.removeChild(ze.firstChild)):typeof dn.is=="string"?ze=jn.createElement(Ke,{is:dn.is}):(ze=jn.createElement(Ke),Ke==="select"&&(jn=ze,dn.multiple?jn.multiple=!0:dn.size&&(jn.size=dn.size))):ze=jn.createElementNS(ze,Ke),ze[yl]=qe,ze[yu]=dn,Gh(ze,qe,!1,!1),qe.stateNode=ze;e:{switch(jn=vi(Ke,dn),Ke){case"dialog":js("cancel",ze),js("close",ze),vn=dn;break;case"iframe":case"object":case"embed":js("load",ze),vn=dn;break;case"video":case"audio":for(vn=0;vn<ql.length;vn++)js(ql[vn],ze);vn=dn;break;case"source":js("error",ze),vn=dn;break;case"img":case"image":case"link":js("error",ze),js("load",ze),vn=dn;break;case"details":js("toggle",ze),vn=dn;break;case"input":nr(ze,dn),vn=xr(ze,dn),js("invalid",ze);break;case"option":vn=dn;break;case"select":ze._wrapperState={wasMultiple:!!dn.multiple},vn=On({},dn,{value:void 0}),js("invalid",ze);break;case"textarea":pi(ze,dn),vn=mi(ze,dn),js("invalid",ze);break;default:vn=dn}Bi(Ke,vn),sr=vn;for(Sn in sr)if(sr.hasOwnProperty(Sn)){var dr=sr[Sn];Sn==="style"?Ur(ze,dr):Sn==="dangerouslySetInnerHTML"?(dr=dr?dr.__html:void 0,dr!=null&&Gr(ze,dr)):Sn==="children"?typeof dr=="string"?(Ke!=="textarea"||dr!=="")&&ii(ze,dr):typeof dr=="number"&&ii(ze,""+dr):Sn!=="suppressContentEditableWarning"&&Sn!=="suppressHydrationWarning"&&Sn!=="autoFocus"&&(Ee.hasOwnProperty(Sn)?dr!=null&&Sn==="onScroll"&&js("scroll",ze):dr!=null&&Je(ze,Sn,dr,jn))}switch(Ke){case"input":jr(ze),yi(ze,dn,!1);break;case"textarea":jr(ze),si(ze);break;case"option":dn.value!=null&&ze.setAttribute("value",""+pr(dn.value));break;case"select":ze.multiple=!!dn.multiple,Sn=dn.value,Sn!=null?Zr(ze,!!dn.multiple,Sn,!1):dn.defaultValue!=null&&Zr(ze,!!dn.multiple,dn.defaultValue,!0);break;default:typeof vn.onClick=="function"&&(ze.onclick=_u)}switch(Ke){case"button":case"input":case"select":case"textarea":dn=!!dn.autoFocus;break e;case"img":dn=!0;break e;default:dn=!1}}dn&&(qe.flags|=4)}qe.ref!==null&&(qe.flags|=512,qe.flags|=2097152)}return Da(qe),null;case 6:if(ze&&qe.stateNode!=null)Yh(ze,qe,ze.memoizedProps,dn);else{if(typeof dn!="string"&&qe.stateNode===null)throw Error(t(166));if(Ke=Cl(Gl.current),Cl(Go.current),ho(qe)){if(dn=qe.stateNode,Ke=qe.memoizedProps,dn[yl]=qe,(Sn=dn.nodeValue!==Ke)&&(ze=Lr,ze!==null))switch(ze.tag){case 3:sc(dn.nodeValue,Ke,(ze.mode&1)!==0);break;case 5:ze.memoizedProps.suppressHydrationWarning!==!0&&sc(dn.nodeValue,Ke,(ze.mode&1)!==0)}Sn&&(qe.flags|=4)}else dn=(Ke.nodeType===9?Ke:Ke.ownerDocument).createTextNode(dn),dn[yl]=qe,qe.stateNode=dn}return Da(qe),null;case 13:if(Os(Qs),dn=qe.memoizedState,ze===null||ze.memoizedState!==null&&ze.memoizedState.dehydrated!==null){if(Br&&Fr!==null&&(qe.mode&1)!==0&&(qe.flags&128)===0)as(),Ei(),qe.flags|=98560,Sn=!1;else if(Sn=ho(qe),dn!==null&&dn.dehydrated!==null){if(ze===null){if(!Sn)throw Error(t(318));if(Sn=qe.memoizedState,Sn=Sn!==null?Sn.dehydrated:null,!Sn)throw Error(t(317));Sn[yl]=qe}else Ei(),(qe.flags&128)===0&&(qe.memoizedState=null),qe.flags|=4;Da(qe),Sn=!1}else zr!==null&&(ah(zr),zr=null),Sn=!0;if(!Sn)return qe.flags&65536?qe:null}return(qe.flags&128)!==0?(qe.lanes=Ke,qe):(dn=dn!==null,dn!==(ze!==null&&ze.memoizedState!==null)&&dn&&(qe.child.flags|=8192,(qe.mode&1)!==0&&(ze===null||(Qs.current&1)!==0?ea===0&&(ea=3):ch())),qe.updateQueue!==null&&(qe.flags|=4),Da(qe),null);case 4:return bl(),Xd(ze,qe),ze===null&&tu(qe.stateNode.containerInfo),Da(qe),null;case 10:return no(qe.type._context),Da(qe),null;case 17:return Ma(qe.type)&&oc(),Da(qe),null;case 19:if(Os(Qs),Sn=qe.memoizedState,Sn===null)return Da(qe),null;if(dn=(qe.flags&128)!==0,jn=Sn.rendering,jn===null)if(dn)Uc(Sn,!1);else{if(ea!==0||ze!==null&&(ze.flags&128)!==0)for(ze=qe.child;ze!==null;){if(jn=al(ze),jn!==null){for(qe.flags|=128,Uc(Sn,!1),dn=jn.updateQueue,dn!==null&&(qe.updateQueue=dn,qe.flags|=4),qe.subtreeFlags=0,dn=Ke,Ke=qe.child;Ke!==null;)Sn=Ke,ze=dn,Sn.flags&=14680066,jn=Sn.alternate,jn===null?(Sn.childLanes=0,Sn.lanes=ze,Sn.child=null,Sn.subtreeFlags=0,Sn.memoizedProps=null,Sn.memoizedState=null,Sn.updateQueue=null,Sn.dependencies=null,Sn.stateNode=null):(Sn.childLanes=jn.childLanes,Sn.lanes=jn.lanes,Sn.child=jn.child,Sn.subtreeFlags=0,Sn.deletions=null,Sn.memoizedProps=jn.memoizedProps,Sn.memoizedState=jn.memoizedState,Sn.updateQueue=jn.updateQueue,Sn.type=jn.type,ze=jn.dependencies,Sn.dependencies=ze===null?null:{lanes:ze.lanes,firstContext:ze.firstContext}),Ke=Ke.sibling;return Ds(Qs,Qs.current&1|2),qe.child}ze=ze.sibling}Sn.tail!==null&&Hi()>vc&&(qe.flags|=128,dn=!0,Uc(Sn,!1),qe.lanes=4194304)}else{if(!dn)if(ze=al(jn),ze!==null){if(qe.flags|=128,dn=!0,Ke=ze.updateQueue,Ke!==null&&(qe.updateQueue=Ke,qe.flags|=4),Uc(Sn,!0),Sn.tail===null&&Sn.tailMode==="hidden"&&!jn.alternate&&!Br)return Da(qe),null}else 2*Hi()-Sn.renderingStartTime>vc&&Ke!==1073741824&&(qe.flags|=128,dn=!0,Uc(Sn,!1),qe.lanes=4194304);Sn.isBackwards?(jn.sibling=qe.child,qe.child=jn):(Ke=Sn.last,Ke!==null?Ke.sibling=jn:qe.child=jn,Sn.last=jn)}return Sn.tail!==null?(qe=Sn.tail,Sn.rendering=qe,Sn.tail=qe.sibling,Sn.renderingStartTime=Hi(),qe.sibling=null,Ke=Qs.current,Ds(Qs,dn?Ke&1|2:Ke&1),qe):(Da(qe),null);case 22:case 23:return uh(),dn=qe.memoizedState!==null,ze!==null&&ze.memoizedState!==null!==dn&&(qe.flags|=8192),dn&&(qe.mode&1)!==0?(cl&1073741824)!==0&&(Da(qe),qe.subtreeFlags&6&&(qe.flags|=8192)):Da(qe),null;case 24:return null;case 25:return null}throw Error(t(156,qe.tag))}function Vf(ze,qe){switch(Sr(qe),qe.tag){case 1:return Ma(qe.type)&&oc(),ze=qe.flags,ze&65536?(qe.flags=ze&-65537|128,qe):null;case 3:return bl(),Os(Na),Os(Jo),jc(),ze=qe.flags,(ze&65536)!==0&&(ze&128)===0?(qe.flags=ze&-65537|128,qe):null;case 5:return Fc(qe),null;case 13:if(Os(Qs),ze=qe.memoizedState,ze!==null&&ze.dehydrated!==null){if(qe.alternate===null)throw Error(t(340));Ei()}return ze=qe.flags,ze&65536?(qe.flags=ze&-65537|128,qe):null;case 19:return Os(Qs),null;case 4:return bl(),null;case 10:return no(qe.type._context),null;case 22:case 23:return uh(),null;case 24:return null;default:return null}}var pd=!1,Fa=!1,jf=typeof WeakSet=="function"?WeakSet:Set,Ai=null;function yc(ze,qe){var Ke=ze.ref;if(Ke!==null)if(typeof Ke=="function")try{Ke(null)}catch(dn){Lo(ze,qe,dn)}else Ke.current=null}function Qd(ze,qe,Ke){try{Ke()}catch(dn){Lo(ze,qe,dn)}}var Xh=!1;function $f(ze,qe){if($u=ti,ze=Ec(),Zu(ze)){if("selectionStart"in ze)var Ke={start:ze.selectionStart,end:ze.selectionEnd};else e:{Ke=(Ke=ze.ownerDocument)&&Ke.defaultView||window;var dn=Ke.getSelection&&Ke.getSelection();if(dn&&dn.rangeCount!==0){Ke=dn.anchorNode;var vn=dn.anchorOffset,Sn=dn.focusNode;dn=dn.focusOffset;try{Ke.nodeType,Sn.nodeType}catch{Ke=null;break e}var jn=0,sr=-1,dr=-1,Nr=0,Qr=0,ri=ze,Yr=null;t:for(;;){for(var bi;ri!==Ke||vn!==0&&ri.nodeType!==3||(sr=jn+vn),ri!==Sn||dn!==0&&ri.nodeType!==3||(dr=jn+dn),ri.nodeType===3&&(jn+=ri.nodeValue.length),(bi=ri.firstChild)!==null;)Yr=ri,ri=bi;for(;;){if(ri===ze)break t;if(Yr===Ke&&++Nr===vn&&(sr=jn),Yr===Sn&&++Qr===dn&&(dr=jn),(bi=ri.nextSibling)!==null)break;ri=Yr,Yr=ri.parentNode}ri=bi}Ke=sr===-1||dr===-1?null:{start:sr,end:dr}}else Ke=null}Ke=Ke||{start:0,end:0}}else Ke=null;for(ru={focusedElem:ze,selectionRange:Ke},ti=!1,Ai=qe;Ai!==null;)if(qe=Ai,ze=qe.child,(qe.subtreeFlags&1028)!==0&&ze!==null)ze.return=qe,Ai=ze;else for(;Ai!==null;){qe=Ai;try{var Ii=qe.alternate;if((qe.flags&1024)!==0)switch(qe.tag){case 0:case 11:case 15:break;case 1:if(Ii!==null){var Ci=Ii.memoizedProps,Bo=Ii.memoizedState,Ar=qe.stateNode,fr=Ar.getSnapshotBeforeUpdate(qe.elementType===qe.type?Ci:Ml(qe.type,Ci),Bo);Ar.__reactInternalSnapshotBeforeUpdate=fr}break;case 3:var Ir=qe.stateNode.containerInfo;Ir.nodeType===1?Ir.textContent="":Ir.nodeType===9&&Ir.documentElement&&Ir.removeChild(Ir.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ai){Lo(qe,qe.return,ai)}if(ze=qe.sibling,ze!==null){ze.return=qe.return,Ai=ze;break}Ai=qe.return}return Ii=Xh,Xh=!1,Ii}function zc(ze,qe,Ke){var dn=qe.updateQueue;if(dn=dn!==null?dn.lastEffect:null,dn!==null){var vn=dn=dn.next;do{if((vn.tag&ze)===ze){var Sn=vn.destroy;vn.destroy=void 0,Sn!==void 0&&Qd(qe,Ke,Sn)}vn=vn.next}while(vn!==dn)}}function md(ze,qe){if(qe=qe.updateQueue,qe=qe!==null?qe.lastEffect:null,qe!==null){var Ke=qe=qe.next;do{if((Ke.tag&ze)===ze){var dn=Ke.create;Ke.destroy=dn()}Ke=Ke.next}while(Ke!==qe)}}function Jd(ze){var qe=ze.ref;if(qe!==null){var Ke=ze.stateNode;switch(ze.tag){case 5:ze=Ke;break;default:ze=Ke}typeof qe=="function"?qe(ze):qe.current=ze}}function Qh(ze){var qe=ze.alternate;qe!==null&&(ze.alternate=null,Qh(qe)),ze.child=null,ze.deletions=null,ze.sibling=null,ze.tag===5&&(qe=ze.stateNode,qe!==null&&(delete qe[yl],delete qe[yu],delete qe[Oa],delete qe[Dd],delete qe[Fd])),ze.stateNode=null,ze.return=null,ze.dependencies=null,ze.memoizedProps=null,ze.memoizedState=null,ze.pendingProps=null,ze.stateNode=null,ze.updateQueue=null}function Jh(ze){return ze.tag===5||ze.tag===3||ze.tag===4}function Zh(ze){e:for(;;){for(;ze.sibling===null;){if(ze.return===null||Jh(ze.return))return null;ze=ze.return}for(ze.sibling.return=ze.return,ze=ze.sibling;ze.tag!==5&&ze.tag!==6&&ze.tag!==18;){if(ze.flags&2||ze.child===null||ze.tag===4)continue e;ze.child.return=ze,ze=ze.child}if(!(ze.flags&2))return ze.stateNode}}function Zd(ze,qe,Ke){var dn=ze.tag;if(dn===5||dn===6)ze=ze.stateNode,qe?Ke.nodeType===8?Ke.parentNode.insertBefore(ze,qe):Ke.insertBefore(ze,qe):(Ke.nodeType===8?(qe=Ke.parentNode,qe.insertBefore(ze,Ke)):(qe=Ke,qe.appendChild(ze)),Ke=Ke._reactRootContainer,Ke!=null||qe.onclick!==null||(qe.onclick=_u));else if(dn!==4&&(ze=ze.child,ze!==null))for(Zd(ze,qe,Ke),ze=ze.sibling;ze!==null;)Zd(ze,qe,Ke),ze=ze.sibling}function eh(ze,qe,Ke){var dn=ze.tag;if(dn===5||dn===6)ze=ze.stateNode,qe?Ke.insertBefore(ze,qe):Ke.appendChild(ze);else if(dn!==4&&(ze=ze.child,ze!==null))for(eh(ze,qe,Ke),ze=ze.sibling;ze!==null;)eh(ze,qe,Ke),ze=ze.sibling}var wa=null,Ll=!1;function Au(ze,qe,Ke){for(Ke=Ke.child;Ke!==null;)ef(ze,qe,Ke),Ke=Ke.sibling}function ef(ze,qe,Ke){if(Po&&typeof Po.onCommitFiberUnmount=="function")try{Po.onCommitFiberUnmount(Ea,Ke)}catch{}switch(Ke.tag){case 5:Fa||yc(Ke,qe);case 6:var dn=wa,vn=Ll;wa=null,Au(ze,qe,Ke),wa=dn,Ll=vn,wa!==null&&(Ll?(ze=wa,Ke=Ke.stateNode,ze.nodeType===8?ze.parentNode.removeChild(Ke):ze.removeChild(Ke)):wa.removeChild(Ke.stateNode));break;case 18:wa!==null&&(Ll?(ze=wa,Ke=Ke.stateNode,ze.nodeType===8?Mc(ze.parentNode,Ke):ze.nodeType===1&&Mc(ze,Ke),br(ze)):Mc(wa,Ke.stateNode));break;case 4:dn=wa,vn=Ll,wa=Ke.stateNode.containerInfo,Ll=!0,Au(ze,qe,Ke),wa=dn,Ll=vn;break;case 0:case 11:case 14:case 15:if(!Fa&&(dn=Ke.updateQueue,dn!==null&&(dn=dn.lastEffect,dn!==null))){vn=dn=dn.next;do{var Sn=vn,jn=Sn.destroy;Sn=Sn.tag,jn!==void 0&&((Sn&2)!==0||(Sn&4)!==0)&&Qd(Ke,qe,jn),vn=vn.next}while(vn!==dn)}Au(ze,qe,Ke);break;case 1:if(!Fa&&(yc(Ke,qe),dn=Ke.stateNode,typeof dn.componentWillUnmount=="function"))try{dn.props=Ke.memoizedProps,dn.state=Ke.memoizedState,dn.componentWillUnmount()}catch(sr){Lo(Ke,qe,sr)}Au(ze,qe,Ke);break;case 21:Au(ze,qe,Ke);break;case 22:Ke.mode&1?(Fa=(dn=Fa)||Ke.memoizedState!==null,Au(ze,qe,Ke),Fa=dn):Au(ze,qe,Ke);break;default:Au(ze,qe,Ke)}}function tf(ze){var qe=ze.updateQueue;if(qe!==null){ze.updateQueue=null;var Ke=ze.stateNode;Ke===null&&(Ke=ze.stateNode=new jf),qe.forEach(function(dn){var vn=Yf.bind(null,ze,dn);Ke.has(dn)||(Ke.add(dn),dn.then(vn,vn))})}}function Dl(ze,qe){var Ke=qe.deletions;if(Ke!==null)for(var dn=0;dn<Ke.length;dn++){var vn=Ke[dn];try{var Sn=ze,jn=qe,sr=jn;e:for(;sr!==null;){switch(sr.tag){case 5:wa=sr.stateNode,Ll=!1;break e;case 3:wa=sr.stateNode.containerInfo,Ll=!0;break e;case 4:wa=sr.stateNode.containerInfo,Ll=!0;break e}sr=sr.return}if(wa===null)throw Error(t(160));ef(Sn,jn,vn),wa=null,Ll=!1;var dr=vn.alternate;dr!==null&&(dr.return=null),vn.return=null}catch(Nr){Lo(vn,qe,Nr)}}if(qe.subtreeFlags&12854)for(qe=qe.child;qe!==null;)nf(qe,ze),qe=qe.sibling}function nf(ze,qe){var Ke=ze.alternate,dn=ze.flags;switch(ze.tag){case 0:case 11:case 14:case 15:if(Dl(qe,ze),Yl(ze),dn&4){try{zc(3,ze,ze.return),md(3,ze)}catch(Ci){Lo(ze,ze.return,Ci)}try{zc(5,ze,ze.return)}catch(Ci){Lo(ze,ze.return,Ci)}}break;case 1:Dl(qe,ze),Yl(ze),dn&512&&Ke!==null&&yc(Ke,Ke.return);break;case 5:if(Dl(qe,ze),Yl(ze),dn&512&&Ke!==null&&yc(Ke,Ke.return),ze.flags&32){var vn=ze.stateNode;try{ii(vn,"")}catch(Ci){Lo(ze,ze.return,Ci)}}if(dn&4&&(vn=ze.stateNode,vn!=null)){var Sn=ze.memoizedProps,jn=Ke!==null?Ke.memoizedProps:Sn,sr=ze.type,dr=ze.updateQueue;if(ze.updateQueue=null,dr!==null)try{sr==="input"&&Sn.type==="radio"&&Sn.name!=null&&Oi(vn,Sn),vi(sr,jn);var Nr=vi(sr,Sn);for(jn=0;jn<dr.length;jn+=2){var Qr=dr[jn],ri=dr[jn+1];Qr==="style"?Ur(vn,ri):Qr==="dangerouslySetInnerHTML"?Gr(vn,ri):Qr==="children"?ii(vn,ri):Je(vn,Qr,ri,Nr)}switch(sr){case"input":Ti(vn,Sn);break;case"textarea":Wi(vn,Sn);break;case"select":var Yr=vn._wrapperState.wasMultiple;vn._wrapperState.wasMultiple=!!Sn.multiple;var bi=Sn.value;bi!=null?Zr(vn,!!Sn.multiple,bi,!1):Yr!==!!Sn.multiple&&(Sn.defaultValue!=null?Zr(vn,!!Sn.multiple,Sn.defaultValue,!0):Zr(vn,!!Sn.multiple,Sn.multiple?[]:"",!1))}vn[yu]=Sn}catch(Ci){Lo(ze,ze.return,Ci)}}break;case 6:if(Dl(qe,ze),Yl(ze),dn&4){if(ze.stateNode===null)throw Error(t(162));vn=ze.stateNode,Sn=ze.memoizedProps;try{vn.nodeValue=Sn}catch(Ci){Lo(ze,ze.return,Ci)}}break;case 3:if(Dl(qe,ze),Yl(ze),dn&4&&Ke!==null&&Ke.memoizedState.isDehydrated)try{br(qe.containerInfo)}catch(Ci){Lo(ze,ze.return,Ci)}break;case 4:Dl(qe,ze),Yl(ze);break;case 13:Dl(qe,ze),Yl(ze),vn=ze.child,vn.flags&8192&&(Sn=vn.memoizedState!==null,vn.stateNode.isHidden=Sn,!Sn||vn.alternate!==null&&vn.alternate.memoizedState!==null||(rh=Hi())),dn&4&&tf(ze);break;case 22:if(Qr=Ke!==null&&Ke.memoizedState!==null,ze.mode&1?(Fa=(Nr=Fa)||Qr,Dl(qe,ze),Fa=Nr):Dl(qe,ze),Yl(ze),dn&8192){if(Nr=ze.memoizedState!==null,(ze.stateNode.isHidden=Nr)&&!Qr&&(ze.mode&1)!==0)for(Ai=ze,Qr=ze.child;Qr!==null;){for(ri=Ai=Qr;Ai!==null;){switch(Yr=Ai,bi=Yr.child,Yr.tag){case 0:case 11:case 14:case 15:zc(4,Yr,Yr.return);break;case 1:yc(Yr,Yr.return);var Ii=Yr.stateNode;if(typeof Ii.componentWillUnmount=="function"){dn=Yr,Ke=Yr.return;try{qe=dn,Ii.props=qe.memoizedProps,Ii.state=qe.memoizedState,Ii.componentWillUnmount()}catch(Ci){Lo(dn,Ke,Ci)}}break;case 5:yc(Yr,Yr.return);break;case 22:if(Yr.memoizedState!==null){of(ri);continue}}bi!==null?(bi.return=Yr,Ai=bi):of(ri)}Qr=Qr.sibling}e:for(Qr=null,ri=ze;;){if(ri.tag===5){if(Qr===null){Qr=ri;try{vn=ri.stateNode,Nr?(Sn=vn.style,typeof Sn.setProperty=="function"?Sn.setProperty("display","none","important"):Sn.display="none"):(sr=ri.stateNode,dr=ri.memoizedProps.style,jn=dr!=null&&dr.hasOwnProperty("display")?dr.display:null,sr.style.display=ji("display",jn))}catch(Ci){Lo(ze,ze.return,Ci)}}}else if(ri.tag===6){if(Qr===null)try{ri.stateNode.nodeValue=Nr?"":ri.memoizedProps}catch(Ci){Lo(ze,ze.return,Ci)}}else if((ri.tag!==22&&ri.tag!==23||ri.memoizedState===null||ri===ze)&&ri.child!==null){ri.child.return=ri,ri=ri.child;continue}if(ri===ze)break e;for(;ri.sibling===null;){if(ri.return===null||ri.return===ze)break e;Qr===ri&&(Qr=null),ri=ri.return}Qr===ri&&(Qr=null),ri.sibling.return=ri.return,ri=ri.sibling}}break;case 19:Dl(qe,ze),Yl(ze),dn&4&&tf(ze);break;case 21:break;default:Dl(qe,ze),Yl(ze)}}function Yl(ze){var qe=ze.flags;if(qe&2){try{e:{for(var Ke=ze.return;Ke!==null;){if(Jh(Ke)){var dn=Ke;break e}Ke=Ke.return}throw Error(t(160))}switch(dn.tag){case 5:var vn=dn.stateNode;dn.flags&32&&(ii(vn,""),dn.flags&=-33);var Sn=Zh(ze);eh(ze,Sn,vn);break;case 3:case 4:var jn=dn.stateNode.containerInfo,sr=Zh(ze);Zd(ze,sr,jn);break;default:throw Error(t(161))}}catch(dr){Lo(ze,ze.return,dr)}ze.flags&=-3}qe&4096&&(ze.flags&=-4097)}function Bf(ze,qe,Ke){Ai=ze,rf(ze)}function rf(ze,qe,Ke){for(var dn=(ze.mode&1)!==0;Ai!==null;){var vn=Ai,Sn=vn.child;if(vn.tag===22&&dn){var jn=vn.memoizedState!==null||pd;if(!jn){var sr=vn.alternate,dr=sr!==null&&sr.memoizedState!==null||Fa;sr=pd;var Nr=Fa;if(pd=jn,(Fa=dr)&&!Nr)for(Ai=vn;Ai!==null;)jn=Ai,dr=jn.child,jn.tag===22&&jn.memoizedState!==null?af(vn):dr!==null?(dr.return=jn,Ai=dr):af(vn);for(;Sn!==null;)Ai=Sn,rf(Sn),Sn=Sn.sibling;Ai=vn,pd=sr,Fa=Nr}sf(ze)}else(vn.subtreeFlags&8772)!==0&&Sn!==null?(Sn.return=vn,Ai=Sn):sf(ze)}}function sf(ze){for(;Ai!==null;){var qe=Ai;if((qe.flags&8772)!==0){var Ke=qe.alternate;try{if((qe.flags&8772)!==0)switch(qe.tag){case 0:case 11:case 15:Fa||md(5,qe);break;case 1:var dn=qe.stateNode;if(qe.flags&4&&!Fa)if(Ke===null)dn.componentDidMount();else{var vn=qe.elementType===qe.type?Ke.memoizedProps:Ml(qe.type,Ke.memoizedProps);dn.componentDidUpdate(vn,Ke.memoizedState,dn.__reactInternalSnapshotBeforeUpdate)}var Sn=qe.updateQueue;Sn!==null&&Qa(qe,Sn,dn);break;case 3:var jn=qe.updateQueue;if(jn!==null){if(Ke=null,qe.child!==null)switch(qe.child.tag){case 5:Ke=qe.child.stateNode;break;case 1:Ke=qe.child.stateNode}Qa(qe,jn,Ke)}break;case 5:var sr=qe.stateNode;if(Ke===null&&qe.flags&4){Ke=sr;var dr=qe.memoizedProps;switch(qe.type){case"button":case"input":case"select":case"textarea":dr.autoFocus&&Ke.focus();break;case"img":dr.src&&(Ke.src=dr.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(qe.memoizedState===null){var Nr=qe.alternate;if(Nr!==null){var Qr=Nr.memoizedState;if(Qr!==null){var ri=Qr.dehydrated;ri!==null&&br(ri)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Fa||qe.flags&512&&Jd(qe)}catch(Yr){Lo(qe,qe.return,Yr)}}if(qe===ze){Ai=null;break}if(Ke=qe.sibling,Ke!==null){Ke.return=qe.return,Ai=Ke;break}Ai=qe.return}}function of(ze){for(;Ai!==null;){var qe=Ai;if(qe===ze){Ai=null;break}var Ke=qe.sibling;if(Ke!==null){Ke.return=qe.return,Ai=Ke;break}Ai=qe.return}}function af(ze){for(;Ai!==null;){var qe=Ai;try{switch(qe.tag){case 0:case 11:case 15:var Ke=qe.return;try{md(4,qe)}catch(dr){Lo(qe,Ke,dr)}break;case 1:var dn=qe.stateNode;if(typeof dn.componentDidMount=="function"){var vn=qe.return;try{dn.componentDidMount()}catch(dr){Lo(qe,vn,dr)}}var Sn=qe.return;try{Jd(qe)}catch(dr){Lo(qe,Sn,dr)}break;case 5:var jn=qe.return;try{Jd(qe)}catch(dr){Lo(qe,jn,dr)}}}catch(dr){Lo(qe,qe.return,dr)}if(qe===ze){Ai=null;break}var sr=qe.sibling;if(sr!==null){sr.return=qe.return,Ai=sr;break}Ai=qe.return}}var Uf=Math.ceil,gd=Ze.ReactCurrentDispatcher,th=Ze.ReactCurrentOwner,xl=Ze.ReactCurrentBatchConfig,Rs=0,ca=null,Ko=null,xa=0,cl=0,bc=sl(0),ea=0,qc=null,Hu=0,_d=0,nh=0,Wc=null,Za=null,rh=0,vc=1/0,uu=null,yd=!1,ih=null,Su=null,bd=!1,Pu=null,vd=0,Hc=0,sh=null,wd=-1,xd=0;function za(){return(Rs&6)!==0?Hi():wd!==-1?wd:wd=Hi()}function Iu(ze){return(ze.mode&1)===0?1:(Rs&2)!==0&&xa!==0?xa&-xa:wo.transition!==null?(xd===0&&(xd=Ha()),xd):(ze=ss,ze!==0||(ze=window.event,ze=ze===void 0?16:io(ze.type)),ze)}function Fl(ze,qe,Ke,dn){if(50<Hc)throw Hc=0,sh=null,Error(t(185));ha(ze,Ke,dn),((Rs&2)===0||ze!==ca)&&(ze===ca&&((Rs&2)===0&&(_d|=Ke),ea===4&&Ru(ze,xa)),el(ze,dn),Ke===1&&Rs===0&&(qe.mode&1)===0&&(vc=Hi()+500,Uu&&Rn()))}function el(ze,qe){var Ke=ze.callbackNode;Ts(ze,qe);var dn=ao(ze,ze===ca?xa:0);if(dn===0)Ke!==null&&fi(Ke),ze.callbackNode=null,ze.callbackPriority=0;else if(qe=dn&-dn,ze.callbackPriority!==qe){if(Ke!=null&&fi(Ke),qe===1)ze.tag===0?Tn(uf.bind(null,ze)):hn(uf.bind(null,ze)),Md(function(){(Rs&6)===0&&Rn()}),Ke=null;else{switch(zo(dn)){case 1:Ke=Or;break;case 4:Ke=Fi;break;case 16:Ke=rs;break;case 536870912:Ke=Uo;break;default:Ke=rs}Ke=_f(Ke,lf.bind(null,ze))}ze.callbackPriority=qe,ze.callbackNode=Ke}}function lf(ze,qe){if(wd=-1,xd=0,(Rs&6)!==0)throw Error(t(327));var Ke=ze.callbackNode;if(wc()&&ze.callbackNode!==Ke)return null;var dn=ao(ze,ze===ca?xa:0);if(dn===0)return null;if((dn&30)!==0||(dn&ze.expiredLanes)!==0||qe)qe=Ed(ze,dn);else{qe=dn;var vn=Rs;Rs|=2;var Sn=df();(ca!==ze||xa!==qe)&&(uu=null,vc=Hi()+500,Ku(ze,qe));do try{Wf();break}catch(sr){cf(ze,sr)}while(!0);Ps(),gd.current=Sn,Rs=vn,Ko!==null?qe=0:(ca=null,xa=0,qe=ea)}if(qe!==0){if(qe===2&&(vn=Io(ze),vn!==0&&(dn=vn,qe=oh(ze,vn))),qe===1)throw Ke=qc,Ku(ze,0),Ru(ze,dn),el(ze,Hi()),Ke;if(qe===6)Ru(ze,dn);else{if(vn=ze.current.alternate,(dn&30)===0&&!zf(vn)&&(qe=Ed(ze,dn),qe===2&&(Sn=Io(ze),Sn!==0&&(dn=Sn,qe=oh(ze,Sn))),qe===1))throw Ke=qc,Ku(ze,0),Ru(ze,dn),el(ze,Hi()),Ke;switch(ze.finishedWork=vn,ze.finishedLanes=dn,qe){case 0:case 1:throw Error(t(345));case 2:Yu(ze,Za,uu);break;case 3:if(Ru(ze,dn),(dn&130023424)===dn&&(qe=rh+500-Hi(),10<qe)){if(ao(ze,0)!==0)break;if(vn=ze.suspendedLanes,(vn&dn)!==dn){za(),ze.pingedLanes|=ze.suspendedLanes&vn;break}ze.timeoutHandle=Nc(Yu.bind(null,ze,Za,uu),qe);break}Yu(ze,Za,uu);break;case 4:if(Ru(ze,dn),(dn&4194240)===dn)break;for(qe=ze.eventTimes,vn=-1;0<dn;){var jn=31-_s(dn);Sn=1<<jn,jn=qe[jn],jn>vn&&(vn=jn),dn&=~Sn}if(dn=vn,dn=Hi()-dn,dn=(120>dn?120:480>dn?480:1080>dn?1080:1920>dn?1920:3e3>dn?3e3:4320>dn?4320:1960*Uf(dn/1960))-dn,10<dn){ze.timeoutHandle=Nc(Yu.bind(null,ze,Za,uu),dn);break}Yu(ze,Za,uu);break;case 5:Yu(ze,Za,uu);break;default:throw Error(t(329))}}}return el(ze,Hi()),ze.callbackNode===Ke?lf.bind(null,ze):null}function oh(ze,qe){var Ke=Wc;return ze.current.memoizedState.isDehydrated&&(Ku(ze,qe).flags|=256),ze=Ed(ze,qe),ze!==2&&(qe=Za,Za=Ke,qe!==null&&ah(qe)),ze}function ah(ze){Za===null?Za=ze:Za.push.apply(Za,ze)}function zf(ze){for(var qe=ze;;){if(qe.flags&16384){var Ke=qe.updateQueue;if(Ke!==null&&(Ke=Ke.stores,Ke!==null))for(var dn=0;dn<Ke.length;dn++){var vn=Ke[dn],Sn=vn.getSnapshot;vn=vn.value;try{if(!Vo(Sn(),vn))return!1}catch{return!1}}}if(Ke=qe.child,qe.subtreeFlags&16384&&Ke!==null)Ke.return=qe,qe=Ke;else{if(qe===ze)break;for(;qe.sibling===null;){if(qe.return===null||qe.return===ze)return!0;qe=qe.return}qe.sibling.return=qe.return,qe=qe.sibling}}return!0}function Ru(ze,qe){for(qe&=~nh,qe&=~_d,ze.suspendedLanes|=qe,ze.pingedLanes&=~qe,ze=ze.expirationTimes;0<qe;){var Ke=31-_s(qe),dn=1<<Ke;ze[Ke]=-1,qe&=~dn}}function uf(ze){if((Rs&6)!==0)throw Error(t(327));wc();var qe=ao(ze,0);if((qe&1)===0)return el(ze,Hi()),null;var Ke=Ed(ze,qe);if(ze.tag!==0&&Ke===2){var dn=Io(ze);dn!==0&&(qe=dn,Ke=oh(ze,dn))}if(Ke===1)throw Ke=qc,Ku(ze,0),Ru(ze,qe),el(ze,Hi()),Ke;if(Ke===6)throw Error(t(345));return ze.finishedWork=ze.current.alternate,ze.finishedLanes=qe,Yu(ze,Za,uu),el(ze,Hi()),null}function lh(ze,qe){var Ke=Rs;Rs|=1;try{return ze(qe)}finally{Rs=Ke,Rs===0&&(vc=Hi()+500,Uu&&Rn())}}function Gu(ze){Pu!==null&&Pu.tag===0&&(Rs&6)===0&&wc();var qe=Rs;Rs|=1;var Ke=xl.transition,dn=ss;try{if(xl.transition=null,ss=1,ze)return ze()}finally{ss=dn,xl.transition=Ke,Rs=qe,(Rs&6)===0&&Rn()}}function uh(){cl=bc.current,Os(bc)}function Ku(ze,qe){ze.finishedWork=null,ze.finishedLanes=0;var Ke=ze.timeoutHandle;if(Ke!==-1&&(ze.timeoutHandle=-1,Zc(Ke)),Ko!==null)for(Ke=Ko.return;Ke!==null;){var dn=Ke;switch(Sr(dn),dn.tag){case 1:dn=dn.type.childContextTypes,dn!=null&&oc();break;case 3:bl(),Os(Na),Os(Jo),jc();break;case 5:Fc(dn);break;case 4:bl();break;case 13:Os(Qs);break;case 19:Os(Qs);break;case 10:no(dn.type._context);break;case 22:case 23:uh()}Ke=Ke.return}if(ca=ze,Ko=ze=ku(ze.current,null),xa=cl=qe,ea=0,qc=null,nh=_d=Hu=0,Za=Wc=null,$s!==null){for(qe=0;qe<$s.length;qe++)if(Ke=$s[qe],dn=Ke.interleaved,dn!==null){Ke.interleaved=null;var vn=dn.next,Sn=Ke.pending;if(Sn!==null){var jn=Sn.next;Sn.next=vn,dn.next=jn}Ke.pending=dn}$s=null}return ze}function cf(ze,qe){do{var Ke=Ko;try{if(Ps(),ac.current=cd,xu){for(var dn=ro.memoizedState;dn!==null;){var vn=dn.queue;vn!==null&&(vn.pending=null),dn=dn.next}xu=!1}if(vl=0,Ao=Mo=ro=null,Ol=!1,Eu=0,th.current=null,Ke===null||Ke.return===null){ea=1,qc=qe,Ko=null;break}e:{var Sn=ze,jn=Ke.return,sr=Ke,dr=qe;if(qe=xa,sr.flags|=32768,dr!==null&&typeof dr=="object"&&typeof dr.then=="function"){var Nr=dr,Qr=sr,ri=Qr.tag;if((Qr.mode&1)===0&&(ri===0||ri===11||ri===15)){var Yr=Qr.alternate;Yr?(Qr.updateQueue=Yr.updateQueue,Qr.memoizedState=Yr.memoizedState,Qr.lanes=Yr.lanes):(Qr.updateQueue=null,Qr.memoizedState=null)}var bi=Mh(jn);if(bi!==null){bi.flags&=-257,Lh(bi,jn,sr,Sn,qe),bi.mode&1&&Nh(Sn,Nr,qe),qe=bi,dr=Nr;var Ii=qe.updateQueue;if(Ii===null){var Ci=new Set;Ci.add(dr),qe.updateQueue=Ci}else Ii.add(dr);break e}else{if((qe&1)===0){Nh(Sn,Nr,qe),ch();break e}dr=Error(t(426))}}else if(Br&&sr.mode&1){var Bo=Mh(jn);if(Bo!==null){(Bo.flags&65536)===0&&(Bo.flags|=256),Lh(Bo,jn,sr,Sn,qe),ci(_c(dr,sr));break e}}Sn=dr=_c(dr,sr),ea!==4&&(ea=2),Wc===null?Wc=[Sn]:Wc.push(Sn),Sn=jn;do{switch(Sn.tag){case 3:Sn.flags|=65536,qe&=-qe,Sn.lanes|=qe;var Ar=Ch(Sn,dr,qe);Us(Sn,Ar);break e;case 1:sr=dr;var fr=Sn.type,Ir=Sn.stateNode;if((Sn.flags&128)===0&&(typeof fr.getDerivedStateFromError=="function"||Ir!==null&&typeof Ir.componentDidCatch=="function"&&(Su===null||!Su.has(Ir)))){Sn.flags|=65536,qe&=-qe,Sn.lanes|=qe;var ai=Oh(Sn,sr,qe);Us(Sn,ai);break e}}Sn=Sn.return}while(Sn!==null)}ff(Ke)}catch(Li){qe=Li,Ko===Ke&&Ke!==null&&(Ko=Ke=Ke.return);continue}break}while(!0)}function df(){var ze=gd.current;return gd.current=cd,ze===null?cd:ze}function ch(){(ea===0||ea===3||ea===2)&&(ea=4),ca===null||(Hu&268435455)===0&&(_d&268435455)===0||Ru(ca,xa)}function Ed(ze,qe){var Ke=Rs;Rs|=2;var dn=df();(ca!==ze||xa!==qe)&&(uu=null,Ku(ze,qe));do try{qf();break}catch(vn){cf(ze,vn)}while(!0);if(Ps(),Rs=Ke,gd.current=dn,Ko!==null)throw Error(t(261));return ca=null,xa=0,ea}function qf(){for(;Ko!==null;)hf(Ko)}function Wf(){for(;Ko!==null&&!Ui();)hf(Ko)}function hf(ze){var qe=gf(ze.alternate,ze,cl);ze.memoizedProps=ze.pendingProps,qe===null?ff(ze):Ko=qe,th.current=null}function ff(ze){var qe=ze;do{var Ke=qe.alternate;if(ze=qe.return,(qe.flags&32768)===0){if(Ke=Ff(Ke,qe,cl),Ke!==null){Ko=Ke;return}}else{if(Ke=Vf(Ke,qe),Ke!==null){Ke.flags&=32767,Ko=Ke;return}if(ze!==null)ze.flags|=32768,ze.subtreeFlags=0,ze.deletions=null;else{ea=6,Ko=null;return}}if(qe=qe.sibling,qe!==null){Ko=qe;return}Ko=qe=ze}while(qe!==null);ea===0&&(ea=5)}function Yu(ze,qe,Ke){var dn=ss,vn=xl.transition;try{xl.transition=null,ss=1,Hf(ze,qe,Ke,dn)}finally{xl.transition=vn,ss=dn}return null}function Hf(ze,qe,Ke,dn){do wc();while(Pu!==null);if((Rs&6)!==0)throw Error(t(327));Ke=ze.finishedWork;var vn=ze.finishedLanes;if(Ke===null)return null;if(ze.finishedWork=null,ze.finishedLanes=0,Ke===ze.current)throw Error(t(177));ze.callbackNode=null,ze.callbackPriority=0;var Sn=Ke.lanes|Ke.childLanes;if(ls(ze,Sn),ze===ca&&(Ko=ca=null,xa=0),(Ke.subtreeFlags&2064)===0&&(Ke.flags&2064)===0||bd||(bd=!0,_f(rs,function(){return wc(),null})),Sn=(Ke.flags&15990)!==0,(Ke.subtreeFlags&15990)!==0||Sn){Sn=xl.transition,xl.transition=null;var jn=ss;ss=1;var sr=Rs;Rs|=4,th.current=null,$f(ze,Ke),nf(Ke,ze),Kc(ru),ti=!!$u,ru=$u=null,ze.current=Ke,Bf(Ke),gs(),Rs=sr,ss=jn,xl.transition=Sn}else ze.current=Ke;if(bd&&(bd=!1,Pu=ze,vd=vn),Sn=ze.pendingLanes,Sn===0&&(Su=null),dl(Ke.stateNode),el(ze,Hi()),qe!==null)for(dn=ze.onRecoverableError,Ke=0;Ke<qe.length;Ke++)vn=qe[Ke],dn(vn.value,{componentStack:vn.stack,digest:vn.digest});if(yd)throw yd=!1,ze=ih,ih=null,ze;return(vd&1)!==0&&ze.tag!==0&&wc(),Sn=ze.pendingLanes,(Sn&1)!==0?ze===sh?Hc++:(Hc=0,sh=ze):Hc=0,Rn(),null}function wc(){if(Pu!==null){var ze=zo(vd),qe=xl.transition,Ke=ss;try{if(xl.transition=null,ss=16>ze?16:ze,Pu===null)var dn=!1;else{if(ze=Pu,Pu=null,vd=0,(Rs&6)!==0)throw Error(t(331));var vn=Rs;for(Rs|=4,Ai=ze.current;Ai!==null;){var Sn=Ai,jn=Sn.child;if((Ai.flags&16)!==0){var sr=Sn.deletions;if(sr!==null){for(var dr=0;dr<sr.length;dr++){var Nr=sr[dr];for(Ai=Nr;Ai!==null;){var Qr=Ai;switch(Qr.tag){case 0:case 11:case 15:zc(8,Qr,Sn)}var ri=Qr.child;if(ri!==null)ri.return=Qr,Ai=ri;else for(;Ai!==null;){Qr=Ai;var Yr=Qr.sibling,bi=Qr.return;if(Qh(Qr),Qr===Nr){Ai=null;break}if(Yr!==null){Yr.return=bi,Ai=Yr;break}Ai=bi}}}var Ii=Sn.alternate;if(Ii!==null){var Ci=Ii.child;if(Ci!==null){Ii.child=null;do{var Bo=Ci.sibling;Ci.sibling=null,Ci=Bo}while(Ci!==null)}}Ai=Sn}}if((Sn.subtreeFlags&2064)!==0&&jn!==null)jn.return=Sn,Ai=jn;else e:for(;Ai!==null;){if(Sn=Ai,(Sn.flags&2048)!==0)switch(Sn.tag){case 0:case 11:case 15:zc(9,Sn,Sn.return)}var Ar=Sn.sibling;if(Ar!==null){Ar.return=Sn.return,Ai=Ar;break e}Ai=Sn.return}}var fr=ze.current;for(Ai=fr;Ai!==null;){jn=Ai;var Ir=jn.child;if((jn.subtreeFlags&2064)!==0&&Ir!==null)Ir.return=jn,Ai=Ir;else e:for(jn=fr;Ai!==null;){if(sr=Ai,(sr.flags&2048)!==0)try{switch(sr.tag){case 0:case 11:case 15:md(9,sr)}}catch(Li){Lo(sr,sr.return,Li)}if(sr===jn){Ai=null;break e}var ai=sr.sibling;if(ai!==null){ai.return=sr.return,Ai=ai;break e}Ai=sr.return}}if(Rs=vn,Rn(),Po&&typeof Po.onPostCommitFiberRoot=="function")try{Po.onPostCommitFiberRoot(Ea,ze)}catch{}dn=!0}return dn}finally{ss=Ke,xl.transition=qe}}return!1}function pf(ze,qe,Ke){qe=_c(Ke,qe),qe=Ch(ze,qe,1),ze=Eo(ze,qe,1),qe=za(),ze!==null&&(ha(ze,1,qe),el(ze,qe))}function Lo(ze,qe,Ke){if(ze.tag===3)pf(ze,ze,Ke);else for(;qe!==null;){if(qe.tag===3){pf(qe,ze,Ke);break}else if(qe.tag===1){var dn=qe.stateNode;if(typeof qe.type.getDerivedStateFromError=="function"||typeof dn.componentDidCatch=="function"&&(Su===null||!Su.has(dn))){ze=_c(Ke,ze),ze=Oh(qe,ze,1),qe=Eo(qe,ze,1),ze=za(),qe!==null&&(ha(qe,1,ze),el(qe,ze));break}}qe=qe.return}}function Gf(ze,qe,Ke){var dn=ze.pingCache;dn!==null&&dn.delete(qe),qe=za(),ze.pingedLanes|=ze.suspendedLanes&Ke,ca===ze&&(xa&Ke)===Ke&&(ea===4||ea===3&&(xa&130023424)===xa&&500>Hi()-rh?Ku(ze,0):nh|=Ke),el(ze,qe)}function mf(ze,qe){qe===0&&((ze.mode&1)===0?qe=1:(qe=na,na<<=1,(na&130023424)===0&&(na=4194304)));var Ke=za();ze=Bs(ze,qe),ze!==null&&(ha(ze,qe,Ke),el(ze,Ke))}function Kf(ze){var qe=ze.memoizedState,Ke=0;qe!==null&&(Ke=qe.retryLane),mf(ze,Ke)}function Yf(ze,qe){var Ke=0;switch(ze.tag){case 13:var dn=ze.stateNode,vn=ze.memoizedState;vn!==null&&(Ke=vn.retryLane);break;case 19:dn=ze.stateNode;break;default:throw Error(t(314))}dn!==null&&dn.delete(qe),mf(ze,Ke)}var gf;gf=function(ze,qe,Ke){if(ze!==null)if(ze.memoizedProps!==qe.pendingProps||Na.current)Ja=!0;else{if((ze.lanes&Ke)===0&&(qe.flags&128)===0)return Ja=!1,Df(ze,qe,Ke);Ja=(ze.flags&131072)!==0}else Ja=!1,Br&&(qe.flags&1048576)!==0&&wr(qe,Gn,qe.index);switch(qe.lanes=0,qe.tag){case 2:var dn=qe.type;fd(ze,qe),ze=qe.pendingProps;var vn=vu(qe,Jo.current);fo(qe,Ke),vn=zu(null,qe,dn,ze,vn,Ke);var Sn=wl();return qe.flags|=1,typeof vn=="object"&&vn!==null&&typeof vn.render=="function"&&vn.$$typeof===void 0?(qe.tag=1,qe.memoizedState=null,qe.updateQueue=null,Ma(dn)?(Sn=!0,ou(qe)):Sn=!1,qe.memoizedState=vn.state!==null&&vn.state!==void 0?vn.state:null,Zo(qe),vn.updater=dd,qe.stateNode=vn,vn._reactInternals=qe,Bd(qe,dn,ze,Ke),qe=Wd(null,qe,dn,!0,Sn,Ke)):(qe.tag=0,Br&&Sn&&Vr(qe),Ua(null,qe,vn,Ke),qe=qe.child),qe;case 16:dn=qe.elementType;e:{switch(fd(ze,qe),ze=qe.pendingProps,vn=dn._init,dn=vn(dn._payload),qe.type=dn,vn=qe.tag=Qf(dn),ze=Ml(dn,ze),vn){case 0:qe=qd(null,qe,dn,ze,Ke);break e;case 1:qe=Bh(null,qe,dn,ze,Ke);break e;case 11:qe=Dh(null,qe,dn,ze,Ke);break e;case 14:qe=Fh(null,qe,dn,Ml(dn.type,ze),Ke);break e}throw Error(t(306,dn,""))}return qe;case 0:return dn=qe.type,vn=qe.pendingProps,vn=qe.elementType===dn?vn:Ml(dn,vn),qd(ze,qe,dn,vn,Ke);case 1:return dn=qe.type,vn=qe.pendingProps,vn=qe.elementType===dn?vn:Ml(dn,vn),Bh(ze,qe,dn,vn,Ke);case 3:e:{if(Uh(qe),ze===null)throw Error(t(387));dn=qe.pendingProps,Sn=qe.memoizedState,vn=Sn.element,La(ze,qe),ua(qe,dn,null,Ke);var jn=qe.memoizedState;if(dn=jn.element,Sn.isDehydrated)if(Sn={element:dn,isDehydrated:!1,cache:jn.cache,pendingSuspenseBoundaries:jn.pendingSuspenseBoundaries,transitions:jn.transitions},qe.updateQueue.baseState=Sn,qe.memoizedState=Sn,qe.flags&256){vn=_c(Error(t(423)),qe),qe=zh(ze,qe,dn,Ke,vn);break e}else if(dn!==vn){vn=_c(Error(t(424)),qe),qe=zh(ze,qe,dn,Ke,vn);break e}else for(Fr=va(qe.stateNode.containerInfo.firstChild),Lr=qe,Br=!0,zr=null,Ke=so(qe,null,dn,Ke),qe.child=Ke;Ke;)Ke.flags=Ke.flags&-3|4096,Ke=Ke.sibling;else{if(Ei(),dn===vn){qe=lu(ze,qe,Ke);break e}Ua(ze,qe,dn,Ke)}qe=qe.child}return qe;case 5:return sd(qe),ze===null&&Si(qe),dn=qe.type,vn=qe.pendingProps,Sn=ze!==null?ze.memoizedProps:null,jn=vn.children,Oc(dn,vn)?jn=null:Sn!==null&&Oc(dn,Sn)&&(qe.flags|=32),$h(ze,qe),Ua(ze,qe,jn,Ke),qe.child;case 6:return ze===null&&Si(qe),null;case 13:return qh(ze,qe,Ke);case 4:return wu(qe,qe.stateNode.containerInfo),dn=qe.pendingProps,ze===null?qe.child=Oo(qe,null,dn,Ke):Ua(ze,qe,dn,Ke),qe.child;case 11:return dn=qe.type,vn=qe.pendingProps,vn=qe.elementType===dn?vn:Ml(dn,vn),Dh(ze,qe,dn,vn,Ke);case 7:return Ua(ze,qe,qe.pendingProps,Ke),qe.child;case 8:return Ua(ze,qe,qe.pendingProps.children,Ke),qe.child;case 12:return Ua(ze,qe,qe.pendingProps.children,Ke),qe.child;case 10:e:{if(dn=qe.type._context,vn=qe.pendingProps,Sn=qe.memoizedProps,jn=vn.value,Ds(jo,dn._currentValue),dn._currentValue=jn,Sn!==null)if(Vo(Sn.value,jn)){if(Sn.children===vn.children&&!Na.current){qe=lu(ze,qe,Ke);break e}}else for(Sn=qe.child,Sn!==null&&(Sn.return=qe);Sn!==null;){var sr=Sn.dependencies;if(sr!==null){jn=Sn.child;for(var dr=sr.firstContext;dr!==null;){if(dr.context===dn){if(Sn.tag===1){dr=xo(-1,Ke&-Ke),dr.tag=2;var Nr=Sn.updateQueue;if(Nr!==null){Nr=Nr.shared;var Qr=Nr.pending;Qr===null?dr.next=dr:(dr.next=Qr.next,Qr.next=dr),Nr.pending=dr}}Sn.lanes|=Ke,dr=Sn.alternate,dr!==null&&(dr.lanes|=Ke),Is(Sn.return,Ke,qe),sr.lanes|=Ke;break}dr=dr.next}}else if(Sn.tag===10)jn=Sn.type===qe.type?null:Sn.child;else if(Sn.tag===18){if(jn=Sn.return,jn===null)throw Error(t(341));jn.lanes|=Ke,sr=jn.alternate,sr!==null&&(sr.lanes|=Ke),Is(jn,Ke,qe),jn=Sn.sibling}else jn=Sn.child;if(jn!==null)jn.return=Sn;else for(jn=Sn;jn!==null;){if(jn===qe){jn=null;break}if(Sn=jn.sibling,Sn!==null){Sn.return=jn.return,jn=Sn;break}jn=jn.return}Sn=jn}Ua(ze,qe,vn.children,Ke),qe=qe.child}return qe;case 9:return vn=qe.type,dn=qe.pendingProps.children,fo(qe,Ke),vn=po(vn),dn=dn(vn),qe.flags|=1,Ua(ze,qe,dn,Ke),qe.child;case 14:return dn=qe.type,vn=Ml(dn,qe.pendingProps),vn=Ml(dn.type,vn),Fh(ze,qe,dn,vn,Ke);case 15:return Vh(ze,qe,qe.type,qe.pendingProps,Ke);case 17:return dn=qe.type,vn=qe.pendingProps,vn=qe.elementType===dn?vn:Ml(dn,vn),fd(ze,qe),qe.tag=1,Ma(dn)?(ze=!0,ou(qe)):ze=!1,fo(qe,Ke),Rh(qe,dn,vn),Bd(qe,dn,vn,Ke),Wd(null,qe,dn,!0,ze,Ke);case 19:return Hh(ze,qe,Ke);case 22:return jh(ze,qe,Ke)}throw Error(t(156,qe.tag))};function _f(ze,qe){return _i(ze,qe)}function Xf(ze,qe,Ke,dn){this.tag=ze,this.key=Ke,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=qe,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=dn,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function El(ze,qe,Ke,dn){return new Xf(ze,qe,Ke,dn)}function dh(ze){return ze=ze.prototype,!(!ze||!ze.isReactComponent)}function Qf(ze){if(typeof ze=="function")return dh(ze)?1:0;if(ze!=null){if(ze=ze.$$typeof,ze===xn)return 11;if(ze===Ln)return 14}return 2}function ku(ze,qe){var Ke=ze.alternate;return Ke===null?(Ke=El(ze.tag,qe,ze.key,ze.mode),Ke.elementType=ze.elementType,Ke.type=ze.type,Ke.stateNode=ze.stateNode,Ke.alternate=ze,ze.alternate=Ke):(Ke.pendingProps=qe,Ke.type=ze.type,Ke.flags=0,Ke.subtreeFlags=0,Ke.deletions=null),Ke.flags=ze.flags&14680064,Ke.childLanes=ze.childLanes,Ke.lanes=ze.lanes,Ke.child=ze.child,Ke.memoizedProps=ze.memoizedProps,Ke.memoizedState=ze.memoizedState,Ke.updateQueue=ze.updateQueue,qe=ze.dependencies,Ke.dependencies=qe===null?null:{lanes:qe.lanes,firstContext:qe.firstContext},Ke.sibling=ze.sibling,Ke.index=ze.index,Ke.ref=ze.ref,Ke}function Td(ze,qe,Ke,dn,vn,Sn){var jn=2;if(dn=ze,typeof ze=="function")dh(ze)&&(jn=1);else if(typeof ze=="string")jn=5;else e:switch(ze){case mn:return Xu(Ke.children,vn,Sn,qe);case pn:jn=8,vn|=8;break;case un:return ze=El(12,Ke,qe,vn|2),ze.elementType=un,ze.lanes=Sn,ze;case En:return ze=El(13,Ke,qe,vn),ze.elementType=En,ze.lanes=Sn,ze;case Pn:return ze=El(19,Ke,qe,vn),ze.elementType=Pn,ze.lanes=Sn,ze;case Dn:return Ad(Ke,vn,Sn,qe);default:if(typeof ze=="object"&&ze!==null)switch(ze.$$typeof){case bn:jn=10;break e;case gn:jn=9;break e;case xn:jn=11;break e;case Ln:jn=14;break e;case Cn:jn=16,dn=null;break e}throw Error(t(130,ze==null?ze:typeof ze,""))}return qe=El(jn,Ke,qe,vn),qe.elementType=ze,qe.type=dn,qe.lanes=Sn,qe}function Xu(ze,qe,Ke,dn){return ze=El(7,ze,dn,qe),ze.lanes=Ke,ze}function Ad(ze,qe,Ke,dn){return ze=El(22,ze,dn,qe),ze.elementType=Dn,ze.lanes=Ke,ze.stateNode={isHidden:!1},ze}function hh(ze,qe,Ke){return ze=El(6,ze,null,qe),ze.lanes=Ke,ze}function fh(ze,qe,Ke){return qe=El(4,ze.children!==null?ze.children:[],ze.key,qe),qe.lanes=Ke,qe.stateNode={containerInfo:ze.containerInfo,pendingChildren:null,implementation:ze.implementation},qe}function Jf(ze,qe,Ke,dn,vn){this.tag=qe,this.containerInfo=ze,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ja(0),this.expirationTimes=ja(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ja(0),this.identifierPrefix=dn,this.onRecoverableError=vn,this.mutableSourceEagerHydrationData=null}function ph(ze,qe,Ke,dn,vn,Sn,jn,sr,dr){return ze=new Jf(ze,qe,Ke,sr,dr),qe===1?(qe=1,Sn===!0&&(qe|=8)):qe=0,Sn=El(3,null,null,qe),ze.current=Sn,Sn.stateNode=ze,Sn.memoizedState={element:dn,isDehydrated:Ke,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zo(Sn),ze}function Zf(ze,qe,Ke){var dn=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yn,key:dn==null?null:""+dn,children:ze,containerInfo:qe,implementation:Ke}}function yf(ze){if(!ze)return Hl;ze=ze._reactInternals;e:{if(ir(ze)!==ze||ze.tag!==1)throw Error(t(170));var qe=ze;do{switch(qe.tag){case 3:qe=qe.stateNode.context;break e;case 1:if(Ma(qe.type)){qe=qe.stateNode.__reactInternalMemoizedMergedChildContext;break e}}qe=qe.return}while(qe!==null);throw Error(t(171))}if(ze.tag===1){var Ke=ze.type;if(Ma(Ke))return Dc(ze,Ke,qe)}return qe}function bf(ze,qe,Ke,dn,vn,Sn,jn,sr,dr){return ze=ph(Ke,dn,!0,ze,vn,Sn,jn,sr,dr),ze.context=yf(null),Ke=ze.current,dn=za(),vn=Iu(Ke),Sn=xo(dn,vn),Sn.callback=qe??null,Eo(Ke,Sn,vn),ze.current.lanes=vn,ha(ze,vn,dn),el(ze,dn),ze}function Sd(ze,qe,Ke,dn){var vn=qe.current,Sn=za(),jn=Iu(vn);return Ke=yf(Ke),qe.context===null?qe.context=Ke:qe.pendingContext=Ke,qe=xo(Sn,jn),qe.payload={element:ze},dn=dn===void 0?null:dn,dn!==null&&(qe.callback=dn),ze=Eo(vn,qe,jn),ze!==null&&(Fl(ze,vn,jn,Sn),la(ze,vn,jn)),jn}function Pd(ze){if(ze=ze.current,!ze.child)return null;switch(ze.child.tag){case 5:return ze.child.stateNode;default:return ze.child.stateNode}}function vf(ze,qe){if(ze=ze.memoizedState,ze!==null&&ze.dehydrated!==null){var Ke=ze.retryLane;ze.retryLane=Ke!==0&&Ke<qe?Ke:qe}}function mh(ze,qe){vf(ze,qe),(ze=ze.alternate)&&vf(ze,qe)}function ep(){return null}var wf=typeof reportError=="function"?reportError:function(ze){console.error(ze)};function gh(ze){this._internalRoot=ze}Id.prototype.render=gh.prototype.render=function(ze){var qe=this._internalRoot;if(qe===null)throw Error(t(409));Sd(ze,qe,null,null)},Id.prototype.unmount=gh.prototype.unmount=function(){var ze=this._internalRoot;if(ze!==null){this._internalRoot=null;var qe=ze.containerInfo;Gu(function(){Sd(null,ze,null,null)}),qe[oa]=null}};function Id(ze){this._internalRoot=ze}Id.prototype.unstable_scheduleHydration=function(ze){if(ze){var qe=Xi();ze={blockedOn:null,target:ze,priority:qe};for(var Ke=0;Ke<fa.length&&qe!==0&&qe<fa[Ke].priority;Ke++);fa.splice(Ke,0,ze),Ke===0&&Al(ze)}};function _h(ze){return!(!ze||ze.nodeType!==1&&ze.nodeType!==9&&ze.nodeType!==11)}function Rd(ze){return!(!ze||ze.nodeType!==1&&ze.nodeType!==9&&ze.nodeType!==11&&(ze.nodeType!==8||ze.nodeValue!==" react-mount-point-unstable "))}function xf(){}function tp(ze,qe,Ke,dn,vn){if(vn){if(typeof dn=="function"){var Sn=dn;dn=function(){var Nr=Pd(jn);Sn.call(Nr)}}var jn=bf(qe,dn,ze,0,null,!1,!1,"",xf);return ze._reactRootContainer=jn,ze[oa]=jn.current,tu(ze.nodeType===8?ze.parentNode:ze),Gu(),jn}for(;vn=ze.lastChild;)ze.removeChild(vn);if(typeof dn=="function"){var sr=dn;dn=function(){var Nr=Pd(dr);sr.call(Nr)}}var dr=ph(ze,0,!1,null,null,!1,!1,"",xf);return ze._reactRootContainer=dr,ze[oa]=dr.current,tu(ze.nodeType===8?ze.parentNode:ze),Gu(function(){Sd(qe,dr,Ke,dn)}),dr}function kd(ze,qe,Ke,dn,vn){var Sn=Ke._reactRootContainer;if(Sn){var jn=Sn;if(typeof vn=="function"){var sr=vn;vn=function(){var dr=Pd(jn);sr.call(dr)}}Sd(qe,jn,ze,vn)}else jn=tp(Ke,qe,ze,vn,dn);return Pd(jn)}Yi=function(ze){switch(ze.tag){case 3:var qe=ze.stateNode;if(qe.current.memoizedState.isDehydrated){var Ke=ra(qe.pendingLanes);Ke!==0&&(Ta(qe,Ke|1),el(qe,Hi()),(Rs&6)===0&&(vc=Hi()+500,Rn()))}break;case 13:Gu(function(){var dn=Bs(ze,1);if(dn!==null){var vn=za();Fl(dn,ze,1,vn)}}),mh(ze,1)}},tl=function(ze){if(ze.tag===13){var qe=Bs(ze,134217728);if(qe!==null){var Ke=za();Fl(qe,ze,134217728,Ke)}mh(ze,134217728)}},Zi=function(ze){if(ze.tag===13){var qe=Iu(ze),Ke=Bs(ze,qe);if(Ke!==null){var dn=za();Fl(Ke,ze,qe,dn)}mh(ze,qe)}},Xi=function(){return ss},Ga=function(ze,qe){var Ke=ss;try{return ss=ze,qe()}finally{ss=Ke}},vs=function(ze,qe,Ke){switch(qe){case"input":if(Ti(ze,Ke),qe=Ke.name,Ke.type==="radio"&&qe!=null){for(Ke=ze;Ke.parentNode;)Ke=Ke.parentNode;for(Ke=Ke.querySelectorAll("input[name="+JSON.stringify(""+qe)+'][type="radio"]'),qe=0;qe<Ke.length;qe++){var dn=Ke[qe];if(dn!==ze&&dn.form===ze.form){var vn=Bu(dn);if(!vn)throw Error(t(90));Kr(dn),Ti(dn,vn)}}}break;case"textarea":Wi(ze,Ke);break;case"select":qe=Ke.value,qe!=null&&Zr(ze,!!Ke.multiple,qe,!1)}},Ns=lh,mo=Gu;var np={usingClientEntryPoint:!1,Events:[bu,iu,Bu,oi,Di,lh]},Gc={findFiberByHostInstance:Wl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rp={bundleType:Gc.bundleType,version:Gc.version,rendererPackageName:Gc.rendererPackageName,rendererConfig:Gc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ze.ReactCurrentDispatcher,findHostInstanceByFiber:function(ze){return ze=Cr(ze),ze===null?null:ze.stateNode},findFiberByHostInstance:Gc.findFiberByHostInstance||ep,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cd.isDisabled&&Cd.supportsFiber)try{Ea=Cd.inject(rp),Po=Cd}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=np,reactDom_production_min.createPortal=function(ze,qe){var Ke=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_h(qe))throw Error(t(200));return Zf(ze,qe,null,Ke)},reactDom_production_min.createRoot=function(ze,qe){if(!_h(ze))throw Error(t(299));var Ke=!1,dn="",vn=wf;return qe!=null&&(qe.unstable_strictMode===!0&&(Ke=!0),qe.identifierPrefix!==void 0&&(dn=qe.identifierPrefix),qe.onRecoverableError!==void 0&&(vn=qe.onRecoverableError)),qe=ph(ze,1,!1,null,null,Ke,!1,dn,vn),ze[oa]=qe.current,tu(ze.nodeType===8?ze.parentNode:ze),new gh(qe)},reactDom_production_min.findDOMNode=function(ze){if(ze==null)return null;if(ze.nodeType===1)return ze;var qe=ze._reactInternals;if(qe===void 0)throw typeof ze.render=="function"?Error(t(188)):(ze=Object.keys(ze).join(","),Error(t(268,ze)));return ze=Cr(qe),ze=ze===null?null:ze.stateNode,ze},reactDom_production_min.flushSync=function(ze){return Gu(ze)},reactDom_production_min.hydrate=function(ze,qe,Ke){if(!Rd(qe))throw Error(t(200));return kd(null,ze,qe,!0,Ke)},reactDom_production_min.hydrateRoot=function(ze,qe,Ke){if(!_h(ze))throw Error(t(405));var dn=Ke!=null&&Ke.hydratedSources||null,vn=!1,Sn="",jn=wf;if(Ke!=null&&(Ke.unstable_strictMode===!0&&(vn=!0),Ke.identifierPrefix!==void 0&&(Sn=Ke.identifierPrefix),Ke.onRecoverableError!==void 0&&(jn=Ke.onRecoverableError)),qe=bf(qe,null,ze,1,Ke??null,vn,!1,Sn,jn),ze[oa]=qe.current,tu(ze),dn)for(ze=0;ze<dn.length;ze++)Ke=dn[ze],vn=Ke._getVersion,vn=vn(Ke._source),qe.mutableSourceEagerHydrationData==null?qe.mutableSourceEagerHydrationData=[Ke,vn]:qe.mutableSourceEagerHydrationData.push(Ke,vn);return new Id(qe)},reactDom_production_min.render=function(ze,qe,Ke){if(!Rd(qe))throw Error(t(200));return kd(null,ze,qe,!1,Ke)},reactDom_production_min.unmountComponentAtNode=function(ze){if(!Rd(ze))throw Error(t(40));return ze._reactRootContainer?(Gu(function(){kd(null,null,ze,!1,function(){ze._reactRootContainer=null,ze[oa]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=lh,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(ze,qe,Ke,dn){if(!Rd(Ke))throw Error(t(200));if(ze==null||ze._reactInternals===void 0)throw Error(t(38));return kd(ze,qe,Ke,!1,dn)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var n=requireReactDom();return client.createRoot=n.createRoot,client.hydrateRoot=n.hydrateRoot,client}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports),scriptRel="modulepreload",assetsURL=function(n){return"/"+n},seen={},__vitePreload=function(e,t,r){let Ee=Promise.resolve();if(t&&t.length>0){let Ve=function(De){return Promise.all(De.map($e=>Promise.resolve($e).then(Oe=>({status:"fulfilled",value:Oe}),Oe=>({status:"rejected",reason:Oe}))))};document.getElementsByTagName("link");const Re=document.querySelector("meta[property=csp-nonce]"),Me=Re?.nonce||Re?.getAttribute("nonce");Ee=Ve(t.map(De=>{if(De=assetsURL(De),De in seen)return;seen[De]=!0;const $e=De.endsWith(".css"),Oe=$e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${De}"]${Oe}`))return;const Ce=document.createElement("link");if(Ce.rel=$e?"stylesheet":scriptRel,$e||(Ce.as="script"),Ce.crossOrigin="",Ce.href=De,Me&&Ce.setAttribute("nonce",Me),document.head.appendChild(Ce),$e)return new Promise((Be,Ue)=>{Ce.addEventListener("load",Be),Ce.addEventListener("error",()=>Ue(new Error(`Unable to preload CSS for ${De}`)))})}))}function Te(Re){const Me=new Event("vite:preloadError",{cancelable:!0});if(Me.payload=Re,window.dispatchEvent(Me),!Me.defaultPrevented)throw Re}return Ee.then(Re=>{for(const Me of Re||[])Me.status==="rejected"&&Te(Me.reason);return e().catch(Te)})};requireReactDom();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends$3.apply(this,arguments)}var Action;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(n){n===void 0&&(n={});function e(r,Ee){let{pathname:Te,search:Re,hash:Me}=r.location;return createLocation("",{pathname:Te,search:Re,hash:Me},Ee.state&&Ee.state.usr||null,Ee.state&&Ee.state.key||"default")}function t(r,Ee){return typeof Ee=="string"?Ee:createPath(Ee)}return getUrlBasedHistory(e,t,null,n)}function invariant$1(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function warning(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(n,e){return{usr:n.state,key:n.key,idx:e}}function createLocation(n,e,t,r){return t===void 0&&(t=null),_extends$3({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?parsePath(e):e,{state:t,key:e&&e.key||r||createKey()})}function createPath(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function parsePath(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function getUrlBasedHistory(n,e,t,r){r===void 0&&(r={});let{window:Ee=document.defaultView,v5Compat:Te=!1}=r,Re=Ee.history,Me=Action.Pop,Ve=null,De=$e();De==null&&(De=0,Re.replaceState(_extends$3({},Re.state,{idx:De}),""));function $e(){return(Re.state||{idx:null}).idx}function Oe(){Me=Action.Pop;let He=$e(),Ge=He==null?null:He-De;De=He,Ve&&Ve({action:Me,location:We.location,delta:Ge})}function Ce(He,Ge){Me=Action.Push;let Ye=createLocation(We.location,He,Ge);De=$e()+1;let Je=getHistoryState(Ye,De),Ze=We.createHref(Ye);try{Re.pushState(Je,"",Ze)}catch(fn){if(fn instanceof DOMException&&fn.name==="DataCloneError")throw fn;Ee.location.assign(Ze)}Te&&Ve&&Ve({action:Me,location:We.location,delta:1})}function Be(He,Ge){Me=Action.Replace;let Ye=createLocation(We.location,He,Ge);De=$e();let Je=getHistoryState(Ye,De),Ze=We.createHref(Ye);Re.replaceState(Je,"",Ze),Te&&Ve&&Ve({action:Me,location:We.location,delta:0})}function Ue(He){let Ge=Ee.location.origin!=="null"?Ee.location.origin:Ee.location.href,Ye=typeof He=="string"?He:createPath(He);return Ye=Ye.replace(/ $/,"%20"),invariant$1(Ge,"No window.location.(origin|href) available to create URL for href: "+Ye),new URL(Ye,Ge)}let We={get action(){return Me},get location(){return n(Ee,Re)},listen(He){if(Ve)throw new Error("A history only accepts one active listener");return Ee.addEventListener(PopStateEventType,Oe),Ve=He,()=>{Ee.removeEventListener(PopStateEventType,Oe),Ve=null}},createHref(He){return e(Ee,He)},createURL:Ue,encodeLocation(He){let Ge=Ue(He);return{pathname:Ge.pathname,search:Ge.search,hash:Ge.hash}},push:Ce,replace:Be,go(He){return Re.go(He)}};return We}var ResultType;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(ResultType||(ResultType={}));function matchRoutes(n,e,t){return t===void 0&&(t="/"),matchRoutesImpl(n,e,t)}function matchRoutesImpl(n,e,t,r){let Ee=typeof e=="string"?parsePath(e):e,Te=stripBasename(Ee.pathname||"/",t);if(Te==null)return null;let Re=flattenRoutes(n);rankRouteBranches(Re);let Me=null;for(let Ve=0;Me==null&&Ve<Re.length;++Ve){let De=decodePath(Te);Me=matchRouteBranch(Re[Ve],De)}return Me}function flattenRoutes(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let Ee=(Te,Re,Me)=>{let Ve={relativePath:Me===void 0?Te.path||"":Me,caseSensitive:Te.caseSensitive===!0,childrenIndex:Re,route:Te};Ve.relativePath.startsWith("/")&&(invariant$1(Ve.relativePath.startsWith(r),'Absolute route path "'+Ve.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),Ve.relativePath=Ve.relativePath.slice(r.length));let De=joinPaths([r,Ve.relativePath]),$e=t.concat(Ve);Te.children&&Te.children.length>0&&(invariant$1(Te.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+De+'".')),flattenRoutes(Te.children,e,$e,De)),!(Te.path==null&&!Te.index)&&e.push({path:De,score:computeScore(De,Te.index),routesMeta:$e})};return n.forEach((Te,Re)=>{var Me;if(Te.path===""||!((Me=Te.path)!=null&&Me.includes("?")))Ee(Te,Re);else for(let Ve of explodeOptionalSegments(Te.path))Ee(Te,Re,Ve)}),e}function explodeOptionalSegments(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,Ee=t.endsWith("?"),Te=t.replace(/\?$/,"");if(r.length===0)return Ee?[Te,""]:[Te];let Re=explodeOptionalSegments(r.join("/")),Me=[];return Me.push(...Re.map(Ve=>Ve===""?Te:[Te,Ve].join("/"))),Ee&&Me.push(...Re),Me.map(Ve=>n.startsWith("/")&&Ve===""?"/":Ve)}function rankRouteBranches(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:compareIndexes(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=n=>n==="*";function computeScore(n,e){let t=n.split("/"),r=t.length;return t.some(isSplat)&&(r+=splatPenalty),e&&(r+=indexRouteValue),t.filter(Ee=>!isSplat(Ee)).reduce((Ee,Te)=>Ee+(paramRe.test(Te)?dynamicSegmentValue:Te===""?emptySegmentValue:staticSegmentValue),r)}function compareIndexes(n,e){return n.length===e.length&&n.slice(0,-1).every((r,Ee)=>r===e[Ee])?n[n.length-1]-e[e.length-1]:0}function matchRouteBranch(n,e,t){let{routesMeta:r}=n,Ee={},Te="/",Re=[];for(let Me=0;Me<r.length;++Me){let Ve=r[Me],De=Me===r.length-1,$e=Te==="/"?e:e.slice(Te.length)||"/",Oe=matchPath({path:Ve.relativePath,caseSensitive:Ve.caseSensitive,end:De},$e),Ce=Ve.route;if(!Oe)return null;Object.assign(Ee,Oe.params),Re.push({params:Ee,pathname:joinPaths([Te,Oe.pathname]),pathnameBase:normalizePathname(joinPaths([Te,Oe.pathnameBase])),route:Ce}),Oe.pathnameBase!=="/"&&(Te=joinPaths([Te,Oe.pathnameBase]))}return Re}function matchPath(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=compilePath(n.path,n.caseSensitive,n.end),Ee=e.match(t);if(!Ee)return null;let Te=Ee[0],Re=Te.replace(/(.)\/+$/,"$1"),Me=Ee.slice(1);return{params:r.reduce((De,$e,Oe)=>{let{paramName:Ce,isOptional:Be}=$e;if(Ce==="*"){let We=Me[Oe]||"";Re=Te.slice(0,Te.length-We.length).replace(/(.)\/+$/,"$1")}const Ue=Me[Oe];return Be&&!Ue?De[Ce]=void 0:De[Ce]=(Ue||"").replace(/%2F/g,"/"),De},{}),pathname:Te,pathnameBase:Re,pattern:n}}function compilePath(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),warning(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],Ee="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(Re,Me,Ve)=>(r.push({paramName:Me,isOptional:Ve!=null}),Ve?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),Ee+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?Ee+="\\/*$":n!==""&&n!=="/"&&(Ee+="(?:(?=\\/|$))"),[new RegExp(Ee,e?void 0:"i"),r]}function decodePath(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return warning(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function stripBasename(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function resolvePath(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:Ee=""}=typeof n=="string"?parsePath(n):n;return{pathname:t?t.startsWith("/")?t:resolvePathname(t,e):e,search:normalizeSearch(r),hash:normalizeHash(Ee)}}function resolvePathname(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(Ee=>{Ee===".."?t.length>1&&t.pop():Ee!=="."&&t.push(Ee)}),t.length>1?t.join("/"):"/"}function getInvalidPathError(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(n,e){let t=getPathContributingMatches(n);return e?t.map((r,Ee)=>Ee===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function resolveTo(n,e,t,r){r===void 0&&(r=!1);let Ee;typeof n=="string"?Ee=parsePath(n):(Ee=_extends$3({},n),invariant$1(!Ee.pathname||!Ee.pathname.includes("?"),getInvalidPathError("?","pathname","search",Ee)),invariant$1(!Ee.pathname||!Ee.pathname.includes("#"),getInvalidPathError("#","pathname","hash",Ee)),invariant$1(!Ee.search||!Ee.search.includes("#"),getInvalidPathError("#","search","hash",Ee)));let Te=n===""||Ee.pathname==="",Re=Te?"/":Ee.pathname,Me;if(Re==null)Me=t;else{let Oe=e.length-1;if(!r&&Re.startsWith("..")){let Ce=Re.split("/");for(;Ce[0]==="..";)Ce.shift(),Oe-=1;Ee.pathname=Ce.join("/")}Me=Oe>=0?e[Oe]:"/"}let Ve=resolvePath(Ee,Me),De=Re&&Re!=="/"&&Re.endsWith("/"),$e=(Te||Re===".")&&t.endsWith("/");return!Ve.pathname.endsWith("/")&&(De||$e)&&(Ve.pathname+="/"),Ve}const joinPaths=n=>n.join("/").replace(/\/\/+/g,"/"),normalizePathname=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,normalizeHash=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function isRouteErrorResponse(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends$2.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(n,e){let{relative:t}=e===void 0?{}:e;useInRouterContext()||invariant$1(!1);let{basename:r,navigator:Ee}=reactExports.useContext(NavigationContext),{hash:Te,pathname:Re,search:Me}=useResolvedPath(n,{relative:t}),Ve=Re;return r!=="/"&&(Ve=Re==="/"?r:joinPaths([r,Re])),Ee.createHref({pathname:Ve,search:Me,hash:Te})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$1(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$1(n){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(n)}function useNavigate(){let{isDataRoute:n}=reactExports.useContext(RouteContext);return n?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$1(!1);let n=reactExports.useContext(DataRouterContext),{basename:e,future:t,navigator:r}=reactExports.useContext(NavigationContext),{matches:Ee}=reactExports.useContext(RouteContext),{pathname:Te}=useLocation(),Re=JSON.stringify(getResolveToMatches(Ee,t.v7_relativeSplatPath)),Me=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{Me.current=!0}),reactExports.useCallback(function(De,$e){if($e===void 0&&($e={}),!Me.current)return;if(typeof De=="number"){r.go(De);return}let Oe=resolveTo(De,JSON.parse(Re),Te,$e.relative==="path");n==null&&e!=="/"&&(Oe.pathname=Oe.pathname==="/"?e:joinPaths([e,Oe.pathname])),($e.replace?r.replace:r.push)(Oe,$e.state,$e)},[e,r,Re,Te,n])}function useResolvedPath(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=reactExports.useContext(NavigationContext),{matches:Ee}=reactExports.useContext(RouteContext),{pathname:Te}=useLocation(),Re=JSON.stringify(getResolveToMatches(Ee,r.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(n,JSON.parse(Re),Te,t==="path"),[n,Re,Te,t])}function useRoutes(n,e){return useRoutesImpl(n,e)}function useRoutesImpl(n,e,t,r){useInRouterContext()||invariant$1(!1);let{navigator:Ee}=reactExports.useContext(NavigationContext),{matches:Te}=reactExports.useContext(RouteContext),Re=Te[Te.length-1],Me=Re?Re.params:{};Re&&Re.pathname;let Ve=Re?Re.pathnameBase:"/";Re&&Re.route;let De=useLocation(),$e;if(e){var Oe;let He=typeof e=="string"?parsePath(e):e;Ve==="/"||(Oe=He.pathname)!=null&&Oe.startsWith(Ve)||invariant$1(!1),$e=He}else $e=De;let Ce=$e.pathname||"/",Be=Ce;if(Ve!=="/"){let He=Ve.replace(/^\//,"").split("/");Be="/"+Ce.replace(/^\//,"").split("/").slice(He.length).join("/")}let Ue=matchRoutes(n,{pathname:Be}),We=_renderMatches(Ue&&Ue.map(He=>Object.assign({},He,{params:Object.assign({},Me,He.params),pathname:joinPaths([Ve,Ee.encodeLocation?Ee.encodeLocation(He.pathname).pathname:He.pathname]),pathnameBase:He.pathnameBase==="/"?Ve:joinPaths([Ve,Ee.encodeLocation?Ee.encodeLocation(He.pathnameBase).pathname:He.pathnameBase])})),Te,t,r);return e&&We?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$2({pathname:"/",search:"",hash:"",state:null,key:"default"},$e),navigationType:Action.Pop}},We):We}function DefaultErrorComponent(){let n=useRouteError(),e=isRouteErrorResponse(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,Ee={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),t?reactExports.createElement("pre",{style:Ee},t):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(n){let{routeContext:e,match:t,children:r}=n,Ee=reactExports.useContext(DataRouterContext);return Ee&&Ee.static&&Ee.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(Ee.staticContext._deepestRenderedBoundaryId=t.route.id),reactExports.createElement(RouteContext.Provider,{value:e},r)}function _renderMatches(n,e,t,r){var Ee;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var Te;if(!t)return null;if(t.errors)n=t.matches;else if((Te=r)!=null&&Te.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let Re=n,Me=(Ee=t)==null?void 0:Ee.errors;if(Me!=null){let $e=Re.findIndex(Oe=>Oe.route.id&&Me?.[Oe.route.id]!==void 0);$e>=0||invariant$1(!1),Re=Re.slice(0,Math.min(Re.length,$e+1))}let Ve=!1,De=-1;if(t&&r&&r.v7_partialHydration)for(let $e=0;$e<Re.length;$e++){let Oe=Re[$e];if((Oe.route.HydrateFallback||Oe.route.hydrateFallbackElement)&&(De=$e),Oe.route.id){let{loaderData:Ce,errors:Be}=t,Ue=Oe.route.loader&&Ce[Oe.route.id]===void 0&&(!Be||Be[Oe.route.id]===void 0);if(Oe.route.lazy||Ue){Ve=!0,De>=0?Re=Re.slice(0,De+1):Re=[Re[0]];break}}}return Re.reduceRight(($e,Oe,Ce)=>{let Be,Ue=!1,We=null,He=null;t&&(Be=Me&&Oe.route.id?Me[Oe.route.id]:void 0,We=Oe.route.errorElement||defaultErrorElement,Ve&&(De<0&&Ce===0?(warningOnce("route-fallback"),Ue=!0,He=null):De===Ce&&(Ue=!0,He=Oe.route.hydrateFallbackElement||null)));let Ge=e.concat(Re.slice(0,Ce+1)),Ye=()=>{let Je;return Be?Je=We:Ue?Je=He:Oe.route.Component?Je=reactExports.createElement(Oe.route.Component,null):Oe.route.element?Je=Oe.route.element:Je=$e,reactExports.createElement(RenderedRoute,{match:Oe,routeContext:{outlet:$e,matches:Ge,isDataRoute:t!=null},children:Je})};return t&&(Oe.route.ErrorBoundary||Oe.route.errorElement||Ce===0)?reactExports.createElement(RenderErrorBoundary,{location:t.location,revalidation:t.revalidation,component:We,error:Be,children:Ye(),routeContext:{outlet:null,matches:Ge,isDataRoute:!0}}):Ye()},null)}var DataRouterHook$1=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(DataRouterHook$1||{}),DataRouterStateHook$1=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(DataRouterStateHook$1||{});function useDataRouterContext(n){let e=reactExports.useContext(DataRouterContext);return e||invariant$1(!1),e}function useDataRouterState(n){let e=reactExports.useContext(DataRouterStateContext);return e||invariant$1(!1),e}function useRouteContext(n){let e=reactExports.useContext(RouteContext);return e||invariant$1(!1),e}function useCurrentRouteId(n){let e=useRouteContext(),t=e.matches[e.matches.length-1];return t.route.id||invariant$1(!1),t.route.id}function useRouteError(){var n;let e=reactExports.useContext(RouteErrorContext),t=useDataRouterState(),r=useCurrentRouteId();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function useNavigateStable(){let{router:n}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),e=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),t=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{t.current=!0}),reactExports.useCallback(function(Ee,Te){Te===void 0&&(Te={}),t.current&&(typeof Ee=="number"?n.navigate(Ee):n.navigate(Ee,_extends$2({fromRouteId:e},Te)))},[n,e])}const alreadyWarned$1={};function warningOnce(n,e,t){alreadyWarned$1[n]||(alreadyWarned$1[n]=!0)}function logV6DeprecationWarnings(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function Route(n){invariant$1(!1)}function Router(n){let{basename:e="/",children:t=null,location:r,navigationType:Ee=Action.Pop,navigator:Te,static:Re=!1,future:Me}=n;useInRouterContext()&&invariant$1(!1);let Ve=e.replace(/^\/*/,"/"),De=reactExports.useMemo(()=>({basename:Ve,navigator:Te,static:Re,future:_extends$2({v7_relativeSplatPath:!1},Me)}),[Ve,Me,Te,Re]);typeof r=="string"&&(r=parsePath(r));let{pathname:$e="/",search:Oe="",hash:Ce="",state:Be=null,key:Ue="default"}=r,We=reactExports.useMemo(()=>{let He=stripBasename($e,Ve);return He==null?null:{location:{pathname:He,search:Oe,hash:Ce,state:Be,key:Ue},navigationType:Ee}},[Ve,$e,Oe,Ce,Be,Ue,Ee]);return We==null?null:reactExports.createElement(NavigationContext.Provider,{value:De},reactExports.createElement(LocationContext.Provider,{children:t,value:We}))}function Routes(n){let{children:e,location:t}=n;return useRoutes(createRoutesFromChildren(e),t)}new Promise(()=>{});function createRoutesFromChildren(n,e){e===void 0&&(e=[]);let t=[];return reactExports.Children.forEach(n,(r,Ee)=>{if(!reactExports.isValidElement(r))return;let Te=[...e,Ee];if(r.type===reactExports.Fragment){t.push.apply(t,createRoutesFromChildren(r.props.children,Te));return}r.type!==Route&&invariant$1(!1),!r.props.index||!r.props.children||invariant$1(!1);let Re={id:r.props.id||Te.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(Re.children=createRoutesFromChildren(r.props.children,Te)),t.push(Re)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends$1.apply(this,arguments)}function _objectWithoutPropertiesLoose$1(n,e){if(n==null)return{};var t={},r=Object.keys(n),Ee,Te;for(Te=0;Te<r.length;Te++)Ee=r[Te],!(e.indexOf(Ee)>=0)&&(t[Ee]=n[Ee]);return t}function isModifiedEvent(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function shouldProcessLinkClick(n,e){return n.button===0&&(!e||e==="_self")&&!isModifiedEvent(n)}const _excluded$1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=React$1[START_TRANSITION];function BrowserRouter(n){let{basename:e,children:t,future:r,window:Ee}=n,Te=reactExports.useRef();Te.current==null&&(Te.current=createBrowserHistory({window:Ee,v5Compat:!0}));let Re=Te.current,[Me,Ve]=reactExports.useState({action:Re.action,location:Re.location}),{v7_startTransition:De}=r||{},$e=reactExports.useCallback(Oe=>{De&&startTransitionImpl?startTransitionImpl(()=>Ve(Oe)):Ve(Oe)},[Ve,De]);return reactExports.useLayoutEffect(()=>Re.listen($e),[Re,$e]),reactExports.useEffect(()=>logV6DeprecationWarnings(r),[r]),reactExports.createElement(Router,{basename:e,children:t,location:Me.location,navigationType:Me.action,navigator:Re,future:r})}const isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(e,t){let{onClick:r,relative:Ee,reloadDocument:Te,replace:Re,state:Me,target:Ve,to:De,preventScrollReset:$e,viewTransition:Oe}=e,Ce=_objectWithoutPropertiesLoose$1(e,_excluded$1),{basename:Be}=reactExports.useContext(NavigationContext),Ue,We=!1;if(typeof De=="string"&&ABSOLUTE_URL_REGEX.test(De)&&(Ue=De,isBrowser$1))try{let Je=new URL(window.location.href),Ze=De.startsWith("//")?new URL(Je.protocol+De):new URL(De),fn=stripBasename(Ze.pathname,Be);Ze.origin===Je.origin&&fn!=null?De=fn+Ze.search+Ze.hash:We=!0}catch{}let He=useHref(De,{relative:Ee}),Ge=useLinkClickHandler(De,{replace:Re,state:Me,target:Ve,preventScrollReset:$e,relative:Ee,viewTransition:Oe});function Ye(Je){r&&r(Je),Je.defaultPrevented||Ge(Je)}return reactExports.createElement("a",_extends$1({},Ce,{href:Ue||He,onClick:We||Te?r:Ye,ref:t,target:Ve}))});var DataRouterHook;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(n,e){let{target:t,replace:r,state:Ee,preventScrollReset:Te,relative:Re,viewTransition:Me}=e===void 0?{}:e,Ve=useNavigate(),De=useLocation(),$e=useResolvedPath(n,{relative:Re});return reactExports.useCallback(Oe=>{if(shouldProcessLinkClick(Oe,t)){Oe.preventDefault();let Ce=r!==void 0?r:createPath(De)===createPath($e);Ve(n,{replace:Ce,state:Ee,preventScrollReset:Te,relative:Re,viewTransition:Me})}},[De,Ve,$e,r,Ee,t,n,Te,Re,Me])}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromPostinstall=()=>{};var define_process_env_default$1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let Ee=n.charCodeAt(r);Ee<128?e[t++]=Ee:Ee<2048?(e[t++]=Ee>>6|192,e[t++]=Ee&63|128):(Ee&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(Ee=65536+((Ee&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=Ee>>18|240,e[t++]=Ee>>12&63|128,e[t++]=Ee>>6&63|128,e[t++]=Ee&63|128):(e[t++]=Ee>>12|224,e[t++]=Ee>>6&63|128,e[t++]=Ee&63|128)}return e},byteArrayToString=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const Ee=n[t++];if(Ee<128)e[r++]=String.fromCharCode(Ee);else if(Ee>191&&Ee<224){const Te=n[t++];e[r++]=String.fromCharCode((Ee&31)<<6|Te&63)}else if(Ee>239&&Ee<365){const Te=n[t++],Re=n[t++],Me=n[t++],Ve=((Ee&7)<<18|(Te&63)<<12|(Re&63)<<6|Me&63)-65536;e[r++]=String.fromCharCode(55296+(Ve>>10)),e[r++]=String.fromCharCode(56320+(Ve&1023))}else{const Te=n[t++],Re=n[t++];e[r++]=String.fromCharCode((Ee&15)<<12|(Te&63)<<6|Re&63)}}return e.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let Ee=0;Ee<n.length;Ee+=3){const Te=n[Ee],Re=Ee+1<n.length,Me=Re?n[Ee+1]:0,Ve=Ee+2<n.length,De=Ve?n[Ee+2]:0,$e=Te>>2,Oe=(Te&3)<<4|Me>>4;let Ce=(Me&15)<<2|De>>6,Be=De&63;Ve||(Be=64,Re||(Ce=64)),r.push(t[$e],t[Oe],t[Ce],t[Be])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(stringToByteArray$1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):byteArrayToString(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let Ee=0;Ee<n.length;){const Te=t[n.charAt(Ee++)],Me=Ee<n.length?t[n.charAt(Ee)]:0;++Ee;const De=Ee<n.length?t[n.charAt(Ee)]:64;++Ee;const Oe=Ee<n.length?t[n.charAt(Ee)]:64;if(++Ee,Te==null||Me==null||De==null||Oe==null)throw new DecodeBase64StringError;const Ce=Te<<2|Me>>4;if(r.push(Ce),De!==64){const Be=Me<<4&240|De>>2;if(r.push(Be),Oe!==64){const Ue=De<<6&192|Oe;r.push(Ue)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(n){const e=stringToByteArray$1(n);return base64.encodeByteArray(e,!0)},base64urlEncodeWithoutPadding=function(n){return base64Encode(n).replace(/\./g,"")},base64Decode=function(n){try{return base64.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default$1>"u")return;const n=define_process_env_default$1.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&base64Decode(n[1]);return e&&JSON.parse(e)},getDefaults=()=>{try{return getDefaultsFromPostinstall()||getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},getDefaultEmulatorHost=n=>{var e,t;return(t=(e=getDefaults())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},getDefaultEmulatorHostnameAndPort=n=>{const e=getDefaultEmulatorHost(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},getDefaultAppConfig=()=>{var n;return(n=getDefaults())===null||n===void 0?void 0:n.config},getExperimentalSetting=n=>{var e;return(e=getDefaults())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isCloudWorkstation(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function pingServer(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",Ee=n.iat||0,Te=n.sub||n.user_id;if(!Te)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Re=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:Ee,exp:Ee+3600,auth_time:Ee,sub:Te,user_id:Te,firebase:{sign_in_provider:"custom",identities:{}}},n);return[base64urlEncodeWithoutPadding(JSON.stringify(t)),base64urlEncodeWithoutPadding(JSON.stringify(Re)),""].join(".")}const emulatorStatus={};function getEmulatorSummary(){const n={prod:[],emulator:[]};for(const e of Object.keys(emulatorStatus))emulatorStatus[e]?n.emulator.push(e):n.prod.push(e);return n}function getOrCreateEl(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let previouslyDismissed=!1;function updateEmulatorBanner(n,e){if(typeof window>"u"||typeof document>"u"||!isCloudWorkstation(window.location.host)||emulatorStatus[n]===e||emulatorStatus[n]||previouslyDismissed)return;emulatorStatus[n]=e;function t(Ce){return`__firebase__banner__${Ce}`}const r="__firebase__banner",Te=getEmulatorSummary().prod.length>0;function Re(){const Ce=document.getElementById(r);Ce&&Ce.remove()}function Me(Ce){Ce.style.display="flex",Ce.style.background="#7faaf0",Ce.style.position="fixed",Ce.style.bottom="5px",Ce.style.left="5px",Ce.style.padding=".5em",Ce.style.borderRadius="5px",Ce.style.alignItems="center"}function Ve(Ce,Be){Ce.setAttribute("width","24"),Ce.setAttribute("id",Be),Ce.setAttribute("height","24"),Ce.setAttribute("viewBox","0 0 24 24"),Ce.setAttribute("fill","none"),Ce.style.marginLeft="-6px"}function De(){const Ce=document.createElement("span");return Ce.style.cursor="pointer",Ce.style.marginLeft="16px",Ce.style.fontSize="24px",Ce.innerHTML=" &times;",Ce.onclick=()=>{previouslyDismissed=!0,Re()},Ce}function $e(Ce,Be){Ce.setAttribute("id",Be),Ce.innerText="Learn more",Ce.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",Ce.setAttribute("target","__blank"),Ce.style.paddingLeft="5px",Ce.style.textDecoration="underline"}function Oe(){const Ce=getOrCreateEl(r),Be=t("text"),Ue=document.getElementById(Be)||document.createElement("span"),We=t("learnmore"),He=document.getElementById(We)||document.createElement("a"),Ge=t("preprendIcon"),Ye=document.getElementById(Ge)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(Ce.created){const Je=Ce.element;Me(Je),$e(He,We);const Ze=De();Ve(Ye,Ge),Je.append(Ye,Ue,He,Ze),document.body.appendChild(Je)}Te?(Ue.innerText="Preview backend disconnected.",Ye.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Ye.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Ue.innerText="Preview backend running in this workspace."),Ue.setAttribute("id",Be)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",Oe):Oe()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isNode(){var n;const e=(n=getDefaults())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function isCloudflareWorker(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function isBrowserExtension(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function isReactNative(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const n=getUA();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function isSafari(){return!isNode()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",Ee=self.indexedDB.open(r);Ee.onsuccess=()=>{Ee.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},Ee.onupgradeneeded=()=>{t=!1},Ee.onerror=()=>{var Te;e(((Te=Ee.error)===null||Te===void 0?void 0:Te.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},Ee=`${this.service}/${e}`,Te=this.errors[e],Re=Te?replaceTemplate(Te,r):"Error",Me=`${this.serviceName}: ${Re} (${Ee}).`;return new FirebaseError(Ee,Me,r)}}function replaceTemplate(n,e){return n.replace(PATTERN,(t,r)=>{const Ee=e[r];return Ee!=null?String(Ee):`<${r}?>`})}const PATTERN=/\{\$([^}]+)}/g;function isEmpty$2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function deepEqual(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const Ee of t){if(!r.includes(Ee))return!1;const Te=n[Ee],Re=e[Ee];if(isObject$2(Te)&&isObject$2(Re)){if(!deepEqual(Te,Re))return!1}else if(Te!==Re)return!1}for(const Ee of r)if(!t.includes(Ee))return!1;return!0}function isObject$2(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(Ee=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(Ee))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function querystringDecode(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[Ee,Te]=r.split("=");e[decodeURIComponent(Ee)]=decodeURIComponent(Te)}}),e}function extractQuerystring(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function createSubscribe(n,e){const t=new ObserverProxy(n,e);return t.subscribe.bind(t)}class ObserverProxy{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let Ee;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");implementsAnyMethods(e,["next","error","complete"])?Ee=e:Ee={next:e,error:t,complete:r},Ee.next===void 0&&(Ee.next=noop$2),Ee.error===void 0&&(Ee.error=noop$2),Ee.complete===void 0&&(Ee.complete=noop$2);const Te=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Ee.error(this.finalError):Ee.complete()}catch{}}),this.observers.push(Ee),Te}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function noop$2(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(n){return n&&n._delegate?n._delegate:n}class Component{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Provider{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Deferred;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const Ee=this.getOrInitializeService({instanceIdentifier:t});Ee&&r.resolve(Ee)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),Ee=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(Te){if(Ee)return null;throw Te}else{if(Ee)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(isComponentEager(e))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const Ee=this.normalizeInstanceIdentifier(t);try{const Te=this.getOrInitializeService({instanceIdentifier:Ee});r.resolve(Te)}catch{}}}}clearInstance(e=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=DEFAULT_ENTRY_NAME$1){return this.instances.has(e)}getOptions(e=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ee=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[Te,Re]of this.instancesDeferred.entries()){const Me=this.normalizeInstanceIdentifier(Te);r===Me&&Re.resolve(Ee)}return Ee}onInit(e,t){var r;const Ee=this.normalizeInstanceIdentifier(t),Te=(r=this.onInitCallbacks.get(Ee))!==null&&r!==void 0?r:new Set;Te.add(e),this.onInitCallbacks.set(Ee,Te);const Re=this.instances.get(Ee);return Re&&e(Re,Ee),()=>{Te.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const Ee of r)try{Ee(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?e:DEFAULT_ENTRY_NAME$1:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function normalizeIdentifierForFactory(n){return n===DEFAULT_ENTRY_NAME$1?void 0:n}function isComponentEager(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Provider(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),Ee=ConsoleMethod[e];if(Ee)console[Ee](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Logger{constructor(e){this.name=e,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in LogLevel))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?levelStringToEnum[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...e),this._logHandler(this,LogLevel.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...e),this._logHandler(this,LogLevel.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...e),this._logHandler(this,LogLevel.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...e),this._logHandler(this,LogLevel.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...e),this._logHandler(this,LogLevel.ERROR,...e)}}const instanceOfAny=(n,e)=>e.some(t=>n instanceof t);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(n){const e=new Promise((t,r)=>{const Ee=()=>{n.removeEventListener("success",Te),n.removeEventListener("error",Re)},Te=()=>{t(wrap$2(n.result)),Ee()},Re=()=>{r(n.error),Ee()};n.addEventListener("success",Te),n.addEventListener("error",Re)});return e.then(t=>{t instanceof IDBCursor&&cursorRequestMap.set(t,n)}).catch(()=>{}),reverseTransformCache.set(e,n),e}function cacheDonePromiseForTransaction(n){if(transactionDoneMap.has(n))return;const e=new Promise((t,r)=>{const Ee=()=>{n.removeEventListener("complete",Te),n.removeEventListener("error",Re),n.removeEventListener("abort",Re)},Te=()=>{t(),Ee()},Re=()=>{r(n.error||new DOMException("AbortError","AbortError")),Ee()};n.addEventListener("complete",Te),n.addEventListener("error",Re),n.addEventListener("abort",Re)});transactionDoneMap.set(n,e)}let idbProxyTraps={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return transactionDoneMap.get(n);if(e==="objectStoreNames")return n.objectStoreNames||transactionStoreNamesMap.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wrap$2(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function replaceTraps(n){idbProxyTraps=n(idbProxyTraps)}function wrapFunction(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(unwrap(this),e,...t);return transactionStoreNamesMap.set(r,e.sort?e.sort():[e]),wrap$2(r)}:getCursorAdvanceMethods().includes(n)?function(...e){return n.apply(unwrap(this),e),wrap$2(cursorRequestMap.get(this))}:function(...e){return wrap$2(n.apply(unwrap(this),e))}}function transformCachableValue(n){return typeof n=="function"?wrapFunction(n):(n instanceof IDBTransaction&&cacheDonePromiseForTransaction(n),instanceOfAny(n,getIdbProxyableTypes())?new Proxy(n,idbProxyTraps):n)}function wrap$2(n){if(n instanceof IDBRequest)return promisifyRequest(n);if(transformCache.has(n))return transformCache.get(n);const e=transformCachableValue(n);return e!==n&&(transformCache.set(n,e),reverseTransformCache.set(e,n)),e}const unwrap=n=>reverseTransformCache.get(n);function openDB(n,e,{blocked:t,upgrade:r,blocking:Ee,terminated:Te}={}){const Re=indexedDB.open(n,e),Me=wrap$2(Re);return r&&Re.addEventListener("upgradeneeded",Ve=>{r(wrap$2(Re.result),Ve.oldVersion,Ve.newVersion,wrap$2(Re.transaction),Ve)}),t&&Re.addEventListener("blocked",Ve=>t(Ve.oldVersion,Ve.newVersion,Ve)),Me.then(Ve=>{Te&&Ve.addEventListener("close",()=>Te()),Ee&&Ve.addEventListener("versionchange",De=>Ee(De.oldVersion,De.newVersion,De))}).catch(()=>{}),Me}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(cachedMethods.get(e))return cachedMethods.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,Ee=writeMethods.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(Ee||readMethods.includes(t)))return;const Te=async function(Re,...Me){const Ve=this.transaction(Re,Ee?"readwrite":"readonly");let De=Ve.store;return r&&(De=De.index(Me.shift())),(await Promise.all([De[t](...Me),Ee&&Ve.done]))[0]};return cachedMethods.set(e,Te),Te}replaceTraps(n=>({...n,get:(e,t,r)=>getMethod(e,t)||n.get(e,t,r),has:(e,t)=>!!getMethod(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(isVersionServiceProvider(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function isVersionServiceProvider(n){const e=n.getComponent();return e?.type==="VERSION"}const name$q="@firebase/app",version$1$1="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger=new Logger("@firebase/app"),name$p="@firebase/app-compat",name$o="@firebase/analytics-compat",name$n="@firebase/analytics",name$m="@firebase/app-check-compat",name$l="@firebase/app-check",name$k="@firebase/auth",name$j="@firebase/auth-compat",name$i="@firebase/database",name$h="@firebase/data-connect",name$g="@firebase/database-compat",name$f="@firebase/functions",name$e="@firebase/functions-compat",name$d="@firebase/installations",name$c="@firebase/installations-compat",name$b="@firebase/messaging",name$a="@firebase/messaging-compat",name$9="@firebase/performance",name$8="@firebase/performance-compat",name$7="@firebase/remote-config",name$6="@firebase/remote-config-compat",name$5="@firebase/storage",name$4="@firebase/storage-compat",name$3$1="@firebase/firestore",name$2$1="@firebase/ai",name$1$1="@firebase/firestore-compat",name$r="firebase",version$2="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$q]:"fire-core",[name$p]:"fire-core-compat",[name$n]:"fire-analytics",[name$o]:"fire-analytics-compat",[name$l]:"fire-app-check",[name$m]:"fire-app-check-compat",[name$k]:"fire-auth",[name$j]:"fire-auth-compat",[name$i]:"fire-rtdb",[name$h]:"fire-data-connect",[name$g]:"fire-rtdb-compat",[name$f]:"fire-fn",[name$e]:"fire-fn-compat",[name$d]:"fire-iid",[name$c]:"fire-iid-compat",[name$b]:"fire-fcm",[name$a]:"fire-fcm-compat",[name$9]:"fire-perf",[name$8]:"fire-perf-compat",[name$7]:"fire-rc",[name$6]:"fire-rc-compat",[name$5]:"fire-gcs",[name$4]:"fire-gcs-compat",[name$3$1]:"fire-fst",[name$1$1]:"fire-fst-compat",[name$2$1]:"fire-vertex","fire-js":"fire-js",[name$r]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent(n,e){try{n.container.addComponent(e)}catch(t){logger.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function _registerComponent(n){const e=n.name;if(_components.has(e))return logger.debug(`There were multiple attempts to register component ${e}.`),!1;_components.set(e,n);for(const t of _apps.values())_addComponent(t,n);for(const t of _serverApps.values())_addComponent(t,n);return!0}function _getProvider(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function _isFirebaseServerApp(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY=new ErrorFactory("app","Firebase",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION=version$2;function initializeApp(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!0},e),Ee=r.name;if(typeof Ee!="string"||!Ee)throw ERROR_FACTORY.create("bad-app-name",{appName:String(Ee)});if(t||(t=getDefaultAppConfig()),!t)throw ERROR_FACTORY.create("no-options");const Te=_apps.get(Ee);if(Te){if(deepEqual(t,Te.options)&&deepEqual(r,Te.config))return Te;throw ERROR_FACTORY.create("duplicate-app",{appName:Ee})}const Re=new ComponentContainer(Ee);for(const Ve of _components.values())Re.addComponent(Ve);const Me=new FirebaseAppImpl(t,r,Re);return _apps.set(Ee,Me),Me}function getApp(n=DEFAULT_ENTRY_NAME){const e=_apps.get(n);if(!e&&n===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!e)throw ERROR_FACTORY.create("no-app",{appName:n});return e}function registerVersion(n,e,t){var r;let Ee=(r=PLATFORM_LOG_STRING[n])!==null&&r!==void 0?r:n;t&&(Ee+=`-${t}`);const Te=Ee.match(/\s|\//),Re=e.match(/\s|\//);if(Te||Re){const Me=[`Unable to register library "${Ee}" with version "${e}":`];Te&&Me.push(`library name "${Ee}" contains illegal characters (whitespace or "/")`),Te&&Re&&Me.push("and"),Re&&Me.push(`version name "${e}" contains illegal characters (whitespace or "/")`),logger.warn(Me.join(" "));return}_registerComponent(new Component(`${Ee}-version`,()=>({library:Ee,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(STORE_NAME)}catch(t){console.warn(t)}}}}).catch(n=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:n.message})})),dbPromise}async function readHeartbeatsFromIndexedDB(n){try{const t=(await getDbPromise()).transaction(STORE_NAME),r=await t.objectStore(STORE_NAME).get(computeKey(n));return await t.done,r}catch(e){if(e instanceof FirebaseError)logger.warn(e.message);else{const t=ERROR_FACTORY.create("idb-get",{originalErrorMessage:e?.message});logger.warn(t.message)}}}async function writeHeartbeatsToIndexedDB(n,e){try{const r=(await getDbPromise()).transaction(STORE_NAME,"readwrite");await r.objectStore(STORE_NAME).put(e,computeKey(n)),await r.done}catch(t){if(t instanceof FirebaseError)logger.warn(t.message);else{const r=ERROR_FACTORY.create("idb-set",{originalErrorMessage:t?.message});logger.warn(r.message)}}}function computeKey(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,MAX_NUM_STORED_HEARTBEATS=30;class HeartbeatServiceImpl{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const Ee=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Te=getUTCDateString();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===Te||this._heartbeatsCache.heartbeats.some(Re=>Re.date===Te))return;if(this._heartbeatsCache.heartbeats.push({date:Te,agent:Ee}),this._heartbeatsCache.heartbeats.length>MAX_NUM_STORED_HEARTBEATS){const Re=getEarliestHeartbeatIdx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(Re,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){logger.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=getUTCDateString(),{heartbeatsToSend:r,unsentEntries:Ee}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),Te=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,Ee.length>0?(this._heartbeatsCache.heartbeats=Ee,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),Te}catch(t){return logger.warn(t),""}}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(n,e=MAX_HEADER_BYTES){const t=[];let r=n.slice();for(const Ee of n){const Te=t.find(Re=>Re.agent===Ee.agent);if(Te){if(Te.dates.push(Ee.date),countBytes(t)>e){Te.dates.pop();break}}else if(t.push({agent:Ee.agent,dates:[Ee.date]}),countBytes(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class HeartbeatStorageImpl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await readHeartbeatsFromIndexedDB(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const Ee=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:Ee.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const Ee=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:Ee.lastSentHeartbeatDate,heartbeats:[...Ee.heartbeats,...e.heartbeats]})}else return}}function countBytes(n){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:n})).length}function getEarliestHeartbeatIdx(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(n){_registerComponent(new Component("platform-logger",e=>new PlatformLoggerServiceImpl(e),"PRIVATE")),_registerComponent(new Component("heartbeat",e=>new HeartbeatServiceImpl(e),"PRIVATE")),registerVersion(name$q,version$1$1,n),registerVersion(name$q,version$1$1,"esm2017"),registerVersion("fire-js","")}registerCoreComponents("");function __rest(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ee=0,r=Object.getOwnPropertySymbols(n);Ee<r.length;Ee++)e.indexOf(r[Ee])<0&&Object.prototype.propertyIsEnumerable.call(n,r[Ee])&&(t[r[Ee]]=n[r[Ee]]);return t}typeof SuppressedError=="function"&&SuppressedError;function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient=new Logger("@firebase/auth");function _logWarn(n,...e){logClient.logLevel<=LogLevel.WARN&&logClient.warn(`Auth (${SDK_VERSION}): ${n}`,...e)}function _logError(n,...e){logClient.logLevel<=LogLevel.ERROR&&logClient.error(`Auth (${SDK_VERSION}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(n,...e){throw createErrorInternal(n,...e)}function _createError(n,...e){return createErrorInternal(n,...e)}function _errorWithCustomMessage(n,e,t){const r=Object.assign(Object.assign({},prodErrorMap()),{[e]:t});return new ErrorFactory("auth","Firebase",r).create(e,{appName:n.name})}function _serverAppCurrentUserOperationNotSupportedError(n){return _errorWithCustomMessage(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function createErrorInternal(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return _DEFAULT_AUTH_ERROR_FACTORY.create(n,...e)}function _assert(n,e,...t){if(!n)throw createErrorInternal(e,...t)}function debugFail(n){const e="INTERNAL ASSERTION FAILED: "+n;throw _logError(e),new Error(e)}function debugAssert(n,e){n||debugFail(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Delay{constructor(e,t){this.shortDelay=e,this.longDelay=t,debugAssert(t>e,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(n,e){debugAssert(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FetchProvider{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CookieAuthProxiedEndpoints=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function _performApiRequest(n,e,t,r,Ee={}){return _performFetchWithErrorHandling(n,Ee,async()=>{let Te={},Re={};r&&(e==="GET"?Re=r:Te={body:JSON.stringify(r)});const Me=querystring(Object.assign({key:n.config.apiKey},Re)).slice(1),Ve=await n._getAdditionalHeaders();Ve["Content-Type"]="application/json",n.languageCode&&(Ve["X-Firebase-Locale"]=n.languageCode);const De=Object.assign({method:e,headers:Ve},Te);return isCloudflareWorker()||(De.referrerPolicy="no-referrer"),n.emulatorConfig&&isCloudWorkstation(n.emulatorConfig.host)&&(De.credentials="include"),FetchProvider.fetch()(await _getFinalTarget(n,n.config.apiHost,t,Me),De)})}async function _performFetchWithErrorHandling(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},SERVER_ERROR_MAP),e);try{const Ee=new NetworkTimeout(n),Te=await Promise.race([t(),Ee.promise]);Ee.clearNetworkTimeout();const Re=await Te.json();if("needConfirmation"in Re)throw _makeTaggedError(n,"account-exists-with-different-credential",Re);if(Te.ok&&!("errorMessage"in Re))return Re;{const Me=Te.ok?Re.errorMessage:Re.error.message,[Ve,De]=Me.split(" : ");if(Ve==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError(n,"credential-already-in-use",Re);if(Ve==="EMAIL_EXISTS")throw _makeTaggedError(n,"email-already-in-use",Re);if(Ve==="USER_DISABLED")throw _makeTaggedError(n,"user-disabled",Re);const $e=r[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-");if(De)throw _errorWithCustomMessage(n,$e,De);_fail(n,$e)}}catch(Ee){if(Ee instanceof FirebaseError)throw Ee;_fail(n,"network-request-failed",{message:String(Ee)})}}async function _performSignInRequest(n,e,t,r,Ee={}){const Te=await _performApiRequest(n,e,t,r,Ee);return"mfaPendingCredential"in Te&&_fail(n,"multi-factor-auth-required",{_serverResponse:Te}),Te}async function _getFinalTarget(n,e,t,r){const Ee=`${e}${t}?${r}`,Te=n,Re=Te.config.emulator?_emulatorUrl(n.config,Ee):`${n.config.apiScheme}://${Ee}`;return CookieAuthProxiedEndpoints.includes(t)&&(await Te._persistenceManagerAvailable,Te._getPersistenceType()==="COOKIE")?Te._getPersistence()._getFinalTarget(Re).toString():Re}function _parseEnforcementState(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NetworkTimeout{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}}function _makeTaggedError(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const Ee=_createError(n,e,r);return Ee.customData._tokenResponse=t,Ee}function isEnterprise(n){return n!==void 0&&n.enterprise!==void 0}class RecaptchaConfig{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return _parseEnforcementState(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function getRecaptchaConfig(n,e){return _performApiRequest(n,"GET","/v2/recaptchaConfig",_addTidIfNecessary(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount(n,e){return _performApiRequest(n,"POST","/v1/accounts:delete",e)}async function getAccountInfo(n,e){return _performApiRequest(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function getIdTokenResult(n,e=!1){const t=getModularInstance(n),r=await t.getIdToken(e),Ee=_parseToken(r);_assert(Ee&&Ee.exp&&Ee.auth_time&&Ee.iat,t.auth,"internal-error");const Te=typeof Ee.firebase=="object"?Ee.firebase:void 0,Re=Te?.sign_in_provider;return{claims:Ee,token:r,authTime:utcTimestampToDateString(secondsStringToMilliseconds(Ee.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(Ee.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(Ee.exp)),signInProvider:Re||null,signInSecondFactor:Te?.sign_in_second_factor||null}}function secondsStringToMilliseconds(n){return Number(n)*1e3}function _parseToken(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const Ee=base64Decode(t);return Ee?JSON.parse(Ee):(_logError("Failed to decode base64 JWT payload"),null)}catch(Ee){return _logError("Caught error parsing JWT payload as JSON",Ee?.toString()),null}}function _tokenExpiresIn(n){const e=_parseToken(n);return _assert(e,"internal-error"),_assert(typeof e.exp<"u","internal-error"),_assert(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof FirebaseError&&isUserInvalidated(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function isUserInvalidated({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProactiveRefresh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const Ee=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,Ee)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserMetadata{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving(n){var e;const t=n.auth,r=await n.getIdToken(),Ee=await _logoutIfInvalidated(n,getAccountInfo(t,{idToken:r}));_assert(Ee?.users.length,t,"internal-error");const Te=Ee.users[0];n._notifyReloadListener(Te);const Re=!((e=Te.providerUserInfo)===null||e===void 0)&&e.length?extractProviderData(Te.providerUserInfo):[],Me=mergeProviderData(n.providerData,Re),Ve=n.isAnonymous,De=!(n.email&&Te.passwordHash)&&!Me?.length,$e=Ve?De:!1,Oe={uid:Te.localId,displayName:Te.displayName||null,photoURL:Te.photoUrl||null,email:Te.email||null,emailVerified:Te.emailVerified||!1,phoneNumber:Te.phoneNumber||null,tenantId:Te.tenantId||null,providerData:Me,metadata:new UserMetadata(Te.createdAt,Te.lastLoginAt),isAnonymous:$e};Object.assign(n,Oe)}async function reload(n){const e=getModularInstance(n);await _reloadWithoutSaving(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mergeProviderData(n,e){return[...n.filter(r=>!e.some(Ee=>Ee.providerId===r.providerId)),...e]}function extractProviderData(n){return n.map(e=>{var{providerId:t}=e,r=__rest(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken(n,e){const t=await _performFetchWithErrorHandling(n,{},async()=>{const r=querystring({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:Ee,apiKey:Te}=n.config,Re=await _getFinalTarget(n,Ee,"/v1/token",`key=${Te}`),Me=await n._getAdditionalHeaders();Me["Content-Type"]="application/x-www-form-urlencoded";const Ve={method:"POST",headers:Me,body:r};return n.emulatorConfig&&isCloudWorkstation(n.emulatorConfig.host)&&(Ve.credentials="include"),FetchProvider.fetch()(Re,Ve)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function revokeToken(n,e){return _performApiRequest(n,"POST","/v2/accounts:revokeToken",_addTidIfNecessary(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_assert(e.idToken,"internal-error"),_assert(typeof e.idToken<"u","internal-error"),_assert(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_tokenExpiresIn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_assert(e.length!==0,"internal-error");const t=_tokenExpiresIn(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(_assert(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:Ee,expiresIn:Te}=await requestStsToken(e,t);this.updateTokensAndExpiration(r,Ee,Number(Te))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:Ee,expirationTime:Te}=t,Re=new StsTokenManager;return r&&(_assert(typeof r=="string","internal-error",{appName:e}),Re.refreshToken=r),Ee&&(_assert(typeof Ee=="string","internal-error",{appName:e}),Re.accessToken=Ee),Te&&(_assert(typeof Te=="number","internal-error",{appName:e}),Re.expirationTime=Te),Re}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(n,e){_assert(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class UserImpl{constructor(e){var{uid:t,auth:r,stsTokenManager:Ee}=e,Te=__rest(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=Ee,this.accessToken=Ee.accessToken,this.displayName=Te.displayName||null,this.email=Te.email||null,this.emailVerified=Te.emailVerified||!1,this.phoneNumber=Te.phoneNumber||null,this.photoURL=Te.photoURL||null,this.isAnonymous=Te.isAnonymous||!1,this.tenantId=Te.tenantId||null,this.providerData=Te.providerData?[...Te.providerData]:[],this.metadata=new UserMetadata(Te.createdAt||void 0,Te.lastLoginAt||void 0)}async getIdToken(e){const t=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,e));return _assert(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return getIdTokenResult(this,e)}reload(){return reload(this)}_assign(e){this!==e&&(_assert(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new UserImpl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_isFirebaseServerApp(this.auth.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this.auth));const e=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,Ee,Te,Re,Me,Ve,De,$e;const Oe=(r=t.displayName)!==null&&r!==void 0?r:void 0,Ce=(Ee=t.email)!==null&&Ee!==void 0?Ee:void 0,Be=(Te=t.phoneNumber)!==null&&Te!==void 0?Te:void 0,Ue=(Re=t.photoURL)!==null&&Re!==void 0?Re:void 0,We=(Me=t.tenantId)!==null&&Me!==void 0?Me:void 0,He=(Ve=t._redirectEventId)!==null&&Ve!==void 0?Ve:void 0,Ge=(De=t.createdAt)!==null&&De!==void 0?De:void 0,Ye=($e=t.lastLoginAt)!==null&&$e!==void 0?$e:void 0,{uid:Je,emailVerified:Ze,isAnonymous:fn,providerData:yn,stsTokenManager:mn}=t;_assert(Je&&mn,e,"internal-error");const pn=StsTokenManager.fromJSON(this.name,mn);_assert(typeof Je=="string",e,"internal-error"),assertStringOrUndefined(Oe,e.name),assertStringOrUndefined(Ce,e.name),_assert(typeof Ze=="boolean",e,"internal-error"),_assert(typeof fn=="boolean",e,"internal-error"),assertStringOrUndefined(Be,e.name),assertStringOrUndefined(Ue,e.name),assertStringOrUndefined(We,e.name),assertStringOrUndefined(He,e.name),assertStringOrUndefined(Ge,e.name),assertStringOrUndefined(Ye,e.name);const un=new UserImpl({uid:Je,auth:e,email:Ce,emailVerified:Ze,displayName:Oe,isAnonymous:fn,photoURL:Ue,phoneNumber:Be,tenantId:We,stsTokenManager:pn,createdAt:Ge,lastLoginAt:Ye});return yn&&Array.isArray(yn)&&(un.providerData=yn.map(bn=>Object.assign({},bn))),He&&(un._redirectEventId=He),un}static async _fromIdTokenResponse(e,t,r=!1){const Ee=new StsTokenManager;Ee.updateFromServerResponse(t);const Te=new UserImpl({uid:t.localId,auth:e,stsTokenManager:Ee,isAnonymous:r});return await _reloadWithoutSaving(Te),Te}static async _fromGetAccountInfoResponse(e,t,r){const Ee=t.users[0];_assert(Ee.localId!==void 0,"internal-error");const Te=Ee.providerUserInfo!==void 0?extractProviderData(Ee.providerUserInfo):[],Re=!(Ee.email&&Ee.passwordHash)&&!Te?.length,Me=new StsTokenManager;Me.updateFromIdToken(r);const Ve=new UserImpl({uid:Ee.localId,auth:e,stsTokenManager:Me,isAnonymous:Re}),De={uid:Ee.localId,displayName:Ee.displayName||null,photoURL:Ee.photoUrl||null,email:Ee.email||null,emailVerified:Ee.emailVerified||!1,phoneNumber:Ee.phoneNumber||null,tenantId:Ee.tenantId||null,providerData:Te,metadata:new UserMetadata(Ee.createdAt,Ee.lastLoginAt),isAnonymous:!(Ee.email&&Ee.passwordHash)&&!Te?.length};return Object.assign(Ve,De),Ve}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const instanceCache=new Map;function _getInstance(n){debugAssert(n instanceof Function,"Expected a class definition");let e=instanceCache.get(n);return e?(debugAssert(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,instanceCache.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(n,e,t){return`firebase:${n}:${e}:${t}`}class PersistenceUserManager{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:Ee,name:Te}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,Ee.apiKey,Te),this.fullPersistenceKey=_persistenceKeyName("persistence",Ee.apiKey,Te),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await getAccountInfo(this.auth,{idToken:e}).catch(()=>{});return t?UserImpl._fromGetAccountInfoResponse(this.auth,t,e):null}return UserImpl._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),e,r);const Ee=(await Promise.all(t.map(async De=>{if(await De._isAvailable())return De}))).filter(De=>De);let Te=Ee[0]||_getInstance(inMemoryPersistence);const Re=_persistenceKeyName(r,e.config.apiKey,e.name);let Me=null;for(const De of t)try{const $e=await De._get(Re);if($e){let Oe;if(typeof $e=="string"){const Ce=await getAccountInfo(e,{idToken:$e}).catch(()=>{});if(!Ce)break;Oe=await UserImpl._fromGetAccountInfoResponse(e,Ce,$e)}else Oe=UserImpl._fromJSON(e,$e);De!==Te&&(Me=Oe),Te=De;break}}catch{}const Ve=Ee.filter(De=>De._shouldAllowMigration);return!Te._shouldAllowMigration||!Ve.length?new PersistenceUserManager(Te,e,r):(Te=Ve[0],Me&&await Te._set(Re,Me.toJSON()),await Promise.all(t.map(async De=>{if(De!==Te)try{await De._remove(Re)}catch{}})),new PersistenceUserManager(Te,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_isIEMobile(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_isFirefox(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_isBlackBerry(e))return"Blackberry";if(_isWebOS(e))return"Webos";if(_isSafari(e))return"Safari";if((e.includes("chrome/")||_isChromeIOS(e))&&!e.includes("edge/"))return"Chrome";if(_isAndroid(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function _isFirefox(n=getUA()){return/firefox\//i.test(n)}function _isSafari(n=getUA()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _isChromeIOS(n=getUA()){return/crios\//i.test(n)}function _isIEMobile(n=getUA()){return/iemobile/i.test(n)}function _isAndroid(n=getUA()){return/android/i.test(n)}function _isBlackBerry(n=getUA()){return/blackberry/i.test(n)}function _isWebOS(n=getUA()){return/webos/i.test(n)}function _isIOS(n=getUA()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function _isIOSStandalone(n=getUA()){var e;return _isIOS(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser(n=getUA()){return _isIOS(n)||_isAndroid(n)||_isWebOS(n)||_isBlackBerry(n)||/windows phone/i.test(n)||_isIEMobile(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(n,e=[]){let t;switch(n){case"Browser":t=_getBrowserName(getUA());break;case"Worker":t=`${_getBrowserName(getUA())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${SDK_VERSION}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthMiddlewareQueue{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=Te=>new Promise((Re,Me)=>{try{const Ve=e(Te);Re(Ve)}catch(Ve){Me(Ve)}});r.onAbort=t,this.queue.push(r);const Ee=this.queue.length-1;return()=>{this.queue[Ee]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const Ee of t)try{Ee()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getPasswordPolicy(n,e={}){return _performApiRequest(n,"GET","/v2/passwordPolicy",_addTidIfNecessary(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MINIMUM_MIN_PASSWORD_LENGTH=6;class PasswordPolicyImpl{constructor(e){var t,r,Ee,Te;const Re=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=Re.minPasswordLength)!==null&&t!==void 0?t:MINIMUM_MIN_PASSWORD_LENGTH,Re.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=Re.maxPasswordLength),Re.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=Re.containsLowercaseCharacter),Re.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=Re.containsUppercaseCharacter),Re.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=Re.containsNumericCharacter),Re.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=Re.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(Ee=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&Ee!==void 0?Ee:"",this.forceUpgradeOnSignin=(Te=e.forceUpgradeOnSignin)!==null&&Te!==void 0?Te:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,Ee,Te,Re,Me;const Ve={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,Ve),this.validatePasswordCharacterOptions(e,Ve),Ve.isValid&&(Ve.isValid=(t=Ve.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),Ve.isValid&&(Ve.isValid=(r=Ve.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),Ve.isValid&&(Ve.isValid=(Ee=Ve.containsLowercaseLetter)!==null&&Ee!==void 0?Ee:!0),Ve.isValid&&(Ve.isValid=(Te=Ve.containsUppercaseLetter)!==null&&Te!==void 0?Te:!0),Ve.isValid&&(Ve.isValid=(Re=Ve.containsNumericCharacter)!==null&&Re!==void 0?Re:!0),Ve.isValid&&(Ve.isValid=(Me=Ve.containsNonAlphanumericCharacter)!==null&&Me!==void 0?Me:!0),Ve}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,Ee=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),Ee&&(t.meetsMaxPasswordLength=e.length<=Ee)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let Ee=0;Ee<e.length;Ee++)r=e.charAt(Ee),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,Ee,Te){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=Ee)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=Te))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthImpl{constructor(e,t,r,Ee){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=Ee,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=Ee.sdkClientVersion,this._persistenceManagerAvailable=new Promise(Te=>this._resolvePersistenceManagerAvailable=Te)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_getInstance(t)),this._initializationPromise=this.queue(async()=>{var r,Ee,Te;if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((Ee=this._popupRedirectResolver)===null||Ee===void 0)&&Ee._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((Te=this.currentUser)===null||Te===void 0?void 0:Te.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await getAccountInfo(this,{idToken:e}),r=await UserImpl._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(_isFirebaseServerApp(this.app)){const Re=this.app.settings.authIdToken;return Re?new Promise(Me=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(Re).then(Me,Me))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let Ee=r,Te=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const Re=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,Me=Ee?._redirectEventId,Ve=await this.tryRedirectSignIn(e);(!Re||Re===Me)&&Ve?.user&&(Ee=Ve.user,Te=!0)}if(!Ee)return this.directlySetCurrentUser(null);if(!Ee._redirectEventId){if(Te)try{await this.beforeStateQueue.runMiddleware(Ee)}catch(Re){Ee=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(Re))}return Ee?this.reloadAndSetCurrentUserOrClear(Ee):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===Ee._redirectEventId?this.directlySetCurrentUser(Ee):this.reloadAndSetCurrentUserOrClear(Ee)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _reloadWithoutSaving(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_isFirebaseServerApp(this.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this));const t=e?getModularInstance(e):null;return t&&_assert(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&_assert(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _isFirebaseServerApp(this.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _getPasswordPolicy(this),t=new PasswordPolicyImpl(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ErrorFactory("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await revokeToken(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_getInstance(e)||this._popupRedirectResolver;_assert(t,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,Ee){if(this._deleted)return()=>{};const Te=typeof t=="function"?t:t.next.bind(t);let Re=!1;const Me=this._isInitialized?Promise.resolve():this._initializationPromise;if(_assert(Me,this,"internal-error"),Me.then(()=>{Re||Te(this.currentUser)}),typeof t=="function"){const Ve=e.addObserver(t,r,Ee);return()=>{Re=!0,Ve()}}else{const Ve=e.addObserver(t);return()=>{Re=!0,Ve()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const Ee=await this._getAppCheckToken();return Ee&&(t["X-Firebase-AppCheck"]=Ee),t}async _getAppCheckToken(){var e;if(_isFirebaseServerApp(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&_logWarn(`Error while retrieving App Check token: ${t.error}`),t?.token}}function _castAuth(n){return getModularInstance(n)}class Subscription{constructor(e){this.auth=e,this.observer=null,this.addObserver=createSubscribe(t=>this.observer=t)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let externalJSProvider={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _setExternalJSProvider(n){externalJSProvider=n}function _loadJS(n){return externalJSProvider.loadJS(n)}function _recaptchaEnterpriseScriptUrl(){return externalJSProvider.recaptchaEnterpriseScript}function _gapiScriptUrl(){return externalJSProvider.gapiScript}function _generateCallbackName(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class MockGreCAPTCHATopLevel{constructor(){this.enterprise=new MockGreCAPTCHA}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class MockGreCAPTCHA{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const RECAPTCHA_ENTERPRISE_VERIFIER_TYPE="recaptcha-enterprise",FAKE_TOKEN="NO_RECAPTCHA";class RecaptchaEnterpriseVerifier{constructor(e){this.type=RECAPTCHA_ENTERPRISE_VERIFIER_TYPE,this.auth=_castAuth(e)}async verify(e="verify",t=!1){async function r(Te){if(!t){if(Te.tenantId==null&&Te._agentRecaptchaConfig!=null)return Te._agentRecaptchaConfig.siteKey;if(Te.tenantId!=null&&Te._tenantRecaptchaConfigs[Te.tenantId]!==void 0)return Te._tenantRecaptchaConfigs[Te.tenantId].siteKey}return new Promise(async(Re,Me)=>{getRecaptchaConfig(Te,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ve=>{if(Ve.recaptchaKey===void 0)Me(new Error("recaptcha Enterprise site key undefined"));else{const De=new RecaptchaConfig(Ve);return Te.tenantId==null?Te._agentRecaptchaConfig=De:Te._tenantRecaptchaConfigs[Te.tenantId]=De,Re(De.siteKey)}}).catch(Ve=>{Me(Ve)})})}function Ee(Te,Re,Me){const Ve=window.grecaptcha;isEnterprise(Ve)?Ve.enterprise.ready(()=>{Ve.enterprise.execute(Te,{action:e}).then(De=>{Re(De)}).catch(()=>{Re(FAKE_TOKEN)})}):Me(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MockGreCAPTCHATopLevel().execute("siteKey",{action:"verify"}):new Promise((Te,Re)=>{r(this.auth).then(Me=>{if(!t&&isEnterprise(window.grecaptcha))Ee(Me,Te,Re);else{if(typeof window>"u"){Re(new Error("RecaptchaVerifier is only supported in browser"));return}let Ve=_recaptchaEnterpriseScriptUrl();Ve.length!==0&&(Ve+=Me),_loadJS(Ve).then(()=>{Ee(Me,Te,Re)}).catch(De=>{Re(De)})}}).catch(Me=>{Re(Me)})})}}async function injectRecaptchaFields(n,e,t,r=!1,Ee=!1){const Te=new RecaptchaEnterpriseVerifier(n);let Re;if(Ee)Re=FAKE_TOKEN;else try{Re=await Te.verify(t)}catch{Re=await Te.verify(t,!0)}const Me=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in Me){const Ve=Me.phoneEnrollmentInfo.phoneNumber,De=Me.phoneEnrollmentInfo.recaptchaToken;Object.assign(Me,{phoneEnrollmentInfo:{phoneNumber:Ve,recaptchaToken:De,captchaResponse:Re,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in Me){const Ve=Me.phoneSignInInfo.recaptchaToken;Object.assign(Me,{phoneSignInInfo:{recaptchaToken:Ve,captchaResponse:Re,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return Me}return r?Object.assign(Me,{captchaResp:Re}):Object.assign(Me,{captchaResponse:Re}),Object.assign(Me,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Me,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Me}async function handleRecaptchaFlow(n,e,t,r,Ee){var Te;if(!((Te=n._getRecaptchaConfig())===null||Te===void 0)&&Te.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const Re=await injectRecaptchaFields(n,e,t,t==="getOobCode");return r(n,Re)}else return r(n,e).catch(async Re=>{if(Re.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Me=await injectRecaptchaFields(n,e,t,t==="getOobCode");return r(n,Me)}else return Promise.reject(Re)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function initializeAuth(n,e){const t=_getProvider(n,"auth");if(t.isInitialized()){const Ee=t.getImmediate(),Te=t.getOptions();if(deepEqual(Te,e??{}))return Ee;_fail(Ee,"already-initialized")}return t.initialize({options:e})}function _initializeAuthInstance(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(_getInstance);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function connectAuthEmulator(n,e,t){const r=_castAuth(n);_assert(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const Ee=!1,Te=extractProtocol(e),{host:Re,port:Me}=extractHostAndPort(e),Ve=Me===null?"":`:${Me}`,De={url:`${Te}//${Re}${Ve}/`},$e=Object.freeze({host:Re,port:Me,protocol:Te.replace(":",""),options:Object.freeze({disableWarnings:Ee})});if(!r._canInitEmulator){_assert(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),_assert(deepEqual(De,r.config.emulator)&&deepEqual($e,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=De,r.emulatorConfig=$e,r.settings.appVerificationDisabledForTesting=!0,isCloudWorkstation(Re)?(pingServer(`${Te}//${Re}${Ve}`),updateEmulatorBanner("Auth",!0)):emitEmulatorWarning()}function extractProtocol(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function extractHostAndPort(n){const e=extractProtocol(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",Ee=/^(\[[^\]]+\])(:|$)/.exec(r);if(Ee){const Te=Ee[1];return{host:Te,port:parsePort(r.substr(Te.length+1))}}else{const[Te,Re]=r.split(":");return{host:Te,port:parsePort(Re)}}}function parsePort(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function emitEmulatorWarning(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthCredential{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(e){return debugFail("not implemented")}_linkToIdToken(e,t){return debugFail("not implemented")}_getReauthenticationResolver(e){return debugFail("not implemented")}}async function linkEmailPassword(n,e){return _performApiRequest(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithPassword(n,e){return _performSignInRequest(n,"POST","/v1/accounts:signInWithPassword",_addTidIfNecessary(n,e))}async function sendOobCode(n,e){return _performApiRequest(n,"POST","/v1/accounts:sendOobCode",_addTidIfNecessary(n,e))}async function sendPasswordResetEmail$1(n,e){return sendOobCode(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithEmailLink$1(n,e){return _performSignInRequest(n,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(n,e))}async function signInWithEmailLinkForLinking(n,e){return _performSignInRequest(n,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthCredential extends AuthCredential{constructor(e,t,r,Ee=null){super("password",r),this._email=e,this._password=t,this._tenantId=Ee}static _fromEmailAndPassword(e,t){return new EmailAuthCredential(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new EmailAuthCredential(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(e,t,"signInWithPassword",signInWithPassword);case"emailLink":return signInWithEmailLink$1(e,{email:this._email,oobCode:this._password});default:_fail(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return handleRecaptchaFlow(e,r,"signUpPassword",linkEmailPassword);case"emailLink":return signInWithEmailLinkForLinking(e,{idToken:t,email:this._email,oobCode:this._password});default:_fail(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp(n,e){return _performSignInRequest(n,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new OAuthCredential(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):_fail("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:Ee}=t,Te=__rest(t,["providerId","signInMethod"]);if(!r||!Ee)return null;const Re=new OAuthCredential(r,Ee);return Re.idToken=Te.idToken||void 0,Re.accessToken=Te.accessToken||void 0,Re.secret=Te.secret,Re.nonce=Te.nonce,Re.pendingToken=Te.pendingToken||null,Re}_getIdTokenResponse(e){const t=this.buildRequest();return signInWithIdp(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,signInWithIdp(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,signInWithIdp(e,t)}buildRequest(){const e={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=querystring(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parseMode(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function parseDeepLink(n){const e=querystringDecode(extractQuerystring(n)).link,t=e?querystringDecode(extractQuerystring(e)).deep_link_id:null,r=querystringDecode(extractQuerystring(n)).deep_link_id;return(r?querystringDecode(extractQuerystring(r)).link:null)||r||t||e||n}class ActionCodeURL{constructor(e){var t,r,Ee,Te,Re,Me;const Ve=querystringDecode(extractQuerystring(e)),De=(t=Ve.apiKey)!==null&&t!==void 0?t:null,$e=(r=Ve.oobCode)!==null&&r!==void 0?r:null,Oe=parseMode((Ee=Ve.mode)!==null&&Ee!==void 0?Ee:null);_assert(De&&$e&&Oe,"argument-error"),this.apiKey=De,this.operation=Oe,this.code=$e,this.continueUrl=(Te=Ve.continueUrl)!==null&&Te!==void 0?Te:null,this.languageCode=(Re=Ve.lang)!==null&&Re!==void 0?Re:null,this.tenantId=(Me=Ve.tenantId)!==null&&Me!==void 0?Me:null}static parseLink(e){const t=parseDeepLink(e);try{return new ActionCodeURL(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthProvider{constructor(){this.providerId=EmailAuthProvider.PROVIDER_ID}static credential(e,t){return EmailAuthCredential._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=ActionCodeURL.parseLink(t);return _assert(r,"argument-error"),EmailAuthCredential._fromEmailAndCode(e,r.code,r.tenantId)}}EmailAuthProvider.PROVIDER_ID="password";EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD="password";EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FederatedAuthProvider{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(e){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return FacebookAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return FacebookAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com";FacebookAuthProvider.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return GoogleAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GoogleAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return GoogleAuthProvider.credential(t,r)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com";GoogleAuthProvider.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(e){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return GithubAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GithubAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return GithubAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com";GithubAuthProvider.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(e,t){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return TwitterAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return TwitterAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return TwitterAuthProvider.credential(t,r)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com";TwitterAuthProvider.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signUp(n,e){return _performSignInRequest(n,"POST","/v1/accounts:signUp",_addTidIfNecessary(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserCredentialImpl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,Ee=!1){const Te=await UserImpl._fromIdTokenResponse(e,r,Ee),Re=providerIdForResponse(r);return new UserCredentialImpl({user:Te,providerId:Re,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const Ee=providerIdForResponse(r);return new UserCredentialImpl({user:e,providerId:Ee,_tokenResponse:r,operationType:t})}}function providerIdForResponse(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MultiFactorError extends FirebaseError{constructor(e,t,r,Ee){var Te;super(t.code,t.message),this.operationType=r,this.user=Ee,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:e.name,tenantId:(Te=e.tenantId)!==null&&Te!==void 0?Te:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,Ee){return new MultiFactorError(e,t,r,Ee)}}function _processCredentialSavingMfaContextIfNecessary(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(Te=>{throw Te.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation(n,Te,e,r):Te})}async function _link$1(n,e,t=!1){const r=await _logoutIfInvalidated(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return UserCredentialImpl._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate(n,e,t=!1){const{auth:r}=n;if(_isFirebaseServerApp(r.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(r));const Ee="reauthenticate";try{const Te=await _logoutIfInvalidated(n,_processCredentialSavingMfaContextIfNecessary(r,Ee,e,n),t);_assert(Te.idToken,r,"internal-error");const Re=_parseToken(Te.idToken);_assert(Re,r,"internal-error");const{sub:Me}=Re;return _assert(n.uid===Me,r,"user-mismatch"),UserCredentialImpl._forOperation(n,Ee,Te)}catch(Te){throw Te?.code==="auth/user-not-found"&&_fail(r,"user-mismatch"),Te}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential(n,e,t=!1){if(_isFirebaseServerApp(n.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(n));const r="signIn",Ee=await _processCredentialSavingMfaContextIfNecessary(n,r,e),Te=await UserCredentialImpl._fromIdTokenResponse(n,r,Ee);return t||await n._updateCurrentUser(Te.user),Te}async function signInWithCredential(n,e){return _signInWithCredential(_castAuth(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function recachePasswordPolicy(n){const e=_castAuth(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function sendPasswordResetEmail(n,e,t){const r=_castAuth(n);await handleRecaptchaFlow(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",sendPasswordResetEmail$1)}async function createUserWithEmailAndPassword(n,e,t){if(_isFirebaseServerApp(n.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(n));const r=_castAuth(n),Re=await handleRecaptchaFlow(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",signUp).catch(Ve=>{throw Ve.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(n),Ve}),Me=await UserCredentialImpl._fromIdTokenResponse(r,"signIn",Re);return await r._updateCurrentUser(Me.user),Me}function signInWithEmailAndPassword(n,e,t){return _isFirebaseServerApp(n.app)?Promise.reject(_serverAppCurrentUserOperationNotSupportedError(n)):signInWithCredential(getModularInstance(n),EmailAuthProvider.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(n),r})}function onIdTokenChanged(n,e,t,r){return getModularInstance(n).onIdTokenChanged(e,t,r)}function beforeAuthStateChanged(n,e,t){return getModularInstance(n).beforeAuthStateChanged(e,t)}function onAuthStateChanged(n,e,t,r){return getModularInstance(n).onAuthStateChanged(e,t,r)}function signOut(n){return getModularInstance(n).signOut()}const STORAGE_AVAILABLE_KEY="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserPersistenceClass{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),Ee=this.localCache[t];r!==Ee&&e(t,Ee,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((Re,Me,Ve)=>{this.notifyListeners(Re,Ve)});return}const r=e.key;t?this.detachListener():this.stopPolling();const Ee=()=>{const Re=this.storage.getItem(r);!t&&this.localCache[r]===Re||this.notifyListeners(r,Re)},Te=this.storage.getItem(r);_isIE10()&&Te!==e.newValue&&e.newValue!==e.oldValue?setTimeout(Ee,IE10_LOCAL_STORAGE_SYNC_DELAY):Ee()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const Ee of Array.from(r))Ee(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _allSettled(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Receiver{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(Ee=>Ee.isListeningto(e));if(t)return t;const r=new Receiver(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:Ee,data:Te}=t.data,Re=this.handlersMap[Ee];if(!Re?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:Ee});const Me=Array.from(Re).map(async De=>De(t.origin,Te)),Ve=await _allSettled(Me);t.ports[0].postMessage({status:"done",eventId:r,eventType:Ee,response:Ve})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _generateEventId(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sender{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const Ee=typeof MessageChannel<"u"?new MessageChannel:null;if(!Ee)throw new Error("connection_unavailable");let Te,Re;return new Promise((Me,Ve)=>{const De=_generateEventId("",20);Ee.port1.start();const $e=setTimeout(()=>{Ve(new Error("unsupported_event"))},r);Re={messageChannel:Ee,onMessage(Oe){const Ce=Oe;if(Ce.data.eventId===De)switch(Ce.data.status){case"ack":clearTimeout($e),Te=setTimeout(()=>{Ve(new Error("timeout"))},3e3);break;case"done":clearTimeout(Te),Me(Ce.data.response);break;default:clearTimeout($e),clearTimeout(Te),Ve(new Error("invalid_response"));break}}},this.handlers.add(Re),Ee.port1.addEventListener("message",Re.onMessage),this.target.postMessage({eventType:e,eventId:De,data:t},[Ee.port2])}).finally(()=>{Re&&this.removeMessageHandler(Re)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window(){return window}function _setWindowLocation(n){_window().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return typeof _window().WorkerGlobalScope<"u"&&typeof _window().importScripts=="function"}async function _getActiveServiceWorker(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function getObjectStore(n,e){return n.transaction([DB_OBJECTSTORE_NAME],e?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const n=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(n).toPromise()}function _openDatabase(){const n=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(Ee){t(Ee)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?e(r):(r.close(),await _deleteDatabase(),e(await _openDatabase()))})})}async function _putObject(n,e,t){const r=getObjectStore(n,!0).put({[DB_DATA_KEYPATH]:e,value:t});return new DBPromise(r).toPromise()}async function getObject(n,e){const t=getObjectStore(n,!1).get(e),r=await new DBPromise(t).toPromise();return r===void 0?null:r.value}function _deleteObject(n,e){const t=getObjectStore(n,!0).delete(e);return new DBPromise(t).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>_TRANSACTION_RETRY_COUNT)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _openDatabase();return await _putObject(e,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(e,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>_putObject(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>getObject(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>_deleteObject(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(Ee=>{const Te=getObjectStore(Ee,!1).getAll();return new DBPromise(Te).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:Ee,value:Te}of e)r.add(Ee),JSON.stringify(this.localCache[Ee])!==JSON.stringify(Te)&&(this.notifyListeners(Ee,Te),t.push(Ee));for(const Ee of Object.keys(this.localCache))this.localCache[Ee]&&!r.has(Ee)&&(this.notifyListeners(Ee,null),t.push(Ee));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const Ee of Array.from(r))Ee(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;new Delay(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _withDefaultResolver(n,e){return e?_getInstance(e):(_assert(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IdpCredential extends AuthCredential{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return signInWithIdp(e,this._buildIdpRequest())}_linkToIdToken(e,t){return signInWithIdp(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return signInWithIdp(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function _signIn(n){return _signInWithCredential(n.auth,new IdpCredential(n),n.bypassAuthState)}function _reauth(n){const{auth:e,user:t}=n;return _assert(t,e,"internal-error"),_reauthenticate(t,new IdpCredential(n),n.bypassAuthState)}async function _link(n){const{auth:e,user:t}=n;return _assert(t,e,"internal-error"),_link$1(t,new IdpCredential(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AbstractPopupRedirectOperation{constructor(e,t,r,Ee,Te=!1){this.auth=e,this.resolver=r,this.user=Ee,this.bypassAuthState=Te,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:Ee,tenantId:Te,error:Re,type:Me}=e;if(Re){this.reject(Re);return}const Ve={auth:this.auth,requestUri:t,sessionId:r,tenantId:Te||void 0,postBody:Ee||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(Me)(Ve))}catch(De){this.reject(De)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);class PopupOperation extends AbstractPopupRedirectOperation{constructor(e,t,r,Ee,Te){super(e,t,Ee,Te),this.provider=r,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _assert(e,this.auth,"internal-error"),e}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const e=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_POLL_WINDOW_CLOSE_TIMEOUT.get())};e()}}PopupOperation.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=redirectOutcomeMap.get(this.auth._key());if(!e){try{const r=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}redirectOutcomeMap.set(this.auth._key(),e)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(n,e){const t=pendingRedirectKey(e),r=resolverPersistence(n);if(!await r._isAvailable())return!1;const Ee=await r._get(t)==="true";return await r._remove(t),Ee}function _overrideRedirectResult(n,e){redirectOutcomeMap.set(n._key(),e)}function resolverPersistence(n){return _getInstance(n._redirectPersistence)}function pendingRedirectKey(n){return _persistenceKeyName(PENDING_REDIRECT_KEY,n.config.apiKey,n.name)}async function _getRedirectResult(n,e,t=!1){if(_isFirebaseServerApp(n.app))return Promise.reject(_serverAppCurrentUserOperationNotSupportedError(n));const r=_castAuth(n),Ee=_withDefaultResolver(r,e),Re=await new RedirectAction(r,Ee,t).execute();return Re&&!t&&(delete Re.user._redirectEventId,await r._persistUserIfCurrent(Re.user),await r._setRedirectUser(null,e)),Re}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVENT_DUPLICATION_CACHE_DURATION_MS=600*1e3;class AuthEventManager{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!isRedirectEvent(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!isNullRedirectEvent(e)){const Ee=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(_createError(this.auth,Ee))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(e))}saveEventToCache(e){this.cachedEventUids.add(eventUid(e)),this.lastProcessedEventTime=Date.now()}}function eventUid(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function isNullRedirectEvent({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function isRedirectEvent(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig(n,e={}){return _performApiRequest(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(n){if(n.config.emulator)return;const{authorizedDomains:e}=await _getProjectConfig(n);for(const t of e)try{if(matchDomain(t))return}catch{}_fail(n,"unauthorized-domain")}function matchDomain(n){const e=_getCurrentUrl(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const Re=new URL(n);return Re.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&Re.hostname===r}if(!HTTP_REGEX.test(t))return!1;if(IP_ADDRESS_REGEX.test(n))return r===n;const Ee=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+Ee+"|"+Ee+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const n=_window().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function loadGapi(n){return new Promise((e,t)=>{var r,Ee,Te;function Re(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),t(_createError(n,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(!((Ee=(r=_window().gapi)===null||r===void 0?void 0:r.iframes)===null||Ee===void 0)&&Ee.Iframe)e(gapi.iframes.getContext());else if(!((Te=_window().gapi)===null||Te===void 0)&&Te.load)Re();else{const Me=_generateCallbackName("iframefcb");return _window()[Me]=()=>{gapi.load?Re():t(_createError(n,"network-request-failed"))},_loadJS(`${_gapiScriptUrl()}?onload=${Me}`).catch(Ve=>t(Ve))}}).catch(e=>{throw cachedGApiLoader=null,e})}let cachedGApiLoader=null;function _loadGapi(n){return cachedGApiLoader=cachedGApiLoader||loadGapi(n),cachedGApiLoader}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(n){const e=n.config;_assert(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?_emulatorUrl(e,EMULATED_IFRAME_PATH):`https://${n.config.authDomain}/${IFRAME_PATH}`,r={apiKey:e.apiKey,appName:n.name,v:SDK_VERSION},Ee=EID_FROM_APIHOST.get(n.config.apiHost);Ee&&(r.eid=Ee);const Te=n._getFrameworks();return Te.length&&(r.fw=Te.join(",")),`${t}?${querystring(r).slice(1)}`}async function _openIframe(n){const e=await _loadGapi(n),t=_window().gapi;return _assert(t,n,"internal-error"),e.open({where:document.body,url:getIframeUrl(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},r=>new Promise(async(Ee,Te)=>{await r.restyle({setHideOnLeave:!1});const Re=_createError(n,"network-request-failed"),Me=_window().setTimeout(()=>{Te(Re)},PING_TIMEOUT.get());function Ve(){_window().clearTimeout(Me),Ee(r)}r.ping(Ve).then(Ve,()=>{Te(Re)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open(n,e,t,r=DEFAULT_WIDTH,Ee=DEFAULT_HEIGHT){const Te=Math.max((window.screen.availHeight-Ee)/2,0).toString(),Re=Math.max((window.screen.availWidth-r)/2,0).toString();let Me="";const Ve=Object.assign(Object.assign({},BASE_POPUP_OPTIONS),{width:r.toString(),height:Ee.toString(),top:Te,left:Re}),De=getUA().toLowerCase();t&&(Me=_isChromeIOS(De)?TARGET_BLANK:t),_isFirefox(De)&&(e=e||FIREFOX_EMPTY_URL,Ve.scrollbars="yes");const $e=Object.entries(Ve).reduce((Ce,[Be,Ue])=>`${Ce}${Be}=${Ue},`,"");if(_isIOSStandalone(De)&&Me!=="_self")return openAsNewWindowIOS(e||"",Me),new AuthPopup(null);const Oe=window.open(e||"",Me,$e);_assert(Oe,n,"popup-blocked");try{Oe.focus()}catch{}return new AuthPopup(Oe)}function openAsNewWindowIOS(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler",FIREBASE_APP_CHECK_FRAGMENT_ID=encodeURIComponent("fac");async function _getRedirectUrl(n,e,t,r,Ee,Te){_assert(n.config.authDomain,n,"auth-domain-config-required"),_assert(n.config.apiKey,n,"invalid-api-key");const Re={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:SDK_VERSION,eventId:Ee};if(e instanceof FederatedAuthProvider){e.setDefaultLanguage(n.languageCode),Re.providerId=e.providerId||"",isEmpty$2(e.getCustomParameters())||(Re.customParameters=JSON.stringify(e.getCustomParameters()));for(const[$e,Oe]of Object.entries({}))Re[$e]=Oe}if(e instanceof BaseOAuthProvider){const $e=e.getScopes().filter(Oe=>Oe!=="");$e.length>0&&(Re.scopes=$e.join(","))}n.tenantId&&(Re.tid=n.tenantId);const Me=Re;for(const $e of Object.keys(Me))Me[$e]===void 0&&delete Me[$e];const Ve=await n._getAppCheckToken(),De=Ve?`#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent(Ve)}`:"";return`${getHandlerBase(n)}?${querystring(Me).slice(1)}${De}`}function getHandlerBase({config:n}){return n.emulator?_emulatorUrl(n,EMULATOR_WIDGET_PATH):`https://${n.authDomain}/${WIDGET_PATH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(e,t,r,Ee){var Te;debugAssert((Te=this.eventManagers[e._key()])===null||Te===void 0?void 0:Te.manager,"_initialize() not called before _openPopup()");const Re=await _getRedirectUrl(e,t,r,_getCurrentUrl(),Ee);return _open(e,Re,_generateEventId())}async _openRedirect(e,t,r,Ee){await this._originValidation(e);const Te=await _getRedirectUrl(e,t,r,_getCurrentUrl(),Ee);return _setWindowLocation(Te),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:Ee,promise:Te}=this.eventManagers[t];return Ee?Promise.resolve(Ee):(debugAssert(Te,"If manager is not set, promise should be"),Te)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await _openIframe(e),r=new AuthEventManager(e);return t.register("authEvent",Ee=>(_assert(Ee?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(Ee.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},Ee=>{var Te;const Re=(Te=Ee?.[0])===null||Te===void 0?void 0:Te[WEB_STORAGE_SUPPORT_KEY];Re!==void 0&&t(!!Re),_fail(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=_validateOrigin(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name$3="@firebase/auth",version$1="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthInterop{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVersionForPlatform(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function registerAuth(n){_registerComponent(new Component("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),Ee=e.getProvider("heartbeat"),Te=e.getProvider("app-check-internal"),{apiKey:Re,authDomain:Me}=r.options;_assert(Re&&!Re.includes(":"),"invalid-api-key",{appName:r.name});const Ve={apiKey:Re,authDomain:Me,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(n)},De=new AuthImpl(r,Ee,Te,Ve);return _initializeAuthInstance(De,t),De},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),_registerComponent(new Component("auth-internal",e=>{const t=_castAuth(e.getProvider("auth").getImmediate());return(r=>new AuthInterop(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name$3,version$1,getVersionForPlatform(n)),registerVersion(name$3,version$1,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ID_TOKEN_MAX_AGE=300,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>authIdTokenMaxAge)return;const Ee=t?.token;lastPostedIdToken!==Ee&&(lastPostedIdToken=Ee,await fetch(n,{method:Ee?"POST":"DELETE",headers:Ee?{Authorization:`Bearer ${Ee}`}:{}}))};function getAuth(n=getApp()){const e=_getProvider(n,"auth");if(e.isInitialized())return e.getImmediate();const t=initializeAuth(n,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),r=getExperimentalSetting("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const Te=new URL(r,location.origin);if(location.origin===Te.origin){const Re=mintCookieFactory(Te.toString());beforeAuthStateChanged(t,Re,()=>Re(t.currentUser)),onIdTokenChanged(t,Me=>Re(Me))}}const Ee=getDefaultEmulatorHost("auth");return Ee&&connectAuthEmulator(t,`http://${Ee}`),t}function getScriptParentElement(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}_setExternalJSProvider({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=Ee=>{const Te=_createError("internal-error");Te.customData=Ee,t(Te)},r.type="text/javascript",r.charset="UTF-8",getScriptParentElement().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});registerAuth("Browser");var name$2="firebase",version="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name$2,version,"app");var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Integer,Md5;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(mn,pn){function un(){}un.prototype=pn.prototype,mn.D=pn.prototype,mn.prototype=new un,mn.prototype.constructor=mn,mn.C=function(bn,gn,xn){for(var En=Array(arguments.length-2),Pn=2;Pn<arguments.length;Pn++)En[Pn-2]=arguments[Pn];return pn.prototype[gn].apply(bn,En)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function Ee(mn,pn,un){un||(un=0);var bn=Array(16);if(typeof pn=="string")for(var gn=0;16>gn;++gn)bn[gn]=pn.charCodeAt(un++)|pn.charCodeAt(un++)<<8|pn.charCodeAt(un++)<<16|pn.charCodeAt(un++)<<24;else for(gn=0;16>gn;++gn)bn[gn]=pn[un++]|pn[un++]<<8|pn[un++]<<16|pn[un++]<<24;pn=mn.g[0],un=mn.g[1],gn=mn.g[2];var xn=mn.g[3],En=pn+(xn^un&(gn^xn))+bn[0]+3614090360&4294967295;pn=un+(En<<7&4294967295|En>>>25),En=xn+(gn^pn&(un^gn))+bn[1]+3905402710&4294967295,xn=pn+(En<<12&4294967295|En>>>20),En=gn+(un^xn&(pn^un))+bn[2]+606105819&4294967295,gn=xn+(En<<17&4294967295|En>>>15),En=un+(pn^gn&(xn^pn))+bn[3]+3250441966&4294967295,un=gn+(En<<22&4294967295|En>>>10),En=pn+(xn^un&(gn^xn))+bn[4]+4118548399&4294967295,pn=un+(En<<7&4294967295|En>>>25),En=xn+(gn^pn&(un^gn))+bn[5]+1200080426&4294967295,xn=pn+(En<<12&4294967295|En>>>20),En=gn+(un^xn&(pn^un))+bn[6]+2821735955&4294967295,gn=xn+(En<<17&4294967295|En>>>15),En=un+(pn^gn&(xn^pn))+bn[7]+4249261313&4294967295,un=gn+(En<<22&4294967295|En>>>10),En=pn+(xn^un&(gn^xn))+bn[8]+1770035416&4294967295,pn=un+(En<<7&4294967295|En>>>25),En=xn+(gn^pn&(un^gn))+bn[9]+2336552879&4294967295,xn=pn+(En<<12&4294967295|En>>>20),En=gn+(un^xn&(pn^un))+bn[10]+4294925233&4294967295,gn=xn+(En<<17&4294967295|En>>>15),En=un+(pn^gn&(xn^pn))+bn[11]+2304563134&4294967295,un=gn+(En<<22&4294967295|En>>>10),En=pn+(xn^un&(gn^xn))+bn[12]+1804603682&4294967295,pn=un+(En<<7&4294967295|En>>>25),En=xn+(gn^pn&(un^gn))+bn[13]+4254626195&4294967295,xn=pn+(En<<12&4294967295|En>>>20),En=gn+(un^xn&(pn^un))+bn[14]+2792965006&4294967295,gn=xn+(En<<17&4294967295|En>>>15),En=un+(pn^gn&(xn^pn))+bn[15]+1236535329&4294967295,un=gn+(En<<22&4294967295|En>>>10),En=pn+(gn^xn&(un^gn))+bn[1]+4129170786&4294967295,pn=un+(En<<5&4294967295|En>>>27),En=xn+(un^gn&(pn^un))+bn[6]+3225465664&4294967295,xn=pn+(En<<9&4294967295|En>>>23),En=gn+(pn^un&(xn^pn))+bn[11]+643717713&4294967295,gn=xn+(En<<14&4294967295|En>>>18),En=un+(xn^pn&(gn^xn))+bn[0]+3921069994&4294967295,un=gn+(En<<20&4294967295|En>>>12),En=pn+(gn^xn&(un^gn))+bn[5]+3593408605&4294967295,pn=un+(En<<5&4294967295|En>>>27),En=xn+(un^gn&(pn^un))+bn[10]+38016083&4294967295,xn=pn+(En<<9&4294967295|En>>>23),En=gn+(pn^un&(xn^pn))+bn[15]+3634488961&4294967295,gn=xn+(En<<14&4294967295|En>>>18),En=un+(xn^pn&(gn^xn))+bn[4]+3889429448&4294967295,un=gn+(En<<20&4294967295|En>>>12),En=pn+(gn^xn&(un^gn))+bn[9]+568446438&4294967295,pn=un+(En<<5&4294967295|En>>>27),En=xn+(un^gn&(pn^un))+bn[14]+3275163606&4294967295,xn=pn+(En<<9&4294967295|En>>>23),En=gn+(pn^un&(xn^pn))+bn[3]+4107603335&4294967295,gn=xn+(En<<14&4294967295|En>>>18),En=un+(xn^pn&(gn^xn))+bn[8]+1163531501&4294967295,un=gn+(En<<20&4294967295|En>>>12),En=pn+(gn^xn&(un^gn))+bn[13]+2850285829&4294967295,pn=un+(En<<5&4294967295|En>>>27),En=xn+(un^gn&(pn^un))+bn[2]+4243563512&4294967295,xn=pn+(En<<9&4294967295|En>>>23),En=gn+(pn^un&(xn^pn))+bn[7]+1735328473&4294967295,gn=xn+(En<<14&4294967295|En>>>18),En=un+(xn^pn&(gn^xn))+bn[12]+2368359562&4294967295,un=gn+(En<<20&4294967295|En>>>12),En=pn+(un^gn^xn)+bn[5]+4294588738&4294967295,pn=un+(En<<4&4294967295|En>>>28),En=xn+(pn^un^gn)+bn[8]+2272392833&4294967295,xn=pn+(En<<11&4294967295|En>>>21),En=gn+(xn^pn^un)+bn[11]+1839030562&4294967295,gn=xn+(En<<16&4294967295|En>>>16),En=un+(gn^xn^pn)+bn[14]+4259657740&4294967295,un=gn+(En<<23&4294967295|En>>>9),En=pn+(un^gn^xn)+bn[1]+2763975236&4294967295,pn=un+(En<<4&4294967295|En>>>28),En=xn+(pn^un^gn)+bn[4]+1272893353&4294967295,xn=pn+(En<<11&4294967295|En>>>21),En=gn+(xn^pn^un)+bn[7]+4139469664&4294967295,gn=xn+(En<<16&4294967295|En>>>16),En=un+(gn^xn^pn)+bn[10]+3200236656&4294967295,un=gn+(En<<23&4294967295|En>>>9),En=pn+(un^gn^xn)+bn[13]+681279174&4294967295,pn=un+(En<<4&4294967295|En>>>28),En=xn+(pn^un^gn)+bn[0]+3936430074&4294967295,xn=pn+(En<<11&4294967295|En>>>21),En=gn+(xn^pn^un)+bn[3]+3572445317&4294967295,gn=xn+(En<<16&4294967295|En>>>16),En=un+(gn^xn^pn)+bn[6]+76029189&4294967295,un=gn+(En<<23&4294967295|En>>>9),En=pn+(un^gn^xn)+bn[9]+3654602809&4294967295,pn=un+(En<<4&4294967295|En>>>28),En=xn+(pn^un^gn)+bn[12]+3873151461&4294967295,xn=pn+(En<<11&4294967295|En>>>21),En=gn+(xn^pn^un)+bn[15]+530742520&4294967295,gn=xn+(En<<16&4294967295|En>>>16),En=un+(gn^xn^pn)+bn[2]+3299628645&4294967295,un=gn+(En<<23&4294967295|En>>>9),En=pn+(gn^(un|~xn))+bn[0]+4096336452&4294967295,pn=un+(En<<6&4294967295|En>>>26),En=xn+(un^(pn|~gn))+bn[7]+1126891415&4294967295,xn=pn+(En<<10&4294967295|En>>>22),En=gn+(pn^(xn|~un))+bn[14]+2878612391&4294967295,gn=xn+(En<<15&4294967295|En>>>17),En=un+(xn^(gn|~pn))+bn[5]+4237533241&4294967295,un=gn+(En<<21&4294967295|En>>>11),En=pn+(gn^(un|~xn))+bn[12]+1700485571&4294967295,pn=un+(En<<6&4294967295|En>>>26),En=xn+(un^(pn|~gn))+bn[3]+2399980690&4294967295,xn=pn+(En<<10&4294967295|En>>>22),En=gn+(pn^(xn|~un))+bn[10]+4293915773&4294967295,gn=xn+(En<<15&4294967295|En>>>17),En=un+(xn^(gn|~pn))+bn[1]+2240044497&4294967295,un=gn+(En<<21&4294967295|En>>>11),En=pn+(gn^(un|~xn))+bn[8]+1873313359&4294967295,pn=un+(En<<6&4294967295|En>>>26),En=xn+(un^(pn|~gn))+bn[15]+4264355552&4294967295,xn=pn+(En<<10&4294967295|En>>>22),En=gn+(pn^(xn|~un))+bn[6]+2734768916&4294967295,gn=xn+(En<<15&4294967295|En>>>17),En=un+(xn^(gn|~pn))+bn[13]+1309151649&4294967295,un=gn+(En<<21&4294967295|En>>>11),En=pn+(gn^(un|~xn))+bn[4]+4149444226&4294967295,pn=un+(En<<6&4294967295|En>>>26),En=xn+(un^(pn|~gn))+bn[11]+3174756917&4294967295,xn=pn+(En<<10&4294967295|En>>>22),En=gn+(pn^(xn|~un))+bn[2]+718787259&4294967295,gn=xn+(En<<15&4294967295|En>>>17),En=un+(xn^(gn|~pn))+bn[9]+3951481745&4294967295,mn.g[0]=mn.g[0]+pn&4294967295,mn.g[1]=mn.g[1]+(gn+(En<<21&4294967295|En>>>11))&4294967295,mn.g[2]=mn.g[2]+gn&4294967295,mn.g[3]=mn.g[3]+xn&4294967295}r.prototype.u=function(mn,pn){pn===void 0&&(pn=mn.length);for(var un=pn-this.blockSize,bn=this.B,gn=this.h,xn=0;xn<pn;){if(gn==0)for(;xn<=un;)Ee(this,mn,xn),xn+=this.blockSize;if(typeof mn=="string"){for(;xn<pn;)if(bn[gn++]=mn.charCodeAt(xn++),gn==this.blockSize){Ee(this,bn),gn=0;break}}else for(;xn<pn;)if(bn[gn++]=mn[xn++],gn==this.blockSize){Ee(this,bn),gn=0;break}}this.h=gn,this.o+=pn},r.prototype.v=function(){var mn=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);mn[0]=128;for(var pn=1;pn<mn.length-8;++pn)mn[pn]=0;var un=8*this.o;for(pn=mn.length-8;pn<mn.length;++pn)mn[pn]=un&255,un/=256;for(this.u(mn),mn=Array(16),pn=un=0;4>pn;++pn)for(var bn=0;32>bn;bn+=8)mn[un++]=this.g[pn]>>>bn&255;return mn};function Te(mn,pn){var un=Me;return Object.prototype.hasOwnProperty.call(un,mn)?un[mn]:un[mn]=pn(mn)}function Re(mn,pn){this.h=pn;for(var un=[],bn=!0,gn=mn.length-1;0<=gn;gn--){var xn=mn[gn]|0;bn&&xn==pn||(un[gn]=xn,bn=!1)}this.g=un}var Me={};function Ve(mn){return-128<=mn&&128>mn?Te(mn,function(pn){return new Re([pn|0],0>pn?-1:0)}):new Re([mn|0],0>mn?-1:0)}function De(mn){if(isNaN(mn)||!isFinite(mn))return Oe;if(0>mn)return He(De(-mn));for(var pn=[],un=1,bn=0;mn>=un;bn++)pn[bn]=mn/un|0,un*=4294967296;return new Re(pn,0)}function $e(mn,pn){if(mn.length==0)throw Error("number format error: empty string");if(pn=pn||10,2>pn||36<pn)throw Error("radix out of range: "+pn);if(mn.charAt(0)=="-")return He($e(mn.substring(1),pn));if(0<=mn.indexOf("-"))throw Error('number format error: interior "-" character');for(var un=De(Math.pow(pn,8)),bn=Oe,gn=0;gn<mn.length;gn+=8){var xn=Math.min(8,mn.length-gn),En=parseInt(mn.substring(gn,gn+xn),pn);8>xn?(xn=De(Math.pow(pn,xn)),bn=bn.j(xn).add(De(En))):(bn=bn.j(un),bn=bn.add(De(En)))}return bn}var Oe=Ve(0),Ce=Ve(1),Be=Ve(16777216);n=Re.prototype,n.m=function(){if(We(this))return-He(this).m();for(var mn=0,pn=1,un=0;un<this.g.length;un++){var bn=this.i(un);mn+=(0<=bn?bn:4294967296+bn)*pn,pn*=4294967296}return mn},n.toString=function(mn){if(mn=mn||10,2>mn||36<mn)throw Error("radix out of range: "+mn);if(Ue(this))return"0";if(We(this))return"-"+He(this).toString(mn);for(var pn=De(Math.pow(mn,6)),un=this,bn="";;){var gn=Ze(un,pn).g;un=Ge(un,gn.j(pn));var xn=((0<un.g.length?un.g[0]:un.h)>>>0).toString(mn);if(un=gn,Ue(un))return xn+bn;for(;6>xn.length;)xn="0"+xn;bn=xn+bn}},n.i=function(mn){return 0>mn?0:mn<this.g.length?this.g[mn]:this.h};function Ue(mn){if(mn.h!=0)return!1;for(var pn=0;pn<mn.g.length;pn++)if(mn.g[pn]!=0)return!1;return!0}function We(mn){return mn.h==-1}n.l=function(mn){return mn=Ge(this,mn),We(mn)?-1:Ue(mn)?0:1};function He(mn){for(var pn=mn.g.length,un=[],bn=0;bn<pn;bn++)un[bn]=~mn.g[bn];return new Re(un,~mn.h).add(Ce)}n.abs=function(){return We(this)?He(this):this},n.add=function(mn){for(var pn=Math.max(this.g.length,mn.g.length),un=[],bn=0,gn=0;gn<=pn;gn++){var xn=bn+(this.i(gn)&65535)+(mn.i(gn)&65535),En=(xn>>>16)+(this.i(gn)>>>16)+(mn.i(gn)>>>16);bn=En>>>16,xn&=65535,En&=65535,un[gn]=En<<16|xn}return new Re(un,un[un.length-1]&-2147483648?-1:0)};function Ge(mn,pn){return mn.add(He(pn))}n.j=function(mn){if(Ue(this)||Ue(mn))return Oe;if(We(this))return We(mn)?He(this).j(He(mn)):He(He(this).j(mn));if(We(mn))return He(this.j(He(mn)));if(0>this.l(Be)&&0>mn.l(Be))return De(this.m()*mn.m());for(var pn=this.g.length+mn.g.length,un=[],bn=0;bn<2*pn;bn++)un[bn]=0;for(bn=0;bn<this.g.length;bn++)for(var gn=0;gn<mn.g.length;gn++){var xn=this.i(bn)>>>16,En=this.i(bn)&65535,Pn=mn.i(gn)>>>16,Ln=mn.i(gn)&65535;un[2*bn+2*gn]+=En*Ln,Ye(un,2*bn+2*gn),un[2*bn+2*gn+1]+=xn*Ln,Ye(un,2*bn+2*gn+1),un[2*bn+2*gn+1]+=En*Pn,Ye(un,2*bn+2*gn+1),un[2*bn+2*gn+2]+=xn*Pn,Ye(un,2*bn+2*gn+2)}for(bn=0;bn<pn;bn++)un[bn]=un[2*bn+1]<<16|un[2*bn];for(bn=pn;bn<2*pn;bn++)un[bn]=0;return new Re(un,0)};function Ye(mn,pn){for(;(mn[pn]&65535)!=mn[pn];)mn[pn+1]+=mn[pn]>>>16,mn[pn]&=65535,pn++}function Je(mn,pn){this.g=mn,this.h=pn}function Ze(mn,pn){if(Ue(pn))throw Error("division by zero");if(Ue(mn))return new Je(Oe,Oe);if(We(mn))return pn=Ze(He(mn),pn),new Je(He(pn.g),He(pn.h));if(We(pn))return pn=Ze(mn,He(pn)),new Je(He(pn.g),pn.h);if(30<mn.g.length){if(We(mn)||We(pn))throw Error("slowDivide_ only works with positive integers.");for(var un=Ce,bn=pn;0>=bn.l(mn);)un=fn(un),bn=fn(bn);var gn=yn(un,1),xn=yn(bn,1);for(bn=yn(bn,2),un=yn(un,2);!Ue(bn);){var En=xn.add(bn);0>=En.l(mn)&&(gn=gn.add(un),xn=En),bn=yn(bn,1),un=yn(un,1)}return pn=Ge(mn,gn.j(pn)),new Je(gn,pn)}for(gn=Oe;0<=mn.l(pn);){for(un=Math.max(1,Math.floor(mn.m()/pn.m())),bn=Math.ceil(Math.log(un)/Math.LN2),bn=48>=bn?1:Math.pow(2,bn-48),xn=De(un),En=xn.j(pn);We(En)||0<En.l(mn);)un-=bn,xn=De(un),En=xn.j(pn);Ue(xn)&&(xn=Ce),gn=gn.add(xn),mn=Ge(mn,En)}return new Je(gn,mn)}n.A=function(mn){return Ze(this,mn).h},n.and=function(mn){for(var pn=Math.max(this.g.length,mn.g.length),un=[],bn=0;bn<pn;bn++)un[bn]=this.i(bn)&mn.i(bn);return new Re(un,this.h&mn.h)},n.or=function(mn){for(var pn=Math.max(this.g.length,mn.g.length),un=[],bn=0;bn<pn;bn++)un[bn]=this.i(bn)|mn.i(bn);return new Re(un,this.h|mn.h)},n.xor=function(mn){for(var pn=Math.max(this.g.length,mn.g.length),un=[],bn=0;bn<pn;bn++)un[bn]=this.i(bn)^mn.i(bn);return new Re(un,this.h^mn.h)};function fn(mn){for(var pn=mn.g.length+1,un=[],bn=0;bn<pn;bn++)un[bn]=mn.i(bn)<<1|mn.i(bn-1)>>>31;return new Re(un,mn.h)}function yn(mn,pn){var un=pn>>5;pn%=32;for(var bn=mn.g.length-un,gn=[],xn=0;xn<bn;xn++)gn[xn]=0<pn?mn.i(xn+un)>>>pn|mn.i(xn+un+1)<<32-pn:mn.i(xn+un);return new Re(gn,mn.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Md5=r,Re.prototype.add=Re.prototype.add,Re.prototype.multiply=Re.prototype.j,Re.prototype.modulo=Re.prototype.A,Re.prototype.compare=Re.prototype.l,Re.prototype.toNumber=Re.prototype.m,Re.prototype.toString=Re.prototype.toString,Re.prototype.getBits=Re.prototype.i,Re.fromNumber=De,Re.fromString=$e,Integer=Re}).apply(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{});var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XhrIo,WebChannel,EventType,ErrorCode,Stat,Event$1,getStatEventTarget,createWebChannelTransport;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(Qe,An,Nn){return Qe==Array.prototype||Qe==Object.prototype||(Qe[An]=Nn.value),Qe};function t(Qe){Qe=[typeof globalThis=="object"&&globalThis,Qe,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var An=0;An<Qe.length;++An){var Nn=Qe[An];if(Nn&&Nn.Math==Math)return Nn}throw Error("Cannot find global object")}var r=t(this);function Ee(Qe,An){if(An)e:{var Nn=r;Qe=Qe.split(".");for(var Yn=0;Yn<Qe.length-1;Yn++){var vr=Qe[Yn];if(!(vr in Nn))break e;Nn=Nn[vr]}Qe=Qe[Qe.length-1],Yn=Nn[Qe],An=An(Yn),An!=Yn&&An!=null&&e(Nn,Qe,{configurable:!0,writable:!0,value:An})}}function Te(Qe,An){Qe instanceof String&&(Qe+="");var Nn=0,Yn=!1,vr={next:function(){if(!Yn&&Nn<Qe.length){var Mr=Nn++;return{value:An(Mr,Qe[Mr]),done:!1}}return Yn=!0,{done:!0,value:void 0}}};return vr[Symbol.iterator]=function(){return vr},vr}Ee("Array.prototype.values",function(Qe){return Qe||function(){return Te(this,function(An,Nn){return Nn})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var Re=Re||{},Me=this||self;function Ve(Qe){var An=typeof Qe;return An=An!="object"?An:Qe?Array.isArray(Qe)?"array":An:"null",An=="array"||An=="object"&&typeof Qe.length=="number"}function De(Qe){var An=typeof Qe;return An=="object"&&Qe!=null||An=="function"}function $e(Qe,An,Nn){return Qe.call.apply(Qe.bind,arguments)}function Oe(Qe,An,Nn){if(!Qe)throw Error();if(2<arguments.length){var Yn=Array.prototype.slice.call(arguments,2);return function(){var vr=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(vr,Yn),Qe.apply(An,vr)}}return function(){return Qe.apply(An,arguments)}}function Ce(Qe,An,Nn){return Ce=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?$e:Oe,Ce.apply(null,arguments)}function Be(Qe,An){var Nn=Array.prototype.slice.call(arguments,1);return function(){var Yn=Nn.slice();return Yn.push.apply(Yn,arguments),Qe.apply(this,Yn)}}function Ue(Qe,An){function Nn(){}Nn.prototype=An.prototype,Qe.aa=An.prototype,Qe.prototype=new Nn,Qe.prototype.constructor=Qe,Qe.Qb=function(Yn,vr,Mr){for(var ei=Array(arguments.length-2),As=2;As<arguments.length;As++)ei[As-2]=arguments[As];return An.prototype[vr].apply(Yn,ei)}}function We(Qe){const An=Qe.length;if(0<An){const Nn=Array(An);for(let Yn=0;Yn<An;Yn++)Nn[Yn]=Qe[Yn];return Nn}return[]}function He(Qe,An){for(let Nn=1;Nn<arguments.length;Nn++){const Yn=arguments[Nn];if(Ve(Yn)){const vr=Qe.length||0,Mr=Yn.length||0;Qe.length=vr+Mr;for(let ei=0;ei<Mr;ei++)Qe[vr+ei]=Yn[ei]}else Qe.push(Yn)}}class Ge{constructor(An,Nn){this.i=An,this.j=Nn,this.h=0,this.g=null}get(){let An;return 0<this.h?(this.h--,An=this.g,this.g=An.next,An.next=null):An=this.i(),An}}function Ye(Qe){return/^[\s\xa0]*$/.test(Qe)}function Je(){var Qe=Me.navigator;return Qe&&(Qe=Qe.userAgent)?Qe:""}function Ze(Qe){return Ze[" "](Qe),Qe}Ze[" "]=function(){};var fn=Je().indexOf("Gecko")!=-1&&!(Je().toLowerCase().indexOf("webkit")!=-1&&Je().indexOf("Edge")==-1)&&!(Je().indexOf("Trident")!=-1||Je().indexOf("MSIE")!=-1)&&Je().indexOf("Edge")==-1;function yn(Qe,An,Nn){for(const Yn in Qe)An.call(Nn,Qe[Yn],Yn,Qe)}function mn(Qe,An){for(const Nn in Qe)An.call(void 0,Qe[Nn],Nn,Qe)}function pn(Qe){const An={};for(const Nn in Qe)An[Nn]=Qe[Nn];return An}const un="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bn(Qe,An){let Nn,Yn;for(let vr=1;vr<arguments.length;vr++){Yn=arguments[vr];for(Nn in Yn)Qe[Nn]=Yn[Nn];for(let Mr=0;Mr<un.length;Mr++)Nn=un[Mr],Object.prototype.hasOwnProperty.call(Yn,Nn)&&(Qe[Nn]=Yn[Nn])}}function gn(Qe){var An=1;Qe=Qe.split(":");const Nn=[];for(;0<An&&Qe.length;)Nn.push(Qe.shift()),An--;return Qe.length&&Nn.push(Qe.join(":")),Nn}function xn(Qe){Me.setTimeout(()=>{throw Qe},0)}function En(){var Qe=Wn;let An=null;return Qe.g&&(An=Qe.g,Qe.g=Qe.g.next,Qe.g||(Qe.h=null),An.next=null),An}class Pn{constructor(){this.h=this.g=null}add(An,Nn){const Yn=Ln.get();Yn.set(An,Nn),this.h?this.h.next=Yn:this.g=Yn,this.h=Yn}}var Ln=new Ge(()=>new Cn,Qe=>Qe.reset());class Cn{constructor(){this.next=this.g=this.h=null}set(An,Nn){this.h=An,this.g=Nn,this.next=null}reset(){this.next=this.g=this.h=null}}let Dn,Un=!1,Wn=new Pn,On=()=>{const Qe=Me.Promise.resolve(void 0);Dn=()=>{Qe.then($n)}};var $n=()=>{for(var Qe;Qe=En();){try{Qe.h.call(Qe.g)}catch(Nn){xn(Nn)}var An=Ln;An.j(Qe),100>An.h&&(An.h++,Qe.next=An.g,An.g=Qe)}Un=!1};function kn(){this.s=this.s,this.C=this.C}kn.prototype.s=!1,kn.prototype.ma=function(){this.s||(this.s=!0,this.N())},kn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function In(Qe,An){this.type=Qe,this.g=this.target=An,this.defaultPrevented=!1}In.prototype.h=function(){this.defaultPrevented=!0};var Kn=function(){if(!Me.addEventListener||!Object.defineProperty)return!1;var Qe=!1,An=Object.defineProperty({},"passive",{get:function(){Qe=!0}});try{const Nn=()=>{};Me.addEventListener("test",Nn,An),Me.removeEventListener("test",Nn,An)}catch{}return Qe}();function Qn(Qe,An){if(In.call(this,Qe?Qe.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,Qe){var Nn=this.type=Qe.type,Yn=Qe.changedTouches&&Qe.changedTouches.length?Qe.changedTouches[0]:null;if(this.target=Qe.target||Qe.srcElement,this.g=An,An=Qe.relatedTarget){if(fn){e:{try{Ze(An.nodeName);var vr=!0;break e}catch{}vr=!1}vr||(An=null)}}else Nn=="mouseover"?An=Qe.fromElement:Nn=="mouseout"&&(An=Qe.toElement);this.relatedTarget=An,Yn?(this.clientX=Yn.clientX!==void 0?Yn.clientX:Yn.pageX,this.clientY=Yn.clientY!==void 0?Yn.clientY:Yn.pageY,this.screenX=Yn.screenX||0,this.screenY=Yn.screenY||0):(this.clientX=Qe.clientX!==void 0?Qe.clientX:Qe.pageX,this.clientY=Qe.clientY!==void 0?Qe.clientY:Qe.pageY,this.screenX=Qe.screenX||0,this.screenY=Qe.screenY||0),this.button=Qe.button,this.key=Qe.key||"",this.ctrlKey=Qe.ctrlKey,this.altKey=Qe.altKey,this.shiftKey=Qe.shiftKey,this.metaKey=Qe.metaKey,this.pointerId=Qe.pointerId||0,this.pointerType=typeof Qe.pointerType=="string"?Qe.pointerType:rr[Qe.pointerType]||"",this.state=Qe.state,this.i=Qe,Qe.defaultPrevented&&Qn.aa.h.call(this)}}Ue(Qn,In);var rr={2:"touch",3:"pen",4:"mouse"};Qn.prototype.h=function(){Qn.aa.h.call(this);var Qe=this.i;Qe.preventDefault?Qe.preventDefault():Qe.returnValue=!1};var or="closure_listenable_"+(1e6*Math.random()|0),pr=0;function mr(Qe,An,Nn,Yn,vr){this.listener=Qe,this.proxy=null,this.src=An,this.type=Nn,this.capture=!!Yn,this.ha=vr,this.key=++pr,this.da=this.fa=!1}function Er(Qe){Qe.da=!0,Qe.listener=null,Qe.proxy=null,Qe.src=null,Qe.ha=null}function jr(Qe){this.src=Qe,this.g={},this.h=0}jr.prototype.add=function(Qe,An,Nn,Yn,vr){var Mr=Qe.toString();Qe=this.g[Mr],Qe||(Qe=this.g[Mr]=[],this.h++);var ei=Hr(Qe,An,Yn,vr);return-1<ei?(An=Qe[ei],Nn||(An.fa=!1)):(An=new mr(An,this.src,Mr,!!Yn,vr),An.fa=Nn,Qe.push(An)),An};function Kr(Qe,An){var Nn=An.type;if(Nn in Qe.g){var Yn=Qe.g[Nn],vr=Array.prototype.indexOf.call(Yn,An,void 0),Mr;(Mr=0<=vr)&&Array.prototype.splice.call(Yn,vr,1),Mr&&(Er(An),Qe.g[Nn].length==0&&(delete Qe.g[Nn],Qe.h--))}}function Hr(Qe,An,Nn,Yn){for(var vr=0;vr<Qe.length;++vr){var Mr=Qe[vr];if(!Mr.da&&Mr.listener==An&&Mr.capture==!!Nn&&Mr.ha==Yn)return vr}return-1}var xr="closure_lm_"+(1e6*Math.random()|0),nr={};function Oi(Qe,An,Nn,Yn,vr){if(Array.isArray(An)){for(var Mr=0;Mr<An.length;Mr++)Oi(Qe,An[Mr],Nn,Yn,vr);return null}return Nn=si(Nn),Qe&&Qe[or]?Qe.K(An,Nn,De(Yn)?!!Yn.capture:!1,vr):Ti(Qe,An,Nn,!1,Yn,vr)}function Ti(Qe,An,Nn,Yn,vr,Mr){if(!An)throw Error("Invalid event type");var ei=De(vr)?!!vr.capture:!!vr,As=pi(Qe);if(As||(Qe[xr]=As=new jr(Qe)),Nn=As.add(An,Nn,Yn,ei,Mr),Nn.proxy)return Nn;if(Yn=yi(),Nn.proxy=Yn,Yn.src=Qe,Yn.listener=Nn,Qe.addEventListener)Kn||(vr=ei),vr===void 0&&(vr=!1),Qe.addEventListener(An.toString(),Yn,vr);else if(Qe.attachEvent)Qe.attachEvent(Zr(An.toString()),Yn);else if(Qe.addListener&&Qe.removeListener)Qe.addListener(Yn);else throw Error("addEventListener and attachEvent are unavailable.");return Nn}function yi(){function Qe(Nn){return An.call(Qe.src,Qe.listener,Nn)}const An=mi;return Qe}function qr(Qe,An,Nn,Yn,vr){if(Array.isArray(An))for(var Mr=0;Mr<An.length;Mr++)qr(Qe,An[Mr],Nn,Yn,vr);else Yn=De(Yn)?!!Yn.capture:!!Yn,Nn=si(Nn),Qe&&Qe[or]?(Qe=Qe.i,An=String(An).toString(),An in Qe.g&&(Mr=Qe.g[An],Nn=Hr(Mr,Nn,Yn,vr),-1<Nn&&(Er(Mr[Nn]),Array.prototype.splice.call(Mr,Nn,1),Mr.length==0&&(delete Qe.g[An],Qe.h--)))):Qe&&(Qe=pi(Qe))&&(An=Qe.g[An.toString()],Qe=-1,An&&(Qe=Hr(An,Nn,Yn,vr)),(Nn=-1<Qe?An[Qe]:null)&&di(Nn))}function di(Qe){if(typeof Qe!="number"&&Qe&&!Qe.da){var An=Qe.src;if(An&&An[or])Kr(An.i,Qe);else{var Nn=Qe.type,Yn=Qe.proxy;An.removeEventListener?An.removeEventListener(Nn,Yn,Qe.capture):An.detachEvent?An.detachEvent(Zr(Nn),Yn):An.addListener&&An.removeListener&&An.removeListener(Yn),(Nn=pi(An))?(Kr(Nn,Qe),Nn.h==0&&(Nn.src=null,An[xr]=null)):Er(Qe)}}}function Zr(Qe){return Qe in nr?nr[Qe]:nr[Qe]="on"+Qe}function mi(Qe,An){if(Qe.da)Qe=!0;else{An=new Qn(An,this);var Nn=Qe.listener,Yn=Qe.ha||Qe.src;Qe.fa&&di(Qe),Qe=Nn.call(Yn,An)}return Qe}function pi(Qe){return Qe=Qe[xr],Qe instanceof jr?Qe:null}var Wi="__closure_events_fn_"+(1e9*Math.random()>>>0);function si(Qe){return typeof Qe=="function"?Qe:(Qe[Wi]||(Qe[Wi]=function(An){return Qe.handleEvent(An)}),Qe[Wi])}function _r(){kn.call(this),this.i=new jr(this),this.M=this,this.F=null}Ue(_r,kn),_r.prototype[or]=!0,_r.prototype.removeEventListener=function(Qe,An,Nn,Yn){qr(this,Qe,An,Nn,Yn)};function Dr(Qe,An){var Nn,Yn=Qe.F;if(Yn)for(Nn=[];Yn;Yn=Yn.F)Nn.push(Yn);if(Qe=Qe.M,Yn=An.type||An,typeof An=="string")An=new In(An,Qe);else if(An instanceof In)An.target=An.target||Qe;else{var vr=An;An=new In(Yn,Qe),bn(An,vr)}if(vr=!0,Nn)for(var Mr=Nn.length-1;0<=Mr;Mr--){var ei=An.g=Nn[Mr];vr=Xr(ei,Yn,!0,An)&&vr}if(ei=An.g=Qe,vr=Xr(ei,Yn,!0,An)&&vr,vr=Xr(ei,Yn,!1,An)&&vr,Nn)for(Mr=0;Mr<Nn.length;Mr++)ei=An.g=Nn[Mr],vr=Xr(ei,Yn,!1,An)&&vr}_r.prototype.N=function(){if(_r.aa.N.call(this),this.i){var Qe=this.i,An;for(An in Qe.g){for(var Nn=Qe.g[An],Yn=0;Yn<Nn.length;Yn++)Er(Nn[Yn]);delete Qe.g[An],Qe.h--}}this.F=null},_r.prototype.K=function(Qe,An,Nn,Yn){return this.i.add(String(Qe),An,!1,Nn,Yn)},_r.prototype.L=function(Qe,An,Nn,Yn){return this.i.add(String(Qe),An,!0,Nn,Yn)};function Xr(Qe,An,Nn,Yn){if(An=Qe.i.g[String(An)],!An)return!0;An=An.concat();for(var vr=!0,Mr=0;Mr<An.length;++Mr){var ei=An[Mr];if(ei&&!ei.da&&ei.capture==Nn){var As=ei.listener,eo=ei.ha||ei.src;ei.fa&&Kr(Qe.i,ei),vr=As.call(eo,Yn)!==!1&&vr}}return vr&&!Yn.defaultPrevented}function Gr(Qe,An,Nn){if(typeof Qe=="function")Nn&&(Qe=Ce(Qe,Nn));else if(Qe&&typeof Qe.handleEvent=="function")Qe=Ce(Qe.handleEvent,Qe);else throw Error("Invalid listener argument");return 2147483647<Number(An)?-1:Me.setTimeout(Qe,An||0)}function ii(Qe){Qe.g=Gr(()=>{Qe.g=null,Qe.i&&(Qe.i=!1,ii(Qe))},Qe.l);const An=Qe.h;Qe.h=null,Qe.m.apply(null,An)}class hi extends kn{constructor(An,Nn){super(),this.m=An,this.l=Nn,this.h=null,this.i=!1,this.g=null}j(An){this.h=arguments,this.g?this.i=!0:ii(this)}N(){super.N(),this.g&&(Me.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mi(Qe){kn.call(this),this.h=Qe,this.g={}}Ue(Mi,kn);var ji=[];function Ur(Qe){yn(Qe.g,function(An,Nn){this.g.hasOwnProperty(Nn)&&di(An)},Qe),Qe.g={}}Mi.prototype.N=function(){Mi.aa.N.call(this),Ur(this)},Mi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pi=Me.JSON.stringify,Bi=Me.JSON.parse,vi=class{stringify(Qe){return Me.JSON.stringify(Qe,void 0)}parse(Qe){return Me.JSON.parse(Qe,void 0)}};function Ri(){}Ri.prototype.h=null;function ui(Qe){return Qe.h||(Qe.h=Qe.i())}function vs(){}var ds={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ns(){In.call(this,"d")}Ue(ns,In);function ni(){In.call(this,"c")}Ue(ni,In);var oi={},Di=null;function Ns(){return Di=Di||new _r}oi.La="serverreachability";function mo(Qe){In.call(this,oi.La,Qe)}Ue(mo,In);function Js(Qe){const An=Ns();Dr(An,new mo(An))}oi.STAT_EVENT="statevent";function ki(Qe,An){In.call(this,oi.STAT_EVENT,Qe),this.stat=An}Ue(ki,In);function ms(Qe){const An=Ns();Dr(An,new ki(An,Qe))}oi.Ma="timingevent";function So(Qe,An){In.call(this,oi.Ma,Qe),this.size=An}Ue(So,In);function Ms(Qe,An){if(typeof Qe!="function")throw Error("Fn must not be null and must be a function");return Me.setTimeout(function(){Qe()},An)}function Zs(){this.g=!0}Zs.prototype.xa=function(){this.g=!1};function ws(Qe,An,Nn,Yn,vr,Mr){Qe.info(function(){if(Qe.g)if(Mr)for(var ei="",As=Mr.split("&"),eo=0;eo<As.length;eo++){var us=As[eo].split("=");if(1<us.length){var fs=us[0];us=us[1];var Ss=fs.split("_");ei=2<=Ss.length&&Ss[1]=="type"?ei+(fs+"="+us+"&"):ei+(fs+"=redacted&")}}else ei=null;else ei=Mr;return"XMLHTTP REQ ("+Yn+") [attempt "+vr+"]: "+An+`
`+Nn+`
`+ei})}function Cs(Qe,An,Nn,Yn,vr,Mr,ei){Qe.info(function(){return"XMLHTTP RESP ("+Yn+") [ attempt "+vr+"]: "+An+`
`+Nn+`
`+Mr+" "+ei})}function xs(Qe,An,Nn,Yn){Qe.info(function(){return"XMLHTTP TEXT ("+An+"): "+ta(Qe,Nn)+(Yn?" "+Yn:"")})}function Yo(Qe,An){Qe.info(function(){return"TIMEOUT: "+An})}Zs.prototype.info=function(){};function ta(Qe,An){if(!Qe.g)return An;if(!An)return null;try{var Nn=JSON.parse(An);if(Nn){for(Qe=0;Qe<Nn.length;Qe++)if(Array.isArray(Nn[Qe])){var Yn=Nn[Qe];if(!(2>Yn.length)){var vr=Yn[1];if(Array.isArray(vr)&&!(1>vr.length)){var Mr=vr[0];if(Mr!="noop"&&Mr!="stop"&&Mr!="close")for(var ei=1;ei<vr.length;ei++)vr[ei]=""}}}}return Pi(Nn)}catch{return An}}var oo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Hn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ir;function ur(){}Ue(ur,Ri),ur.prototype.g=function(){return new XMLHttpRequest},ur.prototype.i=function(){return{}},ir=new ur;function gr(Qe,An,Nn,Yn){this.j=Qe,this.i=An,this.l=Nn,this.R=Yn||1,this.U=new Mi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pr}function Pr(){this.i=null,this.g="",this.h=!1}var Cr={},Jr={};function _i(Qe,An,Nn){Qe.L=1,Qe.v=Ta(Io(An)),Qe.m=Nn,Qe.P=!0,fi(Qe,null)}function fi(Qe,An){Qe.F=Date.now(),Hi(Qe),Qe.A=Io(Qe.v);var Nn=Qe.A,Yn=Qe.R;Array.isArray(Yn)||(Yn=[String(Yn)]),Vi(Nn.i,"t",Yn),Qe.C=0,Nn=Qe.j.J,Qe.h=new Pr,Qe.g=nl(Qe.j,Nn?An:null,!Qe.m),0<Qe.O&&(Qe.M=new hi(Ce(Qe.Y,Qe,Qe.g),Qe.O)),An=Qe.U,Nn=Qe.g,Yn=Qe.ca;var vr="readystatechange";Array.isArray(vr)||(vr&&(ji[0]=vr.toString()),vr=ji);for(var Mr=0;Mr<vr.length;Mr++){var ei=Oi(Nn,vr[Mr],Yn||An.handleEvent,!1,An.h||An);if(!ei)break;An.g[ei.key]=ei}An=Qe.H?pn(Qe.H):{},Qe.m?(Qe.u||(Qe.u="POST"),An["Content-Type"]="application/x-www-form-urlencoded",Qe.g.ea(Qe.A,Qe.u,Qe.m,An)):(Qe.u="GET",Qe.g.ea(Qe.A,Qe.u,null,An)),Js(),ws(Qe.i,Qe.u,Qe.A,Qe.l,Qe.R,Qe.m)}gr.prototype.ca=function(Qe){Qe=Qe.target;const An=this.M;An&&os(Qe)==3?An.j():this.Y(Qe)},gr.prototype.Y=function(Qe){try{if(Qe==this.g)e:{const Ss=os(this.g);var An=this.g.Ba();const sa=this.g.Z();if(!(3>Ss)&&(Ss!=3||this.g&&(this.h.h||this.g.oa()||Do(this.g)))){this.J||Ss!=4||An==7||(An==8||0>=sa?Js(3):Js(2)),Or(this);var Nn=this.g.Z();this.X=Nn;t:if(Ui(this)){var Yn=Do(this.g);Qe="";var vr=Yn.length,Mr=os(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){rs(this),Fi(this);var ei="";break t}this.h.i=new Me.TextDecoder}for(An=0;An<vr;An++)this.h.h=!0,Qe+=this.h.i.decode(Yn[An],{stream:!(Mr&&An==vr-1)});Yn.length=0,this.h.g+=Qe,this.C=0,ei=this.h.g}else ei=this.g.oa();if(this.o=Nn==200,Cs(this.i,this.u,this.A,this.l,this.R,Ss,Nn),this.o){if(this.T&&!this.K){t:{if(this.g){var As,eo=this.g;if((As=eo.g?eo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ye(As)){var us=As;break t}}us=null}if(Nn=us)xs(this.i,this.l,Nn,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,go(this,Nn);else{this.o=!1,this.s=3,ms(12),rs(this),Fi(this);break e}}if(this.P){Nn=!0;let Qo;for(;!this.J&&this.C<ei.length;)if(Qo=gs(this,ei),Qo==Jr){Ss==4&&(this.s=4,ms(14),Nn=!1),xs(this.i,this.l,null,"[Incomplete Response]");break}else if(Qo==Cr){this.s=4,ms(15),xs(this.i,this.l,ei,"[Invalid Chunk]"),Nn=!1;break}else xs(this.i,this.l,Qo,null),go(this,Qo);if(Ui(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ss!=4||ei.length!=0||this.h.h||(this.s=1,ms(16),Nn=!1),this.o=this.o&&Nn,!Nn)xs(this.i,this.l,ei,"[Invalid Chunked Response]"),rs(this),Fi(this);else if(0<ei.length&&!this.W){this.W=!0;var fs=this.j;fs.g==this&&fs.ba&&!fs.M&&(fs.j.info("Great, no buffering proxy detected. Bytes received: "+ei.length),ys(fs),fs.M=!0,ms(11))}}else xs(this.i,this.l,ei,null),go(this,ei);Ss==4&&rs(this),this.o&&!this.J&&(Ss==4?Es(this.j,this):(this.o=!1,Hi(this)))}else Ys(this.g),Nn==400&&0<ei.indexOf("Unknown SID")?(this.s=3,ms(12)):(this.s=0,ms(13)),rs(this),Fi(this)}}}catch{}finally{}};function Ui(Qe){return Qe.g?Qe.u=="GET"&&Qe.L!=2&&Qe.j.Ca:!1}function gs(Qe,An){var Nn=Qe.C,Yn=An.indexOf(`
`,Nn);return Yn==-1?Jr:(Nn=Number(An.substring(Nn,Yn)),isNaN(Nn)?Cr:(Yn+=1,Yn+Nn>An.length?Jr:(An=An.slice(Yn,Yn+Nn),Qe.C=Yn+Nn,An)))}gr.prototype.cancel=function(){this.J=!0,rs(this)};function Hi(Qe){Qe.S=Date.now()+Qe.I,Vs(Qe,Qe.I)}function Vs(Qe,An){if(Qe.B!=null)throw Error("WatchDog timer not null");Qe.B=Ms(Ce(Qe.ba,Qe),An)}function Or(Qe){Qe.B&&(Me.clearTimeout(Qe.B),Qe.B=null)}gr.prototype.ba=function(){this.B=null;const Qe=Date.now();0<=Qe-this.S?(Yo(this.i,this.A),this.L!=2&&(Js(),ms(17)),rs(this),this.s=2,Fi(this)):Vs(this,this.S-Qe)};function Fi(Qe){Qe.j.G==0||Qe.J||Es(Qe.j,Qe)}function rs(Qe){Or(Qe);var An=Qe.M;An&&typeof An.ma=="function"&&An.ma(),Qe.M=null,Ur(Qe.U),Qe.g&&(An=Qe.g,Qe.g=null,An.abort(),An.ma())}function go(Qe,An){try{var Nn=Qe.j;if(Nn.G!=0&&(Nn.g==Qe||_s(Nn.h,Qe))){if(!Qe.K&&_s(Nn.h,Qe)&&Nn.G==3){try{var Yn=Nn.Da.g.parse(An)}catch{Yn=null}if(Array.isArray(Yn)&&Yn.length==3){var vr=Yn;if(vr[0]==0){e:if(!Nn.u){if(Nn.g)if(Nn.g.F+3e3<Qe.F)Xs(Nn),er(Nn);else break e;Qi(Nn),ms(18)}}else Nn.za=vr[1],0<Nn.za-Nn.T&&37500>vr[2]&&Nn.F&&Nn.v==0&&!Nn.C&&(Nn.C=Ms(Ce(Nn.Za,Nn),6e3));if(1>=dl(Nn.h)&&Nn.ca){try{Nn.ca()}catch{}Nn.ca=void 0}}else Ls(Nn,11)}else if((Qe.K||Nn.g==Qe)&&Xs(Nn),!Ye(An))for(vr=Nn.Da.g.parse(An),An=0;An<vr.length;An++){let us=vr[An];if(Nn.T=us[0],us=us[1],Nn.G==2)if(us[0]=="c"){Nn.K=us[1],Nn.ia=us[2];const fs=us[3];fs!=null&&(Nn.la=fs,Nn.j.info("VER="+Nn.la));const Ss=us[4];Ss!=null&&(Nn.Aa=Ss,Nn.j.info("SVER="+Nn.Aa));const sa=us[5];sa!=null&&typeof sa=="number"&&0<sa&&(Yn=1.5*sa,Nn.L=Yn,Nn.j.info("backChannelRequestTimeoutMs_="+Yn)),Yn=Nn;const Qo=Qe.g;if(Qo){const Pa=Qo.g?Qo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pa){var Mr=Yn.h;Mr.g||Pa.indexOf("spdy")==-1&&Pa.indexOf("quic")==-1&&Pa.indexOf("h2")==-1||(Mr.j=Mr.l,Mr.g=new Set,Mr.h&&(qa(Mr,Mr.h),Mr.h=null))}if(Yn.D){const rl=Qo.g?Qo.g.getResponseHeader("X-HTTP-Session-Id"):null;rl&&(Yn.ya=rl,ls(Yn.I,Yn.D,rl))}}Nn.G=3,Nn.l&&Nn.l.ua(),Nn.ba&&(Nn.R=Date.now()-Qe.F,Nn.j.info("Handshake RTT: "+Nn.R+"ms")),Yn=Nn;var ei=Qe;if(Yn.qa=Ka(Yn,Yn.J?Yn.ia:null,Yn.W),ei.K){zs(Yn.h,ei);var As=ei,eo=Yn.L;eo&&(As.I=eo),As.B&&(Or(As),Hi(As)),Yn.g=ei}else $i(Yn);0<Nn.i.length&&yr(Nn)}else us[0]!="stop"&&us[0]!="close"||Ls(Nn,7);else Nn.G==3&&(us[0]=="stop"||us[0]=="close"?us[0]=="stop"?Ls(Nn,7):Fn(Nn):us[0]!="noop"&&Nn.l&&Nn.l.ta(us),Nn.v=0)}}Js(4)}catch{}}var Uo=class{constructor(Qe,An){this.g=Qe,this.map=An}};function Ea(Qe){this.l=Qe||10,Me.PerformanceNavigationTiming?(Qe=Me.performance.getEntriesByType("navigation"),Qe=0<Qe.length&&(Qe[0].nextHopProtocol=="hq"||Qe[0].nextHopProtocol=="h2")):Qe=!!(Me.chrome&&Me.chrome.loadTimes&&Me.chrome.loadTimes()&&Me.chrome.loadTimes().wasFetchedViaSpdy),this.j=Qe?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Po(Qe){return Qe.h?!0:Qe.g?Qe.g.size>=Qe.j:!1}function dl(Qe){return Qe.h?1:Qe.g?Qe.g.size:0}function _s(Qe,An){return Qe.h?Qe.h==An:Qe.g?Qe.g.has(An):!1}function qa(Qe,An){Qe.g?Qe.g.add(An):Qe.h=An}function zs(Qe,An){Qe.h&&Qe.h==An?Qe.h=null:Qe.g&&Qe.g.has(An)&&Qe.g.delete(An)}Ea.prototype.cancel=function(){if(this.i=hl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const Qe of this.g.values())Qe.cancel();this.g.clear()}};function hl(Qe){if(Qe.h!=null)return Qe.i.concat(Qe.h.D);if(Qe.g!=null&&Qe.g.size!==0){let An=Qe.i;for(const Nn of Qe.g.values())An=An.concat(Nn.D);return An}return We(Qe.i)}function Wa(Qe){if(Qe.V&&typeof Qe.V=="function")return Qe.V();if(typeof Map<"u"&&Qe instanceof Map||typeof Set<"u"&&Qe instanceof Set)return Array.from(Qe.values());if(typeof Qe=="string")return Qe.split("");if(Ve(Qe)){for(var An=[],Nn=Qe.length,Yn=0;Yn<Nn;Yn++)An.push(Qe[Yn]);return An}An=[],Nn=0;for(Yn in Qe)An[Nn++]=Qe[Yn];return An}function na(Qe){if(Qe.na&&typeof Qe.na=="function")return Qe.na();if(!Qe.V||typeof Qe.V!="function"){if(typeof Map<"u"&&Qe instanceof Map)return Array.from(Qe.keys());if(!(typeof Set<"u"&&Qe instanceof Set)){if(Ve(Qe)||typeof Qe=="string"){var An=[];Qe=Qe.length;for(var Nn=0;Nn<Qe;Nn++)An.push(Nn);return An}An=[],Nn=0;for(const Yn in Qe)An[Nn++]=Yn;return An}}}function ra(Qe,An){if(Qe.forEach&&typeof Qe.forEach=="function")Qe.forEach(An,void 0);else if(Ve(Qe)||typeof Qe=="string")Array.prototype.forEach.call(Qe,An,void 0);else for(var Nn=na(Qe),Yn=Wa(Qe),vr=Yn.length,Mr=0;Mr<vr;Mr++)An.call(void 0,Yn[Mr],Nn&&Nn[Mr],Qe)}var ao=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Va(Qe,An){if(Qe){Qe=Qe.split("&");for(var Nn=0;Nn<Qe.length;Nn++){var Yn=Qe[Nn].indexOf("="),vr=null;if(0<=Yn){var Mr=Qe[Nn].substring(0,Yn);vr=Qe[Nn].substring(Yn+1)}else Mr=Qe[Nn];An(Mr,vr?decodeURIComponent(vr.replace(/\+/g," ")):"")}}}function Ts(Qe){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,Qe instanceof Ts){this.h=Qe.h,Ha(this,Qe.j),this.o=Qe.o,this.g=Qe.g,ja(this,Qe.s),this.l=Qe.l;var An=Qe.i,Nn=new Ro;Nn.i=An.i,An.g&&(Nn.g=new Map(An.g),Nn.h=An.h),ha(this,Nn),this.m=Qe.m}else Qe&&(An=String(Qe).match(ao))?(this.h=!1,Ha(this,An[1]||"",!0),this.o=ss(An[2]||""),this.g=ss(An[3]||"",!0),ja(this,An[4]),this.l=ss(An[5]||"",!0),ha(this,An[6]||"",!0),this.m=ss(An[7]||"")):(this.h=!1,this.i=new Ro(null,this.h))}Ts.prototype.toString=function(){var Qe=[],An=this.j;An&&Qe.push(zo(An,tl,!0),":");var Nn=this.g;return(Nn||An=="file")&&(Qe.push("//"),(An=this.o)&&Qe.push(zo(An,tl,!0),"@"),Qe.push(encodeURIComponent(String(Nn)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Nn=this.s,Nn!=null&&Qe.push(":",String(Nn))),(Nn=this.l)&&(this.g&&Nn.charAt(0)!="/"&&Qe.push("/"),Qe.push(zo(Nn,Nn.charAt(0)=="/"?Xi:Zi,!0))),(Nn=this.i.toString())&&Qe.push("?",Nn),(Nn=this.m)&&Qe.push("#",zo(Nn,ia)),Qe.join("")};function Io(Qe){return new Ts(Qe)}function Ha(Qe,An,Nn){Qe.j=Nn?ss(An,!0):An,Qe.j&&(Qe.j=Qe.j.replace(/:$/,""))}function ja(Qe,An){if(An){if(An=Number(An),isNaN(An)||0>An)throw Error("Bad port number "+An);Qe.s=An}else Qe.s=null}function ha(Qe,An,Nn){An instanceof Ro?(Qe.i=An,fa(Qe.i,Qe.h)):(Nn||(An=zo(An,Ga)),Qe.i=new Ro(An,Qe.h))}function ls(Qe,An,Nn){Qe.i.set(An,Nn)}function Ta(Qe){return ls(Qe,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),Qe}function ss(Qe,An){return Qe?An?decodeURI(Qe.replace(/%25/g,"%2525")):decodeURIComponent(Qe):""}function zo(Qe,An,Nn){return typeof Qe=="string"?(Qe=encodeURI(Qe).replace(An,Yi),Nn&&(Qe=Qe.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),Qe):null}function Yi(Qe){return Qe=Qe.charCodeAt(0),"%"+(Qe>>4&15).toString(16)+(Qe&15).toString(16)}var tl=/[#\/\?@]/g,Zi=/[#\?:]/g,Xi=/[#\?]/g,Ga=/[#\?@]/g,ia=/#/g;function Ro(Qe,An){this.h=this.g=null,this.i=Qe||null,this.j=!!An}function lo(Qe){Qe.g||(Qe.g=new Map,Qe.h=0,Qe.i&&Va(Qe.i,function(An,Nn){Qe.add(decodeURIComponent(An.replace(/\+/g," ")),Nn)}))}n=Ro.prototype,n.add=function(Qe,An){lo(this),this.i=null,Qe=Xo(this,Qe);var Nn=this.g.get(Qe);return Nn||this.g.set(Qe,Nn=[]),Nn.push(An),this.h+=1,this};function ko(Qe,An){lo(Qe),An=Xo(Qe,An),Qe.g.has(An)&&(Qe.i=null,Qe.h-=Qe.g.get(An).length,Qe.g.delete(An))}function qo(Qe,An){return lo(Qe),An=Xo(Qe,An),Qe.g.has(An)}n.forEach=function(Qe,An){lo(this),this.g.forEach(function(Nn,Yn){Nn.forEach(function(vr){Qe.call(An,vr,Yn,this)},this)},this)},n.na=function(){lo(this);const Qe=Array.from(this.g.values()),An=Array.from(this.g.keys()),Nn=[];for(let Yn=0;Yn<An.length;Yn++){const vr=Qe[Yn];for(let Mr=0;Mr<vr.length;Mr++)Nn.push(An[Yn])}return Nn},n.V=function(Qe){lo(this);let An=[];if(typeof Qe=="string")qo(this,Qe)&&(An=An.concat(this.g.get(Xo(this,Qe))));else{Qe=Array.from(this.g.values());for(let Nn=0;Nn<Qe.length;Nn++)An=An.concat(Qe[Nn])}return An},n.set=function(Qe,An){return lo(this),this.i=null,Qe=Xo(this,Qe),qo(this,Qe)&&(this.h-=this.g.get(Qe).length),this.g.set(Qe,[An]),this.h+=1,this},n.get=function(Qe,An){return Qe?(Qe=this.V(Qe),0<Qe.length?String(Qe[0]):An):An};function Vi(Qe,An,Nn){ko(Qe,An),0<Nn.length&&(Qe.i=null,Qe.g.set(Xo(Qe,An),We(Nn)),Qe.h+=Nn.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const Qe=[],An=Array.from(this.g.keys());for(var Nn=0;Nn<An.length;Nn++){var Yn=An[Nn];const Mr=encodeURIComponent(String(Yn)),ei=this.V(Yn);for(Yn=0;Yn<ei.length;Yn++){var vr=Mr;ei[Yn]!==""&&(vr+="="+encodeURIComponent(String(ei[Yn]))),Qe.push(vr)}}return this.i=Qe.join("&")};function Xo(Qe,An){return An=String(An),Qe.j&&(An=An.toLowerCase()),An}function fa(Qe,An){An&&!Qe.j&&(lo(Qe),Qe.i=null,Qe.g.forEach(function(Nn,Yn){var vr=Yn.toLowerCase();Yn!=vr&&(ko(this,Yn),Vi(this,vr,Nn))},Qe)),Qe.j=An}function Vl(Qe,An){const Nn=new Zs;if(Me.Image){const Yn=new Image;Yn.onload=Be(Ks,Nn,"TestLoadImage: loaded",!0,An,Yn),Yn.onerror=Be(Ks,Nn,"TestLoadImage: error",!1,An,Yn),Yn.onabort=Be(Ks,Nn,"TestLoadImage: abort",!1,An,Yn),Yn.ontimeout=Be(Ks,Nn,"TestLoadImage: timeout",!1,An,Yn),Me.setTimeout(function(){Yn.ontimeout&&Yn.ontimeout()},1e4),Yn.src=Qe}else An(!1)}function Tl(Qe,An){const Nn=new Zs,Yn=new AbortController,vr=setTimeout(()=>{Yn.abort(),Ks(Nn,"TestPingServer: timeout",!1,An)},1e4);fetch(Qe,{signal:Yn.signal}).then(Mr=>{clearTimeout(vr),Mr.ok?Ks(Nn,"TestPingServer: ok",!0,An):Ks(Nn,"TestPingServer: server error",!1,An)}).catch(()=>{clearTimeout(vr),Ks(Nn,"TestPingServer: error",!1,An)})}function Ks(Qe,An,Nn,Yn,vr){try{vr&&(vr.onload=null,vr.onerror=null,vr.onabort=null,vr.ontimeout=null),Yn(Nn)}catch{}}function Aa(){this.g=new vi}function Al(Qe,An,Nn){const Yn=Nn||"";try{ra(Qe,function(vr,Mr){let ei=vr;De(vr)&&(ei=Pi(vr)),An.push(Yn+Mr+"="+encodeURIComponent(ei))})}catch(vr){throw An.push(Yn+"type="+encodeURIComponent("_badmap")),vr}}function Mn(Qe){this.l=Qe.Ub||null,this.j=Qe.eb||!1}Ue(Mn,Ri),Mn.prototype.g=function(){return new zn(this.l,this.j)},Mn.prototype.i=function(Qe){return function(){return Qe}}({});function zn(Qe,An){_r.call(this),this.D=Qe,this.o=An,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Ue(zn,_r),n=zn.prototype,n.open=function(Qe,An){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=Qe,this.A=An,this.readyState=1,br(this)},n.send=function(Qe){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const An={headers:this.u,method:this.B,credentials:this.m,cache:void 0};Qe&&(An.body=Qe),(this.D||Me).fetch(new Request(this.A,An)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ar(this)),this.readyState=0},n.Sa=function(Qe){if(this.g&&(this.l=Qe,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=Qe.headers,this.readyState=2,br(this)),this.g&&(this.readyState=3,br(this),this.g)))if(this.responseType==="arraybuffer")Qe.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof Me.ReadableStream<"u"&&"body"in Qe){if(this.j=Qe.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Jn(this)}else Qe.text().then(this.Ra.bind(this),this.ga.bind(this))};function Jn(Qe){Qe.j.read().then(Qe.Pa.bind(Qe)).catch(Qe.ga.bind(Qe))}n.Pa=function(Qe){if(this.g){if(this.o&&Qe.value)this.response.push(Qe.value);else if(!this.o){var An=Qe.value?Qe.value:new Uint8Array(0);(An=this.v.decode(An,{stream:!Qe.done}))&&(this.response=this.responseText+=An)}Qe.done?ar(this):br(this),this.readyState==3&&Jn(this)}},n.Ra=function(Qe){this.g&&(this.response=this.responseText=Qe,ar(this))},n.Qa=function(Qe){this.g&&(this.response=Qe,ar(this))},n.ga=function(){this.g&&ar(this)};function ar(Qe){Qe.readyState=4,Qe.l=null,Qe.j=null,Qe.v=null,br(Qe)}n.setRequestHeader=function(Qe,An){this.u.append(Qe,An)},n.getResponseHeader=function(Qe){return this.h&&this.h.get(Qe.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const Qe=[],An=this.h.entries();for(var Nn=An.next();!Nn.done;)Nn=Nn.value,Qe.push(Nn[0]+": "+Nn[1]),Nn=An.next();return Qe.join(`\r
`)};function br(Qe){Qe.onreadystatechange&&Qe.onreadystatechange.call(Qe)}Object.defineProperty(zn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(Qe){this.m=Qe?"include":"same-origin"}});function kr(Qe){let An="";return yn(Qe,function(Nn,Yn){An+=Yn,An+=":",An+=Nn,An+=`\r
`}),An}function ti(Qe,An,Nn){e:{for(Yn in Nn){var Yn=!1;break e}Yn=!0}Yn||(Nn=kr(Nn),typeof Qe=="string"?Nn!=null&&encodeURIComponent(String(Nn)):ls(Qe,An,Nn))}function li(Qe){_r.call(this),this.headers=new Map,this.o=Qe||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Ue(li,_r);var es=/^https?$/i,Gi=["POST","PUT"];n=li.prototype,n.Ha=function(Qe){this.J=Qe},n.ea=function(Qe,An,Nn,Yn){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+Qe);An=An?An.toUpperCase():"GET",this.D=Qe,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ir.g(),this.v=this.o?ui(this.o):ui(ir),this.g.onreadystatechange=Ce(this.Ea,this);try{this.B=!0,this.g.open(An,String(Qe),!0),this.B=!1}catch(Mr){hs(this,Mr);return}if(Qe=Nn||"",Nn=new Map(this.headers),Yn)if(Object.getPrototypeOf(Yn)===Object.prototype)for(var vr in Yn)Nn.set(vr,Yn[vr]);else if(typeof Yn.keys=="function"&&typeof Yn.get=="function")for(const Mr of Yn.keys())Nn.set(Mr,Yn.get(Mr));else throw Error("Unknown input type for opt_headers: "+String(Yn));Yn=Array.from(Nn.keys()).find(Mr=>Mr.toLowerCase()=="content-type"),vr=Me.FormData&&Qe instanceof Me.FormData,!(0<=Array.prototype.indexOf.call(Gi,An,void 0))||Yn||vr||Nn.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Mr,ei]of Nn)this.g.setRequestHeader(Mr,ei);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ki(this),this.u=!0,this.g.send(Qe),this.u=!1}catch(Mr){hs(this,Mr)}};function hs(Qe,An){Qe.h=!1,Qe.g&&(Qe.j=!0,Qe.g.abort(),Qe.j=!1),Qe.l=An,Qe.m=5,_o(Qe),Rr(Qe)}function _o(Qe){Qe.A||(Qe.A=!0,Dr(Qe,"complete"),Dr(Qe,"error"))}n.abort=function(Qe){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=Qe||7,Dr(this,"complete"),Dr(this,"abort"),Rr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rr(this,!0)),li.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?io(this):this.bb())},n.bb=function(){io(this)};function io(Qe){if(Qe.h&&typeof Re<"u"&&(!Qe.v[1]||os(Qe)!=4||Qe.Z()!=2)){if(Qe.u&&os(Qe)==4)Gr(Qe.Ea,0,Qe);else if(Dr(Qe,"readystatechange"),os(Qe)==4){Qe.h=!1;try{const ei=Qe.Z();e:switch(ei){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var An=!0;break e;default:An=!1}var Nn;if(!(Nn=An)){var Yn;if(Yn=ei===0){var vr=String(Qe.D).match(ao)[1]||null;!vr&&Me.self&&Me.self.location&&(vr=Me.self.location.protocol.slice(0,-1)),Yn=!es.test(vr?vr.toLowerCase():"")}Nn=Yn}if(Nn)Dr(Qe,"complete"),Dr(Qe,"success");else{Qe.m=6;try{var Mr=2<os(Qe)?Qe.g.statusText:""}catch{Mr=""}Qe.l=Mr+" ["+Qe.Z()+"]",_o(Qe)}}finally{Rr(Qe)}}}}function Rr(Qe,An){if(Qe.g){Ki(Qe);const Nn=Qe.g,Yn=Qe.v[0]?()=>{}:null;Qe.g=null,Qe.v=null,An||Dr(Qe,"ready");try{Nn.onreadystatechange=Yn}catch{}}}function Ki(Qe){Qe.I&&(Me.clearTimeout(Qe.I),Qe.I=null)}n.isActive=function(){return!!this.g};function os(Qe){return Qe.g?Qe.g.readyState:0}n.Z=function(){try{return 2<os(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(Qe){if(this.g){var An=this.g.responseText;return Qe&&An.indexOf(Qe)==0&&(An=An.substring(Qe.length)),Bi(An)}};function Do(Qe){try{if(!Qe.g)return null;if("response"in Qe.g)return Qe.g.response;switch(Qe.H){case"":case"text":return Qe.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in Qe.g)return Qe.g.mozResponseArrayBuffer}return null}catch{return null}}function Ys(Qe){const An={};Qe=(Qe.g&&2<=os(Qe)&&Qe.g.getAllResponseHeaders()||"").split(`\r
`);for(let Yn=0;Yn<Qe.length;Yn++){if(Ye(Qe[Yn]))continue;var Nn=gn(Qe[Yn]);const vr=Nn[0];if(Nn=Nn[1],typeof Nn!="string")continue;Nn=Nn.trim();const Mr=An[vr]||[];An[vr]=Mr,Mr.push(Nn)}mn(An,function(Yn){return Yn.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fo(Qe,An,Nn){return Nn&&Nn.internalChannelParams&&Nn.internalChannelParams[Qe]||An}function wn(Qe){this.Aa=0,this.i=[],this.j=new Zs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fo("failFast",!1,Qe),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fo("baseRetryDelayMs",5e3,Qe),this.cb=Fo("retryDelaySeedMs",1e4,Qe),this.Wa=Fo("forwardChannelMaxRetries",2,Qe),this.wa=Fo("forwardChannelRequestTimeoutMs",2e4,Qe),this.pa=Qe&&Qe.xmlHttpFactory||void 0,this.Xa=Qe&&Qe.Tb||void 0,this.Ca=Qe&&Qe.useFetchStreams||!1,this.L=void 0,this.J=Qe&&Qe.supportsCrossDomainXhr||!1,this.K="",this.h=new Ea(Qe&&Qe.concurrentRequestLimit),this.Da=new Aa,this.P=Qe&&Qe.fastHandshake||!1,this.O=Qe&&Qe.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=Qe&&Qe.Rb||!1,Qe&&Qe.xa&&this.j.xa(),Qe&&Qe.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&Qe&&Qe.detectBufferingProxy||!1,this.ja=void 0,Qe&&Qe.longPollingTimeout&&0<Qe.longPollingTimeout&&(this.ja=Qe.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=wn.prototype,n.la=8,n.G=1,n.connect=function(Qe,An,Nn,Yn){ms(0),this.W=Qe,this.H=An||{},Nn&&Yn!==void 0&&(this.H.OSID=Nn,this.H.OAID=Yn),this.F=this.X,this.I=Ka(this,null,this.W),yr(this)};function Fn(Qe){if(lr(Qe),Qe.G==3){var An=Qe.U++,Nn=Io(Qe.I);if(ls(Nn,"SID",Qe.K),ls(Nn,"RID",An),ls(Nn,"TYPE","terminate"),gi(Qe,Nn),An=new gr(Qe,Qe.j,An),An.L=2,An.v=Ta(Io(Nn)),Nn=!1,Me.navigator&&Me.navigator.sendBeacon)try{Nn=Me.navigator.sendBeacon(An.v.toString(),"")}catch{}!Nn&&Me.Image&&(new Image().src=An.v,Nn=!0),Nn||(An.g=nl(An.j,null),An.g.ea(An.v)),An.F=Date.now(),Hi(An)}Co(Qe)}function er(Qe){Qe.g&&(ys(Qe),Qe.g.cancel(),Qe.g=null)}function lr(Qe){er(Qe),Qe.u&&(Me.clearTimeout(Qe.u),Qe.u=null),Xs(Qe),Qe.h.cancel(),Qe.s&&(typeof Qe.s=="number"&&Me.clearTimeout(Qe.s),Qe.s=null)}function yr(Qe){if(!Po(Qe.h)&&!Qe.s){Qe.s=!0;var An=Qe.Ga;Dn||On(),Un||(Dn(),Un=!0),Wn.add(An,Qe),Qe.B=0}}function $r(Qe,An){return dl(Qe.h)>=Qe.h.j-(Qe.s?1:0)?!1:Qe.s?(Qe.i=An.D.concat(Qe.i),!0):Qe.G==1||Qe.G==2||Qe.B>=(Qe.Va?0:Qe.Wa)?!1:(Qe.s=Ms(Ce(Qe.Ga,Qe,An),uo(Qe,Qe.B)),Qe.B++,!0)}n.Ga=function(Qe){if(this.s)if(this.s=null,this.G==1){if(!Qe){this.U=Math.floor(1e5*Math.random()),Qe=this.U++;const vr=new gr(this,this.j,Qe);let Mr=this.o;if(this.S&&(Mr?(Mr=pn(Mr),bn(Mr,this.S)):Mr=this.S),this.m!==null||this.O||(vr.H=Mr,Mr=null),this.P)e:{for(var An=0,Nn=0;Nn<this.i.length;Nn++){t:{var Yn=this.i[Nn];if("__data__"in Yn.map&&(Yn=Yn.map.__data__,typeof Yn=="string")){Yn=Yn.length;break t}Yn=void 0}if(Yn===void 0)break;if(An+=Yn,4096<An){An=Nn;break e}if(An===4096||Nn===this.i.length-1){An=Nn+1;break e}}An=1e3}else An=1e3;An=wi(this,vr,An),Nn=Io(this.I),ls(Nn,"RID",Qe),ls(Nn,"CVER",22),this.D&&ls(Nn,"X-HTTP-Session-Id",this.D),gi(this,Nn),Mr&&(this.O?An="headers="+encodeURIComponent(String(kr(Mr)))+"&"+An:this.m&&ti(Nn,this.m,Mr)),qa(this.h,vr),this.Ua&&ls(Nn,"TYPE","init"),this.P?(ls(Nn,"$req",An),ls(Nn,"SID","null"),vr.T=!0,_i(vr,Nn,null)):_i(vr,Nn,An),this.G=2}}else this.G==3&&(Qe?Wr(this,Qe):this.i.length==0||Po(this.h)||Wr(this))};function Wr(Qe,An){var Nn;An?Nn=An.l:Nn=Qe.U++;const Yn=Io(Qe.I);ls(Yn,"SID",Qe.K),ls(Yn,"RID",Nn),ls(Yn,"AID",Qe.T),gi(Qe,Yn),Qe.m&&Qe.o&&ti(Yn,Qe.m,Qe.o),Nn=new gr(Qe,Qe.j,Nn,Qe.B+1),Qe.m===null&&(Nn.H=Qe.o),An&&(Qe.i=An.D.concat(Qe.i)),An=wi(Qe,Nn,1e3),Nn.I=Math.round(.5*Qe.wa)+Math.round(.5*Qe.wa*Math.random()),qa(Qe.h,Nn),_i(Nn,Yn,An)}function gi(Qe,An){Qe.H&&yn(Qe.H,function(Nn,Yn){ls(An,Yn,Nn)}),Qe.l&&ra({},function(Nn,Yn){ls(An,Yn,Nn)})}function wi(Qe,An,Nn){Nn=Math.min(Qe.i.length,Nn);var Yn=Qe.l?Ce(Qe.l.Na,Qe.l,Qe):null;e:{var vr=Qe.i;let Mr=-1;for(;;){const ei=["count="+Nn];Mr==-1?0<Nn?(Mr=vr[0].g,ei.push("ofs="+Mr)):Mr=0:ei.push("ofs="+Mr);let As=!0;for(let eo=0;eo<Nn;eo++){let us=vr[eo].g;const fs=vr[eo].map;if(us-=Mr,0>us)Mr=Math.max(0,vr[eo].g-100),As=!1;else try{Al(fs,ei,"req"+us+"_")}catch{Yn&&Yn(fs)}}if(As){Yn=ei.join("&");break e}}}return Qe=Qe.i.splice(0,Nn),An.D=Qe,Yn}function $i(Qe){if(!Qe.g&&!Qe.u){Qe.Y=1;var An=Qe.Fa;Dn||On(),Un||(Dn(),Un=!0),Wn.add(An,Qe),Qe.v=0}}function Qi(Qe){return Qe.g||Qe.u||3<=Qe.v?!1:(Qe.Y++,Qe.u=Ms(Ce(Qe.Fa,Qe),uo(Qe,Qe.v)),Qe.v++,!0)}n.Fa=function(){if(this.u=null,qs(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var Qe=2*this.R;this.j.info("BP detection timer enabled: "+Qe),this.A=Ms(Ce(this.ab,this),Qe)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ms(10),er(this),qs(this))};function ys(Qe){Qe.A!=null&&(Me.clearTimeout(Qe.A),Qe.A=null)}function qs(Qe){Qe.g=new gr(Qe,Qe.j,"rpc",Qe.Y),Qe.m===null&&(Qe.g.H=Qe.o),Qe.g.O=0;var An=Io(Qe.qa);ls(An,"RID","rpc"),ls(An,"SID",Qe.K),ls(An,"AID",Qe.T),ls(An,"CI",Qe.F?"0":"1"),!Qe.F&&Qe.ja&&ls(An,"TO",Qe.ja),ls(An,"TYPE","xmlhttp"),gi(Qe,An),Qe.m&&Qe.o&&ti(An,Qe.m,Qe.o),Qe.L&&(Qe.g.I=Qe.L);var Nn=Qe.g;Qe=Qe.ia,Nn.L=1,Nn.v=Ta(Io(An)),Nn.m=null,Nn.P=!0,fi(Nn,Qe)}n.Za=function(){this.C!=null&&(this.C=null,er(this),Qi(this),ms(19))};function Xs(Qe){Qe.C!=null&&(Me.clearTimeout(Qe.C),Qe.C=null)}function Es(Qe,An){var Nn=null;if(Qe.g==An){Xs(Qe),ys(Qe),Qe.g=null;var Yn=2}else if(_s(Qe.h,An))Nn=An.D,zs(Qe.h,An),Yn=1;else return;if(Qe.G!=0){if(An.o)if(Yn==1){Nn=An.m?An.m.length:0,An=Date.now()-An.F;var vr=Qe.B;Yn=Ns(),Dr(Yn,new So(Yn,Nn)),yr(Qe)}else $i(Qe);else if(vr=An.s,vr==3||vr==0&&0<An.X||!(Yn==1&&$r(Qe,An)||Yn==2&&Qi(Qe)))switch(Nn&&0<Nn.length&&(An=Qe.h,An.i=An.i.concat(Nn)),vr){case 1:Ls(Qe,5);break;case 4:Ls(Qe,10);break;case 3:Ls(Qe,6);break;default:Ls(Qe,2)}}}function uo(Qe,An){let Nn=Qe.Ta+Math.floor(Math.random()*Qe.cb);return Qe.isActive()||(Nn*=2),Nn*An}function Ls(Qe,An){if(Qe.j.info("Error code "+An),An==2){var Nn=Ce(Qe.fb,Qe),Yn=Qe.Xa;const vr=!Yn;Yn=new Ts(Yn||"//www.google.com/images/cleardot.gif"),Me.location&&Me.location.protocol=="http"||Ha(Yn,"https"),Ta(Yn),vr?Vl(Yn.toString(),Nn):Tl(Yn.toString(),Nn)}else ms(2);Qe.G=0,Qe.l&&Qe.l.sa(An),Co(Qe),lr(Qe)}n.fb=function(Qe){Qe?(this.j.info("Successfully pinged google.com"),ms(2)):(this.j.info("Failed to ping google.com"),ms(1))};function Co(Qe){if(Qe.G=0,Qe.ka=[],Qe.l){const An=hl(Qe.h);(An.length!=0||Qe.i.length!=0)&&(He(Qe.ka,An),He(Qe.ka,Qe.i),Qe.h.i.length=0,We(Qe.i),Qe.i.length=0),Qe.l.ra()}}function Ka(Qe,An,Nn){var Yn=Nn instanceof Ts?Io(Nn):new Ts(Nn);if(Yn.g!="")An&&(Yn.g=An+"."+Yn.g),ja(Yn,Yn.s);else{var vr=Me.location;Yn=vr.protocol,An=An?An+"."+vr.hostname:vr.hostname,vr=+vr.port;var Mr=new Ts(null);Yn&&Ha(Mr,Yn),An&&(Mr.g=An),vr&&ja(Mr,vr),Nn&&(Mr.l=Nn),Yn=Mr}return Nn=Qe.D,An=Qe.ya,Nn&&An&&ls(Yn,Nn,An),ls(Yn,"VER",Qe.la),gi(Qe,Yn),Yn}function nl(Qe,An,Nn){if(An&&!Qe.J)throw Error("Can't create secondary domain capable XhrIo object.");return An=Qe.Ca&&!Qe.pa?new li(new Mn({eb:Nn})):new li(Qe.pa),An.Ha(Qe.J),An}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xl(){}n=Xl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Sl(){}Sl.prototype.g=function(Qe,An){return new yo(Qe,An)};function yo(Qe,An){_r.call(this),this.g=new wn(An),this.l=Qe,this.h=An&&An.messageUrlParams||null,Qe=An&&An.messageHeaders||null,An&&An.clientProtocolHeaderRequired&&(Qe?Qe["X-Client-Protocol"]="webchannel":Qe={"X-Client-Protocol":"webchannel"}),this.g.o=Qe,Qe=An&&An.initMessageHeaders||null,An&&An.messageContentType&&(Qe?Qe["X-WebChannel-Content-Type"]=An.messageContentType:Qe={"X-WebChannel-Content-Type":An.messageContentType}),An&&An.va&&(Qe?Qe["X-WebChannel-Client-Profile"]=An.va:Qe={"X-WebChannel-Client-Profile":An.va}),this.g.S=Qe,(Qe=An&&An.Sb)&&!Ye(Qe)&&(this.g.m=Qe),this.v=An&&An.supportsCrossDomainXhr||!1,this.u=An&&An.sendRawJson||!1,(An=An&&An.httpSessionIdParam)&&!Ye(An)&&(this.g.D=An,Qe=this.h,Qe!==null&&An in Qe&&(Qe=this.h,An in Qe&&delete Qe[An])),this.j=new pa(this)}Ue(yo,_r),yo.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yo.prototype.close=function(){Fn(this.g)},yo.prototype.o=function(Qe){var An=this.g;if(typeof Qe=="string"){var Nn={};Nn.__data__=Qe,Qe=Nn}else this.u&&(Nn={},Nn.__data__=Pi(Qe),Qe=Nn);An.i.push(new Uo(An.Ya++,Qe)),An.G==3&&yr(An)},yo.prototype.N=function(){this.g.l=null,delete this.j,Fn(this.g),delete this.g,yo.aa.N.call(this)};function Sa(Qe){ns.call(this),Qe.__headers__&&(this.headers=Qe.__headers__,this.statusCode=Qe.__status__,delete Qe.__headers__,delete Qe.__status__);var An=Qe.__sm__;if(An){e:{for(const Nn in An){Qe=Nn;break e}Qe=void 0}(this.i=Qe)&&(Qe=this.i,An=An!==null&&Qe in An?An[Qe]:void 0),this.data=An}else this.data=Qe}Ue(Sa,ns);function jl(){ni.call(this),this.status=1}Ue(jl,ni);function pa(Qe){this.g=Qe}Ue(pa,Xl),pa.prototype.ua=function(){Dr(this.g,"a")},pa.prototype.ta=function(Qe){Dr(this.g,new Sa(Qe))},pa.prototype.sa=function(Qe){Dr(this.g,new jl)},pa.prototype.ra=function(){Dr(this.g,"b")},Sl.prototype.createWebChannel=Sl.prototype.g,yo.prototype.send=yo.prototype.o,yo.prototype.open=yo.prototype.m,yo.prototype.close=yo.prototype.close,createWebChannelTransport=function(){return new Sl},getStatEventTarget=function(){return Ns()},Event$1=oi,Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},oo.NO_ERROR=0,oo.TIMEOUT=8,oo.HTTP_ERROR=6,ErrorCode=oo,Hn.COMPLETE="complete",EventType=Hn,vs.EventType=ds,ds.OPEN="a",ds.CLOSE="b",ds.ERROR="c",ds.MESSAGE="d",_r.prototype.listen=_r.prototype.K,WebChannel=vs,li.prototype.listenOnce=li.prototype.L,li.prototype.getLastError=li.prototype.Ka,li.prototype.getLastErrorCode=li.prototype.Ba,li.prototype.getStatus=li.prototype.Z,li.prototype.getResponseJson=li.prototype.Oa,li.prototype.getResponseText=li.prototype.oa,li.prototype.send=li.prototype.ea,li.prototype.setWithCredentials=li.prototype.Ha,XhrIo=li}).apply(typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{});const F$1="@firebase/firestore",M$1="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let User$1=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};User$1.UNAUTHENTICATED=new User$1(null),User$1.GOOGLE_CREDENTIALS=new User$1("google-credentials-uid"),User$1.FIRST_PARTY=new User$1("first-party-uid"),User$1.MOCK_USER=new User$1("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x$2="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O$1=new Logger("@firebase/firestore");function __PRIVATE_getLogLevel(){return O$1.logLevel}function __PRIVATE_logDebug(n,...e){if(O$1.logLevel<=LogLevel.DEBUG){const t=e.map(__PRIVATE_argToString);O$1.debug(`Firestore (${x$2}): ${n}`,...t)}}function __PRIVATE_logError(n,...e){if(O$1.logLevel<=LogLevel.ERROR){const t=e.map(__PRIVATE_argToString);O$1.error(`Firestore (${x$2}): ${n}`,...t)}}function __PRIVATE_logWarn(n,...e){if(O$1.logLevel<=LogLevel.WARN){const t=e.map(__PRIVATE_argToString);O$1.warn(`Firestore (${x$2}): ${n}`,...t)}}function __PRIVATE_argToString(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fail(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,__PRIVATE__fail(n,r,t)}function __PRIVATE__fail(n,e,t){let r=`FIRESTORE (${x$2}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw __PRIVATE_logError(r),new Error(r)}function __PRIVATE_hardAssert(n,e,t,r){let Ee="Unexpected state";typeof t=="string"?Ee=t:r=t,n||__PRIVATE__fail(e,Ee,r)}function __PRIVATE_debugCast(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$1={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class FirestoreError extends FirebaseError{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Deferred{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_OAuthToken{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class __PRIVATE_EmptyAuthCredentialsProvider{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(User$1.UNAUTHENTICATED))}shutdown(){}}class __PRIVATE_EmulatorAuthCredentialsProvider{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class __PRIVATE_FirebaseAuthCredentialsProvider{constructor(e){this.t=e,this.currentUser=User$1.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){__PRIVATE_hardAssert(this.o===void 0,42304);let r=this.i;const Ee=Ve=>this.i!==r?(r=this.i,t(Ve)):Promise.resolve();let Te=new __PRIVATE_Deferred;this.o=()=>{this.i++,this.currentUser=this.u(),Te.resolve(),Te=new __PRIVATE_Deferred,e.enqueueRetryable(()=>Ee(this.currentUser))};const Re=()=>{const Ve=Te;e.enqueueRetryable(async()=>{await Ve.promise,await Ee(this.currentUser)})},Me=Ve=>{__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=Ve,this.o&&(this.auth.addAuthTokenListener(this.o),Re())};this.t.onInit(Ve=>Me(Ve)),setTimeout(()=>{if(!this.auth){const Ve=this.t.getImmediate({optional:!0});Ve?Me(Ve):(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth not yet detected"),Te.resolve(),Te=new __PRIVATE_Deferred)}},0),Re()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(__PRIVATE_hardAssert(typeof r.accessToken=="string",31837,{l:r}),new __PRIVATE_OAuthToken(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return __PRIVATE_hardAssert(e===null||typeof e=="string",2055,{h:e}),new User$1(e)}}class __PRIVATE_FirstPartyToken{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=User$1.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class __PRIVATE_FirstPartyAuthCredentialsProvider{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new __PRIVATE_FirstPartyToken(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(User$1.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AppCheckToken{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class __PRIVATE_FirebaseAppCheckTokenProvider{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_isFirebaseServerApp(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){__PRIVATE_hardAssert(this.o===void 0,3512);const r=Te=>{Te.error!=null&&__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${Te.error.message}`);const Re=Te.token!==this.m;return this.m=Te.token,__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Received ${Re?"new":"existing"} token.`),Re?t(Te.token):Promise.resolve()};this.o=Te=>{e.enqueueRetryable(()=>r(Te))};const Ee=Te=>{__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=Te,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(Te=>Ee(Te)),setTimeout(()=>{if(!this.appCheck){const Te=this.V.getImmediate({optional:!0});Te?Ee(Te):__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new AppCheckToken(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(__PRIVATE_hardAssert(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new AppCheckToken(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_randomBytes(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newTextEncoder(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AutoId{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const Ee=__PRIVATE_randomBytes(40);for(let Te=0;Te<Ee.length;++Te)r.length<20&&Ee[Te]<t&&(r+=e.charAt(Ee[Te]%62))}return r}}function __PRIVATE_primitiveComparator(n,e){return n<e?-1:n>e?1:0}function __PRIVATE_compareUtf8Strings(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),Ee=e.codePointAt(t);if(r!==Ee){if(r<128&&Ee<128)return __PRIVATE_primitiveComparator(r,Ee);{const Te=__PRIVATE_newTextEncoder(),Re=__PRIVATE_compareByteArrays$1(Te.encode(__PRIVATE_getUtf8SafeSubstring(n,t)),Te.encode(__PRIVATE_getUtf8SafeSubstring(e,t)));return Re!==0?Re:__PRIVATE_primitiveComparator(r,Ee)}}t+=r>65535?2:1}return __PRIVATE_primitiveComparator(n.length,e.length)}function __PRIVATE_getUtf8SafeSubstring(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function __PRIVATE_compareByteArrays$1(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return __PRIVATE_primitiveComparator(n[t],e[t]);return __PRIVATE_primitiveComparator(n.length,e.length)}function __PRIVATE_arrayEquals(n,e,t){return n.length===e.length&&n.every((r,Ee)=>t(r,e[Ee]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B$1="__name__";class BasePath{constructor(e,t,r){t===void 0?t=0:t>e.length&&fail(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&fail(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return BasePath.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof BasePath?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let Ee=0;Ee<r;Ee++){const Te=BasePath.compareSegments(e.get(Ee),t.get(Ee));if(Te!==0)return Te}return __PRIVATE_primitiveComparator(e.length,t.length)}static compareSegments(e,t){const r=BasePath.isNumericId(e),Ee=BasePath.isNumericId(t);return r&&!Ee?-1:!r&&Ee?1:r&&Ee?BasePath.extractNumericId(e).compare(BasePath.extractNumericId(t)):__PRIVATE_compareUtf8Strings(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Integer.fromString(e.substring(4,e.length-2))}}class ResourcePath extends BasePath{construct(e,t,r){return new ResourcePath(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(Ee=>Ee.length>0))}return new ResourcePath(t)}static emptyPath(){return new ResourcePath([])}}const L$1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class FieldPath$1 extends BasePath{construct(e,t,r){return new FieldPath$1(e,t,r)}static isValidIdentifier(e){return L$1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),FieldPath$1.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===B$1}static keyField(){return new FieldPath$1([B$1])}static fromServerFormat(e){const t=[];let r="",Ee=0;const Te=()=>{if(r.length===0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let Re=!1;for(;Ee<e.length;){const Me=e[Ee];if(Me==="\\"){if(Ee+1===e.length)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const Ve=e[Ee+1];if(Ve!=="\\"&&Ve!=="."&&Ve!=="`")throw new FirestoreError(N$1.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=Ve,Ee+=2}else Me==="`"?(Re=!Re,Ee++):Me!=="."||Re?(r+=Me,Ee++):(Te(),Ee++)}if(Te(),Re)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new FieldPath$1(t)}static emptyPath(){return new FieldPath$1([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentKey{constructor(e){this.path=e}static fromPath(e){return new DocumentKey(ResourcePath.fromString(e))}static fromName(e){return new DocumentKey(ResourcePath.fromString(e).popFirst(5))}static empty(){return new DocumentKey(ResourcePath.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ResourcePath.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ResourcePath.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new DocumentKey(new ResourcePath(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateNonEmptyArgument(n,e,t){if(!t)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function __PRIVATE_validateIsNotUsedTogether(n,e,t,r){if(e===!0&&r===!0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function __PRIVATE_validateDocumentPath(n){if(!DocumentKey.isDocumentKey(n))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function __PRIVATE_validateCollectionPath(n){if(DocumentKey.isDocumentKey(n))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function __PRIVATE_isPlainObject(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function __PRIVATE_valueDescription(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":fail(12329,{type:typeof n})}function __PRIVATE_cast(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=__PRIVATE_valueDescription(n);throw new FirestoreError(N$1.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function property(n,e){const t={typeString:n};return e&&(t.value=e),t}function __PRIVATE_validateJSON(n,e){if(!__PRIVATE_isPlainObject(n))throw new FirestoreError(N$1.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const Ee=e[r].typeString,Te="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const Re=n[r];if(Ee&&typeof Re!==Ee){t=`JSON field '${r}' must be a ${Ee}.`;break}if(Te!==void 0&&Re!==Te.value){t=`Expected '${r}' field to equal '${Te.value}'`;break}}if(t)throw new FirestoreError(N$1.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k$1=-62135596800,q$1=1e6;class Timestamp{static now(){return Timestamp.fromMillis(Date.now())}static fromDate(e){return Timestamp.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*q$1);return new Timestamp(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<k$1)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/q$1}_compareTo(e){return this.seconds===e.seconds?__PRIVATE_primitiveComparator(this.nanoseconds,e.nanoseconds):__PRIVATE_primitiveComparator(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Timestamp._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(__PRIVATE_validateJSON(e,Timestamp._jsonSchema))return new Timestamp(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-k$1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Timestamp._jsonSchemaVersion="firestore/timestamp/1.0",Timestamp._jsonSchema={type:property("string",Timestamp._jsonSchemaVersion),seconds:property("number"),nanoseconds:property("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotVersion{static fromTimestamp(e){return new SnapshotVersion(e)}static min(){return new SnapshotVersion(new Timestamp(0,0))}static max(){return new SnapshotVersion(new Timestamp(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q$1=-1;function __PRIVATE_newIndexOffsetSuccessorFromReadTime(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,Ee=SnapshotVersion.fromTimestamp(r===1e9?new Timestamp(t+1,0):new Timestamp(t,r));return new IndexOffset(Ee,DocumentKey.empty(),e)}function __PRIVATE_newIndexOffsetFromDocument(n){return new IndexOffset(n.readTime,n.key,Q$1)}class IndexOffset{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new IndexOffset(SnapshotVersion.min(),DocumentKey.empty(),Q$1)}static max(){return new IndexOffset(SnapshotVersion.max(),DocumentKey.empty(),Q$1)}}function __PRIVATE_indexOffsetComparator(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=DocumentKey.comparator(n.documentKey,e.documentKey),t!==0?t:__PRIVATE_primitiveComparator(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $$1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PersistenceTransaction{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __PRIVATE_ignoreIfPrimaryLeaseLoss(n){if(n.code!==N$1.FAILED_PRECONDITION||n.message!==$$1)throw n;__PRIVATE_logDebug("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PersistencePromise{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&fail(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new PersistencePromise((r,Ee)=>{this.nextCallback=Te=>{this.wrapSuccess(e,Te).next(r,Ee)},this.catchCallback=Te=>{this.wrapFailure(t,Te).next(r,Ee)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof PersistencePromise?t:PersistencePromise.resolve(t)}catch(t){return PersistencePromise.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):PersistencePromise.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):PersistencePromise.reject(t)}static resolve(e){return new PersistencePromise((t,r)=>{t(e)})}static reject(e){return new PersistencePromise((t,r)=>{r(e)})}static waitFor(e){return new PersistencePromise((t,r)=>{let Ee=0,Te=0,Re=!1;e.forEach(Me=>{++Ee,Me.next(()=>{++Te,Re&&Te===Ee&&t()},Ve=>r(Ve))}),Re=!0,Te===Ee&&t()})}static or(e){let t=PersistencePromise.resolve(!1);for(const r of e)t=t.next(Ee=>Ee?PersistencePromise.resolve(Ee):r());return t}static forEach(e,t){const r=[];return e.forEach((Ee,Te)=>{r.push(t.call(this,Ee,Te))}),this.waitFor(r)}static mapArray(e,t){return new PersistencePromise((r,Ee)=>{const Te=e.length,Re=new Array(Te);let Me=0;for(let Ve=0;Ve<Te;Ve++){const De=Ve;t(e[De]).next($e=>{Re[De]=$e,++Me,Me===Te&&r(Re)},$e=>Ee($e))}})}static doWhile(e,t){return new PersistencePromise((r,Ee)=>{const Te=()=>{e()===!0?t().next(()=>{Te()},Ee):r()};Te()})}}function __PRIVATE_getAndroidVersion(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function __PRIVATE_isIndexedDbTransactionError(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ListenSequence{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}__PRIVATE_ListenSequence.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G$1=-1;function __PRIVATE_isNullOrUndefined(n){return n==null}function __PRIVATE_isNegativeZero(n){return n===0&&1/n==-1/0}function isSafeInteger(n){return typeof n=="number"&&Number.isInteger(n)&&!__PRIVATE_isNegativeZero(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z$1="";function __PRIVATE_encodeResourcePath(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=__PRIVATE_encodeSeparator(e)),e=__PRIVATE_encodeSegment(n.get(t),e);return __PRIVATE_encodeSeparator(e)}function __PRIVATE_encodeSegment(n,e){let t=e;const r=n.length;for(let Ee=0;Ee<r;Ee++){const Te=n.charAt(Ee);switch(Te){case"\0":t+="";break;case z$1:t+="";break;default:t+=Te}}return t}function __PRIVATE_encodeSeparator(n){return n+z$1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_objectSize(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function forEach$1(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function isEmpty$1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedMap{constructor(e,t){this.comparator=e,this.root=t||LLRBNode.EMPTY}insert(e,t){return new SortedMap(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}remove(e){return new SortedMap(this.comparator,this.root.remove(e,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const Ee=this.comparator(e,r.key);if(Ee===0)return t+r.left.size;Ee<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new SortedMapIterator(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!1)}getReverseIterator(){return new SortedMapIterator(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!0)}}class SortedMapIterator{constructor(e,t,r,Ee){this.isReverse=Ee,this.nodeStack=[];let Te=1;for(;!e.isEmpty();)if(Te=t?r(e.key,t):1,t&&Ee&&(Te*=-1),Te<0)e=this.isReverse?e.left:e.right;else{if(Te===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class LLRBNode{constructor(e,t,r,Ee,Te){this.key=e,this.value=t,this.color=r??LLRBNode.RED,this.left=Ee??LLRBNode.EMPTY,this.right=Te??LLRBNode.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,Ee,Te){return new LLRBNode(e??this.key,t??this.value,r??this.color,Ee??this.left,Te??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let Ee=this;const Te=r(e,Ee.key);return Ee=Te<0?Ee.copy(null,null,null,Ee.left.insert(e,t,r),null):Te===0?Ee.copy(null,t,null,null,null):Ee.copy(null,null,null,null,Ee.right.insert(e,t,r)),Ee.fixUp()}removeMin(){if(this.left.isEmpty())return LLRBNode.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,Ee=this;if(t(e,Ee.key)<0)Ee.left.isEmpty()||Ee.left.isRed()||Ee.left.left.isRed()||(Ee=Ee.moveRedLeft()),Ee=Ee.copy(null,null,null,Ee.left.remove(e,t),null);else{if(Ee.left.isRed()&&(Ee=Ee.rotateRight()),Ee.right.isEmpty()||Ee.right.isRed()||Ee.right.left.isRed()||(Ee=Ee.moveRedRight()),t(e,Ee.key)===0){if(Ee.right.isEmpty())return LLRBNode.EMPTY;r=Ee.right.min(),Ee=Ee.copy(r.key,r.value,null,null,Ee.right.removeMin())}Ee=Ee.copy(null,null,null,null,Ee.right.remove(e,t))}return Ee.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fail(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fail(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fail(27949);return e+(this.isRed()?0:1)}}LLRBNode.EMPTY=null,LLRBNode.RED=!0,LLRBNode.BLACK=!1;LLRBNode.EMPTY=new class{constructor(){this.size=0}get key(){throw fail(57766)}get value(){throw fail(16141)}get color(){throw fail(16727)}get left(){throw fail(29726)}get right(){throw fail(36894)}copy(e,t,r,Ee,Te){return this}insert(e,t,r){return new LLRBNode(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedSet{constructor(e){this.comparator=e,this.data=new SortedMap(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const Ee=r.getNext();if(this.comparator(Ee.key,e[1])>=0)return;t(Ee.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new SortedSetIterator(this.data.getIterator())}getIteratorFrom(e){return new SortedSetIterator(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof SortedSet)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const Ee=t.getNext().key,Te=r.getNext().key;if(this.comparator(Ee,Te)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new SortedSet(this.comparator);return t.data=e,t}}class SortedSetIterator{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldMask{constructor(e){this.fields=e,e.sort(FieldPath$1.comparator)}static empty(){return new FieldMask([])}unionWith(e){let t=new SortedSet(FieldPath$1.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new FieldMask(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return __PRIVATE_arrayEquals(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Base64DecodeError extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ByteString{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(Ee){try{return atob(Ee)}catch(Te){throw typeof DOMException<"u"&&Te instanceof DOMException?new __PRIVATE_Base64DecodeError("Invalid base64 string: "+Te):Te}}(e);return new ByteString(t)}static fromUint8Array(e){const t=function(Ee){let Te="";for(let Re=0;Re<Ee.length;++Re)Te+=String.fromCharCode(Ee[Re]);return Te}(e);return new ByteString(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let Ee=0;Ee<t.length;Ee++)r[Ee]=t.charCodeAt(Ee);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return __PRIVATE_primitiveComparator(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ByteString.EMPTY_BYTE_STRING=new ByteString("");const it$1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __PRIVATE_normalizeTimestamp(n){if(__PRIVATE_hardAssert(!!n,39018),typeof n=="string"){let e=0;const t=it$1.exec(n);if(__PRIVATE_hardAssert(!!t,46558,{timestamp:n}),t[1]){let Ee=t[1];Ee=(Ee+"000000000").substr(0,9),e=Number(Ee)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:__PRIVATE_normalizeNumber(n.seconds),nanos:__PRIVATE_normalizeNumber(n.nanos)}}function __PRIVATE_normalizeNumber(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function __PRIVATE_normalizeByteString(n){return typeof n=="string"?ByteString.fromBase64String(n):ByteString.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st$1="server_timestamp",ot$1="__type__",_t$1="__previous_value__",at$1="__local_write_time__";function __PRIVATE_isServerTimestamp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[ot$1])===null||t===void 0?void 0:t.stringValue)===st$1}function __PRIVATE_getPreviousValue(n){const e=n.mapValue.fields[_t$1];return __PRIVATE_isServerTimestamp(e)?__PRIVATE_getPreviousValue(e):e}function __PRIVATE_getLocalWriteTime(n){const e=__PRIVATE_normalizeTimestamp(n.mapValue.fields[at$1].timestampValue);return new Timestamp(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DatabaseInfo{constructor(e,t,r,Ee,Te,Re,Me,Ve,De,$e){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=Ee,this.ssl=Te,this.forceLongPolling=Re,this.autoDetectLongPolling=Me,this.longPollingOptions=Ve,this.useFetchStreams=De,this.isUsingEmulator=$e}}const ut$1="(default)";class DatabaseId{constructor(e,t){this.projectId=e,this.database=t||ut$1}static empty(){return new DatabaseId("","")}get isDefaultDatabase(){return this.database===ut$1}isEqual(e){return e instanceof DatabaseId&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct$1="__type__",lt$1="__max__",ht$1={mapValue:{}},Pt$1="__vector__",Tt$1="value";function __PRIVATE_typeOrder(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?__PRIVATE_isServerTimestamp(n)?4:__PRIVATE_isMaxValue(n)?9007199254740991:__PRIVATE_isVectorValue(n)?10:11:fail(28295,{value:n})}function __PRIVATE_valueEquals(n,e){if(n===e)return!0;const t=__PRIVATE_typeOrder(n);if(t!==__PRIVATE_typeOrder(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return __PRIVATE_getLocalWriteTime(n).isEqual(__PRIVATE_getLocalWriteTime(e));case 3:return function(Ee,Te){if(typeof Ee.timestampValue=="string"&&typeof Te.timestampValue=="string"&&Ee.timestampValue.length===Te.timestampValue.length)return Ee.timestampValue===Te.timestampValue;const Re=__PRIVATE_normalizeTimestamp(Ee.timestampValue),Me=__PRIVATE_normalizeTimestamp(Te.timestampValue);return Re.seconds===Me.seconds&&Re.nanos===Me.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(Ee,Te){return __PRIVATE_normalizeByteString(Ee.bytesValue).isEqual(__PRIVATE_normalizeByteString(Te.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(Ee,Te){return __PRIVATE_normalizeNumber(Ee.geoPointValue.latitude)===__PRIVATE_normalizeNumber(Te.geoPointValue.latitude)&&__PRIVATE_normalizeNumber(Ee.geoPointValue.longitude)===__PRIVATE_normalizeNumber(Te.geoPointValue.longitude)}(n,e);case 2:return function(Ee,Te){if("integerValue"in Ee&&"integerValue"in Te)return __PRIVATE_normalizeNumber(Ee.integerValue)===__PRIVATE_normalizeNumber(Te.integerValue);if("doubleValue"in Ee&&"doubleValue"in Te){const Re=__PRIVATE_normalizeNumber(Ee.doubleValue),Me=__PRIVATE_normalizeNumber(Te.doubleValue);return Re===Me?__PRIVATE_isNegativeZero(Re)===__PRIVATE_isNegativeZero(Me):isNaN(Re)&&isNaN(Me)}return!1}(n,e);case 9:return __PRIVATE_arrayEquals(n.arrayValue.values||[],e.arrayValue.values||[],__PRIVATE_valueEquals);case 10:case 11:return function(Ee,Te){const Re=Ee.mapValue.fields||{},Me=Te.mapValue.fields||{};if(__PRIVATE_objectSize(Re)!==__PRIVATE_objectSize(Me))return!1;for(const Ve in Re)if(Re.hasOwnProperty(Ve)&&(Me[Ve]===void 0||!__PRIVATE_valueEquals(Re[Ve],Me[Ve])))return!1;return!0}(n,e);default:return fail(52216,{left:n})}}function __PRIVATE_arrayValueContains(n,e){return(n.values||[]).find(t=>__PRIVATE_valueEquals(t,e))!==void 0}function __PRIVATE_valueCompare(n,e){if(n===e)return 0;const t=__PRIVATE_typeOrder(n),r=__PRIVATE_typeOrder(e);if(t!==r)return __PRIVATE_primitiveComparator(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return __PRIVATE_primitiveComparator(n.booleanValue,e.booleanValue);case 2:return function(Te,Re){const Me=__PRIVATE_normalizeNumber(Te.integerValue||Te.doubleValue),Ve=__PRIVATE_normalizeNumber(Re.integerValue||Re.doubleValue);return Me<Ve?-1:Me>Ve?1:Me===Ve?0:isNaN(Me)?isNaN(Ve)?0:-1:1}(n,e);case 3:return __PRIVATE_compareTimestamps(n.timestampValue,e.timestampValue);case 4:return __PRIVATE_compareTimestamps(__PRIVATE_getLocalWriteTime(n),__PRIVATE_getLocalWriteTime(e));case 5:return __PRIVATE_compareUtf8Strings(n.stringValue,e.stringValue);case 6:return function(Te,Re){const Me=__PRIVATE_normalizeByteString(Te),Ve=__PRIVATE_normalizeByteString(Re);return Me.compareTo(Ve)}(n.bytesValue,e.bytesValue);case 7:return function(Te,Re){const Me=Te.split("/"),Ve=Re.split("/");for(let De=0;De<Me.length&&De<Ve.length;De++){const $e=__PRIVATE_primitiveComparator(Me[De],Ve[De]);if($e!==0)return $e}return __PRIVATE_primitiveComparator(Me.length,Ve.length)}(n.referenceValue,e.referenceValue);case 8:return function(Te,Re){const Me=__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(Te.latitude),__PRIVATE_normalizeNumber(Re.latitude));return Me!==0?Me:__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(Te.longitude),__PRIVATE_normalizeNumber(Re.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return __PRIVATE_compareArrays(n.arrayValue,e.arrayValue);case 10:return function(Te,Re){var Me,Ve,De,$e;const Oe=Te.fields||{},Ce=Re.fields||{},Be=(Me=Oe[Tt$1])===null||Me===void 0?void 0:Me.arrayValue,Ue=(Ve=Ce[Tt$1])===null||Ve===void 0?void 0:Ve.arrayValue,We=__PRIVATE_primitiveComparator(((De=Be?.values)===null||De===void 0?void 0:De.length)||0,(($e=Ue?.values)===null||$e===void 0?void 0:$e.length)||0);return We!==0?We:__PRIVATE_compareArrays(Be,Ue)}(n.mapValue,e.mapValue);case 11:return function(Te,Re){if(Te===ht$1.mapValue&&Re===ht$1.mapValue)return 0;if(Te===ht$1.mapValue)return 1;if(Re===ht$1.mapValue)return-1;const Me=Te.fields||{},Ve=Object.keys(Me),De=Re.fields||{},$e=Object.keys(De);Ve.sort(),$e.sort();for(let Oe=0;Oe<Ve.length&&Oe<$e.length;++Oe){const Ce=__PRIVATE_compareUtf8Strings(Ve[Oe],$e[Oe]);if(Ce!==0)return Ce;const Be=__PRIVATE_valueCompare(Me[Ve[Oe]],De[$e[Oe]]);if(Be!==0)return Be}return __PRIVATE_primitiveComparator(Ve.length,$e.length)}(n.mapValue,e.mapValue);default:throw fail(23264,{le:t})}}function __PRIVATE_compareTimestamps(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return __PRIVATE_primitiveComparator(n,e);const t=__PRIVATE_normalizeTimestamp(n),r=__PRIVATE_normalizeTimestamp(e),Ee=__PRIVATE_primitiveComparator(t.seconds,r.seconds);return Ee!==0?Ee:__PRIVATE_primitiveComparator(t.nanos,r.nanos)}function __PRIVATE_compareArrays(n,e){const t=n.values||[],r=e.values||[];for(let Ee=0;Ee<t.length&&Ee<r.length;++Ee){const Te=__PRIVATE_valueCompare(t[Ee],r[Ee]);if(Te)return Te}return __PRIVATE_primitiveComparator(t.length,r.length)}function canonicalId(n){return __PRIVATE_canonifyValue(n)}function __PRIVATE_canonifyValue(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=__PRIVATE_normalizeTimestamp(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return __PRIVATE_normalizeByteString(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return DocumentKey.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",Ee=!0;for(const Te of t.values||[])Ee?Ee=!1:r+=",",r+=__PRIVATE_canonifyValue(Te);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let Ee="{",Te=!0;for(const Re of r)Te?Te=!1:Ee+=",",Ee+=`${Re}:${__PRIVATE_canonifyValue(t.fields[Re])}`;return Ee+"}"}(n.mapValue):fail(61005,{value:n})}function __PRIVATE_estimateByteSize(n){switch(__PRIVATE_typeOrder(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=__PRIVATE_getPreviousValue(n);return e?16+__PRIVATE_estimateByteSize(e):16;case 5:return 2*n.stringValue.length;case 6:return __PRIVATE_normalizeByteString(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((Ee,Te)=>Ee+__PRIVATE_estimateByteSize(Te),0)}(n.arrayValue);case 10:case 11:return function(r){let Ee=0;return forEach$1(r.fields,(Te,Re)=>{Ee+=Te.length+__PRIVATE_estimateByteSize(Re)}),Ee}(n.mapValue);default:throw fail(13486,{value:n})}}function __PRIVATE_refValue(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function isInteger$1(n){return!!n&&"integerValue"in n}function isArray$1(n){return!!n&&"arrayValue"in n}function __PRIVATE_isNullValue(n){return!!n&&"nullValue"in n}function __PRIVATE_isNanValue(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function __PRIVATE_isMapValue(n){return!!n&&"mapValue"in n}function __PRIVATE_isVectorValue(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[ct$1])===null||t===void 0?void 0:t.stringValue)===Pt$1}function __PRIVATE_deepClone(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return forEach$1(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=__PRIVATE_deepClone(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=__PRIVATE_deepClone(n.arrayValue.values[t]);return e}return Object.assign({},n)}function __PRIVATE_isMaxValue(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===lt$1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ObjectValue$1=class yh{constructor(e){this.value=e}static empty(){return new yh({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!__PRIVATE_isMapValue(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=__PRIVATE_deepClone(t)}setAll(e){let t=FieldPath$1.emptyPath(),r={},Ee=[];e.forEach((Re,Me)=>{if(!t.isImmediateParentOf(Me)){const Ve=this.getFieldsMap(t);this.applyChanges(Ve,r,Ee),r={},Ee=[],t=Me.popLast()}Re?r[Me.lastSegment()]=__PRIVATE_deepClone(Re):Ee.push(Me.lastSegment())});const Te=this.getFieldsMap(t);this.applyChanges(Te,r,Ee)}delete(e){const t=this.field(e.popLast());__PRIVATE_isMapValue(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return __PRIVATE_valueEquals(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let Ee=t.mapValue.fields[e.get(r)];__PRIVATE_isMapValue(Ee)&&Ee.mapValue.fields||(Ee={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=Ee),t=Ee}return t.mapValue.fields}applyChanges(e,t,r){forEach$1(t,(Ee,Te)=>e[Ee]=Te);for(const Ee of r)delete e[Ee]}clone(){return new yh(__PRIVATE_deepClone(this.value))}};function __PRIVATE_extractFieldMask(n){const e=[];return forEach$1(n.fields,(t,r)=>{const Ee=new FieldPath$1([t]);if(__PRIVATE_isMapValue(r)){const Te=__PRIVATE_extractFieldMask(r.mapValue).fields;if(Te.length===0)e.push(Ee);else for(const Re of Te)e.push(Ee.child(Re))}else e.push(Ee)}),new FieldMask(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutableDocument{constructor(e,t,r,Ee,Te,Re,Me){this.key=e,this.documentType=t,this.version=r,this.readTime=Ee,this.createTime=Te,this.data=Re,this.documentState=Me}static newInvalidDocument(e){return new MutableDocument(e,0,SnapshotVersion.min(),SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue$1.empty(),0)}static newFoundDocument(e,t,r,Ee){return new MutableDocument(e,1,t,SnapshotVersion.min(),r,Ee,0)}static newNoDocument(e,t){return new MutableDocument(e,2,t,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue$1.empty(),0)}static newUnknownDocument(e,t){return new MutableDocument(e,3,t,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue$1.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(SnapshotVersion.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ObjectValue$1.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ObjectValue$1.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=SnapshotVersion.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof MutableDocument&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new MutableDocument(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bound{constructor(e,t){this.position=e,this.inclusive=t}}function __PRIVATE_boundCompareToDocument(n,e,t){let r=0;for(let Ee=0;Ee<n.position.length;Ee++){const Te=e[Ee],Re=n.position[Ee];if(Te.field.isKeyField()?r=DocumentKey.comparator(DocumentKey.fromName(Re.referenceValue),t.key):r=__PRIVATE_valueCompare(Re,t.data.field(Te.field)),Te.dir==="desc"&&(r*=-1),r!==0)break}return r}function __PRIVATE_boundEquals(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!__PRIVATE_valueEquals(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OrderBy{constructor(e,t="asc"){this.field=e,this.dir=t}}function __PRIVATE_orderByEquals(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Filter{}class FieldFilter extends Filter{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new __PRIVATE_KeyFieldFilter(e,t,r):t==="array-contains"?new __PRIVATE_ArrayContainsFilter(e,r):t==="in"?new __PRIVATE_InFilter(e,r):t==="not-in"?new __PRIVATE_NotInFilter(e,r):t==="array-contains-any"?new __PRIVATE_ArrayContainsAnyFilter(e,r):new FieldFilter(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new __PRIVATE_KeyFieldInFilter(e,r):new __PRIVATE_KeyFieldNotInFilter(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(__PRIVATE_valueCompare(t,this.value)):t!==null&&__PRIVATE_typeOrder(this.value)===__PRIVATE_typeOrder(t)&&this.matchesComparison(__PRIVATE_valueCompare(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fail(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class CompositeFilter extends Filter{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new CompositeFilter(e,t)}matches(e){return __PRIVATE_compositeFilterIsConjunction(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function __PRIVATE_compositeFilterIsConjunction(n){return n.op==="and"}function __PRIVATE_compositeFilterIsFlatConjunction(n){return __PRIVATE_compositeFilterIsFlat(n)&&__PRIVATE_compositeFilterIsConjunction(n)}function __PRIVATE_compositeFilterIsFlat(n){for(const e of n.filters)if(e instanceof CompositeFilter)return!1;return!0}function __PRIVATE_canonifyFilter(n){if(n instanceof FieldFilter)return n.field.canonicalString()+n.op.toString()+canonicalId(n.value);if(__PRIVATE_compositeFilterIsFlatConjunction(n))return n.filters.map(e=>__PRIVATE_canonifyFilter(e)).join(",");{const e=n.filters.map(t=>__PRIVATE_canonifyFilter(t)).join(",");return`${n.op}(${e})`}}function __PRIVATE_filterEquals(n,e){return n instanceof FieldFilter?function(r,Ee){return Ee instanceof FieldFilter&&r.op===Ee.op&&r.field.isEqual(Ee.field)&&__PRIVATE_valueEquals(r.value,Ee.value)}(n,e):n instanceof CompositeFilter?function(r,Ee){return Ee instanceof CompositeFilter&&r.op===Ee.op&&r.filters.length===Ee.filters.length?r.filters.reduce((Te,Re,Me)=>Te&&__PRIVATE_filterEquals(Re,Ee.filters[Me]),!0):!1}(n,e):void fail(19439)}function __PRIVATE_stringifyFilter(n){return n instanceof FieldFilter?function(t){return`${t.field.canonicalString()} ${t.op} ${canonicalId(t.value)}`}(n):n instanceof CompositeFilter?function(t){return t.op.toString()+" {"+t.getFilters().map(__PRIVATE_stringifyFilter).join(" ,")+"}"}(n):"Filter"}class __PRIVATE_KeyFieldFilter extends FieldFilter{constructor(e,t,r){super(e,t,r),this.key=DocumentKey.fromName(r.referenceValue)}matches(e){const t=DocumentKey.comparator(e.key,this.key);return this.matchesComparison(t)}}class __PRIVATE_KeyFieldInFilter extends FieldFilter{constructor(e,t){super(e,"in",t),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class __PRIVATE_KeyFieldNotInFilter extends FieldFilter{constructor(e,t){super(e,"not-in",t),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function __PRIVATE_extractDocumentKeysFromArrayValue(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>DocumentKey.fromName(r.referenceValue))}class __PRIVATE_ArrayContainsFilter extends FieldFilter{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return isArray$1(t)&&__PRIVATE_arrayValueContains(t.arrayValue,this.value)}}class __PRIVATE_InFilter extends FieldFilter{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&__PRIVATE_arrayValueContains(this.value.arrayValue,t)}}class __PRIVATE_NotInFilter extends FieldFilter{constructor(e,t){super(e,"not-in",t)}matches(e){if(__PRIVATE_arrayValueContains(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!__PRIVATE_arrayValueContains(this.value.arrayValue,t)}}class __PRIVATE_ArrayContainsAnyFilter extends FieldFilter{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!isArray$1(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>__PRIVATE_arrayValueContains(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetImpl{constructor(e,t=null,r=[],Ee=[],Te=null,Re=null,Me=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=Ee,this.limit=Te,this.startAt=Re,this.endAt=Me,this.Pe=null}}function __PRIVATE_newTarget(n,e=null,t=[],r=[],Ee=null,Te=null,Re=null){return new __PRIVATE_TargetImpl(n,e,t,r,Ee,Te,Re)}function __PRIVATE_canonifyTarget(n){const e=__PRIVATE_debugCast(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>__PRIVATE_canonifyFilter(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(Te){return Te.field.canonicalString()+Te.dir}(r)).join(","),__PRIVATE_isNullOrUndefined(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>canonicalId(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>canonicalId(r)).join(",")),e.Pe=t}return e.Pe}function __PRIVATE_targetEquals(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!__PRIVATE_orderByEquals(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!__PRIVATE_filterEquals(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!__PRIVATE_boundEquals(n.startAt,e.startAt)&&__PRIVATE_boundEquals(n.endAt,e.endAt)}function __PRIVATE_targetIsDocumentTarget(n){return DocumentKey.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryImpl{constructor(e,t=null,r=[],Ee=[],Te=null,Re="F",Me=null,Ve=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=Ee,this.limit=Te,this.limitType=Re,this.startAt=Me,this.endAt=Ve,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function __PRIVATE_newQuery(n,e,t,r,Ee,Te,Re,Me){return new __PRIVATE_QueryImpl(n,e,t,r,Ee,Te,Re,Me)}function __PRIVATE_newQueryForPath(n){return new __PRIVATE_QueryImpl(n)}function __PRIVATE_queryMatchesAllDocuments(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function __PRIVATE_isCollectionGroupQuery(n){return n.collectionGroup!==null}function __PRIVATE_queryNormalizedOrderBy(n){const e=__PRIVATE_debugCast(n);if(e.Te===null){e.Te=[];const t=new Set;for(const Te of e.explicitOrderBy)e.Te.push(Te),t.add(Te.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(Re){let Me=new SortedSet(FieldPath$1.comparator);return Re.filters.forEach(Ve=>{Ve.getFlattenedFilters().forEach(De=>{De.isInequality()&&(Me=Me.add(De.field))})}),Me})(e).forEach(Te=>{t.has(Te.canonicalString())||Te.isKeyField()||e.Te.push(new OrderBy(Te,r))}),t.has(FieldPath$1.keyField().canonicalString())||e.Te.push(new OrderBy(FieldPath$1.keyField(),r))}return e.Te}function __PRIVATE_queryToTarget(n){const e=__PRIVATE_debugCast(n);return e.Ie||(e.Ie=__PRIVATE__queryToTarget(e,__PRIVATE_queryNormalizedOrderBy(n))),e.Ie}function __PRIVATE__queryToTarget(n,e){if(n.limitType==="F")return __PRIVATE_newTarget(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(Ee=>{const Te=Ee.dir==="desc"?"asc":"desc";return new OrderBy(Ee.field,Te)});const t=n.endAt?new Bound(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Bound(n.startAt.position,n.startAt.inclusive):null;return __PRIVATE_newTarget(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function __PRIVATE_queryWithAddedFilter(n,e){const t=n.filters.concat([e]);return new __PRIVATE_QueryImpl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function __PRIVATE_queryWithLimit(n,e,t){return new __PRIVATE_QueryImpl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function __PRIVATE_queryEquals(n,e){return __PRIVATE_targetEquals(__PRIVATE_queryToTarget(n),__PRIVATE_queryToTarget(e))&&n.limitType===e.limitType}function __PRIVATE_canonifyQuery(n){return`${__PRIVATE_canonifyTarget(__PRIVATE_queryToTarget(n))}|lt:${n.limitType}`}function __PRIVATE_stringifyQuery(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(Ee=>__PRIVATE_stringifyFilter(Ee)).join(", ")}]`),__PRIVATE_isNullOrUndefined(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(Ee=>function(Re){return`${Re.field.canonicalString()} (${Re.dir})`}(Ee)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(Ee=>canonicalId(Ee)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(Ee=>canonicalId(Ee)).join(",")),`Target(${r})`}(__PRIVATE_queryToTarget(n))}; limitType=${n.limitType})`}function __PRIVATE_queryMatches(n,e){return e.isFoundDocument()&&function(r,Ee){const Te=Ee.key.path;return r.collectionGroup!==null?Ee.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(Te):DocumentKey.isDocumentKey(r.path)?r.path.isEqual(Te):r.path.isImmediateParentOf(Te)}(n,e)&&function(r,Ee){for(const Te of __PRIVATE_queryNormalizedOrderBy(r))if(!Te.field.isKeyField()&&Ee.data.field(Te.field)===null)return!1;return!0}(n,e)&&function(r,Ee){for(const Te of r.filters)if(!Te.matches(Ee))return!1;return!0}(n,e)&&function(r,Ee){return!(r.startAt&&!function(Re,Me,Ve){const De=__PRIVATE_boundCompareToDocument(Re,Me,Ve);return Re.inclusive?De<=0:De<0}(r.startAt,__PRIVATE_queryNormalizedOrderBy(r),Ee)||r.endAt&&!function(Re,Me,Ve){const De=__PRIVATE_boundCompareToDocument(Re,Me,Ve);return Re.inclusive?De>=0:De>0}(r.endAt,__PRIVATE_queryNormalizedOrderBy(r),Ee))}(n,e)}function __PRIVATE_queryCollectionGroup(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function __PRIVATE_newQueryComparator(n){return(e,t)=>{let r=!1;for(const Ee of __PRIVATE_queryNormalizedOrderBy(n)){const Te=__PRIVATE_compareDocs(Ee,e,t);if(Te!==0)return Te;r=r||Ee.field.isKeyField()}return 0}}function __PRIVATE_compareDocs(n,e,t){const r=n.field.isKeyField()?DocumentKey.comparator(e.key,t.key):function(Te,Re,Me){const Ve=Re.data.field(Te),De=Me.data.field(Te);return Ve!==null&&De!==null?__PRIVATE_valueCompare(Ve,De):fail(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return fail(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectMap{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[Ee,Te]of r)if(this.equalsFn(Ee,e))return Te}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),Ee=this.inner[r];if(Ee===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let Te=0;Te<Ee.length;Te++)if(this.equalsFn(Ee[Te][0],e))return void(Ee[Te]=[e,t]);Ee.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let Ee=0;Ee<r.length;Ee++)if(this.equalsFn(r[Ee][0],e))return r.length===1?delete this.inner[t]:r.splice(Ee,1),this.innerSize--,!0;return!1}forEach(e){forEach$1(this.inner,(t,r)=>{for(const[Ee,Te]of r)e(Ee,Te)})}isEmpty(){return isEmpty$1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Et$1=new SortedMap(DocumentKey.comparator);function __PRIVATE_mutableDocumentMap(){return Et$1}const At$1=new SortedMap(DocumentKey.comparator);function documentMap(...n){let e=At$1;for(const t of n)e=e.insert(t.key,t);return e}function __PRIVATE_convertOverlayedDocumentMapToDocumentMap(n){let e=At$1;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function __PRIVATE_newOverlayMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newMutationMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newDocumentKeyMap(){return new ObjectMap(n=>n.toString(),(n,e)=>n.isEqual(e))}const Rt$1=new SortedMap(DocumentKey.comparator),Vt$1=new SortedSet(DocumentKey.comparator);function __PRIVATE_documentKeySet(...n){let e=Vt$1;for(const t of n)e=e.add(t);return e}const mt$1=new SortedSet(__PRIVATE_primitiveComparator);function __PRIVATE_targetIdSet(){return mt$1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_toDouble(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:__PRIVATE_isNegativeZero(e)?"-0":e}}function __PRIVATE_toInteger(n){return{integerValue:""+n}}function toNumber(n,e){return isSafeInteger(e)?__PRIVATE_toInteger(e):__PRIVATE_toDouble(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransformOperation{constructor(){this._=void 0}}function __PRIVATE_applyTransformOperationToLocalView(n,e,t){return n instanceof __PRIVATE_ServerTimestampTransform?function(Ee,Te){const Re={fields:{[ot$1]:{stringValue:st$1},[at$1]:{timestampValue:{seconds:Ee.seconds,nanos:Ee.nanoseconds}}}};return Te&&__PRIVATE_isServerTimestamp(Te)&&(Te=__PRIVATE_getPreviousValue(Te)),Te&&(Re.fields[_t$1]=Te),{mapValue:Re}}(t,e):n instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(n,e):n instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(n,e):function(Ee,Te){const Re=__PRIVATE_computeTransformOperationBaseValue(Ee,Te),Me=asNumber$1(Re)+asNumber$1(Ee.Ee);return isInteger$1(Re)&&isInteger$1(Ee.Ee)?__PRIVATE_toInteger(Me):__PRIVATE_toDouble(Ee.serializer,Me)}(n,e)}function __PRIVATE_applyTransformOperationToRemoteDocument(n,e,t){return n instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(n,e):n instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(n,e):t}function __PRIVATE_computeTransformOperationBaseValue(n,e){return n instanceof __PRIVATE_NumericIncrementTransformOperation?function(r){return isInteger$1(r)||function(Te){return!!Te&&"doubleValue"in Te}(r)}(e)?e:{integerValue:0}:null}class __PRIVATE_ServerTimestampTransform extends TransformOperation{}class __PRIVATE_ArrayUnionTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayUnionTransformOperation(n,e){const t=__PRIVATE_coercedFieldValuesArray(e);for(const r of n.elements)t.some(Ee=>__PRIVATE_valueEquals(Ee,r))||t.push(r);return{arrayValue:{values:t}}}class __PRIVATE_ArrayRemoveTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayRemoveTransformOperation(n,e){let t=__PRIVATE_coercedFieldValuesArray(e);for(const r of n.elements)t=t.filter(Ee=>!__PRIVATE_valueEquals(Ee,r));return{arrayValue:{values:t}}}class __PRIVATE_NumericIncrementTransformOperation extends TransformOperation{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function asNumber$1(n){return __PRIVATE_normalizeNumber(n.integerValue||n.doubleValue)}function __PRIVATE_coercedFieldValuesArray(n){return isArray$1(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldTransform{constructor(e,t){this.field=e,this.transform=t}}function __PRIVATE_fieldTransformEquals(n,e){return n.field.isEqual(e.field)&&function(r,Ee){return r instanceof __PRIVATE_ArrayUnionTransformOperation&&Ee instanceof __PRIVATE_ArrayUnionTransformOperation||r instanceof __PRIVATE_ArrayRemoveTransformOperation&&Ee instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_arrayEquals(r.elements,Ee.elements,__PRIVATE_valueEquals):r instanceof __PRIVATE_NumericIncrementTransformOperation&&Ee instanceof __PRIVATE_NumericIncrementTransformOperation?__PRIVATE_valueEquals(r.Ee,Ee.Ee):r instanceof __PRIVATE_ServerTimestampTransform&&Ee instanceof __PRIVATE_ServerTimestampTransform}(n.transform,e.transform)}class MutationResult{constructor(e,t){this.version=e,this.transformResults=t}}class Precondition{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Precondition}static exists(e){return new Precondition(void 0,e)}static updateTime(e){return new Precondition(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function __PRIVATE_preconditionIsValidForDocument(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Mutation{}function __PRIVATE_calculateOverlayMutation(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new __PRIVATE_DeleteMutation(n.key,Precondition.none()):new __PRIVATE_SetMutation(n.key,n.data,Precondition.none());{const t=n.data,r=ObjectValue$1.empty();let Ee=new SortedSet(FieldPath$1.comparator);for(let Te of e.fields)if(!Ee.has(Te)){let Re=t.field(Te);Re===null&&Te.length>1&&(Te=Te.popLast(),Re=t.field(Te)),Re===null?r.delete(Te):r.set(Te,Re),Ee=Ee.add(Te)}return new __PRIVATE_PatchMutation(n.key,r,new FieldMask(Ee.toArray()),Precondition.none())}}function __PRIVATE_mutationApplyToRemoteDocument(n,e,t){n instanceof __PRIVATE_SetMutation?function(Ee,Te,Re){const Me=Ee.value.clone(),Ve=__PRIVATE_serverTransformResults(Ee.fieldTransforms,Te,Re.transformResults);Me.setAll(Ve),Te.convertToFoundDocument(Re.version,Me).setHasCommittedMutations()}(n,e,t):n instanceof __PRIVATE_PatchMutation?function(Ee,Te,Re){if(!__PRIVATE_preconditionIsValidForDocument(Ee.precondition,Te))return void Te.convertToUnknownDocument(Re.version);const Me=__PRIVATE_serverTransformResults(Ee.fieldTransforms,Te,Re.transformResults),Ve=Te.data;Ve.setAll(__PRIVATE_getPatch(Ee)),Ve.setAll(Me),Te.convertToFoundDocument(Re.version,Ve).setHasCommittedMutations()}(n,e,t):function(Ee,Te,Re){Te.convertToNoDocument(Re.version).setHasCommittedMutations()}(0,e,t)}function __PRIVATE_mutationApplyToLocalView(n,e,t,r){return n instanceof __PRIVATE_SetMutation?function(Te,Re,Me,Ve){if(!__PRIVATE_preconditionIsValidForDocument(Te.precondition,Re))return Me;const De=Te.value.clone(),$e=__PRIVATE_localTransformResults(Te.fieldTransforms,Ve,Re);return De.setAll($e),Re.convertToFoundDocument(Re.version,De).setHasLocalMutations(),null}(n,e,t,r):n instanceof __PRIVATE_PatchMutation?function(Te,Re,Me,Ve){if(!__PRIVATE_preconditionIsValidForDocument(Te.precondition,Re))return Me;const De=__PRIVATE_localTransformResults(Te.fieldTransforms,Ve,Re),$e=Re.data;return $e.setAll(__PRIVATE_getPatch(Te)),$e.setAll(De),Re.convertToFoundDocument(Re.version,$e).setHasLocalMutations(),Me===null?null:Me.unionWith(Te.fieldMask.fields).unionWith(Te.fieldTransforms.map(Oe=>Oe.field))}(n,e,t,r):function(Te,Re,Me){return __PRIVATE_preconditionIsValidForDocument(Te.precondition,Re)?(Re.convertToNoDocument(Re.version).setHasLocalMutations(),null):Me}(n,e,t)}function __PRIVATE_mutationExtractBaseValue(n,e){let t=null;for(const r of n.fieldTransforms){const Ee=e.data.field(r.field),Te=__PRIVATE_computeTransformOperationBaseValue(r.transform,Ee||null);Te!=null&&(t===null&&(t=ObjectValue$1.empty()),t.set(r.field,Te))}return t||null}function __PRIVATE_mutationEquals(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,Ee){return r===void 0&&Ee===void 0||!(!r||!Ee)&&__PRIVATE_arrayEquals(r,Ee,(Te,Re)=>__PRIVATE_fieldTransformEquals(Te,Re))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class __PRIVATE_SetMutation extends Mutation{constructor(e,t,r,Ee=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=Ee,this.type=0}getFieldMask(){return null}}class __PRIVATE_PatchMutation extends Mutation{constructor(e,t,r,Ee,Te=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=Ee,this.fieldTransforms=Te,this.type=1}getFieldMask(){return this.fieldMask}}function __PRIVATE_getPatch(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function __PRIVATE_serverTransformResults(n,e,t){const r=new Map;__PRIVATE_hardAssert(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let Ee=0;Ee<t.length;Ee++){const Te=n[Ee],Re=Te.transform,Me=e.data.field(Te.field);r.set(Te.field,__PRIVATE_applyTransformOperationToRemoteDocument(Re,Me,t[Ee]))}return r}function __PRIVATE_localTransformResults(n,e,t){const r=new Map;for(const Ee of n){const Te=Ee.transform,Re=t.data.field(Ee.field);r.set(Ee.field,__PRIVATE_applyTransformOperationToLocalView(Te,Re,e))}return r}class __PRIVATE_DeleteMutation extends Mutation{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class __PRIVATE_VerifyMutation extends Mutation{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutationBatch{constructor(e,t,r,Ee){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=Ee}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let Ee=0;Ee<this.mutations.length;Ee++){const Te=this.mutations[Ee];Te.key.isEqual(e.key)&&__PRIVATE_mutationApplyToRemoteDocument(Te,e,r[Ee])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=__PRIVATE_mutationApplyToLocalView(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=__PRIVATE_mutationApplyToLocalView(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=__PRIVATE_newMutationMap();return this.mutations.forEach(Ee=>{const Te=e.get(Ee.key),Re=Te.overlayedDocument;let Me=this.applyToLocalView(Re,Te.mutatedFields);Me=t.has(Ee.key)?null:Me;const Ve=__PRIVATE_calculateOverlayMutation(Re,Me);Ve!==null&&r.set(Ee.key,Ve),Re.isValidDocument()||Re.convertToNoDocument(SnapshotVersion.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),__PRIVATE_documentKeySet())}isEqual(e){return this.batchId===e.batchId&&__PRIVATE_arrayEquals(this.mutations,e.mutations,(t,r)=>__PRIVATE_mutationEquals(t,r))&&__PRIVATE_arrayEquals(this.baseMutations,e.baseMutations,(t,r)=>__PRIVATE_mutationEquals(t,r))}}class MutationBatchResult{constructor(e,t,r,Ee){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=Ee}static from(e,t,r){__PRIVATE_hardAssert(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let Ee=function(){return Rt$1}();const Te=e.mutations;for(let Re=0;Re<Te.length;Re++)Ee=Ee.insert(Te[Re].key,r[Re].version);return new MutationBatchResult(e,t,r,Ee)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Overlay{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistenceFilter{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft$1,gt$1;function __PRIVATE_isPermanentError(n){switch(n){case N$1.OK:return fail(64938);case N$1.CANCELLED:case N$1.UNKNOWN:case N$1.DEADLINE_EXCEEDED:case N$1.RESOURCE_EXHAUSTED:case N$1.INTERNAL:case N$1.UNAVAILABLE:case N$1.UNAUTHENTICATED:return!1;case N$1.INVALID_ARGUMENT:case N$1.NOT_FOUND:case N$1.ALREADY_EXISTS:case N$1.PERMISSION_DENIED:case N$1.FAILED_PRECONDITION:case N$1.ABORTED:case N$1.OUT_OF_RANGE:case N$1.UNIMPLEMENTED:case N$1.DATA_LOSS:return!0;default:return fail(15467,{code:n})}}function __PRIVATE_mapCodeFromRpcCode(n){if(n===void 0)return __PRIVATE_logError("GRPC error has no .code"),N$1.UNKNOWN;switch(n){case ft$1.OK:return N$1.OK;case ft$1.CANCELLED:return N$1.CANCELLED;case ft$1.UNKNOWN:return N$1.UNKNOWN;case ft$1.DEADLINE_EXCEEDED:return N$1.DEADLINE_EXCEEDED;case ft$1.RESOURCE_EXHAUSTED:return N$1.RESOURCE_EXHAUSTED;case ft$1.INTERNAL:return N$1.INTERNAL;case ft$1.UNAVAILABLE:return N$1.UNAVAILABLE;case ft$1.UNAUTHENTICATED:return N$1.UNAUTHENTICATED;case ft$1.INVALID_ARGUMENT:return N$1.INVALID_ARGUMENT;case ft$1.NOT_FOUND:return N$1.NOT_FOUND;case ft$1.ALREADY_EXISTS:return N$1.ALREADY_EXISTS;case ft$1.PERMISSION_DENIED:return N$1.PERMISSION_DENIED;case ft$1.FAILED_PRECONDITION:return N$1.FAILED_PRECONDITION;case ft$1.ABORTED:return N$1.ABORTED;case ft$1.OUT_OF_RANGE:return N$1.OUT_OF_RANGE;case ft$1.UNIMPLEMENTED:return N$1.UNIMPLEMENTED;case ft$1.DATA_LOSS:return N$1.DATA_LOSS;default:return fail(39323,{code:n})}}(gt$1=ft$1||(ft$1={}))[gt$1.OK=0]="OK",gt$1[gt$1.CANCELLED=1]="CANCELLED",gt$1[gt$1.UNKNOWN=2]="UNKNOWN",gt$1[gt$1.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt$1[gt$1.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt$1[gt$1.NOT_FOUND=5]="NOT_FOUND",gt$1[gt$1.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt$1[gt$1.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt$1[gt$1.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt$1[gt$1.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt$1[gt$1.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt$1[gt$1.ABORTED=10]="ABORTED",gt$1[gt$1.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt$1[gt$1.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt$1[gt$1.INTERNAL=13]="INTERNAL",gt$1[gt$1.UNAVAILABLE=14]="UNAVAILABLE",gt$1[gt$1.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yt$1=new Integer([4294967295,4294967295],0);function __PRIVATE_getMd5HashValue(n){const e=__PRIVATE_newTextEncoder().encode(n),t=new Md5;return t.update(e),new Uint8Array(t.digest())}function __PRIVATE_get64BitUints(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),Ee=e.getUint32(8,!0),Te=e.getUint32(12,!0);return[new Integer([t,r],0),new Integer([Ee,Te],0)]}class BloomFilter{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new __PRIVATE_BloomFilterError(`Invalid padding: ${t}`);if(r<0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new __PRIVATE_BloomFilterError(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Integer.fromNumber(this.fe)}pe(e,t,r){let Ee=e.add(t.multiply(Integer.fromNumber(r)));return Ee.compare(yt$1)===1&&(Ee=new Integer([Ee.getBits(0),Ee.getBits(1)],0)),Ee.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=__PRIVATE_getMd5HashValue(e),[r,Ee]=__PRIVATE_get64BitUints(t);for(let Te=0;Te<this.hashCount;Te++){const Re=this.pe(r,Ee,Te);if(!this.ye(Re))return!1}return!0}static create(e,t,r){const Ee=e%8==0?0:8-e%8,Te=new Uint8Array(Math.ceil(e/8)),Re=new BloomFilter(Te,Ee,t);return r.forEach(Me=>Re.insert(Me)),Re}insert(e){if(this.fe===0)return;const t=__PRIVATE_getMd5HashValue(e),[r,Ee]=__PRIVATE_get64BitUints(t);for(let Te=0;Te<this.hashCount;Te++){const Re=this.pe(r,Ee,Te);this.we(Re)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class __PRIVATE_BloomFilterError extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteEvent{constructor(e,t,r,Ee,Te){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=Ee,this.resolvedLimboDocuments=Te}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const Ee=new Map;return Ee.set(e,TargetChange.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new RemoteEvent(SnapshotVersion.min(),Ee,new SortedMap(__PRIVATE_primitiveComparator),__PRIVATE_mutableDocumentMap(),__PRIVATE_documentKeySet())}}class TargetChange{constructor(e,t,r,Ee,Te){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=Ee,this.removedDocuments=Te}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new TargetChange(r,t,__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentWatchChange{constructor(e,t,r,Ee){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=Ee}}class __PRIVATE_ExistenceFilterChange{constructor(e,t){this.targetId=e,this.De=t}}class __PRIVATE_WatchTargetChange{constructor(e,t,r=ByteString.EMPTY_BYTE_STRING,Ee=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=Ee}}class __PRIVATE_TargetState{constructor(){this.ve=0,this.Ce=__PRIVATE_snapshotChangesMap(),this.Fe=ByteString.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=__PRIVATE_documentKeySet(),t=__PRIVATE_documentKeySet(),r=__PRIVATE_documentKeySet();return this.Ce.forEach((Ee,Te)=>{switch(Te){case 0:e=e.add(Ee);break;case 2:t=t.add(Ee);break;case 1:r=r.add(Ee);break;default:fail(38017,{changeType:Te})}}),new TargetChange(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=__PRIVATE_snapshotChangesMap()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,__PRIVATE_hardAssert(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class __PRIVATE_WatchChangeAggregator{constructor(e){this.We=e,this.Ge=new Map,this.ze=__PRIVATE_mutableDocumentMap(),this.je=__PRIVATE_documentTargetMap(),this.Je=__PRIVATE_documentTargetMap(),this.He=new SortedMap(__PRIVATE_primitiveComparator)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:fail(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,Ee)=>{this.nt(Ee)&&t(Ee)})}it(e){const t=e.targetId,r=e.De.count,Ee=this.st(t);if(Ee){const Te=Ee.target;if(__PRIVATE_targetIsDocumentTarget(Te))if(r===0){const Re=new DocumentKey(Te.path);this.Xe(t,Re,MutableDocument.newNoDocument(Re,SnapshotVersion.min()))}else __PRIVATE_hardAssert(r===1,20013,{expectedCount:r});else{const Re=this.ot(t);if(Re!==r){const Me=this._t(e),Ve=Me?this.ut(Me,e,Re):1;if(Ve!==0){this.rt(t);const De=Ve===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,De)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:Ee=0},hashCount:Te=0}=t;let Re,Me;try{Re=__PRIVATE_normalizeByteString(r).toUint8Array()}catch(Ve){if(Ve instanceof __PRIVATE_Base64DecodeError)return __PRIVATE_logWarn("Decoding the base64 bloom filter in existence filter failed ("+Ve.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw Ve}try{Me=new BloomFilter(Re,Ee,Te)}catch(Ve){return __PRIVATE_logWarn(Ve instanceof __PRIVATE_BloomFilterError?"BloomFilter error: ":"Applying bloom filter failed: ",Ve),null}return Me.fe===0?null:Me}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let Ee=0;return r.forEach(Te=>{const Re=this.We.lt(),Me=`projects/${Re.projectId}/databases/${Re.database}/documents/${Te.path.canonicalString()}`;e.mightContain(Me)||(this.Xe(t,Te,null),Ee++)}),Ee}Pt(e){const t=new Map;this.Ge.forEach((Te,Re)=>{const Me=this.st(Re);if(Me){if(Te.current&&__PRIVATE_targetIsDocumentTarget(Me.target)){const Ve=new DocumentKey(Me.target.path);this.Tt(Ve).has(Re)||this.It(Re,Ve)||this.Xe(Re,Ve,MutableDocument.newNoDocument(Ve,e))}Te.Ne&&(t.set(Re,Te.Le()),Te.ke())}});let r=__PRIVATE_documentKeySet();this.Je.forEach((Te,Re)=>{let Me=!0;Re.forEachWhile(Ve=>{const De=this.st(Ve);return!De||De.purpose==="TargetPurposeLimboResolution"||(Me=!1,!1)}),Me&&(r=r.add(Te))}),this.ze.forEach((Te,Re)=>Re.setReadTime(e));const Ee=new RemoteEvent(e,t,this.He,this.ze,r);return this.ze=__PRIVATE_mutableDocumentMap(),this.je=__PRIVATE_documentTargetMap(),this.Je=__PRIVATE_documentTargetMap(),this.He=new SortedMap(__PRIVATE_primitiveComparator),Ee}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const Ee=this.tt(e);this.It(e,t)?Ee.qe(t,1):Ee.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new __PRIVATE_TargetState,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new SortedSet(__PRIVATE_primitiveComparator),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new SortedSet(__PRIVATE_primitiveComparator),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||__PRIVATE_logDebug("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new __PRIVATE_TargetState),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function __PRIVATE_documentTargetMap(){return new SortedMap(DocumentKey.comparator)}function __PRIVATE_snapshotChangesMap(){return new SortedMap(DocumentKey.comparator)}const wt$1={asc:"ASCENDING",desc:"DESCENDING"},St={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bt$1={and:"AND",or:"OR"};class JsonProtoSerializer{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function __PRIVATE_toInt32Proto(n,e){return n.useProto3Json||__PRIVATE_isNullOrUndefined(e)?e:{value:e}}function toTimestamp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function __PRIVATE_toBytes(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function __PRIVATE_toVersion(n,e){return toTimestamp(n,e.toTimestamp())}function __PRIVATE_fromVersion(n){return __PRIVATE_hardAssert(!!n,49232),SnapshotVersion.fromTimestamp(function(t){const r=__PRIVATE_normalizeTimestamp(t);return new Timestamp(r.seconds,r.nanos)}(n))}function __PRIVATE_toResourceName(n,e){return __PRIVATE_toResourcePath(n,e).canonicalString()}function __PRIVATE_toResourcePath(n,e){const t=function(Ee){return new ResourcePath(["projects",Ee.projectId,"databases",Ee.database])}(n).child("documents");return e===void 0?t:t.child(e)}function __PRIVATE_fromResourceName(n){const e=ResourcePath.fromString(n);return __PRIVATE_hardAssert(__PRIVATE_isValidResourceName(e),10190,{key:e.toString()}),e}function __PRIVATE_toName(n,e){return __PRIVATE_toResourceName(n.databaseId,e.path)}function fromName(n,e){const t=__PRIVATE_fromResourceName(e);if(t.get(1)!==n.databaseId.projectId)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new DocumentKey(__PRIVATE_extractLocalPathFromResourceName(t))}function __PRIVATE_toQueryPath(n,e){return __PRIVATE_toResourceName(n.databaseId,e)}function __PRIVATE_fromQueryPath(n){const e=__PRIVATE_fromResourceName(n);return e.length===4?ResourcePath.emptyPath():__PRIVATE_extractLocalPathFromResourceName(e)}function __PRIVATE_getEncodedDatabaseId(n){return new ResourcePath(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function __PRIVATE_extractLocalPathFromResourceName(n){return __PRIVATE_hardAssert(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function __PRIVATE_toMutationDocument(n,e,t){return{name:__PRIVATE_toName(n,e),fields:t.value.mapValue.fields}}function __PRIVATE_fromWatchChange(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(De){return De==="NO_CHANGE"?0:De==="ADD"?1:De==="REMOVE"?2:De==="CURRENT"?3:De==="RESET"?4:fail(39313,{state:De})}(e.targetChange.targetChangeType||"NO_CHANGE"),Ee=e.targetChange.targetIds||[],Te=function(De,$e){return De.useProto3Json?(__PRIVATE_hardAssert($e===void 0||typeof $e=="string",58123),ByteString.fromBase64String($e||"")):(__PRIVATE_hardAssert($e===void 0||$e instanceof Buffer||$e instanceof Uint8Array,16193),ByteString.fromUint8Array($e||new Uint8Array))}(n,e.targetChange.resumeToken),Re=e.targetChange.cause,Me=Re&&function(De){const $e=De.code===void 0?N$1.UNKNOWN:__PRIVATE_mapCodeFromRpcCode(De.code);return new FirestoreError($e,De.message||"")}(Re);t=new __PRIVATE_WatchTargetChange(r,Ee,Te,Me||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const Ee=fromName(n,r.document.name),Te=__PRIVATE_fromVersion(r.document.updateTime),Re=r.document.createTime?__PRIVATE_fromVersion(r.document.createTime):SnapshotVersion.min(),Me=new ObjectValue$1({mapValue:{fields:r.document.fields}}),Ve=MutableDocument.newFoundDocument(Ee,Te,Re,Me),De=r.targetIds||[],$e=r.removedTargetIds||[];t=new __PRIVATE_DocumentWatchChange(De,$e,Ve.key,Ve)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const Ee=fromName(n,r.document),Te=r.readTime?__PRIVATE_fromVersion(r.readTime):SnapshotVersion.min(),Re=MutableDocument.newNoDocument(Ee,Te),Me=r.removedTargetIds||[];t=new __PRIVATE_DocumentWatchChange([],Me,Re.key,Re)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const Ee=fromName(n,r.document),Te=r.removedTargetIds||[];t=new __PRIVATE_DocumentWatchChange([],Te,Ee,null)}else{if(!("filter"in e))return fail(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:Ee=0,unchangedNames:Te}=r,Re=new ExistenceFilter(Ee,Te),Me=r.targetId;t=new __PRIVATE_ExistenceFilterChange(Me,Re)}}return t}function toMutation(n,e){let t;if(e instanceof __PRIVATE_SetMutation)t={update:__PRIVATE_toMutationDocument(n,e.key,e.value)};else if(e instanceof __PRIVATE_DeleteMutation)t={delete:__PRIVATE_toName(n,e.key)};else if(e instanceof __PRIVATE_PatchMutation)t={update:__PRIVATE_toMutationDocument(n,e.key,e.data),updateMask:__PRIVATE_toDocumentMask(e.fieldMask)};else{if(!(e instanceof __PRIVATE_VerifyMutation))return fail(16599,{Rt:e.type});t={verify:__PRIVATE_toName(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(Te,Re){const Me=Re.transform;if(Me instanceof __PRIVATE_ServerTimestampTransform)return{fieldPath:Re.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(Me instanceof __PRIVATE_ArrayUnionTransformOperation)return{fieldPath:Re.field.canonicalString(),appendMissingElements:{values:Me.elements}};if(Me instanceof __PRIVATE_ArrayRemoveTransformOperation)return{fieldPath:Re.field.canonicalString(),removeAllFromArray:{values:Me.elements}};if(Me instanceof __PRIVATE_NumericIncrementTransformOperation)return{fieldPath:Re.field.canonicalString(),increment:Me.Ee};throw fail(20930,{transform:Re.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(Ee,Te){return Te.updateTime!==void 0?{updateTime:__PRIVATE_toVersion(Ee,Te.updateTime)}:Te.exists!==void 0?{exists:Te.exists}:fail(27497)}(n,e.precondition)),t}function __PRIVATE_fromWriteResults(n,e){return n&&n.length>0?(__PRIVATE_hardAssert(e!==void 0,14353),n.map(t=>function(Ee,Te){let Re=Ee.updateTime?__PRIVATE_fromVersion(Ee.updateTime):__PRIVATE_fromVersion(Te);return Re.isEqual(SnapshotVersion.min())&&(Re=__PRIVATE_fromVersion(Te)),new MutationResult(Re,Ee.transformResults||[])}(t,e))):[]}function __PRIVATE_toDocumentsTarget(n,e){return{documents:[__PRIVATE_toQueryPath(n,e.path)]}}function __PRIVATE_toQueryTarget(n,e){const t={structuredQuery:{}},r=e.path;let Ee;e.collectionGroup!==null?(Ee=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(Ee=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=__PRIVATE_toQueryPath(n,Ee);const Te=function(De){if(De.length!==0)return __PRIVATE_toFilter(CompositeFilter.create(De,"and"))}(e.filters);Te&&(t.structuredQuery.where=Te);const Re=function(De){if(De.length!==0)return De.map($e=>function(Ce){return{field:__PRIVATE_toFieldPathReference(Ce.field),direction:__PRIVATE_toDirection(Ce.dir)}}($e))}(e.orderBy);Re&&(t.structuredQuery.orderBy=Re);const Me=__PRIVATE_toInt32Proto(n,e.limit);return Me!==null&&(t.structuredQuery.limit=Me),e.startAt&&(t.structuredQuery.startAt=function(De){return{before:De.inclusive,values:De.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(De){return{before:!De.inclusive,values:De.position}}(e.endAt)),{Vt:t,parent:Ee}}function __PRIVATE_convertQueryTargetToQuery(n){let e=__PRIVATE_fromQueryPath(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let Ee=null;if(r>0){__PRIVATE_hardAssert(r===1,65062);const $e=t.from[0];$e.allDescendants?Ee=$e.collectionId:e=e.child($e.collectionId)}let Te=[];t.where&&(Te=function(Oe){const Ce=__PRIVATE_fromFilter(Oe);return Ce instanceof CompositeFilter&&__PRIVATE_compositeFilterIsFlatConjunction(Ce)?Ce.getFilters():[Ce]}(t.where));let Re=[];t.orderBy&&(Re=function(Oe){return Oe.map(Ce=>function(Ue){return new OrderBy(__PRIVATE_fromFieldPathReference(Ue.field),function(He){switch(He){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ue.direction))}(Ce))}(t.orderBy));let Me=null;t.limit&&(Me=function(Oe){let Ce;return Ce=typeof Oe=="object"?Oe.value:Oe,__PRIVATE_isNullOrUndefined(Ce)?null:Ce}(t.limit));let Ve=null;t.startAt&&(Ve=function(Oe){const Ce=!!Oe.before,Be=Oe.values||[];return new Bound(Be,Ce)}(t.startAt));let De=null;return t.endAt&&(De=function(Oe){const Ce=!Oe.before,Be=Oe.values||[];return new Bound(Be,Ce)}(t.endAt)),__PRIVATE_newQuery(e,Ee,Re,Te,Me,"F",Ve,De)}function __PRIVATE_toListenRequestLabels(n,e){const t=function(Ee){switch(Ee){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fail(28987,{purpose:Ee})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function __PRIVATE_fromFilter(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=__PRIVATE_fromFieldPathReference(t.unaryFilter.field);return FieldFilter.create(r,"==",{doubleValue:NaN});case"IS_NULL":const Ee=__PRIVATE_fromFieldPathReference(t.unaryFilter.field);return FieldFilter.create(Ee,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const Te=__PRIVATE_fromFieldPathReference(t.unaryFilter.field);return FieldFilter.create(Te,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const Re=__PRIVATE_fromFieldPathReference(t.unaryFilter.field);return FieldFilter.create(Re,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fail(61313);default:return fail(60726)}}(n):n.fieldFilter!==void 0?function(t){return FieldFilter.create(__PRIVATE_fromFieldPathReference(t.fieldFilter.field),function(Ee){switch(Ee){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fail(58110);default:return fail(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return CompositeFilter.create(t.compositeFilter.filters.map(r=>__PRIVATE_fromFilter(r)),function(Ee){switch(Ee){case"AND":return"and";case"OR":return"or";default:return fail(1026)}}(t.compositeFilter.op))}(n):fail(30097,{filter:n})}function __PRIVATE_toDirection(n){return wt$1[n]}function __PRIVATE_toOperatorName(n){return St[n]}function __PRIVATE_toCompositeOperatorName(n){return bt$1[n]}function __PRIVATE_toFieldPathReference(n){return{fieldPath:n.canonicalString()}}function __PRIVATE_fromFieldPathReference(n){return FieldPath$1.fromServerFormat(n.fieldPath)}function __PRIVATE_toFilter(n){return n instanceof FieldFilter?function(t){if(t.op==="=="){if(__PRIVATE_isNanValue(t.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(t.field),op:"IS_NAN"}};if(__PRIVATE_isNullValue(t.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(__PRIVATE_isNanValue(t.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(t.field),op:"IS_NOT_NAN"}};if(__PRIVATE_isNullValue(t.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:__PRIVATE_toFieldPathReference(t.field),op:__PRIVATE_toOperatorName(t.op),value:t.value}}}(n):n instanceof CompositeFilter?function(t){const r=t.getFilters().map(Ee=>__PRIVATE_toFilter(Ee));return r.length===1?r[0]:{compositeFilter:{op:__PRIVATE_toCompositeOperatorName(t.op),filters:r}}}(n):fail(54877,{filter:n})}function __PRIVATE_toDocumentMask(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function __PRIVATE_isValidResourceName(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TargetData{constructor(e,t,r,Ee,Te=SnapshotVersion.min(),Re=SnapshotVersion.min(),Me=ByteString.EMPTY_BYTE_STRING,Ve=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=Ee,this.snapshotVersion=Te,this.lastLimboFreeSnapshotVersion=Re,this.resumeToken=Me,this.expectedCount=Ve}withSequenceNumber(e){return new TargetData(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalSerializer{constructor(e){this.gt=e}}function __PRIVATE_fromBundledQuery(n){const e=__PRIVATE_convertQueryTargetToQuery({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?__PRIVATE_queryWithLimit(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryIndexManager{constructor(){this.Dn=new __PRIVATE_MemoryCollectionParentIndex}addToCollectionParentIndex(e,t){return this.Dn.add(t),PersistencePromise.resolve()}getCollectionParents(e,t){return PersistencePromise.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return PersistencePromise.resolve()}deleteFieldIndex(e,t){return PersistencePromise.resolve()}deleteAllFieldIndexes(e){return PersistencePromise.resolve()}createTargetIndexes(e,t){return PersistencePromise.resolve()}getDocumentsMatchingTarget(e,t){return PersistencePromise.resolve(null)}getIndexType(e,t){return PersistencePromise.resolve(0)}getFieldIndexes(e,t){return PersistencePromise.resolve([])}getNextCollectionGroupToUpdate(e){return PersistencePromise.resolve(null)}getMinOffset(e,t){return PersistencePromise.resolve(IndexOffset.min())}getMinOffsetFromCollectionGroup(e,t){return PersistencePromise.resolve(IndexOffset.min())}updateCollectionGroup(e,t,r){return PersistencePromise.resolve()}updateIndexEntries(e,t){return PersistencePromise.resolve()}}class __PRIVATE_MemoryCollectionParentIndex{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),Ee=this.index[t]||new SortedSet(ResourcePath.comparator),Te=!Ee.has(r);return this.index[t]=Ee.add(r),Te}has(e){const t=e.lastSegment(),r=e.popLast(),Ee=this.index[t];return Ee&&Ee.has(r)}getEntries(e){return(this.index[e]||new SortedSet(ResourcePath.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft$1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Mt$1=41943040;class LruParams{static withCacheSize(e){return new LruParams(e,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */LruParams.DEFAULT_COLLECTION_PERCENTILE=10,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,LruParams.DEFAULT=new LruParams(Mt$1,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),LruParams.DISABLED=new LruParams(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetIdGenerator{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new __PRIVATE_TargetIdGenerator(0)}static ur(){return new __PRIVATE_TargetIdGenerator(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt$1="LruGarbageCollector",Ot$1=1048576;function __PRIVATE_bufferEntryComparator([n,e],[t,r]){const Ee=__PRIVATE_primitiveComparator(n,t);return Ee===0?__PRIVATE_primitiveComparator(e,r):Ee}class __PRIVATE_RollingSequenceNumberBuffer{constructor(e){this.Tr=e,this.buffer=new SortedSet(__PRIVATE_bufferEntryComparator),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();__PRIVATE_bufferEntryComparator(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class __PRIVATE_LruScheduler{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){__PRIVATE_logDebug(xt$1,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){__PRIVATE_isIndexedDbTransactionError(t)?__PRIVATE_logDebug(xt$1,"Ignoring IndexedDB error during garbage collection: ",t):await __PRIVATE_ignoreIfPrimaryLeaseLoss(t)}await this.Rr(3e5)})}}class __PRIVATE_LruGarbageCollectorImpl{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return PersistencePromise.resolve(__PRIVATE_ListenSequence.ue);const r=new __PRIVATE_RollingSequenceNumberBuffer(t);return this.Vr.forEachTarget(e,Ee=>r.Er(Ee.sequenceNumber)).next(()=>this.Vr.gr(e,Ee=>r.Er(Ee))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(__PRIVATE_logDebug("LruGarbageCollector","Garbage collection skipped; disabled"),PersistencePromise.resolve(Ft$1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(__PRIVATE_logDebug("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ft$1):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,Ee,Te,Re,Me,Ve,De;const $e=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Oe=>(Oe>this.params.maximumSequenceNumbersToCollect?(__PRIVATE_logDebug("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Oe}`),Ee=this.params.maximumSequenceNumbersToCollect):Ee=Oe,Re=Date.now(),this.nthSequenceNumber(e,Ee))).next(Oe=>(r=Oe,Me=Date.now(),this.removeTargets(e,r,t))).next(Oe=>(Te=Oe,Ve=Date.now(),this.removeOrphanedDocuments(e,r))).next(Oe=>(De=Date.now(),__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${Re-$e}ms
	Determined least recently used ${Ee} in `+(Me-Re)+`ms
	Removed ${Te} targets in `+(Ve-Me)+`ms
	Removed ${Oe} documents in `+(De-Ve)+`ms
Total Duration: ${De-$e}ms`),PersistencePromise.resolve({didRun:!0,sequenceNumbersCollected:Ee,targetsRemoved:Te,documentsRemoved:Oe})))}}function __PRIVATE_newLruGarbageCollector(n,e){return new __PRIVATE_LruGarbageCollectorImpl(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteDocumentChangeBuffer{constructor(){this.changes=new ObjectMap(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,MutableDocument.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?PersistencePromise.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OverlayedDocument{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LocalDocumentsView{constructor(e,t,r,Ee){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=Ee}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(Ee=>(r=Ee,this.remoteDocumentCache.getEntry(e,t))).next(Ee=>(r!==null&&__PRIVATE_mutationApplyToLocalView(r.mutation,Ee,FieldMask.empty(),Timestamp.now()),Ee))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,__PRIVATE_documentKeySet()).next(()=>r))}getLocalViewOfDocuments(e,t,r=__PRIVATE_documentKeySet()){const Ee=__PRIVATE_newOverlayMap();return this.populateOverlays(e,Ee,t).next(()=>this.computeViews(e,t,Ee,r).next(Te=>{let Re=documentMap();return Te.forEach((Me,Ve)=>{Re=Re.insert(Me,Ve.overlayedDocument)}),Re}))}getOverlayedDocuments(e,t){const r=__PRIVATE_newOverlayMap();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,__PRIVATE_documentKeySet()))}populateOverlays(e,t,r){const Ee=[];return r.forEach(Te=>{t.has(Te)||Ee.push(Te)}),this.documentOverlayCache.getOverlays(e,Ee).next(Te=>{Te.forEach((Re,Me)=>{t.set(Re,Me)})})}computeViews(e,t,r,Ee){let Te=__PRIVATE_mutableDocumentMap();const Re=__PRIVATE_newDocumentKeyMap(),Me=function(){return __PRIVATE_newDocumentKeyMap()}();return t.forEach((Ve,De)=>{const $e=r.get(De.key);Ee.has(De.key)&&($e===void 0||$e.mutation instanceof __PRIVATE_PatchMutation)?Te=Te.insert(De.key,De):$e!==void 0?(Re.set(De.key,$e.mutation.getFieldMask()),__PRIVATE_mutationApplyToLocalView($e.mutation,De,$e.mutation.getFieldMask(),Timestamp.now())):Re.set(De.key,FieldMask.empty())}),this.recalculateAndSaveOverlays(e,Te).next(Ve=>(Ve.forEach((De,$e)=>Re.set(De,$e)),t.forEach((De,$e)=>{var Oe;return Me.set(De,new OverlayedDocument($e,(Oe=Re.get(De))!==null&&Oe!==void 0?Oe:null))}),Me))}recalculateAndSaveOverlays(e,t){const r=__PRIVATE_newDocumentKeyMap();let Ee=new SortedMap((Re,Me)=>Re-Me),Te=__PRIVATE_documentKeySet();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(Re=>{for(const Me of Re)Me.keys().forEach(Ve=>{const De=t.get(Ve);if(De===null)return;let $e=r.get(Ve)||FieldMask.empty();$e=Me.applyToLocalView(De,$e),r.set(Ve,$e);const Oe=(Ee.get(Me.batchId)||__PRIVATE_documentKeySet()).add(Ve);Ee=Ee.insert(Me.batchId,Oe)})}).next(()=>{const Re=[],Me=Ee.getReverseIterator();for(;Me.hasNext();){const Ve=Me.getNext(),De=Ve.key,$e=Ve.value,Oe=__PRIVATE_newMutationMap();$e.forEach(Ce=>{if(!Te.has(Ce)){const Be=__PRIVATE_calculateOverlayMutation(t.get(Ce),r.get(Ce));Be!==null&&Oe.set(Ce,Be),Te=Te.add(Ce)}}),Re.push(this.documentOverlayCache.saveOverlays(e,De,Oe))}return PersistencePromise.waitFor(Re)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,Ee){return function(Re){return DocumentKey.isDocumentKey(Re.path)&&Re.collectionGroup===null&&Re.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):__PRIVATE_isCollectionGroupQuery(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,Ee):this.getDocumentsMatchingCollectionQuery(e,t,r,Ee)}getNextDocuments(e,t,r,Ee){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,Ee).next(Te=>{const Re=Ee-Te.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,Ee-Te.size):PersistencePromise.resolve(__PRIVATE_newOverlayMap());let Me=Q$1,Ve=Te;return Re.next(De=>PersistencePromise.forEach(De,($e,Oe)=>(Me<Oe.largestBatchId&&(Me=Oe.largestBatchId),Te.get($e)?PersistencePromise.resolve():this.remoteDocumentCache.getEntry(e,$e).next(Ce=>{Ve=Ve.insert($e,Ce)}))).next(()=>this.populateOverlays(e,De,Te)).next(()=>this.computeViews(e,Ve,De,__PRIVATE_documentKeySet())).next($e=>({batchId:Me,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap($e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new DocumentKey(t)).next(r=>{let Ee=documentMap();return r.isFoundDocument()&&(Ee=Ee.insert(r.key,r)),Ee})}getDocumentsMatchingCollectionGroupQuery(e,t,r,Ee){const Te=t.collectionGroup;let Re=documentMap();return this.indexManager.getCollectionParents(e,Te).next(Me=>PersistencePromise.forEach(Me,Ve=>{const De=function(Oe,Ce){return new __PRIVATE_QueryImpl(Ce,null,Oe.explicitOrderBy.slice(),Oe.filters.slice(),Oe.limit,Oe.limitType,Oe.startAt,Oe.endAt)}(t,Ve.child(Te));return this.getDocumentsMatchingCollectionQuery(e,De,r,Ee).next($e=>{$e.forEach((Oe,Ce)=>{Re=Re.insert(Oe,Ce)})})}).next(()=>Re))}getDocumentsMatchingCollectionQuery(e,t,r,Ee){let Te;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(Re=>(Te=Re,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,Te,Ee))).next(Re=>{Te.forEach((Ve,De)=>{const $e=De.getKey();Re.get($e)===null&&(Re=Re.insert($e,MutableDocument.newInvalidDocument($e)))});let Me=documentMap();return Re.forEach((Ve,De)=>{const $e=Te.get(Ve);$e!==void 0&&__PRIVATE_mutationApplyToLocalView($e.mutation,De,FieldMask.empty(),Timestamp.now()),__PRIVATE_queryMatches(t,De)&&(Me=Me.insert(Ve,De))}),Me})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryBundleCache{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return PersistencePromise.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(Ee){return{id:Ee.id,version:Ee.version,createTime:__PRIVATE_fromVersion(Ee.createTime)}}(t)),PersistencePromise.resolve()}getNamedQuery(e,t){return PersistencePromise.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(Ee){return{name:Ee.name,query:__PRIVATE_fromBundledQuery(Ee.bundledQuery),readTime:__PRIVATE_fromVersion(Ee.readTime)}}(t)),PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryDocumentOverlayCache{constructor(){this.overlays=new SortedMap(DocumentKey.comparator),this.kr=new Map}getOverlay(e,t){return PersistencePromise.resolve(this.overlays.get(t))}getOverlays(e,t){const r=__PRIVATE_newOverlayMap();return PersistencePromise.forEach(t,Ee=>this.getOverlay(e,Ee).next(Te=>{Te!==null&&r.set(Ee,Te)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((Ee,Te)=>{this.wt(e,t,Te)}),PersistencePromise.resolve()}removeOverlaysForBatchId(e,t,r){const Ee=this.kr.get(r);return Ee!==void 0&&(Ee.forEach(Te=>this.overlays=this.overlays.remove(Te)),this.kr.delete(r)),PersistencePromise.resolve()}getOverlaysForCollection(e,t,r){const Ee=__PRIVATE_newOverlayMap(),Te=t.length+1,Re=new DocumentKey(t.child("")),Me=this.overlays.getIteratorFrom(Re);for(;Me.hasNext();){const Ve=Me.getNext().value,De=Ve.getKey();if(!t.isPrefixOf(De.path))break;De.path.length===Te&&Ve.largestBatchId>r&&Ee.set(Ve.getKey(),Ve)}return PersistencePromise.resolve(Ee)}getOverlaysForCollectionGroup(e,t,r,Ee){let Te=new SortedMap((De,$e)=>De-$e);const Re=this.overlays.getIterator();for(;Re.hasNext();){const De=Re.getNext().value;if(De.getKey().getCollectionGroup()===t&&De.largestBatchId>r){let $e=Te.get(De.largestBatchId);$e===null&&($e=__PRIVATE_newOverlayMap(),Te=Te.insert(De.largestBatchId,$e)),$e.set(De.getKey(),De)}}const Me=__PRIVATE_newOverlayMap(),Ve=Te.getIterator();for(;Ve.hasNext()&&(Ve.getNext().value.forEach((De,$e)=>Me.set(De,$e)),!(Me.size()>=Ee)););return PersistencePromise.resolve(Me)}wt(e,t,r){const Ee=this.overlays.get(r.key);if(Ee!==null){const Re=this.kr.get(Ee.largestBatchId).delete(r.key);this.kr.set(Ee.largestBatchId,Re)}this.overlays=this.overlays.insert(r.key,new Overlay(t,r));let Te=this.kr.get(t);Te===void 0&&(Te=__PRIVATE_documentKeySet(),this.kr.set(t,Te)),this.kr.set(t,Te.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryGlobalsCache{constructor(){this.sessionToken=ByteString.EMPTY_BYTE_STRING}getSessionToken(e){return PersistencePromise.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ReferenceSet{constructor(){this.qr=new SortedSet(__PRIVATE_DocReference.Qr),this.$r=new SortedSet(__PRIVATE_DocReference.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new __PRIVATE_DocReference(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new __PRIVATE_DocReference(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){const t=new DocumentKey(new ResourcePath([])),r=new __PRIVATE_DocReference(t,e),Ee=new __PRIVATE_DocReference(t,e+1),Te=[];return this.$r.forEachInRange([r,Ee],Re=>{this.Wr(Re),Te.push(Re.key)}),Te}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new DocumentKey(new ResourcePath([])),r=new __PRIVATE_DocReference(t,e),Ee=new __PRIVATE_DocReference(t,e+1);let Te=__PRIVATE_documentKeySet();return this.$r.forEachInRange([r,Ee],Re=>{Te=Te.add(Re.key)}),Te}containsKey(e){const t=new __PRIVATE_DocReference(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class __PRIVATE_DocReference{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return DocumentKey.comparator(e.key,t.key)||__PRIVATE_primitiveComparator(e.Hr,t.Hr)}static Ur(e,t){return __PRIVATE_primitiveComparator(e.Hr,t.Hr)||DocumentKey.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryMutationQueue{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new SortedSet(__PRIVATE_DocReference.Qr)}checkEmpty(e){return PersistencePromise.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,Ee){const Te=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const Re=new MutationBatch(Te,t,r,Ee);this.mutationQueue.push(Re);for(const Me of Ee)this.Yr=this.Yr.add(new __PRIVATE_DocReference(Me.key,Te)),this.indexManager.addToCollectionParentIndex(e,Me.key.path.popLast());return PersistencePromise.resolve(Re)}lookupMutationBatch(e,t){return PersistencePromise.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,Ee=this.Xr(r),Te=Ee<0?0:Ee;return PersistencePromise.resolve(this.mutationQueue.length>Te?this.mutationQueue[Te]:null)}getHighestUnacknowledgedBatchId(){return PersistencePromise.resolve(this.mutationQueue.length===0?G$1:this.er-1)}getAllMutationBatches(e){return PersistencePromise.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new __PRIVATE_DocReference(t,0),Ee=new __PRIVATE_DocReference(t,Number.POSITIVE_INFINITY),Te=[];return this.Yr.forEachInRange([r,Ee],Re=>{const Me=this.Zr(Re.Hr);Te.push(Me)}),PersistencePromise.resolve(Te)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new SortedSet(__PRIVATE_primitiveComparator);return t.forEach(Ee=>{const Te=new __PRIVATE_DocReference(Ee,0),Re=new __PRIVATE_DocReference(Ee,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([Te,Re],Me=>{r=r.add(Me.Hr)})}),PersistencePromise.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,Ee=r.length+1;let Te=r;DocumentKey.isDocumentKey(Te)||(Te=Te.child(""));const Re=new __PRIVATE_DocReference(new DocumentKey(Te),0);let Me=new SortedSet(__PRIVATE_primitiveComparator);return this.Yr.forEachWhile(Ve=>{const De=Ve.key.path;return!!r.isPrefixOf(De)&&(De.length===Ee&&(Me=Me.add(Ve.Hr)),!0)},Re),PersistencePromise.resolve(this.ei(Me))}ei(e){const t=[];return e.forEach(r=>{const Ee=this.Zr(r);Ee!==null&&t.push(Ee)}),t}removeMutationBatch(e,t){__PRIVATE_hardAssert(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return PersistencePromise.forEach(t.mutations,Ee=>{const Te=new __PRIVATE_DocReference(Ee.key,t.batchId);return r=r.delete(Te),this.referenceDelegate.markPotentiallyOrphaned(e,Ee.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){const r=new __PRIVATE_DocReference(t,0),Ee=this.Yr.firstAfterOrEqual(r);return PersistencePromise.resolve(t.isEqual(Ee&&Ee.key))}performConsistencyCheck(e){return this.mutationQueue.length,PersistencePromise.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryRemoteDocumentCacheImpl{constructor(e){this.ni=e,this.docs=function(){return new SortedMap(DocumentKey.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,Ee=this.docs.get(r),Te=Ee?Ee.size:0,Re=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:Re}),this.size+=Re-Te,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return PersistencePromise.resolve(r?r.document.mutableCopy():MutableDocument.newInvalidDocument(t))}getEntries(e,t){let r=__PRIVATE_mutableDocumentMap();return t.forEach(Ee=>{const Te=this.docs.get(Ee);r=r.insert(Ee,Te?Te.document.mutableCopy():MutableDocument.newInvalidDocument(Ee))}),PersistencePromise.resolve(r)}getDocumentsMatchingQuery(e,t,r,Ee){let Te=__PRIVATE_mutableDocumentMap();const Re=t.path,Me=new DocumentKey(Re.child("__id-9223372036854775808__")),Ve=this.docs.getIteratorFrom(Me);for(;Ve.hasNext();){const{key:De,value:{document:$e}}=Ve.getNext();if(!Re.isPrefixOf(De.path))break;De.path.length>Re.length+1||__PRIVATE_indexOffsetComparator(__PRIVATE_newIndexOffsetFromDocument($e),r)<=0||(Ee.has($e.key)||__PRIVATE_queryMatches(t,$e))&&(Te=Te.insert($e.key,$e.mutableCopy()))}return PersistencePromise.resolve(Te)}getAllFromCollectionGroup(e,t,r,Ee){fail(9500)}ri(e,t){return PersistencePromise.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new __PRIVATE_MemoryRemoteDocumentChangeBuffer(this)}getSize(e){return PersistencePromise.resolve(this.size)}}class __PRIVATE_MemoryRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((r,Ee)=>{Ee.isValidDocument()?t.push(this.Or.addEntry(e,Ee)):this.Or.removeEntry(r)}),PersistencePromise.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryTargetCache{constructor(e){this.persistence=e,this.ii=new ObjectMap(t=>__PRIVATE_canonifyTarget(t),__PRIVATE_targetEquals),this.lastRemoteSnapshotVersion=SnapshotVersion.min(),this.highestTargetId=0,this.si=0,this.oi=new __PRIVATE_ReferenceSet,this.targetCount=0,this._i=__PRIVATE_TargetIdGenerator.ar()}forEachTarget(e,t){return this.ii.forEach((r,Ee)=>t(Ee)),PersistencePromise.resolve()}getLastRemoteSnapshotVersion(e){return PersistencePromise.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return PersistencePromise.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),PersistencePromise.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),PersistencePromise.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new __PRIVATE_TargetIdGenerator(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,PersistencePromise.resolve()}updateTargetData(e,t){return this.hr(t),PersistencePromise.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,PersistencePromise.resolve()}removeTargets(e,t,r){let Ee=0;const Te=[];return this.ii.forEach((Re,Me)=>{Me.sequenceNumber<=t&&r.get(Me.targetId)===null&&(this.ii.delete(Re),Te.push(this.removeMatchingKeysForTargetId(e,Me.targetId)),Ee++)}),PersistencePromise.waitFor(Te).next(()=>Ee)}getTargetCount(e){return PersistencePromise.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return PersistencePromise.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),PersistencePromise.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const Ee=this.persistence.referenceDelegate,Te=[];return Ee&&t.forEach(Re=>{Te.push(Ee.markPotentiallyOrphaned(e,Re))}),PersistencePromise.waitFor(Te)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),PersistencePromise.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return PersistencePromise.resolve(r)}containsKey(e,t){return PersistencePromise.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryPersistence{constructor(e,t){this.ai={},this.overlays={},this.ui=new __PRIVATE_ListenSequence(0),this.ci=!1,this.ci=!0,this.li=new __PRIVATE_MemoryGlobalsCache,this.referenceDelegate=e(this),this.hi=new __PRIVATE_MemoryTargetCache(this),this.indexManager=new __PRIVATE_MemoryIndexManager,this.remoteDocumentCache=function(Ee){return new __PRIVATE_MemoryRemoteDocumentCacheImpl(Ee)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new __PRIVATE_LocalSerializer(t),this.Ti=new __PRIVATE_MemoryBundleCache(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new __PRIVATE_MemoryDocumentOverlayCache,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new __PRIVATE_MemoryMutationQueue(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){__PRIVATE_logDebug("MemoryPersistence","Starting transaction:",e);const Ee=new __PRIVATE_MemoryTransaction(this.ui.next());return this.referenceDelegate.Ii(),r(Ee).next(Te=>this.referenceDelegate.di(Ee).next(()=>Te)).toPromise().then(Te=>(Ee.raiseOnCommittedEvent(),Te))}Ei(e,t){return PersistencePromise.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}}class __PRIVATE_MemoryTransaction extends PersistenceTransaction{constructor(e){super(),this.currentSequenceNumber=e}}class __PRIVATE_MemoryEagerDelegate{constructor(e){this.persistence=e,this.Ai=new __PRIVATE_ReferenceSet,this.Ri=null}static Vi(e){return new __PRIVATE_MemoryEagerDelegate(e)}get mi(){if(this.Ri)return this.Ri;throw fail(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),PersistencePromise.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),PersistencePromise.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),PersistencePromise.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(Ee=>this.mi.add(Ee.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(Ee=>{Ee.forEach(Te=>this.mi.add(Te.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PersistencePromise.forEach(this.mi,r=>{const Ee=DocumentKey.fromPath(r);return this.fi(e,Ee).next(Te=>{Te||t.removeEntry(Ee,SnapshotVersion.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return PersistencePromise.or([()=>PersistencePromise.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class __PRIVATE_MemoryLruDelegate{constructor(e,t){this.persistence=e,this.gi=new ObjectMap(r=>__PRIVATE_encodeResourcePath(r.path),(r,Ee)=>r.isEqual(Ee)),this.garbageCollector=__PRIVATE_newLruGarbageCollector(this,t)}static Vi(e,t){return new __PRIVATE_MemoryLruDelegate(e,t)}Ii(){}di(e){return PersistencePromise.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(Ee=>r+Ee))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return PersistencePromise.forEach(this.gi,(r,Ee)=>this.Sr(e,r,Ee).next(Te=>Te?PersistencePromise.resolve():t(Ee)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const Ee=this.persistence.getRemoteDocumentCache(),Te=Ee.newChangeBuffer();return Ee.ri(e,Re=>this.Sr(e,Re,t).next(Me=>{Me||(r++,Te.removeEntry(Re,SnapshotVersion.min()))})).next(()=>Te.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),PersistencePromise.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),PersistencePromise.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),PersistencePromise.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),PersistencePromise.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=__PRIVATE_estimateByteSize(e.data.value)),t}Sr(e,t,r){return PersistencePromise.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const Ee=this.gi.get(t);return PersistencePromise.resolve(Ee!==void 0&&Ee>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalViewChanges{constructor(e,t,r,Ee){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=Ee}static Es(e,t){let r=__PRIVATE_documentKeySet(),Ee=__PRIVATE_documentKeySet();for(const Te of t.docChanges)switch(Te.type){case 0:r=r.add(Te.doc.key);break;case 1:Ee=Ee.add(Te.doc.key)}return new __PRIVATE_LocalViewChanges(e,t.fromCache,r,Ee)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryContext{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryEngine{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return isSafari()?8:__PRIVATE_getAndroidVersion(getUA())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,Ee){const Te={result:null};return this.ps(e,t).next(Re=>{Te.result=Re}).next(()=>{if(!Te.result)return this.ys(e,t,Ee,r).next(Re=>{Te.result=Re})}).next(()=>{if(Te.result)return;const Re=new QueryContext;return this.ws(e,t,Re).next(Me=>{if(Te.result=Me,this.Rs)return this.Ss(e,t,Re,Me.size)})}).next(()=>Te.result)}Ss(e,t,r,Ee){return r.documentReadCount<this.Vs?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","SDK will not create cache indexes for query:",__PRIVATE_stringifyQuery(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),PersistencePromise.resolve()):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Query:",__PRIVATE_stringifyQuery(t),"scans",r.documentReadCount,"local documents and returns",Ee,"documents as results."),r.documentReadCount>this.fs*Ee?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","The SDK decides to create cache indexes for query:",__PRIVATE_stringifyQuery(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,__PRIVATE_queryToTarget(t))):PersistencePromise.resolve())}ps(e,t){if(__PRIVATE_queryMatchesAllDocuments(t))return PersistencePromise.resolve(null);let r=__PRIVATE_queryToTarget(t);return this.indexManager.getIndexType(e,r).next(Ee=>Ee===0?null:(t.limit!==null&&Ee===1&&(t=__PRIVATE_queryWithLimit(t,null,"F"),r=__PRIVATE_queryToTarget(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(Te=>{const Re=__PRIVATE_documentKeySet(...Te);return this.gs.getDocuments(e,Re).next(Me=>this.indexManager.getMinOffset(e,r).next(Ve=>{const De=this.bs(t,Me);return this.Ds(t,De,Re,Ve.readTime)?this.ps(e,__PRIVATE_queryWithLimit(t,null,"F")):this.vs(e,De,t,Ve)}))})))}ys(e,t,r,Ee){return __PRIVATE_queryMatchesAllDocuments(t)||Ee.isEqual(SnapshotVersion.min())?PersistencePromise.resolve(null):this.gs.getDocuments(e,r).next(Te=>{const Re=this.bs(t,Te);return this.Ds(t,Re,r,Ee)?PersistencePromise.resolve(null):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Re-using previous result from %s to execute query: %s",Ee.toString(),__PRIVATE_stringifyQuery(t)),this.vs(e,Re,t,__PRIVATE_newIndexOffsetSuccessorFromReadTime(Ee,Q$1)).next(Me=>Me))})}bs(e,t){let r=new SortedSet(__PRIVATE_newQueryComparator(e));return t.forEach((Ee,Te)=>{__PRIVATE_queryMatches(e,Te)&&(r=r.add(Te))}),r}Ds(e,t,r,Ee){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const Te=e.limitType==="F"?t.last():t.first();return!!Te&&(Te.hasPendingWrites||Te.version.compareTo(Ee)>0)}ws(e,t,r){return __PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Using full collection scan to execute query:",__PRIVATE_stringifyQuery(t)),this.gs.getDocumentsMatchingQuery(e,t,IndexOffset.min(),r)}vs(e,t,r,Ee){return this.gs.getDocumentsMatchingQuery(e,r,Ee).next(Te=>(t.forEach(Re=>{Te=Te.insert(Re.key,Re)}),Te))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt$1="LocalStore",$t$1=3e8;class __PRIVATE_LocalStoreImpl{constructor(e,t,r,Ee){this.persistence=e,this.Cs=t,this.serializer=Ee,this.Fs=new SortedMap(__PRIVATE_primitiveComparator),this.Ms=new ObjectMap(Te=>__PRIVATE_canonifyTarget(Te),__PRIVATE_targetEquals),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LocalDocumentsView(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function __PRIVATE_newLocalStore(n,e,t,r){return new __PRIVATE_LocalStoreImpl(n,e,t,r)}async function __PRIVATE_localStoreHandleUserChange(n,e){const t=__PRIVATE_debugCast(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let Ee;return t.mutationQueue.getAllMutationBatches(r).next(Te=>(Ee=Te,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(Te=>{const Re=[],Me=[];let Ve=__PRIVATE_documentKeySet();for(const De of Ee){Re.push(De.batchId);for(const $e of De.mutations)Ve=Ve.add($e.key)}for(const De of Te){Me.push(De.batchId);for(const $e of De.mutations)Ve=Ve.add($e.key)}return t.localDocuments.getDocuments(r,Ve).next(De=>({Bs:De,removedBatchIds:Re,addedBatchIds:Me}))})})}function __PRIVATE_localStoreAcknowledgeBatch(n,e){const t=__PRIVATE_debugCast(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const Ee=e.batch.keys(),Te=t.Os.newChangeBuffer({trackRemovals:!0});return function(Me,Ve,De,$e){const Oe=De.batch,Ce=Oe.keys();let Be=PersistencePromise.resolve();return Ce.forEach(Ue=>{Be=Be.next(()=>$e.getEntry(Ve,Ue)).next(We=>{const He=De.docVersions.get(Ue);__PRIVATE_hardAssert(He!==null,48541),We.version.compareTo(He)<0&&(Oe.applyToRemoteDocument(We,De),We.isValidDocument()&&(We.setReadTime(De.commitVersion),$e.addEntry(We)))})}),Be.next(()=>Me.mutationQueue.removeMutationBatch(Ve,Oe))}(t,r,e,Te).next(()=>Te.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,Ee,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(Me){let Ve=__PRIVATE_documentKeySet();for(let De=0;De<Me.mutationResults.length;++De)Me.mutationResults[De].transformResults.length>0&&(Ve=Ve.add(Me.batch.mutations[De].key));return Ve}(e))).next(()=>t.localDocuments.getDocuments(r,Ee))})}function __PRIVATE_localStoreGetLastRemoteSnapshotVersion(n){const e=__PRIVATE_debugCast(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function __PRIVATE_localStoreApplyRemoteEventToLocalCache(n,e){const t=__PRIVATE_debugCast(n),r=e.snapshotVersion;let Ee=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",Te=>{const Re=t.Os.newChangeBuffer({trackRemovals:!0});Ee=t.Fs;const Me=[];e.targetChanges.forEach(($e,Oe)=>{const Ce=Ee.get(Oe);if(!Ce)return;Me.push(t.hi.removeMatchingKeys(Te,$e.removedDocuments,Oe).next(()=>t.hi.addMatchingKeys(Te,$e.addedDocuments,Oe)));let Be=Ce.withSequenceNumber(Te.currentSequenceNumber);e.targetMismatches.get(Oe)!==null?Be=Be.withResumeToken(ByteString.EMPTY_BYTE_STRING,SnapshotVersion.min()).withLastLimboFreeSnapshotVersion(SnapshotVersion.min()):$e.resumeToken.approximateByteSize()>0&&(Be=Be.withResumeToken($e.resumeToken,r)),Ee=Ee.insert(Oe,Be),function(We,He,Ge){return We.resumeToken.approximateByteSize()===0||He.snapshotVersion.toMicroseconds()-We.snapshotVersion.toMicroseconds()>=$t$1?!0:Ge.addedDocuments.size+Ge.modifiedDocuments.size+Ge.removedDocuments.size>0}(Ce,Be,$e)&&Me.push(t.hi.updateTargetData(Te,Be))});let Ve=__PRIVATE_mutableDocumentMap(),De=__PRIVATE_documentKeySet();if(e.documentUpdates.forEach($e=>{e.resolvedLimboDocuments.has($e)&&Me.push(t.persistence.referenceDelegate.updateLimboDocument(Te,$e))}),Me.push(__PRIVATE_populateDocumentChangeBuffer(Te,Re,e.documentUpdates).next($e=>{Ve=$e.Ls,De=$e.ks})),!r.isEqual(SnapshotVersion.min())){const $e=t.hi.getLastRemoteSnapshotVersion(Te).next(Oe=>t.hi.setTargetsMetadata(Te,Te.currentSequenceNumber,r));Me.push($e)}return PersistencePromise.waitFor(Me).next(()=>Re.apply(Te)).next(()=>t.localDocuments.getLocalViewOfDocuments(Te,Ve,De)).next(()=>Ve)}).then(Te=>(t.Fs=Ee,Te))}function __PRIVATE_populateDocumentChangeBuffer(n,e,t){let r=__PRIVATE_documentKeySet(),Ee=__PRIVATE_documentKeySet();return t.forEach(Te=>r=r.add(Te)),e.getEntries(n,r).next(Te=>{let Re=__PRIVATE_mutableDocumentMap();return t.forEach((Me,Ve)=>{const De=Te.get(Me);Ve.isFoundDocument()!==De.isFoundDocument()&&(Ee=Ee.add(Me)),Ve.isNoDocument()&&Ve.version.isEqual(SnapshotVersion.min())?(e.removeEntry(Me,Ve.readTime),Re=Re.insert(Me,Ve)):!De.isValidDocument()||Ve.version.compareTo(De.version)>0||Ve.version.compareTo(De.version)===0&&De.hasPendingWrites?(e.addEntry(Ve),Re=Re.insert(Me,Ve)):__PRIVATE_logDebug(Qt$1,"Ignoring outdated watch update for ",Me,". Current version:",De.version," Watch version:",Ve.version)}),{Ls:Re,ks:Ee}})}function __PRIVATE_localStoreGetNextMutationBatch(n,e){const t=__PRIVATE_debugCast(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=G$1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function __PRIVATE_localStoreAllocateTarget(n,e){const t=__PRIVATE_debugCast(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let Ee;return t.hi.getTargetData(r,e).next(Te=>Te?(Ee=Te,PersistencePromise.resolve(Ee)):t.hi.allocateTargetId(r).next(Re=>(Ee=new TargetData(e,Re,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,Ee).next(()=>Ee))))}).then(r=>{const Ee=t.Fs.get(r.targetId);return(Ee===null||r.snapshotVersion.compareTo(Ee.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function __PRIVATE_localStoreReleaseTarget(n,e,t){const r=__PRIVATE_debugCast(n),Ee=r.Fs.get(e),Te=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",Te,Re=>r.persistence.referenceDelegate.removeTarget(Re,Ee))}catch(Re){if(!__PRIVATE_isIndexedDbTransactionError(Re))throw Re;__PRIVATE_logDebug(Qt$1,`Failed to update sequence numbers for target ${e}: ${Re}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(Ee.target)}function __PRIVATE_localStoreExecuteQuery(n,e,t){const r=__PRIVATE_debugCast(n);let Ee=SnapshotVersion.min(),Te=__PRIVATE_documentKeySet();return r.persistence.runTransaction("Execute query","readwrite",Re=>function(Ve,De,$e){const Oe=__PRIVATE_debugCast(Ve),Ce=Oe.Ms.get($e);return Ce!==void 0?PersistencePromise.resolve(Oe.Fs.get(Ce)):Oe.hi.getTargetData(De,$e)}(r,Re,__PRIVATE_queryToTarget(e)).next(Me=>{if(Me)return Ee=Me.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(Re,Me.targetId).next(Ve=>{Te=Ve})}).next(()=>r.Cs.getDocumentsMatchingQuery(Re,e,t?Ee:SnapshotVersion.min(),t?Te:__PRIVATE_documentKeySet())).next(Me=>(__PRIVATE_setMaxReadTime(r,__PRIVATE_queryCollectionGroup(e),Me),{documents:Me,qs:Te})))}function __PRIVATE_setMaxReadTime(n,e,t){let r=n.xs.get(e)||SnapshotVersion.min();t.forEach((Ee,Te)=>{Te.readTime.compareTo(r)>0&&(r=Te.readTime)}),n.xs.set(e,r)}class __PRIVATE_LocalClientState{constructor(){this.activeTargetIds=__PRIVATE_targetIdSet()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class __PRIVATE_MemorySharedClientState{constructor(){this.Fo=new __PRIVATE_LocalClientState,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new __PRIVATE_LocalClientState,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_NoopConnectivityMonitor{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt$1="ConnectivityMonitor";class __PRIVATE_BrowserConnectivityMonitor{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){__PRIVATE_logDebug(zt$1,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){__PRIVATE_logDebug(zt$1,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jt$1=null;function __PRIVATE_generateUniqueDebugId(){return jt$1===null?jt$1=function(){return 268435456+Math.round(2147483648*Math.random())}():jt$1++,"0x"+jt$1.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt$1="RestConnection",Ht$1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class __PRIVATE_RestConnection{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),Ee=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${Ee}`,this.Ko=this.databaseId.database===ut$1?`project_id=${r}`:`project_id=${r}&database_id=${Ee}`}Wo(e,t,r,Ee,Te){const Re=__PRIVATE_generateUniqueDebugId(),Me=this.Go(e,t.toUriEncodedString());__PRIVATE_logDebug(Jt$1,`Sending RPC '${e}' ${Re}:`,Me,r);const Ve={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(Ve,Ee,Te);const{host:De}=new URL(Me),$e=isCloudWorkstation(De);return this.jo(e,Me,Ve,r,$e).then(Oe=>(__PRIVATE_logDebug(Jt$1,`Received RPC '${e}' ${Re}: `,Oe),Oe),Oe=>{throw __PRIVATE_logWarn(Jt$1,`RPC '${e}' ${Re} failed with error: `,Oe,"url: ",Me,"request:",r),Oe})}Jo(e,t,r,Ee,Te,Re){return this.Wo(e,t,r,Ee,Te)}zo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+x$2}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((Ee,Te)=>e[Te]=Ee),r&&r.headers.forEach((Ee,Te)=>e[Te]=Ee)}Go(e,t){const r=Ht$1[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_StreamBridge{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt$1="WebChannelConnection";class __PRIVATE_WebChannelConnection extends __PRIVATE_RestConnection{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,Ee,Te){const Re=__PRIVATE_generateUniqueDebugId();return new Promise((Me,Ve)=>{const De=new XhrIo;De.setWithCredentials(!0),De.listenOnce(EventType.COMPLETE,()=>{try{switch(De.getLastErrorCode()){case ErrorCode.NO_ERROR:const Oe=De.getResponseJson();__PRIVATE_logDebug(Yt$1,`XHR for RPC '${e}' ${Re} received:`,JSON.stringify(Oe)),Me(Oe);break;case ErrorCode.TIMEOUT:__PRIVATE_logDebug(Yt$1,`RPC '${e}' ${Re} timed out`),Ve(new FirestoreError(N$1.DEADLINE_EXCEEDED,"Request time out"));break;case ErrorCode.HTTP_ERROR:const Ce=De.getStatus();if(__PRIVATE_logDebug(Yt$1,`RPC '${e}' ${Re} failed with status:`,Ce,"response text:",De.getResponseText()),Ce>0){let Be=De.getResponseJson();Array.isArray(Be)&&(Be=Be[0]);const Ue=Be?.error;if(Ue&&Ue.status&&Ue.message){const We=function(Ge){const Ye=Ge.toLowerCase().replace(/_/g,"-");return Object.values(N$1).indexOf(Ye)>=0?Ye:N$1.UNKNOWN}(Ue.status);Ve(new FirestoreError(We,Ue.message))}else Ve(new FirestoreError(N$1.UNKNOWN,"Server responded with status "+De.getStatus()))}else Ve(new FirestoreError(N$1.UNAVAILABLE,"Connection failed."));break;default:fail(9055,{c_:e,streamId:Re,l_:De.getLastErrorCode(),h_:De.getLastError()})}}finally{__PRIVATE_logDebug(Yt$1,`RPC '${e}' ${Re} completed.`)}});const $e=JSON.stringify(Ee);__PRIVATE_logDebug(Yt$1,`RPC '${e}' ${Re} sending request:`,Ee),De.send(t,"POST",$e,r,15)})}P_(e,t,r){const Ee=__PRIVATE_generateUniqueDebugId(),Te=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],Re=createWebChannelTransport(),Me=getStatEventTarget(),Ve={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},De=this.longPollingOptions.timeoutSeconds;De!==void 0&&(Ve.longPollingTimeout=Math.round(1e3*De)),this.useFetchStreams&&(Ve.useFetchStreams=!0),this.zo(Ve.initMessageHeaders,t,r),Ve.encodeInitMessageHeaders=!0;const $e=Te.join("");__PRIVATE_logDebug(Yt$1,`Creating RPC '${e}' stream ${Ee}: ${$e}`,Ve);const Oe=Re.createWebChannel($e,Ve);this.T_(Oe);let Ce=!1,Be=!1;const Ue=new __PRIVATE_StreamBridge({Ho:He=>{Be?__PRIVATE_logDebug(Yt$1,`Not sending because RPC '${e}' stream ${Ee} is closed:`,He):(Ce||(__PRIVATE_logDebug(Yt$1,`Opening RPC '${e}' stream ${Ee} transport.`),Oe.open(),Ce=!0),__PRIVATE_logDebug(Yt$1,`RPC '${e}' stream ${Ee} sending:`,He),Oe.send(He))},Yo:()=>Oe.close()}),We=(He,Ge,Ye)=>{He.listen(Ge,Je=>{try{Ye(Je)}catch(Ze){setTimeout(()=>{throw Ze},0)}})};return We(Oe,WebChannel.EventType.OPEN,()=>{Be||(__PRIVATE_logDebug(Yt$1,`RPC '${e}' stream ${Ee} transport opened.`),Ue.s_())}),We(Oe,WebChannel.EventType.CLOSE,()=>{Be||(Be=!0,__PRIVATE_logDebug(Yt$1,`RPC '${e}' stream ${Ee} transport closed`),Ue.__(),this.I_(Oe))}),We(Oe,WebChannel.EventType.ERROR,He=>{Be||(Be=!0,__PRIVATE_logWarn(Yt$1,`RPC '${e}' stream ${Ee} transport errored. Name:`,He.name,"Message:",He.message),Ue.__(new FirestoreError(N$1.UNAVAILABLE,"The operation could not be completed")))}),We(Oe,WebChannel.EventType.MESSAGE,He=>{var Ge;if(!Be){const Ye=He.data[0];__PRIVATE_hardAssert(!!Ye,16349);const Je=Ye,Ze=Je?.error||((Ge=Je[0])===null||Ge===void 0?void 0:Ge.error);if(Ze){__PRIVATE_logDebug(Yt$1,`RPC '${e}' stream ${Ee} received error:`,Ze);const fn=Ze.status;let yn=function(un){const bn=ft$1[un];if(bn!==void 0)return __PRIVATE_mapCodeFromRpcCode(bn)}(fn),mn=Ze.message;yn===void 0&&(yn=N$1.INTERNAL,mn="Unknown error status: "+fn+" with message "+Ze.message),Be=!0,Ue.__(new FirestoreError(yn,mn)),Oe.close()}else __PRIVATE_logDebug(Yt$1,`RPC '${e}' stream ${Ee} received:`,Ye),Ue.a_(Ye)}}),We(Me,Event$1.STAT_EVENT,He=>{He.stat===Stat.PROXY?__PRIVATE_logDebug(Yt$1,`RPC '${e}' stream ${Ee} detected buffering proxy`):He.stat===Stat.NOPROXY&&__PRIVATE_logDebug(Yt$1,`RPC '${e}' stream ${Ee} detected no buffering proxy`)}),setTimeout(()=>{Ue.o_()},0),Ue}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function getDocument(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newSerializer(n){return new JsonProtoSerializer(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ExponentialBackoff{constructor(e,t,r=1e3,Ee=1.5,Te=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=Ee,this.A_=Te,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),Ee=Math.max(0,t-r);Ee>0&&__PRIVATE_logDebug("ExponentialBackoff",`Backing off for ${Ee} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,Ee,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt$1="PersistentStream";class __PRIVATE_PersistentStream{constructor(e,t,r,Ee,Te,Re,Me,Ve){this.Fi=e,this.w_=r,this.S_=Ee,this.connection=Te,this.authCredentialsProvider=Re,this.appCheckCredentialsProvider=Me,this.listener=Ve,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new __PRIVATE_ExponentialBackoff(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===N$1.RESOURCE_EXHAUSTED?(__PRIVATE_logError(t.toString()),__PRIVATE_logError("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===N$1.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,Ee])=>{this.b_===t&&this.W_(r,Ee)},r=>{e(()=>{const Ee=new FirestoreError(N$1.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(Ee)})})}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(Ee=>{r(()=>this.G_(Ee))}),this.stream.onMessage(Ee=>{r(()=>++this.C_==1?this.j_(Ee):this.onNext(Ee))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return __PRIVATE_logDebug(Zt$1,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(__PRIVATE_logDebug(Zt$1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class __PRIVATE_PersistentListenStream extends __PRIVATE_PersistentStream{constructor(e,t,r,Ee,Te,Re){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,Ee,Re),this.serializer=Te}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=__PRIVATE_fromWatchChange(this.serializer,e),r=function(Te){if(!("targetChange"in Te))return SnapshotVersion.min();const Re=Te.targetChange;return Re.targetIds&&Re.targetIds.length?SnapshotVersion.min():Re.readTime?__PRIVATE_fromVersion(Re.readTime):SnapshotVersion.min()}(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=__PRIVATE_getEncodedDatabaseId(this.serializer),t.addTarget=function(Te,Re){let Me;const Ve=Re.target;if(Me=__PRIVATE_targetIsDocumentTarget(Ve)?{documents:__PRIVATE_toDocumentsTarget(Te,Ve)}:{query:__PRIVATE_toQueryTarget(Te,Ve).Vt},Me.targetId=Re.targetId,Re.resumeToken.approximateByteSize()>0){Me.resumeToken=__PRIVATE_toBytes(Te,Re.resumeToken);const De=__PRIVATE_toInt32Proto(Te,Re.expectedCount);De!==null&&(Me.expectedCount=De)}else if(Re.snapshotVersion.compareTo(SnapshotVersion.min())>0){Me.readTime=toTimestamp(Te,Re.snapshotVersion.toTimestamp());const De=__PRIVATE_toInt32Proto(Te,Re.expectedCount);De!==null&&(Me.expectedCount=De)}return Me}(this.serializer,e);const r=__PRIVATE_toListenRequestLabels(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=__PRIVATE_getEncodedDatabaseId(this.serializer),t.removeTarget=e,this.k_(t)}}class __PRIVATE_PersistentWriteStream extends __PRIVATE_PersistentStream{constructor(e,t,r,Ee,Te,Re){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,Ee,Re),this.serializer=Te}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return __PRIVATE_hardAssert(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,__PRIVATE_hardAssert(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){__PRIVATE_hardAssert(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=__PRIVATE_fromWriteResults(e.writeResults,e.commitTime),r=__PRIVATE_fromVersion(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=__PRIVATE_getEncodedDatabaseId(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>toMutation(this.serializer,r))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Datastore{}class __PRIVATE_DatastoreImpl extends Datastore{constructor(e,t,r,Ee){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=Ee,this.ra=!1}ia(){if(this.ra)throw new FirestoreError(N$1.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,Ee){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([Te,Re])=>this.connection.Wo(e,__PRIVATE_toResourcePath(t,r),Ee,Te,Re)).catch(Te=>{throw Te.name==="FirebaseError"?(Te.code===N$1.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),Te):new FirestoreError(N$1.UNKNOWN,Te.toString())})}Jo(e,t,r,Ee,Te){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([Re,Me])=>this.connection.Jo(e,__PRIVATE_toResourcePath(t,r),Ee,Re,Me,Te)).catch(Re=>{throw Re.name==="FirebaseError"?(Re.code===N$1.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),Re):new FirestoreError(N$1.UNKNOWN,Re.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class __PRIVATE_OnlineStateTracker{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(__PRIVATE_logError(t),this._a=!1):__PRIVATE_logDebug("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt$1="RemoteStore";class __PRIVATE_RemoteStoreImpl{constructor(e,t,r,Ee,Te){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=Te,this.Ea.xo(Re=>{r.enqueueAndForget(async()=>{__PRIVATE_canUseNetwork(this)&&(__PRIVATE_logDebug(Xt$1,"Restarting streams for network reachability change."),await async function(Ve){const De=__PRIVATE_debugCast(Ve);De.Ia.add(4),await __PRIVATE_disableNetworkInternal(De),De.Aa.set("Unknown"),De.Ia.delete(4),await __PRIVATE_enableNetworkInternal(De)}(this))})}),this.Aa=new __PRIVATE_OnlineStateTracker(r,Ee)}}async function __PRIVATE_enableNetworkInternal(n){if(__PRIVATE_canUseNetwork(n))for(const e of n.da)await e(!0)}async function __PRIVATE_disableNetworkInternal(n){for(const e of n.da)await e(!1)}function __PRIVATE_remoteStoreListen(n,e){const t=__PRIVATE_debugCast(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),__PRIVATE_shouldStartWatchStream(t)?__PRIVATE_startWatchStream(t):__PRIVATE_ensureWatchStream(t).x_()&&__PRIVATE_sendWatchRequest(t,e))}function __PRIVATE_remoteStoreUnlisten(n,e){const t=__PRIVATE_debugCast(n),r=__PRIVATE_ensureWatchStream(t);t.Ta.delete(e),r.x_()&&__PRIVATE_sendUnwatchRequest(t,e),t.Ta.size===0&&(r.x_()?r.B_():__PRIVATE_canUseNetwork(t)&&t.Aa.set("Unknown"))}function __PRIVATE_sendWatchRequest(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(SnapshotVersion.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}__PRIVATE_ensureWatchStream(n).H_(e)}function __PRIVATE_sendUnwatchRequest(n,e){n.Ra.$e(e),__PRIVATE_ensureWatchStream(n).Y_(e)}function __PRIVATE_startWatchStream(n){n.Ra=new __PRIVATE_WatchChangeAggregator({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),__PRIVATE_ensureWatchStream(n).start(),n.Aa.aa()}function __PRIVATE_shouldStartWatchStream(n){return __PRIVATE_canUseNetwork(n)&&!__PRIVATE_ensureWatchStream(n).M_()&&n.Ta.size>0}function __PRIVATE_canUseNetwork(n){return __PRIVATE_debugCast(n).Ia.size===0}function __PRIVATE_cleanUpWatchStreamState(n){n.Ra=void 0}async function __PRIVATE_onWatchStreamConnected(n){n.Aa.set("Online")}async function __PRIVATE_onWatchStreamOpen(n){n.Ta.forEach((e,t)=>{__PRIVATE_sendWatchRequest(n,e)})}async function __PRIVATE_onWatchStreamClose(n,e){__PRIVATE_cleanUpWatchStreamState(n),__PRIVATE_shouldStartWatchStream(n)?(n.Aa.la(e),__PRIVATE_startWatchStream(n)):n.Aa.set("Unknown")}async function __PRIVATE_onWatchStreamChange(n,e,t){if(n.Aa.set("Online"),e instanceof __PRIVATE_WatchTargetChange&&e.state===2&&e.cause)try{await async function(Ee,Te){const Re=Te.cause;for(const Me of Te.targetIds)Ee.Ta.has(Me)&&(await Ee.remoteSyncer.rejectListen(Me,Re),Ee.Ta.delete(Me),Ee.Ra.removeTarget(Me))}(n,e)}catch(r){__PRIVATE_logDebug(Xt$1,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await __PRIVATE_disableNetworkUntilRecovery(n,r)}else if(e instanceof __PRIVATE_DocumentWatchChange?n.Ra.Ye(e):e instanceof __PRIVATE_ExistenceFilterChange?n.Ra.it(e):n.Ra.et(e),!t.isEqual(SnapshotVersion.min()))try{const r=await __PRIVATE_localStoreGetLastRemoteSnapshotVersion(n.localStore);t.compareTo(r)>=0&&await function(Te,Re){const Me=Te.Ra.Pt(Re);return Me.targetChanges.forEach((Ve,De)=>{if(Ve.resumeToken.approximateByteSize()>0){const $e=Te.Ta.get(De);$e&&Te.Ta.set(De,$e.withResumeToken(Ve.resumeToken,Re))}}),Me.targetMismatches.forEach((Ve,De)=>{const $e=Te.Ta.get(Ve);if(!$e)return;Te.Ta.set(Ve,$e.withResumeToken(ByteString.EMPTY_BYTE_STRING,$e.snapshotVersion)),__PRIVATE_sendUnwatchRequest(Te,Ve);const Oe=new TargetData($e.target,Ve,De,$e.sequenceNumber);__PRIVATE_sendWatchRequest(Te,Oe)}),Te.remoteSyncer.applyRemoteEvent(Me)}(n,t)}catch(r){__PRIVATE_logDebug(Xt$1,"Failed to raise snapshot:",r),await __PRIVATE_disableNetworkUntilRecovery(n,r)}}async function __PRIVATE_disableNetworkUntilRecovery(n,e,t){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;n.Ia.add(1),await __PRIVATE_disableNetworkInternal(n),n.Aa.set("Offline"),t||(t=()=>__PRIVATE_localStoreGetLastRemoteSnapshotVersion(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{__PRIVATE_logDebug(Xt$1,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await __PRIVATE_enableNetworkInternal(n)})}function __PRIVATE_executeWithRecovery(n,e){return e().catch(t=>__PRIVATE_disableNetworkUntilRecovery(n,t,e))}async function __PRIVATE_fillWritePipeline(n){const e=__PRIVATE_debugCast(n),t=__PRIVATE_ensureWriteStream(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:G$1;for(;__PRIVATE_canAddToWritePipeline(e);)try{const Ee=await __PRIVATE_localStoreGetNextMutationBatch(e.localStore,r);if(Ee===null){e.Pa.length===0&&t.B_();break}r=Ee.batchId,__PRIVATE_addToWritePipeline(e,Ee)}catch(Ee){await __PRIVATE_disableNetworkUntilRecovery(e,Ee)}__PRIVATE_shouldStartWriteStream(e)&&__PRIVATE_startWriteStream(e)}function __PRIVATE_canAddToWritePipeline(n){return __PRIVATE_canUseNetwork(n)&&n.Pa.length<10}function __PRIVATE_addToWritePipeline(n,e){n.Pa.push(e);const t=__PRIVATE_ensureWriteStream(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function __PRIVATE_shouldStartWriteStream(n){return __PRIVATE_canUseNetwork(n)&&!__PRIVATE_ensureWriteStream(n).M_()&&n.Pa.length>0}function __PRIVATE_startWriteStream(n){__PRIVATE_ensureWriteStream(n).start()}async function __PRIVATE_onWriteStreamOpen(n){__PRIVATE_ensureWriteStream(n).na()}async function __PRIVATE_onWriteHandshakeComplete(n){const e=__PRIVATE_ensureWriteStream(n);for(const t of n.Pa)e.X_(t.mutations)}async function __PRIVATE_onMutationResult(n,e,t){const r=n.Pa.shift(),Ee=MutationBatchResult.from(r,e,t);await __PRIVATE_executeWithRecovery(n,()=>n.remoteSyncer.applySuccessfulWrite(Ee)),await __PRIVATE_fillWritePipeline(n)}async function __PRIVATE_onWriteStreamClose(n,e){e&&__PRIVATE_ensureWriteStream(n).Z_&&await async function(r,Ee){if(function(Re){return __PRIVATE_isPermanentError(Re)&&Re!==N$1.ABORTED}(Ee.code)){const Te=r.Pa.shift();__PRIVATE_ensureWriteStream(r).N_(),await __PRIVATE_executeWithRecovery(r,()=>r.remoteSyncer.rejectFailedWrite(Te.batchId,Ee)),await __PRIVATE_fillWritePipeline(r)}}(n,e),__PRIVATE_shouldStartWriteStream(n)&&__PRIVATE_startWriteStream(n)}async function __PRIVATE_remoteStoreHandleCredentialChange(n,e){const t=__PRIVATE_debugCast(n);t.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(Xt$1,"RemoteStore received new credentials");const r=__PRIVATE_canUseNetwork(t);t.Ia.add(3),await __PRIVATE_disableNetworkInternal(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await __PRIVATE_enableNetworkInternal(t)}async function __PRIVATE_remoteStoreApplyPrimaryState(n,e){const t=__PRIVATE_debugCast(n);e?(t.Ia.delete(2),await __PRIVATE_enableNetworkInternal(t)):e||(t.Ia.add(2),await __PRIVATE_disableNetworkInternal(t),t.Aa.set("Unknown"))}function __PRIVATE_ensureWatchStream(n){return n.Va||(n.Va=function(t,r,Ee){const Te=__PRIVATE_debugCast(t);return Te.ia(),new __PRIVATE_PersistentListenStream(r,Te.connection,Te.authCredentials,Te.appCheckCredentials,Te.serializer,Ee)}(n.datastore,n.asyncQueue,{Zo:__PRIVATE_onWatchStreamConnected.bind(null,n),e_:__PRIVATE_onWatchStreamOpen.bind(null,n),n_:__PRIVATE_onWatchStreamClose.bind(null,n),J_:__PRIVATE_onWatchStreamChange.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),__PRIVATE_shouldStartWatchStream(n)?__PRIVATE_startWatchStream(n):n.Aa.set("Unknown")):(await n.Va.stop(),__PRIVATE_cleanUpWatchStreamState(n))})),n.Va}function __PRIVATE_ensureWriteStream(n){return n.ma||(n.ma=function(t,r,Ee){const Te=__PRIVATE_debugCast(t);return Te.ia(),new __PRIVATE_PersistentWriteStream(r,Te.connection,Te.authCredentials,Te.appCheckCredentials,Te.serializer,Ee)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:__PRIVATE_onWriteStreamOpen.bind(null,n),n_:__PRIVATE_onWriteStreamClose.bind(null,n),ea:__PRIVATE_onWriteHandshakeComplete.bind(null,n),ta:__PRIVATE_onMutationResult.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await __PRIVATE_fillWritePipeline(n)):(await n.ma.stop(),n.Pa.length>0&&(__PRIVATE_logDebug(Xt$1,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DelayedOperation{constructor(e,t,r,Ee,Te){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=Ee,this.removalCallback=Te,this.deferred=new __PRIVATE_Deferred,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(Re=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,Ee,Te){const Re=Date.now()+r,Me=new DelayedOperation(e,t,Re,Ee,Te);return Me.start(r),Me}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new FirestoreError(N$1.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __PRIVATE_wrapInUserErrorIfRecoverable(n,e){if(__PRIVATE_logError("AsyncQueue",`${e}: ${n}`),__PRIVATE_isIndexedDbTransactionError(n))return new FirestoreError(N$1.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSet{static emptySet(e){return new DocumentSet(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||DocumentKey.comparator(t.key,r.key):(t,r)=>DocumentKey.comparator(t.key,r.key),this.keyedMap=documentMap(),this.sortedSet=new SortedMap(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof DocumentSet)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const Ee=t.getNext().key,Te=r.getNext().key;if(!Ee.isEqual(Te))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new DocumentSet;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentChangeSet{constructor(){this.fa=new SortedMap(DocumentKey.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):fail(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}}class ViewSnapshot{constructor(e,t,r,Ee,Te,Re,Me,Ve,De){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=Ee,this.mutatedKeys=Te,this.fromCache=Re,this.syncStateChanged=Me,this.excludesMetadataChanges=Ve,this.hasCachedResults=De}static fromInitialDocuments(e,t,r,Ee,Te){const Re=[];return t.forEach(Me=>{Re.push({type:0,doc:Me})}),new ViewSnapshot(e,t,DocumentSet.emptySet(t),Re,r,Ee,!0,!1,Te)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&__PRIVATE_queryEquals(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let Ee=0;Ee<t.length;Ee++)if(t[Ee].type!==r[Ee].type||!t[Ee].doc.isEqual(r[Ee].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryListenersInfo{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class __PRIVATE_EventManagerImpl{constructor(){this.queries=__PRIVATE_newQueriesObjectMap(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const Ee=__PRIVATE_debugCast(t),Te=Ee.queries;Ee.queries=__PRIVATE_newQueriesObjectMap(),Te.forEach((Re,Me)=>{for(const Ve of Me.wa)Ve.onError(r)})})(this,new FirestoreError(N$1.ABORTED,"Firestore shutting down"))}}function __PRIVATE_newQueriesObjectMap(){return new ObjectMap(n=>__PRIVATE_canonifyQuery(n),__PRIVATE_queryEquals)}async function __PRIVATE_eventManagerListen(n,e){const t=__PRIVATE_debugCast(n);let r=3;const Ee=e.query;let Te=t.queries.get(Ee);Te?!Te.Sa()&&e.ba()&&(r=2):(Te=new __PRIVATE_QueryListenersInfo,r=e.ba()?0:1);try{switch(r){case 0:Te.ya=await t.onListen(Ee,!0);break;case 1:Te.ya=await t.onListen(Ee,!1);break;case 2:await t.onFirstRemoteStoreListen(Ee)}}catch(Re){const Me=__PRIVATE_wrapInUserErrorIfRecoverable(Re,`Initialization of query '${__PRIVATE_stringifyQuery(e.query)}' failed`);return void e.onError(Me)}t.queries.set(Ee,Te),Te.wa.push(e),e.va(t.onlineState),Te.ya&&e.Ca(Te.ya)&&__PRIVATE_raiseSnapshotsInSyncEvent(t)}async function __PRIVATE_eventManagerUnlisten(n,e){const t=__PRIVATE_debugCast(n),r=e.query;let Ee=3;const Te=t.queries.get(r);if(Te){const Re=Te.wa.indexOf(e);Re>=0&&(Te.wa.splice(Re,1),Te.wa.length===0?Ee=e.ba()?0:1:!Te.Sa()&&e.ba()&&(Ee=2))}switch(Ee){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function __PRIVATE_eventManagerOnWatchChange(n,e){const t=__PRIVATE_debugCast(n);let r=!1;for(const Ee of e){const Te=Ee.query,Re=t.queries.get(Te);if(Re){for(const Me of Re.wa)Me.Ca(Ee)&&(r=!0);Re.ya=Ee}}r&&__PRIVATE_raiseSnapshotsInSyncEvent(t)}function __PRIVATE_eventManagerOnWatchError(n,e,t){const r=__PRIVATE_debugCast(n),Ee=r.queries.get(e);if(Ee)for(const Te of Ee.wa)Te.onError(t);r.queries.delete(e)}function __PRIVATE_raiseSnapshotsInSyncEvent(n){n.Da.forEach(e=>{e.next()})}var en,tn;(tn=en||(en={})).Fa="default",tn.Cache="cache";class __PRIVATE_QueryListener{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const Ee of e.docChanges)Ee.type!==3&&r.push(Ee);e=new ViewSnapshot(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=ViewSnapshot.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==en.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AddedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_RemovedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_View{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=__PRIVATE_documentKeySet(),this.mutatedKeys=__PRIVATE_documentKeySet(),this.Xa=__PRIVATE_newQueryComparator(e),this.eu=new DocumentSet(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new __PRIVATE_DocumentChangeSet,Ee=t?t.eu:this.eu;let Te=t?t.mutatedKeys:this.mutatedKeys,Re=Ee,Me=!1;const Ve=this.query.limitType==="F"&&Ee.size===this.query.limit?Ee.last():null,De=this.query.limitType==="L"&&Ee.size===this.query.limit?Ee.first():null;if(e.inorderTraversal(($e,Oe)=>{const Ce=Ee.get($e),Be=__PRIVATE_queryMatches(this.query,Oe)?Oe:null,Ue=!!Ce&&this.mutatedKeys.has(Ce.key),We=!!Be&&(Be.hasLocalMutations||this.mutatedKeys.has(Be.key)&&Be.hasCommittedMutations);let He=!1;Ce&&Be?Ce.data.isEqual(Be.data)?Ue!==We&&(r.track({type:3,doc:Be}),He=!0):this.iu(Ce,Be)||(r.track({type:2,doc:Be}),He=!0,(Ve&&this.Xa(Be,Ve)>0||De&&this.Xa(Be,De)<0)&&(Me=!0)):!Ce&&Be?(r.track({type:0,doc:Be}),He=!0):Ce&&!Be&&(r.track({type:1,doc:Ce}),He=!0,(Ve||De)&&(Me=!0)),He&&(Be?(Re=Re.add(Be),Te=We?Te.add($e):Te.delete($e)):(Re=Re.delete($e),Te=Te.delete($e)))}),this.query.limit!==null)for(;Re.size>this.query.limit;){const $e=this.query.limitType==="F"?Re.last():Re.first();Re=Re.delete($e.key),Te=Te.delete($e.key),r.track({type:1,doc:$e})}return{eu:Re,ru:r,Ds:Me,mutatedKeys:Te}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,Ee){const Te=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const Re=e.ru.pa();Re.sort(($e,Oe)=>function(Be,Ue){const We=He=>{switch(He){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fail(20277,{At:He})}};return We(Be)-We(Ue)}($e.type,Oe.type)||this.Xa($e.doc,Oe.doc)),this.su(r),Ee=Ee!=null&&Ee;const Me=t&&!Ee?this.ou():[],Ve=this.Za.size===0&&this.current&&!Ee?1:0,De=Ve!==this.Ya;return this.Ya=Ve,Re.length!==0||De?{snapshot:new ViewSnapshot(this.query,e.eu,Te,Re,e.mutatedKeys,Ve===0,De,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:Me}:{_u:Me}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new __PRIVATE_DocumentChangeSet,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=__PRIVATE_documentKeySet(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new __PRIVATE_RemovedLimboDocument(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new __PRIVATE_AddedLimboDocument(r))}),t}uu(e){this.Ha=e.qs,this.Za=__PRIVATE_documentKeySet();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return ViewSnapshot.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const nn="SyncEngine";class __PRIVATE_QueryView{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class LimboResolution{constructor(e){this.key=e,this.lu=!1}}class __PRIVATE_SyncEngineImpl{constructor(e,t,r,Ee,Te,Re){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=Ee,this.currentUser=Te,this.maxConcurrentLimboResolutions=Re,this.hu={},this.Pu=new ObjectMap(Me=>__PRIVATE_canonifyQuery(Me),__PRIVATE_queryEquals),this.Tu=new Map,this.Iu=new Set,this.du=new SortedMap(DocumentKey.comparator),this.Eu=new Map,this.Au=new __PRIVATE_ReferenceSet,this.Ru={},this.Vu=new Map,this.mu=__PRIVATE_TargetIdGenerator.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function __PRIVATE_syncEngineListen(n,e,t=!0){const r=__PRIVATE_ensureWatchCallbacks(n);let Ee;const Te=r.Pu.get(e);return Te?(r.sharedClientState.addLocalQueryTarget(Te.targetId),Ee=Te.view.cu()):Ee=await __PRIVATE_allocateTargetAndMaybeListen(r,e,t,!0),Ee}async function __PRIVATE_triggerRemoteStoreListen(n,e){const t=__PRIVATE_ensureWatchCallbacks(n);await __PRIVATE_allocateTargetAndMaybeListen(t,e,!0,!1)}async function __PRIVATE_allocateTargetAndMaybeListen(n,e,t,r){const Ee=await __PRIVATE_localStoreAllocateTarget(n.localStore,__PRIVATE_queryToTarget(e)),Te=Ee.targetId,Re=n.sharedClientState.addLocalQueryTarget(Te,t);let Me;return r&&(Me=await __PRIVATE_initializeViewAndComputeSnapshot(n,e,Te,Re==="current",Ee.resumeToken)),n.isPrimaryClient&&t&&__PRIVATE_remoteStoreListen(n.remoteStore,Ee),Me}async function __PRIVATE_initializeViewAndComputeSnapshot(n,e,t,r,Ee){n.gu=(Oe,Ce,Be)=>async function(We,He,Ge,Ye){let Je=He.view.nu(Ge);Je.Ds&&(Je=await __PRIVATE_localStoreExecuteQuery(We.localStore,He.query,!1).then(({documents:mn})=>He.view.nu(mn,Je)));const Ze=Ye&&Ye.targetChanges.get(He.targetId),fn=Ye&&Ye.targetMismatches.get(He.targetId)!=null,yn=He.view.applyChanges(Je,We.isPrimaryClient,Ze,fn);return __PRIVATE_updateTrackedLimbos(We,He.targetId,yn._u),yn.snapshot}(n,Oe,Ce,Be);const Te=await __PRIVATE_localStoreExecuteQuery(n.localStore,e,!0),Re=new __PRIVATE_View(e,Te.qs),Me=Re.nu(Te.documents),Ve=TargetChange.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",Ee),De=Re.applyChanges(Me,n.isPrimaryClient,Ve);__PRIVATE_updateTrackedLimbos(n,t,De._u);const $e=new __PRIVATE_QueryView(e,t,Re);return n.Pu.set(e,$e),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),De.snapshot}async function __PRIVATE_syncEngineUnlisten(n,e,t){const r=__PRIVATE_debugCast(n),Ee=r.Pu.get(e),Te=r.Tu.get(Ee.targetId);if(Te.length>1)return r.Tu.set(Ee.targetId,Te.filter(Re=>!__PRIVATE_queryEquals(Re,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(Ee.targetId),r.sharedClientState.isActiveQueryTarget(Ee.targetId)||await __PRIVATE_localStoreReleaseTarget(r.localStore,Ee.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(Ee.targetId),t&&__PRIVATE_remoteStoreUnlisten(r.remoteStore,Ee.targetId),__PRIVATE_removeAndCleanupTarget(r,Ee.targetId)}).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)):(__PRIVATE_removeAndCleanupTarget(r,Ee.targetId),await __PRIVATE_localStoreReleaseTarget(r.localStore,Ee.targetId,!0))}async function __PRIVATE_triggerRemoteStoreUnlisten(n,e){const t=__PRIVATE_debugCast(n),r=t.Pu.get(e),Ee=t.Tu.get(r.targetId);t.isPrimaryClient&&Ee.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),__PRIVATE_remoteStoreUnlisten(t.remoteStore,r.targetId))}async function __PRIVATE_syncEngineWrite(n,e,t){const r=__PRIVATE_syncEngineEnsureWriteCallbacks(n);try{const Ee=await function(Re,Me){const Ve=__PRIVATE_debugCast(Re),De=Timestamp.now(),$e=Me.reduce((Be,Ue)=>Be.add(Ue.key),__PRIVATE_documentKeySet());let Oe,Ce;return Ve.persistence.runTransaction("Locally write mutations","readwrite",Be=>{let Ue=__PRIVATE_mutableDocumentMap(),We=__PRIVATE_documentKeySet();return Ve.Os.getEntries(Be,$e).next(He=>{Ue=He,Ue.forEach((Ge,Ye)=>{Ye.isValidDocument()||(We=We.add(Ge))})}).next(()=>Ve.localDocuments.getOverlayedDocuments(Be,Ue)).next(He=>{Oe=He;const Ge=[];for(const Ye of Me){const Je=__PRIVATE_mutationExtractBaseValue(Ye,Oe.get(Ye.key).overlayedDocument);Je!=null&&Ge.push(new __PRIVATE_PatchMutation(Ye.key,Je,__PRIVATE_extractFieldMask(Je.value.mapValue),Precondition.exists(!0)))}return Ve.mutationQueue.addMutationBatch(Be,De,Ge,Me)}).next(He=>{Ce=He;const Ge=He.applyToLocalDocumentSet(Oe,We);return Ve.documentOverlayCache.saveOverlays(Be,He.batchId,Ge)})}).then(()=>({batchId:Ce.batchId,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(Oe)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(Ee.batchId),function(Re,Me,Ve){let De=Re.Ru[Re.currentUser.toKey()];De||(De=new SortedMap(__PRIVATE_primitiveComparator)),De=De.insert(Me,Ve),Re.Ru[Re.currentUser.toKey()]=De}(r,Ee.batchId,t),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(r,Ee.changes),await __PRIVATE_fillWritePipeline(r.remoteStore)}catch(Ee){const Te=__PRIVATE_wrapInUserErrorIfRecoverable(Ee,"Failed to persist write");t.reject(Te)}}async function __PRIVATE_syncEngineApplyRemoteEvent(n,e){const t=__PRIVATE_debugCast(n);try{const r=await __PRIVATE_localStoreApplyRemoteEventToLocalCache(t.localStore,e);e.targetChanges.forEach((Ee,Te)=>{const Re=t.Eu.get(Te);Re&&(__PRIVATE_hardAssert(Ee.addedDocuments.size+Ee.modifiedDocuments.size+Ee.removedDocuments.size<=1,22616),Ee.addedDocuments.size>0?Re.lu=!0:Ee.modifiedDocuments.size>0?__PRIVATE_hardAssert(Re.lu,14607):Ee.removedDocuments.size>0&&(__PRIVATE_hardAssert(Re.lu,42227),Re.lu=!1))}),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(t,r,e)}catch(r){await __PRIVATE_ignoreIfPrimaryLeaseLoss(r)}}function __PRIVATE_syncEngineApplyOnlineStateChange(n,e,t){const r=__PRIVATE_debugCast(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const Ee=[];r.Pu.forEach((Te,Re)=>{const Me=Re.view.va(e);Me.snapshot&&Ee.push(Me.snapshot)}),function(Re,Me){const Ve=__PRIVATE_debugCast(Re);Ve.onlineState=Me;let De=!1;Ve.queries.forEach(($e,Oe)=>{for(const Ce of Oe.wa)Ce.va(Me)&&(De=!0)}),De&&__PRIVATE_raiseSnapshotsInSyncEvent(Ve)}(r.eventManager,e),Ee.length&&r.hu.J_(Ee),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function __PRIVATE_syncEngineRejectListen(n,e,t){const r=__PRIVATE_debugCast(n);r.sharedClientState.updateQueryState(e,"rejected",t);const Ee=r.Eu.get(e),Te=Ee&&Ee.key;if(Te){let Re=new SortedMap(DocumentKey.comparator);Re=Re.insert(Te,MutableDocument.newNoDocument(Te,SnapshotVersion.min()));const Me=__PRIVATE_documentKeySet().add(Te),Ve=new RemoteEvent(SnapshotVersion.min(),new Map,new SortedMap(__PRIVATE_primitiveComparator),Re,Me);await __PRIVATE_syncEngineApplyRemoteEvent(r,Ve),r.du=r.du.remove(Te),r.Eu.delete(e),__PRIVATE_pumpEnqueuedLimboResolutions(r)}else await __PRIVATE_localStoreReleaseTarget(r.localStore,e,!1).then(()=>__PRIVATE_removeAndCleanupTarget(r,e,t)).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)}async function __PRIVATE_syncEngineApplySuccessfulWrite(n,e){const t=__PRIVATE_debugCast(n),r=e.batch.batchId;try{const Ee=await __PRIVATE_localStoreAcknowledgeBatch(t.localStore,e);__PRIVATE_processUserCallback(t,r,null),__PRIVATE_triggerPendingWritesCallbacks(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(t,Ee)}catch(Ee){await __PRIVATE_ignoreIfPrimaryLeaseLoss(Ee)}}async function __PRIVATE_syncEngineRejectFailedWrite(n,e,t){const r=__PRIVATE_debugCast(n);try{const Ee=await function(Re,Me){const Ve=__PRIVATE_debugCast(Re);return Ve.persistence.runTransaction("Reject batch","readwrite-primary",De=>{let $e;return Ve.mutationQueue.lookupMutationBatch(De,Me).next(Oe=>(__PRIVATE_hardAssert(Oe!==null,37113),$e=Oe.keys(),Ve.mutationQueue.removeMutationBatch(De,Oe))).next(()=>Ve.mutationQueue.performConsistencyCheck(De)).next(()=>Ve.documentOverlayCache.removeOverlaysForBatchId(De,$e,Me)).next(()=>Ve.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(De,$e)).next(()=>Ve.localDocuments.getDocuments(De,$e))})}(r.localStore,e);__PRIVATE_processUserCallback(r,e,t),__PRIVATE_triggerPendingWritesCallbacks(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(r,Ee)}catch(Ee){await __PRIVATE_ignoreIfPrimaryLeaseLoss(Ee)}}function __PRIVATE_triggerPendingWritesCallbacks(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function __PRIVATE_processUserCallback(n,e,t){const r=__PRIVATE_debugCast(n);let Ee=r.Ru[r.currentUser.toKey()];if(Ee){const Te=Ee.get(e);Te&&(t?Te.reject(t):Te.resolve(),Ee=Ee.remove(e)),r.Ru[r.currentUser.toKey()]=Ee}}function __PRIVATE_removeAndCleanupTarget(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||__PRIVATE_removeLimboTarget(n,r)})}function __PRIVATE_removeLimboTarget(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(__PRIVATE_remoteStoreUnlisten(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),__PRIVATE_pumpEnqueuedLimboResolutions(n))}function __PRIVATE_updateTrackedLimbos(n,e,t){for(const r of t)r instanceof __PRIVATE_AddedLimboDocument?(n.Au.addReference(r.key,e),__PRIVATE_trackLimboChange(n,r)):r instanceof __PRIVATE_RemovedLimboDocument?(__PRIVATE_logDebug(nn,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||__PRIVATE_removeLimboTarget(n,r.key)):fail(19791,{yu:r})}function __PRIVATE_trackLimboChange(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(__PRIVATE_logDebug(nn,"New document in limbo: "+t),n.Iu.add(r),__PRIVATE_pumpEnqueuedLimboResolutions(n))}function __PRIVATE_pumpEnqueuedLimboResolutions(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new DocumentKey(ResourcePath.fromString(e)),r=n.mu.next();n.Eu.set(r,new LimboResolution(t)),n.du=n.du.insert(t,r),__PRIVATE_remoteStoreListen(n.remoteStore,new TargetData(__PRIVATE_queryToTarget(__PRIVATE_newQueryForPath(t.path)),r,"TargetPurposeLimboResolution",__PRIVATE_ListenSequence.ue))}}async function __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(n,e,t){const r=__PRIVATE_debugCast(n),Ee=[],Te=[],Re=[];r.Pu.isEmpty()||(r.Pu.forEach((Me,Ve)=>{Re.push(r.gu(Ve,e,t).then(De=>{var $e;if((De||t)&&r.isPrimaryClient){const Oe=De?!De.fromCache:($e=t?.targetChanges.get(Ve.targetId))===null||$e===void 0?void 0:$e.current;r.sharedClientState.updateQueryState(Ve.targetId,Oe?"current":"not-current")}if(De){Ee.push(De);const Oe=__PRIVATE_LocalViewChanges.Es(Ve.targetId,De);Te.push(Oe)}}))}),await Promise.all(Re),r.hu.J_(Ee),await async function(Ve,De){const $e=__PRIVATE_debugCast(Ve);try{await $e.persistence.runTransaction("notifyLocalViewChanges","readwrite",Oe=>PersistencePromise.forEach(De,Ce=>PersistencePromise.forEach(Ce.Is,Be=>$e.persistence.referenceDelegate.addReference(Oe,Ce.targetId,Be)).next(()=>PersistencePromise.forEach(Ce.ds,Be=>$e.persistence.referenceDelegate.removeReference(Oe,Ce.targetId,Be)))))}catch(Oe){if(!__PRIVATE_isIndexedDbTransactionError(Oe))throw Oe;__PRIVATE_logDebug(Qt$1,"Failed to update sequence numbers: "+Oe)}for(const Oe of De){const Ce=Oe.targetId;if(!Oe.fromCache){const Be=$e.Fs.get(Ce),Ue=Be.snapshotVersion,We=Be.withLastLimboFreeSnapshotVersion(Ue);$e.Fs=$e.Fs.insert(Ce,We)}}}(r.localStore,Te))}async function __PRIVATE_syncEngineHandleCredentialChange(n,e){const t=__PRIVATE_debugCast(n);if(!t.currentUser.isEqual(e)){__PRIVATE_logDebug(nn,"User change. New user:",e.toKey());const r=await __PRIVATE_localStoreHandleUserChange(t.localStore,e);t.currentUser=e,function(Te,Re){Te.Vu.forEach(Me=>{Me.forEach(Ve=>{Ve.reject(new FirestoreError(N$1.CANCELLED,Re))})}),Te.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(t,r.Bs)}}function __PRIVATE_syncEngineGetRemoteKeysForTarget(n,e){const t=__PRIVATE_debugCast(n),r=t.Eu.get(e);if(r&&r.lu)return __PRIVATE_documentKeySet().add(r.key);{let Ee=__PRIVATE_documentKeySet();const Te=t.Tu.get(e);if(!Te)return Ee;for(const Re of Te){const Me=t.Pu.get(Re);Ee=Ee.unionWith(Me.view.tu)}return Ee}}function __PRIVATE_ensureWatchCallbacks(n){const e=__PRIVATE_debugCast(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=__PRIVATE_syncEngineApplyRemoteEvent.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=__PRIVATE_syncEngineGetRemoteKeysForTarget.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=__PRIVATE_syncEngineRejectListen.bind(null,e),e.hu.J_=__PRIVATE_eventManagerOnWatchChange.bind(null,e.eventManager),e.hu.pu=__PRIVATE_eventManagerOnWatchError.bind(null,e.eventManager),e}function __PRIVATE_syncEngineEnsureWriteCallbacks(n){const e=__PRIVATE_debugCast(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=__PRIVATE_syncEngineApplySuccessfulWrite.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=__PRIVATE_syncEngineRejectFailedWrite.bind(null,e),e}class __PRIVATE_MemoryOfflineComponentProvider{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=__PRIVATE_newSerializer(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return __PRIVATE_newLocalStore(this.persistence,new __PRIVATE_QueryEngine,e.initialUser,this.serializer)}Du(e){return new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.Vi,this.serializer)}bu(e){return new __PRIVATE_MemorySharedClientState}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}__PRIVATE_MemoryOfflineComponentProvider.provider={build:()=>new __PRIVATE_MemoryOfflineComponentProvider};class __PRIVATE_LruGcMemoryOfflineComponentProvider extends __PRIVATE_MemoryOfflineComponentProvider{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){__PRIVATE_hardAssert(this.persistence.referenceDelegate instanceof __PRIVATE_MemoryLruDelegate,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new __PRIVATE_LruScheduler(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?LruParams.withCacheSize(this.cacheSizeBytes):LruParams.DEFAULT;return new __PRIVATE_MemoryPersistence(r=>__PRIVATE_MemoryLruDelegate.Vi(r,t),this.serializer)}}class OnlineComponentProvider{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=__PRIVATE_syncEngineHandleCredentialChange.bind(null,this.syncEngine),await __PRIVATE_remoteStoreApplyPrimaryState(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new __PRIVATE_EventManagerImpl}()}createDatastore(e){const t=__PRIVATE_newSerializer(e.databaseInfo.databaseId),r=function(Te){return new __PRIVATE_WebChannelConnection(Te)}(e.databaseInfo);return function(Te,Re,Me,Ve){return new __PRIVATE_DatastoreImpl(Te,Re,Me,Ve)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,Ee,Te,Re,Me){return new __PRIVATE_RemoteStoreImpl(r,Ee,Te,Re,Me)}(this.localStore,this.datastore,e.asyncQueue,t=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,t,0),function(){return __PRIVATE_BrowserConnectivityMonitor.C()?new __PRIVATE_BrowserConnectivityMonitor:new __PRIVATE_NoopConnectivityMonitor}())}createSyncEngine(e,t){return function(Ee,Te,Re,Me,Ve,De,$e){const Oe=new __PRIVATE_SyncEngineImpl(Ee,Te,Re,Me,Ve,De);return $e&&(Oe.fu=!0),Oe}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(Ee){const Te=__PRIVATE_debugCast(Ee);__PRIVATE_logDebug(Xt$1,"RemoteStore shutting down."),Te.Ia.add(5),await __PRIVATE_disableNetworkInternal(Te),Te.Ea.shutdown(),Te.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}OnlineComponentProvider.provider={build:()=>new OnlineComponentProvider};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncObserver{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):__PRIVATE_logError("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="FirestoreClient";class FirestoreClient{constructor(e,t,r,Ee,Te){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=Ee,this.user=User$1.UNAUTHENTICATED,this.clientId=__PRIVATE_AutoId.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=Te,this.authCredentials.start(r,async Re=>{__PRIVATE_logDebug(rn,"Received user=",Re.uid),await this.authCredentialListener(Re),this.user=Re}),this.appCheckCredentials.start(r,Re=>(__PRIVATE_logDebug(rn,"Received new app check token=",Re),this.appCheckCredentialListener(Re,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new __PRIVATE_Deferred;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=__PRIVATE_wrapInUserErrorIfRecoverable(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function __PRIVATE_setOfflineComponentProvider(n,e){n.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(rn,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async Ee=>{r.isEqual(Ee)||(await __PRIVATE_localStoreHandleUserChange(e.localStore,Ee),r=Ee)}),e.persistence.setDatabaseDeletedListener(()=>{__PRIVATE_logWarn("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{__PRIVATE_logDebug("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(Ee=>{__PRIVATE_logWarn("Terminating Firestore due to IndexedDb database deletion failed",Ee)})}),n._offlineComponents=e}async function __PRIVATE_setOnlineComponentProvider(n,e){n.asyncQueue.verifyOperationInProgress();const t=await __PRIVATE_ensureOfflineComponents(n);__PRIVATE_logDebug(rn,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,Ee)=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,Ee)),n._onlineComponents=e}async function __PRIVATE_ensureOfflineComponents(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){__PRIVATE_logDebug(rn,"Using user provided OfflineComponentProvider");try{await __PRIVATE_setOfflineComponentProvider(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(Ee){return Ee.name==="FirebaseError"?Ee.code===N$1.FAILED_PRECONDITION||Ee.code===N$1.UNIMPLEMENTED:!(typeof DOMException<"u"&&Ee instanceof DOMException)||Ee.code===22||Ee.code===20||Ee.code===11}(t))throw t;__PRIVATE_logWarn("Error using user provided cache. Falling back to memory cache: "+t),await __PRIVATE_setOfflineComponentProvider(n,new __PRIVATE_MemoryOfflineComponentProvider)}}else __PRIVATE_logDebug(rn,"Using default OfflineComponentProvider"),await __PRIVATE_setOfflineComponentProvider(n,new __PRIVATE_LruGcMemoryOfflineComponentProvider(void 0));return n._offlineComponents}async function __PRIVATE_ensureOnlineComponents(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(__PRIVATE_logDebug(rn,"Using user provided OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(n,n._uninitializedComponentsProvider._online)):(__PRIVATE_logDebug(rn,"Using default OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(n,new OnlineComponentProvider))),n._onlineComponents}function __PRIVATE_getSyncEngine(n){return __PRIVATE_ensureOnlineComponents(n).then(e=>e.syncEngine)}async function __PRIVATE_getEventManager(n){const e=await __PRIVATE_ensureOnlineComponents(n),t=e.eventManager;return t.onListen=__PRIVATE_syncEngineListen.bind(null,e.syncEngine),t.onUnlisten=__PRIVATE_syncEngineUnlisten.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=__PRIVATE_triggerRemoteStoreListen.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=__PRIVATE_triggerRemoteStoreUnlisten.bind(null,e.syncEngine),t}function __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(n,e,t={}){const r=new __PRIVATE_Deferred;return n.asyncQueue.enqueueAndForget(async()=>function(Te,Re,Me,Ve,De){const $e=new __PRIVATE_AsyncObserver({next:Ce=>{$e.Ou(),Re.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(Te,Oe));const Be=Ce.docs.has(Me);!Be&&Ce.fromCache?De.reject(new FirestoreError(N$1.UNAVAILABLE,"Failed to get document because the client is offline.")):Be&&Ce.fromCache&&Ve&&Ve.source==="server"?De.reject(new FirestoreError(N$1.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):De.resolve(Ce)},error:Ce=>De.reject(Ce)}),Oe=new __PRIVATE_QueryListener(__PRIVATE_newQueryForPath(Me.path),$e,{includeMetadataChanges:!0,ka:!0});return __PRIVATE_eventManagerListen(Te,Oe)}(await __PRIVATE_getEventManager(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_cloneLongPollingOptions(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="firestore.googleapis.com",_n=!0;class FirestoreSettingsImpl{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=on,this.ssl=_n}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:_n;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Mt$1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ot$1)throw new FirestoreError(N$1.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}__PRIVATE_validateIsNotUsedTogether("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__PRIVATE_cloneLongPollingOptions((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(Te){if(Te.timeoutSeconds!==void 0){if(isNaN(Te.timeoutSeconds))throw new FirestoreError(N$1.INVALID_ARGUMENT,`invalid long polling timeout: ${Te.timeoutSeconds} (must not be NaN)`);if(Te.timeoutSeconds<5)throw new FirestoreError(N$1.INVALID_ARGUMENT,`invalid long polling timeout: ${Te.timeoutSeconds} (minimum allowed value is 5)`);if(Te.timeoutSeconds>30)throw new FirestoreError(N$1.INVALID_ARGUMENT,`invalid long polling timeout: ${Te.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,Ee){return r.timeoutSeconds===Ee.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Firestore$1{constructor(e,t,r,Ee){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=Ee,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FirestoreSettingsImpl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new FirestoreError(N$1.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new FirestoreError(N$1.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FirestoreSettingsImpl(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new __PRIVATE_EmptyAuthCredentialsProvider;switch(r.type){case"firstParty":return new __PRIVATE_FirstPartyAuthCredentialsProvider(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new FirestoreError(N$1.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=sn.get(t);r&&(__PRIVATE_logDebug("ComponentProvider","Removing Datastore"),sn.delete(t),r.terminate())}(this),Promise.resolve()}}function connectFirestoreEmulator(n,e,t,r={}){var Ee;n=__PRIVATE_cast(n,Firestore$1);const Te=isCloudWorkstation(e),Re=n._getSettings(),Me=Object.assign(Object.assign({},Re),{emulatorOptions:n._getEmulatorOptions()}),Ve=`${e}:${t}`;Te&&(pingServer(`https://${Ve}`),updateEmulatorBanner("Firestore",!0)),Re.host!==on&&Re.host!==Ve&&__PRIVATE_logWarn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const De=Object.assign(Object.assign({},Re),{host:Ve,ssl:Te,emulatorOptions:r});if(!deepEqual(De,Me)&&(n._setSettings(De),r.mockUserToken)){let $e,Oe;if(typeof r.mockUserToken=="string")$e=r.mockUserToken,Oe=User$1.MOCK_USER;else{$e=createMockUserToken(r.mockUserToken,(Ee=n._app)===null||Ee===void 0?void 0:Ee.options.projectId);const Ce=r.mockUserToken.sub||r.mockUserToken.user_id;if(!Ce)throw new FirestoreError(N$1.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");Oe=new User$1(Ce)}n._authCredentials=new __PRIVATE_EmulatorAuthCredentialsProvider(new __PRIVATE_OAuthToken($e,Oe))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Query{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Query(this.firestore,e,this._query)}}class DocumentReference{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new CollectionReference(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new DocumentReference(this.firestore,e,this._key)}toJSON(){return{type:DocumentReference._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(__PRIVATE_validateJSON(t,DocumentReference._jsonSchema))return new DocumentReference(e,r||null,new DocumentKey(ResourcePath.fromString(t.referencePath)))}}DocumentReference._jsonSchemaVersion="firestore/documentReference/1.0",DocumentReference._jsonSchema={type:property("string",DocumentReference._jsonSchemaVersion),referencePath:property("string")};class CollectionReference extends Query{constructor(e,t,r){super(e,t,__PRIVATE_newQueryForPath(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new DocumentReference(this.firestore,null,new DocumentKey(e))}withConverter(e){return new CollectionReference(this.firestore,e,this._path)}}function collection(n,e,...t){if(n=getModularInstance(n),__PRIVATE_validateNonEmptyArgument("collection","path",e),n instanceof Firestore$1){const r=ResourcePath.fromString(e,...t);return __PRIVATE_validateCollectionPath(r),new CollectionReference(n,null,r)}{if(!(n instanceof DocumentReference||n instanceof CollectionReference))throw new FirestoreError(N$1.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ResourcePath.fromString(e,...t));return __PRIVATE_validateCollectionPath(r),new CollectionReference(n.firestore,null,r)}}function doc(n,e,...t){if(n=getModularInstance(n),arguments.length===1&&(e=__PRIVATE_AutoId.newId()),__PRIVATE_validateNonEmptyArgument("doc","path",e),n instanceof Firestore$1){const r=ResourcePath.fromString(e,...t);return __PRIVATE_validateDocumentPath(r),new DocumentReference(n,null,new DocumentKey(r))}{if(!(n instanceof DocumentReference||n instanceof CollectionReference))throw new FirestoreError(N$1.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ResourcePath.fromString(e,...t));return __PRIVATE_validateDocumentPath(r),new DocumentReference(n.firestore,n instanceof CollectionReference?n.converter:null,new DocumentKey(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="AsyncQueue";class __PRIVATE_AsyncQueueImpl{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new __PRIVATE_ExponentialBackoff(this,"async_queue_retry"),this.oc=()=>{const r=getDocument();r&&__PRIVATE_logDebug(an,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=getDocument();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=getDocument();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new __PRIVATE_Deferred;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;__PRIVATE_logDebug(an,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,__PRIVATE_logError("INTERNAL UNHANDLED ERROR: ",__PRIVATE_getMessageOrStack(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const Ee=DelayedOperation.createAndSchedule(this,e,t,r,Te=>this.lc(Te));return this.ec.push(Ee),Ee}ac(){this.tc&&fail(47125,{hc:__PRIVATE_getMessageOrStack(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function __PRIVATE_getMessageOrStack(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_isPartialObserver(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const Ee=t;for(const Te of r)if(Te in Ee&&typeof Ee[Te]=="function")return!0;return!1}(n,["next","error","complete"])}class Firestore extends Firestore$1{constructor(e,t,r,Ee){super(e,t,r,Ee),this.type="firestore",this._queue=new __PRIVATE_AsyncQueueImpl,this._persistenceKey=Ee?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new __PRIVATE_AsyncQueueImpl(e),this._firestoreClient=void 0,await e}}}function getFirestore(n,e){const t=typeof n=="object"?n:getApp(),r=typeof n=="string"?n:ut$1,Ee=_getProvider(t,"firestore").getImmediate({identifier:r});if(!Ee._initialized){const Te=getDefaultEmulatorHostnameAndPort("firestore");Te&&connectFirestoreEmulator(Ee,...Te)}return Ee}function ensureFirestoreConfigured(n){if(n._terminated)throw new FirestoreError(N$1.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||__PRIVATE_configureFirestore(n),n._firestoreClient}function __PRIVATE_configureFirestore(n){var e,t,r;const Ee=n._freezeSettings(),Te=function(Me,Ve,De,$e){return new DatabaseInfo(Me,Ve,De,$e.host,$e.ssl,$e.experimentalForceLongPolling,$e.experimentalAutoDetectLongPolling,__PRIVATE_cloneLongPollingOptions($e.experimentalLongPollingOptions),$e.useFetchStreams,$e.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,Ee);n._componentsProvider||!((t=Ee.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=Ee.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:Ee.localCache._offlineComponentProvider,_online:Ee.localCache._onlineComponentProvider}),n._firestoreClient=new FirestoreClient(n._authCredentials,n._appCheckCredentials,n._queue,Te,n._componentsProvider&&function(Me){const Ve=Me?._online.build();return{_offline:Me?._offline.build(Ve),_online:Ve}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bytes{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bytes(ByteString.fromBase64String(e))}catch(t){throw new FirestoreError(N$1.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Bytes(ByteString.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bytes._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(__PRIVATE_validateJSON(e,Bytes._jsonSchema))return Bytes.fromBase64String(e.bytes)}}Bytes._jsonSchemaVersion="firestore/bytes/1.0",Bytes._jsonSchema={type:property("string",Bytes._jsonSchemaVersion),bytes:property("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldPath{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new FieldPath$1(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldValue{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GeoPoint{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return __PRIVATE_primitiveComparator(this._lat,e._lat)||__PRIVATE_primitiveComparator(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:GeoPoint._jsonSchemaVersion}}static fromJSON(e){if(__PRIVATE_validateJSON(e,GeoPoint._jsonSchema))return new GeoPoint(e.latitude,e.longitude)}}GeoPoint._jsonSchemaVersion="firestore/geoPoint/1.0",GeoPoint._jsonSchema={type:property("string",GeoPoint._jsonSchemaVersion),latitude:property("number"),longitude:property("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VectorValue{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,Ee){if(r.length!==Ee.length)return!1;for(let Te=0;Te<r.length;++Te)if(r[Te]!==Ee[Te])return!1;return!0}(this._values,e._values)}toJSON(){return{type:VectorValue._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(__PRIVATE_validateJSON(e,VectorValue._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new VectorValue(e.vectorValues);throw new FirestoreError(N$1.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}VectorValue._jsonSchemaVersion="firestore/vectorValue/1.0",VectorValue._jsonSchema={type:property("string",VectorValue._jsonSchemaVersion),vectorValues:property("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn=/^__.*__$/;class ParsedSetData{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,t,this.fieldTransforms):new __PRIVATE_SetMutation(e,this.data,t,this.fieldTransforms)}}class ParsedUpdateData{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function __PRIVATE_isWrite(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fail(40011,{Ec:n})}}class __PRIVATE_ParseContextImpl{constructor(e,t,r,Ee,Te,Re){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=Ee,Te===void 0&&this.Ac(),this.fieldTransforms=Te||[],this.fieldMask=Re||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new __PRIVATE_ParseContextImpl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),Ee=this.Rc({path:r,mc:!1});return Ee.fc(e),Ee}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),Ee=this.Rc({path:r,mc:!1});return Ee.Ac(),Ee}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return __PRIVATE_createError(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(__PRIVATE_isWrite(this.Ec)&&cn.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class __PRIVATE_UserDataReader{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||__PRIVATE_newSerializer(e)}Dc(e,t,r,Ee=!1){return new __PRIVATE_ParseContextImpl({Ec:e,methodName:t,bc:r,path:FieldPath$1.emptyPath(),mc:!1,Sc:Ee},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function __PRIVATE_newUserDataReader(n){const e=n._freezeSettings(),t=__PRIVATE_newSerializer(n._databaseId);return new __PRIVATE_UserDataReader(n._databaseId,!!e.ignoreUndefinedProperties,t)}function __PRIVATE_parseSetData(n,e,t,r,Ee,Te={}){const Re=n.Dc(Te.merge||Te.mergeFields?2:0,e,t,Ee);__PRIVATE_validatePlainObject("Data must be an object, but it was:",Re,r);const Me=__PRIVATE_parseObject(r,Re);let Ve,De;if(Te.merge)Ve=new FieldMask(Re.fieldMask),De=Re.fieldTransforms;else if(Te.mergeFields){const $e=[];for(const Oe of Te.mergeFields){const Ce=__PRIVATE_fieldPathFromArgument$1(e,Oe,t);if(!Re.contains(Ce))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Field '${Ce}' is specified in your field mask but missing from your input data.`);__PRIVATE_fieldMaskContains($e,Ce)||$e.push(Ce)}Ve=new FieldMask($e),De=Re.fieldTransforms.filter(Oe=>Ve.covers(Oe.field))}else Ve=null,De=Re.fieldTransforms;return new ParsedSetData(new ObjectValue$1(Me),Ve,De)}class __PRIVATE_DeleteFieldValueImpl extends FieldValue{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof __PRIVATE_DeleteFieldValueImpl}}class __PRIVATE_ServerTimestampFieldValueImpl extends FieldValue{_toFieldTransform(e){return new FieldTransform(e.path,new __PRIVATE_ServerTimestampTransform)}isEqual(e){return e instanceof __PRIVATE_ServerTimestampFieldValueImpl}}function __PRIVATE_parseUpdateData(n,e,t,r){const Ee=n.Dc(1,e,t);__PRIVATE_validatePlainObject("Data must be an object, but it was:",Ee,r);const Te=[],Re=ObjectValue$1.empty();forEach$1(r,(Ve,De)=>{const $e=__PRIVATE_fieldPathFromDotSeparatedString(e,Ve,t);De=getModularInstance(De);const Oe=Ee.gc($e);if(De instanceof __PRIVATE_DeleteFieldValueImpl)Te.push($e);else{const Ce=__PRIVATE_parseData(De,Oe);Ce!=null&&(Te.push($e),Re.set($e,Ce))}});const Me=new FieldMask(Te);return new ParsedUpdateData(Re,Me,Ee.fieldTransforms)}function __PRIVATE_parseUpdateVarargs(n,e,t,r,Ee,Te){const Re=n.Dc(1,e,t),Me=[__PRIVATE_fieldPathFromArgument$1(e,r,t)],Ve=[Ee];if(Te.length%2!=0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ce=0;Ce<Te.length;Ce+=2)Me.push(__PRIVATE_fieldPathFromArgument$1(e,Te[Ce])),Ve.push(Te[Ce+1]);const De=[],$e=ObjectValue$1.empty();for(let Ce=Me.length-1;Ce>=0;--Ce)if(!__PRIVATE_fieldMaskContains(De,Me[Ce])){const Be=Me[Ce];let Ue=Ve[Ce];Ue=getModularInstance(Ue);const We=Re.gc(Be);if(Ue instanceof __PRIVATE_DeleteFieldValueImpl)De.push(Be);else{const He=__PRIVATE_parseData(Ue,We);He!=null&&(De.push(Be),$e.set(Be,He))}}const Oe=new FieldMask(De);return new ParsedUpdateData($e,Oe,Re.fieldTransforms)}function __PRIVATE_parseQueryValue(n,e,t,r=!1){return __PRIVATE_parseData(t,n.Dc(r?4:3,e))}function __PRIVATE_parseData(n,e){if(__PRIVATE_looksLikeJsonObject(n=getModularInstance(n)))return __PRIVATE_validatePlainObject("Unsupported field value:",e,n),__PRIVATE_parseObject(n,e);if(n instanceof FieldValue)return function(r,Ee){if(!__PRIVATE_isWrite(Ee.Ec))throw Ee.wc(`${r._methodName}() can only be used with update() and set()`);if(!Ee.path)throw Ee.wc(`${r._methodName}() is not currently supported inside arrays`);const Te=r._toFieldTransform(Ee);Te&&Ee.fieldTransforms.push(Te)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,Ee){const Te=[];let Re=0;for(const Me of r){let Ve=__PRIVATE_parseData(Me,Ee.yc(Re));Ve==null&&(Ve={nullValue:"NULL_VALUE"}),Te.push(Ve),Re++}return{arrayValue:{values:Te}}}(n,e)}return function(r,Ee){if((r=getModularInstance(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return toNumber(Ee.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const Te=Timestamp.fromDate(r);return{timestampValue:toTimestamp(Ee.serializer,Te)}}if(r instanceof Timestamp){const Te=new Timestamp(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:toTimestamp(Ee.serializer,Te)}}if(r instanceof GeoPoint)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Bytes)return{bytesValue:__PRIVATE_toBytes(Ee.serializer,r._byteString)};if(r instanceof DocumentReference){const Te=Ee.databaseId,Re=r.firestore._databaseId;if(!Re.isEqual(Te))throw Ee.wc(`Document reference is for database ${Re.projectId}/${Re.database} but should be for database ${Te.projectId}/${Te.database}`);return{referenceValue:__PRIVATE_toResourceName(r.firestore._databaseId||Ee.databaseId,r._key.path)}}if(r instanceof VectorValue)return function(Re,Me){return{mapValue:{fields:{[ct$1]:{stringValue:Pt$1},[Tt$1]:{arrayValue:{values:Re.toArray().map(De=>{if(typeof De!="number")throw Me.wc("VectorValues must only contain numeric values.");return __PRIVATE_toDouble(Me.serializer,De)})}}}}}}(r,Ee);throw Ee.wc(`Unsupported field value: ${__PRIVATE_valueDescription(r)}`)}(n,e)}function __PRIVATE_parseObject(n,e){const t={};return isEmpty$1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):forEach$1(n,(r,Ee)=>{const Te=__PRIVATE_parseData(Ee,e.Vc(r));Te!=null&&(t[r]=Te)}),{mapValue:{fields:t}}}function __PRIVATE_looksLikeJsonObject(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Timestamp||n instanceof GeoPoint||n instanceof Bytes||n instanceof DocumentReference||n instanceof FieldValue||n instanceof VectorValue)}function __PRIVATE_validatePlainObject(n,e,t){if(!__PRIVATE_looksLikeJsonObject(t)||!__PRIVATE_isPlainObject(t)){const r=__PRIVATE_valueDescription(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function __PRIVATE_fieldPathFromArgument$1(n,e,t){if((e=getModularInstance(e))instanceof FieldPath)return e._internalPath;if(typeof e=="string")return __PRIVATE_fieldPathFromDotSeparatedString(n,e);throw __PRIVATE_createError("Field path arguments must be of type string or ",n,!1,void 0,t)}const ln$1=new RegExp("[~\\*/\\[\\]]");function __PRIVATE_fieldPathFromDotSeparatedString(n,e,t){if(e.search(ln$1)>=0)throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new FieldPath(...e.split("."))._internalPath}catch{throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function __PRIVATE_createError(n,e,t,r,Ee){const Te=r&&!r.isEmpty(),Re=Ee!==void 0;let Me=`Function ${e}() called with invalid data`;t&&(Me+=" (via `toFirestore()`)"),Me+=". ";let Ve="";return(Te||Re)&&(Ve+=" (found",Te&&(Ve+=` in field ${r}`),Re&&(Ve+=` in document ${Ee}`),Ve+=")"),new FirestoreError(N$1.INVALID_ARGUMENT,Me+n+Ve)}function __PRIVATE_fieldMaskContains(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSnapshot$1{constructor(e,t,r,Ee,Te){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=Ee,this._converter=Te}get id(){return this._key.path.lastSegment()}get ref(){return new DocumentReference(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QueryDocumentSnapshot$1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class QueryDocumentSnapshot$1 extends DocumentSnapshot$1{data(){return super.data()}}function __PRIVATE_fieldPathFromArgument(n,e){return typeof e=="string"?__PRIVATE_fieldPathFromDotSeparatedString(n,e):e instanceof FieldPath?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateHasExplicitOrderByForLimitToLast(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new FirestoreError(N$1.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AppliableConstraint{}class QueryConstraint extends AppliableConstraint{}function query(n,e,...t){let r=[];e instanceof AppliableConstraint&&r.push(e),r=r.concat(t),function(Te){const Re=Te.filter(Ve=>Ve instanceof QueryCompositeFilterConstraint).length,Me=Te.filter(Ve=>Ve instanceof QueryFieldFilterConstraint).length;if(Re>1||Re>0&&Me>0)throw new FirestoreError(N$1.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const Ee of r)n=Ee._apply(n);return n}class QueryFieldFilterConstraint extends QueryConstraint{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new QueryFieldFilterConstraint(e,t,r)}_apply(e){const t=this._parse(e);return __PRIVATE_validateNewFieldFilter(e._query,t),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,t))}_parse(e){const t=__PRIVATE_newUserDataReader(e.firestore);return function(Te,Re,Me,Ve,De,$e,Oe){let Ce;if(De.isKeyField()){if($e==="array-contains"||$e==="array-contains-any")throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid Query. You can't perform '${$e}' queries on documentId().`);if($e==="in"||$e==="not-in"){__PRIVATE_validateDisjunctiveFilterElements(Oe,$e);const Ue=[];for(const We of Oe)Ue.push(__PRIVATE_parseDocumentIdValue(Ve,Te,We));Ce={arrayValue:{values:Ue}}}else Ce=__PRIVATE_parseDocumentIdValue(Ve,Te,Oe)}else $e!=="in"&&$e!=="not-in"&&$e!=="array-contains-any"||__PRIVATE_validateDisjunctiveFilterElements(Oe,$e),Ce=__PRIVATE_parseQueryValue(Me,Re,Oe,$e==="in"||$e==="not-in");return FieldFilter.create(De,$e,Ce)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class QueryCompositeFilterConstraint extends AppliableConstraint{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new QueryCompositeFilterConstraint(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:CompositeFilter.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(Ee,Te){let Re=Ee;const Me=Te.getFlattenedFilters();for(const Ve of Me)__PRIVATE_validateNewFieldFilter(Re,Ve),Re=__PRIVATE_queryWithAddedFilter(Re,Ve)}(e._query,t),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class QueryOrderByConstraint extends QueryConstraint{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new QueryOrderByConstraint(e,t)}_apply(e){const t=function(Ee,Te,Re){if(Ee.startAt!==null)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(Ee.endAt!==null)throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new OrderBy(Te,Re)}(e._query,this._field,this._direction);return new Query(e.firestore,e.converter,function(Ee,Te){const Re=Ee.explicitOrderBy.concat([Te]);return new __PRIVATE_QueryImpl(Ee.path,Ee.collectionGroup,Re,Ee.filters.slice(),Ee.limit,Ee.limitType,Ee.startAt,Ee.endAt)}(e._query,t))}}function orderBy(n,e="asc"){const t=e,r=__PRIVATE_fieldPathFromArgument("orderBy",n);return QueryOrderByConstraint._create(r,t)}function __PRIVATE_parseDocumentIdValue(n,e,t){if(typeof(t=getModularInstance(t))=="string"){if(t==="")throw new FirestoreError(N$1.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!__PRIVATE_isCollectionGroupQuery(e)&&t.indexOf("/")!==-1)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ResourcePath.fromString(t));if(!DocumentKey.isDocumentKey(r))throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return __PRIVATE_refValue(n,new DocumentKey(r))}if(t instanceof DocumentReference)return __PRIVATE_refValue(n,t._key);throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${__PRIVATE_valueDescription(t)}.`)}function __PRIVATE_validateDisjunctiveFilterElements(n,e){if(!Array.isArray(n)||n.length===0)throw new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function __PRIVATE_validateNewFieldFilter(n,e){const t=function(Ee,Te){for(const Re of Ee)for(const Me of Re.getFlattenedFilters())if(Te.indexOf(Me.op)>=0)return Me.op;return null}(n.filters,function(Ee){switch(Ee){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new FirestoreError(N$1.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class AbstractUserDataWriter{convertValue(e,t="none"){switch(__PRIVATE_typeOrder(e)){case 0:return null;case 1:return e.booleanValue;case 2:return __PRIVATE_normalizeNumber(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(__PRIVATE_normalizeByteString(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw fail(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return forEach$1(e,(Ee,Te)=>{r[Ee]=this.convertValue(Te,t)}),r}convertVectorValue(e){var t,r,Ee;const Te=(Ee=(r=(t=e.fields)===null||t===void 0?void 0:t[Tt$1].arrayValue)===null||r===void 0?void 0:r.values)===null||Ee===void 0?void 0:Ee.map(Re=>__PRIVATE_normalizeNumber(Re.doubleValue));return new VectorValue(Te)}convertGeoPoint(e){return new GeoPoint(__PRIVATE_normalizeNumber(e.latitude),__PRIVATE_normalizeNumber(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=__PRIVATE_getPreviousValue(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(__PRIVATE_getLocalWriteTime(e));default:return null}}convertTimestamp(e){const t=__PRIVATE_normalizeTimestamp(e);return new Timestamp(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ResourcePath.fromString(e);__PRIVATE_hardAssert(__PRIVATE_isValidResourceName(r),9688,{name:e});const Ee=new DatabaseId(r.get(1),r.get(3)),Te=new DocumentKey(r.popFirst(5));return Ee.isEqual(t)||__PRIVATE_logError(`Document ${Te} contains a document reference within a different database (${Ee.projectId}/${Ee.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),Te}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_applyFirestoreDataConverter(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class SnapshotMetadata{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DocumentSnapshot extends DocumentSnapshot$1{constructor(e,t,r,Ee,Te,Re){super(e,t,r,Ee,Re),this._firestore=e,this._firestoreImpl=e,this.metadata=Te}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new QueryDocumentSnapshot(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new FirestoreError(N$1.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=DocumentSnapshot._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}DocumentSnapshot._jsonSchemaVersion="firestore/documentSnapshot/1.0",DocumentSnapshot._jsonSchema={type:property("string",DocumentSnapshot._jsonSchemaVersion),bundleSource:property("string","DocumentSnapshot"),bundleName:property("string"),bundle:property("string")};class QueryDocumentSnapshot extends DocumentSnapshot{data(e={}){return super.data(e)}}class QuerySnapshot{constructor(e,t,r,Ee){this._firestore=e,this._userDataWriter=t,this._snapshot=Ee,this.metadata=new SnapshotMetadata(Ee.hasPendingWrites,Ee.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new QueryDocumentSnapshot(this._firestore,this._userDataWriter,r.key,r,new SnapshotMetadata(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new FirestoreError(N$1.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(Ee,Te){if(Ee._snapshot.oldDocs.isEmpty()){let Re=0;return Ee._snapshot.docChanges.map(Me=>{const Ve=new QueryDocumentSnapshot(Ee._firestore,Ee._userDataWriter,Me.doc.key,Me.doc,new SnapshotMetadata(Ee._snapshot.mutatedKeys.has(Me.doc.key),Ee._snapshot.fromCache),Ee.query.converter);return Me.doc,{type:"added",doc:Ve,oldIndex:-1,newIndex:Re++}})}{let Re=Ee._snapshot.oldDocs;return Ee._snapshot.docChanges.filter(Me=>Te||Me.type!==3).map(Me=>{const Ve=new QueryDocumentSnapshot(Ee._firestore,Ee._userDataWriter,Me.doc.key,Me.doc,new SnapshotMetadata(Ee._snapshot.mutatedKeys.has(Me.doc.key),Ee._snapshot.fromCache),Ee.query.converter);let De=-1,$e=-1;return Me.type!==0&&(De=Re.indexOf(Me.doc.key),Re=Re.delete(Me.doc.key)),Me.type!==1&&(Re=Re.add(Me.doc),$e=Re.indexOf(Me.doc.key)),{type:__PRIVATE_resultChangeType(Me.type),doc:Ve,oldIndex:De,newIndex:$e}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new FirestoreError(N$1.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=QuerySnapshot._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=__PRIVATE_AutoId.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],Ee=[];return this.docs.forEach(Te=>{Te._document!==null&&(t.push(Te._document),r.push(this._userDataWriter.convertObjectMap(Te._document.data.value.mapValue.fields,"previous")),Ee.push(Te.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function __PRIVATE_resultChangeType(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fail(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getDoc(n){n=__PRIVATE_cast(n,DocumentReference);const e=__PRIVATE_cast(n.firestore,Firestore);return __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(ensureFirestoreConfigured(e),n._key).then(t=>__PRIVATE_convertToDocSnapshot(e,n,t))}QuerySnapshot._jsonSchemaVersion="firestore/querySnapshot/1.0",QuerySnapshot._jsonSchema={type:property("string",QuerySnapshot._jsonSchemaVersion),bundleSource:property("string","QuerySnapshot"),bundleName:property("string"),bundle:property("string")};class __PRIVATE_ExpUserDataWriter extends AbstractUserDataWriter{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bytes(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new DocumentReference(this.firestore,null,t)}}function setDoc(n,e,t){n=__PRIVATE_cast(n,DocumentReference);const r=__PRIVATE_cast(n.firestore,Firestore),Ee=__PRIVATE_applyFirestoreDataConverter(n.converter,e);return executeWrite(r,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(r),"setDoc",n._key,Ee,n.converter!==null,t).toMutation(n._key,Precondition.none())])}function updateDoc(n,e,t,...r){n=__PRIVATE_cast(n,DocumentReference);const Ee=__PRIVATE_cast(n.firestore,Firestore),Te=__PRIVATE_newUserDataReader(Ee);let Re;return Re=typeof(e=getModularInstance(e))=="string"||e instanceof FieldPath?__PRIVATE_parseUpdateVarargs(Te,"updateDoc",n._key,e,t,r):__PRIVATE_parseUpdateData(Te,"updateDoc",n._key,e),executeWrite(Ee,[Re.toMutation(n._key,Precondition.exists(!0))])}function addDoc(n,e){const t=__PRIVATE_cast(n.firestore,Firestore),r=doc(n),Ee=__PRIVATE_applyFirestoreDataConverter(n.converter,e);return executeWrite(t,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(n.firestore),"addDoc",r._key,Ee,n.converter!==null,{}).toMutation(r._key,Precondition.exists(!1))]).then(()=>r)}function onSnapshot(n,...e){var t,r,Ee;n=getModularInstance(n);let Te={includeMetadataChanges:!1,source:"default"},Re=0;typeof e[Re]!="object"||__PRIVATE_isPartialObserver(e[Re])||(Te=e[Re++]);const Me={includeMetadataChanges:Te.includeMetadataChanges,source:Te.source};if(__PRIVATE_isPartialObserver(e[Re])){const Oe=e[Re];e[Re]=(t=Oe.next)===null||t===void 0?void 0:t.bind(Oe),e[Re+1]=(r=Oe.error)===null||r===void 0?void 0:r.bind(Oe),e[Re+2]=(Ee=Oe.complete)===null||Ee===void 0?void 0:Ee.bind(Oe)}let Ve,De,$e;if(n instanceof DocumentReference)De=__PRIVATE_cast(n.firestore,Firestore),$e=__PRIVATE_newQueryForPath(n._key.path),Ve={next:Oe=>{e[Re]&&e[Re](__PRIVATE_convertToDocSnapshot(De,n,Oe))},error:e[Re+1],complete:e[Re+2]};else{const Oe=__PRIVATE_cast(n,Query);De=__PRIVATE_cast(Oe.firestore,Firestore),$e=Oe._query;const Ce=new __PRIVATE_ExpUserDataWriter(De);Ve={next:Be=>{e[Re]&&e[Re](new QuerySnapshot(De,Ce,Oe,Be))},error:e[Re+1],complete:e[Re+2]},__PRIVATE_validateHasExplicitOrderByForLimitToLast(n._query)}return function(Ce,Be,Ue,We){const He=new __PRIVATE_AsyncObserver(We),Ge=new __PRIVATE_QueryListener(Be,He,Ue);return Ce.asyncQueue.enqueueAndForget(async()=>__PRIVATE_eventManagerListen(await __PRIVATE_getEventManager(Ce),Ge)),()=>{He.Ou(),Ce.asyncQueue.enqueueAndForget(async()=>__PRIVATE_eventManagerUnlisten(await __PRIVATE_getEventManager(Ce),Ge))}}(ensureFirestoreConfigured(De),$e,Me,Ve)}function executeWrite(n,e){return function(r,Ee){const Te=new __PRIVATE_Deferred;return r.asyncQueue.enqueueAndForget(async()=>__PRIVATE_syncEngineWrite(await __PRIVATE_getSyncEngine(r),Ee,Te)),Te.promise}(ensureFirestoreConfigured(n),e)}function __PRIVATE_convertToDocSnapshot(n,e,t){const r=t.docs.get(e._key),Ee=new __PRIVATE_ExpUserDataWriter(n);return new DocumentSnapshot(n,Ee,e._key,r,new SnapshotMetadata(t.hasPendingWrites,t.fromCache),e.converter)}function serverTimestamp(){return new __PRIVATE_ServerTimestampFieldValueImpl("serverTimestamp")}(function(e,t=!0){(function(Ee){x$2=Ee})(SDK_VERSION),_registerComponent(new Component("firestore",(r,{instanceIdentifier:Ee,options:Te})=>{const Re=r.getProvider("app").getImmediate(),Me=new Firestore(new __PRIVATE_FirebaseAuthCredentialsProvider(r.getProvider("auth-internal")),new __PRIVATE_FirebaseAppCheckTokenProvider(Re,r.getProvider("app-check-internal")),function(De,$e){if(!Object.prototype.hasOwnProperty.apply(De.options,["projectId"]))throw new FirestoreError(N$1.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DatabaseId(De.options.projectId,$e)}(Re,Ee),Re);return Te=Object.assign({useFetchStreams:t},Te),Me._setSettings(Te),Me},"PUBLIC").setMultipleInstances(!0)),registerVersion(F$1,M$1,e),registerVersion(F$1,M$1,"esm2017")})();const firebaseConfig={apiKey:"AIzaSyCHS52OJz8dlhTOA3BFv3lhTT02v6BfZM8",authDomain:"edgex-e6582.firebaseapp.com",projectId:"edgex-e6582",storageBucket:"edgex-e6582.appspot.com",messagingSenderId:"1005678739291",appId:"1:1005678739291:web:29360b6d2d6f2ef884e47e",measurementId:"G-MX6KJMJH62"},app=initializeApp(firebaseConfig),db=getFirestore(app),auth=getAuth(app);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase$1=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),toPascalCase=n=>{const e=toCamelCase$1(n);return e.charAt(0).toUpperCase()+e.slice(1)},mergeClasses=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),hasA11yProp=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon=reactExports.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:Ee="",children:Te,iconNode:Re,...Me},Ve)=>reactExports.createElement("svg",{ref:Ve,...defaultAttributes,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:mergeClasses("lucide",Ee),...!Te&&!hasA11yProp(Me)&&{"aria-hidden":"true"},...Me},[...Re.map(([De,$e])=>reactExports.createElement(De,$e)),...Array.isArray(Te)?Te:[Te]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(n,e)=>{const t=reactExports.forwardRef(({className:r,...Ee},Te)=>reactExports.createElement(Icon,{ref:Te,iconNode:e,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(n))}`,`lucide-${n}`,r),...Ee}));return t.displayName=toPascalCase(n),t};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$r=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ArrowLeft=createLucideIcon("arrow-left",__iconNode$r);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$q=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ArrowRight=createLucideIcon("arrow-right",__iconNode$q);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$p=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Award=createLucideIcon("award",__iconNode$p);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$o=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],BookOpen=createLucideIcon("book-open",__iconNode$o);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$n=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],Brain=createLucideIcon("brain",__iconNode$n);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$m=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}],["path",{d:"M8 12h8",key:"1wcyev"}]],CircleArrowRight=createLucideIcon("circle-arrow-right",__iconNode$m);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$l=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],CirclePlus=createLucideIcon("circle-plus",__iconNode$l);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$k=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],CircleStop=createLucideIcon("circle-stop",__iconNode$k);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$j=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],CircleUser=createLucideIcon("circle-user",__iconNode$j);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$i=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],EyeOff=createLucideIcon("eye-off",__iconNode$i);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$h=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Eye=createLucideIcon("eye",__iconNode$h);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$g=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],FileText=createLucideIcon("file-text",__iconNode$g);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$f=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],GraduationCap=createLucideIcon("graduation-cap",__iconNode$f);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$e=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],House=createLucideIcon("house",__iconNode$e);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$d=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Lock=createLucideIcon("lock",__iconNode$d);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$c=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],LogOut=createLucideIcon("log-out",__iconNode$c);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$b=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Mail=createLucideIcon("mail",__iconNode$b);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$a=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Menu=createLucideIcon("menu",__iconNode$a);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$9=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],MessageSquare=createLucideIcon("message-square",__iconNode$9);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$8=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Mic=createLucideIcon("mic",__iconNode$8);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$7=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],Moon=createLucideIcon("moon",__iconNode$7);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$6=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],NotebookPen=createLucideIcon("notebook-pen",__iconNode$6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$5=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],SendHorizontal=createLucideIcon("send-horizontal",__iconNode$5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Sun=createLucideIcon("sun",__iconNode$4);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Target=createLucideIcon("target",__iconNode$3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],User=createLucideIcon("user",__iconNode$2);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Volume2=createLucideIcon("volume-2",__iconNode$1);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X$1=createLucideIcon("x",__iconNode),Navbar=({isAuthenticated:n,onLogout:e,user:t})=>{const[r,Ee]=reactExports.useState(!1),[Te,Re]=reactExports.useState(!1),Me=useNavigate(),Ve=useLocation(),De=[{id:"home",label:"Home",icon:House,path:"/",description:"Return to main dashboard"},{id:"careercrack",label:"CareerCrack",icon:Brain,path:"/careercrack",description:"AI-powered career advice"},{id:"moodmirror",label:"MoodMirror",icon:MessageSquare,path:"/moodmirror",description:"Mental wellness companion"},{id:"smartnotes",label:"SmartNotes",icon:FileText,path:"/smartnotes",description:"Intelligent note-taking"},{id:"scholarships",label:"ScholarshipScout",icon:Award,path:"/scholarships",description:"Find scholarships"},{id:"voicefeedback",label:"VoiceFeedback",icon:Mic,path:"/voicefeedback",description:"Voice-powered insights"},{id:"resourcevault",label:"ResourceVault",icon:BookOpen,path:"/resourcevault",description:"Discover resources"}],Oe=(()=>{const Ge=Ve.pathname,Ye=De.find(Je=>Je.path===Ge);return Ye?Ye.id:"home"})(),Ce=Ge=>{Me(Ge.path),Ee(!1)},Be=async()=>{try{await signOut(auth),e&&e(),Me("/"),Re(!1),Ee(!1)}catch(Ge){console.error("Logout error:",Ge)}},Ue=()=>{Ee(Ge=>{const Ye=!Ge;return Ye?document.body.classList.add("no-scroll"):document.body.classList.remove("no-scroll"),Ye})},We=()=>{Re(!Te)};React.useEffect(()=>{const Ge=Ye=>{Te&&!Ye.target.closest(".profile-menu-container")&&Re(!1)};return document.addEventListener("mousedown",Ge),()=>{document.removeEventListener("mousedown",Ge)}},[Te]);const He=()=>t?jsxRuntimeExports.jsxs("div",{className:"relative profile-menu-container",children:[jsxRuntimeExports.jsx("button",{onClick:We,className:"flex items-center justify-center p-2 bg-purple-700 hover:bg-purple-600 text-white rounded-full text-sm font-medium transition-colors duration-200 w-10 h-10",title:t.email||"User Profile",children:jsxRuntimeExports.jsx(CircleUser,{className:"h-6 w-6"})}),Te&&jsxRuntimeExports.jsxs("div",{className:"absolute right-0 mt-2 py-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[jsxRuntimeExports.jsxs("div",{className:"px-4 py-2 border-b border-gray-200",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.email||"User"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"Signed in"})]}),jsxRuntimeExports.jsxs("button",{onClick:Be,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors duration-200",children:[jsxRuntimeExports.jsx(LogOut,{className:"h-4 w-4 mr-2"}),jsxRuntimeExports.jsx("span",{children:"Sign out"})]})]})]}):jsxRuntimeExports.jsxs(Link,{to:"/login",className:"flex items-center space-x-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg text-sm font-medium transition-colors duration-200",title:"Sign in to EDGEx",children:[jsxRuntimeExports.jsx(CircleUser,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"hidden xl:block",children:"Sign In"})]});return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("nav",{className:"bg-gradient-to-r from-purple-900 via-purple-800 to-indigo-900 border-b border-purple-700/30 sticky top-0 z-50",children:[jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center h-16",children:[jsxRuntimeExports.jsxs(Link,{to:"/",className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("div",{className:"bg-purple-600 p-2 rounded-lg",children:jsxRuntimeExports.jsx(Brain,{className:"h-6 w-6 text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h1",{className:"text-xl font-bold text-white",children:["EDGE",jsxRuntimeExports.jsx("span",{className:"text-purple-300",children:"x"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-purple-200 hidden sm:block",children:"AI Toolkit"})]})]}),jsxRuntimeExports.jsx("div",{className:"hidden lg:flex items-center space-x-2",children:De.map(Ge=>{const Ye=Ge.icon,Je=Oe===Ge.id;return jsxRuntimeExports.jsxs("button",{onClick:()=>Ce(Ge),className:`
                      flex items-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200
                      ${Je?"bg-purple-700 text-white":"text-purple-100 hover:text-white hover:bg-purple-700/50"}
                    `,title:Ge.description,children:[jsxRuntimeExports.jsx(Ye,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"hidden xl:block",children:Ge.label})]},Ge.id)})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-3",children:[jsxRuntimeExports.jsxs("div",{className:"hidden lg:flex items-center space-x-2",children:[renderThemeToggle(),jsxRuntimeExports.jsx("div",{className:"hidden lg:block",children:He()})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center lg:hidden",children:renderThemeToggle()}),jsxRuntimeExports.jsx("button",{onClick:Ue,className:"lg:hidden p-2 rounded-lg text-purple-100 hover:text-white hover:bg-purple-700/50 transition-colors duration-200","aria-label":"Toggle navigation menu",children:r?jsxRuntimeExports.jsx(X$1,{className:"h-6 w-6"}):jsxRuntimeExports.jsx(Menu,{className:"h-6 w-6"})})]})]})}),jsxRuntimeExports.jsx("div",{className:`lg:hidden transition-all duration-300 ${r?"max-h-screen opacity-100":"max-h-0 opacity-0"}`,children:jsxRuntimeExports.jsxs("div",{className:"px-4 pt-2 pb-4 space-y-1 bg-purple-900/95 backdrop-blur-sm border-t border-purple-700/30 overflow-y-auto max-h-[calc(100vh-4rem)]",children:[De.map(Ge=>{const Ye=Ge.icon,Je=Oe===Ge.id;return jsxRuntimeExports.jsxs("button",{onClick:()=>Ce(Ge),className:`
                    w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-all duration-200
                    ${Je?"bg-purple-700 text-white":"text-purple-100 hover:text-white hover:bg-purple-700/50"}
                  `,children:[jsxRuntimeExports.jsx(Ye,{className:"h-5 w-5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:Ge.label}),jsxRuntimeExports.jsx("div",{className:"text-xs text-purple-300",children:Ge.description})]})]},Ge.id)}),jsxRuntimeExports.jsx("div",{className:"mt-4 pt-4 border-t border-purple-700/30",children:t?jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"px-4 py-2",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-white truncate",children:t.email||"User"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-purple-300",children:"Signed in"})]}),jsxRuntimeExports.jsxs("button",{onClick:Be,className:"w-full flex items-center space-x-3 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors duration-200",children:[jsxRuntimeExports.jsx(LogOut,{className:"h-5 w-5"}),jsxRuntimeExports.jsx("div",{className:"font-medium",children:"Sign out"})]})]}):jsxRuntimeExports.jsxs(Link,{to:"/login",className:"w-full flex items-center space-x-3 px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors duration-200",onClick:()=>Ee(!1),children:[jsxRuntimeExports.jsx(CircleUser,{className:"h-5 w-5"}),jsxRuntimeExports.jsx("div",{className:"font-medium",children:"Sign In"})]})})]})})]})})};var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),_excluded=["attr","size","title"];function _objectWithoutProperties(n,e){if(n==null)return{};var t=_objectWithoutPropertiesLoose(n,e),r,Ee;if(Object.getOwnPropertySymbols){var Te=Object.getOwnPropertySymbols(n);for(Ee=0;Ee<Te.length;Ee++)r=Te[Ee],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function _objectWithoutPropertiesLoose(n,e){if(n==null)return{};var t={};for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){if(e.indexOf(r)>=0)continue;t[r]=n[r]}return t}function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(this,arguments)}function ownKeys(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(Ee){return Object.getOwnPropertyDescriptor(n,Ee).enumerable})),t.push.apply(t,r)}return t}function _objectSpread(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function _defineProperty(n,e,t){return e=_toPropertyKey(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function _toPropertyKey(n){var e=_toPrimitive(n,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Tree2Element(n){return n&&n.map((e,t)=>React.createElement(e.tag,_objectSpread({key:t},e.attr),Tree2Element(e.child)))}function GenIcon(n){return e=>React.createElement(IconBase,_extends({attr:_objectSpread({},n.attr)},e),Tree2Element(n.child))}function IconBase(n){var e=t=>{var{attr:r,size:Ee,title:Te}=n,Re=_objectWithoutProperties(n,_excluded),Me=Ee||t.size||"1em",Ve;return t.className&&(Ve=t.className),n.className&&(Ve=(Ve?Ve+" ":"")+n.className),React.createElement("svg",_extends({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,Re,{className:Ve,style:_objectSpread(_objectSpread({color:n.color||t.color},t.style),n.style),height:Me,width:Me,xmlns:"http://www.w3.org/2000/svg"}),Te&&React.createElement("title",null,Te),n.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,t=>e(t)):e(DefaultContext)}function FaGithub(n){return GenIcon({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"},child:[]}]})(n)}function FaLinkedin(n){return GenIcon({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"},child:[]}]})(n)}function FaArrowUp(n){return GenIcon({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"},child:[]}]})(n)}function FaRobot(n){return GenIcon({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M32,224H64V416H32A31.96166,31.96166,0,0,1,0,384V256A31.96166,31.96166,0,0,1,32,224Zm512-48V448a64.06328,64.06328,0,0,1-64,64H160a64.06328,64.06328,0,0,1-64-64V176a79.974,79.974,0,0,1,80-80H288V32a32,32,0,0,1,64,0V96H464A79.974,79.974,0,0,1,544,176ZM264,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,264,256Zm-8,128H192v32h64Zm96,0H288v32h64ZM456,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,456,256Zm-8,128H384v32h64ZM640,256V384a31.96166,31.96166,0,0,1-32,32H576V224h32A31.96166,31.96166,0,0,1,640,256Z"},child:[]}]})(n)}function FaUserCircle(n){return GenIcon({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(n)}const LayoutGroupContext=reactExports.createContext({});function useConstant(n){const e=reactExports.useRef(null);return e.current===null&&(e.current=n()),e.current}const isBrowser=typeof window<"u",useIsomorphicLayoutEffect=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect,PresenceContext=reactExports.createContext(null);function addUniqueItem(n,e){n.indexOf(e)===-1&&n.push(e)}function removeItem(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const clamp=(n,e,t)=>t>e?e:t<n?n:t;let invariant=()=>{};const MotionGlobalConfig={},isNumericalString=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function isObject$1(n){return typeof n=="object"&&n!==null}const isZeroValueString=n=>/^0[^.\s]+$/u.test(n);function memo(n){let e;return()=>(e===void 0&&(e=n()),e)}const noop$1=n=>n,combineFunctions=(n,e)=>t=>e(n(t)),pipe=(...n)=>n.reduce(combineFunctions),progress=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class SubscriptionManager{constructor(){this.subscriptions=[]}add(e){return addUniqueItem(this.subscriptions,e),()=>removeItem(this.subscriptions,e)}notify(e,t,r){const Ee=this.subscriptions.length;if(Ee)if(Ee===1)this.subscriptions[0](e,t,r);else for(let Te=0;Te<Ee;Te++){const Re=this.subscriptions[Te];Re&&Re(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const secondsToMilliseconds=n=>n*1e3,millisecondsToSeconds=n=>n/1e3;function velocityPerSecond(n,e){return e?n*(1e3/e):0}const calcBezier=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(n,e,t,r,Ee){let Te,Re,Me=0;do Re=e+(t-e)/2,Te=calcBezier(Re,r,Ee)-n,Te>0?t=Re:e=Re;while(Math.abs(Te)>subdivisionPrecision&&++Me<subdivisionMaxIterations);return Re}function cubicBezier(n,e,t,r){if(n===e&&t===r)return noop$1;const Ee=Te=>binarySubdivide(Te,0,1,n,t);return Te=>Te===0||Te===1?Te:calcBezier(Ee(Te),e,r)}const mirrorEasing=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,reverseEasing=n=>e=>1-n(1-e),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=n=>(n*=2)<1?.5*backIn(n):.5*(2-Math.pow(2,-10*(n-1))),circIn=n=>1-Math.sin(Math.acos(n)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=n=>Array.isArray(n)&&typeof n[0]!="number",isBezierDefinition=n=>Array.isArray(n)&&typeof n[0]=="number",easingLookup={linear:noop$1,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},isValidEasing=n=>typeof n=="string",easingDefinitionToFunction=n=>{if(isBezierDefinition(n)){invariant(n.length===4);const[e,t,r,Ee]=n;return cubicBezier(e,t,r,Ee)}else if(isValidEasing(n))return easingLookup[n];return n},stepsOrder=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function createRenderStep(n,e){let t=new Set,r=new Set,Ee=!1,Te=!1;const Re=new WeakSet;let Me={delta:0,timestamp:0,isProcessing:!1};function Ve($e){Re.has($e)&&(De.schedule($e),n()),$e(Me)}const De={schedule:($e,Oe=!1,Ce=!1)=>{const Ue=Ce&&Ee?t:r;return Oe&&Re.add($e),Ue.has($e)||Ue.add($e),$e},cancel:$e=>{r.delete($e),Re.delete($e)},process:$e=>{if(Me=$e,Ee){Te=!0;return}Ee=!0,[t,r]=[r,t],t.forEach(Ve),t.clear(),Ee=!1,Te&&(Te=!1,De.process($e))}};return De}const maxElapsed$1=40;function createRenderBatcher(n,e){let t=!1,r=!0;const Ee={delta:0,timestamp:0,isProcessing:!1},Te=()=>t=!0,Re=stepsOrder.reduce((Je,Ze)=>(Je[Ze]=createRenderStep(Te),Je),{}),{setup:Me,read:Ve,resolveKeyframes:De,preUpdate:$e,update:Oe,preRender:Ce,render:Be,postRender:Ue}=Re,We=()=>{const Je=MotionGlobalConfig.useManualTiming?Ee.timestamp:performance.now();t=!1,MotionGlobalConfig.useManualTiming||(Ee.delta=r?1e3/60:Math.max(Math.min(Je-Ee.timestamp,maxElapsed$1),1)),Ee.timestamp=Je,Ee.isProcessing=!0,Me.process(Ee),Ve.process(Ee),De.process(Ee),$e.process(Ee),Oe.process(Ee),Ce.process(Ee),Be.process(Ee),Ue.process(Ee),Ee.isProcessing=!1,t&&e&&(r=!1,n(We))},He=()=>{t=!0,r=!0,Ee.isProcessing||n(We)};return{schedule:stepsOrder.reduce((Je,Ze)=>{const fn=Re[Ze];return Je[Ze]=(yn,mn=!1,pn=!1)=>(t||He(),fn.schedule(yn,mn,pn)),Je},{}),cancel:Je=>{for(let Ze=0;Ze<stepsOrder.length;Ze++)Re[stepsOrder[Ze]].cancel(Je)},state:Ee,steps:Re}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$1,!0);let now;function clearTime(){now=void 0}const time={now:()=>(now===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now),set:n=>{now=n,queueMicrotask(clearTime)}},checkStringStartsWith=n=>e=>typeof e=="string"&&e.startsWith(n),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=n=>startsAsVariableToken(n)?singleCssVariableRegex.test(n.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,number$1={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},alpha={...number$1,transform:n=>clamp(0,1,n)},scale={...number$1,default:1},sanitize=n=>Math.round(n*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(n){return n==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(n,e)=>t=>!!(typeof t=="string"&&singleColorRegex.test(t)&&t.startsWith(n)||e&&!isNullish(t)&&Object.prototype.hasOwnProperty.call(t,e)),splitColor=(n,e,t)=>r=>{if(typeof r!="string")return r;const[Ee,Te,Re,Me]=r.match(floatRegex);return{[n]:parseFloat(Ee),[e]:parseFloat(Te),[t]:parseFloat(Re),alpha:Me!==void 0?parseFloat(Me):1}},clampRgbUnit=n=>clamp(0,255,n),rgbUnit={...number$1,transform:n=>Math.round(clampRgbUnit(n))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+rgbUnit.transform(n)+", "+rgbUnit.transform(e)+", "+rgbUnit.transform(t)+", "+sanitize(alpha.transform(r))+")"};function parseHex(n){let e="",t="",r="",Ee="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),Ee=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),Ee=n.substring(4,5),e+=e,t+=t,r+=r,Ee+=Ee),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:Ee?parseInt(Ee,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},createUnitType=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:n=>percent.parse(n)/100,transform:n=>percent.transform(n*100)},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+percent.transform(sanitize(e))+", "+percent.transform(sanitize(t))+", "+sanitize(alpha.transform(r))+")"},color$1={test:n=>rgba.test(n)||hex.test(n)||hsla.test(n),parse:n=>rgba.test(n)?rgba.parse(n):hsla.test(n)?hsla.parse(n):hex.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?rgba.transform(n):hsla.transform(n),getAnimatableNone:n=>{const e=color$1.parse(n);return e.alpha=0,color$1.transform(e)}},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test$1(n){return isNaN(n)&&typeof n=="string"&&(n.match(floatRegex)?.length||0)+(n.match(colorRegex)?.length||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},Ee=[];let Te=0;const Me=e.replace(complexRegex,Ve=>(color$1.test(Ve)?(r.color.push(Te),Ee.push(COLOR_TOKEN),t.push(color$1.parse(Ve))):Ve.startsWith(VAR_FUNCTION_TOKEN)?(r.var.push(Te),Ee.push(VAR_TOKEN),t.push(Ve)):(r.number.push(Te),Ee.push(NUMBER_TOKEN),t.push(parseFloat(Ve))),++Te,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:t,split:Me,indexes:r,types:Ee}}function parseComplexValue(n){return analyseComplexValue(n).values}function createTransformer(n){const{split:e,types:t}=analyseComplexValue(n),r=e.length;return Ee=>{let Te="";for(let Re=0;Re<r;Re++)if(Te+=e[Re],Ee[Re]!==void 0){const Me=t[Re];Me===NUMBER_TOKEN?Te+=sanitize(Ee[Re]):Me===COLOR_TOKEN?Te+=color$1.transform(Ee[Re]):Te+=Ee[Re]}return Te}}const convertNumbersToZero=n=>typeof n=="number"?0:color$1.test(n)?color$1.getAnimatableNone(n):n;function getAnimatableNone$1(n){const e=parseComplexValue(n);return createTransformer(n)(e.map(convertNumbersToZero))}const complex={test:test$1,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1};function hueToRgb(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function hslaToRgba({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let Ee=0,Te=0,Re=0;if(!e)Ee=Te=Re=t;else{const Me=t<.5?t*(1+e):t+e-t*e,Ve=2*t-Me;Ee=hueToRgb(Ve,Me,n+1/3),Te=hueToRgb(Ve,Me,n),Re=hueToRgb(Ve,Me,n-1/3)}return{red:Math.round(Ee*255),green:Math.round(Te*255),blue:Math.round(Re*255),alpha:r}}function mixImmediate(n,e){return t=>t>0?e:n}const mixNumber$1=(n,e,t)=>n+(e-n)*t,mixLinearColor=(n,e,t)=>{const r=n*n,Ee=t*(e*e-r)+r;return Ee<0?0:Math.sqrt(Ee)},colorTypes=[hex,rgba,hsla],getColorType=n=>colorTypes.find(e=>e.test(n));function asRGBA(n){const e=getColorType(n);if(!e)return!1;let t=e.parse(n);return e===hsla&&(t=hslaToRgba(t)),t}const mixColor=(n,e)=>{const t=asRGBA(n),r=asRGBA(e);if(!t||!r)return mixImmediate(n,e);const Ee={...t};return Te=>(Ee.red=mixLinearColor(t.red,r.red,Te),Ee.green=mixLinearColor(t.green,r.green,Te),Ee.blue=mixLinearColor(t.blue,r.blue,Te),Ee.alpha=mixNumber$1(t.alpha,r.alpha,Te),rgba.transform(Ee))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(n,e){return invisibleValues.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function mixNumber(n,e){return t=>mixNumber$1(n,e,t)}function getMixer(n){return typeof n=="number"?mixNumber:typeof n=="string"?isCSSVariableToken(n)?mixImmediate:color$1.test(n)?mixColor:mixComplex:Array.isArray(n)?mixArray:typeof n=="object"?color$1.test(n)?mixColor:mixObject:mixImmediate}function mixArray(n,e){const t=[...n],r=t.length,Ee=n.map((Te,Re)=>getMixer(Te)(Te,e[Re]));return Te=>{for(let Re=0;Re<r;Re++)t[Re]=Ee[Re](Te);return t}}function mixObject(n,e){const t={...n,...e},r={};for(const Ee in t)n[Ee]!==void 0&&e[Ee]!==void 0&&(r[Ee]=getMixer(n[Ee])(n[Ee],e[Ee]));return Ee=>{for(const Te in r)t[Te]=r[Te](Ee);return t}}function matchOrder(n,e){const t=[],r={color:0,var:0,number:0};for(let Ee=0;Ee<e.values.length;Ee++){const Te=e.types[Ee],Re=n.indexes[Te][r[Te]],Me=n.values[Re]??0;t[Ee]=Me,r[Te]++}return t}const mixComplex=(n,e)=>{const t=complex.createTransformer(e),r=analyseComplexValue(n),Ee=analyseComplexValue(e);return r.indexes.var.length===Ee.indexes.var.length&&r.indexes.color.length===Ee.indexes.color.length&&r.indexes.number.length>=Ee.indexes.number.length?invisibleValues.has(n)&&!Ee.values.length||invisibleValues.has(e)&&!r.values.length?mixVisibility(n,e):pipe(mixArray(matchOrder(r,Ee),Ee.values),t):mixImmediate(n,e)};function mix(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?mixNumber$1(n,e,t):getMixer(n)(n,e)}const frameloopDriver=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>frame.update(e,t),stop:()=>cancelFrame(e),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generateLinearEasing=(n,e,t=10)=>{let r="";const Ee=Math.max(Math.round(e/t),2);for(let Te=0;Te<Ee;Te++)r+=Math.round(n(Te/(Ee-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},maxGeneratorDuration=2e4;function calcGeneratorDuration(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<maxGeneratorDuration;)e+=t,r=n.next(e);return e>=maxGeneratorDuration?1/0:e}function createGeneratorEasing(n,e=100,t){const r=t({...n,keyframes:[0,e]}),Ee=Math.min(calcGeneratorDuration(r),maxGeneratorDuration);return{type:"keyframes",ease:Te=>r.next(Ee*Te).value/e,duration:millisecondsToSeconds(Ee)}}const velocitySampleDuration=5;function calcGeneratorVelocity(n,e,t){const r=Math.max(e-velocitySampleDuration,0);return velocityPerSecond(t-n(r),e-r)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:n=springDefaults.duration,bounce:e=springDefaults.bounce,velocity:t=springDefaults.velocity,mass:r=springDefaults.mass}){let Ee,Te,Re=1-e;Re=clamp(springDefaults.minDamping,springDefaults.maxDamping,Re),n=clamp(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(n)),Re<1?(Ee=De=>{const $e=De*Re,Oe=$e*n,Ce=$e-t,Be=calcAngularFreq(De,Re),Ue=Math.exp(-Oe);return safeMin-Ce/Be*Ue},Te=De=>{const Oe=De*Re*n,Ce=Oe*t+t,Be=Math.pow(Re,2)*Math.pow(De,2)*n,Ue=Math.exp(-Oe),We=calcAngularFreq(Math.pow(De,2),Re);return(-Ee(De)+safeMin>0?-1:1)*((Ce-Be)*Ue)/We}):(Ee=De=>{const $e=Math.exp(-De*n),Oe=(De-t)*n+1;return-safeMin+$e*Oe},Te=De=>{const $e=Math.exp(-De*n),Oe=(t-De)*(n*n);return $e*Oe});const Me=5/n,Ve=approximateRoot(Ee,Te,Me);if(n=secondsToMilliseconds(n),isNaN(Ve))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:n};{const De=Math.pow(Ve,2)*r;return{stiffness:De,damping:Re*2*Math.sqrt(r*De),duration:n}}}const rootIterations=12;function approximateRoot(n,e,t){let r=t;for(let Ee=1;Ee<rootIterations;Ee++)r=r-n(r)/e(r);return r}function calcAngularFreq(n,e){return n*Math.sqrt(1-e*e)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(n,e){return e.some(t=>n[t]!==void 0)}function getSpringOptions(n){let e={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...n};if(!isSpringType(n,physicsKeys)&&isSpringType(n,durationKeys))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),Ee=r*r,Te=2*clamp(.05,1,1-(n.bounce||0))*Math.sqrt(Ee);e={...e,mass:springDefaults.mass,stiffness:Ee,damping:Te}}else{const t=findSpring(n);e={...e,...t,mass:springDefaults.mass},e.isResolvedFromDuration=!0}return e}function spring(n=springDefaults.visualDuration,e=springDefaults.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:Ee}=t;const Te=t.keyframes[0],Re=t.keyframes[t.keyframes.length-1],Me={done:!1,value:Te},{stiffness:Ve,damping:De,mass:$e,duration:Oe,velocity:Ce,isResolvedFromDuration:Be}=getSpringOptions({...t,velocity:-millisecondsToSeconds(t.velocity||0)}),Ue=Ce||0,We=De/(2*Math.sqrt(Ve*$e)),He=Re-Te,Ge=millisecondsToSeconds(Math.sqrt(Ve/$e)),Ye=Math.abs(He)<5;r||(r=Ye?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),Ee||(Ee=Ye?springDefaults.restDelta.granular:springDefaults.restDelta.default);let Je;if(We<1){const fn=calcAngularFreq(Ge,We);Je=yn=>{const mn=Math.exp(-We*Ge*yn);return Re-mn*((Ue+We*Ge*He)/fn*Math.sin(fn*yn)+He*Math.cos(fn*yn))}}else if(We===1)Je=fn=>Re-Math.exp(-Ge*fn)*(He+(Ue+Ge*He)*fn);else{const fn=Ge*Math.sqrt(We*We-1);Je=yn=>{const mn=Math.exp(-We*Ge*yn),pn=Math.min(fn*yn,300);return Re-mn*((Ue+We*Ge*He)*Math.sinh(pn)+fn*He*Math.cosh(pn))/fn}}const Ze={calculatedDuration:Be&&Oe||null,next:fn=>{const yn=Je(fn);if(Be)Me.done=fn>=Oe;else{let mn=fn===0?Ue:0;We<1&&(mn=fn===0?secondsToMilliseconds(Ue):calcGeneratorVelocity(Je,fn,yn));const pn=Math.abs(mn)<=r,un=Math.abs(Re-yn)<=Ee;Me.done=pn&&un}return Me.value=Me.done?Re:yn,Me},toString:()=>{const fn=Math.min(calcGeneratorDuration(Ze),maxGeneratorDuration),yn=generateLinearEasing(mn=>Ze.next(fn*mn).value,fn,30);return fn+"ms "+yn},toTransition:()=>{}};return Ze}spring.applyToOptions=n=>{const e=createGeneratorEasing(n,100,spring);return n.ease=e.ease,n.duration=secondsToMilliseconds(e.duration),n.type="keyframes",n};function inertia({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:Ee=10,bounceStiffness:Te=500,modifyTarget:Re,min:Me,max:Ve,restDelta:De=.5,restSpeed:$e}){const Oe=n[0],Ce={done:!1,value:Oe},Be=pn=>Me!==void 0&&pn<Me||Ve!==void 0&&pn>Ve,Ue=pn=>Me===void 0?Ve:Ve===void 0||Math.abs(Me-pn)<Math.abs(Ve-pn)?Me:Ve;let We=t*e;const He=Oe+We,Ge=Re===void 0?He:Re(He);Ge!==He&&(We=Ge-Oe);const Ye=pn=>-We*Math.exp(-pn/r),Je=pn=>Ge+Ye(pn),Ze=pn=>{const un=Ye(pn),bn=Je(pn);Ce.done=Math.abs(un)<=De,Ce.value=Ce.done?Ge:bn};let fn,yn;const mn=pn=>{Be(Ce.value)&&(fn=pn,yn=spring({keyframes:[Ce.value,Ue(Ce.value)],velocity:calcGeneratorVelocity(Je,pn,Ce.value),damping:Ee,stiffness:Te,restDelta:De,restSpeed:$e}))};return mn(0),{calculatedDuration:null,next:pn=>{let un=!1;return!yn&&fn===void 0&&(un=!0,Ze(pn),mn(pn)),fn!==void 0&&pn>=fn?yn.next(pn-fn):(!un&&Ze(pn),Ce)}}}function createMixers(n,e,t){const r=[],Ee=t||MotionGlobalConfig.mix||mix,Te=n.length-1;for(let Re=0;Re<Te;Re++){let Me=Ee(n[Re],n[Re+1]);if(e){const Ve=Array.isArray(e)?e[Re]||noop$1:e;Me=pipe(Ve,Me)}r.push(Me)}return r}function interpolate$1(n,e,{clamp:t=!0,ease:r,mixer:Ee}={}){const Te=n.length;if(invariant(Te===e.length),Te===1)return()=>e[0];if(Te===2&&e[0]===e[1])return()=>e[1];const Re=n[0]===n[1];n[0]>n[Te-1]&&(n=[...n].reverse(),e=[...e].reverse());const Me=createMixers(e,r,Ee),Ve=Me.length,De=$e=>{if(Re&&$e<n[0])return e[0];let Oe=0;if(Ve>1)for(;Oe<n.length-2&&!($e<n[Oe+1]);Oe++);const Ce=progress(n[Oe],n[Oe+1],$e);return Me[Oe](Ce)};return t?$e=>De(clamp(n[0],n[Te-1],$e)):De}function fillOffset(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const Ee=progress(0,e,r);n.push(mixNumber$1(t,1,Ee))}}function defaultOffset$1(n){const e=[0];return fillOffset(e,n.length-1),e}function convertOffsetToTimes(n,e){return n.map(t=>t*e)}function defaultEasing(n,e){return n.map(()=>e||easeInOut).splice(0,n.length-1)}function keyframes({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const Ee=isEasingArray(r)?r.map(easingDefinitionToFunction):easingDefinitionToFunction(r),Te={done:!1,value:e[0]},Re=convertOffsetToTimes(t&&t.length===e.length?t:defaultOffset$1(e),n),Me=interpolate$1(Re,e,{ease:Array.isArray(Ee)?Ee:defaultEasing(e,Ee)});return{calculatedDuration:n,next:Ve=>(Te.value=Me(Ve),Te.done=Ve>=n,Te)}}const isNotNull$1=n=>n!==null;function getFinalKeyframe$1(n,{repeat:e,repeatType:t="loop"},r,Ee=1){const Te=n.filter(isNotNull$1),Me=Ee<0||e&&t!=="loop"&&e%2===1?0:Te.length-1;return!Me||r===void 0?Te[Me]:r}const transitionTypeMap={decay:inertia,inertia,tween:keyframes,keyframes,spring};function replaceTransitionType(n){typeof n.type=="string"&&(n.type=transitionTypeMap[n.type])}class WithPromise{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const percentToProgress=n=>n/100;class JSAnimation extends WithPromise{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==time.now()&&this.tick(time.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;replaceTransitionType(e);const{type:t=keyframes,repeat:r=0,repeatDelay:Ee=0,repeatType:Te,velocity:Re=0}=e;let{keyframes:Me}=e;const Ve=t||keyframes;Ve!==keyframes&&typeof Me[0]!="number"&&(this.mixKeyframes=pipe(percentToProgress,mix(Me[0],Me[1])),Me=[0,100]);const De=Ve({...e,keyframes:Me});Te==="mirror"&&(this.mirroredGenerator=Ve({...e,keyframes:[...Me].reverse(),velocity:-Re})),De.calculatedDuration===null&&(De.calculatedDuration=calcGeneratorDuration(De));const{calculatedDuration:$e}=De;this.calculatedDuration=$e,this.resolvedDuration=$e+Ee,this.totalDuration=this.resolvedDuration*(r+1)-Ee,this.generator=De}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:Ee,mixKeyframes:Te,mirroredGenerator:Re,resolvedDuration:Me,calculatedDuration:Ve}=this;if(this.startTime===null)return r.next(0);const{delay:De=0,keyframes:$e,repeat:Oe,repeatType:Ce,repeatDelay:Be,type:Ue,onUpdate:We,finalKeyframe:He}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-Ee/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const Ge=this.currentTime-De*(this.playbackSpeed>=0?1:-1),Ye=this.playbackSpeed>=0?Ge<0:Ge>Ee;this.currentTime=Math.max(Ge,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=Ee);let Je=this.currentTime,Ze=r;if(Oe){const pn=Math.min(this.currentTime,Ee)/Me;let un=Math.floor(pn),bn=pn%1;!bn&&pn>=1&&(bn=1),bn===1&&un--,un=Math.min(un,Oe+1),!!(un%2)&&(Ce==="reverse"?(bn=1-bn,Be&&(bn-=Be/Me)):Ce==="mirror"&&(Ze=Re)),Je=clamp(0,1,bn)*Me}const fn=Ye?{done:!1,value:$e[0]}:Ze.next(Je);Te&&(fn.value=Te(fn.value));let{done:yn}=fn;!Ye&&Ve!==null&&(yn=this.playbackSpeed>=0?this.currentTime>=Ee:this.currentTime<=0);const mn=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&yn);return mn&&Ue!==inertia&&(fn.value=getFinalKeyframe$1($e,this.options,He,this.speed)),We&&We(fn.value),mn&&this.finish(),fn}then(e,t){return this.finished.then(e,t)}get duration(){return millisecondsToSeconds(this.calculatedDuration)}get time(){return millisecondsToSeconds(this.currentTime)}set time(e){e=secondsToMilliseconds(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(time.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=frameloopDriver,startTime:t}=this.options;this.driver||(this.driver=e(Ee=>this.tick(Ee))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(time.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function fillWildcards(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const radToDeg=n=>n*180/Math.PI,rotate=n=>{const e=radToDeg(Math.atan2(n[1],n[0]));return rebaseAngle(e)},matrix2dParsers={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate,rotateZ:rotate,skewX:n=>radToDeg(Math.atan(n[1])),skewY:n=>radToDeg(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},rebaseAngle=n=>(n=n%360,n<0&&(n+=360),n),rotateZ=rotate,scaleX=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),scaleY=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),matrix3dParsers={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX,scaleY,scale:n=>(scaleX(n)+scaleY(n))/2,rotateX:n=>rebaseAngle(radToDeg(Math.atan2(n[6],n[5]))),rotateY:n=>rebaseAngle(radToDeg(Math.atan2(-n[2],n[0]))),rotateZ,rotate:rotateZ,skewX:n=>radToDeg(Math.atan(n[4])),skewY:n=>radToDeg(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function defaultTransformValue(n){return n.includes("scale")?1:0}function parseValueFromTransform(n,e){if(!n||n==="none")return defaultTransformValue(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,Ee;if(t)r=matrix3dParsers,Ee=t;else{const Me=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=matrix2dParsers,Ee=Me}if(!Ee)return defaultTransformValue(e);const Te=r[e],Re=Ee[1].split(",").map(convertTransformToNumber);return typeof Te=="function"?Te(Re):Re[Te]}const readTransformValue=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return parseValueFromTransform(t,e)};function convertTransformToNumber(n){return parseFloat(n.trim())}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),isNumOrPxType=n=>n===number$1||n===px,transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(n=>!transformKeys.has(n));function removeNonTranslationalTransform(n){const e=[];return nonTranslationalTransformKeys.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const positionalValues={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>parseValueFromTransform(e,"x"),y:(n,{transform:e})=>parseValueFromTransform(e,"y")};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1,isForced=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const n=Array.from(toResolve).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const Ee=removeNonTranslationalTransform(r);Ee.length&&(t.set(r,Ee),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const Ee=t.get(r);Ee&&Ee.forEach(([Te,Re])=>{r.getValue(Te)?.set(Re)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(n=>n.complete(isForced)),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){isForced=!0,readAllKeyframes(),measureAllKeyframes(),isForced=!1}class KeyframeResolver{constructor(e,t,r,Ee,Te,Re=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=Ee,this.element=Te,this.isAsync=Re}scheduleResolve(){this.state="scheduled",this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:Ee}=this;if(e[0]===null){const Te=Ee?.get(),Re=e[e.length-1];if(Te!==void 0)e[0]=Te;else if(r&&t){const Me=r.readValue(t,Re);Me!=null&&(e[0]=Me)}e[0]===void 0&&(e[0]=Re),Ee&&Te===void 0&&Ee.set(e[0])}fillWildcards(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),toResolve.delete(this)}cancel(){this.state==="scheduled"&&(toResolve.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const isCSSVar=n=>n.startsWith("--");function setStyle(n,e,t){isCSSVar(e)?n.style.setProperty(e,t):n.style[e]=t}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0),supportsFlags={};function memoSupports(n,e){const t=memo(n);return()=>supportsFlags[e]??t()}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cubicBezierAsString=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(n,e){if(n)return typeof n=="function"?supportsLinearEasing()?generateLinearEasing(n,e):"ease-out":isBezierDefinition(n)?cubicBezierAsString(n):Array.isArray(n)?n.map(t=>mapEasingToNativeEasing(t,e)||supportedWaapiEasing.easeOut):supportedWaapiEasing[n]}function startWaapiAnimation(n,e,t,{delay:r=0,duration:Ee=300,repeat:Te=0,repeatType:Re="loop",ease:Me="easeOut",times:Ve}={},De=void 0){const $e={[e]:t};Ve&&($e.offset=Ve);const Oe=mapEasingToNativeEasing(Me,Ee);Array.isArray(Oe)&&($e.easing=Oe);const Ce={delay:r,duration:Ee,easing:Array.isArray(Oe)?"linear":Oe,fill:"both",iterations:Te+1,direction:Re==="reverse"?"alternate":"normal"};return De&&(Ce.pseudoElement=De),n.animate($e,Ce)}function isGenerator(n){return typeof n=="function"&&"applyToOptions"in n}function applyGeneratorOptions({type:n,...e}){return isGenerator(n)&&supportsLinearEasing()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class NativeAnimation extends WithPromise{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:Ee,pseudoElement:Te,allowFlatten:Re=!1,finalKeyframe:Me,onComplete:Ve}=e;this.isPseudoElement=!!Te,this.allowFlatten=Re,this.options=e,invariant(typeof e.type!="string");const De=applyGeneratorOptions(e);this.animation=startWaapiAnimation(t,r,Ee,De,Te),De.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!Te){const $e=getFinalKeyframe$1(Ee,this.options,Me,this.speed);this.updateMotionValue?this.updateMotionValue($e):setStyle(t,r,$e),this.animation.cancel()}Ve?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return millisecondsToSeconds(Number(e))}get time(){return millisecondsToSeconds(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=secondsToMilliseconds(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&supportsScrollTimeline()?(this.animation.timeline=e,noop$1):t(this)}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(n){return n in unsupportedEasingFunctions}function replaceStringEasing(n){typeof n.ease=="string"&&isUnsupportedEase(n.ease)&&(n.ease=unsupportedEasingFunctions[n.ease])}const sampleDelta=10;class NativeAnimationExtended extends NativeAnimation{constructor(e){replaceStringEasing(e),replaceTransitionType(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:Ee,element:Te,...Re}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const Me=new JSAnimation({...Re,autoplay:!1}),Ve=secondsToMilliseconds(this.finishedTime??this.time);t.setWithVelocity(Me.sample(Ve-sampleDelta).value,Me.sample(Ve).value,sampleDelta),Me.stop()}}const isAnimatable=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(complex.test(n)||n==="0")&&!n.startsWith("url("));function hasKeyframesChanged(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function canAnimate(n,e,t,r){const Ee=n[0];if(Ee===null)return!1;if(e==="display"||e==="visibility")return!0;const Te=n[n.length-1],Re=isAnimatable(Ee,e),Me=isAnimatable(Te,e);return!Re||!Me?!1:hasKeyframesChanged(n)||(t==="spring"||isGenerator(t))&&r}function makeAnimationInstant(n){n.duration=0,n.type}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]),supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function supportsBrowserAnimation(n){const{motionValue:e,name:t,repeatDelay:r,repeatType:Ee,damping:Te,type:Re}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:Ve,transformTemplate:De}=e.owner.getProps();return supportsWaapi()&&t&&acceleratedValues.has(t)&&(t!=="transform"||!De)&&!Ve&&!r&&Ee!=="mirror"&&Te!==0&&Re!=="inertia"}const MAX_RESOLVE_DELAY=40;class AsyncMotionValueAnimation extends WithPromise{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:Ee=0,repeatDelay:Te=0,repeatType:Re="loop",keyframes:Me,name:Ve,motionValue:De,element:$e,...Oe}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=time.now();const Ce={autoplay:e,delay:t,type:r,repeat:Ee,repeatDelay:Te,repeatType:Re,name:Ve,motionValue:De,element:$e,...Oe},Be=$e?.KeyframeResolver||KeyframeResolver;this.keyframeResolver=new Be(Me,(Ue,We,He)=>this.onKeyframesResolved(Ue,We,Ce,!He),Ve,De,$e),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,r,Ee){this.keyframeResolver=void 0;const{name:Te,type:Re,velocity:Me,delay:Ve,isHandoff:De,onUpdate:$e}=r;this.resolvedAt=time.now(),canAnimate(e,Te,Re,Me)||((MotionGlobalConfig.instantAnimations||!Ve)&&$e?.(getFinalKeyframe$1(e,r,t)),e[0]=e[e.length-1],makeAnimationInstant(r),r.repeat=0);const Ce={startTime:Ee?this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},Be=!De&&supportsBrowserAnimation(Ce)?new NativeAnimationExtended({...Ce,element:Ce.motionValue.owner.current}):new JSAnimation(Ce);Be.finished.then(()=>this.notifyFinished()).catch(noop$1),this.pendingTimeline&&(this.stopTimeline=Be.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=Be}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),flushKeyframeResolvers()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(n){const e=splitCSSVariableRegex.exec(n);if(!e)return[,];const[,t,r,Ee]=e;return[`--${t??r}`,Ee]}function getVariableValue(n,e,t=1){const[r,Ee]=parseCSSVariable(n);if(!r)return;const Te=window.getComputedStyle(e).getPropertyValue(r);if(Te){const Re=Te.trim();return isNumericalString(Re)?parseFloat(Re):Re}return isCSSVariableToken(Ee)?getVariableValue(Ee,e,t+1):Ee}function getValueTransition(n,e){return n?.[e]??n?.default??n}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]),auto={test:n=>n==="auto",parse:n=>n},testValueType=n=>e=>e.test(n),dimensionValueTypes=[number$1,px,percent,degrees,vw,vh,auto],findDimensionValueType=n=>dimensionValueTypes.find(testValueType(n));function isNone(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||isZeroValueString(n):!0}const maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(floatRegex)||[];if(!r)return n;const Ee=t.replace(r,"");let Te=maxDefaults.has(e)?1:0;return r!==t&&(Te*=100),e+"("+Te+Ee+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:n=>{const e=n.match(functionRegex);return e?e.map(applyDefaultFilter).join(" "):n}},int={...number$1,transform:Math.round},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px,...transformValueTypes,zIndex:int,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},defaultValueTypes={...numberValueTypes,color:color$1,backgroundColor:color$1,outlineColor:color$1,fill:color$1,stroke:color$1,borderColor:color$1,borderTopColor:color$1,borderRightColor:color$1,borderBottomColor:color$1,borderLeftColor:color$1,filter,WebkitFilter:filter},getDefaultValueType=n=>defaultValueTypes[n];function getAnimatableNone(n,e){let t=getDefaultValueType(n);return t!==filter&&(t=complex),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(n,e,t){let r=0,Ee;for(;r<n.length&&!Ee;){const Te=n[r];typeof Te=="string"&&!invalidTemplates.has(Te)&&analyseComplexValue(Te).values.length&&(Ee=n[r]),r++}if(Ee&&t)for(const Te of e)n[Te]=getAnimatableNone(t,Ee)}class DOMKeyframesResolver extends KeyframeResolver{constructor(e,t,r,Ee,Te){super(e,t,r,Ee,Te,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let Ve=0;Ve<e.length;Ve++){let De=e[Ve];if(typeof De=="string"&&(De=De.trim(),isCSSVariableToken(De))){const $e=getVariableValue(De,t.current);$e!==void 0&&(e[Ve]=$e),Ve===e.length-1&&(this.finalKeyframe=De)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(r)||e.length!==2)return;const[Ee,Te]=e,Re=findDimensionValueType(Ee),Me=findDimensionValueType(Te);if(Re!==Me)if(isNumOrPxType(Re)&&isNumOrPxType(Me))for(let Ve=0;Ve<e.length;Ve++){const De=e[Ve];typeof De=="string"&&(e[Ve]=parseFloat(De))}else positionalValues[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let Ee=0;Ee<e.length;Ee++)(e[Ee]===null||isNone(e[Ee]))&&r.push(Ee);r.length&&makeNoneKeyframesAnimatable(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const Ee=t[t.length-1];Ee!==void 0&&e.getValue(r,Ee).jump(Ee,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const Ee=e.getValue(t);Ee&&Ee.jump(this.measuredOrigin,!1);const Te=r.length-1,Re=r[Te];r[Te]=positionalValues[t](e.measureViewportBox(),window.getComputedStyle(e.current)),Re!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=Re),this.removedTransforms?.length&&this.removedTransforms.forEach(([Me,Ve])=>{e.getValue(Me).set(Ve)}),this.resolveNoneKeyframes()}}function resolveElements(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){const Ee=document.querySelectorAll(n);return Ee?Array.from(Ee):[]}return Array.from(n)}const getValueAsType=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function isHTMLElement(n){return isObject$1(n)&&"offsetHeight"in n}const MAX_VELOCITY_DELTA=30,isFloat=n=>!isNaN(parseFloat(n)),collectMotionValues={current:void 0};class MotionValue{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const Ee=time.now();if(this.updatedAt!==Ee&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const Te of this.dependents)Te.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=time.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new SubscriptionManager);const r=this.events[e].add(t);return e==="change"?()=>{r(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return collectMotionValues.current&&collectMotionValues.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(n,e){return new MotionValue(n,e)}const{schedule:microtask}=createRenderBatcher(queueMicrotask,!1),isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function setDragLock(n){return n==="x"||n==="y"?isDragging[n]?null:(isDragging[n]=!0,()=>{isDragging[n]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function setupGesture(n,e){const t=resolveElements(n),r=new AbortController,Ee={passive:!0,...e,signal:r.signal};return[t,Ee,()=>r.abort()]}function isValidHover(n){return!(n.pointerType==="touch"||isDragActive())}function hover(n,e,t={}){const[r,Ee,Te]=setupGesture(n,t),Re=Me=>{if(!isValidHover(Me))return;const{target:Ve}=Me,De=e(Ve,Me);if(typeof De!="function"||!Ve)return;const $e=Oe=>{isValidHover(Oe)&&(De(Oe),Ve.removeEventListener("pointerleave",$e))};Ve.addEventListener("pointerleave",$e,Ee)};return r.forEach(Me=>{Me.addEventListener("pointerenter",Re,Ee)}),Te}const isNodeOrChild=(n,e)=>e?n===e?!0:isNodeOrChild(n,e.parentElement):!1,isPrimaryPointer=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(n){return focusableElements.has(n.tagName)||n.tabIndex!==-1}const isPressing=new WeakSet;function filterEvents(n){return e=>{e.key==="Enter"&&n(e)}}function firePointerEvent(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=filterEvents(()=>{if(isPressing.has(t))return;firePointerEvent(t,"down");const Ee=filterEvents(()=>{firePointerEvent(t,"up")}),Te=()=>firePointerEvent(t,"cancel");t.addEventListener("keyup",Ee,e),t.addEventListener("blur",Te,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function isValidPressEvent(n){return isPrimaryPointer(n)&&!isDragActive()}function press(n,e,t={}){const[r,Ee,Te]=setupGesture(n,t),Re=Me=>{const Ve=Me.currentTarget;if(!isValidPressEvent(Me))return;isPressing.add(Ve);const De=e(Ve,Me),$e=(Be,Ue)=>{window.removeEventListener("pointerup",Oe),window.removeEventListener("pointercancel",Ce),isPressing.has(Ve)&&isPressing.delete(Ve),isValidPressEvent(Be)&&typeof De=="function"&&De(Be,{success:Ue})},Oe=Be=>{$e(Be,Ve===window||Ve===document||t.useGlobalTarget||isNodeOrChild(Ve,Be.target))},Ce=Be=>{$e(Be,!1)};window.addEventListener("pointerup",Oe,Ee),window.addEventListener("pointercancel",Ce,Ee)};return r.forEach(Me=>{(t.useGlobalTarget?window:Me).addEventListener("pointerdown",Re,Ee),isHTMLElement(Me)&&(Me.addEventListener("focus",De=>enableKeyboardPress(De,Ee)),!isElementKeyboardAccessible(Me)&&!Me.hasAttribute("tabindex")&&(Me.tabIndex=0))}),Te}function isSVGElement(n){return isObject$1(n)&&"ownerSVGElement"in n}const resizeHandlers=new WeakMap;let observer;const getSize=(n,e,t)=>(r,Ee)=>Ee&&Ee[0]?Ee[0][n+"Size"]:isSVGElement(r)&&"getBBox"in r?r.getBBox()[e]:r[t],getWidth=getSize("inline","width","offsetWidth"),getHeight=getSize("block","height","offsetHeight");function notifyTarget({target:n,borderBoxSize:e}){resizeHandlers.get(n)?.forEach(t=>{t(n,{get width(){return getWidth(n,e)},get height(){return getHeight(n,e)}})})}function notifyAll(n){n.forEach(notifyTarget)}function createResizeObserver(){typeof ResizeObserver>"u"||(observer=new ResizeObserver(notifyAll))}function resizeElement(n,e){observer||createResizeObserver();const t=resolveElements(n);return t.forEach(r=>{let Ee=resizeHandlers.get(r);Ee||(Ee=new Set,resizeHandlers.set(r,Ee)),Ee.add(e),observer?.observe(r)}),()=>{t.forEach(r=>{const Ee=resizeHandlers.get(r);Ee?.delete(e),Ee?.size||observer?.unobserve(r)})}}const windowCallbacks=new Set;let windowResizeHandler;function createWindowResizeHandler(){windowResizeHandler=()=>{const n={get width(){return window.innerWidth},get height(){return window.innerHeight}};windowCallbacks.forEach(e=>e(n))},window.addEventListener("resize",windowResizeHandler)}function resizeWindow(n){return windowCallbacks.add(n),windowResizeHandler||createWindowResizeHandler(),()=>{windowCallbacks.delete(n),!windowCallbacks.size&&typeof windowResizeHandler=="function"&&(window.removeEventListener("resize",windowResizeHandler),windowResizeHandler=void 0)}}function resize(n,e){return typeof n=="function"?resizeWindow(n):resizeElement(n,e)}function observeTimeline(n,e){let t;const r=()=>{const{currentTime:Ee}=e,Re=(Ee===null?0:Ee.value)/100;t!==Re&&n(Re),t=Re};return frame.preUpdate(r,!0),()=>cancelFrame(r)}function isSVGSVGElement(n){return isSVGElement(n)&&n.tagName==="svg"}function transform(...n){const e=!Array.isArray(n[0]),t=e?0:-1,r=n[0+t],Ee=n[1+t],Te=n[2+t],Re=n[3+t],Me=interpolate$1(Ee,Te,Re);return e?Me(r):Me}const isMotionValue=n=>!!(n&&n.getVelocity),valueTypes=[...dimensionValueTypes,color$1,complex],findValueType=n=>valueTypes.find(testValueType(n)),MotionConfigContext=reactExports.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=t.offsetParent,Ee=isHTMLElement(r)&&r.offsetWidth||0,Te=this.props.sizeRef.current;Te.height=t.offsetHeight||0,Te.width=t.offsetWidth||0,Te.top=t.offsetTop,Te.left=t.offsetLeft,Te.right=Ee-Te.width-Te.left}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:n,isPresent:e,anchorX:t,root:r}){const Ee=reactExports.useId(),Te=reactExports.useRef(null),Re=reactExports.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:Me}=reactExports.useContext(MotionConfigContext);return reactExports.useInsertionEffect(()=>{const{width:Ve,height:De,top:$e,left:Oe,right:Ce}=Re.current;if(e||!Te.current||!Ve||!De)return;const Be=t==="left"?`left: ${Oe}`:`right: ${Ce}`;Te.current.dataset.motionPopId=Ee;const Ue=document.createElement("style");Me&&(Ue.nonce=Me);const We=r??document.head;return We.appendChild(Ue),Ue.sheet&&Ue.sheet.insertRule(`
          [data-motion-pop-id="${Ee}"] {
            position: absolute !important;
            width: ${Ve}px !important;
            height: ${De}px !important;
            ${Be}px !important;
            top: ${$e}px !important;
          }
        `),()=>{We.contains(Ue)&&We.removeChild(Ue)}},[e]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:e,childRef:Te,sizeRef:Re,children:reactExports.cloneElement(n,{ref:Te})})}const PresenceChild=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:Ee,presenceAffectsLayout:Te,mode:Re,anchorX:Me,root:Ve})=>{const De=useConstant(newChildrenMap),$e=reactExports.useId();let Oe=!0,Ce=reactExports.useMemo(()=>(Oe=!1,{id:$e,initial:e,isPresent:t,custom:Ee,onExitComplete:Be=>{De.set(Be,!0);for(const Ue of De.values())if(!Ue)return;r&&r()},register:Be=>(De.set(Be,!1),()=>De.delete(Be))}),[t,De,r]);return Te&&Oe&&(Ce={...Ce}),reactExports.useMemo(()=>{De.forEach((Be,Ue)=>De.set(Ue,!1))},[t]),reactExports.useEffect(()=>{!t&&!De.size&&r&&r()},[t]),Re==="popLayout"&&(n=jsxRuntimeExports.jsx(PopChild,{isPresent:t,anchorX:Me,root:Ve,children:n})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:Ce,children:n})};function newChildrenMap(){return new Map}function usePresence(n=!0){const e=reactExports.useContext(PresenceContext);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:Ee}=e,Te=reactExports.useId();reactExports.useEffect(()=>{if(n)return Ee(Te)},[n]);const Re=reactExports.useCallback(()=>n&&r&&r(Te),[Te,r,n]);return!t&&r?[!1,Re]:[!0]}const getChildKey=n=>n.key||"";function onlyElements(n){const e=[];return reactExports.Children.forEach(n,t=>{reactExports.isValidElement(t)&&e.push(t)}),e}const AnimatePresence=({children:n,custom:e,initial:t=!0,onExitComplete:r,presenceAffectsLayout:Ee=!0,mode:Te="sync",propagate:Re=!1,anchorX:Me="left",root:Ve})=>{const[De,$e]=usePresence(Re),Oe=reactExports.useMemo(()=>onlyElements(n),[n]),Ce=Re&&!De?[]:Oe.map(getChildKey),Be=reactExports.useRef(!0),Ue=reactExports.useRef(Oe),We=useConstant(()=>new Map),[He,Ge]=reactExports.useState(Oe),[Ye,Je]=reactExports.useState(Oe);useIsomorphicLayoutEffect(()=>{Be.current=!1,Ue.current=Oe;for(let yn=0;yn<Ye.length;yn++){const mn=getChildKey(Ye[yn]);Ce.includes(mn)?We.delete(mn):We.get(mn)!==!0&&We.set(mn,!1)}},[Ye,Ce.length,Ce.join("-")]);const Ze=[];if(Oe!==He){let yn=[...Oe];for(let mn=0;mn<Ye.length;mn++){const pn=Ye[mn],un=getChildKey(pn);Ce.includes(un)||(yn.splice(mn,0,pn),Ze.push(pn))}return Te==="wait"&&Ze.length&&(yn=Ze),Je(onlyElements(yn)),Ge(Oe),null}const{forceRender:fn}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Ye.map(yn=>{const mn=getChildKey(yn),pn=Re&&!De?!1:Oe===Ye||Ce.includes(mn),un=()=>{if(We.has(mn))We.set(mn,!0);else return;let bn=!0;We.forEach(gn=>{gn||(bn=!1)}),bn&&(fn?.(),Je(Ue.current),Re&&$e?.(),r&&r())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:pn,initial:!Be.current||t?void 0:!1,custom:e,presenceAffectsLayout:Ee,mode:Te,root:Ve,onExitComplete:pn?void 0:un,anchorX:Me,children:yn},mn)})})},LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const n in featureProps)featureDefinitions[n]={isEnabled:e=>featureProps[n].some(t=>!!e[t])};function loadFeatures(n){for(const e in n)featureDefinitions[e]={...featureDefinitions[e],...n[e]}}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||validMotionProps.has(n)}let shouldForward=n=>!isValidMotionProp(n);function loadExternalIsValidProp(n){typeof n=="function"&&(shouldForward=e=>e.startsWith("on")?!isValidMotionProp(e):n(e))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(n,e,t){const r={};for(const Ee in n)Ee==="values"&&typeof n.values=="object"||(shouldForward(Ee)||t===!0&&isValidMotionProp(Ee)||!e&&!isValidMotionProp(Ee)||n.draggable&&Ee.startsWith("onDrag"))&&(r[Ee]=n[Ee]);return r}const MotionContext=reactExports.createContext({});function isAnimationControls(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function isVariantLabel(n){return typeof n=="string"||Array.isArray(n)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(n){return isAnimationControls(n.animate)||variantProps.some(e=>isVariantLabel(n[e]))}function isVariantNode(n){return!!(isControllingVariants(n)||n.variants)}function getCurrentTreeVariants(n,e){if(isControllingVariants(n)){const{initial:t,animate:r}=n;return{initial:t===!1||isVariantLabel(t)?t:void 0,animate:isVariantLabel(r)?r:void 0}}return n.inherit!==!1?e:{}}function useCreateMotionContext(n){const{initial:e,animate:t}=getCurrentTreeVariants(n,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:e,animate:t}),[variantLabelsAsDependency(e),variantLabelsAsDependency(t)])}function variantLabelsAsDependency(n){return Array.isArray(n)?n.join(" "):n}const scaleCorrectors={};function addScaleCorrector(n){for(const e in n)scaleCorrectors[e]=n[e],isCSSVariableName(e)&&(scaleCorrectors[e].isCSSVariable=!0)}function isForcedMotionValue(n,{layout:e,layoutId:t}){return transformProps.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!scaleCorrectors[n]||n==="opacity")}const translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(n,e,t){let r="",Ee=!0;for(let Te=0;Te<numTransforms;Te++){const Re=transformPropOrder[Te],Me=n[Re];if(Me===void 0)continue;let Ve=!0;if(typeof Me=="number"?Ve=Me===(Re.startsWith("scale")?1:0):Ve=parseFloat(Me)===0,!Ve||t){const De=getValueAsType(Me,numberValueTypes[Re]);if(!Ve){Ee=!1;const $e=translateAlias[Re]||Re;r+=`${$e}(${De}) `}t&&(e[Re]=De)}}return r=r.trim(),t?r=t(e,Ee?"":r):Ee&&(r="none"),r}function buildHTMLStyles(n,e,t){const{style:r,vars:Ee,transformOrigin:Te}=n;let Re=!1,Me=!1;for(const Ve in e){const De=e[Ve];if(transformProps.has(Ve)){Re=!0;continue}else if(isCSSVariableName(Ve)){Ee[Ve]=De;continue}else{const $e=getValueAsType(De,numberValueTypes[Ve]);Ve.startsWith("origin")?(Me=!0,Te[Ve]=$e):r[Ve]=$e}}if(e.transform||(Re||t?r.transform=buildTransform(e,n.transform,t):r.transform&&(r.transform="none")),Me){const{originX:Ve="50%",originY:De="50%",originZ:$e=0}=Te;r.transformOrigin=`${Ve} ${De} ${$e}`}}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(n,e,t){for(const r in e)!isMotionValue(e[r])&&!isForcedMotionValue(r,t)&&(n[r]=e[r])}function useInitialMotionValues({transformTemplate:n},e){return reactExports.useMemo(()=>{const t=createHtmlRenderState();return buildHTMLStyles(t,e,n),Object.assign({},t.vars,t.style)},[e])}function useStyle(n,e){const t=n.style||{},r={};return copyRawValuesOnly(r,t,n),Object.assign(r,useInitialMotionValues(n,e)),r}function useHTMLProps(n,e){const t={},r=useStyle(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(n,e,t=1,r=0,Ee=!0){n.pathLength=1;const Te=Ee?dashKeys:camelKeys;n[Te.offset]=px.transform(-r);const Re=px.transform(e),Me=px.transform(t);n[Te.array]=`${Re} ${Me}`}function buildSVGAttrs(n,{attrX:e,attrY:t,attrScale:r,pathLength:Ee,pathSpacing:Te=1,pathOffset:Re=0,...Me},Ve,De,$e){if(buildHTMLStyles(n,Me,De),Ve){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:Oe,style:Ce}=n;Oe.transform&&(Ce.transform=Oe.transform,delete Oe.transform),(Ce.transform||Oe.transformOrigin)&&(Ce.transformOrigin=Oe.transformOrigin??"50% 50%",delete Oe.transformOrigin),Ce.transform&&(Ce.transformBox=$e?.transformBox??"fill-box",delete Oe.transformBox),e!==void 0&&(Oe.x=e),t!==void 0&&(Oe.y=t),r!==void 0&&(Oe.scale=r),Ee!==void 0&&buildSVGPath(Oe,Ee,Te,Re,!1)}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=n=>typeof n=="string"&&n.toLowerCase()==="svg";function useSVGProps(n,e,t,r){const Ee=reactExports.useMemo(()=>{const Te=createSvgRenderState();return buildSVGAttrs(Te,e,isSVGTag(r),n.transformTemplate,n.style),{...Te.attrs,style:{...Te.style}}},[e]);if(n.style){const Te={};copyRawValuesOnly(Te,n.style,n),Ee.style={...Te,...Ee.style}}return Ee}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(n){return typeof n!="string"||n.includes("-")?!1:!!(lowercaseSVGElements.indexOf(n)>-1||/[A-Z]/u.test(n))}function useRender(n,e,t,{latestValues:r},Ee,Te=!1){const Me=(isSVGComponent(n)?useSVGProps:useHTMLProps)(e,r,Ee,n),Ve=filterProps(e,typeof n=="string",Te),De=n!==reactExports.Fragment?{...Ve,...Me,ref:t}:{},{children:$e}=e,Oe=reactExports.useMemo(()=>isMotionValue($e)?$e.get():$e,[$e]);return reactExports.createElement(n,{...De,children:Oe})}function getValueState(n){const e=[{},{}];return n?.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function resolveVariantFromProps(n,e,t,r){if(typeof e=="function"){const[Ee,Te]=getValueState(r);e=e(t!==void 0?t:n.custom,Ee,Te)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[Ee,Te]=getValueState(r);e=e(t!==void 0?t:n.custom,Ee,Te)}return e}function resolveMotionValue(n){return isMotionValue(n)?n.get():n}function makeState({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,Ee){return{latestValues:makeLatestValues(t,r,Ee,n),renderState:e()}}function makeLatestValues(n,e,t,r){const Ee={},Te=r(n,{});for(const Ce in Te)Ee[Ce]=resolveMotionValue(Te[Ce]);let{initial:Re,animate:Me}=n;const Ve=isControllingVariants(n),De=isVariantNode(n);e&&De&&!Ve&&n.inherit!==!1&&(Re===void 0&&(Re=e.initial),Me===void 0&&(Me=e.animate));let $e=t?t.initial===!1:!1;$e=$e||Re===!1;const Oe=$e?Me:Re;if(Oe&&typeof Oe!="boolean"&&!isAnimationControls(Oe)){const Ce=Array.isArray(Oe)?Oe:[Oe];for(let Be=0;Be<Ce.length;Be++){const Ue=resolveVariantFromProps(n,Ce[Be]);if(Ue){const{transitionEnd:We,transition:He,...Ge}=Ue;for(const Ye in Ge){let Je=Ge[Ye];if(Array.isArray(Je)){const Ze=$e?Je.length-1:0;Je=Je[Ze]}Je!==null&&(Ee[Ye]=Je)}for(const Ye in We)Ee[Ye]=We[Ye]}}}return Ee}const makeUseVisualState=n=>(e,t)=>{const r=reactExports.useContext(MotionContext),Ee=reactExports.useContext(PresenceContext),Te=()=>makeState(n,e,r,Ee);return t?Te():useConstant(Te)};function scrapeMotionValuesFromProps$1(n,e,t){const{style:r}=n,Ee={};for(const Te in r)(isMotionValue(r[Te])||e.style&&isMotionValue(e.style[Te])||isForcedMotionValue(Te,n)||t?.getValue(Te)?.liveStyle!==void 0)&&(Ee[Te]=r[Te]);return Ee}const useHTMLVisualState=makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState});function scrapeMotionValuesFromProps(n,e,t){const r=scrapeMotionValuesFromProps$1(n,e,t);for(const Ee in n)if(isMotionValue(n[Ee])||isMotionValue(e[Ee])){const Te=transformPropOrder.indexOf(Ee)!==-1?"attr"+Ee.charAt(0).toUpperCase()+Ee.substring(1):Ee;r[Te]=n[Ee]}return r}const useSVGVisualState=makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState}),motionComponentSymbol=Symbol.for("motionComponentSymbol");function isRefObject(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function useMotionRef(n,e,t){return reactExports.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):isRefObject(t)&&(t.current=r))},[e])}const camelToDash=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId),SwitchLayoutGroupContext=reactExports.createContext({});function useVisualElement(n,e,t,r,Ee){const{visualElement:Te}=reactExports.useContext(MotionContext),Re=reactExports.useContext(LazyContext),Me=reactExports.useContext(PresenceContext),Ve=reactExports.useContext(MotionConfigContext).reducedMotion,De=reactExports.useRef(null);r=r||Re.renderer,!De.current&&r&&(De.current=r(n,{visualState:e,parent:Te,props:t,presenceContext:Me,blockInitialAnimation:Me?Me.initial===!1:!1,reducedMotionConfig:Ve}));const $e=De.current,Oe=reactExports.useContext(SwitchLayoutGroupContext);$e&&!$e.projection&&Ee&&($e.type==="html"||$e.type==="svg")&&createProjectionNode$1(De.current,t,Ee,Oe);const Ce=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{$e&&Ce.current&&$e.update(t,Me)});const Be=t[optimizedAppearDataAttribute],Ue=reactExports.useRef(!!Be&&!window.MotionHandoffIsComplete?.(Be)&&window.MotionHasOptimisedAnimation?.(Be));return useIsomorphicLayoutEffect(()=>{$e&&(Ce.current=!0,window.MotionIsMounted=!0,$e.updateFeatures(),$e.scheduleRenderMicrotask(),Ue.current&&$e.animationState&&$e.animationState.animateChanges())}),reactExports.useEffect(()=>{$e&&(!Ue.current&&$e.animationState&&$e.animationState.animateChanges(),Ue.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(Be)}),Ue.current=!1),$e.enteringChildren=void 0)}),$e}function createProjectionNode$1(n,e,t,r){const{layoutId:Ee,layout:Te,drag:Re,dragConstraints:Me,layoutScroll:Ve,layoutRoot:De,layoutCrossfade:$e}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:getClosestProjectingNode(n.parent)),n.projection.setOptions({layoutId:Ee,layout:Te,alwaysMeasureLayout:!!Re||Me&&isRefObject(Me),visualElement:n,animationType:typeof Te=="string"?Te:"both",initialPromotionConfig:r,crossfade:$e,layoutScroll:Ve,layoutRoot:De})}function getClosestProjectingNode(n){if(n)return n.options.allowProjection!==!1?n.projection:getClosestProjectingNode(n.parent)}function createMotionComponent(n,{forwardMotionProps:e=!1}={},t,r){t&&loadFeatures(t);const Ee=isSVGComponent(n)?useSVGVisualState:useHTMLVisualState;function Te(Me,Ve){let De;const $e={...reactExports.useContext(MotionConfigContext),...Me,layoutId:useLayoutId(Me)},{isStatic:Oe}=$e,Ce=useCreateMotionContext(Me),Be=Ee(Me,Oe);if(!Oe&&isBrowser){useStrictMode();const Ue=getProjectionFunctionality($e);De=Ue.MeasureLayout,Ce.visualElement=useVisualElement(n,Be,$e,r,Ue.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:Ce,children:[De&&Ce.visualElement?jsxRuntimeExports.jsx(De,{visualElement:Ce.visualElement,...$e}):null,useRender(n,Me,useMotionRef(Be,Ce.visualElement,Ve),Be,Oe,e)]})}Te.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const Re=reactExports.forwardRef(Te);return Re[motionComponentSymbol]=n,Re}function useLayoutId({layoutId:n}){const e=reactExports.useContext(LayoutGroupContext).id;return e&&n!==void 0?e+"-"+n:n}function useStrictMode(n,e){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(n){const{drag:e,layout:t}=featureDefinitions;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function createMotionProxy(n,e){if(typeof Proxy>"u")return createMotionComponent;const t=new Map,r=(Te,Re)=>createMotionComponent(Te,Re,n,e),Ee=(Te,Re)=>r(Te,Re);return new Proxy(Ee,{get:(Te,Re)=>Re==="create"?r:(t.has(Re)||t.set(Re,createMotionComponent(Re,void 0,n,e)),t.get(Re))})}function convertBoundingBoxToBox({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function convertBoxToBoundingBox({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function transformBoxPoints(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function isIdentityScale(n){return n===void 0||n===1}function hasScale({scale:n,scaleX:e,scaleY:t}){return!isIdentityScale(n)||!isIdentityScale(e)||!isIdentityScale(t)}function hasTransform(n){return hasScale(n)||has2DTranslate(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function has2DTranslate(n){return is2DTranslate(n.x)||is2DTranslate(n.y)}function is2DTranslate(n){return n&&n!=="0%"}function scalePoint(n,e,t){const r=n-t,Ee=e*r;return t+Ee}function applyPointDelta(n,e,t,r,Ee){return Ee!==void 0&&(n=scalePoint(n,Ee,r)),scalePoint(n,t,r)+e}function applyAxisDelta(n,e=0,t=1,r,Ee){n.min=applyPointDelta(n.min,e,t,r,Ee),n.max=applyPointDelta(n.max,e,t,r,Ee)}function applyBoxDelta(n,{x:e,y:t}){applyAxisDelta(n.x,e.translate,e.scale,e.originPoint),applyAxisDelta(n.y,t.translate,t.scale,t.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(n,e,t,r=!1){const Ee=t.length;if(!Ee)return;e.x=e.y=1;let Te,Re;for(let Me=0;Me<Ee;Me++){Te=t[Me],Re=Te.projectionDelta;const{visualElement:Ve}=Te.options;Ve&&Ve.props.style&&Ve.props.style.display==="contents"||(r&&Te.options.layoutScroll&&Te.scroll&&Te!==Te.root&&transformBox(n,{x:-Te.scroll.offset.x,y:-Te.scroll.offset.y}),Re&&(e.x*=Re.x.scale,e.y*=Re.y.scale,applyBoxDelta(n,Re)),r&&hasTransform(Te.latestValues)&&transformBox(n,Te.latestValues))}e.x<TREE_SCALE_SNAP_MAX&&e.x>TREE_SCALE_SNAP_MIN&&(e.x=1),e.y<TREE_SCALE_SNAP_MAX&&e.y>TREE_SCALE_SNAP_MIN&&(e.y=1)}function translateAxis(n,e){n.min=n.min+e,n.max=n.max+e}function transformAxis(n,e,t,r,Ee=.5){const Te=mixNumber$1(n.min,n.max,Ee);applyAxisDelta(n,e,t,Te,r)}function transformBox(n,e){transformAxis(n.x,e.x,e.scaleX,e.scale,e.originX),transformAxis(n.y,e.y,e.scaleY,e.scale,e.originY)}function measureViewportBox(n,e){return convertBoundingBoxToBox(transformBoxPoints(n.getBoundingClientRect(),e))}function measurePageBox(n,e,t){const r=measureViewportBox(n,t),{scroll:Ee}=e;return Ee&&(translateAxis(r.x,Ee.offset.x),translateAxis(r.y,Ee.offset.y)),r}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()}),prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>prefersReducedMotion.current=n.matches;n.addEventListener("change",e),e()}else prefersReducedMotion.current=!1}const visualElementStore=new WeakMap;function updateMotionValuesFromProps(n,e,t){for(const r in e){const Ee=e[r],Te=t[r];if(isMotionValue(Ee))n.addValue(r,Ee);else if(isMotionValue(Te))n.addValue(r,motionValue(Ee,{owner:n}));else if(Te!==Ee)if(n.hasValue(r)){const Re=n.getValue(r);Re.liveStyle===!0?Re.jump(Ee):Re.hasAnimated||Re.set(Ee)}else{const Re=n.getStaticValue(r);n.addValue(r,motionValue(Re!==void 0?Re:Ee,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:Ee,blockInitialAnimation:Te,visualState:Re},Me={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const Ce=time.now();this.renderScheduledAt<Ce&&(this.renderScheduledAt=Ce,frame.render(this.render,!1,!0))};const{latestValues:Ve,renderState:De}=Re;this.latestValues=Ve,this.baseTarget={...Ve},this.initialValues=t.initial?{...Ve}:{},this.renderState=De,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=Ee,this.options=Me,this.blockInitialAnimation=!!Te,this.isControllingVariants=isControllingVariants(t),this.isVariantNode=isVariantNode(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:$e,...Oe}=this.scrapeMotionValuesFromProps(t,{},this);for(const Ce in Oe){const Be=Oe[Ce];Ve[Ce]!==void 0&&isMotionValue(Be)&&Be.set(Ve[Ce])}}mount(e){this.current=e,visualElementStore.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=transformProps.has(e);r&&this.onBindTransform&&this.onBindTransform();const Ee=t.on("change",Re=>{this.latestValues[e]=Re,this.props.onUpdate&&frame.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let Te;window.MotionCheckAppearSync&&(Te=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{Ee(),Te&&Te(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in featureDefinitions){const t=featureDefinitions[e];if(!t)continue;const{isEnabled:r,Feature:Ee}=t;if(!this.features[e]&&Ee&&r(this.props)&&(this.features[e]=new Ee(this)),this.features[e]){const Te=this.features[e];Te.isMounted?Te.update():(Te.mount(),Te.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<propEventHandlers.length;r++){const Ee=propEventHandlers[r];this.propEventSubscriptions[Ee]&&(this.propEventSubscriptions[Ee](),delete this.propEventSubscriptions[Ee]);const Te="on"+Ee,Re=e[Te];Re&&(this.propEventSubscriptions[Ee]=this.on(Ee,Re))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=motionValue(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(isNumericalString(r)||isZeroValueString(r))?r=parseFloat(r):!findValueType(r)&&complex.test(t)&&(r=getAnimatableNone(e,t)),this.setBaseTarget(e,isMotionValue(r)?r.get():r)),isMotionValue(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const Te=resolveVariantFromProps(this.props,t,this.presenceContext?.custom);Te&&(r=Te[e])}if(t&&r!==void 0)return r;const Ee=this.getBaseTargetFromProps(this.props,e);return Ee!==void 0&&!isMotionValue(Ee)?Ee:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new SubscriptionManager),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){microtask.render(this.render)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;isMotionValue(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function renderHTML(n,{style:e,vars:t},r,Ee){const Te=n.style;let Re;for(Re in e)Te[Re]=e[Re];Ee?.applyProjectionStyles(Te,r);for(Re in t)Te.setProperty(Re,t[Re])}function getComputedStyle$1(n){return window.getComputedStyle(n)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(e,t){if(transformProps.has(t))return this.projection?.isProjecting?defaultTransformValue(t):readTransformValue(e,t);{const r=getComputedStyle$1(e),Ee=(isCSSVariableName(t)?r.getPropertyValue(t):r[t])||0;return typeof Ee=="string"?Ee.trim():Ee}}measureInstanceViewportBox(e,{transformPagePoint:t}){return measureViewportBox(e,t)}build(e,t,r){buildHTMLStyles(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return scrapeMotionValuesFromProps$1(e,t,r)}}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(n,e,t,r){renderHTML(n,e,void 0,r);for(const Ee in e.attrs)n.setAttribute(camelCaseAttributes.has(Ee)?Ee:camelToDash(Ee),e.attrs[Ee])}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(transformProps.has(t)){const r=getDefaultValueType(t);return r&&r.default||0}return t=camelCaseAttributes.has(t)?t:camelToDash(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return scrapeMotionValuesFromProps(e,t,r)}build(e,t,r){buildSVGAttrs(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,Ee){renderSVG(e,t,r,Ee)}mount(e){this.isSVGTag=isSVGTag(e.tagName),super.mount(e)}}const createDomVisualElement=(n,e)=>isSVGComponent(n)?new SVGVisualElement(e):new HTMLVisualElement(e,{allowProjection:n!==reactExports.Fragment});function resolveVariant(n,e,t){const r=n.getProps();return resolveVariantFromProps(r,e,t!==void 0?t:r.custom,n)}const isKeyframesTarget=n=>Array.isArray(n);function setMotionValue(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,motionValue(t))}function resolveFinalValueInKeyframes(n){return isKeyframesTarget(n)?n[n.length-1]||0:n}function setTarget(n,e){const t=resolveVariant(n,e);let{transitionEnd:r={},transition:Ee={},...Te}=t||{};Te={...Te,...r};for(const Re in Te){const Me=resolveFinalValueInKeyframes(Te[Re]);setMotionValue(n,Re,Me)}}function isWillChangeMotionValue(n){return!!(isMotionValue(n)&&n.add)}function addValueToWillChange(n,e){const t=n.getValue("willChange");if(isWillChangeMotionValue(t))return t.add(e);if(!t&&MotionGlobalConfig.WillChange){const r=new MotionGlobalConfig.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function getOptimisedAppearId(n){return n.props[optimizedAppearDataAttribute]}const isNotNull=n=>n!==null;function getFinalKeyframe(n,{repeat:e,repeatType:t="loop"},r){const Ee=n.filter(isNotNull),Te=e&&t!=="loop"&&e%2===1?0:Ee.length-1;return Ee[Te]}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(n,{keyframes:e})=>e.length>2?keyframesTransition:transformProps.has(n)?n.startsWith("scale")?criticallyDampedSpring(e[1]):underDampedSpring:ease;function isTransitionDefined({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:Ee,repeat:Te,repeatType:Re,repeatDelay:Me,from:Ve,elapsed:De,...$e}){return!!Object.keys($e).length}const animateMotionValue=(n,e,t,r={},Ee,Te)=>Re=>{const Me=getValueTransition(r,n)||{},Ve=Me.delay||r.delay||0;let{elapsed:De=0}=r;De=De-secondsToMilliseconds(Ve);const $e={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...Me,delay:-De,onUpdate:Ce=>{e.set(Ce),Me.onUpdate&&Me.onUpdate(Ce)},onComplete:()=>{Re(),Me.onComplete&&Me.onComplete()},name:n,motionValue:e,element:Te?void 0:Ee};isTransitionDefined(Me)||Object.assign($e,getDefaultTransition(n,$e)),$e.duration&&($e.duration=secondsToMilliseconds($e.duration)),$e.repeatDelay&&($e.repeatDelay=secondsToMilliseconds($e.repeatDelay)),$e.from!==void 0&&($e.keyframes[0]=$e.from);let Oe=!1;if(($e.type===!1||$e.duration===0&&!$e.repeatDelay)&&(makeAnimationInstant($e),$e.delay===0&&(Oe=!0)),(MotionGlobalConfig.instantAnimations||MotionGlobalConfig.skipAnimations)&&(Oe=!0,makeAnimationInstant($e),$e.delay=0),$e.allowFlatten=!Me.type&&!Me.ease,Oe&&!Te&&e.get()!==void 0){const Ce=getFinalKeyframe($e.keyframes,Me);if(Ce!==void 0){frame.update(()=>{$e.onUpdate(Ce),$e.onComplete()});return}}return Me.isSync?new JSAnimation($e):new AsyncMotionValueAnimation($e)};function shouldBlockAnimation({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function animateTarget(n,e,{delay:t=0,transitionOverride:r,type:Ee}={}){let{transition:Te=n.getDefaultTransition(),transitionEnd:Re,...Me}=e;r&&(Te=r);const Ve=[],De=Ee&&n.animationState&&n.animationState.getState()[Ee];for(const $e in Me){const Oe=n.getValue($e,n.latestValues[$e]??null),Ce=Me[$e];if(Ce===void 0||De&&shouldBlockAnimation(De,$e))continue;const Be={delay:t,...getValueTransition(Te||{},$e)},Ue=Oe.get();if(Ue!==void 0&&!Oe.isAnimating&&!Array.isArray(Ce)&&Ce===Ue&&!Be.velocity)continue;let We=!1;if(window.MotionHandoffAnimation){const Ge=getOptimisedAppearId(n);if(Ge){const Ye=window.MotionHandoffAnimation(Ge,$e,frame);Ye!==null&&(Be.startTime=Ye,We=!0)}}addValueToWillChange(n,$e),Oe.start(animateMotionValue($e,Oe,Ce,n.shouldReduceMotion&&positionalKeys.has($e)?{type:!1}:Be,n,We));const He=Oe.animation;He&&Ve.push(He)}return Re&&Promise.all(Ve).then(()=>{frame.update(()=>{Re&&setTarget(n,Re)})}),Ve}function calcChildStagger(n,e,t,r=0,Ee=1){const Te=Array.from(n).sort((De,$e)=>De.sortNodePosition($e)).indexOf(e),Re=n.size,Me=(Re-1)*r;return typeof t=="function"?t(Te,Re):Ee===1?Te*r:Me-Te*r}function animateVariant(n,e,t={}){const r=resolveVariant(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:Ee=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(Ee=t.transitionOverride);const Te=r?()=>Promise.all(animateTarget(n,r,t)):()=>Promise.resolve(),Re=n.variantChildren&&n.variantChildren.size?(Ve=0)=>{const{delayChildren:De=0,staggerChildren:$e,staggerDirection:Oe}=Ee;return animateChildren(n,e,Ve,De,$e,Oe,t)}:()=>Promise.resolve(),{when:Me}=Ee;if(Me){const[Ve,De]=Me==="beforeChildren"?[Te,Re]:[Re,Te];return Ve().then(()=>De())}else return Promise.all([Te(),Re(t.delay)])}function animateChildren(n,e,t=0,r=0,Ee=0,Te=1,Re){const Me=[];for(const Ve of n.variantChildren)Ve.notify("AnimationStart",e),Me.push(animateVariant(Ve,e,{...Re,delay:t+(typeof r=="function"?0:r)+calcChildStagger(n.variantChildren,Ve,r,Ee,Te)}).then(()=>Ve.notify("AnimationComplete",e)));return Promise.all(Me)}function animateVisualElement(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const Ee=e.map(Te=>animateVariant(n,Te,t));r=Promise.all(Ee)}else if(typeof e=="string")r=animateVariant(n,e,t);else{const Ee=typeof e=="function"?resolveVariant(n,e,t.custom):e;r=Promise.all(animateTarget(n,Ee,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function shallowCompare(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const numVariantProps=variantProps.length;function getVariantContext(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?getVariantContext(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<numVariantProps;t++){const r=variantProps[t],Ee=n.props[r];(isVariantLabel(Ee)||Ee===!1)&&(e[r]=Ee)}return e}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(n){return e=>Promise.all(e.map(({animation:t,options:r})=>animateVisualElement(n,t,r)))}function createAnimationState(n){let e=animateList(n),t=createState$1(),r=!0;const Ee=Ve=>(De,$e)=>{const Oe=resolveVariant(n,$e,Ve==="exit"?n.presenceContext?.custom:void 0);if(Oe){const{transition:Ce,transitionEnd:Be,...Ue}=Oe;De={...De,...Ue,...Be}}return De};function Te(Ve){e=Ve(n)}function Re(Ve){const{props:De}=n,$e=getVariantContext(n.parent)||{},Oe=[],Ce=new Set;let Be={},Ue=1/0;for(let He=0;He<numAnimationTypes;He++){const Ge=reversePriorityOrder[He],Ye=t[Ge],Je=De[Ge]!==void 0?De[Ge]:$e[Ge],Ze=isVariantLabel(Je),fn=Ge===Ve?Ye.isActive:null;fn===!1&&(Ue=He);let yn=Je===$e[Ge]&&Je!==De[Ge]&&Ze;if(yn&&r&&n.manuallyAnimateOnMount&&(yn=!1),Ye.protectedKeys={...Be},!Ye.isActive&&fn===null||!Je&&!Ye.prevProp||isAnimationControls(Je)||typeof Je=="boolean")continue;const mn=checkVariantsDidChange(Ye.prevProp,Je);let pn=mn||Ge===Ve&&Ye.isActive&&!yn&&Ze||He>Ue&&Ze,un=!1;const bn=Array.isArray(Je)?Je:[Je];let gn=bn.reduce(Ee(Ge),{});fn===!1&&(gn={});const{prevResolvedValues:xn={}}=Ye,En={...xn,...gn},Pn=Dn=>{pn=!0,Ce.has(Dn)&&(un=!0,Ce.delete(Dn)),Ye.needsAnimating[Dn]=!0;const Un=n.getValue(Dn);Un&&(Un.liveStyle=!1)};for(const Dn in En){const Un=gn[Dn],Wn=xn[Dn];if(Be.hasOwnProperty(Dn))continue;let On=!1;isKeyframesTarget(Un)&&isKeyframesTarget(Wn)?On=!shallowCompare(Un,Wn):On=Un!==Wn,On?Un!=null?Pn(Dn):Ce.add(Dn):Un!==void 0&&Ce.has(Dn)?Pn(Dn):Ye.protectedKeys[Dn]=!0}Ye.prevProp=Je,Ye.prevResolvedValues=gn,Ye.isActive&&(Be={...Be,...gn}),r&&n.blockInitialAnimation&&(pn=!1);const Ln=yn&&mn;pn&&(!Ln||un)&&Oe.push(...bn.map(Dn=>{const Un={type:Ge};if(typeof Dn=="string"&&r&&!Ln&&n.manuallyAnimateOnMount&&n.parent){const{parent:Wn}=n,On=resolveVariant(Wn,Dn);if(Wn.enteringChildren&&On){const{delayChildren:$n}=On.transition||{};Un.delay=calcChildStagger(Wn.enteringChildren,n,$n)}}return{animation:Dn,options:Un}}))}if(Ce.size){const He={};if(typeof De.initial!="boolean"){const Ge=resolveVariant(n,Array.isArray(De.initial)?De.initial[0]:De.initial);Ge&&Ge.transition&&(He.transition=Ge.transition)}Ce.forEach(Ge=>{const Ye=n.getBaseTarget(Ge),Je=n.getValue(Ge);Je&&(Je.liveStyle=!0),He[Ge]=Ye??null}),Oe.push({animation:He})}let We=!!Oe.length;return r&&(De.initial===!1||De.initial===De.animate)&&!n.manuallyAnimateOnMount&&(We=!1),r=!1,We?e(Oe):Promise.resolve()}function Me(Ve,De){if(t[Ve].isActive===De)return Promise.resolve();n.variantChildren?.forEach(Oe=>Oe.animationState?.setActive(Ve,De)),t[Ve].isActive=De;const $e=Re(Ve);for(const Oe in t)t[Oe].protectedKeys={};return $e}return{animateChanges:Re,setActive:Me,setAnimateFunction:Te,getState:()=>t,reset:()=>{t=createState$1(),r=!0}}}function checkVariantsDidChange(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!shallowCompare(e,n):!1}function createTypeState(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState$1(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(e){this.isMounted=!1,this.node=e}update(){}}class AnimationFeature extends Feature{constructor(e){super(e),e.animationState||(e.animationState=createAnimationState(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();isAnimationControls(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const Ee=this.node.animationState.setActive("exit",!e);t&&!e&&Ee.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function addDomEvent(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function extractEventInfo(n){return{point:{x:n.pageX,y:n.pageY}}}const addPointerInfo=n=>e=>isPrimaryPointer(e)&&n(e,extractEventInfo(e));function addPointerEvent(n,e,t,r){return addDomEvent(n,e,addPointerInfo(t),r)}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(n){return n.max-n.min}function isNear(n,e,t){return Math.abs(n-e)<=t}function calcAxisDelta(n,e,t,r=.5){n.origin=r,n.originPoint=mixNumber$1(e.min,e.max,n.origin),n.scale=calcLength(t)/calcLength(e),n.translate=mixNumber$1(t.min,t.max,n.origin)-n.originPoint,(n.scale>=SCALE_MIN&&n.scale<=SCALE_MAX||isNaN(n.scale))&&(n.scale=1),(n.translate>=TRANSLATE_MIN&&n.translate<=TRANSLATE_MAX||isNaN(n.translate))&&(n.translate=0)}function calcBoxDelta(n,e,t,r){calcAxisDelta(n.x,e.x,t.x,r?r.originX:void 0),calcAxisDelta(n.y,e.y,t.y,r?r.originY:void 0)}function calcRelativeAxis(n,e,t){n.min=t.min+e.min,n.max=n.min+calcLength(e)}function calcRelativeBox(n,e,t){calcRelativeAxis(n.x,e.x,t.x),calcRelativeAxis(n.y,e.y,t.y)}function calcRelativeAxisPosition(n,e,t){n.min=e.min-t.min,n.max=n.min+calcLength(e)}function calcRelativePosition(n,e,t){calcRelativeAxisPosition(n.x,e.x,t.x),calcRelativeAxisPosition(n.y,e.y,t.y)}function eachAxis(n){return[n("x"),n("y")]}const getContextWindow=({current:n})=>n?n.ownerDocument.defaultView:null,distance=(n,e)=>Math.abs(n-e);function distance2D(n,e){const t=distance(n.x,e.x),r=distance(n.y,e.y);return Math.sqrt(t**2+r**2)}class PanSession{constructor(e,t,{transformPagePoint:r,contextWindow:Ee=window,dragSnapToOrigin:Te=!1,distanceThreshold:Re=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Ce=getPanInfo(this.lastMoveEventInfo,this.history),Be=this.startEvent!==null,Ue=distance2D(Ce.offset,{x:0,y:0})>=this.distanceThreshold;if(!Be&&!Ue)return;const{point:We}=Ce,{timestamp:He}=frameData;this.history.push({...We,timestamp:He});const{onStart:Ge,onMove:Ye}=this.handlers;Be||(Ge&&Ge(this.lastMoveEvent,Ce),this.startEvent=this.lastMoveEvent),Ye&&Ye(this.lastMoveEvent,Ce)},this.handlePointerMove=(Ce,Be)=>{this.lastMoveEvent=Ce,this.lastMoveEventInfo=transformPoint(Be,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(Ce,Be)=>{this.end();const{onEnd:Ue,onSessionEnd:We,resumeAnimation:He}=this.handlers;if(this.dragSnapToOrigin&&He&&He(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const Ge=getPanInfo(Ce.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(Be,this.transformPagePoint),this.history);this.startEvent&&Ue&&Ue(Ce,Ge),We&&We(Ce,Ge)},!isPrimaryPointer(e))return;this.dragSnapToOrigin=Te,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=Re,this.contextWindow=Ee||window;const Me=extractEventInfo(e),Ve=transformPoint(Me,this.transformPagePoint),{point:De}=Ve,{timestamp:$e}=frameData;this.history=[{...De,timestamp:$e}];const{onSessionStart:Oe}=t;Oe&&Oe(e,getPanInfo(Ve,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(n,e){return e?{point:e(n.point)}:n}function subtractPoint(n,e){return{x:n.x-e.x,y:n.y-e.y}}function getPanInfo({point:n},e){return{point:n,delta:subtractPoint(n,lastDevicePoint(e)),offset:subtractPoint(n,startDevicePoint(e)),velocity:getVelocity(e,.1)}}function startDevicePoint(n){return n[0]}function lastDevicePoint(n){return n[n.length-1]}function getVelocity(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const Ee=lastDevicePoint(n);for(;t>=0&&(r=n[t],!(Ee.timestamp-r.timestamp>secondsToMilliseconds(e)));)t--;if(!r)return{x:0,y:0};const Te=millisecondsToSeconds(Ee.timestamp-r.timestamp);if(Te===0)return{x:0,y:0};const Re={x:(Ee.x-r.x)/Te,y:(Ee.y-r.y)/Te};return Re.x===1/0&&(Re.x=0),Re.y===1/0&&(Re.y=0),Re}function applyConstraints(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?mixNumber$1(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?mixNumber$1(t,n,r.max):Math.min(n,t)),n}function calcRelativeAxisConstraints(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function calcRelativeConstraints(n,{top:e,left:t,bottom:r,right:Ee}){return{x:calcRelativeAxisConstraints(n.x,t,Ee),y:calcRelativeAxisConstraints(n.y,e,r)}}function calcViewportAxisConstraints(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function calcViewportConstraints(n,e){return{x:calcViewportAxisConstraints(n.x,e.x),y:calcViewportAxisConstraints(n.y,e.y)}}function calcOrigin(n,e){let t=.5;const r=calcLength(n),Ee=calcLength(e);return Ee>r?t=progress(e.min,e.max-r,n.min):r>Ee&&(t=progress(n.min,n.max-Ee,e.min)),clamp(0,1,t)}function rebaseAxisConstraints(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const defaultElastic=.35;function resolveDragElastic(n=defaultElastic){return n===!1?n=0:n===!0&&(n=defaultElastic),{x:resolveAxisElastic(n,"left","right"),y:resolveAxisElastic(n,"top","bottom")}}function resolveAxisElastic(n,e,t){return{min:resolvePointElastic(n,e),max:resolvePointElastic(n,t)}}function resolvePointElastic(n,e){return typeof n=="number"?n:n[e]||0}const elementDragControls=new WeakMap;class VisualElementDragControls{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:Ee}=this.visualElement;if(Ee&&Ee.isPresent===!1)return;const Te=Oe=>{const{dragSnapToOrigin:Ce}=this.getProps();Ce?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(extractEventInfo(Oe).point)},Re=(Oe,Ce)=>{const{drag:Be,dragPropagation:Ue,onDragStart:We}=this.getProps();if(Be&&!Ue&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(Be),!this.openDragLock))return;this.latestPointerEvent=Oe,this.latestPanInfo=Ce,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(Ge=>{let Ye=this.getAxisMotionValue(Ge).get()||0;if(percent.test(Ye)){const{projection:Je}=this.visualElement;if(Je&&Je.layout){const Ze=Je.layout.layoutBox[Ge];Ze&&(Ye=calcLength(Ze)*(parseFloat(Ye)/100))}}this.originPoint[Ge]=Ye}),We&&frame.postRender(()=>We(Oe,Ce)),addValueToWillChange(this.visualElement,"transform");const{animationState:He}=this.visualElement;He&&He.setActive("whileDrag",!0)},Me=(Oe,Ce)=>{this.latestPointerEvent=Oe,this.latestPanInfo=Ce;const{dragPropagation:Be,dragDirectionLock:Ue,onDirectionLock:We,onDrag:He}=this.getProps();if(!Be&&!this.openDragLock)return;const{offset:Ge}=Ce;if(Ue&&this.currentDirection===null){this.currentDirection=getCurrentDirection(Ge),this.currentDirection!==null&&We&&We(this.currentDirection);return}this.updateAxis("x",Ce.point,Ge),this.updateAxis("y",Ce.point,Ge),this.visualElement.render(),He&&He(Oe,Ce)},Ve=(Oe,Ce)=>{this.latestPointerEvent=Oe,this.latestPanInfo=Ce,this.stop(Oe,Ce),this.latestPointerEvent=null,this.latestPanInfo=null},De=()=>eachAxis(Oe=>this.getAnimationState(Oe)==="paused"&&this.getAxisMotionValue(Oe).animation?.play()),{dragSnapToOrigin:$e}=this.getProps();this.panSession=new PanSession(e,{onSessionStart:Te,onStart:Re,onMove:Me,onSessionEnd:Ve,resumeAnimation:De},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:$e,distanceThreshold:r,contextWindow:getContextWindow(this.visualElement)})}stop(e,t){const r=e||this.latestPointerEvent,Ee=t||this.latestPanInfo,Te=this.isDragging;if(this.cancel(),!Te||!Ee||!r)return;const{velocity:Re}=Ee;this.startAnimation(Re);const{onDragEnd:Me}=this.getProps();Me&&frame.postRender(()=>Me(r,Ee))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:Ee}=this.getProps();if(!r||!shouldDrag(e,Ee,this.currentDirection))return;const Te=this.getAxisMotionValue(e);let Re=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(Re=applyConstraints(Re,this.constraints[e],this.elastic[e])),Te.set(Re)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,Ee=this.constraints;e&&isRefObject(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=calcRelativeConstraints(r.layoutBox,e):this.constraints=!1,this.elastic=resolveDragElastic(t),Ee!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(Te=>{this.constraints!==!1&&this.getAxisMotionValue(Te)&&(this.constraints[Te]=rebaseAxisConstraints(r.layoutBox[Te],this.constraints[Te]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!isRefObject(e))return!1;const r=e.current,{projection:Ee}=this.visualElement;if(!Ee||!Ee.layout)return!1;const Te=measurePageBox(r,Ee.root,this.visualElement.getTransformPagePoint());let Re=calcViewportConstraints(Ee.layout.layoutBox,Te);if(t){const Me=t(convertBoxToBoundingBox(Re));this.hasMutatedConstraints=!!Me,Me&&(Re=convertBoundingBoxToBox(Me))}return Re}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:Ee,dragTransition:Te,dragSnapToOrigin:Re,onDragTransitionEnd:Me}=this.getProps(),Ve=this.constraints||{},De=eachAxis($e=>{if(!shouldDrag($e,t,this.currentDirection))return;let Oe=Ve&&Ve[$e]||{};Re&&(Oe={min:0,max:0});const Ce=Ee?200:1e6,Be=Ee?40:1e7,Ue={type:"inertia",velocity:r?e[$e]:0,bounceStiffness:Ce,bounceDamping:Be,timeConstant:750,restDelta:1,restSpeed:10,...Te,...Oe};return this.startAxisValueAnimation($e,Ue)});return Promise.all(De).then(Me)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return addValueToWillChange(this.visualElement,e),r.start(animateMotionValue(e,r,0,t,this.visualElement,!1))}stopAnimation(){eachAxis(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){eachAxis(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),Ee=r[t];return Ee||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){eachAxis(t=>{const{drag:r}=this.getProps();if(!shouldDrag(t,r,this.currentDirection))return;const{projection:Ee}=this.visualElement,Te=this.getAxisMotionValue(t);if(Ee&&Ee.layout){const{min:Re,max:Me}=Ee.layout.layoutBox[t];Te.set(e[t]-mixNumber$1(Re,Me,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!isRefObject(t)||!r||!this.constraints)return;this.stopAnimation();const Ee={x:0,y:0};eachAxis(Re=>{const Me=this.getAxisMotionValue(Re);if(Me&&this.constraints!==!1){const Ve=Me.get();Ee[Re]=calcOrigin({min:Ve,max:Ve},this.constraints[Re])}});const{transformTemplate:Te}=this.visualElement.getProps();this.visualElement.current.style.transform=Te?Te({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),eachAxis(Re=>{if(!shouldDrag(Re,e,null))return;const Me=this.getAxisMotionValue(Re),{min:Ve,max:De}=this.constraints[Re];Me.set(mixNumber$1(Ve,De,Ee[Re]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const e=this.visualElement.current,t=addPointerEvent(e,"pointerdown",Ve=>{const{drag:De,dragListener:$e=!0}=this.getProps();De&&$e&&this.start(Ve)}),r=()=>{const{dragConstraints:Ve}=this.getProps();isRefObject(Ve)&&Ve.current&&(this.constraints=this.resolveRefConstraints())},{projection:Ee}=this.visualElement,Te=Ee.addEventListener("measure",r);Ee&&!Ee.layout&&(Ee.root&&Ee.root.updateScroll(),Ee.updateLayout()),frame.read(r);const Re=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),Me=Ee.addEventListener("didUpdate",({delta:Ve,hasLayoutChanged:De})=>{this.isDragging&&De&&(eachAxis($e=>{const Oe=this.getAxisMotionValue($e);Oe&&(this.originPoint[$e]+=Ve[$e].translate,Oe.set(Oe.get()+Ve[$e].translate))}),this.visualElement.render())});return()=>{Re(),t(),Te(),Me&&Me()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:Ee=!1,dragConstraints:Te=!1,dragElastic:Re=defaultElastic,dragMomentum:Me=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:Ee,dragConstraints:Te,dragElastic:Re,dragMomentum:Me}}}function shouldDrag(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function getCurrentDirection(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class DragGesture extends Feature{constructor(e){super(e),this.removeGroupControls=noop$1,this.removeListeners=noop$1,this.controls=new VisualElementDragControls(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$1}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=n=>(e,t)=>{n&&frame.postRender(()=>n(e,t))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$1}onPointerDown(e){this.session=new PanSession(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:Ee}=this.node.getProps();return{onSessionStart:asyncHandler(e),onStart:asyncHandler(t),onMove:r,onEnd:(Te,Re)=>{delete this.session,Ee&&frame.postRender(()=>Ee(Te,Re))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const correctBorderRadius={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(px.test(n))n=parseFloat(n);else return n;const t=pixelsToPercent(n,e.target.x),r=pixelsToPercent(n,e.target.y);return`${t}% ${r}%`}},correctBoxShadow={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,Ee=complex.parse(n);if(Ee.length>5)return r;const Te=complex.createTransformer(n),Re=typeof Ee[0]!="number"?1:0,Me=t.x.scale*e.x,Ve=t.y.scale*e.y;Ee[0+Re]/=Me,Ee[1+Re]/=Ve;const De=mixNumber$1(Me,Ve,.5);return typeof Ee[2+Re]=="number"&&(Ee[2+Re]/=De),typeof Ee[3+Re]=="number"&&(Ee[3+Re]/=De),Te(Ee)}};let hasTakenAnySnapshot=!1;class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:Ee}=this.props,{projection:Te}=e;addScaleCorrector(defaultScaleCorrectors),Te&&(t.group&&t.group.add(Te),r&&r.register&&Ee&&r.register(Te),hasTakenAnySnapshot&&Te.root.didUpdate(),Te.addEventListener("animationComplete",()=>{this.safeToRemove()}),Te.setOptions({...Te.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:Ee,isPresent:Te}=this.props,{projection:Re}=r;return Re&&(Re.isPresent=Te,hasTakenAnySnapshot=!0,Ee||e.layoutDependency!==t||t===void 0||e.isPresent!==Te?Re.willUpdate():this.safeToRemove(),e.isPresent!==Te&&(Te?Re.promote():Re.relegate()||frame.postRender(()=>{const Me=Re.getStack();(!Me||!Me.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),microtask.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:Ee}=e;hasTakenAnySnapshot=!0,Ee&&(Ee.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(Ee),r&&r.deregister&&r.deregister(Ee))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function MeasureLayout(n){const[e,t]=usePresence(),r=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...n,layoutGroup:r,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:e,safeToRemove:t})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function animateSingleValue(n,e,t){const r=isMotionValue(n)?n:motionValue(n);return r.start(animateMotionValue("",r,e,t)),r.animation}const compareByDepth=(n,e)=>n.depth-e.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(e){addUniqueItem(this.children,e),this.isDirty=!0}remove(e){removeItem(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(e)}}function delay(n,e){const t=time.now(),r=({timestamp:Ee})=>{const Te=Ee-t;Te>=e&&(cancelFrame(r),n(Te-e))};return frame.setup(r,!0),()=>cancelFrame(r)}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=n=>typeof n=="string"?parseFloat(n):n,isPx=n=>typeof n=="number"||px.test(n);function mixValues(n,e,t,r,Ee,Te){Ee?(n.opacity=mixNumber$1(0,t.opacity??1,easeCrossfadeIn(r)),n.opacityExit=mixNumber$1(e.opacity??1,0,easeCrossfadeOut(r))):Te&&(n.opacity=mixNumber$1(e.opacity??1,t.opacity??1,r));for(let Re=0;Re<numBorders;Re++){const Me=`border${borders[Re]}Radius`;let Ve=getRadius(e,Me),De=getRadius(t,Me);if(Ve===void 0&&De===void 0)continue;Ve||(Ve=0),De||(De=0),Ve===0||De===0||isPx(Ve)===isPx(De)?(n[Me]=Math.max(mixNumber$1(asNumber(Ve),asNumber(De),r),0),(percent.test(De)||percent.test(Ve))&&(n[Me]+="%")):n[Me]=De}(e.rotate||t.rotate)&&(n.rotate=mixNumber$1(e.rotate||0,t.rotate||0,r))}function getRadius(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$1);function compress(n,e,t){return r=>r<n?0:r>e?1:t(progress(n,e,r))}function copyAxisInto(n,e){n.min=e.min,n.max=e.max}function copyBoxInto(n,e){copyAxisInto(n.x,e.x),copyAxisInto(n.y,e.y)}function copyAxisDeltaInto(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function removePointDelta(n,e,t,r,Ee){return n-=e,n=scalePoint(n,1/t,r),Ee!==void 0&&(n=scalePoint(n,1/Ee,r)),n}function removeAxisDelta(n,e=0,t=1,r=.5,Ee,Te=n,Re=n){if(percent.test(e)&&(e=parseFloat(e),e=mixNumber$1(Re.min,Re.max,e/100)-Re.min),typeof e!="number")return;let Me=mixNumber$1(Te.min,Te.max,r);n===Te&&(Me-=e),n.min=removePointDelta(n.min,e,t,Me,Ee),n.max=removePointDelta(n.max,e,t,Me,Ee)}function removeAxisTransforms(n,e,[t,r,Ee],Te,Re){removeAxisDelta(n,e[t],e[r],e[Ee],e.scale,Te,Re)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(n,e,t,r){removeAxisTransforms(n.x,e,xKeys,t?t.x:void 0,r?r.x:void 0),removeAxisTransforms(n.y,e,yKeys,t?t.y:void 0,r?r.y:void 0)}function isAxisDeltaZero(n){return n.translate===0&&n.scale===1}function isDeltaZero(n){return isAxisDeltaZero(n.x)&&isAxisDeltaZero(n.y)}function axisEquals(n,e){return n.min===e.min&&n.max===e.max}function boxEquals(n,e){return axisEquals(n.x,e.x)&&axisEquals(n.y,e.y)}function axisEqualsRounded(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function boxEqualsRounded(n,e){return axisEqualsRounded(n.x,e.x)&&axisEqualsRounded(n.y,e.y)}function aspectRatio(n){return calcLength(n.x)/calcLength(n.y)}function axisDeltaEquals(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class NodeStack{constructor(){this.members=[]}add(e){addUniqueItem(this.members,e),e.scheduleRender()}remove(e){if(removeItem(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(Ee=>e===Ee);if(t===0)return!1;let r;for(let Ee=t;Ee>=0;Ee--){const Te=this.members[Ee];if(Te.isPresent!==!1){r=Te;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:Ee}=e.options;Ee===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(n,e,t){let r="";const Ee=n.x.translate/e.x,Te=n.y.translate/e.y,Re=t?.z||0;if((Ee||Te||Re)&&(r=`translate3d(${Ee}px, ${Te}px, ${Re}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:De,rotate:$e,rotateX:Oe,rotateY:Ce,skewX:Be,skewY:Ue}=t;De&&(r=`perspective(${De}px) ${r}`),$e&&(r+=`rotate(${$e}deg) `),Oe&&(r+=`rotateX(${Oe}deg) `),Ce&&(r+=`rotateY(${Ce}deg) `),Be&&(r+=`skewX(${Be}deg) `),Ue&&(r+=`skewY(${Ue}deg) `)}const Me=n.x.scale*e.x,Ve=n.y.scale*e.y;return(Me!==1||Ve!==1)&&(r+=`scale(${Me}, ${Ve})`),r||"none"}const transformAxes=["","X","Y","Z"],animationTarget=1e3;let id=0;function resetDistortingTransform(n,e,t,r){const{latestValues:Ee}=e;Ee[n]&&(t[n]=Ee[n],e.setStaticValue(n,0),r&&(r[n]=0))}function cancelTreeOptimisedTransformAnimations(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=getOptimisedAppearId(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:Ee,layoutId:Te}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",frame,!(Ee||Te))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(r)}function createProjectionNode({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:Ee}){return class{constructor(Re={},Me=e?.()){this.id=id++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=Re,this.root=Me?Me.root||Me:this,this.path=Me?[...Me.path,Me]:[],this.parent=Me,this.depth=Me?Me.depth+1:0;for(let Ve=0;Ve<this.path.length;Ve++)this.path[Ve].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(Re,Me){return this.eventHandlers.has(Re)||this.eventHandlers.set(Re,new SubscriptionManager),this.eventHandlers.get(Re).add(Me)}notifyListeners(Re,...Me){const Ve=this.eventHandlers.get(Re);Ve&&Ve.notify(...Me)}hasListeners(Re){return this.eventHandlers.has(Re)}mount(Re){if(this.instance)return;this.isSVG=isSVGElement(Re)&&!isSVGSVGElement(Re),this.instance=Re;const{layoutId:Me,layout:Ve,visualElement:De}=this.options;if(De&&!De.current&&De.mount(Re),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(Ve||Me)&&(this.isLayoutDirty=!0),n){let $e,Oe=0;const Ce=()=>this.root.updateBlockedByResize=!1;frame.read(()=>{Oe=window.innerWidth}),n(Re,()=>{const Be=window.innerWidth;Be!==Oe&&(Oe=Be,this.root.updateBlockedByResize=!0,$e&&$e(),$e=delay(Ce,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation)))})}Me&&this.root.registerSharedNode(Me,this),this.options.animate!==!1&&De&&(Me||Ve)&&this.addEventListener("didUpdate",({delta:$e,hasLayoutChanged:Oe,hasRelativeLayoutChanged:Ce,layout:Be})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const Ue=this.options.transition||De.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:We,onLayoutAnimationComplete:He}=De.getProps(),Ge=!this.targetLayout||!boxEqualsRounded(this.targetLayout,Be),Ye=!Oe&&Ce;if(this.options.layoutRoot||this.resumeFrom||Ye||Oe&&(Ge||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const Je={...getValueTransition(Ue,"layout"),onPlay:We,onComplete:He};(De.shouldReduceMotion||this.options.layoutRoot)&&(Je.delay=0,Je.type=!1),this.startAnimation(Je),this.setAnimationOrigin($e,Ye)}else Oe||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=Be})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const Re=this.getStack();Re&&Re.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:Re}=this.options;return Re&&Re.getProps().transformTemplate}willUpdate(Re=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let $e=0;$e<this.path.length;$e++){const Oe=this.path[$e];Oe.shouldResetTransform=!0,Oe.updateScroll("snapshot"),Oe.options.layoutRoot&&Oe.willUpdate(!1)}const{layoutId:Me,layout:Ve}=this.options;if(Me===void 0&&!Ve)return;const De=this.getTransformTemplate();this.prevTransformTemplateValue=De?De(this.latestValues,""):void 0,this.updateSnapshot(),Re&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(clearIsLayoutDirty);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate)):this.nodes.forEach(clearIsLayoutDirty),this.clearAllSnapshots();const Me=time.now();frameData.delta=clamp(0,1e3/60,Me-frameData.timestamp),frameData.timestamp=Me,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!calcLength(this.snapshot.measuredBox.x)&&!calcLength(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let Ve=0;Ve<this.path.length;Ve++)this.path[Ve].updateScroll();const Re=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:Me}=this.options;Me&&Me.notify("LayoutMeasure",this.layout.layoutBox,Re?Re.layoutBox:void 0)}updateScroll(Re="measure"){let Me=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===Re&&(Me=!1),Me&&this.instance){const Ve=r(this.instance);this.scroll={animationId:this.root.animationId,phase:Re,isRoot:Ve,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:Ve}}}resetTransform(){if(!Ee)return;const Re=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,Me=this.projectionDelta&&!isDeltaZero(this.projectionDelta),Ve=this.getTransformTemplate(),De=Ve?Ve(this.latestValues,""):void 0,$e=De!==this.prevTransformTemplateValue;Re&&this.instance&&(Me||hasTransform(this.latestValues)||$e)&&(Ee(this.instance,De),this.shouldResetTransform=!1,this.scheduleRender())}measure(Re=!0){const Me=this.measurePageBox();let Ve=this.removeElementScroll(Me);return Re&&(Ve=this.removeTransform(Ve)),roundBox(Ve),{animationId:this.root.animationId,measuredBox:Me,layoutBox:Ve,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:Re}=this.options;if(!Re)return createBox();const Me=Re.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(checkNodeWasScrollRoot))){const{scroll:De}=this.root;De&&(translateAxis(Me.x,De.offset.x),translateAxis(Me.y,De.offset.y))}return Me}removeElementScroll(Re){const Me=createBox();if(copyBoxInto(Me,Re),this.scroll?.wasRoot)return Me;for(let Ve=0;Ve<this.path.length;Ve++){const De=this.path[Ve],{scroll:$e,options:Oe}=De;De!==this.root&&$e&&Oe.layoutScroll&&($e.wasRoot&&copyBoxInto(Me,Re),translateAxis(Me.x,$e.offset.x),translateAxis(Me.y,$e.offset.y))}return Me}applyTransform(Re,Me=!1){const Ve=createBox();copyBoxInto(Ve,Re);for(let De=0;De<this.path.length;De++){const $e=this.path[De];!Me&&$e.options.layoutScroll&&$e.scroll&&$e!==$e.root&&transformBox(Ve,{x:-$e.scroll.offset.x,y:-$e.scroll.offset.y}),hasTransform($e.latestValues)&&transformBox(Ve,$e.latestValues)}return hasTransform(this.latestValues)&&transformBox(Ve,this.latestValues),Ve}removeTransform(Re){const Me=createBox();copyBoxInto(Me,Re);for(let Ve=0;Ve<this.path.length;Ve++){const De=this.path[Ve];if(!De.instance||!hasTransform(De.latestValues))continue;hasScale(De.latestValues)&&De.updateSnapshot();const $e=createBox(),Oe=De.measurePageBox();copyBoxInto($e,Oe),removeBoxTransforms(Me,De.latestValues,De.snapshot?De.snapshot.layoutBox:void 0,$e)}return hasTransform(this.latestValues)&&removeBoxTransforms(Me,this.latestValues),Me}setTargetDelta(Re){this.targetDelta=Re,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(Re){this.options={...this.options,...Re,crossfade:Re.crossfade!==void 0?Re.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(Re=!1){const Me=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=Me.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=Me.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=Me.isSharedProjectionDirty);const Ve=!!this.resumingFrom||this!==Me;if(!(Re||Ve&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:$e,layoutId:Oe}=this.options;if(!(!this.layout||!($e||Oe))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const Ce=this.getClosestProjectingParent();Ce&&Ce.layout&&this.animationProgress!==1?(this.relativeParent=Ce,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,Ce.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const Ce=this.getClosestProjectingParent();Ce&&!!Ce.resumingFrom==!!this.resumingFrom&&!Ce.options.layoutScroll&&Ce.target&&this.animationProgress!==1?(this.relativeParent=Ce,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,Ce.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const Re=this.getLead(),Me=!!this.resumingFrom||this!==Re;let Ve=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(Ve=!1),Me&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(Ve=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(Ve=!1),Ve)return;const{layout:De,layoutId:$e}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(De||$e))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const Oe=this.treeScale.x,Ce=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,Me),Re.layout&&!Re.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(Re.target=Re.layout.layoutBox,Re.targetWithTransforms=createBox());const{target:Be}=Re;if(!Be){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,Be,this.latestValues),(this.treeScale.x!==Oe||this.treeScale.y!==Ce||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",Be))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(Re=!0){if(this.options.visualElement?.scheduleRender(),Re){const Me=this.getStack();Me&&Me.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(Re,Me=!1){const Ve=this.snapshot,De=Ve?Ve.latestValues:{},$e={...this.latestValues},Oe=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!Me;const Ce=createBox(),Be=Ve?Ve.source:void 0,Ue=this.layout?this.layout.source:void 0,We=Be!==Ue,He=this.getStack(),Ge=!He||He.members.length<=1,Ye=!!(We&&!Ge&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let Je;this.mixTargetDelta=Ze=>{const fn=Ze/1e3;mixAxisDelta(Oe.x,Re.x,fn),mixAxisDelta(Oe.y,Re.y,fn),this.setTargetDelta(Oe),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(Ce,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,Ce,fn),Je&&boxEquals(this.relativeTarget,Je)&&(this.isProjectionDirty=!1),Je||(Je=createBox()),copyBoxInto(Je,this.relativeTarget)),We&&(this.animationValues=$e,mixValues($e,De,this.latestValues,fn,Ye,Ge)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=fn},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(Re){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=motionValue(0)),this.currentAnimation=animateSingleValue(this.motionValue,[0,1e3],{...Re,velocity:0,isSync:!0,onUpdate:Me=>{this.mixTargetDelta(Me),Re.onUpdate&&Re.onUpdate(Me)},onStop:()=>{},onComplete:()=>{Re.onComplete&&Re.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const Re=this.getStack();Re&&Re.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const Re=this.getLead();let{targetWithTransforms:Me,target:Ve,layout:De,latestValues:$e}=Re;if(!(!Me||!Ve||!De)){if(this!==Re&&this.layout&&De&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,De.layoutBox)){Ve=this.target||createBox();const Oe=calcLength(this.layout.layoutBox.x);Ve.x.min=Re.target.x.min,Ve.x.max=Ve.x.min+Oe;const Ce=calcLength(this.layout.layoutBox.y);Ve.y.min=Re.target.y.min,Ve.y.max=Ve.y.min+Ce}copyBoxInto(Me,Ve),transformBox(Me,$e),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,Me,$e)}}registerSharedNode(Re,Me){this.sharedNodes.has(Re)||this.sharedNodes.set(Re,new NodeStack),this.sharedNodes.get(Re).add(Me);const De=Me.options.initialPromotionConfig;Me.promote({transition:De?De.transition:void 0,preserveFollowOpacity:De&&De.shouldPreserveFollowOpacity?De.shouldPreserveFollowOpacity(Me):void 0})}isLead(){const Re=this.getStack();return Re?Re.lead===this:!0}getLead(){const{layoutId:Re}=this.options;return Re?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:Re}=this.options;return Re?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:Re}=this.options;if(Re)return this.root.sharedNodes.get(Re)}promote({needsReset:Re,transition:Me,preserveFollowOpacity:Ve}={}){const De=this.getStack();De&&De.promote(this,Ve),Re&&(this.projectionDelta=void 0,this.needsReset=!0),Me&&this.setOptions({transition:Me})}relegate(){const Re=this.getStack();return Re?Re.relegate(this):!1}resetSkewAndRotation(){const{visualElement:Re}=this.options;if(!Re)return;let Me=!1;const{latestValues:Ve}=Re;if((Ve.z||Ve.rotate||Ve.rotateX||Ve.rotateY||Ve.rotateZ||Ve.skewX||Ve.skewY)&&(Me=!0),!Me)return;const De={};Ve.z&&resetDistortingTransform("z",Re,De,this.animationValues);for(let $e=0;$e<transformAxes.length;$e++)resetDistortingTransform(`rotate${transformAxes[$e]}`,Re,De,this.animationValues),resetDistortingTransform(`skew${transformAxes[$e]}`,Re,De,this.animationValues);Re.render();for(const $e in De)Re.setStaticValue($e,De[$e]),this.animationValues&&(this.animationValues[$e]=De[$e]);Re.scheduleRender()}applyProjectionStyles(Re,Me){if(!this.instance||this.isSVG)return;if(!this.isVisible){Re.visibility="hidden";return}const Ve=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,Re.visibility="",Re.opacity="",Re.pointerEvents=resolveMotionValue(Me?.pointerEvents)||"",Re.transform=Ve?Ve(this.latestValues,""):"none";return}const De=this.getLead();if(!this.projectionDelta||!this.layout||!De.target){this.options.layoutId&&(Re.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,Re.pointerEvents=resolveMotionValue(Me?.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(Re.transform=Ve?Ve({},""):"none",this.hasProjected=!1);return}Re.visibility="";const $e=De.animationValues||De.latestValues;this.applyTransformsToTarget();let Oe=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,$e);Ve&&(Oe=Ve($e,Oe)),Re.transform=Oe;const{x:Ce,y:Be}=this.projectionDelta;Re.transformOrigin=`${Ce.origin*100}% ${Be.origin*100}% 0`,De.animationValues?Re.opacity=De===this?$e.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:$e.opacityExit:Re.opacity=De===this?$e.opacity!==void 0?$e.opacity:"":$e.opacityExit!==void 0?$e.opacityExit:0;for(const Ue in scaleCorrectors){if($e[Ue]===void 0)continue;const{correct:We,applyTo:He,isCSSVariable:Ge}=scaleCorrectors[Ue],Ye=Oe==="none"?$e[Ue]:We($e[Ue],De);if(He){const Je=He.length;for(let Ze=0;Ze<Je;Ze++)Re[He[Ze]]=Ye}else Ge?this.options.visualElement.renderState.vars[Ue]=Ye:Re[Ue]=Ye}this.options.layoutId&&(Re.pointerEvents=De===this?resolveMotionValue(Me?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(Re=>Re.currentAnimation?.stop()),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(n){n.updateLayout()}function notifyLayoutUpdate(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=n.layout,{animationType:Ee}=n.options,Te=e.source!==n.layout.source;Ee==="size"?eachAxis($e=>{const Oe=Te?e.measuredBox[$e]:e.layoutBox[$e],Ce=calcLength(Oe);Oe.min=t[$e].min,Oe.max=Oe.min+Ce}):shouldAnimatePositionOnly(Ee,e.layoutBox,t)&&eachAxis($e=>{const Oe=Te?e.measuredBox[$e]:e.layoutBox[$e],Ce=calcLength(t[$e]);Oe.max=Oe.min+Ce,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[$e].max=n.relativeTarget[$e].min+Ce)});const Re=createDelta();calcBoxDelta(Re,t,e.layoutBox);const Me=createDelta();Te?calcBoxDelta(Me,n.applyTransform(r,!0),e.measuredBox):calcBoxDelta(Me,t,e.layoutBox);const Ve=!isDeltaZero(Re);let De=!1;if(!n.resumeFrom){const $e=n.getClosestProjectingParent();if($e&&!$e.resumeFrom){const{snapshot:Oe,layout:Ce}=$e;if(Oe&&Ce){const Be=createBox();calcRelativePosition(Be,e.layoutBox,Oe.layoutBox);const Ue=createBox();calcRelativePosition(Ue,t,Ce.layoutBox),boxEqualsRounded(Be,Ue)||(De=!0),$e.options.layoutRoot&&(n.relativeTarget=Ue,n.relativeTargetOrigin=Be,n.relativeParent=$e)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:Me,layoutDelta:Re,hasLayoutChanged:Ve,hasRelativeLayoutChanged:De})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function propagateDirtyNodes(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function cleanDirtyNodes(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function clearSnapshot(n){n.clearSnapshot()}function clearMeasurements(n){n.clearMeasurements()}function clearIsLayoutDirty(n){n.isLayoutDirty=!1}function resetTransformStyle(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function finishAnimation(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function resolveTargetDelta(n){n.resolveTargetDelta()}function calcProjection(n){n.calcProjection()}function resetSkewAndRotation(n){n.resetSkewAndRotation()}function removeLeadSnapshots(n){n.removeLeadSnapshot()}function mixAxisDelta(n,e,t){n.translate=mixNumber$1(e.translate,0,t),n.scale=mixNumber$1(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function mixAxis(n,e,t,r){n.min=mixNumber$1(e.min,t.min,r),n.max=mixNumber$1(e.max,t.max,r)}function mixBox(n,e,t,r){mixAxis(n.x,e.x,t.x,r),mixAxis(n.y,e.y,t.y,r)}function hasOpacityCrossfade(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$1;function roundAxis(n){n.min=roundPoint(n.min),n.max=roundPoint(n.max)}function roundBox(n){roundAxis(n.x),roundAxis(n.y)}function shouldAnimatePositionOnly(n,e,t){return n==="position"||n==="preserve-aspect"&&!isNear(aspectRatio(e),aspectRatio(t),.2)}function checkNodeWasScrollRoot(n){return n!==n.root&&n.scroll?.wasRoot}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(n,e)=>addDomEvent(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const n=new DocumentProjectionNode({});n.mount(window),n.setOptions({layoutScroll:!0}),rootProjectionNode.current=n}return rootProjectionNode.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const Ee="onHover"+t,Te=r[Ee];Te&&frame.postRender(()=>Te(e,extractEventInfo(e)))}class HoverGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=hover(e,(t,r)=>(handleHoverEvent(this.node,r,"Start"),Ee=>handleHoverEvent(this.node,Ee,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const Ee="onTap"+(t==="End"?"":t),Te=r[Ee];Te&&frame.postRender(()=>Te(e,extractEventInfo(e)))}class PressGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=press(e,(t,r)=>(handlePressEvent(this.node,r,"Start"),(Ee,{success:Te})=>handlePressEvent(this.node,Ee,Te?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=n=>{const e=observerCallbacks.get(n.target);e&&e(n)},fireAllObserverCallbacks=n=>{n.forEach(fireObserverCallback)};function initIntersectionObserver({root:n,...e}){const t=n||document;observers.has(t)||observers.set(t,{});const r=observers.get(t),Ee=JSON.stringify(e);return r[Ee]||(r[Ee]=new IntersectionObserver(fireAllObserverCallbacks,{root:n,...e})),r[Ee]}function observeIntersection(n,e,t){const r=initIntersectionObserver(e);return observerCallbacks.set(n,t),r.observe(n),()=>{observerCallbacks.delete(n),r.unobserve(n)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:Ee="some",once:Te}=e,Re={root:t?t.current:void 0,rootMargin:r,threshold:typeof Ee=="number"?Ee:thresholdNames[Ee]},Me=Ve=>{const{isIntersecting:De}=Ve;if(this.isInView===De||(this.isInView=De,Te&&!De&&this.hasEnteredView))return;De&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",De);const{onViewportEnter:$e,onViewportLeave:Oe}=this.node.getProps(),Ce=De?$e:Oe;Ce&&Ce(Ve)};return observeIntersection(this.node.current,Re,Me)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(e,t))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},featureBundle={...animations,...gestureAnimations,...drag,...layout},motion=createMotionProxy(featureBundle,createDomVisualElement),maxElapsed=50,createAxisInfo=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),createScrollInfo=()=>({time:0,x:createAxisInfo(),y:createAxisInfo()}),keys$1={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function updateAxisInfo(n,e,t,r){const Ee=t[e],{length:Te,position:Re}=keys$1[e],Me=Ee.current,Ve=t.time;Ee.current=n[`scroll${Re}`],Ee.scrollLength=n[`scroll${Te}`]-n[`client${Te}`],Ee.offset.length=0,Ee.offset[0]=0,Ee.offset[1]=Ee.scrollLength,Ee.progress=progress(0,Ee.scrollLength,Ee.current);const De=r-Ve;Ee.velocity=De>maxElapsed?0:velocityPerSecond(Ee.current-Me,De)}function updateScrollInfo(n,e,t){updateAxisInfo(n,"x",e,t),updateAxisInfo(n,"y",e,t),e.time=t}function calcInset(n,e){const t={x:0,y:0};let r=n;for(;r&&r!==e;)if(isHTMLElement(r))t.x+=r.offsetLeft,t.y+=r.offsetTop,r=r.offsetParent;else if(r.tagName==="svg"){const Ee=r.getBoundingClientRect();r=r.parentElement;const Te=r.getBoundingClientRect();t.x+=Ee.left-Te.left,t.y+=Ee.top-Te.top}else if(r instanceof SVGGraphicsElement){const{x:Ee,y:Te}=r.getBBox();t.x+=Ee,t.y+=Te;let Re=null,Me=r.parentNode;for(;!Re;)Me.tagName==="svg"&&(Re=Me),Me=r.parentNode;r=Re}else break;return t}const namedEdges={start:0,center:.5,end:1};function resolveEdge(n,e,t=0){let r=0;if(n in namedEdges&&(n=namedEdges[n]),typeof n=="string"){const Ee=parseFloat(n);n.endsWith("px")?r=Ee:n.endsWith("%")?n=Ee/100:n.endsWith("vw")?r=Ee/100*document.documentElement.clientWidth:n.endsWith("vh")?r=Ee/100*document.documentElement.clientHeight:n=Ee}return typeof n=="number"&&(r=e*n),t+r}const defaultOffset=[0,0];function resolveOffset(n,e,t,r){let Ee=Array.isArray(n)?n:defaultOffset,Te=0,Re=0;return typeof n=="number"?Ee=[n,n]:typeof n=="string"&&(n=n.trim(),n.includes(" ")?Ee=n.split(" "):Ee=[n,namedEdges[n]?n:"0"]),Te=resolveEdge(Ee[0],t,r),Re=resolveEdge(Ee[1],e),Te-Re}const ScrollOffset={All:[[0,0],[1,1]]},point$3={x:0,y:0};function getTargetSize(n){return"getBBox"in n&&n.tagName!=="svg"?n.getBBox():{width:n.clientWidth,height:n.clientHeight}}function resolveOffsets(n,e,t){const{offset:r=ScrollOffset.All}=t,{target:Ee=n,axis:Te="y"}=t,Re=Te==="y"?"height":"width",Me=Ee!==n?calcInset(Ee,n):point$3,Ve=Ee===n?{width:n.scrollWidth,height:n.scrollHeight}:getTargetSize(Ee),De={width:n.clientWidth,height:n.clientHeight};e[Te].offset.length=0;let $e=!e[Te].interpolate;const Oe=r.length;for(let Ce=0;Ce<Oe;Ce++){const Be=resolveOffset(r[Ce],De[Re],Ve[Re],Me[Te]);!$e&&Be!==e[Te].interpolatorOffsets[Ce]&&($e=!0),e[Te].offset[Ce]=Be}$e&&(e[Te].interpolate=interpolate$1(e[Te].offset,defaultOffset$1(r),{clamp:!1}),e[Te].interpolatorOffsets=[...e[Te].offset]),e[Te].progress=clamp(0,1,e[Te].interpolate(e[Te].current))}function measure(n,e=n,t){if(t.x.targetOffset=0,t.y.targetOffset=0,e!==n){let r=e;for(;r&&r!==n;)t.x.targetOffset+=r.offsetLeft,t.y.targetOffset+=r.offsetTop,r=r.offsetParent}t.x.targetLength=e===n?e.scrollWidth:e.clientWidth,t.y.targetLength=e===n?e.scrollHeight:e.clientHeight,t.x.containerLength=n.clientWidth,t.y.containerLength=n.clientHeight}function createOnScrollHandler(n,e,t,r={}){return{measure:Ee=>{measure(n,r.target,t),updateScrollInfo(n,t,Ee),(r.offset||r.target)&&resolveOffsets(n,t,r)},notify:()=>e(t)}}const scrollListeners=new WeakMap,resizeListeners=new WeakMap,onScrollHandlers=new WeakMap,getEventTarget=n=>n===document.scrollingElement?window:n;function scrollInfo(n,{container:e=document.scrollingElement,...t}={}){if(!e)return noop$1;let r=onScrollHandlers.get(e);r||(r=new Set,onScrollHandlers.set(e,r));const Ee=createScrollInfo(),Te=createOnScrollHandler(e,n,Ee,t);if(r.add(Te),!scrollListeners.has(e)){const Me=()=>{for(const Oe of r)Oe.measure(frameData.timestamp);frame.preUpdate(Ve)},Ve=()=>{for(const Oe of r)Oe.notify()},De=()=>frame.read(Me);scrollListeners.set(e,De);const $e=getEventTarget(e);window.addEventListener("resize",De,{passive:!0}),e!==document.documentElement&&resizeListeners.set(e,resize(e,De)),$e.addEventListener("scroll",De,{passive:!0}),De()}const Re=scrollListeners.get(e);return frame.read(Re,!1,!0),()=>{cancelFrame(Re);const Me=onScrollHandlers.get(e);if(!Me||(Me.delete(Te),Me.size))return;const Ve=scrollListeners.get(e);scrollListeners.delete(e),Ve&&(getEventTarget(e).removeEventListener("scroll",Ve),resizeListeners.get(e)?.(),window.removeEventListener("resize",Ve))}}const timelineCache=new Map;function scrollTimelineFallback(n){const e={value:0},t=scrollInfo(r=>{e.value=r[n.axis].progress*100},n);return{currentTime:e,cancel:t}}function getTimeline({source:n,container:e,...t}){const{axis:r}=t;n&&(e=n);const Ee=timelineCache.get(e)??new Map;timelineCache.set(e,Ee);const Te=t.target??"self",Re=Ee.get(Te)??{},Me=r+(t.offset??[]).join(",");return Re[Me]||(Re[Me]=!t.target&&supportsScrollTimeline()?new ScrollTimeline({source:e,axis:r}):scrollTimelineFallback({container:e,...t})),Re[Me]}function attachToAnimation(n,e){const t=getTimeline(e);return n.attachTimeline({timeline:e.target?void 0:t,observe:r=>(r.pause(),observeTimeline(Ee=>{r.time=r.duration*Ee},t))})}function isOnScrollWithInfo(n){return n.length===2}function attachToFunction(n,e){return isOnScrollWithInfo(n)?scrollInfo(t=>{n(t[e.axis].progress,t)},e):observeTimeline(n,getTimeline(e))}function scroll(n,{axis:e="y",container:t=document.scrollingElement,...r}={}){if(!t)return noop$1;const Ee={axis:e,container:t,...r};return typeof n=="function"?attachToFunction(n,Ee):attachToAnimation(n,Ee)}const createScrollMotionValues=()=>({scrollX:motionValue(0),scrollY:motionValue(0),scrollXProgress:motionValue(0),scrollYProgress:motionValue(0)}),isRefPending=n=>n?!n.current:!1;function useScroll({container:n,target:e,...t}={}){const r=useConstant(createScrollMotionValues),Ee=reactExports.useRef(null),Te=reactExports.useRef(!1),Re=reactExports.useCallback(()=>(Ee.current=scroll((Me,{x:Ve,y:De})=>{r.scrollX.set(Ve.current),r.scrollXProgress.set(Ve.progress),r.scrollY.set(De.current),r.scrollYProgress.set(De.progress)},{...t,container:n?.current||void 0,target:e?.current||void 0}),()=>{Ee.current?.()}),[n,e,JSON.stringify(t.offset)]);return useIsomorphicLayoutEffect(()=>{if(Te.current=!1,isRefPending(n)||isRefPending(e)){Te.current=!0;return}else return Re()},[Re]),reactExports.useEffect(()=>{if(Te.current)return invariant(!isRefPending(n)),invariant(!isRefPending(e)),Re()},[Re]),r}function useMotionValue(n){const e=useConstant(()=>motionValue(n)),{isStatic:t}=reactExports.useContext(MotionConfigContext);if(t){const[,r]=reactExports.useState(n);reactExports.useEffect(()=>e.on("change",r),[])}return e}function useCombineMotionValues(n,e){const t=useMotionValue(e()),r=()=>t.set(e());return r(),useIsomorphicLayoutEffect(()=>{const Ee=()=>frame.preRender(r,!1,!0),Te=n.map(Re=>Re.on("change",Ee));return()=>{Te.forEach(Re=>Re()),cancelFrame(r)}}),t}function useComputed(n){collectMotionValues.current=[],n();const e=useCombineMotionValues(collectMotionValues.current,n);return collectMotionValues.current=void 0,e}function useTransform(n,e,t,r){if(typeof n=="function")return useComputed(n);const Ee=typeof e=="function"?e:transform(e,t,r);return Array.isArray(n)?useListTransform(n,Ee):useListTransform([n],([Te])=>Ee(Te))}function useListTransform(n,e){const t=useConstant(()=>[]);return useCombineMotionValues(n,()=>{t.length=0;const r=n.length;for(let Ee=0;Ee<r;Ee++)t[Ee]=n[Ee].get();return e(t)})}const containerVariants={initial:{},animate:{transition:{staggerChildren:.2}}},dotVariants={initial:{y:"0%"},animate:{y:"-100%",transition:{duration:.5,repeat:1/0,repeatType:"reverse",ease:"easeInOut"}}},TypingIndicator=()=>jsxRuntimeExports.jsxs(motion.div,{className:"flex items-center justify-center space-x-1.5 p-2 h-8",variants:containerVariants,initial:"initial",animate:"animate",children:[jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Typing..."}),jsxRuntimeExports.jsx(motion.div,{className:"h-2 w-2 bg-gray-500 rounded-full",variants:dotVariants}),jsxRuntimeExports.jsx(motion.div,{className:"h-2 w-2 bg-gray-500 rounded-full",variants:dotVariants}),jsxRuntimeExports.jsx(motion.div,{className:"h-2 w-2 bg-gray-500 rounded-full",variants:dotVariants})]}),ChatBubble=({role:n,text:e})=>{const t=n==="user",r=e==="__typing__",[Ee,Te]=reactExports.useState("");return reactExports.useEffect(()=>{if(r){Te("");return}let Re=0;const Me=setInterval(()=>{Te(Ve=>e.slice(0,Re+1)),Re++,Re>=e.length&&clearInterval(Me)},8);return()=>clearInterval(Me)},[e,r]),r?jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[jsxRuntimeExports.jsx("div",{className:"mt-1",children:jsxRuntimeExports.jsx(FaRobot,{className:"w-6 h-6 text-gray-500 drop-shadow"})}),jsxRuntimeExports.jsx("div",{className:"bg-white/20 border border-white/30 backdrop-blur-lg rounded-2xl rounded-bl-none shadow-inner",children:jsxRuntimeExports.jsx(TypingIndicator,{})})]}):jsxRuntimeExports.jsxs("div",{className:`flex items-start gap-3 mb-4 ${t?"justify-end flex-row-reverse":""}`,children:[jsxRuntimeExports.jsx("div",{className:"mt-1",children:t?jsxRuntimeExports.jsx(FaUserCircle,{className:"w-6 h-6 text-indigo-500 drop-shadow"}):jsxRuntimeExports.jsx(FaRobot,{className:"w-6 h-6 text-gray-500 drop-shadow"})}),jsxRuntimeExports.jsx("div",{className:`max-w-[80%] px-4 py-3 text-sm font-medium whitespace-pre-wrap transition-all duration-300
        ${t?"bg-gradient-to-br from-indigo-500 to-purple-500 text-white rounded-2xl rounded-br-none shadow-lg":"bg-white/20 text-gray-900 dark:text-white border border-white/30 backdrop-blur-lg rounded-2xl rounded-bl-none shadow-inner"}`,children:Ee})]})};function bind(n,e){return function(){return n.apply(e,arguments)}}const{toString:toString$3}=Object.prototype,{getPrototypeOf}=Object,{iterator,toStringTag}=Symbol,kindOf=(n=>e=>{const t=toString$3.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=n=>(n=n.toLowerCase(),e=>kindOf(e)===n),typeOfTest=n=>e=>typeof e===n,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(n){return n!==null&&!isUndefined(n)&&n.constructor!==null&&!isUndefined(n.constructor)&&isFunction$1(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&isArrayBuffer(n.buffer),e}const isString=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=n=>n!==null&&typeof n=="object",isBoolean=n=>n===!0||n===!1,isPlainObject$1=n=>{if(kindOf(n)!=="object")return!1;const e=getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(toStringTag in n)&&!(iterator in n)},isEmptyObject=n=>{if(!isObject(n)||isBuffer(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=n=>isObject(n)&&isFunction$1(n.pipe),isFormData=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||isFunction$1(n.append)&&((e=kindOf(n))==="formdata"||e==="object"&&isFunction$1(n.toString)&&n.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,Ee;if(typeof n!="object"&&(n=[n]),isArray(n))for(r=0,Ee=n.length;r<Ee;r++)e.call(null,n[r],r,n);else{if(isBuffer(n))return;const Te=t?Object.getOwnPropertyNames(n):Object.keys(n),Re=Te.length;let Me;for(r=0;r<Re;r++)Me=Te[r],e.call(null,n[Me],Me,n)}}function findKey(n,e){if(isBuffer(n))return null;e=e.toLowerCase();const t=Object.keys(n);let r=t.length,Ee;for(;r-- >0;)if(Ee=t[r],e===Ee.toLowerCase())return Ee;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=n=>!isUndefined(n)&&n!==_global;function merge$1(){const{caseless:n,skipUndefined:e}=isContextDefined(this)&&this||{},t={},r=(Ee,Te)=>{const Re=n&&findKey(t,Te)||Te;isPlainObject$1(t[Re])&&isPlainObject$1(Ee)?t[Re]=merge$1(t[Re],Ee):isPlainObject$1(Ee)?t[Re]=merge$1({},Ee):isArray(Ee)?t[Re]=Ee.slice():(!e||!isUndefined(Ee))&&(t[Re]=Ee)};for(let Ee=0,Te=arguments.length;Ee<Te;Ee++)arguments[Ee]&&forEach(arguments[Ee],r);return t}const extend$2=(n,e,t,{allOwnKeys:r}={})=>(forEach(e,(Ee,Te)=>{t&&isFunction$1(Ee)?n[Te]=bind(Ee,t):n[Te]=Ee},{allOwnKeys:r}),n),stripBOM=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),inherits=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},toFlatObject=(n,e,t,r)=>{let Ee,Te,Re;const Me={};if(e=e||{},n==null)return e;do{for(Ee=Object.getOwnPropertyNames(n),Te=Ee.length;Te-- >0;)Re=Ee[Te],(!r||r(Re,n,e))&&!Me[Re]&&(e[Re]=n[Re],Me[Re]=!0);n=t!==!1&&getPrototypeOf(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},endsWith=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},toArray=n=>{if(!n)return null;if(isArray(n))return n;let e=n.length;if(!isNumber(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},isTypedArray$1=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(n,e)=>{const r=(n&&n[iterator]).call(n);let Ee;for(;(Ee=r.next())&&!Ee.done;){const Te=Ee.value;e.call(n,Te[0],Te[1])}},matchAll=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,Ee){return r.toUpperCase()+Ee}),hasOwnProperty$1=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};forEach(t,(Ee,Te)=>{let Re;(Re=e(Ee,Te,n))!==!1&&(r[Te]=Re||Ee)}),Object.defineProperties(n,r)},freezeMethods=n=>{reduceDescriptors(n,(e,t)=>{if(isFunction$1(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(isFunction$1(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},toObjectSet=(n,e)=>{const t={},r=Ee=>{Ee.forEach(Te=>{t[Te]=!0})};return isArray(n)?r(n):r(String(n).split(e)),t},noop=()=>{},toFiniteNumber=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function isSpecCompliantForm(n){return!!(n&&isFunction$1(n.append)&&n[toStringTag]==="FormData"&&n[iterator])}const toJSONObject=n=>{const e=new Array(10),t=(r,Ee)=>{if(isObject(r)){if(e.indexOf(r)>=0)return;if(isBuffer(r))return r;if(!("toJSON"in r)){e[Ee]=r;const Te=isArray(r)?[]:{};return forEach(r,(Re,Me)=>{const Ve=t(Re,Ee+1);!isUndefined(Ve)&&(Te[Me]=Ve)}),e[Ee]=void 0,Te}}return r};return t(n,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=n=>n&&(isObject(n)||isFunction$1(n))&&isFunction$1(n.then)&&isFunction$1(n.catch),_setImmediate=((n,e)=>n?setImmediate:e?((t,r)=>(_global.addEventListener("message",({source:Ee,data:Te})=>{Ee===_global&&Te===t&&r.length&&r.shift()()},!1),Ee=>{r.push(Ee),_global.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",isFunction$1(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,isIterable=n=>n!=null&&isFunction$1(n[iterator]),utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject:isPlainObject$1,isEmptyObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction:isFunction$1,isStream,isURLSearchParams,isTypedArray:isTypedArray$1,isFileList,forEach,merge:merge$1,extend:extend$2,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty:hasOwnProperty$1,hasOwnProp:hasOwnProperty$1,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap,isIterable};function AxiosError$1(n,e,t,r,Ee){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),Ee&&(this.response=Ee,this.status=Ee.status?Ee.status:null)}utils$1.inherits(AxiosError$1,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError$1.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{descriptors[n]={value:n}});Object.defineProperties(AxiosError$1,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError$1.from=(n,e,t,r,Ee,Te)=>{const Re=Object.create(prototype$1);utils$1.toFlatObject(n,Re,function($e){return $e!==Error.prototype},De=>De!=="isAxiosError");const Me=n&&n.message?n.message:"Error",Ve=e==null&&n?n.code:e;return AxiosError$1.call(Re,Me,Ve,t,r,Ee),n&&Re.cause==null&&Object.defineProperty(Re,"cause",{value:n,configurable:!0}),Re.name=n&&n.name||"Error",Te&&Object.assign(Re,Te),Re};const httpAdapter=null;function isVisitable(n){return utils$1.isPlainObject(n)||utils$1.isArray(n)}function removeBrackets(n){return utils$1.endsWith(n,"[]")?n.slice(0,-2):n}function renderKey(n,e,t){return n?n.concat(e).map(function(Ee,Te){return Ee=removeBrackets(Ee),!t&&Te?"["+Ee+"]":Ee}).join(t?".":""):e}function isFlatArray(n){return utils$1.isArray(n)&&!n.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(e){return/^is[A-Z]/.test(e)});function toFormData$1(n,e,t){if(!utils$1.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=utils$1.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(We,He){return!utils$1.isUndefined(He[We])});const r=t.metaTokens,Ee=t.visitor||$e,Te=t.dots,Re=t.indexes,Ve=(t.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(e);if(!utils$1.isFunction(Ee))throw new TypeError("visitor must be a function");function De(Ue){if(Ue===null)return"";if(utils$1.isDate(Ue))return Ue.toISOString();if(utils$1.isBoolean(Ue))return Ue.toString();if(!Ve&&utils$1.isBlob(Ue))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(Ue)||utils$1.isTypedArray(Ue)?Ve&&typeof Blob=="function"?new Blob([Ue]):Buffer.from(Ue):Ue}function $e(Ue,We,He){let Ge=Ue;if(Ue&&!He&&typeof Ue=="object"){if(utils$1.endsWith(We,"{}"))We=r?We:We.slice(0,-2),Ue=JSON.stringify(Ue);else if(utils$1.isArray(Ue)&&isFlatArray(Ue)||(utils$1.isFileList(Ue)||utils$1.endsWith(We,"[]"))&&(Ge=utils$1.toArray(Ue)))return We=removeBrackets(We),Ge.forEach(function(Je,Ze){!(utils$1.isUndefined(Je)||Je===null)&&e.append(Re===!0?renderKey([We],Ze,Te):Re===null?We:We+"[]",De(Je))}),!1}return isVisitable(Ue)?!0:(e.append(renderKey(He,We,Te),De(Ue)),!1)}const Oe=[],Ce=Object.assign(predicates,{defaultVisitor:$e,convertValue:De,isVisitable});function Be(Ue,We){if(!utils$1.isUndefined(Ue)){if(Oe.indexOf(Ue)!==-1)throw Error("Circular reference detected in "+We.join("."));Oe.push(Ue),utils$1.forEach(Ue,function(Ge,Ye){(!(utils$1.isUndefined(Ge)||Ge===null)&&Ee.call(e,Ge,utils$1.isString(Ye)?Ye.trim():Ye,We,Ce))===!0&&Be(Ge,We?We.concat(Ye):[Ye])}),Oe.pop()}}if(!utils$1.isObject(n))throw new TypeError("data must be an object");return Be(n),e}function encode$2(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function AxiosURLSearchParams(n,e){this._pairs=[],n&&toFormData$1(n,this,e)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(e,t){this._pairs.push([e,t])};prototype.toString=function(e){const t=e?function(r){return e.call(this,r,encode$2)}:encode$2;return this._pairs.map(function(Ee){return t(Ee[0])+"="+t(Ee[1])},"").join("&")};function encode$1(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function buildURL(n,e,t){if(!e)return n;const r=t&&t.encode||encode$1;utils$1.isFunction(t)&&(t={serialize:t});const Ee=t&&t.serialize;let Te;if(Ee?Te=Ee(e,t):Te=utils$1.isURLSearchParams(e)?e.toString():new AxiosURLSearchParams(e,t).toString(r),Te){const Re=n.indexOf("#");Re!==-1&&(n=n.slice(0,Re)),n+=(n.indexOf("?")===-1?"?":"&")+Te}return n}class InterceptorManager{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){utils$1.forEach(this.handlers,function(r){r!==null&&e(r)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(n,e){return toFormData$1(n,new platform.classes.URLSearchParams,{visitor:function(t,r,Ee,Te){return platform.isNode&&utils$1.isBuffer(t)?(this.append(r,t.toString("base64")),!1):Te.defaultVisitor.apply(this,arguments)},...e})}function parsePropPath(n){return utils$1.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function arrayToObject(n){const e={},t=Object.keys(n);let r;const Ee=t.length;let Te;for(r=0;r<Ee;r++)Te=t[r],e[Te]=n[Te];return e}function formDataToJSON(n){function e(t,r,Ee,Te){let Re=t[Te++];if(Re==="__proto__")return!0;const Me=Number.isFinite(+Re),Ve=Te>=t.length;return Re=!Re&&utils$1.isArray(Ee)?Ee.length:Re,Ve?(utils$1.hasOwnProp(Ee,Re)?Ee[Re]=[Ee[Re],r]:Ee[Re]=r,!Me):((!Ee[Re]||!utils$1.isObject(Ee[Re]))&&(Ee[Re]=[]),e(t,r,Ee[Re],Te)&&utils$1.isArray(Ee[Re])&&(Ee[Re]=arrayToObject(Ee[Re])),!Me)}if(utils$1.isFormData(n)&&utils$1.isFunction(n.entries)){const t={};return utils$1.forEachEntry(n,(r,Ee)=>{e(parsePropPath(r),Ee,t,0)}),t}return null}function stringifySafely(n,e,t){if(utils$1.isString(n))try{return(e||JSON.parse)(n),utils$1.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",Ee=r.indexOf("application/json")>-1,Te=utils$1.isObject(e);if(Te&&utils$1.isHTMLForm(e)&&(e=new FormData(e)),utils$1.isFormData(e))return Ee?JSON.stringify(formDataToJSON(e)):e;if(utils$1.isArrayBuffer(e)||utils$1.isBuffer(e)||utils$1.isStream(e)||utils$1.isFile(e)||utils$1.isBlob(e)||utils$1.isReadableStream(e))return e;if(utils$1.isArrayBufferView(e))return e.buffer;if(utils$1.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let Me;if(Te){if(r.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(e,this.formSerializer).toString();if((Me=utils$1.isFileList(e))||r.indexOf("multipart/form-data")>-1){const Ve=this.env&&this.env.FormData;return toFormData$1(Me?{"files[]":e}:e,Ve&&new Ve,this.formSerializer)}}return Te||Ee?(t.setContentType("application/json",!1),stringifySafely(e)):e}],transformResponse:[function(e){const t=this.transitional||defaults.transitional,r=t&&t.forcedJSONParsing,Ee=this.responseType==="json";if(utils$1.isResponse(e)||utils$1.isReadableStream(e))return e;if(e&&utils$1.isString(e)&&(r&&!this.responseType||Ee)){const Re=!(t&&t.silentJSONParsing)&&Ee;try{return JSON.parse(e,this.parseReviver)}catch(Me){if(Re)throw Me.name==="SyntaxError"?AxiosError$1.from(Me,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):Me}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],n=>{defaults.headers[n]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=n=>{const e={};let t,r,Ee;return n&&n.split(`
`).forEach(function(Re){Ee=Re.indexOf(":"),t=Re.substring(0,Ee).trim().toLowerCase(),r=Re.substring(Ee+1).trim(),!(!t||e[t]&&ignoreDuplicateOf[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},$internals=Symbol("internals");function normalizeHeader(n){return n&&String(n).trim().toLowerCase()}function normalizeValue(n){return n===!1||n==null?n:utils$1.isArray(n)?n.map(normalizeValue):String(n)}function parseTokens(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const isValidHeaderName=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function matchHeaderValue(n,e,t,r,Ee){if(utils$1.isFunction(r))return r.call(this,e,t);if(Ee&&(e=t),!!utils$1.isString(e)){if(utils$1.isString(r))return e.indexOf(r)!==-1;if(utils$1.isRegExp(r))return r.test(e)}}function formatHeader(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function buildAccessors(n,e){const t=utils$1.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(Ee,Te,Re){return this[r].call(this,e,Ee,Te,Re)},configurable:!0})})}let AxiosHeaders$1=class{constructor(e){e&&this.set(e)}set(e,t,r){const Ee=this;function Te(Me,Ve,De){const $e=normalizeHeader(Ve);if(!$e)throw new Error("header name must be a non-empty string");const Oe=utils$1.findKey(Ee,$e);(!Oe||Ee[Oe]===void 0||De===!0||De===void 0&&Ee[Oe]!==!1)&&(Ee[Oe||Ve]=normalizeValue(Me))}const Re=(Me,Ve)=>utils$1.forEach(Me,(De,$e)=>Te(De,$e,Ve));if(utils$1.isPlainObject(e)||e instanceof this.constructor)Re(e,t);else if(utils$1.isString(e)&&(e=e.trim())&&!isValidHeaderName(e))Re(parseHeaders(e),t);else if(utils$1.isObject(e)&&utils$1.isIterable(e)){let Me={},Ve,De;for(const $e of e){if(!utils$1.isArray($e))throw TypeError("Object iterator must return a key-value pair");Me[De=$e[0]]=(Ve=Me[De])?utils$1.isArray(Ve)?[...Ve,$e[1]]:[Ve,$e[1]]:$e[1]}Re(Me,t)}else e!=null&&Te(t,e,r);return this}get(e,t){if(e=normalizeHeader(e),e){const r=utils$1.findKey(this,e);if(r){const Ee=this[r];if(!t)return Ee;if(t===!0)return parseTokens(Ee);if(utils$1.isFunction(t))return t.call(this,Ee,r);if(utils$1.isRegExp(t))return t.exec(Ee);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=normalizeHeader(e),e){const r=utils$1.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||matchHeaderValue(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let Ee=!1;function Te(Re){if(Re=normalizeHeader(Re),Re){const Me=utils$1.findKey(r,Re);Me&&(!t||matchHeaderValue(r,r[Me],Me,t))&&(delete r[Me],Ee=!0)}}return utils$1.isArray(e)?e.forEach(Te):Te(e),Ee}clear(e){const t=Object.keys(this);let r=t.length,Ee=!1;for(;r--;){const Te=t[r];(!e||matchHeaderValue(this,this[Te],Te,e,!0))&&(delete this[Te],Ee=!0)}return Ee}normalize(e){const t=this,r={};return utils$1.forEach(this,(Ee,Te)=>{const Re=utils$1.findKey(r,Te);if(Re){t[Re]=normalizeValue(Ee),delete t[Te];return}const Me=e?formatHeader(Te):String(Te).trim();Me!==Te&&delete t[Te],t[Me]=normalizeValue(Ee),r[Me]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return utils$1.forEach(this,(r,Ee)=>{r!=null&&r!==!1&&(t[Ee]=e&&utils$1.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(Ee=>r.set(Ee)),r}static accessor(e){const r=(this[$internals]=this[$internals]={accessors:{}}).accessors,Ee=this.prototype;function Te(Re){const Me=normalizeHeader(Re);r[Me]||(buildAccessors(Ee,Re),r[Me]=!0)}return utils$1.isArray(e)?e.forEach(Te):Te(e),this}};AxiosHeaders$1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders$1.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});utils$1.freezeMethods(AxiosHeaders$1);function transformData(n,e){const t=this||defaults,r=e||t,Ee=AxiosHeaders$1.from(r.headers);let Te=r.data;return utils$1.forEach(n,function(Me){Te=Me.call(t,Te,Ee.normalize(),e?e.status:void 0)}),Ee.normalize(),Te}function isCancel$1(n){return!!(n&&n.__CANCEL__)}function CanceledError$1(n,e,t){AxiosError$1.call(this,n??"canceled",AxiosError$1.ERR_CANCELED,e,t),this.name="CanceledError"}utils$1.inherits(CanceledError$1,AxiosError$1,{__CANCEL__:!0});function settle(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new AxiosError$1("Request failed with status code "+t.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function parseProtocol(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function speedometer(n,e){n=n||10;const t=new Array(n),r=new Array(n);let Ee=0,Te=0,Re;return e=e!==void 0?e:1e3,function(Ve){const De=Date.now(),$e=r[Te];Re||(Re=De),t[Ee]=Ve,r[Ee]=De;let Oe=Te,Ce=0;for(;Oe!==Ee;)Ce+=t[Oe++],Oe=Oe%n;if(Ee=(Ee+1)%n,Ee===Te&&(Te=(Te+1)%n),De-Re<e)return;const Be=$e&&De-$e;return Be?Math.round(Ce*1e3/Be):void 0}}function throttle(n,e){let t=0,r=1e3/e,Ee,Te;const Re=(De,$e=Date.now())=>{t=$e,Ee=null,Te&&(clearTimeout(Te),Te=null),n(...De)};return[(...De)=>{const $e=Date.now(),Oe=$e-t;Oe>=r?Re(De,$e):(Ee=De,Te||(Te=setTimeout(()=>{Te=null,Re(Ee)},r-Oe)))},()=>Ee&&Re(Ee)]}const progressEventReducer=(n,e,t=3)=>{let r=0;const Ee=speedometer(50,250);return throttle(Te=>{const Re=Te.loaded,Me=Te.lengthComputable?Te.total:void 0,Ve=Re-r,De=Ee(Ve),$e=Re<=Me;r=Re;const Oe={loaded:Re,total:Me,progress:Me?Re/Me:void 0,bytes:Ve,rate:De||void 0,estimated:De&&Me&&$e?(Me-Re)/De:void 0,event:Te,lengthComputable:Me!=null,[e?"download":"upload"]:!0};n(Oe)},t)},progressEventDecorator=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},asyncDecorator=n=>(...e)=>utils$1.asap(()=>n(...e)),isURLSameOrigin=platform.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,platform.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(n,e,t,r,Ee,Te){const Re=[n+"="+encodeURIComponent(e)];utils$1.isNumber(t)&&Re.push("expires="+new Date(t).toGMTString()),utils$1.isString(r)&&Re.push("path="+r),utils$1.isString(Ee)&&Re.push("domain="+Ee),Te===!0&&Re.push("secure"),document.cookie=Re.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function combineURLs(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function buildFullPath(n,e,t){let r=!isAbsoluteURL(e);return n&&(r||t==!1)?combineURLs(n,e):e}const headersToObject=n=>n instanceof AxiosHeaders$1?{...n}:n;function mergeConfig$1(n,e){e=e||{};const t={};function r(De,$e,Oe,Ce){return utils$1.isPlainObject(De)&&utils$1.isPlainObject($e)?utils$1.merge.call({caseless:Ce},De,$e):utils$1.isPlainObject($e)?utils$1.merge({},$e):utils$1.isArray($e)?$e.slice():$e}function Ee(De,$e,Oe,Ce){if(utils$1.isUndefined($e)){if(!utils$1.isUndefined(De))return r(void 0,De,Oe,Ce)}else return r(De,$e,Oe,Ce)}function Te(De,$e){if(!utils$1.isUndefined($e))return r(void 0,$e)}function Re(De,$e){if(utils$1.isUndefined($e)){if(!utils$1.isUndefined(De))return r(void 0,De)}else return r(void 0,$e)}function Me(De,$e,Oe){if(Oe in e)return r(De,$e);if(Oe in n)return r(void 0,De)}const Ve={url:Te,method:Te,data:Te,baseURL:Re,transformRequest:Re,transformResponse:Re,paramsSerializer:Re,timeout:Re,timeoutMessage:Re,withCredentials:Re,withXSRFToken:Re,adapter:Re,responseType:Re,xsrfCookieName:Re,xsrfHeaderName:Re,onUploadProgress:Re,onDownloadProgress:Re,decompress:Re,maxContentLength:Re,maxBodyLength:Re,beforeRedirect:Re,transport:Re,httpAgent:Re,httpsAgent:Re,cancelToken:Re,socketPath:Re,responseEncoding:Re,validateStatus:Me,headers:(De,$e,Oe)=>Ee(headersToObject(De),headersToObject($e),Oe,!0)};return utils$1.forEach(Object.keys({...n,...e}),function($e){const Oe=Ve[$e]||Ee,Ce=Oe(n[$e],e[$e],$e);utils$1.isUndefined(Ce)&&Oe!==Me||(t[$e]=Ce)}),t}const resolveConfig=n=>{const e=mergeConfig$1({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:Ee,xsrfCookieName:Te,headers:Re,auth:Me}=e;if(e.headers=Re=AxiosHeaders$1.from(Re),e.url=buildURL(buildFullPath(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),Me&&Re.set("Authorization","Basic "+btoa((Me.username||"")+":"+(Me.password?unescape(encodeURIComponent(Me.password)):""))),utils$1.isFormData(t)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)Re.setContentType(void 0);else if(utils$1.isFunction(t.getHeaders)){const Ve=t.getHeaders(),De=["content-type","content-length"];Object.entries(Ve).forEach(([$e,Oe])=>{De.includes($e.toLowerCase())&&Re.set($e,Oe)})}}if(platform.hasStandardBrowserEnv&&(r&&utils$1.isFunction(r)&&(r=r(e)),r||r!==!1&&isURLSameOrigin(e.url))){const Ve=Ee&&Te&&cookies.read(Te);Ve&&Re.set(Ee,Ve)}return e},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(n){return new Promise(function(t,r){const Ee=resolveConfig(n);let Te=Ee.data;const Re=AxiosHeaders$1.from(Ee.headers).normalize();let{responseType:Me,onUploadProgress:Ve,onDownloadProgress:De}=Ee,$e,Oe,Ce,Be,Ue;function We(){Be&&Be(),Ue&&Ue(),Ee.cancelToken&&Ee.cancelToken.unsubscribe($e),Ee.signal&&Ee.signal.removeEventListener("abort",$e)}let He=new XMLHttpRequest;He.open(Ee.method.toUpperCase(),Ee.url,!0),He.timeout=Ee.timeout;function Ge(){if(!He)return;const Je=AxiosHeaders$1.from("getAllResponseHeaders"in He&&He.getAllResponseHeaders()),fn={data:!Me||Me==="text"||Me==="json"?He.responseText:He.response,status:He.status,statusText:He.statusText,headers:Je,config:n,request:He};settle(function(mn){t(mn),We()},function(mn){r(mn),We()},fn),He=null}"onloadend"in He?He.onloadend=Ge:He.onreadystatechange=function(){!He||He.readyState!==4||He.status===0&&!(He.responseURL&&He.responseURL.indexOf("file:")===0)||setTimeout(Ge)},He.onabort=function(){He&&(r(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,n,He)),He=null)},He.onerror=function(Ze){const fn=Ze&&Ze.message?Ze.message:"Network Error",yn=new AxiosError$1(fn,AxiosError$1.ERR_NETWORK,n,He);yn.event=Ze||null,r(yn),He=null},He.ontimeout=function(){let Ze=Ee.timeout?"timeout of "+Ee.timeout+"ms exceeded":"timeout exceeded";const fn=Ee.transitional||transitionalDefaults;Ee.timeoutErrorMessage&&(Ze=Ee.timeoutErrorMessage),r(new AxiosError$1(Ze,fn.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,n,He)),He=null},Te===void 0&&Re.setContentType(null),"setRequestHeader"in He&&utils$1.forEach(Re.toJSON(),function(Ze,fn){He.setRequestHeader(fn,Ze)}),utils$1.isUndefined(Ee.withCredentials)||(He.withCredentials=!!Ee.withCredentials),Me&&Me!=="json"&&(He.responseType=Ee.responseType),De&&([Ce,Ue]=progressEventReducer(De,!0),He.addEventListener("progress",Ce)),Ve&&He.upload&&([Oe,Be]=progressEventReducer(Ve),He.upload.addEventListener("progress",Oe),He.upload.addEventListener("loadend",Be)),(Ee.cancelToken||Ee.signal)&&($e=Je=>{He&&(r(!Je||Je.type?new CanceledError$1(null,n,He):Je),He.abort(),He=null)},Ee.cancelToken&&Ee.cancelToken.subscribe($e),Ee.signal&&(Ee.signal.aborted?$e():Ee.signal.addEventListener("abort",$e)));const Ye=parseProtocol(Ee.url);if(Ye&&platform.protocols.indexOf(Ye)===-1){r(new AxiosError$1("Unsupported protocol "+Ye+":",AxiosError$1.ERR_BAD_REQUEST,n));return}He.send(Te||null)})},composeSignals=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,Ee;const Te=function(De){if(!Ee){Ee=!0,Me();const $e=De instanceof Error?De:this.reason;r.abort($e instanceof AxiosError$1?$e:new CanceledError$1($e instanceof Error?$e.message:$e))}};let Re=e&&setTimeout(()=>{Re=null,Te(new AxiosError$1(`timeout ${e} of ms exceeded`,AxiosError$1.ETIMEDOUT))},e);const Me=()=>{n&&(Re&&clearTimeout(Re),Re=null,n.forEach(De=>{De.unsubscribe?De.unsubscribe(Te):De.removeEventListener("abort",Te)}),n=null)};n.forEach(De=>De.addEventListener("abort",Te));const{signal:Ve}=r;return Ve.unsubscribe=()=>utils$1.asap(Me),Ve}},streamChunk=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,Ee;for(;r<t;)Ee=r+e,yield n.slice(r,Ee),r=Ee},readBytes=async function*(n,e){for await(const t of readStream(n))yield*streamChunk(t,e)},readStream=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},trackStream=(n,e,t,r)=>{const Ee=readBytes(n,e);let Te=0,Re,Me=Ve=>{Re||(Re=!0,r&&r(Ve))};return new ReadableStream({async pull(Ve){try{const{done:De,value:$e}=await Ee.next();if(De){Me(),Ve.close();return}let Oe=$e.byteLength;if(t){let Ce=Te+=Oe;t(Ce)}Ve.enqueue(new Uint8Array($e))}catch(De){throw Me(De),De}},cancel(Ve){return Me(Ve),Ee.return()}},{highWaterMark:2})},DEFAULT_CHUNK_SIZE=64*1024,{isFunction}=utils$1,globalFetchAPI=(({Request:n,Response:e})=>({Request:n,Response:e}))(utils$1.global),{ReadableStream:ReadableStream$1,TextEncoder:TextEncoder$1}=utils$1.global,test=(n,...e)=>{try{return!!n(...e)}catch{return!1}},factory=n=>{n=utils$1.merge.call({skipUndefined:!0},globalFetchAPI,n);const{fetch:e,Request:t,Response:r}=n,Ee=e?isFunction(e):typeof fetch=="function",Te=isFunction(t),Re=isFunction(r);if(!Ee)return!1;const Me=Ee&&isFunction(ReadableStream$1),Ve=Ee&&(typeof TextEncoder$1=="function"?(Ue=>We=>Ue.encode(We))(new TextEncoder$1):async Ue=>new Uint8Array(await new t(Ue).arrayBuffer())),De=Te&&Me&&test(()=>{let Ue=!1;const We=new t(platform.origin,{body:new ReadableStream$1,method:"POST",get duplex(){return Ue=!0,"half"}}).headers.has("Content-Type");return Ue&&!We}),$e=Re&&Me&&test(()=>utils$1.isReadableStream(new r("").body)),Oe={stream:$e&&(Ue=>Ue.body)};Ee&&["text","arrayBuffer","blob","formData","stream"].forEach(Ue=>{!Oe[Ue]&&(Oe[Ue]=(We,He)=>{let Ge=We&&We[Ue];if(Ge)return Ge.call(We);throw new AxiosError$1(`Response type '${Ue}' is not supported`,AxiosError$1.ERR_NOT_SUPPORT,He)})});const Ce=async Ue=>{if(Ue==null)return 0;if(utils$1.isBlob(Ue))return Ue.size;if(utils$1.isSpecCompliantForm(Ue))return(await new t(platform.origin,{method:"POST",body:Ue}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(Ue)||utils$1.isArrayBuffer(Ue))return Ue.byteLength;if(utils$1.isURLSearchParams(Ue)&&(Ue=Ue+""),utils$1.isString(Ue))return(await Ve(Ue)).byteLength},Be=async(Ue,We)=>{const He=utils$1.toFiniteNumber(Ue.getContentLength());return He??Ce(We)};return async Ue=>{let{url:We,method:He,data:Ge,signal:Ye,cancelToken:Je,timeout:Ze,onDownloadProgress:fn,onUploadProgress:yn,responseType:mn,headers:pn,withCredentials:un="same-origin",fetchOptions:bn}=resolveConfig(Ue),gn=e||fetch;mn=mn?(mn+"").toLowerCase():"text";let xn=composeSignals([Ye,Je&&Je.toAbortSignal()],Ze),En=null;const Pn=xn&&xn.unsubscribe&&(()=>{xn.unsubscribe()});let Ln;try{if(yn&&De&&He!=="get"&&He!=="head"&&(Ln=await Be(pn,Ge))!==0){let $n=new t(We,{method:"POST",body:Ge,duplex:"half"}),kn;if(utils$1.isFormData(Ge)&&(kn=$n.headers.get("content-type"))&&pn.setContentType(kn),$n.body){const[In,Kn]=progressEventDecorator(Ln,progressEventReducer(asyncDecorator(yn)));Ge=trackStream($n.body,DEFAULT_CHUNK_SIZE,In,Kn)}}utils$1.isString(un)||(un=un?"include":"omit");const Cn=Te&&"credentials"in t.prototype,Dn={...bn,signal:xn,method:He.toUpperCase(),headers:pn.normalize().toJSON(),body:Ge,duplex:"half",credentials:Cn?un:void 0};En=Te&&new t(We,Dn);let Un=await(Te?gn(En,bn):gn(We,Dn));const Wn=$e&&(mn==="stream"||mn==="response");if($e&&(fn||Wn&&Pn)){const $n={};["status","statusText","headers"].forEach(Qn=>{$n[Qn]=Un[Qn]});const kn=utils$1.toFiniteNumber(Un.headers.get("content-length")),[In,Kn]=fn&&progressEventDecorator(kn,progressEventReducer(asyncDecorator(fn),!0))||[];Un=new r(trackStream(Un.body,DEFAULT_CHUNK_SIZE,In,()=>{Kn&&Kn(),Pn&&Pn()}),$n)}mn=mn||"text";let On=await Oe[utils$1.findKey(Oe,mn)||"text"](Un,Ue);return!Wn&&Pn&&Pn(),await new Promise(($n,kn)=>{settle($n,kn,{data:On,headers:AxiosHeaders$1.from(Un.headers),status:Un.status,statusText:Un.statusText,config:Ue,request:En})})}catch(Cn){throw Pn&&Pn(),Cn&&Cn.name==="TypeError"&&/Load failed|fetch/i.test(Cn.message)?Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,Ue,En),{cause:Cn.cause||Cn}):AxiosError$1.from(Cn,Cn&&Cn.code,Ue,En)}}},seedCache=new Map,getFetch=n=>{let e=n?n.env:{};const{fetch:t,Request:r,Response:Ee}=e,Te=[r,Ee,t];let Re=Te.length,Me=Re,Ve,De,$e=seedCache;for(;Me--;)Ve=Te[Me],De=$e.get(Ve),De===void 0&&$e.set(Ve,De=Me?new Map:factory(e)),$e=De;return De};getFetch();const knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:{get:getFetch}};utils$1.forEach(knownAdapters,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const renderReason=n=>`- ${n}`,isResolvedHandle=n=>utils$1.isFunction(n)||n===null||n===!1,adapters={getAdapter:(n,e)=>{n=utils$1.isArray(n)?n:[n];const{length:t}=n;let r,Ee;const Te={};for(let Re=0;Re<t;Re++){r=n[Re];let Me;if(Ee=r,!isResolvedHandle(r)&&(Ee=knownAdapters[(Me=String(r)).toLowerCase()],Ee===void 0))throw new AxiosError$1(`Unknown adapter '${Me}'`);if(Ee&&(utils$1.isFunction(Ee)||(Ee=Ee.get(e))))break;Te[Me||"#"+Re]=Ee}if(!Ee){const Re=Object.entries(Te).map(([Ve,De])=>`adapter ${Ve} `+(De===!1?"is not supported by the environment":"is not available in the build"));let Me=t?Re.length>1?`since :
`+Re.map(renderReason).join(`
`):" "+renderReason(Re[0]):"as no adapter specified";throw new AxiosError$1("There is no suitable adapter to dispatch the request "+Me,"ERR_NOT_SUPPORT")}return Ee},adapters:knownAdapters};function throwIfCancellationRequested(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new CanceledError$1(null,n)}function dispatchRequest(n){return throwIfCancellationRequested(n),n.headers=AxiosHeaders$1.from(n.headers),n.data=transformData.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(n.adapter||defaults.adapter,n)(n).then(function(r){return throwIfCancellationRequested(n),r.data=transformData.call(n,n.transformResponse,r),r.headers=AxiosHeaders$1.from(r.headers),r},function(r){return isCancel$1(r)||(throwIfCancellationRequested(n),r&&r.response&&(r.response.data=transformData.call(n,n.transformResponse,r.response),r.response.headers=AxiosHeaders$1.from(r.response.headers))),Promise.reject(r)})}const VERSION$2="1.12.2",validators$1={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{validators$1[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const deprecatedWarnings={};validators$1.transitional=function(e,t,r){function Ee(Te,Re){return"[Axios v"+VERSION$2+"] Transitional option '"+Te+"'"+Re+(r?". "+r:"")}return(Te,Re,Me)=>{if(e===!1)throw new AxiosError$1(Ee(Re," has been removed"+(t?" in "+t:"")),AxiosError$1.ERR_DEPRECATED);return t&&!deprecatedWarnings[Re]&&(deprecatedWarnings[Re]=!0,console.warn(Ee(Re," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(Te,Re,Me):!0}};validators$1.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function assertOptions(n,e,t){if(typeof n!="object")throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let Ee=r.length;for(;Ee-- >0;){const Te=r[Ee],Re=e[Te];if(Re){const Me=n[Te],Ve=Me===void 0||Re(Me,Te,n);if(Ve!==!0)throw new AxiosError$1("option "+Te+" must be "+Ve,AxiosError$1.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new AxiosError$1("Unknown option "+Te,AxiosError$1.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;let Axios$1=class{constructor(e){this.defaults=e||{},this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let Ee={};Error.captureStackTrace?Error.captureStackTrace(Ee):Ee=new Error;const Te=Ee.stack?Ee.stack.replace(/^.+\n/,""):"";try{r.stack?Te&&!String(r.stack).endsWith(Te.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+Te):r.stack=Te}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=mergeConfig$1(this.defaults,t);const{transitional:r,paramsSerializer:Ee,headers:Te}=t;r!==void 0&&validator.assertOptions(r,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),Ee!=null&&(utils$1.isFunction(Ee)?t.paramsSerializer={serialize:Ee}:validator.assertOptions(Ee,{encode:validators.function,serialize:validators.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),validator.assertOptions(t,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let Re=Te&&utils$1.merge(Te.common,Te[t.method]);Te&&utils$1.forEach(["delete","get","head","post","put","patch","common"],Ue=>{delete Te[Ue]}),t.headers=AxiosHeaders$1.concat(Re,Te);const Me=[];let Ve=!0;this.interceptors.request.forEach(function(We){typeof We.runWhen=="function"&&We.runWhen(t)===!1||(Ve=Ve&&We.synchronous,Me.unshift(We.fulfilled,We.rejected))});const De=[];this.interceptors.response.forEach(function(We){De.push(We.fulfilled,We.rejected)});let $e,Oe=0,Ce;if(!Ve){const Ue=[dispatchRequest.bind(this),void 0];for(Ue.unshift(...Me),Ue.push(...De),Ce=Ue.length,$e=Promise.resolve(t);Oe<Ce;)$e=$e.then(Ue[Oe++],Ue[Oe++]);return $e}Ce=Me.length;let Be=t;for(;Oe<Ce;){const Ue=Me[Oe++],We=Me[Oe++];try{Be=Ue(Be)}catch(He){We.call(this,He);break}}try{$e=dispatchRequest.call(this,Be)}catch(Ue){return Promise.reject(Ue)}for(Oe=0,Ce=De.length;Oe<Ce;)$e=$e.then(De[Oe++],De[Oe++]);return $e}getUri(e){e=mergeConfig$1(this.defaults,e);const t=buildFullPath(e.baseURL,e.url,e.allowAbsoluteUrls);return buildURL(t,e.params,e.paramsSerializer)}};utils$1.forEach(["delete","get","head","options"],function(e){Axios$1.prototype[e]=function(t,r){return this.request(mergeConfig$1(r||{},{method:e,url:t,data:(r||{}).data}))}});utils$1.forEach(["post","put","patch"],function(e){function t(r){return function(Te,Re,Me){return this.request(mergeConfig$1(Me||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:Te,data:Re}))}}Axios$1.prototype[e]=t(),Axios$1.prototype[e+"Form"]=t(!0)});let CancelToken$1=class Ef{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(Te){t=Te});const r=this;this.promise.then(Ee=>{if(!r._listeners)return;let Te=r._listeners.length;for(;Te-- >0;)r._listeners[Te](Ee);r._listeners=null}),this.promise.then=Ee=>{let Te;const Re=new Promise(Me=>{r.subscribe(Me),Te=Me}).then(Ee);return Re.cancel=function(){r.unsubscribe(Te)},Re},e(function(Te,Re,Me){r.reason||(r.reason=new CanceledError$1(Te,Re,Me),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Ef(function(Ee){e=Ee}),cancel:e}}};function spread$1(n){return function(t){return n.apply(null,t)}}function isAxiosError$1(n){return utils$1.isObject(n)&&n.isAxiosError===!0}const HttpStatusCode$1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode$1).forEach(([n,e])=>{HttpStatusCode$1[e]=n});function createInstance(n){const e=new Axios$1(n),t=bind(Axios$1.prototype.request,e);return utils$1.extend(t,Axios$1.prototype,e,{allOwnKeys:!0}),utils$1.extend(t,e,null,{allOwnKeys:!0}),t.create=function(Ee){return createInstance(mergeConfig$1(n,Ee))},t}const axios=createInstance(defaults);axios.Axios=Axios$1;axios.CanceledError=CanceledError$1;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel$1;axios.VERSION=VERSION$2;axios.toFormData=toFormData$1;axios.AxiosError=AxiosError$1;axios.Cancel=axios.CanceledError;axios.all=function(e){return Promise.all(e)};axios.spread=spread$1;axios.isAxiosError=isAxiosError$1;axios.mergeConfig=mergeConfig$1;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=n=>formDataToJSON(utils$1.isHTMLForm(n)?new FormData(n):n);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const{Axios,AxiosError,CanceledError,isCancel,CancelToken,VERSION:VERSION$1,all:all$1,Cancel,isAxiosError,spread,toFormData,AxiosHeaders,HttpStatusCode,formToJSON,getAdapter,mergeConfig}=axios;function _typeof(n){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(n)}var u8=Uint8Array,u16=Uint16Array,i32=Int32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(n,e){for(var t=new u16(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var Ee=new i32(t[30]),r=1;r<30;++r)for(var Te=t[r];Te<t[r+1];++Te)Ee[Te]=Te-t[r]<<5|r;return{b:t,r:Ee}},_a$1=freb(fleb,2),fl=_a$1.b,revfl=_a$1.r;fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),revfd=_b.r,rev=new u16(32768);for(var i$1=0;i$1<32768;++i$1){var x$1=(i$1&43690)>>1|(i$1&21845)<<1;x$1=(x$1&52428)>>2|(x$1&13107)<<2,x$1=(x$1&61680)>>4|(x$1&3855)<<4,rev[i$1]=((x$1&65280)>>8|(x$1&255)<<8)>>1}var hMap=function(n,e,t){for(var r=n.length,Ee=0,Te=new u16(e);Ee<r;++Ee)n[Ee]&&++Te[n[Ee]-1];var Re=new u16(e);for(Ee=1;Ee<e;++Ee)Re[Ee]=Re[Ee-1]+Te[Ee-1]<<1;var Me;if(t){Me=new u16(1<<e);var Ve=15-e;for(Ee=0;Ee<r;++Ee)if(n[Ee])for(var De=Ee<<4|n[Ee],$e=e-n[Ee],Oe=Re[n[Ee]-1]++<<$e,Ce=Oe|(1<<$e)-1;Oe<=Ce;++Oe)Me[rev[Oe]>>Ve]=De}else for(Me=new u16(r),Ee=0;Ee<r;++Ee)n[Ee]&&(Me[Ee]=rev[Re[n[Ee]-1]++]>>15-n[Ee]);return Me},flt=new u8(288);for(var i$1=0;i$1<144;++i$1)flt[i$1]=8;for(var i$1=144;i$1<256;++i$1)flt[i$1]=9;for(var i$1=256;i$1<280;++i$1)flt[i$1]=7;for(var i$1=280;i$1<288;++i$1)flt[i$1]=8;var fdt=new u8(32);for(var i$1=0;i$1<32;++i$1)fdt[i$1]=5;var flm=hMap(flt,9,0),fdm=hMap(fdt,5,0),shft=function(n){return(n+7)/8|0},slc=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new u8(n.subarray(e,t))},wbits=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},wbits16=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},hTree=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var Ee=t.length,Te=t.slice();if(!Ee)return{t:et$1,l:0};if(Ee==1){var Re=new u8(t[0].s+1);return Re[t[0].s]=1,{t:Re,l:1}}t.sort(function(fn,yn){return fn.f-yn.f}),t.push({s:-1,f:25001});var Me=t[0],Ve=t[1],De=0,$e=1,Oe=2;for(t[0]={s:-1,f:Me.f+Ve.f,l:Me,r:Ve};$e!=Ee-1;)Me=t[t[De].f<t[Oe].f?De++:Oe++],Ve=t[De!=$e&&t[De].f<t[Oe].f?De++:Oe++],t[$e++]={s:-1,f:Me.f+Ve.f,l:Me,r:Ve};for(var Ce=Te[0].s,r=1;r<Ee;++r)Te[r].s>Ce&&(Ce=Te[r].s);var Be=new u16(Ce+1),Ue=ln(t[$e-1],Be,0);if(Ue>e){var r=0,We=0,He=Ue-e,Ge=1<<He;for(Te.sort(function(yn,mn){return Be[mn.s]-Be[yn.s]||yn.f-mn.f});r<Ee;++r){var Ye=Te[r].s;if(Be[Ye]>e)We+=Ge-(1<<Ue-Be[Ye]),Be[Ye]=e;else break}for(We>>=He;We>0;){var Je=Te[r].s;Be[Je]<e?We-=1<<e-Be[Je]++-1:++r}for(;r>=0&&We;--r){var Ze=Te[r].s;Be[Ze]==e&&(--Be[Ze],++We)}Ue=e}return{t:new u8(Be),l:Ue}},ln=function(n,e,t){return n.s==-1?Math.max(ln(n.l,e,t+1),ln(n.r,e,t+1)):e[n.s]=t},lc=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new u16(++e),r=0,Ee=n[0],Te=1,Re=function(Ve){t[r++]=Ve},Me=1;Me<=e;++Me)if(n[Me]==Ee&&Me!=e)++Te;else{if(!Ee&&Te>2){for(;Te>138;Te-=138)Re(32754);Te>2&&(Re(Te>10?Te-11<<5|28690:Te-3<<5|12305),Te=0)}else if(Te>3){for(Re(Ee),--Te;Te>6;Te-=6)Re(8304);Te>2&&(Re(Te-3<<5|8208),Te=0)}for(;Te--;)Re(Ee);Te=1,Ee=n[Me]}return{c:t.subarray(0,r),n:e}},clen=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},wfblk=function(n,e,t){var r=t.length,Ee=shft(e+2);n[Ee]=r&255,n[Ee+1]=r>>8,n[Ee+2]=n[Ee]^255,n[Ee+3]=n[Ee+1]^255;for(var Te=0;Te<r;++Te)n[Ee+Te+4]=t[Te];return(Ee+4+r)*8},wblk=function(n,e,t,r,Ee,Te,Re,Me,Ve,De,$e){wbits(e,$e++,t),++Ee[256];for(var Oe=hTree(Ee,15),Ce=Oe.t,Be=Oe.l,Ue=hTree(Te,15),We=Ue.t,He=Ue.l,Ge=lc(Ce),Ye=Ge.c,Je=Ge.n,Ze=lc(We),fn=Ze.c,yn=Ze.n,mn=new u16(19),pn=0;pn<Ye.length;++pn)++mn[Ye[pn]&31];for(var pn=0;pn<fn.length;++pn)++mn[fn[pn]&31];for(var un=hTree(mn,7),bn=un.t,gn=un.l,xn=19;xn>4&&!bn[clim[xn-1]];--xn);var En=De+5<<3,Pn=clen(Ee,flt)+clen(Te,fdt)+Re,Ln=clen(Ee,Ce)+clen(Te,We)+Re+14+3*xn+clen(mn,bn)+2*mn[16]+3*mn[17]+7*mn[18];if(Ve>=0&&En<=Pn&&En<=Ln)return wfblk(e,$e,n.subarray(Ve,Ve+De));var Cn,Dn,Un,Wn;if(wbits(e,$e,1+(Ln<Pn)),$e+=2,Ln<Pn){Cn=hMap(Ce,Be,0),Dn=Ce,Un=hMap(We,He,0),Wn=We;var On=hMap(bn,gn,0);wbits(e,$e,Je-257),wbits(e,$e+5,yn-1),wbits(e,$e+10,xn-4),$e+=14;for(var pn=0;pn<xn;++pn)wbits(e,$e+3*pn,bn[clim[pn]]);$e+=3*xn;for(var $n=[Ye,fn],kn=0;kn<2;++kn)for(var In=$n[kn],pn=0;pn<In.length;++pn){var Kn=In[pn]&31;wbits(e,$e,On[Kn]),$e+=bn[Kn],Kn>15&&(wbits(e,$e,In[pn]>>5&127),$e+=In[pn]>>12)}}else Cn=flm,Dn=flt,Un=fdm,Wn=fdt;for(var pn=0;pn<Me;++pn){var Qn=r[pn];if(Qn>255){var Kn=Qn>>18&31;wbits16(e,$e,Cn[Kn+257]),$e+=Dn[Kn+257],Kn>7&&(wbits(e,$e,Qn>>23&31),$e+=fleb[Kn]);var rr=Qn&31;wbits16(e,$e,Un[rr]),$e+=Wn[rr],rr>3&&(wbits16(e,$e,Qn>>5&8191),$e+=fdeb[rr])}else wbits16(e,$e,Cn[Qn]),$e+=Dn[Qn]}return wbits16(e,$e,Cn[256]),$e+Dn[256]},deo=new i32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et$1=new u8(0),dflt=function(n,e,t,r,Ee,Te){var Re=Te.z||n.length,Me=new u8(r+Re+5*(1+Math.ceil(Re/7e3))+Ee),Ve=Me.subarray(r,Me.length-Ee),De=Te.l,$e=(Te.r||0)&7;if(e){$e&&(Ve[0]=Te.r>>3);for(var Oe=deo[e-1],Ce=Oe>>13,Be=Oe&8191,Ue=(1<<t)-1,We=Te.p||new u16(32768),He=Te.h||new u16(Ue+1),Ge=Math.ceil(t/3),Ye=2*Ge,Je=function(xr){return(n[xr]^n[xr+1]<<Ge^n[xr+2]<<Ye)&Ue},Ze=new i32(25e3),fn=new u16(288),yn=new u16(32),mn=0,pn=0,un=Te.i||0,bn=0,gn=Te.w||0,xn=0;un+2<Re;++un){var En=Je(un),Pn=un&32767,Ln=He[En];if(We[Pn]=Ln,He[En]=Pn,gn<=un){var Cn=Re-un;if((mn>7e3||bn>24576)&&(Cn>423||!De)){$e=wblk(n,Ve,0,Ze,fn,yn,pn,bn,xn,un-xn,$e),bn=mn=pn=0,xn=un;for(var Dn=0;Dn<286;++Dn)fn[Dn]=0;for(var Dn=0;Dn<30;++Dn)yn[Dn]=0}var Un=2,Wn=0,On=Be,$n=Pn-Ln&32767;if(Cn>2&&En==Je(un-$n))for(var kn=Math.min(Ce,Cn)-1,In=Math.min(32767,un),Kn=Math.min(258,Cn);$n<=In&&--On&&Pn!=Ln;){if(n[un+Un]==n[un+Un-$n]){for(var Qn=0;Qn<Kn&&n[un+Qn]==n[un+Qn-$n];++Qn);if(Qn>Un){if(Un=Qn,Wn=$n,Qn>kn)break;for(var rr=Math.min($n,Qn-2),or=0,Dn=0;Dn<rr;++Dn){var pr=un-$n+Dn&32767,mr=We[pr],Er=pr-mr&32767;Er>or&&(or=Er,Ln=pr)}}}Pn=Ln,Ln=We[Pn],$n+=Pn-Ln&32767}if(Wn){Ze[bn++]=268435456|revfl[Un]<<18|revfd[Wn];var jr=revfl[Un]&31,Kr=revfd[Wn]&31;pn+=fleb[jr]+fdeb[Kr],++fn[257+jr],++yn[Kr],gn=un+Un,++mn}else Ze[bn++]=n[un],++fn[n[un]]}}for(un=Math.max(un,gn);un<Re;++un)Ze[bn++]=n[un],++fn[n[un]];$e=wblk(n,Ve,De,Ze,fn,yn,pn,bn,xn,un-xn,$e),De||(Te.r=$e&7|Ve[$e/8|0]<<3,$e-=7,Te.h=He,Te.p=We,Te.i=un,Te.w=gn)}else{for(var un=Te.w||0;un<Re+De;un+=65535){var Hr=un+65535;Hr>=Re&&(Ve[$e/8|0]=De,Hr=Re),$e=wfblk(Ve,$e+1,n.subarray(un,Hr))}Te.i=Re}return slc(Me,0,r+shft($e)+Ee)},adler=function(){var n=1,e=0;return{p:function(t){for(var r=n,Ee=e,Te=t.length|0,Re=0;Re!=Te;){for(var Me=Math.min(Re+2655,Te);Re<Me;++Re)Ee+=r+=t[Re];r=(r&65535)+15*(r>>16),Ee=(Ee&65535)+15*(Ee>>16)}n=r,e=Ee},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},dopt=function(n,e,t,r,Ee){if(!Ee&&(Ee={l:1},e.dictionary)){var Te=e.dictionary.subarray(-32768),Re=new u8(Te.length+n.length);Re.set(Te),Re.set(n,Te.length),n=Re,Ee.w=Te.length}return dflt(n,e.level==null?6:e.level,e.mem==null?Ee.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,Ee)},wbytes=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},zlh=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var Ee=adler();Ee.p(e.dictionary),wbytes(n,2,Ee.d())}};function zlibSync(n,e){e||(e={});var t=adler();t.p(n);var r=dopt(n,e,e.dictionary?6:2,4);return zlh(r,e),wbytes(r,r.length-4,t.d()),r}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et$1,{stream:!0}),tds=1}catch{}function _arrayWithHoles(n){if(Array.isArray(n))return n}function _iterableToArrayLimit(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,Ee,Te,Re,Me=[],Ve=!0,De=!1;try{if(Te=(t=t.call(n)).next,e!==0)for(;!(Ve=(r=Te.call(t)).done)&&(Me.push(r.value),Me.length!==e);Ve=!0);}catch($e){De=!0,Ee=$e}finally{try{if(!Ve&&t.return!=null&&(Re=t.return(),Object(Re)!==Re))return}finally{if(De)throw Ee}}return Me}}function _arrayLikeToArray(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function _unsupportedIterableToArray(n,e){if(n){if(typeof n=="string")return _arrayLikeToArray(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(n,e):void 0}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _slicedToArray(n,e){return _arrayWithHoles(n)||_iterableToArrayLimit(n,e)||_unsupportedIterableToArray(n,e)||_nonIterableRest()}function decode$1(n,e="utf8"){return new TextDecoder(e).decode(n)}const encoder=new TextEncoder;function encode(n){return encoder.encode(n)}const defaultByteLength=1024*8,hostBigEndian=(()=>{const n=new Uint8Array(4),e=new Uint32Array(n.buffer);return!((e[0]=1)&n[0])})(),typedArrays={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class IOBuffer{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=defaultByteLength,t={}){let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const Ee=t.offset?t.offset>>>0:0,Te=e.byteLength-Ee;let Re=Ee;(ArrayBuffer.isView(e)||e instanceof IOBuffer)&&(e.byteLength!==e.buffer.byteLength&&(Re=e.byteOffset+Ee),e=e.buffer),r?this.lastWrittenByte=Te:this.lastWrittenByte=0,this.buffer=e,this.length=Te,this.byteLength=Te,this.byteOffset=Re,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,Re,Te),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,Ee=new Uint8Array(r);Ee.set(new Uint8Array(this.buffer)),this.buffer=Ee.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,t){const r=typedArrays[t].BYTES_PER_ELEMENT*e,Ee=this.byteOffset+this.offset,Te=this.buffer.slice(Ee,Ee+r);if(this.littleEndian===hostBigEndian&&t!=="uint8"&&t!=="int8"){const Me=new Uint8Array(this.buffer.slice(Ee,Ee+r));Me.reverse();const Ve=new typedArrays[t](Me.buffer);return this.offset+=r,Ve.reverse(),Ve}const Re=new typedArrays[t](Te);return this.offset+=r,Re}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let t="";for(let r=0;r<e;r++)t+=this.readChar();return t}readUtf8(e=1){return decode$1(this.readBytes(e))}decodeText(e=1,t="utf8"){return decode$1(this.readBytes(e),t)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let t=0;t<e.length;t++)this._data.setUint8(this.offset++,e[t]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let t=0;t<e.length;t++)this.writeUint8(e.charCodeAt(t));return this}writeUtf8(e){return this.writeBytes(encode(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function zero$1(n){let e=n.length;for(;--e>=0;)n[e]=0}const MIN_MATCH$1=3,MAX_MATCH$1=258,LENGTH_CODES$1=29,LITERALS$1=256,L_CODES$1=LITERALS$1+1+LENGTH_CODES$1,D_CODES$1=30,DIST_CODE_LEN=512,static_ltree=new Array((L_CODES$1+2)*2);zero$1(static_ltree);const static_dtree=new Array(D_CODES$1*2);zero$1(static_dtree);const _dist_code=new Array(DIST_CODE_LEN);zero$1(_dist_code);const _length_code=new Array(MAX_MATCH$1-MIN_MATCH$1+1);zero$1(_length_code);const base_length=new Array(LENGTH_CODES$1);zero$1(base_length);const base_dist=new Array(D_CODES$1);zero$1(base_dist);const adler32=(n,e,t,r)=>{let Ee=n&65535|0,Te=n>>>16&65535|0,Re=0;for(;t!==0;){Re=t>2e3?2e3:t,t-=Re;do Ee=Ee+e[r++]|0,Te=Te+Ee|0;while(--Re);Ee%=65521,Te%=65521}return Ee|Te<<16|0};var adler32_1=adler32;const makeTable=()=>{let n,e=[];for(var t=0;t<256;t++){n=t;for(var r=0;r<8;r++)n=n&1?3988292384^n>>>1:n>>>1;e[t]=n}return e},crcTable$1=new Uint32Array(makeTable()),crc32=(n,e,t,r)=>{const Ee=crcTable$1,Te=r+t;n^=-1;for(let Re=r;Re<Te;Re++)n=n>>>8^Ee[(n^e[Re])&255];return n^-1};var crc32_1=crc32,messages={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},constants$2={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const _has=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var assign$1=function(n){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const t=e.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const r in t)_has(t,r)&&(n[r]=t[r])}}return n},flattenChunks=n=>{let e=0;for(let r=0,Ee=n.length;r<Ee;r++)e+=n[r].length;const t=new Uint8Array(e);for(let r=0,Ee=0,Te=n.length;r<Te;r++){let Re=n[r];t.set(Re,Ee),Ee+=Re.length}return t},common={assign:assign$1,flattenChunks};let STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{STR_APPLY_UIA_OK=!1}const _utf8len=new Uint8Array(256);for(let n=0;n<256;n++)_utf8len[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;_utf8len[254]=_utf8len[254]=1;var string2buf=n=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(n);let e,t,r,Ee,Te,Re=n.length,Me=0;for(Ee=0;Ee<Re;Ee++)t=n.charCodeAt(Ee),(t&64512)===55296&&Ee+1<Re&&(r=n.charCodeAt(Ee+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),Ee++)),Me+=t<128?1:t<2048?2:t<65536?3:4;for(e=new Uint8Array(Me),Te=0,Ee=0;Te<Me;Ee++)t=n.charCodeAt(Ee),(t&64512)===55296&&Ee+1<Re&&(r=n.charCodeAt(Ee+1),(r&64512)===56320&&(t=65536+(t-55296<<10)+(r-56320),Ee++)),t<128?e[Te++]=t:t<2048?(e[Te++]=192|t>>>6,e[Te++]=128|t&63):t<65536?(e[Te++]=224|t>>>12,e[Te++]=128|t>>>6&63,e[Te++]=128|t&63):(e[Te++]=240|t>>>18,e[Te++]=128|t>>>12&63,e[Te++]=128|t>>>6&63,e[Te++]=128|t&63);return e};const buf2binstring=(n,e)=>{if(e<65534&&n.subarray&&STR_APPLY_UIA_OK)return String.fromCharCode.apply(null,n.length===e?n:n.subarray(0,e));let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(n[r]);return t};var buf2string=(n,e)=>{const t=e||n.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(n.subarray(0,e));let r,Ee;const Te=new Array(t*2);for(Ee=0,r=0;r<t;){let Re=n[r++];if(Re<128){Te[Ee++]=Re;continue}let Me=_utf8len[Re];if(Me>4){Te[Ee++]=65533,r+=Me-1;continue}for(Re&=Me===2?31:Me===3?15:7;Me>1&&r<t;)Re=Re<<6|n[r++]&63,Me--;if(Me>1){Te[Ee++]=65533;continue}Re<65536?Te[Ee++]=Re:(Re-=65536,Te[Ee++]=55296|Re>>10&1023,Te[Ee++]=56320|Re&1023)}return buf2binstring(Te,Ee)},utf8border=(n,e)=>{e=e||n.length,e>n.length&&(e=n.length);let t=e-1;for(;t>=0&&(n[t]&192)===128;)t--;return t<0||t===0?e:t+_utf8len[n[t]]>e?t:e},strings={string2buf,buf2string,utf8border};function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var zstream=ZStream;const BAD$1=16209,TYPE$1=16191;var inffast=function(e,t){let r,Ee,Te,Re,Me,Ve,De,$e,Oe,Ce,Be,Ue,We,He,Ge,Ye,Je,Ze,fn,yn,mn,pn,un,bn;const gn=e.state;r=e.next_in,un=e.input,Ee=r+(e.avail_in-5),Te=e.next_out,bn=e.output,Re=Te-(t-e.avail_out),Me=Te+(e.avail_out-257),Ve=gn.dmax,De=gn.wsize,$e=gn.whave,Oe=gn.wnext,Ce=gn.window,Be=gn.hold,Ue=gn.bits,We=gn.lencode,He=gn.distcode,Ge=(1<<gn.lenbits)-1,Ye=(1<<gn.distbits)-1;e:do{Ue<15&&(Be+=un[r++]<<Ue,Ue+=8,Be+=un[r++]<<Ue,Ue+=8),Je=We[Be&Ge];t:for(;;){if(Ze=Je>>>24,Be>>>=Ze,Ue-=Ze,Ze=Je>>>16&255,Ze===0)bn[Te++]=Je&65535;else if(Ze&16){fn=Je&65535,Ze&=15,Ze&&(Ue<Ze&&(Be+=un[r++]<<Ue,Ue+=8),fn+=Be&(1<<Ze)-1,Be>>>=Ze,Ue-=Ze),Ue<15&&(Be+=un[r++]<<Ue,Ue+=8,Be+=un[r++]<<Ue,Ue+=8),Je=He[Be&Ye];n:for(;;){if(Ze=Je>>>24,Be>>>=Ze,Ue-=Ze,Ze=Je>>>16&255,Ze&16){if(yn=Je&65535,Ze&=15,Ue<Ze&&(Be+=un[r++]<<Ue,Ue+=8,Ue<Ze&&(Be+=un[r++]<<Ue,Ue+=8)),yn+=Be&(1<<Ze)-1,yn>Ve){e.msg="invalid distance too far back",gn.mode=BAD$1;break e}if(Be>>>=Ze,Ue-=Ze,Ze=Te-Re,yn>Ze){if(Ze=yn-Ze,Ze>$e&&gn.sane){e.msg="invalid distance too far back",gn.mode=BAD$1;break e}if(mn=0,pn=Ce,Oe===0){if(mn+=De-Ze,Ze<fn){fn-=Ze;do bn[Te++]=Ce[mn++];while(--Ze);mn=Te-yn,pn=bn}}else if(Oe<Ze){if(mn+=De+Oe-Ze,Ze-=Oe,Ze<fn){fn-=Ze;do bn[Te++]=Ce[mn++];while(--Ze);if(mn=0,Oe<fn){Ze=Oe,fn-=Ze;do bn[Te++]=Ce[mn++];while(--Ze);mn=Te-yn,pn=bn}}}else if(mn+=Oe-Ze,Ze<fn){fn-=Ze;do bn[Te++]=Ce[mn++];while(--Ze);mn=Te-yn,pn=bn}for(;fn>2;)bn[Te++]=pn[mn++],bn[Te++]=pn[mn++],bn[Te++]=pn[mn++],fn-=3;fn&&(bn[Te++]=pn[mn++],fn>1&&(bn[Te++]=pn[mn++]))}else{mn=Te-yn;do bn[Te++]=bn[mn++],bn[Te++]=bn[mn++],bn[Te++]=bn[mn++],fn-=3;while(fn>2);fn&&(bn[Te++]=bn[mn++],fn>1&&(bn[Te++]=bn[mn++]))}}else if((Ze&64)===0){Je=He[(Je&65535)+(Be&(1<<Ze)-1)];continue n}else{e.msg="invalid distance code",gn.mode=BAD$1;break e}break}}else if((Ze&64)===0){Je=We[(Je&65535)+(Be&(1<<Ze)-1)];continue t}else if(Ze&32){gn.mode=TYPE$1;break e}else{e.msg="invalid literal/length code",gn.mode=BAD$1;break e}break}}while(r<Ee&&Te<Me);fn=Ue>>3,r-=fn,Ue-=fn<<3,Be&=(1<<Ue)-1,e.next_in=r,e.next_out=Te,e.avail_in=r<Ee?5+(Ee-r):5-(r-Ee),e.avail_out=Te<Me?257+(Me-Te):257-(Te-Me),gn.hold=Be,gn.bits=Ue};const MAXBITS=15,ENOUGH_LENS$1=852,ENOUGH_DISTS$1=592,CODES$1=0,LENS$1=1,DISTS$1=2,lbase=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lext=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),dbase=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),dext=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),inflate_table=(n,e,t,r,Ee,Te,Re,Me)=>{const Ve=Me.bits;let De=0,$e=0,Oe=0,Ce=0,Be=0,Ue=0,We=0,He=0,Ge=0,Ye=0,Je,Ze,fn,yn,mn,pn=null,un;const bn=new Uint16Array(MAXBITS+1),gn=new Uint16Array(MAXBITS+1);let xn=null,En,Pn,Ln;for(De=0;De<=MAXBITS;De++)bn[De]=0;for($e=0;$e<r;$e++)bn[e[t+$e]]++;for(Be=Ve,Ce=MAXBITS;Ce>=1&&bn[Ce]===0;Ce--);if(Be>Ce&&(Be=Ce),Ce===0)return Ee[Te++]=1<<24|64<<16|0,Ee[Te++]=1<<24|64<<16|0,Me.bits=1,0;for(Oe=1;Oe<Ce&&bn[Oe]===0;Oe++);for(Be<Oe&&(Be=Oe),He=1,De=1;De<=MAXBITS;De++)if(He<<=1,He-=bn[De],He<0)return-1;if(He>0&&(n===CODES$1||Ce!==1))return-1;for(gn[1]=0,De=1;De<MAXBITS;De++)gn[De+1]=gn[De]+bn[De];for($e=0;$e<r;$e++)e[t+$e]!==0&&(Re[gn[e[t+$e]]++]=$e);if(n===CODES$1?(pn=xn=Re,un=20):n===LENS$1?(pn=lbase,xn=lext,un=257):(pn=dbase,xn=dext,un=0),Ye=0,$e=0,De=Oe,mn=Te,Ue=Be,We=0,fn=-1,Ge=1<<Be,yn=Ge-1,n===LENS$1&&Ge>ENOUGH_LENS$1||n===DISTS$1&&Ge>ENOUGH_DISTS$1)return 1;for(;;){En=De-We,Re[$e]+1<un?(Pn=0,Ln=Re[$e]):Re[$e]>=un?(Pn=xn[Re[$e]-un],Ln=pn[Re[$e]-un]):(Pn=96,Ln=0),Je=1<<De-We,Ze=1<<Ue,Oe=Ze;do Ze-=Je,Ee[mn+(Ye>>We)+Ze]=En<<24|Pn<<16|Ln|0;while(Ze!==0);for(Je=1<<De-1;Ye&Je;)Je>>=1;if(Je!==0?(Ye&=Je-1,Ye+=Je):Ye=0,$e++,--bn[De]===0){if(De===Ce)break;De=e[t+Re[$e]]}if(De>Be&&(Ye&yn)!==fn){for(We===0&&(We=Be),mn+=Oe,Ue=De-We,He=1<<Ue;Ue+We<Ce&&(He-=bn[Ue+We],!(He<=0));)Ue++,He<<=1;if(Ge+=1<<Ue,n===LENS$1&&Ge>ENOUGH_LENS$1||n===DISTS$1&&Ge>ENOUGH_DISTS$1)return 1;fn=Ye&yn,Ee[fn]=Be<<24|Ue<<16|mn-Te|0}}return Ye!==0&&(Ee[mn+Ye]=De-We<<24|64<<16|0),Me.bits=Be,0};var inftrees=inflate_table;const CODES=0,LENS=1,DISTS=2,{Z_FINISH:Z_FINISH$1,Z_BLOCK,Z_TREES,Z_OK:Z_OK$1,Z_STREAM_END:Z_STREAM_END$1,Z_NEED_DICT:Z_NEED_DICT$1,Z_STREAM_ERROR:Z_STREAM_ERROR$1,Z_DATA_ERROR:Z_DATA_ERROR$1,Z_MEM_ERROR:Z_MEM_ERROR$1,Z_BUF_ERROR,Z_DEFLATED}=constants$2,HEAD=16180,FLAGS=16181,TIME=16182,OS=16183,EXLEN=16184,EXTRA=16185,NAME=16186,COMMENT=16187,HCRC=16188,DICTID=16189,DICT=16190,TYPE=16191,TYPEDO=16192,STORED=16193,COPY_=16194,COPY=16195,TABLE=16196,LENLENS=16197,CODELENS=16198,LEN_=16199,LEN=16200,LENEXT=16201,DIST=16202,DISTEXT=16203,MATCH=16204,LIT=16205,CHECK=16206,LENGTH=16207,DONE=16208,BAD=16209,MEM=16210,SYNC=16211,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,zswap32=n=>(n>>>24&255)+(n>>>8&65280)+((n&65280)<<8)+((n&255)<<24);function InflateState(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const inflateStateCheck=n=>{if(!n)return 1;const e=n.state;return!e||e.strm!==n||e.mode<HEAD||e.mode>SYNC?1:0},inflateResetKeep=n=>{if(inflateStateCheck(n))return Z_STREAM_ERROR$1;const e=n.state;return n.total_in=n.total_out=e.total=0,n.msg="",e.wrap&&(n.adler=e.wrap&1),e.mode=HEAD,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(ENOUGH_LENS),e.distcode=e.distdyn=new Int32Array(ENOUGH_DISTS),e.sane=1,e.back=-1,Z_OK$1},inflateReset=n=>{if(inflateStateCheck(n))return Z_STREAM_ERROR$1;const e=n.state;return e.wsize=0,e.whave=0,e.wnext=0,inflateResetKeep(n)},inflateReset2=(n,e)=>{let t;if(inflateStateCheck(n))return Z_STREAM_ERROR$1;const r=n.state;return e<0?(t=0,e=-e):(t=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Z_STREAM_ERROR$1:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=t,r.wbits=e,inflateReset(n))},inflateInit2=(n,e)=>{if(!n)return Z_STREAM_ERROR$1;const t=new InflateState;n.state=t,t.strm=n,t.window=null,t.mode=HEAD;const r=inflateReset2(n,e);return r!==Z_OK$1&&(n.state=null),r},inflateInit=n=>inflateInit2(n,DEF_WBITS);let virgin=!0,lenfix,distfix;const fixedtables=n=>{if(virgin){lenfix=new Int32Array(512),distfix=new Int32Array(32);let e=0;for(;e<144;)n.lens[e++]=8;for(;e<256;)n.lens[e++]=9;for(;e<280;)n.lens[e++]=7;for(;e<288;)n.lens[e++]=8;for(inftrees(LENS,n.lens,0,288,lenfix,0,n.work,{bits:9}),e=0;e<32;)n.lens[e++]=5;inftrees(DISTS,n.lens,0,32,distfix,0,n.work,{bits:5}),virgin=!1}n.lencode=lenfix,n.lenbits=9,n.distcode=distfix,n.distbits=5},updatewindow=(n,e,t,r)=>{let Ee;const Te=n.state;return Te.window===null&&(Te.wsize=1<<Te.wbits,Te.wnext=0,Te.whave=0,Te.window=new Uint8Array(Te.wsize)),r>=Te.wsize?(Te.window.set(e.subarray(t-Te.wsize,t),0),Te.wnext=0,Te.whave=Te.wsize):(Ee=Te.wsize-Te.wnext,Ee>r&&(Ee=r),Te.window.set(e.subarray(t-r,t-r+Ee),Te.wnext),r-=Ee,r?(Te.window.set(e.subarray(t-r,t),0),Te.wnext=r,Te.whave=Te.wsize):(Te.wnext+=Ee,Te.wnext===Te.wsize&&(Te.wnext=0),Te.whave<Te.wsize&&(Te.whave+=Ee))),0},inflate$2=(n,e)=>{let t,r,Ee,Te,Re,Me,Ve,De,$e,Oe,Ce,Be,Ue,We,He=0,Ge,Ye,Je,Ze,fn,yn,mn,pn;const un=new Uint8Array(4);let bn,gn;const xn=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(inflateStateCheck(n)||!n.output||!n.input&&n.avail_in!==0)return Z_STREAM_ERROR$1;t=n.state,t.mode===TYPE&&(t.mode=TYPEDO),Re=n.next_out,Ee=n.output,Ve=n.avail_out,Te=n.next_in,r=n.input,Me=n.avail_in,De=t.hold,$e=t.bits,Oe=Me,Ce=Ve,pn=Z_OK$1;e:for(;;)switch(t.mode){case HEAD:if(t.wrap===0){t.mode=TYPEDO;break}for(;$e<16;){if(Me===0)break e;Me--,De+=r[Te++]<<$e,$e+=8}if(t.wrap&2&&De===35615){t.wbits===0&&(t.wbits=15),t.check=0,un[0]=De&255,un[1]=De>>>8&255,t.check=crc32_1(t.check,un,2,0),De=0,$e=0,t.mode=FLAGS;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((De&255)<<8)+(De>>8))%31){n.msg="incorrect header check",t.mode=BAD;break}if((De&15)!==Z_DEFLATED){n.msg="unknown compression method",t.mode=BAD;break}if(De>>>=4,$e-=4,mn=(De&15)+8,t.wbits===0&&(t.wbits=mn),mn>15||mn>t.wbits){n.msg="invalid window size",t.mode=BAD;break}t.dmax=1<<t.wbits,t.flags=0,n.adler=t.check=1,t.mode=De&512?DICTID:TYPE,De=0,$e=0;break;case FLAGS:for(;$e<16;){if(Me===0)break e;Me--,De+=r[Te++]<<$e,$e+=8}if(t.flags=De,(t.flags&255)!==Z_DEFLATED){n.msg="unknown compression method",t.mode=BAD;break}if(t.flags&57344){n.msg="unknown header flags set",t.mode=BAD;break}t.head&&(t.head.text=De>>8&1),t.flags&512&&t.wrap&4&&(un[0]=De&255,un[1]=De>>>8&255,t.check=crc32_1(t.check,un,2,0)),De=0,$e=0,t.mode=TIME;case TIME:for(;$e<32;){if(Me===0)break e;Me--,De+=r[Te++]<<$e,$e+=8}t.head&&(t.head.time=De),t.flags&512&&t.wrap&4&&(un[0]=De&255,un[1]=De>>>8&255,un[2]=De>>>16&255,un[3]=De>>>24&255,t.check=crc32_1(t.check,un,4,0)),De=0,$e=0,t.mode=OS;case OS:for(;$e<16;){if(Me===0)break e;Me--,De+=r[Te++]<<$e,$e+=8}t.head&&(t.head.xflags=De&255,t.head.os=De>>8),t.flags&512&&t.wrap&4&&(un[0]=De&255,un[1]=De>>>8&255,t.check=crc32_1(t.check,un,2,0)),De=0,$e=0,t.mode=EXLEN;case EXLEN:if(t.flags&1024){for(;$e<16;){if(Me===0)break e;Me--,De+=r[Te++]<<$e,$e+=8}t.length=De,t.head&&(t.head.extra_len=De),t.flags&512&&t.wrap&4&&(un[0]=De&255,un[1]=De>>>8&255,t.check=crc32_1(t.check,un,2,0)),De=0,$e=0}else t.head&&(t.head.extra=null);t.mode=EXTRA;case EXTRA:if(t.flags&1024&&(Be=t.length,Be>Me&&(Be=Me),Be&&(t.head&&(mn=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(Te,Te+Be),mn)),t.flags&512&&t.wrap&4&&(t.check=crc32_1(t.check,r,Be,Te)),Me-=Be,Te+=Be,t.length-=Be),t.length))break e;t.length=0,t.mode=NAME;case NAME:if(t.flags&2048){if(Me===0)break e;Be=0;do mn=r[Te+Be++],t.head&&mn&&t.length<65536&&(t.head.name+=String.fromCharCode(mn));while(mn&&Be<Me);if(t.flags&512&&t.wrap&4&&(t.check=crc32_1(t.check,r,Be,Te)),Me-=Be,Te+=Be,mn)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=COMMENT;case COMMENT:if(t.flags&4096){if(Me===0)break e;Be=0;do mn=r[Te+Be++],t.head&&mn&&t.length<65536&&(t.head.comment+=String.fromCharCode(mn));while(mn&&Be<Me);if(t.flags&512&&t.wrap&4&&(t.check=crc32_1(t.check,r,Be,Te)),Me-=Be,Te+=Be,mn)break e}else t.head&&(t.head.comment=null);t.mode=HCRC;case HCRC:if(t.flags&512){for(;$e<16;){if(Me===0)break e;Me--,De+=r[Te++]<<$e,$e+=8}if(t.wrap&4&&De!==(t.check&65535)){n.msg="header crc mismatch",t.mode=BAD;break}De=0,$e=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),n.adler=t.check=0,t.mode=TYPE;break;case DICTID:for(;$e<32;){if(Me===0)break e;Me--,De+=r[Te++]<<$e,$e+=8}n.adler=t.check=zswap32(De),De=0,$e=0,t.mode=DICT;case DICT:if(t.havedict===0)return n.next_out=Re,n.avail_out=Ve,n.next_in=Te,n.avail_in=Me,t.hold=De,t.bits=$e,Z_NEED_DICT$1;n.adler=t.check=1,t.mode=TYPE;case TYPE:if(e===Z_BLOCK||e===Z_TREES)break e;case TYPEDO:if(t.last){De>>>=$e&7,$e-=$e&7,t.mode=CHECK;break}for(;$e<3;){if(Me===0)break e;Me--,De+=r[Te++]<<$e,$e+=8}switch(t.last=De&1,De>>>=1,$e-=1,De&3){case 0:t.mode=STORED;break;case 1:if(fixedtables(t),t.mode=LEN_,e===Z_TREES){De>>>=2,$e-=2;break e}break;case 2:t.mode=TABLE;break;case 3:n.msg="invalid block type",t.mode=BAD}De>>>=2,$e-=2;break;case STORED:for(De>>>=$e&7,$e-=$e&7;$e<32;){if(Me===0)break e;Me--,De+=r[Te++]<<$e,$e+=8}if((De&65535)!==(De>>>16^65535)){n.msg="invalid stored block lengths",t.mode=BAD;break}if(t.length=De&65535,De=0,$e=0,t.mode=COPY_,e===Z_TREES)break e;case COPY_:t.mode=COPY;case COPY:if(Be=t.length,Be){if(Be>Me&&(Be=Me),Be>Ve&&(Be=Ve),Be===0)break e;Ee.set(r.subarray(Te,Te+Be),Re),Me-=Be,Te+=Be,Ve-=Be,Re+=Be,t.length-=Be;break}t.mode=TYPE;break;case TABLE:for(;$e<14;){if(Me===0)break e;Me--,De+=r[Te++]<<$e,$e+=8}if(t.nlen=(De&31)+257,De>>>=5,$e-=5,t.ndist=(De&31)+1,De>>>=5,$e-=5,t.ncode=(De&15)+4,De>>>=4,$e-=4,t.nlen>286||t.ndist>30){n.msg="too many length or distance symbols",t.mode=BAD;break}t.have=0,t.mode=LENLENS;case LENLENS:for(;t.have<t.ncode;){for(;$e<3;){if(Me===0)break e;Me--,De+=r[Te++]<<$e,$e+=8}t.lens[xn[t.have++]]=De&7,De>>>=3,$e-=3}for(;t.have<19;)t.lens[xn[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,bn={bits:t.lenbits},pn=inftrees(CODES,t.lens,0,19,t.lencode,0,t.work,bn),t.lenbits=bn.bits,pn){n.msg="invalid code lengths set",t.mode=BAD;break}t.have=0,t.mode=CODELENS;case CODELENS:for(;t.have<t.nlen+t.ndist;){for(;He=t.lencode[De&(1<<t.lenbits)-1],Ge=He>>>24,Ye=He>>>16&255,Je=He&65535,!(Ge<=$e);){if(Me===0)break e;Me--,De+=r[Te++]<<$e,$e+=8}if(Je<16)De>>>=Ge,$e-=Ge,t.lens[t.have++]=Je;else{if(Je===16){for(gn=Ge+2;$e<gn;){if(Me===0)break e;Me--,De+=r[Te++]<<$e,$e+=8}if(De>>>=Ge,$e-=Ge,t.have===0){n.msg="invalid bit length repeat",t.mode=BAD;break}mn=t.lens[t.have-1],Be=3+(De&3),De>>>=2,$e-=2}else if(Je===17){for(gn=Ge+3;$e<gn;){if(Me===0)break e;Me--,De+=r[Te++]<<$e,$e+=8}De>>>=Ge,$e-=Ge,mn=0,Be=3+(De&7),De>>>=3,$e-=3}else{for(gn=Ge+7;$e<gn;){if(Me===0)break e;Me--,De+=r[Te++]<<$e,$e+=8}De>>>=Ge,$e-=Ge,mn=0,Be=11+(De&127),De>>>=7,$e-=7}if(t.have+Be>t.nlen+t.ndist){n.msg="invalid bit length repeat",t.mode=BAD;break}for(;Be--;)t.lens[t.have++]=mn}}if(t.mode===BAD)break;if(t.lens[256]===0){n.msg="invalid code -- missing end-of-block",t.mode=BAD;break}if(t.lenbits=9,bn={bits:t.lenbits},pn=inftrees(LENS,t.lens,0,t.nlen,t.lencode,0,t.work,bn),t.lenbits=bn.bits,pn){n.msg="invalid literal/lengths set",t.mode=BAD;break}if(t.distbits=6,t.distcode=t.distdyn,bn={bits:t.distbits},pn=inftrees(DISTS,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,bn),t.distbits=bn.bits,pn){n.msg="invalid distances set",t.mode=BAD;break}if(t.mode=LEN_,e===Z_TREES)break e;case LEN_:t.mode=LEN;case LEN:if(Me>=6&&Ve>=258){n.next_out=Re,n.avail_out=Ve,n.next_in=Te,n.avail_in=Me,t.hold=De,t.bits=$e,inffast(n,Ce),Re=n.next_out,Ee=n.output,Ve=n.avail_out,Te=n.next_in,r=n.input,Me=n.avail_in,De=t.hold,$e=t.bits,t.mode===TYPE&&(t.back=-1);break}for(t.back=0;He=t.lencode[De&(1<<t.lenbits)-1],Ge=He>>>24,Ye=He>>>16&255,Je=He&65535,!(Ge<=$e);){if(Me===0)break e;Me--,De+=r[Te++]<<$e,$e+=8}if(Ye&&(Ye&240)===0){for(Ze=Ge,fn=Ye,yn=Je;He=t.lencode[yn+((De&(1<<Ze+fn)-1)>>Ze)],Ge=He>>>24,Ye=He>>>16&255,Je=He&65535,!(Ze+Ge<=$e);){if(Me===0)break e;Me--,De+=r[Te++]<<$e,$e+=8}De>>>=Ze,$e-=Ze,t.back+=Ze}if(De>>>=Ge,$e-=Ge,t.back+=Ge,t.length=Je,Ye===0){t.mode=LIT;break}if(Ye&32){t.back=-1,t.mode=TYPE;break}if(Ye&64){n.msg="invalid literal/length code",t.mode=BAD;break}t.extra=Ye&15,t.mode=LENEXT;case LENEXT:if(t.extra){for(gn=t.extra;$e<gn;){if(Me===0)break e;Me--,De+=r[Te++]<<$e,$e+=8}t.length+=De&(1<<t.extra)-1,De>>>=t.extra,$e-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=DIST;case DIST:for(;He=t.distcode[De&(1<<t.distbits)-1],Ge=He>>>24,Ye=He>>>16&255,Je=He&65535,!(Ge<=$e);){if(Me===0)break e;Me--,De+=r[Te++]<<$e,$e+=8}if((Ye&240)===0){for(Ze=Ge,fn=Ye,yn=Je;He=t.distcode[yn+((De&(1<<Ze+fn)-1)>>Ze)],Ge=He>>>24,Ye=He>>>16&255,Je=He&65535,!(Ze+Ge<=$e);){if(Me===0)break e;Me--,De+=r[Te++]<<$e,$e+=8}De>>>=Ze,$e-=Ze,t.back+=Ze}if(De>>>=Ge,$e-=Ge,t.back+=Ge,Ye&64){n.msg="invalid distance code",t.mode=BAD;break}t.offset=Je,t.extra=Ye&15,t.mode=DISTEXT;case DISTEXT:if(t.extra){for(gn=t.extra;$e<gn;){if(Me===0)break e;Me--,De+=r[Te++]<<$e,$e+=8}t.offset+=De&(1<<t.extra)-1,De>>>=t.extra,$e-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){n.msg="invalid distance too far back",t.mode=BAD;break}t.mode=MATCH;case MATCH:if(Ve===0)break e;if(Be=Ce-Ve,t.offset>Be){if(Be=t.offset-Be,Be>t.whave&&t.sane){n.msg="invalid distance too far back",t.mode=BAD;break}Be>t.wnext?(Be-=t.wnext,Ue=t.wsize-Be):Ue=t.wnext-Be,Be>t.length&&(Be=t.length),We=t.window}else We=Ee,Ue=Re-t.offset,Be=t.length;Be>Ve&&(Be=Ve),Ve-=Be,t.length-=Be;do Ee[Re++]=We[Ue++];while(--Be);t.length===0&&(t.mode=LEN);break;case LIT:if(Ve===0)break e;Ee[Re++]=t.length,Ve--,t.mode=LEN;break;case CHECK:if(t.wrap){for(;$e<32;){if(Me===0)break e;Me--,De|=r[Te++]<<$e,$e+=8}if(Ce-=Ve,n.total_out+=Ce,t.total+=Ce,t.wrap&4&&Ce&&(n.adler=t.check=t.flags?crc32_1(t.check,Ee,Ce,Re-Ce):adler32_1(t.check,Ee,Ce,Re-Ce)),Ce=Ve,t.wrap&4&&(t.flags?De:zswap32(De))!==t.check){n.msg="incorrect data check",t.mode=BAD;break}De=0,$e=0}t.mode=LENGTH;case LENGTH:if(t.wrap&&t.flags){for(;$e<32;){if(Me===0)break e;Me--,De+=r[Te++]<<$e,$e+=8}if(t.wrap&4&&De!==(t.total&4294967295)){n.msg="incorrect length check",t.mode=BAD;break}De=0,$e=0}t.mode=DONE;case DONE:pn=Z_STREAM_END$1;break e;case BAD:pn=Z_DATA_ERROR$1;break e;case MEM:return Z_MEM_ERROR$1;case SYNC:default:return Z_STREAM_ERROR$1}return n.next_out=Re,n.avail_out=Ve,n.next_in=Te,n.avail_in=Me,t.hold=De,t.bits=$e,(t.wsize||Ce!==n.avail_out&&t.mode<BAD&&(t.mode<CHECK||e!==Z_FINISH$1))&&updatewindow(n,n.output,n.next_out,Ce-n.avail_out),Oe-=n.avail_in,Ce-=n.avail_out,n.total_in+=Oe,n.total_out+=Ce,t.total+=Ce,t.wrap&4&&Ce&&(n.adler=t.check=t.flags?crc32_1(t.check,Ee,Ce,n.next_out-Ce):adler32_1(t.check,Ee,Ce,n.next_out-Ce)),n.data_type=t.bits+(t.last?64:0)+(t.mode===TYPE?128:0)+(t.mode===LEN_||t.mode===COPY_?256:0),(Oe===0&&Ce===0||e===Z_FINISH$1)&&pn===Z_OK$1&&(pn=Z_BUF_ERROR),pn},inflateEnd=n=>{if(inflateStateCheck(n))return Z_STREAM_ERROR$1;let e=n.state;return e.window&&(e.window=null),n.state=null,Z_OK$1},inflateGetHeader=(n,e)=>{if(inflateStateCheck(n))return Z_STREAM_ERROR$1;const t=n.state;return(t.wrap&2)===0?Z_STREAM_ERROR$1:(t.head=e,e.done=!1,Z_OK$1)},inflateSetDictionary=(n,e)=>{const t=e.length;let r,Ee,Te;return inflateStateCheck(n)||(r=n.state,r.wrap!==0&&r.mode!==DICT)?Z_STREAM_ERROR$1:r.mode===DICT&&(Ee=1,Ee=adler32_1(Ee,e,t,0),Ee!==r.check)?Z_DATA_ERROR$1:(Te=updatewindow(n,e,t,t),Te?(r.mode=MEM,Z_MEM_ERROR$1):(r.havedict=1,Z_OK$1))};var inflateReset_1=inflateReset,inflateReset2_1=inflateReset2,inflateResetKeep_1=inflateResetKeep,inflateInit_1=inflateInit,inflateInit2_1=inflateInit2,inflate_2$1=inflate$2,inflateEnd_1=inflateEnd,inflateGetHeader_1=inflateGetHeader,inflateSetDictionary_1=inflateSetDictionary,inflateInfo="pako inflate (from Nodeca project)",inflate_1$2={inflateReset:inflateReset_1,inflateReset2:inflateReset2_1,inflateResetKeep:inflateResetKeep_1,inflateInit:inflateInit_1,inflateInit2:inflateInit2_1,inflate:inflate_2$1,inflateEnd:inflateEnd_1,inflateGetHeader:inflateGetHeader_1,inflateSetDictionary:inflateSetDictionary_1,inflateInfo};function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var gzheader=GZheader;const toString$2=Object.prototype.toString,{Z_NO_FLUSH,Z_FINISH,Z_OK,Z_STREAM_END,Z_NEED_DICT,Z_STREAM_ERROR,Z_DATA_ERROR,Z_MEM_ERROR}=constants$2;function Inflate$1(n){this.options=common.assign({chunkSize:1024*64,windowBits:15,to:""},n||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(n&&n.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new zstream,this.strm.avail_out=0;let t=inflate_1$2.inflateInit2(this.strm,e.windowBits);if(t!==Z_OK)throw new Error(messages[t]);if(this.header=new gzheader,inflate_1$2.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=strings.string2buf(e.dictionary):toString$2.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(t=inflate_1$2.inflateSetDictionary(this.strm,e.dictionary),t!==Z_OK)))throw new Error(messages[t])}Inflate$1.prototype.push=function(n,e){const t=this.strm,r=this.options.chunkSize,Ee=this.options.dictionary;let Te,Re,Me;if(this.ended)return!1;for(e===~~e?Re=e:Re=e===!0?Z_FINISH:Z_NO_FLUSH,toString$2.call(n)==="[object ArrayBuffer]"?t.input=new Uint8Array(n):t.input=n,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),Te=inflate_1$2.inflate(t,Re),Te===Z_NEED_DICT&&Ee&&(Te=inflate_1$2.inflateSetDictionary(t,Ee),Te===Z_OK?Te=inflate_1$2.inflate(t,Re):Te===Z_DATA_ERROR&&(Te=Z_NEED_DICT));t.avail_in>0&&Te===Z_STREAM_END&&t.state.wrap>0&&n[t.next_in]!==0;)inflate_1$2.inflateReset(t),Te=inflate_1$2.inflate(t,Re);switch(Te){case Z_STREAM_ERROR:case Z_DATA_ERROR:case Z_NEED_DICT:case Z_MEM_ERROR:return this.onEnd(Te),this.ended=!0,!1}if(Me=t.avail_out,t.next_out&&(t.avail_out===0||Te===Z_STREAM_END))if(this.options.to==="string"){let Ve=strings.utf8border(t.output,t.next_out),De=t.next_out-Ve,$e=strings.buf2string(t.output,Ve);t.next_out=De,t.avail_out=r-De,De&&t.output.set(t.output.subarray(Ve,Ve+De),0),this.onData($e)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(Te===Z_OK&&Me===0)){if(Te===Z_STREAM_END)return Te=inflate_1$2.inflateEnd(this.strm),this.onEnd(Te),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Inflate$1.prototype.onData=function(n){this.chunks.push(n)};Inflate$1.prototype.onEnd=function(n){n===Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=common.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg};function inflate$1(n,e){const t=new Inflate$1(e);if(t.push(n),t.err)throw t.msg||messages[t.err];return t.result}var Inflate_1$1=Inflate$1,inflate_2=inflate$1,inflate_1$1={Inflate:Inflate_1$1,inflate:inflate_2};const{Inflate,inflate}=inflate_1$1;var Inflate_1=Inflate,inflate_1=inflate;const crcTable=[];for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e&1?e=3988292384^e>>>1:e=e>>>1;crcTable[n]=e}const initialCrc=4294967295;function updateCrc(n,e,t){let r=n;for(let Ee=0;Ee<t;Ee++)r=crcTable[(r^e[Ee])&255]^r>>>8;return r}function crc(n,e){return(updateCrc(initialCrc,n,e)^initialCrc)>>>0}function checkCrc(n,e,t){const r=n.readUint32(),Ee=crc(new Uint8Array(n.buffer,n.byteOffset+n.offset-e-4,e),e);if(Ee!==r)throw new Error(`CRC mismatch for chunk ${t}. Expected ${r}, found ${Ee}`)}function unfilterNone(n,e,t){for(let r=0;r<t;r++)e[r]=n[r]}function unfilterSub(n,e,t,r){let Ee=0;for(;Ee<r;Ee++)e[Ee]=n[Ee];for(;Ee<t;Ee++)e[Ee]=n[Ee]+e[Ee-r]&255}function unfilterUp(n,e,t,r){let Ee=0;if(t.length===0)for(;Ee<r;Ee++)e[Ee]=n[Ee];else for(;Ee<r;Ee++)e[Ee]=n[Ee]+t[Ee]&255}function unfilterAverage(n,e,t,r,Ee){let Te=0;if(t.length===0){for(;Te<Ee;Te++)e[Te]=n[Te];for(;Te<r;Te++)e[Te]=n[Te]+(e[Te-Ee]>>1)&255}else{for(;Te<Ee;Te++)e[Te]=n[Te]+(t[Te]>>1)&255;for(;Te<r;Te++)e[Te]=n[Te]+(e[Te-Ee]+t[Te]>>1)&255}}function unfilterPaeth(n,e,t,r,Ee){let Te=0;if(t.length===0){for(;Te<Ee;Te++)e[Te]=n[Te];for(;Te<r;Te++)e[Te]=n[Te]+e[Te-Ee]&255}else{for(;Te<Ee;Te++)e[Te]=n[Te]+t[Te]&255;for(;Te<r;Te++)e[Te]=n[Te]+paethPredictor(e[Te-Ee],t[Te],t[Te-Ee])&255}}function paethPredictor(n,e,t){const r=n+e-t,Ee=Math.abs(r-n),Te=Math.abs(r-e),Re=Math.abs(r-t);return Ee<=Te&&Ee<=Re?n:Te<=Re?e:t}function applyUnfilter(n,e,t,r,Ee,Te){switch(n){case 0:unfilterNone(e,t,Ee);break;case 1:unfilterSub(e,t,Ee,Te);break;case 2:unfilterUp(e,t,r,Ee);break;case 3:unfilterAverage(e,t,r,Ee,Te);break;case 4:unfilterPaeth(e,t,r,Ee,Te);break;default:throw new Error(`Unsupported filter: ${n}`)}}const uint16$1=new Uint16Array([255]),uint8$1=new Uint8Array(uint16$1.buffer),osIsLittleEndian$1=uint8$1[0]===255;function decodeInterlaceAdam7(n){const{data:e,width:t,height:r,channels:Ee,depth:Te}=n,Re=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],Me=Math.ceil(Te/8)*Ee,Ve=new Uint8Array(r*t*Me);let De=0;for(let $e=0;$e<7;$e++){const Oe=Re[$e],Ce=Math.ceil((t-Oe.x)/Oe.xStep),Be=Math.ceil((r-Oe.y)/Oe.yStep);if(Ce<=0||Be<=0)continue;const Ue=Ce*Me,We=new Uint8Array(Ue);for(let He=0;He<Be;He++){const Ge=e[De++],Ye=e.subarray(De,De+Ue);De+=Ue;const Je=new Uint8Array(Ue);applyUnfilter(Ge,Ye,Je,We,Ue,Me),We.set(Je);for(let Ze=0;Ze<Ce;Ze++){const fn=Oe.x+Ze*Oe.xStep,yn=Oe.y+He*Oe.yStep;if(!(fn>=t||yn>=r))for(let mn=0;mn<Me;mn++)Ve[(yn*t+fn)*Me+mn]=Je[Ze*Me+mn]}}}if(Te===16){const $e=new Uint16Array(Ve.buffer);if(osIsLittleEndian$1)for(let Oe=0;Oe<$e.length;Oe++)$e[Oe]=swap16$1($e[Oe]);return $e}else return Ve}function swap16$1(n){return(n&255)<<8|n>>8&255}const uint16=new Uint16Array([255]),uint8=new Uint8Array(uint16.buffer),osIsLittleEndian=uint8[0]===255,empty$2=new Uint8Array(0);function decodeInterlaceNull(n){const{data:e,width:t,height:r,channels:Ee,depth:Te}=n,Re=Math.ceil(Te/8)*Ee,Me=Math.ceil(Te/8*Ee*t),Ve=new Uint8Array(r*Me);let De=empty$2,$e=0,Oe,Ce;for(let Be=0;Be<r;Be++){switch(Oe=e.subarray($e+1,$e+1+Me),Ce=Ve.subarray(Be*Me,(Be+1)*Me),e[$e]){case 0:unfilterNone(Oe,Ce,Me);break;case 1:unfilterSub(Oe,Ce,Me,Re);break;case 2:unfilterUp(Oe,Ce,De,Me);break;case 3:unfilterAverage(Oe,Ce,De,Me,Re);break;case 4:unfilterPaeth(Oe,Ce,De,Me,Re);break;default:throw new Error(`Unsupported filter: ${e[$e]}`)}De=Ce,$e+=Me+1}if(Te===16){const Be=new Uint16Array(Ve.buffer);if(osIsLittleEndian)for(let Ue=0;Ue<Be.length;Ue++)Be[Ue]=swap16(Be[Ue]);return Be}else return Ve}function swap16(n){return(n&255)<<8|n>>8&255}const pngSignature=Uint8Array.of(137,80,78,71,13,10,26,10);function checkSignature(n){if(!hasPngSignature(n.readBytes(pngSignature.length)))throw new Error("wrong PNG signature")}function hasPngSignature(n){if(n.length<pngSignature.length)return!1;for(let e=0;e<pngSignature.length;e++)if(n[e]!==pngSignature[e])return!1;return!0}const textChunkName="tEXt",NULL=0,latin1Decoder=new TextDecoder("latin1");function validateKeyword(n){if(validateLatin1(n),n.length===0||n.length>79)throw new Error("keyword length must be between 1 and 79")}const latin1Regex=/^[\u0000-\u00FF]*$/;function validateLatin1(n){if(!latin1Regex.test(n))throw new Error("invalid latin1 text")}function decodetEXt(n,e,t){const r=readKeyword(e);n[r]=readLatin1(e,t-r.length-1)}function readKeyword(n){for(n.mark();n.readByte()!==NULL;);const e=n.offset;n.reset();const t=latin1Decoder.decode(n.readBytes(e-n.offset-1));return n.skip(1),validateKeyword(t),t}function readLatin1(n,e){return latin1Decoder.decode(n.readBytes(e))}const ColorType={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},CompressionMethod={UNKNOWN:-1,DEFLATE:0},FilterMethod={UNKNOWN:-1,ADAPTIVE:0},InterlaceMethod={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},DisposeOpType={NONE:0,BACKGROUND:1,PREVIOUS:2},BlendOpType={SOURCE:0,OVER:1};class PngDecoder extends IOBuffer{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,t={}){super(e);const{checkCrc:r=!1}=t;this._checkCrc=r,this._inflator=new Inflate_1,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=CompressionMethod.UNKNOWN,this._filterMethod=FilterMethod.UNKNOWN,this._interlaceMethod=InterlaceMethod.UNKNOWN,this._colorType=ColorType.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(checkSignature(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeChunk(e,t)}return this.decodeImage(),this._png}decodeApng(){for(checkSignature(this);!this._end;){const e=this.readUint32(),t=this.readChars(4);this.decodeApngChunk(e,t)}return this.decodeApngImage(),this._apng}decodeChunk(e,t){const r=this.offset;switch(t){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case textChunkName:decodetEXt(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?checkCrc(this,e+4,t):this.skip(4)}decodeApngChunk(e,t){const r=this.offset;switch(t!=="fdAT"&&t!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),t){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,t),this.offset=r+e;break}if(this.offset-r!==e)throw new Error(`Length mismatch while decoding chunk ${t}`);this._checkCrc?checkCrc(this,e+4,t):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=checkBitDepth(this.readUint8());const t=this.readUint8();this._colorType=t;let r;switch(t){case ColorType.GREYSCALE:r=1;break;case ColorType.TRUECOLOUR:r=3;break;case ColorType.INDEXED_COLOUR:r=1;break;case ColorType.GREYSCALE_ALPHA:r=2;break;case ColorType.TRUECOLOUR_ALPHA:r=4;break;case ColorType.UNKNOWN:default:throw new Error(`Unknown color type: ${t}`)}if(this._png.channels=r,this._compressionMethod=this.readUint8(),this._compressionMethod!==CompressionMethod.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const t=e/3;this._hasPalette=!0;const r=[];this._palette=r;for(let Ee=0;Ee<t;Ee++)r.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const t=e,r=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let t=e,r=this.offset+this.byteOffset;if(r+=4,t-=4,this._inflator.push(new Uint8Array(this.buffer,r,t)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case ColorType.GREYSCALE:case ColorType.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let t=0;t<e/2;t++)this._transparency[t]=this.readUint16();break}case ColorType.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let t=0;for(;t<e;t++){const r=this.readByte();this._palette[t].push(r)}for(;t<this._palette.length;t++)this._palette[t].push(255);break}case ColorType.UNKNOWN:case ColorType.GREYSCALE_ALPHA:case ColorType.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const t=readKeyword(this),r=this.readUint8();if(r!==CompressionMethod.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${r}`);const Ee=this.readBytes(e-t.length-2);this._png.iccEmbeddedProfile={name:t,profile:inflate_1(Ee)}}decodepHYs(){const e=this.readUint32(),t=this.readUint32(),r=this.readByte();this._png.resolution={x:e,y:t,unit:r}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const t={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},r=this._frames.at(e);if(r){if(r.data=decodeInterlaceNull({data:r.data,width:r.width,height:r.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||r.xOffset===0&&r.yOffset===0&&r.width===this._png.width&&r.height===this._png.height)t.data=r.data;else{const Ee=this._apng.frames.at(e-1);this.disposeFrame(r,Ee,t),this.addFrameDataToCanvas(t,r)}this._apng.frames.push(t)}}return this._apng}disposeFrame(e,t,r){switch(e.disposeOp){case DisposeOpType.NONE:break;case DisposeOpType.BACKGROUND:for(let Ee=0;Ee<this._png.height;Ee++)for(let Te=0;Te<this._png.width;Te++){const Re=(Ee*e.width+Te)*this._png.channels;for(let Me=0;Me<this._png.channels;Me++)r.data[Re+Me]=0}break;case DisposeOpType.PREVIOUS:r.data.set(t.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,t){const r=1<<this._png.depth,Ee=(Te,Re)=>{const Me=((Te+t.yOffset)*this._png.width+t.xOffset+Re)*this._png.channels,Ve=(Te*t.width+Re)*this._png.channels;return{index:Me,frameIndex:Ve}};switch(t.blendOp){case BlendOpType.SOURCE:for(let Te=0;Te<t.height;Te++)for(let Re=0;Re<t.width;Re++){const{index:Me,frameIndex:Ve}=Ee(Te,Re);for(let De=0;De<this._png.channels;De++)e.data[Me+De]=t.data[Ve+De]}break;case BlendOpType.OVER:for(let Te=0;Te<t.height;Te++)for(let Re=0;Re<t.width;Re++){const{index:Me,frameIndex:Ve}=Ee(Te,Re);for(let De=0;De<this._png.channels;De++){const $e=t.data[Ve+this._png.channels-1]/r,Oe=De%(this._png.channels-1)===0?1:t.data[Ve+De],Ce=Math.floor($e*Oe+(1-$e)*e.data[Me+De]);e.data[Me+De]+=Ce}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==FilterMethod.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===InterlaceMethod.NO_INTERLACE)this._png.data=decodeInterlaceNull({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===InterlaceMethod.ADAM7)this._png.data=decodeInterlaceAdam7({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,t=this._frames.at(-1);t?t.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:DisposeOpType.NONE,blendOp:BlendOpType.SOURCE,data:e}),this._inflator=new Inflate_1,this._writingDataChunks=!1}}function checkBitDepth(n){if(n!==1&&n!==2&&n!==4&&n!==8&&n!==16)throw new Error(`invalid bit depth: ${n}`);return n}var ResolutionUnitSpecifier;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.METRE=1]="METRE"})(ResolutionUnitSpecifier||(ResolutionUnitSpecifier={}));function decodePng(n,e){return new PngDecoder(n,e).decode()}var i=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function a(){i.console&&typeof i.console.log=="function"&&i.console.log.apply(i.console,arguments)}var o={log:a,warn:function(n){i.console&&(typeof i.console.warn=="function"?i.console.warn.apply(i.console,arguments):a.call(null,arguments))},error:function(n){i.console&&(typeof i.console.error=="function"?i.console.error.apply(i.console,arguments):a(n))}};function s(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){l(r.response,e,t)},r.onerror=function(){o.error("could not download file")},r.send()}function u(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function c(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var l=i.saveAs||((typeof window>"u"?"undefined":_typeof(window))!=="object"||window!==i?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=i.URL||i.webkitURL,Ee=document.createElement("a");e=e||n.name||"download",Ee.download=e,Ee.rel="noopener",typeof n=="string"?(Ee.href=n,Ee.origin!==location.origin?u(Ee.href)?s(n,e,t):c(Ee,Ee.target="_blank"):c(Ee)):(Ee.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(Ee.href)},4e4),setTimeout(function(){c(Ee)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(u(n))s(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){c(r)})}else navigator.msSaveOrOpenBlob(function(Ee,Te){return Te===void 0?Te={autoBom:!1}:_typeof(Te)!=="object"&&(o.warn("Deprecated: Expected third argument to be a object"),Te={autoBom:!Te}),Te.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Ee.type)?new Blob(["\uFEFF",Ee],{type:Ee.type}):Ee}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return s(n,e,t);var Ee=n.type==="application/octet-stream",Te=/constructor/i.test(i.HTMLElement)||i.safari,Re=/CriOS\/[\d]+/.test(navigator.userAgent);if((Re||Ee&&Te)&&(typeof FileReader>"u"?"undefined":_typeof(FileReader))==="object"){var Me=new FileReader;Me.onloadend=function(){var $e=Me.result;$e=Re?$e:$e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=$e:location=$e,r=null},Me.readAsDataURL(n)}else{var Ve=i.URL||i.webkitURL,De=Ve.createObjectURL(n);r?r.location=De:location.href=De,r=null,setTimeout(function(){Ve.revokeObjectURL(De)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function h(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(Me){return[parseInt(Me[1]),parseInt(Me[2]),parseInt(Me[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(Me){return[parseInt(Me[1],16),parseInt(Me[2],16),parseInt(Me[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(Me){return[parseInt(Me[1]+Me[1],16),parseInt(Me[2]+Me[2],16),parseInt(Me[3]+Me[3],16)]}}],r=0;r<t.length;r++){var Ee=t[r].re,Te=t[r].process,Re=Ee.exec(n);Re&&(e=Te(Re),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var Me=this.r.toString(16),Ve=this.g.toString(16),De=this.b.toString(16);return Me.length==1&&(Me="0"+Me),Ve.length==1&&(Ve="0"+Ve),De.length==1&&(De="0"+De),"#"+Me+Ve+De}}var f=i.atob.bind(i),d=i.btoa.bind(i);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function p(n,e){var t=n[0],r=n[1],Ee=n[2],Te=n[3];t=m(t,r,Ee,Te,e[0],7,-680876936),Te=m(Te,t,r,Ee,e[1],12,-389564586),Ee=m(Ee,Te,t,r,e[2],17,606105819),r=m(r,Ee,Te,t,e[3],22,-1044525330),t=m(t,r,Ee,Te,e[4],7,-176418897),Te=m(Te,t,r,Ee,e[5],12,1200080426),Ee=m(Ee,Te,t,r,e[6],17,-1473231341),r=m(r,Ee,Te,t,e[7],22,-45705983),t=m(t,r,Ee,Te,e[8],7,1770035416),Te=m(Te,t,r,Ee,e[9],12,-1958414417),Ee=m(Ee,Te,t,r,e[10],17,-42063),r=m(r,Ee,Te,t,e[11],22,-1990404162),t=m(t,r,Ee,Te,e[12],7,1804603682),Te=m(Te,t,r,Ee,e[13],12,-40341101),Ee=m(Ee,Te,t,r,e[14],17,-1502002290),t=v(t,r=m(r,Ee,Te,t,e[15],22,1236535329),Ee,Te,e[1],5,-165796510),Te=v(Te,t,r,Ee,e[6],9,-1069501632),Ee=v(Ee,Te,t,r,e[11],14,643717713),r=v(r,Ee,Te,t,e[0],20,-373897302),t=v(t,r,Ee,Te,e[5],5,-701558691),Te=v(Te,t,r,Ee,e[10],9,38016083),Ee=v(Ee,Te,t,r,e[15],14,-660478335),r=v(r,Ee,Te,t,e[4],20,-405537848),t=v(t,r,Ee,Te,e[9],5,568446438),Te=v(Te,t,r,Ee,e[14],9,-1019803690),Ee=v(Ee,Te,t,r,e[3],14,-187363961),r=v(r,Ee,Te,t,e[8],20,1163531501),t=v(t,r,Ee,Te,e[13],5,-1444681467),Te=v(Te,t,r,Ee,e[2],9,-51403784),Ee=v(Ee,Te,t,r,e[7],14,1735328473),t=b(t,r=v(r,Ee,Te,t,e[12],20,-1926607734),Ee,Te,e[5],4,-378558),Te=b(Te,t,r,Ee,e[8],11,-2022574463),Ee=b(Ee,Te,t,r,e[11],16,1839030562),r=b(r,Ee,Te,t,e[14],23,-35309556),t=b(t,r,Ee,Te,e[1],4,-1530992060),Te=b(Te,t,r,Ee,e[4],11,1272893353),Ee=b(Ee,Te,t,r,e[7],16,-155497632),r=b(r,Ee,Te,t,e[10],23,-1094730640),t=b(t,r,Ee,Te,e[13],4,681279174),Te=b(Te,t,r,Ee,e[0],11,-358537222),Ee=b(Ee,Te,t,r,e[3],16,-722521979),r=b(r,Ee,Te,t,e[6],23,76029189),t=b(t,r,Ee,Te,e[9],4,-640364487),Te=b(Te,t,r,Ee,e[12],11,-421815835),Ee=b(Ee,Te,t,r,e[15],16,530742520),t=y(t,r=b(r,Ee,Te,t,e[2],23,-995338651),Ee,Te,e[0],6,-198630844),Te=y(Te,t,r,Ee,e[7],10,1126891415),Ee=y(Ee,Te,t,r,e[14],15,-1416354905),r=y(r,Ee,Te,t,e[5],21,-57434055),t=y(t,r,Ee,Te,e[12],6,1700485571),Te=y(Te,t,r,Ee,e[3],10,-1894986606),Ee=y(Ee,Te,t,r,e[10],15,-1051523),r=y(r,Ee,Te,t,e[1],21,-2054922799),t=y(t,r,Ee,Te,e[8],6,1873313359),Te=y(Te,t,r,Ee,e[15],10,-30611744),Ee=y(Ee,Te,t,r,e[6],15,-1560198380),r=y(r,Ee,Te,t,e[13],21,1309151649),t=y(t,r,Ee,Te,e[4],6,-145523070),Te=y(Te,t,r,Ee,e[11],10,-1120210379),Ee=y(Ee,Te,t,r,e[2],15,718787259),r=y(r,Ee,Te,t,e[9],21,-343485551),n[0]=P(t,n[0]),n[1]=P(r,n[1]),n[2]=P(Ee,n[2]),n[3]=P(Te,n[3])}function g(n,e,t,r,Ee,Te){return e=P(P(e,n),P(r,Te)),P(e<<Ee|e>>>32-Ee,t)}function m(n,e,t,r,Ee,Te,Re){return g(e&t|~e&r,n,e,Ee,Te,Re)}function v(n,e,t,r,Ee,Te,Re){return g(e&r|t&~r,n,e,Ee,Te,Re)}function b(n,e,t,r,Ee,Te,Re){return g(e^t^r,n,e,Ee,Te,Re)}function y(n,e,t,r,Ee,Te,Re){return g(t^(e|~r),n,e,Ee,Te,Re)}function w(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)p(r,N(n.substring(e-64,e)));n=n.substring(e-64);var Ee=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)Ee[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(Ee[e>>2]|=128<<(e%4<<3),e>55)for(p(r,Ee),e=0;e<16;e++)Ee[e]=0;return Ee[14]=8*t,p(r,Ee),r}function N(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}var L="0123456789abcdef".split("");function x(n){for(var e="",t=0;t<4;t++)e+=L[n>>8*t+4&15]+L[n>>8*t&15];return e}function A(n){return String.fromCharCode(255&n,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function S(n){return w(n).map(A).join("")}var _=function(n){for(var e=0;e<n.length;e++)n[e]=x(n[e]);return n.join("")}(w("hello"))!="5d41402abc4b2a76b9719d911017c592";function P(n,e){if(_){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function k(n,e){var t,r,Ee,Te;if(n!==t){for(var Re=(Ee=n,Te=1+(256/n.length|0),new Array(Te+1).join(Ee)),Me=[],Ve=0;Ve<256;Ve++)Me[Ve]=Ve;var De=0;for(Ve=0;Ve<256;Ve++){var $e=Me[Ve];De=(De+$e+Re.charCodeAt(Ve))%256,Me[Ve]=Me[De],Me[De]=$e}t=n,r=Me}else Me=r;var Oe=e.length,Ce=0,Be=0,Ue="";for(Ve=0;Ve<Oe;Ve++)Be=(Be+($e=Me[Ce=(Ce+1)%256]))%256,Me[Ce]=Me[Be],Me[Be]=$e,Re=Me[(Me[Ce]+Me[Be])%256],Ue+=String.fromCharCode(e.charCodeAt(Ve)^Re);return Ue}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var F={print:4,modify:8,copy:16,"annot-forms":32};function I(n,e,t,r){this.v=1,this.r=2;var Ee=192;n.forEach(function(Me){if(F.perm!==void 0)throw new Error("Invalid permission: "+Me);Ee+=F[Me]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var Te=(e+this.padding).substr(0,32),Re=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(Te,Re),this.P=-(1+(255^Ee)),this.encryptionKey=S(Te+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=k(this.encryptionKey,this.padding)}function j(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var Ee=n.charCodeAt(r);e+=Ee<33||Ee===35||Ee===37||Ee===40||Ee===41||Ee===47||Ee===60||Ee===62||Ee===91||Ee===93||Ee===123||Ee===125||Ee>126?"#"+("0"+Ee.toString(16)).slice(-2):n[r]}return e}function C(n){if(_typeof(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,Ee){if(Ee=Ee||!1,typeof t!="string"||typeof r!="function"||typeof Ee!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var Te=Math.random().toString(35);return e[t][Te]=[r,!!Ee],Te},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),Ee=[];for(var Te in e[t]){var Re=e[t][Te];try{Re[0].apply(n,r)}catch(Me){i.console&&o.error("jsPDF PubSub Error",Me.message,Me)}Re[1]&&Ee.push(Te)}Ee.length&&Ee.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function O(n){if(!(this instanceof O))return new O(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function B(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function M(n,e,t,r,Ee){if(!(this instanceof M))return new M(n,e,t,r,Ee);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,B.call(this,r,Ee)}function q(n,e,t,r,Ee){if(!(this instanceof q))return new q(n,e,t,r,Ee);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,B.call(this,r,Ee)}function E(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],Ee=arguments[2],Te=arguments[3],Re=[],Me=1,Ve=16,De="S",$e=null;_typeof(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,Ee=n.format||Ee,Te=n.compress||n.compressPdf||Te,($e=n.encryption||null)!==null&&($e.userPassword=$e.userPassword||"",$e.ownerPassword=$e.ownerPassword||"",$e.userPermissions=$e.userPermissions||[]),Me=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(Ve=n.floatPrecision),De=n.defaultPathOperation||"S"),Re=n.filters||(Te===!0?["FlateEncode"]:Re),r=r||"mm",t=(""+(t||"P")).toLowerCase();var Oe=n.putOnlyUsedFonts||!1,Ce={},Be={internal:{},__private__:{}};Be.__private__.PubSub=C;var Ue="1.3",We=Be.__private__.getPdfVersion=function(){return Ue};Be.__private__.setPdfVersion=function(wn){Ue=wn};var He={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};Be.__private__.getPageFormats=function(){return He};var Ge=Be.__private__.getPageFormat=function(wn){return He[wn]};Ee=Ee||"a4";var Ye="compat",Je="advanced",Ze=Ye;function fn(){this.saveGraphicsState(),nr(new ki(ii,0,0,-ii,0,Ys()*ii).toString()+" cm"),this.setFontSize(this.getFontSize()/ii),De="n",Ze=Je}function yn(){this.restoreGraphicsState(),De="S",Ze=Ye}var mn=Be.__private__.combineFontStyleAndFontWeight=function(wn,Fn){if(wn=="bold"&&Fn=="normal"||wn=="bold"&&Fn==400||wn=="normal"&&Fn=="italic"||wn=="bold"&&Fn=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Fn&&(wn=Fn==400||Fn==="normal"?wn==="italic"?"italic":"normal":Fn!=700&&Fn!=="bold"||wn!=="normal"?(Fn==700?"bold":Fn)+""+wn:"bold"),wn};Be.advancedAPI=function(wn){var Fn=Ze===Ye;return Fn&&fn.call(this),typeof wn!="function"||(wn(this),Fn&&yn.call(this)),this},Be.compatAPI=function(wn){var Fn=Ze===Je;return Fn&&yn.call(this),typeof wn!="function"||(wn(this),Fn&&fn.call(this)),this},Be.isAdvancedAPI=function(){return Ze===Je};var pn,un=function(wn){if(Ze!==Je)throw new Error(wn+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},bn=Be.roundToPrecision=Be.__private__.roundToPrecision=function(wn,Fn){var er=e||Fn;if(isNaN(wn)||isNaN(er))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return wn.toFixed(er).replace(/0+$/,"")};pn=Be.hpf=Be.__private__.hpf=typeof Ve=="number"?function(wn){if(isNaN(wn))throw new Error("Invalid argument passed to jsPDF.hpf");return bn(wn,Ve)}:Ve==="smart"?function(wn){if(isNaN(wn))throw new Error("Invalid argument passed to jsPDF.hpf");return bn(wn,wn>-1&&wn<1?16:5)}:function(wn){if(isNaN(wn))throw new Error("Invalid argument passed to jsPDF.hpf");return bn(wn,16)};var gn=Be.f2=Be.__private__.f2=function(wn){if(isNaN(wn))throw new Error("Invalid argument passed to jsPDF.f2");return bn(wn,2)},xn=Be.__private__.f3=function(wn){if(isNaN(wn))throw new Error("Invalid argument passed to jsPDF.f3");return bn(wn,3)},En=Be.scale=Be.__private__.scale=function(wn){if(isNaN(wn))throw new Error("Invalid argument passed to jsPDF.scale");return Ze===Ye?wn*ii:Ze===Je?wn:void 0},Pn=function(wn){return En(function(Fn){return Ze===Ye?Ys()-Fn:Ze===Je?Fn:void 0}(wn))};Be.__private__.setPrecision=Be.setPrecision=function(wn){typeof parseInt(wn,10)=="number"&&(e=parseInt(wn,10))};var Ln,Cn="00000000000000000000000000000000",Dn=Be.__private__.getFileId=function(){return Cn},Un=Be.__private__.setFileId=function(wn){return Cn=wn!==void 0&&/^[a-fA-F0-9]{32}$/.test(wn)?wn.toUpperCase():Cn.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),$e!==null&&(Ts=new I($e.userPermissions,$e.userPassword,$e.ownerPassword,Cn)),Cn};Be.setFileId=function(wn){return Un(wn),this},Be.getFileId=function(){return Dn()};var Wn=Be.__private__.convertDateToPDFDate=function(wn){var Fn=wn.getTimezoneOffset(),er=Fn<0?"+":"-",lr=Math.floor(Math.abs(Fn/60)),yr=Math.abs(Fn%60),$r=[er,Kn(lr),"'",Kn(yr),"'"].join("");return["D:",wn.getFullYear(),Kn(wn.getMonth()+1),Kn(wn.getDate()),Kn(wn.getHours()),Kn(wn.getMinutes()),Kn(wn.getSeconds()),$r].join("")},On=Be.__private__.convertPDFDateToDate=function(wn){var Fn=parseInt(wn.substr(2,4),10),er=parseInt(wn.substr(6,2),10)-1,lr=parseInt(wn.substr(8,2),10),yr=parseInt(wn.substr(10,2),10),$r=parseInt(wn.substr(12,2),10),Wr=parseInt(wn.substr(14,2),10);return new Date(Fn,er,lr,yr,$r,Wr,0)},$n=Be.__private__.setCreationDate=function(wn){var Fn;if(wn===void 0&&(wn=new Date),wn instanceof Date)Fn=Wn(wn);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(wn))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Fn=wn}return Ln=Fn},kn=Be.__private__.getCreationDate=function(wn){var Fn=Ln;return wn==="jsDate"&&(Fn=On(Ln)),Fn};Be.setCreationDate=function(wn){return $n(wn),this},Be.getCreationDate=function(wn){return kn(wn)};var In,Kn=Be.__private__.padd2=function(wn){return("0"+parseInt(wn)).slice(-2)},Qn=Be.__private__.padd2Hex=function(wn){return("00"+(wn=wn.toString())).substr(wn.length)},rr=0,or=[],pr=[],mr=0,Er=[],jr=[],Kr=!1,Hr=pr;Be.__private__.setCustomOutputDestination=function(wn){Kr=!0,Hr=wn};var xr=function(wn){Kr||(Hr=wn)};Be.__private__.resetCustomOutputDestination=function(){Kr=!1,Hr=pr};var nr=Be.__private__.out=function(wn){return wn=wn.toString(),mr+=wn.length+1,Hr.push(wn),Hr},Oi=Be.__private__.write=function(wn){return nr(arguments.length===1?wn.toString():Array.prototype.join.call(arguments," "))},Ti=Be.__private__.getArrayBuffer=function(wn){for(var Fn=wn.length,er=new ArrayBuffer(Fn),lr=new Uint8Array(er);Fn--;)lr[Fn]=wn.charCodeAt(Fn);return er},yi=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];Be.__private__.getStandardFonts=function(){return yi};var qr=n.fontSize||16;Be.__private__.setFontSize=Be.setFontSize=function(wn){return qr=Ze===Je?wn/ii:wn,this};var di,Zr=Be.__private__.getFontSize=Be.getFontSize=function(){return Ze===Ye?qr:qr*ii},mi=n.R2L||!1;Be.__private__.setR2L=Be.setR2L=function(wn){return mi=wn,this},Be.__private__.getR2L=Be.getR2L=function(){return mi};var pi,Wi=Be.__private__.setZoomMode=function(wn){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(wn))di=wn;else if(isNaN(wn)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(wn)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+wn+'" is not recognized.');di=wn}else di=parseInt(wn,10)};Be.__private__.getZoomMode=function(){return di};var si,_r=Be.__private__.setPageMode=function(wn){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(wn)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+wn+'" is not recognized.');pi=wn};Be.__private__.getPageMode=function(){return pi};var Dr=Be.__private__.setLayoutMode=function(wn){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(wn)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+wn+'" is not recognized.');si=wn};Be.__private__.getLayoutMode=function(){return si},Be.__private__.setDisplayMode=Be.setDisplayMode=function(wn,Fn,er){return Wi(wn),Dr(Fn),_r(er),this};var Xr={title:"",subject:"",author:"",keywords:"",creator:""};Be.__private__.getDocumentProperty=function(wn){if(Object.keys(Xr).indexOf(wn)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Xr[wn]},Be.__private__.getDocumentProperties=function(){return Xr},Be.__private__.setDocumentProperties=Be.setProperties=Be.setDocumentProperties=function(wn){for(var Fn in Xr)Xr.hasOwnProperty(Fn)&&wn[Fn]&&(Xr[Fn]=wn[Fn]);return this},Be.__private__.setDocumentProperty=function(wn,Fn){if(Object.keys(Xr).indexOf(wn)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Xr[wn]=Fn};var Gr,ii,hi,Mi,ji,Ur={},Pi={},Bi=[],vi={},Ri={},ui={},vs={},ds=null,ns=0,ni=[],oi=new C(Be),Di=n.hotfixes||[],Ns={},mo={},Js=[],ki=function wn(Fn,er,lr,yr,$r,Wr){if(!(this instanceof wn))return new wn(Fn,er,lr,yr,$r,Wr);isNaN(Fn)&&(Fn=1),isNaN(er)&&(er=0),isNaN(lr)&&(lr=0),isNaN(yr)&&(yr=1),isNaN($r)&&($r=0),isNaN(Wr)&&(Wr=0),this._matrix=[Fn,er,lr,yr,$r,Wr]};Object.defineProperty(ki.prototype,"sx",{get:function(){return this._matrix[0]},set:function(wn){this._matrix[0]=wn}}),Object.defineProperty(ki.prototype,"shy",{get:function(){return this._matrix[1]},set:function(wn){this._matrix[1]=wn}}),Object.defineProperty(ki.prototype,"shx",{get:function(){return this._matrix[2]},set:function(wn){this._matrix[2]=wn}}),Object.defineProperty(ki.prototype,"sy",{get:function(){return this._matrix[3]},set:function(wn){this._matrix[3]=wn}}),Object.defineProperty(ki.prototype,"tx",{get:function(){return this._matrix[4]},set:function(wn){this._matrix[4]=wn}}),Object.defineProperty(ki.prototype,"ty",{get:function(){return this._matrix[5]},set:function(wn){this._matrix[5]=wn}}),Object.defineProperty(ki.prototype,"a",{get:function(){return this._matrix[0]},set:function(wn){this._matrix[0]=wn}}),Object.defineProperty(ki.prototype,"b",{get:function(){return this._matrix[1]},set:function(wn){this._matrix[1]=wn}}),Object.defineProperty(ki.prototype,"c",{get:function(){return this._matrix[2]},set:function(wn){this._matrix[2]=wn}}),Object.defineProperty(ki.prototype,"d",{get:function(){return this._matrix[3]},set:function(wn){this._matrix[3]=wn}}),Object.defineProperty(ki.prototype,"e",{get:function(){return this._matrix[4]},set:function(wn){this._matrix[4]=wn}}),Object.defineProperty(ki.prototype,"f",{get:function(){return this._matrix[5]},set:function(wn){this._matrix[5]=wn}}),Object.defineProperty(ki.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ki.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ki.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ki.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ki.prototype.join=function(wn){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(pn).join(wn)},ki.prototype.multiply=function(wn){var Fn=wn.sx*this.sx+wn.shy*this.shx,er=wn.sx*this.shy+wn.shy*this.sy,lr=wn.shx*this.sx+wn.sy*this.shx,yr=wn.shx*this.shy+wn.sy*this.sy,$r=wn.tx*this.sx+wn.ty*this.shx+this.tx,Wr=wn.tx*this.shy+wn.ty*this.sy+this.ty;return new ki(Fn,er,lr,yr,$r,Wr)},ki.prototype.decompose=function(){var wn=this.sx,Fn=this.shy,er=this.shx,lr=this.sy,yr=this.tx,$r=this.ty,Wr=Math.sqrt(wn*wn+Fn*Fn),gi=(wn/=Wr)*er+(Fn/=Wr)*lr;er-=wn*gi,lr-=Fn*gi;var wi=Math.sqrt(er*er+lr*lr);return gi/=wi,wn*(lr/=wi)<Fn*(er/=wi)&&(wn=-wn,Fn=-Fn,gi=-gi,Wr=-Wr),{scale:new ki(Wr,0,0,wi,0,0),translate:new ki(1,0,0,1,yr,$r),rotate:new ki(wn,Fn,-Fn,wn,0,0),skew:new ki(1,0,gi,1,0,0)}},ki.prototype.toString=function(wn){return this.join(" ")},ki.prototype.inversed=function(){var wn=this.sx,Fn=this.shy,er=this.shx,lr=this.sy,yr=this.tx,$r=this.ty,Wr=1/(wn*lr-Fn*er),gi=lr*Wr,wi=-Fn*Wr,$i=-er*Wr,Qi=wn*Wr;return new ki(gi,wi,$i,Qi,-gi*yr-$i*$r,-wi*yr-Qi*$r)},ki.prototype.applyToPoint=function(wn){var Fn=wn.x*this.sx+wn.y*this.shx+this.tx,er=wn.x*this.shy+wn.y*this.sy+this.ty;return new hs(Fn,er)},ki.prototype.applyToRectangle=function(wn){var Fn=this.applyToPoint(wn),er=this.applyToPoint(new hs(wn.x+wn.w,wn.y+wn.h));return new _o(Fn.x,Fn.y,er.x-Fn.x,er.y-Fn.y)},ki.prototype.clone=function(){var wn=this.sx,Fn=this.shy,er=this.shx,lr=this.sy,yr=this.tx,$r=this.ty;return new ki(wn,Fn,er,lr,yr,$r)},Be.Matrix=ki;var ms=Be.matrixMult=function(wn,Fn){return Fn.multiply(wn)},So=new ki(1,0,0,1,0,0);Be.unitMatrix=Be.identityMatrix=So;var Ms=function(wn,Fn){if(!Ri[wn]){var er=(Fn instanceof M?"Sh":"P")+(Object.keys(vi).length+1).toString(10);Fn.id=er,Ri[wn]=er,vi[er]=Fn,oi.publish("addPattern",Fn)}};Be.ShadingPattern=M,Be.TilingPattern=q,Be.addShadingPattern=function(wn,Fn){return un("addShadingPattern()"),Ms(wn,Fn),this},Be.beginTilingPattern=function(wn){un("beginTilingPattern()"),Rr(wn.boundingBox[0],wn.boundingBox[1],wn.boundingBox[2]-wn.boundingBox[0],wn.boundingBox[3]-wn.boundingBox[1],wn.matrix)},Be.endTilingPattern=function(wn,Fn){un("endTilingPattern()"),Fn.stream=jr[In].join(`
`),Ms(wn,Fn),oi.publish("endTilingPattern",Fn),Js.pop().restore()};var Zs,ws=Be.__private__.newObject=function(){var wn=Cs();return xs(wn,!0),wn},Cs=Be.__private__.newObjectDeferred=function(){return rr++,or[rr]=function(){return mr},rr},xs=function(wn,Fn){return Fn=typeof Fn=="boolean"&&Fn,or[wn]=mr,Fn&&nr(wn+" 0 obj"),wn},Yo=Be.__private__.newAdditionalObject=function(){var wn={objId:Cs(),content:""};return Er.push(wn),wn},ta=Cs(),oo=Cs(),Hn=Be.__private__.decodeColorString=function(wn){var Fn=wn.split(" ");if(Fn.length!==2||Fn[1]!=="g"&&Fn[1]!=="G")Fn.length!==5||Fn[4]!=="k"&&Fn[4]!=="K"||(Fn=[(1-Fn[0])*(1-Fn[3]),(1-Fn[1])*(1-Fn[3]),(1-Fn[2])*(1-Fn[3]),"r"]);else{var er=parseFloat(Fn[0]);Fn=[er,er,er,"r"]}for(var lr="#",yr=0;yr<3;yr++)lr+=("0"+Math.floor(255*parseFloat(Fn[yr])).toString(16)).slice(-2);return lr},ir=Be.__private__.encodeColorString=function(wn){var Fn;typeof wn=="string"&&(wn={ch1:wn});var er=wn.ch1,lr=wn.ch2,yr=wn.ch3,$r=wn.ch4,Wr=wn.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof er=="string"&&er.charAt(0)!=="#"){var gi=new h(er);if(gi.ok)er=gi.toHex();else if(!/^\d*\.?\d*$/.test(er))throw new Error('Invalid color "'+er+'" passed to jsPDF.encodeColorString.')}if(typeof er=="string"&&/^#[0-9A-Fa-f]{3}$/.test(er)&&(er="#"+er[1]+er[1]+er[2]+er[2]+er[3]+er[3]),typeof er=="string"&&/^#[0-9A-Fa-f]{6}$/.test(er)){var wi=parseInt(er.substr(1),16);er=wi>>16&255,lr=wi>>8&255,yr=255&wi}if(lr===void 0||$r===void 0&&er===lr&&lr===yr)Fn=typeof er=="string"?er+" "+Wr[0]:wn.precision===2?gn(er/255)+" "+Wr[0]:xn(er/255)+" "+Wr[0];else if($r===void 0||_typeof($r)==="object"){if($r&&!isNaN($r.a)&&$r.a===0)return["1.","1.","1.",Wr[1]].join(" ");Fn=typeof er=="string"?[er,lr,yr,Wr[1]].join(" "):wn.precision===2?[gn(er/255),gn(lr/255),gn(yr/255),Wr[1]].join(" "):[xn(er/255),xn(lr/255),xn(yr/255),Wr[1]].join(" ")}else Fn=typeof er=="string"?[er,lr,yr,$r,Wr[2]].join(" "):wn.precision===2?[gn(er),gn(lr),gn(yr),gn($r),Wr[2]].join(" "):[xn(er),xn(lr),xn(yr),xn($r),Wr[2]].join(" ");return Fn},ur=Be.__private__.getFilters=function(){return Re},gr=Be.__private__.putStream=function(wn){var Fn=(wn=wn||{}).data||"",er=wn.filters||ur(),lr=wn.alreadyAppliedFilters||[],yr=wn.addLength1||!1,$r=Fn.length,Wr=wn.objectId,gi=function(uo){return uo};if($e!==null&&Wr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");$e!==null&&(gi=Ts.encryptor(Wr,0));var wi={};er===!0&&(er=["FlateEncode"]);var $i=wn.additionalKeyValues||[],Qi=(wi=E.API.processDataByFilters!==void 0?E.API.processDataByFilters(Fn,er):{data:Fn,reverseChain:[]}).reverseChain+(Array.isArray(lr)?lr.join(" "):lr.toString());if(wi.data.length!==0&&($i.push({key:"Length",value:wi.data.length}),yr===!0&&$i.push({key:"Length1",value:$r})),Qi.length!=0)if(Qi.split("/").length-1==1)$i.push({key:"Filter",value:Qi});else{$i.push({key:"Filter",value:"["+Qi+"]"});for(var ys=0;ys<$i.length;ys+=1)if($i[ys].key==="DecodeParms"){for(var qs=[],Xs=0;Xs<wi.reverseChain.split("/").length-1;Xs+=1)qs.push("null");qs.push($i[ys].value),$i[ys].value="["+qs.join(" ")+"]"}}nr("<<");for(var Es=0;Es<$i.length;Es++)nr("/"+$i[Es].key+" "+$i[Es].value);nr(">>"),wi.data.length!==0&&(nr("stream"),nr(gi(wi.data)),nr("endstream"))},Pr=Be.__private__.putPage=function(wn){var Fn=wn.number,er=wn.data,lr=wn.objId,yr=wn.contentsObjId;xs(lr,!0),nr("<</Type /Page"),nr("/Parent "+wn.rootDictionaryObjId+" 0 R"),nr("/Resources "+wn.resourceDictionaryObjId+" 0 R"),nr("/MediaBox ["+parseFloat(pn(wn.mediaBox.bottomLeftX))+" "+parseFloat(pn(wn.mediaBox.bottomLeftY))+" "+pn(wn.mediaBox.topRightX)+" "+pn(wn.mediaBox.topRightY)+"]"),wn.cropBox!==null&&nr("/CropBox ["+pn(wn.cropBox.bottomLeftX)+" "+pn(wn.cropBox.bottomLeftY)+" "+pn(wn.cropBox.topRightX)+" "+pn(wn.cropBox.topRightY)+"]"),wn.bleedBox!==null&&nr("/BleedBox ["+pn(wn.bleedBox.bottomLeftX)+" "+pn(wn.bleedBox.bottomLeftY)+" "+pn(wn.bleedBox.topRightX)+" "+pn(wn.bleedBox.topRightY)+"]"),wn.trimBox!==null&&nr("/TrimBox ["+pn(wn.trimBox.bottomLeftX)+" "+pn(wn.trimBox.bottomLeftY)+" "+pn(wn.trimBox.topRightX)+" "+pn(wn.trimBox.topRightY)+"]"),wn.artBox!==null&&nr("/ArtBox ["+pn(wn.artBox.bottomLeftX)+" "+pn(wn.artBox.bottomLeftY)+" "+pn(wn.artBox.topRightX)+" "+pn(wn.artBox.topRightY)+"]"),typeof wn.userUnit=="number"&&wn.userUnit!==1&&nr("/UserUnit "+wn.userUnit),oi.publish("putPage",{objId:lr,pageContext:ni[Fn],pageNumber:Fn,page:er}),nr("/Contents "+yr+" 0 R"),nr(">>"),nr("endobj");var $r=er.join(`
`);return Ze===Je&&($r+=`
Q`),xs(yr,!0),gr({data:$r,filters:ur(),objectId:yr}),nr("endobj"),lr},Cr=Be.__private__.putPages=function(){var wn,Fn,er=[];for(wn=1;wn<=ns;wn++)ni[wn].objId=Cs(),ni[wn].contentsObjId=Cs();for(wn=1;wn<=ns;wn++)er.push(Pr({number:wn,data:jr[wn],objId:ni[wn].objId,contentsObjId:ni[wn].contentsObjId,mediaBox:ni[wn].mediaBox,cropBox:ni[wn].cropBox,bleedBox:ni[wn].bleedBox,trimBox:ni[wn].trimBox,artBox:ni[wn].artBox,userUnit:ni[wn].userUnit,rootDictionaryObjId:ta,resourceDictionaryObjId:oo}));xs(ta,!0),nr("<</Type /Pages");var lr="/Kids [";for(Fn=0;Fn<ns;Fn++)lr+=er[Fn]+" 0 R ";nr(lr+"]"),nr("/Count "+ns),nr(">>"),nr("endobj"),oi.publish("postPutPages")},Jr=function(wn){oi.publish("putFont",{font:wn,out:nr,newObject:ws,putStream:gr}),wn.isAlreadyPutted!==!0&&(wn.objectNumber=ws(),nr("<<"),nr("/Type /Font"),nr("/BaseFont /"+j(wn.postScriptName)),nr("/Subtype /Type1"),typeof wn.encoding=="string"&&nr("/Encoding /"+wn.encoding),nr("/FirstChar 32"),nr("/LastChar 255"),nr(">>"),nr("endobj"))},_i=function(wn){wn.objectNumber=ws();var Fn=[];Fn.push({key:"Type",value:"/XObject"}),Fn.push({key:"Subtype",value:"/Form"}),Fn.push({key:"BBox",value:"["+[pn(wn.x),pn(wn.y),pn(wn.x+wn.width),pn(wn.y+wn.height)].join(" ")+"]"}),Fn.push({key:"Matrix",value:"["+wn.matrix.toString()+"]"});var er=wn.pages[1].join(`
`);gr({data:er,additionalKeyValues:Fn,objectId:wn.objectNumber}),nr("endobj")},fi=function(wn,Fn){Fn||(Fn=21);var er=ws(),lr=function(Wr,gi){var wi,$i=[],Qi=1/(gi-1);for(wi=0;wi<1;wi+=Qi)$i.push(wi);if($i.push(1),Wr[0].offset!=0){var ys={offset:0,color:Wr[0].color};Wr.unshift(ys)}if(Wr[Wr.length-1].offset!=1){var qs={offset:1,color:Wr[Wr.length-1].color};Wr.push(qs)}for(var Xs="",Es=0,uo=0;uo<$i.length;uo++){for(wi=$i[uo];wi>Wr[Es+1].offset;)Es++;var Ls=Wr[Es].offset,Co=(wi-Ls)/(Wr[Es+1].offset-Ls),Ka=Wr[Es].color,nl=Wr[Es+1].color;Xs+=Qn(Math.round((1-Co)*Ka[0]+Co*nl[0]).toString(16))+Qn(Math.round((1-Co)*Ka[1]+Co*nl[1]).toString(16))+Qn(Math.round((1-Co)*Ka[2]+Co*nl[2]).toString(16))}return Xs.trim()}(wn.colors,Fn),yr=[];yr.push({key:"FunctionType",value:"0"}),yr.push({key:"Domain",value:"[0.0 1.0]"}),yr.push({key:"Size",value:"["+Fn+"]"}),yr.push({key:"BitsPerSample",value:"8"}),yr.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),yr.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),gr({data:lr,additionalKeyValues:yr,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:er}),nr("endobj"),wn.objectNumber=ws(),nr("<< /ShadingType "+wn.type),nr("/ColorSpace /DeviceRGB");var $r="/Coords ["+pn(parseFloat(wn.coords[0]))+" "+pn(parseFloat(wn.coords[1]))+" ";wn.type===2?$r+=pn(parseFloat(wn.coords[2]))+" "+pn(parseFloat(wn.coords[3])):$r+=pn(parseFloat(wn.coords[2]))+" "+pn(parseFloat(wn.coords[3]))+" "+pn(parseFloat(wn.coords[4]))+" "+pn(parseFloat(wn.coords[5])),nr($r+="]"),wn.matrix&&nr("/Matrix ["+wn.matrix.toString()+"]"),nr("/Function "+er+" 0 R"),nr("/Extend [true true]"),nr(">>"),nr("endobj")},Ui=function(wn,Fn){var er=Cs(),lr=ws();Fn.push({resourcesOid:er,objectOid:lr}),wn.objectNumber=lr;var yr=[];yr.push({key:"Type",value:"/Pattern"}),yr.push({key:"PatternType",value:"1"}),yr.push({key:"PaintType",value:"1"}),yr.push({key:"TilingType",value:"1"}),yr.push({key:"BBox",value:"["+wn.boundingBox.map(pn).join(" ")+"]"}),yr.push({key:"XStep",value:pn(wn.xStep)}),yr.push({key:"YStep",value:pn(wn.yStep)}),yr.push({key:"Resources",value:er+" 0 R"}),wn.matrix&&yr.push({key:"Matrix",value:"["+wn.matrix.toString()+"]"}),gr({data:wn.stream,additionalKeyValues:yr,objectId:wn.objectNumber}),nr("endobj")},gs=function(wn){for(var Fn in wn.objectNumber=ws(),nr("<<"),wn)switch(Fn){case"opacity":nr("/ca "+gn(wn[Fn]));break;case"stroke-opacity":nr("/CA "+gn(wn[Fn]))}nr(">>"),nr("endobj")},Hi=function(wn){xs(wn.resourcesOid,!0),nr("<<"),nr("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var Fn in nr("/Font <<"),Ur)Ur.hasOwnProperty(Fn)&&(Oe===!1||Oe===!0&&Ce.hasOwnProperty(Fn))&&nr("/"+Fn+" "+Ur[Fn].objectNumber+" 0 R");nr(">>")}(),function(){if(Object.keys(vi).length>0){for(var Fn in nr("/Shading <<"),vi)vi.hasOwnProperty(Fn)&&vi[Fn]instanceof M&&vi[Fn].objectNumber>=0&&nr("/"+Fn+" "+vi[Fn].objectNumber+" 0 R");oi.publish("putShadingPatternDict"),nr(">>")}}(),function(Fn){if(Object.keys(vi).length>0){for(var er in nr("/Pattern <<"),vi)vi.hasOwnProperty(er)&&vi[er]instanceof Be.TilingPattern&&vi[er].objectNumber>=0&&vi[er].objectNumber<Fn&&nr("/"+er+" "+vi[er].objectNumber+" 0 R");oi.publish("putTilingPatternDict"),nr(">>")}}(wn.objectOid),function(){if(Object.keys(ui).length>0){var Fn;for(Fn in nr("/ExtGState <<"),ui)ui.hasOwnProperty(Fn)&&ui[Fn].objectNumber>=0&&nr("/"+Fn+" "+ui[Fn].objectNumber+" 0 R");oi.publish("putGStateDict"),nr(">>")}}(),function(){for(var Fn in nr("/XObject <<"),Ns)Ns.hasOwnProperty(Fn)&&Ns[Fn].objectNumber>=0&&nr("/"+Fn+" "+Ns[Fn].objectNumber+" 0 R");oi.publish("putXobjectDict"),nr(">>")}(),nr(">>"),nr("endobj")},Vs=function(wn){Pi[wn.fontName]=Pi[wn.fontName]||{},Pi[wn.fontName][wn.fontStyle]=wn.id},Or=function(wn,Fn,er,lr,yr){var $r={id:"F"+(Object.keys(Ur).length+1).toString(10),postScriptName:wn,fontName:Fn,fontStyle:er,encoding:lr,isStandardFont:yr||!1,metadata:{}};return oi.publish("addFont",{font:$r,instance:this}),Ur[$r.id]=$r,Vs($r),$r.id},Fi=Be.__private__.pdfEscape=Be.pdfEscape=function(wn,Fn){return function(er,lr){var yr,$r,Wr,gi,wi,$i,Qi,ys,qs;if(Wr=(lr=lr||{}).sourceEncoding||"Unicode",wi=lr.outputEncoding,(lr.autoencode||wi)&&Ur[Gr].metadata&&Ur[Gr].metadata[Wr]&&Ur[Gr].metadata[Wr].encoding&&(gi=Ur[Gr].metadata[Wr].encoding,!wi&&Ur[Gr].encoding&&(wi=Ur[Gr].encoding),!wi&&gi.codePages&&(wi=gi.codePages[0]),typeof wi=="string"&&(wi=gi[wi]),wi)){for(Qi=!1,$i=[],yr=0,$r=er.length;yr<$r;yr++)(ys=wi[er.charCodeAt(yr)])?$i.push(String.fromCharCode(ys)):$i.push(er[yr]),$i[yr].charCodeAt(0)>>8&&(Qi=!0);er=$i.join("")}for(yr=er.length;Qi===void 0&&yr!==0;)er.charCodeAt(yr-1)>>8&&(Qi=!0),yr--;if(!Qi)return er;for($i=lr.noBOM?[]:[254,255],yr=0,$r=er.length;yr<$r;yr++){if((qs=(ys=er.charCodeAt(yr))>>8)>>8)throw new Error("Character at position "+yr+" of string '"+er+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");$i.push(qs),$i.push(ys-(qs<<8))}return String.fromCharCode.apply(void 0,$i)}(wn,Fn).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},rs=Be.__private__.beginPage=function(wn){jr[++ns]=[],ni[ns]={objId:0,contentsObjId:0,userUnit:Number(Me),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(wn[0]),topRightY:Number(wn[1])}},Ea(ns),xr(jr[In])},go=function(wn,Fn){var er,lr,yr;switch(t=Fn||t,typeof wn=="string"&&(er=Ge(wn.toLowerCase()),Array.isArray(er)&&(lr=er[0],yr=er[1])),Array.isArray(wn)&&(lr=wn[0]*ii,yr=wn[1]*ii),isNaN(lr)&&(lr=Ee[0],yr=Ee[1]),(lr>14400||yr>14400)&&(o.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),lr=Math.min(14400,lr),yr=Math.min(14400,yr)),Ee=[lr,yr],t.substr(0,1)){case"l":yr>lr&&(Ee=[yr,lr]);break;case"p":lr>yr&&(Ee=[yr,lr])}rs(Ee),Xo(qo),nr(zn),li!==0&&nr(li+" J"),es!==0&&nr(es+" j"),oi.publish("addPage",{pageNumber:ns})},Uo=function(wn){wn>0&&wn<=ns&&(jr.splice(wn,1),ni.splice(wn,1),ns--,In>ns&&(In=ns),this.setPage(In))},Ea=function(wn){wn>0&&wn<=ns&&(In=wn)},Po=Be.__private__.getNumberOfPages=Be.getNumberOfPages=function(){return jr.length-1},dl=function(wn,Fn,er){var lr,yr=void 0;return er=er||{},wn=wn!==void 0?wn:Ur[Gr].fontName,Fn=Fn!==void 0?Fn:Ur[Gr].fontStyle,lr=wn.toLowerCase(),Pi[lr]!==void 0&&Pi[lr][Fn]!==void 0?yr=Pi[lr][Fn]:Pi[wn]!==void 0&&Pi[wn][Fn]!==void 0?yr=Pi[wn][Fn]:er.disableWarning===!1&&o.warn("Unable to look up font label for font '"+wn+"', '"+Fn+"'. Refer to getFontList() for available fonts."),yr||er.noFallback||(yr=Pi.times[Fn])==null&&(yr=Pi.times.normal),yr},_s=Be.__private__.putInfo=function(){var wn=ws(),Fn=function(lr){return lr};for(var er in $e!==null&&(Fn=Ts.encryptor(wn,0)),nr("<<"),nr("/Producer ("+Fi(Fn("jsPDF "+E.version))+")"),Xr)Xr.hasOwnProperty(er)&&Xr[er]&&nr("/"+er.substr(0,1).toUpperCase()+er.substr(1)+" ("+Fi(Fn(Xr[er]))+")");nr("/CreationDate ("+Fi(Fn(Ln))+")"),nr(">>"),nr("endobj")},qa=Be.__private__.putCatalog=function(wn){var Fn=(wn=wn||{}).rootDictionaryObjId||ta;switch(ws(),nr("<<"),nr("/Type /Catalog"),nr("/Pages "+Fn+" 0 R"),di||(di="fullwidth"),di){case"fullwidth":nr("/OpenAction [3 0 R /FitH null]");break;case"fullheight":nr("/OpenAction [3 0 R /FitV null]");break;case"fullpage":nr("/OpenAction [3 0 R /Fit]");break;case"original":nr("/OpenAction [3 0 R /XYZ null null 1]");break;default:var er=""+di;er.substr(er.length-1)==="%"&&(di=parseInt(di)/100),typeof di=="number"&&nr("/OpenAction [3 0 R /XYZ null null "+gn(di)+"]")}switch(si||(si="continuous"),si){case"continuous":nr("/PageLayout /OneColumn");break;case"single":nr("/PageLayout /SinglePage");break;case"two":case"twoleft":nr("/PageLayout /TwoColumnLeft");break;case"tworight":nr("/PageLayout /TwoColumnRight")}pi&&nr("/PageMode /"+pi),oi.publish("putCatalog"),nr(">>"),nr("endobj")},zs=Be.__private__.putTrailer=function(){nr("trailer"),nr("<<"),nr("/Size "+(rr+1)),nr("/Root "+rr+" 0 R"),nr("/Info "+(rr-1)+" 0 R"),$e!==null&&nr("/Encrypt "+Ts.oid+" 0 R"),nr("/ID [ <"+Cn+"> <"+Cn+"> ]"),nr(">>")},hl=Be.__private__.putHeader=function(){nr("%PDF-"+Ue),nr("%ºß¬à")},Wa=Be.__private__.putXRef=function(){var wn="0000000000";nr("xref"),nr("0 "+(rr+1)),nr("0000000000 65535 f ");for(var Fn=1;Fn<=rr;Fn++)typeof or[Fn]=="function"?nr((wn+or[Fn]()).slice(-10)+" 00000 n "):or[Fn]!==void 0?nr((wn+or[Fn]).slice(-10)+" 00000 n "):nr("0000000000 00000 n ")},na=Be.__private__.buildDocument=function(){var wn;rr=0,mr=0,pr=[],or=[],Er=[],ta=Cs(),oo=Cs(),xr(pr),oi.publish("buildDocument"),hl(),Cr(),function(){oi.publish("putAdditionalObjects");for(var er=0;er<Er.length;er++){var lr=Er[er];xs(lr.objId,!0),nr(lr.content),nr("endobj")}oi.publish("postPutAdditionalObjects")}(),wn=[],function(){for(var er in Ur)Ur.hasOwnProperty(er)&&(Oe===!1||Oe===!0&&Ce.hasOwnProperty(er))&&Jr(Ur[er])}(),function(){var er;for(er in ui)ui.hasOwnProperty(er)&&gs(ui[er])}(),function(){for(var er in Ns)Ns.hasOwnProperty(er)&&_i(Ns[er])}(),function(er){var lr;for(lr in vi)vi.hasOwnProperty(lr)&&(vi[lr]instanceof M?fi(vi[lr]):vi[lr]instanceof q&&Ui(vi[lr],er))}(wn),oi.publish("putResources"),wn.forEach(Hi),Hi({resourcesOid:oo,objectOid:Number.MAX_SAFE_INTEGER}),oi.publish("postPutResources"),$e!==null&&(Ts.oid=ws(),nr("<<"),nr("/Filter /Standard"),nr("/V "+Ts.v),nr("/R "+Ts.r),nr("/U <"+Ts.toHexString(Ts.U)+">"),nr("/O <"+Ts.toHexString(Ts.O)+">"),nr("/P "+Ts.P),nr(">>"),nr("endobj")),_s(),qa();var Fn=mr;return Wa(),zs(),nr("startxref"),nr(""+Fn),nr("%%EOF"),xr(jr[In]),pr.join(`
`)},ra=Be.__private__.getBlob=function(wn){return new Blob([Ti(wn)],{type:"application/pdf"})},ao=Be.output=Be.__private__.output=(Zs=function(wn,Fn){switch(typeof(Fn=Fn||{})=="string"?Fn={filename:Fn}:Fn.filename=Fn.filename||"generated.pdf",wn){case void 0:return na();case"save":Be.save(Fn.filename);break;case"arraybuffer":return Ti(na());case"blob":return ra(na());case"bloburi":case"bloburl":if(i.URL!==void 0&&typeof i.URL.createObjectURL=="function")return i.URL&&i.URL.createObjectURL(ra(na()))||void 0;o.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var er="",lr=na();try{er=d(lr)}catch{er=d(unescape(encodeURIComponent(lr)))}return"data:application/pdf;filename="+Fn.filename+";base64,"+er;case"pdfobjectnewwindow":if(Object.prototype.toString.call(i)==="[object Window]"){var yr="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",$r=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Fn.pdfObjectUrl&&(yr=Fn.pdfObjectUrl,$r="");var Wr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+yr+'"'+$r+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Fn)+");<\/script></body></html>",gi=i.open();return gi!==null&&gi.document.write(Wr),gi}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(i)==="[object Window]"){var wi='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Fn.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Fn.filename+'" width="500px" height="400px" /></body></html>',$i=i.open();if($i!==null){$i.document.write(wi);var Qi=this;$i.document.documentElement.querySelector("#pdfViewer").onload=function(){$i.document.title=Fn.filename,$i.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Qi.output("bloburl"))}}return $i}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(i)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ys='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Fn)+'"></iframe></body></html>',qs=i.open();if(qs!==null&&(qs.document.write(ys),qs.document.title=Fn.filename),qs||typeof safari>"u")return qs;break;case"datauri":case"dataurl":return i.document.location.href=this.output("datauristring",Fn);default:return null}},Zs.foo=function(){try{return Zs.apply(this,arguments)}catch(er){var wn=er.stack||"";~wn.indexOf(" at ")&&(wn=wn.split(" at ")[1]);var Fn="Error in function "+wn.split(`
`)[0].split("<")[0]+": "+er.message;if(!i.console)throw new Error(Fn);i.console.error(Fn,er),i.alert&&alert(Fn)}},Zs.foo.bar=Zs,Zs.foo),Va=function(wn){return Array.isArray(Di)===!0&&Di.indexOf(wn)>-1};switch(r){case"pt":ii=1;break;case"mm":ii=72/25.4;break;case"cm":ii=72/2.54;break;case"in":ii=72;break;case"px":ii=Va("px_scaling")==1?.75:96/72;break;case"pc":case"em":ii=12;break;case"ex":ii=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);ii=r}var Ts=null;$n(),Un();var Io=Be.__private__.getPageInfo=Be.getPageInfo=function(wn){if(isNaN(wn)||wn%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ni[wn].objId,pageNumber:wn,pageContext:ni[wn]}},Ha=Be.__private__.getPageInfoByObjId=function(wn){if(isNaN(wn)||wn%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Fn in ni)if(ni[Fn].objId===wn)break;return Io(Fn)},ja=Be.__private__.getCurrentPageInfo=Be.getCurrentPageInfo=function(){return{objId:ni[In].objId,pageNumber:In,pageContext:ni[In]}};Be.addPage=function(){return go.apply(this,arguments),this},Be.setPage=function(){return Ea.apply(this,arguments),xr.call(this,jr[In]),this},Be.insertPage=function(wn){return this.addPage(),this.movePage(In,wn),this},Be.movePage=function(wn,Fn){var er,lr;if(wn>Fn){er=jr[wn],lr=ni[wn];for(var yr=wn;yr>Fn;yr--)jr[yr]=jr[yr-1],ni[yr]=ni[yr-1];jr[Fn]=er,ni[Fn]=lr,this.setPage(Fn)}else if(wn<Fn){er=jr[wn],lr=ni[wn];for(var $r=wn;$r<Fn;$r++)jr[$r]=jr[$r+1],ni[$r]=ni[$r+1];jr[Fn]=er,ni[Fn]=lr,this.setPage(Fn)}return this},Be.deletePage=function(){return Uo.apply(this,arguments),this},Be.__private__.text=Be.text=function(wn,Fn,er,lr,yr){var $r,Wr,gi,wi,$i,Qi,ys,qs,Xs,Es=(lr=lr||{}).scope||this;if(typeof wn=="number"&&typeof Fn=="number"&&(typeof er=="string"||Array.isArray(er))){var uo=er;er=Fn,Fn=wn,wn=uo}if(arguments[3]instanceof ki==0?(gi=arguments[4],wi=arguments[5],_typeof(ys=arguments[3])==="object"&&ys!==null||(typeof gi=="string"&&(wi=gi,gi=null),typeof ys=="string"&&(wi=ys,ys=null),typeof ys=="number"&&(gi=ys,ys=null),lr={flags:ys,angle:gi,align:wi})):(un("The transform parameter of text() with a Matrix value"),Xs=yr),isNaN(Fn)||isNaN(er)||wn==null)throw new Error("Invalid arguments passed to jsPDF.text");if(wn.length===0)return Es;var Ls,Co="",Ka=typeof lr.lineHeightFactor=="number"?lr.lineHeightFactor:ko,nl=Es.internal.scaleFactor;function Xl(Ws){return Ws=Ws.split("	").join(Array(lr.TabLen||9).join(" ")),Fi(Ws,ys)}function Sl(Ws){for(var Hs,bo=Ws.concat(),vo=[],Vo=bo.length;Vo--;)typeof(Hs=bo.shift())=="string"?vo.push(Hs):Array.isArray(Ws)&&(Hs.length===1||Hs[1]===void 0&&Hs[2]===void 0)?vo.push(Hs[0]):vo.push([Hs[0],Hs[1],Hs[2]]);return vo}function yo(Ws,Hs){var bo;if(typeof Ws=="string")bo=Hs(Ws)[0];else if(Array.isArray(Ws)){for(var vo,Vo,gl=Ws.concat(),il=[],fu=gl.length;fu--;)typeof(vo=gl.shift())=="string"?il.push(Hs(vo)[0]):Array.isArray(vo)&&typeof vo[0]=="string"&&(Vo=Hs(vo[0],vo[1],vo[2]),il.push([Vo[0],Vo[1],Vo[2]]));bo=il}return bo}var Sa=!1,jl=!0;if(typeof wn=="string")Sa=!0;else if(Array.isArray(wn)){var pa=wn.concat();Wr=[];for(var Qe,An=pa.length;An--;)(typeof(Qe=pa.shift())!="string"||Array.isArray(Qe)&&typeof Qe[0]!="string")&&(jl=!1);Sa=jl}if(Sa===!1)throw new Error('Type of text must be string or Array. "'+wn+'" is not recognized.');typeof wn=="string"&&(wn=wn.match(/[\r?\n]/)?wn.split(/\r\n|\r|\n/g):[wn]);var Nn=qr/Es.internal.scaleFactor,Yn=Nn*(Ka-1);switch(lr.baseline){case"bottom":er-=Yn;break;case"top":er+=Nn-Yn;break;case"hanging":er+=Nn-2*Yn;break;case"middle":er+=Nn/2-Yn}if((Qi=lr.maxWidth||0)>0&&(typeof wn=="string"?wn=Es.splitTextToSize(wn,Qi):Object.prototype.toString.call(wn)==="[object Array]"&&(wn=wn.reduce(function(Ws,Hs){return Ws.concat(Es.splitTextToSize(Hs,Qi))},[]))),$r={text:wn,x:Fn,y:er,options:lr,mutex:{pdfEscape:Fi,activeFontKey:Gr,fonts:Ur,activeFontSize:qr}},oi.publish("preProcessText",$r),wn=$r.text,gi=(lr=$r.options).angle,Xs instanceof ki==0&&gi&&typeof gi=="number"){gi*=Math.PI/180,lr.rotationDirection===0&&(gi=-gi),Ze===Je&&(gi=-gi);var vr=Math.cos(gi),Mr=Math.sin(gi);Xs=new ki(vr,Mr,-Mr,vr,0,0)}else gi&&gi instanceof ki&&(Xs=gi);Ze!==Je||Xs||(Xs=So),($i=lr.charSpace||kr)!==void 0&&(Co+=pn(En($i))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(qs=lr.horizontalScale)!==void 0&&(Co+=pn(100*qs)+` Tz
`),lr.lang;var ei=-1,As=lr.renderingMode!==void 0?lr.renderingMode:lr.stroke,eo=Es.internal.getCurrentPageInfo().pageContext;switch(As){case 0:case!1:case"fill":ei=0;break;case 1:case!0:case"stroke":ei=1;break;case 2:case"fillThenStroke":ei=2;break;case 3:case"invisible":ei=3;break;case 4:case"fillAndAddForClipping":ei=4;break;case 5:case"strokeAndAddPathForClipping":ei=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ei=6;break;case 7:case"addToPathForClipping":ei=7}var us=eo.usedRenderingMode!==void 0?eo.usedRenderingMode:-1;ei!==-1?Co+=ei+` Tr
`:us!==-1&&(Co+=`0 Tr
`),ei!==-1&&(eo.usedRenderingMode=ei),wi=lr.align||"left";var fs,Ss=qr*Ka,sa=Es.internal.pageSize.getWidth(),Qo=Ur[Gr];$i=lr.charSpace||kr,Qi=lr.maxWidth||0,ys=Object.assign({autoencode:!0,noBOM:!0},lr.flags);var Pa=[],rl=function(Ws){return Es.getStringUnitWidth(Ws,{font:Qo,charSpace:$i,fontSize:qr,doKerning:!1})*qr/nl};if(Object.prototype.toString.call(wn)==="[object Array]"){var ma;Wr=Sl(wn),wi!=="left"&&(fs=Wr.map(rl));var ga,$l=0;if(wi==="right"){Fn-=fs[0],wn=[],An=Wr.length;for(var ya=0;ya<An;ya++)ya===0?(ga=Ks(Fn),ma=Aa(er)):(ga=En($l-fs[ya]),ma=-Ss),wn.push([Wr[ya],ga,ma]),$l=fs[ya]}else if(wi==="center"){Fn-=fs[0]/2,wn=[],An=Wr.length;for(var Bl=0;Bl<An;Bl++)Bl===0?(ga=Ks(Fn),ma=Aa(er)):(ga=En(($l-fs[Bl])/2),ma=-Ss),wn.push([Wr[Bl],ga,ma]),$l=fs[Bl]}else if(wi==="left"){wn=[],An=Wr.length;for(var Ou=0;Ou<An;Ou++)wn.push(Wr[Ou])}else if(wi==="justify"&&Qo.encoding==="Identity-H"){wn=[],An=Wr.length,Qi=Qi!==0?Qi:sa;for(var Ul=0,co=0;co<An;co++)if(ma=co===0?Aa(er):-Ss,ga=co===0?Ks(Fn):Ul,co<An-1){var Ju=En((Qi-fs[co])/(Wr[co].split(" ").length-1)),Ia=Wr[co].split(" ");wn.push([Ia[0]+" ",ga,ma]),Ul=0;for(var Ra=1;Ra<Ia.length;Ra++){var cu=(rl(Ia[Ra-1]+" "+Ia[Ra])-rl(Ia[Ra]))*nl+Ju;Ra==Ia.length-1?wn.push([Ia[Ra],cu,0]):wn.push([Ia[Ra]+" ",cu,0]),Ul-=cu}}else wn.push([Wr[co],ga,ma]);wn.push(["",Ul,0])}else{if(wi!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(wn=[],An=Wr.length,Qi=Qi!==0?Qi:sa,co=0;co<An;co++)ma=co===0?Aa(er):-Ss,ga=co===0?Ks(Fn):0,co<An-1?Pa.push(pn(En((Qi-fs[co])/(Wr[co].split(" ").length-1)))):Pa.push(0),wn.push([Wr[co],ga,ma])}}(typeof lr.R2L=="boolean"?lr.R2L:mi)===!0&&(wn=yo(wn,function(Ws,Hs,bo){return[Ws.split("").reverse().join(""),Hs,bo]})),$r={text:wn,x:Fn,y:er,options:lr,mutex:{pdfEscape:Fi,activeFontKey:Gr,fonts:Ur,activeFontSize:qr}},oi.publish("postProcessText",$r),wn=$r.text,Ls=$r.mutex.isHex||!1;var zl=Ur[Gr].encoding;zl!=="WinAnsiEncoding"&&zl!=="StandardEncoding"||(wn=yo(wn,function(Ws,Hs,bo){return[Xl(Ws),Hs,bo]})),Wr=Sl(wn),wn=[];for(var du,Ql,Pl,Il=Array.isArray(Wr[0])?1:0,pl="",hu=function(Ws,Hs,bo){var vo="";return bo instanceof ki?(bo=typeof lr.angle=="number"?ms(bo,new ki(1,0,0,1,Ws,Hs)):ms(new ki(1,0,0,1,Ws,Hs),bo),Ze===Je&&(bo=ms(new ki(1,0,0,-1,0,0),bo)),vo=bo.join(" ")+` Tm
`):vo=pn(Ws)+" "+pn(Hs)+` Td
`,vo},ka=0;ka<Wr.length;ka++){switch(pl="",Il){case 1:Pl=(Ls?"<":"(")+Wr[ka][0]+(Ls?">":")"),du=parseFloat(Wr[ka][1]),Ql=parseFloat(Wr[ka][2]);break;case 0:Pl=(Ls?"<":"(")+Wr[ka]+(Ls?">":")"),du=Ks(Fn),Ql=Aa(er)}Pa!==void 0&&Pa[ka]!==void 0&&(pl=Pa[ka]+` Tw
`),ka===0?wn.push(pl+hu(du,Ql,Xs)+Pl):Il===0?wn.push(pl+Pl):Il===1&&wn.push(pl+hu(du,Ql,Xs)+Pl)}wn=Il===0?wn.join(` Tj
T* `):wn.join(` Tj
`),wn+=` Tj
`;var ml=`BT
/`;return ml+=Gr+" "+qr+` Tf
`,ml+=pn(qr*Ka)+` TL
`,ml+=ar+`
`,ml+=Co,ml+=wn,nr(ml+="ET"),Ce[Gr]=!0,Es};var ha=Be.__private__.clip=Be.clip=function(wn){return nr(wn==="evenodd"?"W*":"W"),this};Be.clipEvenOdd=function(){return ha("evenodd")},Be.__private__.discardPath=Be.discardPath=function(){return nr("n"),this};var ls=Be.__private__.isValidStyle=function(wn){var Fn=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(wn)!==-1&&(Fn=!0),Fn};Be.__private__.setDefaultPathOperation=Be.setDefaultPathOperation=function(wn){return ls(wn)&&(De=wn),this};var Ta=Be.__private__.getStyle=Be.getStyle=function(wn){var Fn=De;switch(wn){case"D":case"S":Fn="S";break;case"F":Fn="f";break;case"FD":case"DF":Fn="B";break;case"f":case"f*":case"B":case"B*":Fn=wn}return Fn},ss=Be.close=function(){return nr("h"),this};Be.stroke=function(){return nr("S"),this},Be.fill=function(wn){return zo("f",wn),this},Be.fillEvenOdd=function(wn){return zo("f*",wn),this},Be.fillStroke=function(wn){return zo("B",wn),this},Be.fillStrokeEvenOdd=function(wn){return zo("B*",wn),this};var zo=function(wn,Fn){_typeof(Fn)==="object"?Zi(Fn,wn):nr(wn)},Yi=function(wn){wn===null||Ze===Je&&wn===void 0||(wn=Ta(wn),nr(wn))};function tl(wn,Fn,er,lr,yr){var $r=new q(Fn||this.boundingBox,er||this.xStep,lr||this.yStep,this.gState,yr||this.matrix);$r.stream=this.stream;var Wr=wn+"$$"+this.cloneIndex+++"$$";return Ms(Wr,$r),$r}var Zi=function(wn,Fn){var er=Ri[wn.key],lr=vi[er];if(lr instanceof M)nr("q"),nr(Xi(Fn)),lr.gState&&Be.setGState(lr.gState),nr(wn.matrix.toString()+" cm"),nr("/"+er+" sh"),nr("Q");else if(lr instanceof q){var yr=new ki(1,0,0,-1,0,Ys());wn.matrix&&(yr=yr.multiply(wn.matrix||So),er=tl.call(lr,wn.key,wn.boundingBox,wn.xStep,wn.yStep,yr).id),nr("q"),nr("/Pattern cs"),nr("/"+er+" scn"),lr.gState&&Be.setGState(lr.gState),nr(Fn),nr("Q")}},Xi=function(wn){switch(wn){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ga=Be.moveTo=function(wn,Fn){return nr(pn(En(wn))+" "+pn(Pn(Fn))+" m"),this},ia=Be.lineTo=function(wn,Fn){return nr(pn(En(wn))+" "+pn(Pn(Fn))+" l"),this},Ro=Be.curveTo=function(wn,Fn,er,lr,yr,$r){return nr([pn(En(wn)),pn(Pn(Fn)),pn(En(er)),pn(Pn(lr)),pn(En(yr)),pn(Pn($r)),"c"].join(" ")),this};Be.__private__.line=Be.line=function(wn,Fn,er,lr,yr){if(isNaN(wn)||isNaN(Fn)||isNaN(er)||isNaN(lr)||!ls(yr))throw new Error("Invalid arguments passed to jsPDF.line");return Ze===Ye?this.lines([[er-wn,lr-Fn]],wn,Fn,[1,1],yr||"S"):this.lines([[er-wn,lr-Fn]],wn,Fn,[1,1]).stroke()},Be.__private__.lines=Be.lines=function(wn,Fn,er,lr,yr,$r){var Wr,gi,wi,$i,Qi,ys,qs,Xs,Es,uo,Ls,Co;if(typeof wn=="number"&&(Co=er,er=Fn,Fn=wn,wn=Co),lr=lr||[1,1],$r=$r||!1,isNaN(Fn)||isNaN(er)||!Array.isArray(wn)||!Array.isArray(lr)||!ls(yr)||typeof $r!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ga(Fn,er),Wr=lr[0],gi=lr[1],$i=wn.length,uo=Fn,Ls=er,wi=0;wi<$i;wi++)(Qi=wn[wi]).length===2?(uo=Qi[0]*Wr+uo,Ls=Qi[1]*gi+Ls,ia(uo,Ls)):(ys=Qi[0]*Wr+uo,qs=Qi[1]*gi+Ls,Xs=Qi[2]*Wr+uo,Es=Qi[3]*gi+Ls,uo=Qi[4]*Wr+uo,Ls=Qi[5]*gi+Ls,Ro(ys,qs,Xs,Es,uo,Ls));return $r&&ss(),Yi(yr),this},Be.path=function(wn){for(var Fn=0;Fn<wn.length;Fn++){var er=wn[Fn],lr=er.c;switch(er.op){case"m":Ga(lr[0],lr[1]);break;case"l":ia(lr[0],lr[1]);break;case"c":Ro.apply(this,lr);break;case"h":ss()}}return this},Be.__private__.rect=Be.rect=function(wn,Fn,er,lr,yr){if(isNaN(wn)||isNaN(Fn)||isNaN(er)||isNaN(lr)||!ls(yr))throw new Error("Invalid arguments passed to jsPDF.rect");return Ze===Ye&&(lr=-lr),nr([pn(En(wn)),pn(Pn(Fn)),pn(En(er)),pn(En(lr)),"re"].join(" ")),Yi(yr),this},Be.__private__.triangle=Be.triangle=function(wn,Fn,er,lr,yr,$r,Wr){if(isNaN(wn)||isNaN(Fn)||isNaN(er)||isNaN(lr)||isNaN(yr)||isNaN($r)||!ls(Wr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[er-wn,lr-Fn],[yr-er,$r-lr],[wn-yr,Fn-$r]],wn,Fn,[1,1],Wr,!0),this},Be.__private__.roundedRect=Be.roundedRect=function(wn,Fn,er,lr,yr,$r,Wr){if(isNaN(wn)||isNaN(Fn)||isNaN(er)||isNaN(lr)||isNaN(yr)||isNaN($r)||!ls(Wr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var gi=4/3*(Math.SQRT2-1);return yr=Math.min(yr,.5*er),$r=Math.min($r,.5*lr),this.lines([[er-2*yr,0],[yr*gi,0,yr,$r-$r*gi,yr,$r],[0,lr-2*$r],[0,$r*gi,-yr*gi,$r,-yr,$r],[2*yr-er,0],[-yr*gi,0,-yr,-$r*gi,-yr,-$r],[0,2*$r-lr],[0,-$r*gi,yr*gi,-$r,yr,-$r]],wn+yr,Fn,[1,1],Wr,!0),this},Be.__private__.ellipse=Be.ellipse=function(wn,Fn,er,lr,yr){if(isNaN(wn)||isNaN(Fn)||isNaN(er)||isNaN(lr)||!ls(yr))throw new Error("Invalid arguments passed to jsPDF.ellipse");var $r=4/3*(Math.SQRT2-1)*er,Wr=4/3*(Math.SQRT2-1)*lr;return Ga(wn+er,Fn),Ro(wn+er,Fn-Wr,wn+$r,Fn-lr,wn,Fn-lr),Ro(wn-$r,Fn-lr,wn-er,Fn-Wr,wn-er,Fn),Ro(wn-er,Fn+Wr,wn-$r,Fn+lr,wn,Fn+lr),Ro(wn+$r,Fn+lr,wn+er,Fn+Wr,wn+er,Fn),Yi(yr),this},Be.__private__.circle=Be.circle=function(wn,Fn,er,lr){if(isNaN(wn)||isNaN(Fn)||isNaN(er)||!ls(lr))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(wn,Fn,er,er,lr)},Be.setFont=function(wn,Fn,er){return er&&(Fn=mn(Fn,er)),Gr=dl(wn,Fn,{disableWarning:!1}),this};var lo=Be.__private__.getFont=Be.getFont=function(){return Ur[dl.apply(Be,arguments)]};Be.__private__.getFontList=Be.getFontList=function(){var wn,Fn,er={};for(wn in Pi)if(Pi.hasOwnProperty(wn))for(Fn in er[wn]=[],Pi[wn])Pi[wn].hasOwnProperty(Fn)&&er[wn].push(Fn);return er},Be.addFont=function(wn,Fn,er,lr,yr){var $r=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&$r.indexOf(arguments[3])!==-1?yr=arguments[3]:arguments[3]&&$r.indexOf(arguments[3])==-1&&(er=mn(er,lr)),Or.call(this,wn,Fn,er,yr=yr||"Identity-H")};var ko,qo=n.lineWidth||.200025,Vi=Be.__private__.getLineWidth=Be.getLineWidth=function(){return qo},Xo=Be.__private__.setLineWidth=Be.setLineWidth=function(wn){return qo=wn,nr(pn(En(wn))+" w"),this};Be.__private__.setLineDash=E.API.setLineDash=E.API.setLineDashPattern=function(wn,Fn){if(wn=wn||[],Fn=Fn||0,isNaN(Fn)||!Array.isArray(wn))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return wn=wn.map(function(er){return pn(En(er))}).join(" "),Fn=pn(En(Fn)),nr("["+wn+"] "+Fn+" d"),this};var fa=Be.__private__.getLineHeight=Be.getLineHeight=function(){return qr*ko};Be.__private__.getLineHeight=Be.getLineHeight=function(){return qr*ko};var Vl=Be.__private__.setLineHeightFactor=Be.setLineHeightFactor=function(wn){return typeof(wn=wn||1.15)=="number"&&(ko=wn),this},Tl=Be.__private__.getLineHeightFactor=Be.getLineHeightFactor=function(){return ko};Vl(n.lineHeight);var Ks=Be.__private__.getHorizontalCoordinate=function(wn){return En(wn)},Aa=Be.__private__.getVerticalCoordinate=function(wn){return Ze===Je?wn:ni[In].mediaBox.topRightY-ni[In].mediaBox.bottomLeftY-En(wn)},Al=Be.__private__.getHorizontalCoordinateString=Be.getHorizontalCoordinateString=function(wn){return pn(Ks(wn))},Mn=Be.__private__.getVerticalCoordinateString=Be.getVerticalCoordinateString=function(wn){return pn(Aa(wn))},zn=n.strokeColor||"0 G";Be.__private__.getStrokeColor=Be.getDrawColor=function(){return Hn(zn)},Be.__private__.setStrokeColor=Be.setDrawColor=function(wn,Fn,er,lr){return zn=ir({ch1:wn,ch2:Fn,ch3:er,ch4:lr,pdfColorType:"draw",precision:2}),nr(zn),this};var Jn=n.fillColor||"0 g";Be.__private__.getFillColor=Be.getFillColor=function(){return Hn(Jn)},Be.__private__.setFillColor=Be.setFillColor=function(wn,Fn,er,lr){return Jn=ir({ch1:wn,ch2:Fn,ch3:er,ch4:lr,pdfColorType:"fill",precision:2}),nr(Jn),this};var ar=n.textColor||"0 g",br=Be.__private__.getTextColor=Be.getTextColor=function(){return Hn(ar)};Be.__private__.setTextColor=Be.setTextColor=function(wn,Fn,er,lr){return ar=ir({ch1:wn,ch2:Fn,ch3:er,ch4:lr,pdfColorType:"text",precision:3}),this};var kr=n.charSpace,ti=Be.__private__.getCharSpace=Be.getCharSpace=function(){return parseFloat(kr||0)};Be.__private__.setCharSpace=Be.setCharSpace=function(wn){if(isNaN(wn))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return kr=wn,this};var li=0;Be.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},Be.__private__.setLineCap=Be.setLineCap=function(wn){var Fn=Be.CapJoinStyles[wn];if(Fn===void 0)throw new Error("Line cap style of '"+wn+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return li=Fn,nr(Fn+" J"),this};var es=0;Be.__private__.setLineJoin=Be.setLineJoin=function(wn){var Fn=Be.CapJoinStyles[wn];if(Fn===void 0)throw new Error("Line join style of '"+wn+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return es=Fn,nr(Fn+" j"),this},Be.__private__.setLineMiterLimit=Be.__private__.setMiterLimit=Be.setLineMiterLimit=Be.setMiterLimit=function(wn){if(wn=wn||0,isNaN(wn))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return nr(pn(En(wn))+" M"),this},Be.GState=O,Be.setGState=function(wn){(wn=typeof wn=="string"?ui[vs[wn]]:Gi(null,wn)).equals(ds)||(nr("/"+wn.id+" gs"),ds=wn)};var Gi=function(wn,Fn){if(!wn||!vs[wn]){var er=!1;for(var lr in ui)if(ui.hasOwnProperty(lr)&&ui[lr].equals(Fn)){er=!0;break}if(er)Fn=ui[lr];else{var yr="GS"+(Object.keys(ui).length+1).toString(10);ui[yr]=Fn,Fn.id=yr}return wn&&(vs[wn]=Fn.id),oi.publish("addGState",Fn),Fn}};Be.addGState=function(wn,Fn){return Gi(wn,Fn),this},Be.saveGraphicsState=function(){return nr("q"),Bi.push({key:Gr,size:qr,color:ar}),this},Be.restoreGraphicsState=function(){nr("Q");var wn=Bi.pop();return Gr=wn.key,qr=wn.size,ar=wn.color,ds=null,this},Be.setCurrentTransformationMatrix=function(wn){return nr(wn.toString()+" cm"),this},Be.comment=function(wn){return nr("#"+wn),this};var hs=function(wn,Fn){var er=wn||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return er},set:function($r){isNaN($r)||(er=parseFloat($r))}});var lr=Fn||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return lr},set:function($r){isNaN($r)||(lr=parseFloat($r))}});var yr="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return yr},set:function($r){yr=$r.toString()}}),this},_o=function(wn,Fn,er,lr){hs.call(this,wn,Fn),this.type="rect";var yr=er||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return yr},set:function(Wr){isNaN(Wr)||(yr=parseFloat(Wr))}});var $r=lr||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return $r},set:function(Wr){isNaN(Wr)||($r=parseFloat(Wr))}}),this},io=function(){this.page=ns,this.currentPage=In,this.pages=jr.slice(0),this.pagesContext=ni.slice(0),this.x=hi,this.y=Mi,this.matrix=ji,this.width=os(In),this.height=Ys(In),this.outputDestination=Hr,this.id="",this.objectNumber=-1};io.prototype.restore=function(){ns=this.page,In=this.currentPage,ni=this.pagesContext,jr=this.pages,hi=this.x,Mi=this.y,ji=this.matrix,Do(In,this.width),Fo(In,this.height),Hr=this.outputDestination};var Rr=function(wn,Fn,er,lr,yr){Js.push(new io),ns=In=0,jr=[],hi=wn,Mi=Fn,ji=yr,rs([er,lr])};for(var Ki in Be.beginFormObject=function(wn,Fn,er,lr,yr){return Rr(wn,Fn,er,lr,yr),this},Be.endFormObject=function(wn){return function(Fn){if(mo[Fn])Js.pop().restore();else{var er=new io,lr="Xo"+(Object.keys(Ns).length+1).toString(10);er.id=lr,mo[Fn]=lr,Ns[lr]=er,oi.publish("addFormObject",er),Js.pop().restore()}}(wn),this},Be.doFormObject=function(wn,Fn){var er=Ns[mo[wn]];return nr("q"),nr(Fn.toString()+" cm"),nr("/"+er.id+" Do"),nr("Q"),this},Be.getFormObject=function(wn){var Fn=Ns[mo[wn]];return{x:Fn.x,y:Fn.y,width:Fn.width,height:Fn.height,matrix:Fn.matrix}},Be.save=function(wn,Fn){return wn=wn||"generated.pdf",(Fn=Fn||{}).returnPromise=Fn.returnPromise||!1,Fn.returnPromise===!1?(l(ra(na()),wn),typeof l.unload=="function"&&i.setTimeout&&setTimeout(l.unload,911),this):new Promise(function(er,lr){try{var yr=l(ra(na()),wn);typeof l.unload=="function"&&i.setTimeout&&setTimeout(l.unload,911),er(yr)}catch($r){lr($r.message)}})},E.API)E.API.hasOwnProperty(Ki)&&(Ki==="events"&&E.API.events.length?function(wn,Fn){var er,lr,yr;for(yr=Fn.length-1;yr!==-1;yr--)er=Fn[yr][0],lr=Fn[yr][1],wn.subscribe.apply(wn,[er].concat(typeof lr=="function"?[lr]:lr))}(oi,E.API.events):Be[Ki]=E.API[Ki]);var os=Be.getPageWidth=function(wn){return(ni[wn=wn||In].mediaBox.topRightX-ni[wn].mediaBox.bottomLeftX)/ii},Do=Be.setPageWidth=function(wn,Fn){ni[wn].mediaBox.topRightX=Fn*ii+ni[wn].mediaBox.bottomLeftX},Ys=Be.getPageHeight=function(wn){return(ni[wn=wn||In].mediaBox.topRightY-ni[wn].mediaBox.bottomLeftY)/ii},Fo=Be.setPageHeight=function(wn,Fn){ni[wn].mediaBox.topRightY=Fn*ii+ni[wn].mediaBox.bottomLeftY};return Be.internal={pdfEscape:Fi,getStyle:Ta,getFont:lo,getFontSize:Zr,getCharSpace:ti,getTextColor:br,getLineHeight:fa,getLineHeightFactor:Tl,getLineWidth:Vi,write:Oi,getHorizontalCoordinate:Ks,getVerticalCoordinate:Aa,getCoordinateString:Al,getVerticalCoordinateString:Mn,collections:{},newObject:ws,newAdditionalObject:Yo,newObjectDeferred:Cs,newObjectDeferredBegin:xs,getFilters:ur,putStream:gr,events:oi,scaleFactor:ii,pageSize:{getWidth:function(){return os(In)},setWidth:function(wn){Do(In,wn)},getHeight:function(){return Ys(In)},setHeight:function(wn){Fo(In,wn)}},encryptionOptions:$e,encryption:Ts,getEncryptor:function(wn){return $e!==null?Ts.encryptor(wn,0):function(Fn){return Fn}},output:ao,getNumberOfPages:Po,pages:jr,out:nr,f2:gn,f3:xn,getPageInfo:Io,getPageInfoByObjId:Ha,getCurrentPageInfo:ja,getPDFVersion:We,Point:hs,Rectangle:_o,Matrix:ki,hasHotfix:Va},Object.defineProperty(Be.internal.pageSize,"width",{get:function(){return os(In)},set:function(wn){Do(In,wn)},enumerable:!0,configurable:!0}),Object.defineProperty(Be.internal.pageSize,"height",{get:function(){return Ys(In)},set:function(wn){Fo(In,wn)},enumerable:!0,configurable:!0}),(function(wn){for(var Fn=0,er=yi.length;Fn<er;Fn++){var lr=Or.call(this,wn[Fn][0],wn[Fn][1],wn[Fn][2],yi[Fn][3],!0);Oe===!1&&(Ce[lr]=!0);var yr=wn[Fn][0].split("-");Vs({id:lr,fontName:yr[0],fontStyle:yr[1]||""})}oi.publish("addFonts",{fonts:Ur,dictionary:Pi})}).call(Be,yi),Gr="F1",go(Ee,t),oi.publish("initialized"),Be}I.prototype.lsbFirstWord=function(n){return String.fromCharCode(255&n,n>>8&255,n>>16&255,n>>24&255)},I.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},I.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},I.prototype.processOwnerPassword=function(n,e){return k(S(e).substr(0,5),n)},I.prototype.encryptor=function(n,e){var t=S(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return k(t,r)}},O.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||_typeof(n)!==_typeof(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},E.API={events:[]},E.version="3.0.2";var R=E.API,D=1,T=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},z=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},U=function(n){return n.toFixed(2)},H=function(n){return n.toFixed(5)};R.__acroform__={};var W=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},V=function(n){return n*D},G=function(n){var e=new ct,t=xt.internal.getHeight(n)||0,r=xt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(U(r)),Number(U(t))],e},Y=R.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<e},J=R.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<e)},X=R.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},K=R.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return X(n,e-1)},Z=R.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Y(n,e-1)},$=R.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return J(n,e-1)},Q=R.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,Ee=n[0],Te=n[1],Re=n[2],Me=n[3],Ve={};return Ve.lowerLeft_X=t(Ee)||0,Ve.lowerLeft_Y=r(Te+Me)||0,Ve.upperRight_X=t(Ee+Re)||0,Ve.upperRight_Y=r(Te)||0,[Number(U(Ve.lowerLeft_X)),Number(U(Ve.lowerLeft_Y)),Number(U(Ve.upperRight_X)),Number(U(Ve.upperRight_Y))]},tt=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=et(n,t),Ee=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+Ee+" "+U(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var Te=G(n);return Te.scope=n.scope,Te.stream=e.join(`
`),Te}},et=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},Ee=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");Ee=n.multiline?Ee.map(function(gn){return gn.split(`
`)}):Ee.map(function(gn){return[gn]});var Te=t,Re=xt.internal.getHeight(n)||0;Re=Re<0?-Re:Re;var Me=xt.internal.getWidth(n)||0;Me=Me<0?-Me:Me;var Ve=function(gn,xn,En){if(gn+1<Ee.length){var Pn=xn+" "+Ee[gn+1][0];return nt(Pn,n,En).width<=Me-4}return!1};Te++;e:for(;Te>0;){e="",Te--;var De,$e,Oe=nt("3",n,Te).height,Ce=n.multiline?Re-Te:(Re-Oe)/2,Be=Ce+=2,Ue=0,We=0,He=0;if(Te<=0){e=`(...) Tj
`,e+="% Width of Text: "+nt(e,n,Te=12).width+", FieldWidth:"+Me+`
`;break}for(var Ge="",Ye=0,Je=0;Je<Ee.length;Je++)if(Ee.hasOwnProperty(Je)){var Ze=!1;if(Ee[Je].length!==1&&He!==Ee[Je].length-1){if((Oe+2)*(Ye+2)+2>Re)continue e;Ge+=Ee[Je][He],Ze=!0,We=Je,Je--}else{Ge=(Ge+=Ee[Je][He]+" ").substr(Ge.length-1)==" "?Ge.substr(0,Ge.length-1):Ge;var fn=parseInt(Je),yn=Ve(fn,Ge,Te),mn=Je>=Ee.length-1;if(yn&&!mn){Ge+=" ",He=0;continue}if(yn||mn){if(mn)We=fn;else if(n.multiline&&(Oe+2)*(Ye+2)+2>Re)continue e}else{if(!n.multiline||(Oe+2)*(Ye+2)+2>Re)continue e;We=fn}}for(var pn="",un=Ue;un<=We;un++){var bn=Ee[un];if(n.multiline){if(un===We){pn+=bn[He]+" ",He=(He+1)%bn.length;continue}if(un===Ue){pn+=bn[bn.length-1]+" ";continue}}pn+=bn[0]+" "}switch(pn=pn.substr(pn.length-1)==" "?pn.substr(0,pn.length-1):pn,$e=nt(pn,n,Te).width,n.textAlign){case"right":De=Me-$e-2;break;case"center":De=(Me-$e)/2;break;default:De=2}e+=U(De)+" "+U(Be)+` Td
`,e+="("+T(pn)+`) Tj
`,e+=-U(De)+` 0 Td
`,Be=-(Te+2),$e=0,Ue=Ze?We:We+1,Ye++,Ge=""}break}return r.text=e,r.fontSize=Te,r},nt=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),Ee=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:Ee}},rt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},it=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},at=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(ht.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(rt)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");D=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new lt,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var Ee in r)if(r.hasOwnProperty(Ee)){var Te=r[Ee];Te.objId=void 0,Te.hasAnnotation&&it(Te,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,Ee){var Te=!r;for(var Re in r||(Ee.internal.newObjectDeferredBegin(Ee.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),Ee.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||Ee.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(Re)){var Me=r[Re],Ve=[],De=Me.Rect;if(Me.Rect&&(Me.Rect=Q(Me.Rect,Ee)),Ee.internal.newObjectDeferredBegin(Me.objId,!0),Me.DA=xt.createDefaultAppearanceStream(Me),_typeof(Me)==="object"&&typeof Me.getKeyValueListForStream=="function"&&(Ve=Me.getKeyValueListForStream()),Me.Rect=De,Me.hasAppearanceStream&&!Me.appearanceStreamContent){var $e=tt(Me);Ve.push({key:"AP",value:"<</N "+$e+">>"}),Ee.internal.acroformPlugin.xForms.push($e)}if(Me.appearanceStreamContent){var Oe="";for(var Ce in Me.appearanceStreamContent)if(Me.appearanceStreamContent.hasOwnProperty(Ce)){var Be=Me.appearanceStreamContent[Ce];if(Oe+="/"+Ce+" ",Oe+="<<",Object.keys(Be).length>=1||Array.isArray(Be)){for(var Re in Be)if(Be.hasOwnProperty(Re)){var Ue=Be[Re];typeof Ue=="function"&&(Ue=Ue.call(Ee,Me)),Oe+="/"+Re+" "+Ue+" ",Ee.internal.acroformPlugin.xForms.indexOf(Ue)>=0||Ee.internal.acroformPlugin.xForms.push(Ue)}}else typeof(Ue=Be)=="function"&&(Ue=Ue.call(Ee,Me)),Oe+="/"+Re+" "+Ue,Ee.internal.acroformPlugin.xForms.indexOf(Ue)>=0||Ee.internal.acroformPlugin.xForms.push(Ue);Oe+=">>"}Ve.push({key:"AP",value:`<<
`+Oe+">>"})}Ee.internal.putStream({additionalKeyValues:Ve,objectId:Me.objId}),Ee.internal.out("endobj")}Te&&function(We,He){for(var Ge in We)if(We.hasOwnProperty(Ge)){var Ye=Ge,Je=We[Ge];He.internal.newObjectDeferredBegin(Je.objId,!0),_typeof(Je)==="object"&&typeof Je.putStream=="function"&&Je.putStream(),delete We[Ye]}}(Ee.internal.acroformPlugin.xForms,Ee)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},ot=R.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(Re){return Re};if(Array.isArray(n)){for(var Ee="[",Te=0;Te<n.length;Te++)switch(Te!==0&&(Ee+=" "),_typeof(n[Te])){case"boolean":case"number":case"object":Ee+=n[Te].toString();break;case"string":n[Te].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),Ee+="("+T(r(n[Te].toString()))+")"):Ee+=n[Te].toString()}return Ee+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},st=function(n,e,t){var r=function(Ee){return Ee};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),"("+T(r(n))+")"},ut=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ut.prototype.toString=function(){return this.objId+" 0 R"},ut.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},ut.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(Te){return Te!="content"&&Te!="appearanceStreamContent"&&Te!="scope"&&Te!="objId"&&Te.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],Ee=this[r];Ee&&(Array.isArray(Ee)?n.push({key:r,value:ot(Ee,this.objId,this.scope)}):Ee instanceof ut?(Ee.scope=this.scope,n.push({key:r,value:Ee.objId+" 0 R"})):typeof Ee!="function"&&n.push({key:r,value:Ee}))}return n};var ct=function(){ut.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};W(ct,ut);var lt=function(){ut.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+T(t(n))+")"}},set:function(t){n=t}})};W(lt,ut);var ht=function n(){ut.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(Ge){if(isNaN(Ge))throw new Error('Invalid value "'+Ge+'" for attribute F supplied.');e=Ge}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!K(e,3)},set:function(Ge){Ge?this.F=Z(e,3):this.F=$(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(Ge){if(isNaN(Ge))throw new Error('Invalid value "'+Ge+'" for attribute Ff supplied.');t=Ge}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(Ge){r=Ge!==void 0?Ge:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(Ge){r[0]=Ge}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(Ge){r[1]=Ge}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(Ge){r[2]=Ge}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(Ge){r[3]=Ge}});var Ee="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return Ee},set:function(Ge){switch(Ge){case"/Btn":case"/Tx":case"/Ch":case"/Sig":Ee=Ge;break;default:throw new Error('Invalid value "'+Ge+'" for attribute FT supplied.')}}});var Te=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!Te||Te.length<1){if(this instanceof yt)return;Te="FieldObject"+n.FieldNum++}var Ge=function(Ye){return Ye};return this.scope&&(Ge=this.scope.internal.getEncryptor(this.objId)),"("+T(Ge(Te))+")"},set:function(Ge){Te=Ge.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return Te},set:function(Ge){Te=Ge}});var Re="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return Re},set:function(Ge){Re=Ge}});var Me="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return Me},set:function(Ge){Me=Ge}});var Ve=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return Ve},set:function(Ge){Ve=Ge}});var De=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return De===void 0?50/D:De},set:function(Ge){De=Ge}});var $e="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return $e},set:function(Ge){$e=Ge}});var Oe="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!Oe||this instanceof yt||this instanceof Nt))return st(Oe,this.objId,this.scope)},set:function(Ge){Ge=Ge.toString(),Oe=Ge}});var Ce=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(Ce)return this instanceof mt==0?st(Ce,this.objId,this.scope):Ce},set:function(Ge){Ge=Ge.toString(),Ce=this instanceof mt==0?Ge.substr(0,1)==="("?z(Ge.substr(1,Ge.length-2)):z(Ge):Ge}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt==1?z(Ce.substr(1,Ce.length-1)):Ce},set:function(Ge){Ge=Ge.toString(),Ce=this instanceof mt==1?"/"+Ge:Ge}});var Be=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(Be)return Be},set:function(Ge){this.V=Ge}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(Be)return this instanceof mt==0?st(Be,this.objId,this.scope):Be},set:function(Ge){Ge=Ge.toString(),Be=this instanceof mt==0?Ge.substr(0,1)==="("?z(Ge.substr(1,Ge.length-2)):z(Ge):Ge}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt==1?z(Be.substr(1,Be.length-1)):Be},set:function(Ge){Ge=Ge.toString(),Be=this instanceof mt==1?"/"+Ge:Ge}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var Ue,We=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return We},set:function(Ge){Ge=!!Ge,We=Ge}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(Ue)return Ue},set:function(Ge){Ue=Ge}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,1)},set:function(Ge){Ge?this.Ff=Z(this.Ff,1):this.Ff=$(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,2)},set:function(Ge){Ge?this.Ff=Z(this.Ff,2):this.Ff=$(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,3)},set:function(Ge){Ge?this.Ff=Z(this.Ff,3):this.Ff=$(this.Ff,3)}});var He=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(He!==null)return He},set:function(Ge){if([0,1,2].indexOf(Ge)===-1)throw new Error('Invalid value "'+Ge+'" for attribute Q supplied.');He=Ge}}),Object.defineProperty(this,"textAlign",{get:function(){var Ge;switch(He){case 0:default:Ge="left";break;case 1:Ge="center";break;case 2:Ge="right"}return Ge},configurable:!0,enumerable:!0,set:function(Ge){switch(Ge){case"right":case 2:He=2;break;case"center":case 1:He=1;break;default:He=0}}})};W(ht,ut);var ft=function(){ht.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ot(e,this.objId,this.scope)},set:function(t){var r,Ee;Ee=[],typeof(r=t)=="string"&&(Ee=function(Te,Re,Me){Me||(Me=1);for(var Ve,De=[];Ve=Re.exec(Te);)De.push(Ve[Me]);return De}(r,/\((.*?)\)/g)),e=Ee}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,18)},set:function(t){t?this.Ff=Z(this.Ff,18):this.Ff=$(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Z(this.Ff,19):this.Ff=$(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,20)},set:function(t){t?(this.Ff=Z(this.Ff,20),e.sort()):this.Ff=$(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,22)},set:function(t){t?this.Ff=Z(this.Ff,22):this.Ff=$(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,23)},set:function(t){t?this.Ff=Z(this.Ff,23):this.Ff=$(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,27)},set:function(t){t?this.Ff=Z(this.Ff,27):this.Ff=$(this.Ff,27)}}),this.hasAppearanceStream=!1};W(ft,ht);var dt=function(){ft.call(this),this.fontName="helvetica",this.combo=!1};W(dt,ft);var pt=function(){dt.call(this),this.combo=!0};W(pt,dt);var gt=function(){pt.call(this),this.edit=!0};W(gt,pt);var mt=function(){ht.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,15)},set:function(t){t?this.Ff=Z(this.Ff,15):this.Ff=$(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,16)},set:function(t){t?this.Ff=Z(this.Ff,16):this.Ff=$(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,17)},set:function(t){t?this.Ff=Z(this.Ff,17):this.Ff=$(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,26)},set:function(t){t?this.Ff=Z(this.Ff,26):this.Ff=$(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(Te){return Te};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,Ee=[];for(r in Ee.push("<<"),e)Ee.push("/"+r+" ("+T(t(e[r]))+")");return Ee.push(">>"),Ee.join(`
`)}},set:function(t){_typeof(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};W(mt,ht);var vt=function(){mt.call(this),this.pushButton=!0};W(vt,mt);var bt=function(){mt.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};W(bt,mt);var yt=function(){var n,e;ht.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(Ee){n=Ee}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(Ee){e=Ee}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var Ee=function(Me){return Me};this.scope&&(Ee=this.scope.internal.getEncryptor(this.objId));var Te,Re=[];for(Te in Re.push("<<"),r)Re.push("/"+Te+" ("+T(Ee(r[Te]))+")");return Re.push(">>"),Re.join(`
`)},set:function(Ee){_typeof(Ee)==="object"&&(r=Ee)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(Ee){typeof Ee=="string"&&(r.CA=Ee)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(Ee){t=Ee}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(Ee){t="/"+Ee}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=xt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};W(yt,ht),bt.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},bt.prototype.createOption=function(n){var e=new yt;return e.Parent=this,e.optionName=n,this.Kids.push(e),At.call(this.scope,e),e};var wt=function(){mt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=xt.CheckBox.createAppearanceStream()};W(wt,mt);var Nt=function(){ht.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,13)},set:function(e){e?this.Ff=Z(this.Ff,13):this.Ff=$(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,21)},set:function(e){e?this.Ff=Z(this.Ff,21):this.Ff=$(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,23)},set:function(e){e?this.Ff=Z(this.Ff,23):this.Ff=$(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,24)},set:function(e){e?this.Ff=Z(this.Ff,24):this.Ff=$(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,25)},set:function(e){e?this.Ff=Z(this.Ff,25):this.Ff=$(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,26)},set:function(e){e?this.Ff=Z(this.Ff,26):this.Ff=$(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};W(Nt,ht);var Lt=function(){Nt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!K(this.Ff,14)},set:function(n){n?this.Ff=Z(this.Ff,14):this.Ff=$(this.Ff,14)}}),this.password=!0};W(Lt,Nt);var xt={CheckBox:{createAppearanceStream:function(){return{N:{On:xt.CheckBox.YesNormal},D:{On:xt.CheckBox.YesPushDown,Off:xt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=G(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,Ee=n.scope.__private__.encodeColorString(n.color),Te=et(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+U(xt.internal.getWidth(n))+" "+U(xt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+U(Te.fontSize)+" Tf "+Ee),t.push("BT"),t.push(Te.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=G(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),Ee=[],Te=xt.internal.getHeight(n),Re=xt.internal.getWidth(n),Me=et(n,n.caption);return Ee.push("1 g"),Ee.push("0 0 "+U(Re)+" "+U(Te)+" re"),Ee.push("f"),Ee.push("q"),Ee.push("0 0 1 rg"),Ee.push("0 0 "+U(Re-1)+" "+U(Te-1)+" re"),Ee.push("W"),Ee.push("n"),Ee.push("0 g"),Ee.push("BT"),Ee.push("/"+t+" "+U(Me.fontSize)+" Tf "+r),Ee.push(Me.text),Ee.push("ET"),Ee.push("Q"),e.stream=Ee.join(`
`),e},OffPushDown:function(n){var e=G(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+U(xt.internal.getWidth(n))+" "+U(xt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:xt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=xt.RadioButton.Circle.YesNormal,e.D[n]=xt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=G(n);e.scope=n.scope;var t=[],r=xt.internal.getWidth(n)<=xt.internal.getHeight(n)?xt.internal.getWidth(n)/4:xt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var Ee=xt.internal.Bezier_C,Te=Number((r*Ee).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+H(xt.internal.getWidth(n)/2)+" "+H(xt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+Te+" "+Te+" "+r+" 0 "+r+" c"),t.push("-"+Te+" "+r+" -"+r+" "+Te+" -"+r+" 0 c"),t.push("-"+r+" -"+Te+" -"+Te+" -"+r+" 0 -"+r+" c"),t.push(Te+" -"+r+" "+r+" -"+Te+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=G(n);e.scope=n.scope;var t=[],r=xt.internal.getWidth(n)<=xt.internal.getHeight(n)?xt.internal.getWidth(n)/4:xt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var Ee=Number((2*r).toFixed(5)),Te=Number((Ee*xt.internal.Bezier_C).toFixed(5)),Re=Number((r*xt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+H(xt.internal.getWidth(n)/2)+" "+H(xt.internal.getHeight(n)/2)+" cm"),t.push(Ee+" 0 m"),t.push(Ee+" "+Te+" "+Te+" "+Ee+" 0 "+Ee+" c"),t.push("-"+Te+" "+Ee+" -"+Ee+" "+Te+" -"+Ee+" 0 c"),t.push("-"+Ee+" -"+Te+" -"+Te+" -"+Ee+" 0 -"+Ee+" c"),t.push(Te+" -"+Ee+" "+Ee+" -"+Te+" "+Ee+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+H(xt.internal.getWidth(n)/2)+" "+H(xt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+Re+" "+Re+" "+r+" 0 "+r+" c"),t.push("-"+Re+" "+r+" -"+r+" "+Re+" -"+r+" 0 c"),t.push("-"+r+" -"+Re+" -"+Re+" -"+r+" 0 -"+r+" c"),t.push(Re+" -"+r+" "+r+" -"+Re+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=G(n);e.scope=n.scope;var t=[],r=xt.internal.getWidth(n)<=xt.internal.getHeight(n)?xt.internal.getWidth(n)/4:xt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var Ee=Number((2*r).toFixed(5)),Te=Number((Ee*xt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+H(xt.internal.getWidth(n)/2)+" "+H(xt.internal.getHeight(n)/2)+" cm"),t.push(Ee+" 0 m"),t.push(Ee+" "+Te+" "+Te+" "+Ee+" 0 "+Ee+" c"),t.push("-"+Te+" "+Ee+" -"+Ee+" "+Te+" -"+Ee+" 0 c"),t.push("-"+Ee+" -"+Te+" -"+Te+" -"+Ee+" 0 -"+Ee+" c"),t.push(Te+" -"+Ee+" "+Ee+" -"+Te+" "+Ee+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:xt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=xt.RadioButton.Cross.YesNormal,e.D[n]=xt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=G(n);e.scope=n.scope;var t=[],r=xt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+U(xt.internal.getWidth(n)-2)+" "+U(xt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(U(r.x1.x)+" "+U(r.x1.y)+" m"),t.push(U(r.x2.x)+" "+U(r.x2.y)+" l"),t.push(U(r.x4.x)+" "+U(r.x4.y)+" m"),t.push(U(r.x3.x)+" "+U(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=G(n);e.scope=n.scope;var t=xt.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+U(xt.internal.getWidth(n))+" "+U(xt.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+U(xt.internal.getWidth(n)-2)+" "+U(xt.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(U(t.x1.x)+" "+U(t.x1.y)+" m"),r.push(U(t.x2.x)+" "+U(t.x2.y)+" l"),r.push(U(t.x4.x)+" "+U(t.x4.y)+" m"),r.push(U(t.x3.x)+" "+U(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=G(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+U(xt.internal.getWidth(n))+" "+U(xt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};xt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=xt.internal.getWidth(n),t=xt.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},xt.internal.getWidth=function(n){var e=0;return _typeof(n)==="object"&&(e=V(n.Rect[2])),e},xt.internal.getHeight=function(n){var e=0;return _typeof(n)==="object"&&(e=V(n.Rect[3])),e};var At=R.addField=function(n){if(at(this,n),!(n instanceof ht))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};R.AcroFormChoiceField=ft,R.AcroFormListBox=dt,R.AcroFormComboBox=pt,R.AcroFormEditBox=gt,R.AcroFormButton=mt,R.AcroFormPushButton=vt,R.AcroFormRadioButton=bt,R.AcroFormCheckBox=wt,R.AcroFormTextField=Nt,R.AcroFormPasswordField=Lt,R.AcroFormAppearance=xt,R.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:xt},E.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:xt};E.AcroForm;function _t(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){var e="addImage_";n.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},Ee=n.__addimage__.getImageFileTypeByImageData=function(gn,xn){var En,Pn,Ln,Cn,Dn,Un=t;if((xn=xn||t)==="RGBA"||gn.data!==void 0&&gn.data instanceof Uint8ClampedArray&&"height"in gn&&"width"in gn)return"RGBA";if(yn(gn))for(Dn in r)for(Ln=r[Dn],En=0;En<Ln.length;En+=1){for(Cn=!0,Pn=0;Pn<Ln[En].length;Pn+=1)if(Ln[En][Pn]!==void 0&&Ln[En][Pn]!==gn[Pn]){Cn=!1;break}if(Cn===!0){Un=Dn;break}}else for(Dn in r)for(Ln=r[Dn],En=0;En<Ln.length;En+=1){for(Cn=!0,Pn=0;Pn<Ln[En].length;Pn+=1)if(Ln[En][Pn]!==void 0&&Ln[En][Pn]!==gn.charCodeAt(Pn)){Cn=!1;break}if(Cn===!0){Un=Dn;break}}return Un===t&&xn!==t&&(Un=xn),Un},Te=function gn(xn){for(var En=this.internal.write,Pn=this.internal.putStream,Ln=(0,this.internal.getFilters)();Ln.indexOf("FlateEncode")!==-1;)Ln.splice(Ln.indexOf("FlateEncode"),1);xn.objectId=this.internal.newObject();var Cn=[];if(Cn.push({key:"Type",value:"/XObject"}),Cn.push({key:"Subtype",value:"/Image"}),Cn.push({key:"Width",value:xn.width}),Cn.push({key:"Height",value:xn.height}),xn.colorSpace===Ge.INDEXED?Cn.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(xn.palette.length/3-1)+" "+("sMask"in xn&&xn.sMask!==void 0?xn.objectId+2:xn.objectId+1)+" 0 R]"}):(Cn.push({key:"ColorSpace",value:"/"+xn.colorSpace}),xn.colorSpace===Ge.DEVICE_CMYK&&Cn.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Cn.push({key:"BitsPerComponent",value:xn.bitsPerComponent}),"decodeParameters"in xn&&xn.decodeParameters!==void 0&&Cn.push({key:"DecodeParms",value:"<<"+xn.decodeParameters+">>"}),"transparency"in xn&&Array.isArray(xn.transparency)){for(var Dn="",Un=0,Wn=xn.transparency.length;Un<Wn;Un++)Dn+=xn.transparency[Un]+" "+xn.transparency[Un]+" ";Cn.push({key:"Mask",value:"["+Dn+"]"})}xn.sMask!==void 0&&Cn.push({key:"SMask",value:xn.objectId+1+" 0 R"});var On=xn.filter!==void 0?["/"+xn.filter]:void 0;if(Pn({data:xn.data,additionalKeyValues:Cn,alreadyAppliedFilters:On,objectId:xn.objectId}),En("endobj"),"sMask"in xn&&xn.sMask!==void 0){var $n=(xn.predictor!=null?"/Predictor "+xn.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+xn.width,kn={width:xn.width,height:xn.height,colorSpace:"DeviceGray",bitsPerComponent:xn.bitsPerComponent,decodeParameters:$n,data:xn.sMask};"filter"in xn&&(kn.filter=xn.filter),gn.call(this,kn)}if(xn.colorSpace===Ge.INDEXED){var In=this.internal.newObject();Pn({data:pn(new Uint8Array(xn.palette)),objectId:In}),En("endobj")}},Re=function(){var gn=this.internal.collections[e+"images"];for(var xn in gn)Te.call(this,gn[xn])},Me=function(){var gn,xn=this.internal.collections[e+"images"],En=this.internal.write;for(var Pn in xn)En("/I"+(gn=xn[Pn]).index,gn.objectId,"0","R")},Ve=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",Re),this.internal.events.subscribe("putXobjectDict",Me))},De=function(){var gn=this.internal.collections[e+"images"];return Ve.call(this),gn},$e=function(){return Object.keys(this.internal.collections[e+"images"]).length},Oe=function(gn){return typeof n["process"+gn.toUpperCase()]=="function"},Ce=function(gn){return _typeof(gn)==="object"&&gn.nodeType===1},Be=function(gn,xn){if(gn.nodeName==="IMG"&&gn.hasAttribute("src")){var En=""+gn.getAttribute("src");if(En.indexOf("data:image/")===0)return f(unescape(En).split("base64,").pop());var Pn=n.loadFile(En,!0);if(Pn!==void 0)return Pn}if(gn.nodeName==="CANVAS"){if(gn.width===0||gn.height===0)throw new Error("Given canvas must have data. Canvas width: "+gn.width+", height: "+gn.height);var Ln;switch(xn){case"PNG":Ln="image/png";break;case"WEBP":Ln="image/webp";break;default:Ln="image/jpeg"}return f(gn.toDataURL(Ln,1).split("base64,").pop())}},Ue=function(gn){var xn=this.internal.collections[e+"images"];if(xn){for(var En in xn)if(gn===xn[En].alias)return xn[En]}},We=function(gn,xn,En){return gn||xn||(gn=-96,xn=-96),gn<0&&(gn=-1*En.width*72/gn/this.internal.scaleFactor),xn<0&&(xn=-1*En.height*72/xn/this.internal.scaleFactor),gn===0&&(gn=xn*En.width/En.height),xn===0&&(xn=gn*En.height/En.width),[gn,xn]},He=function(gn,xn,En,Pn,Ln,Cn){var Dn=We.call(this,En,Pn,Ln),Un=this.internal.getCoordinateString,Wn=this.internal.getVerticalCoordinateString,On=De.call(this);if(En=Dn[0],Pn=Dn[1],On[Ln.index]=Ln,Cn){Cn*=Math.PI/180;var $n=Math.cos(Cn),kn=Math.sin(Cn),In=function(Qn){return Qn.toFixed(4)},Kn=[In($n),In(kn),In(-1*kn),In($n),0,0,"cm"]}this.internal.write("q"),Cn?(this.internal.write([1,"0","0",1,Un(gn),Wn(xn+Pn),"cm"].join(" ")),this.internal.write(Kn.join(" ")),this.internal.write([Un(En),"0","0",Un(Pn),"0","0","cm"].join(" "))):this.internal.write([Un(En),"0","0",Un(Pn),Un(gn),Wn(xn+Pn),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Ln.index+" Do"),this.internal.write("Q")},Ge=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var Ye=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},Je=n.__addimage__.sHashCode=function(gn){var xn,En,Pn=0;if(typeof gn=="string")for(En=gn.length,xn=0;xn<En;xn++)Pn=(Pn<<5)-Pn+gn.charCodeAt(xn),Pn|=0;else if(yn(gn))for(En=gn.byteLength/2,xn=0;xn<En;xn++)Pn=(Pn<<5)-Pn+gn[xn],Pn|=0;return Pn},Ze=n.__addimage__.validateStringAsBase64=function(gn){(gn=gn||"").toString().trim();var xn=!0;return gn.length===0&&(xn=!1),gn.length%4!=0&&(xn=!1),/^[A-Za-z0-9+/]+$/.test(gn.substr(0,gn.length-2))===!1&&(xn=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(gn.substr(-2))===!1&&(xn=!1),xn},fn=n.__addimage__.extractImageFromDataUrl=function(gn){if(gn==null||!(gn=gn.trim()).startsWith("data:"))return null;var xn=gn.indexOf(",");return xn<0?null:gn.substring(0,xn).trim().endsWith("base64")?gn.substring(xn+1):null};n.__addimage__.isArrayBuffer=function(gn){return gn instanceof ArrayBuffer};var yn=n.__addimage__.isArrayBufferView=function(gn){return gn instanceof Int8Array||gn instanceof Uint8Array||gn instanceof Uint8ClampedArray||gn instanceof Int16Array||gn instanceof Uint16Array||gn instanceof Int32Array||gn instanceof Uint32Array||gn instanceof Float32Array||gn instanceof Float64Array},mn=n.__addimage__.binaryStringToUint8Array=function(gn){for(var xn=gn.length,En=new Uint8Array(xn),Pn=0;Pn<xn;Pn++)En[Pn]=gn.charCodeAt(Pn);return En},pn=n.__addimage__.arrayBufferToBinaryString=function(gn){for(var xn="",En=yn(gn)?gn:new Uint8Array(gn),Pn=0;Pn<En.length;Pn+=8192)xn+=String.fromCharCode.apply(null,En.subarray(Pn,Pn+8192));return xn};n.addImage=function(){var gn,xn,En,Pn,Ln,Cn,Dn,Un,Wn;if(typeof arguments[1]=="number"?(xn=t,En=arguments[1],Pn=arguments[2],Ln=arguments[3],Cn=arguments[4],Dn=arguments[5],Un=arguments[6],Wn=arguments[7]):(xn=arguments[1],En=arguments[2],Pn=arguments[3],Ln=arguments[4],Cn=arguments[5],Dn=arguments[6],Un=arguments[7],Wn=arguments[8]),_typeof(gn=arguments[0])==="object"&&!Ce(gn)&&"imageData"in gn){var On=gn;gn=On.imageData,xn=On.format||xn||t,En=On.x||En||0,Pn=On.y||Pn||0,Ln=On.w||On.width||Ln,Cn=On.h||On.height||Cn,Dn=On.alias||Dn,Un=On.compression||Un,Wn=On.rotation||On.angle||Wn}var $n=this.internal.getFilters();if(Un===void 0&&$n.indexOf("FlateEncode")!==-1&&(Un="SLOW"),isNaN(En)||isNaN(Pn))throw new Error("Invalid coordinates passed to jsPDF.addImage");Ve.call(this);var kn=un.call(this,gn,xn,Dn,Un);return He.call(this,En,Pn,Ln,Cn,kn,Wn),this};var un=function(gn,xn,En,Pn){var Ln,Cn,Dn;if(typeof gn=="string"&&Ee(gn)===t){gn=unescape(gn);var Un=bn(gn,!1);(Un!==""||(Un=n.loadFile(gn,!0))!==void 0)&&(gn=Un)}if(Ce(gn)&&(gn=Be(gn,xn)),xn=Ee(gn,xn),!Oe(xn))throw new Error("addImage does not support files of type '"+xn+"', please ensure that a plugin for '"+xn+"' support is added.");if(((Dn=En)==null||Dn.length===0)&&(En=function(Wn){return typeof Wn=="string"||yn(Wn)?Je(Wn):yn(Wn.data)?Je(Wn.data):null}(gn)),(Ln=Ue.call(this,En))||(gn instanceof Uint8Array||xn==="RGBA"||(Cn=gn,gn=mn(gn)),Ln=this["process"+xn.toUpperCase()](gn,$e.call(this),En,function(Wn){return Wn&&typeof Wn=="string"&&(Wn=Wn.toUpperCase()),Wn in n.image_compression?Wn:Ye.NONE}(Pn),Cn)),!Ln)throw new Error("An unknown error occurred whilst processing the image.");return Ln},bn=n.__addimage__.convertBase64ToBinaryString=function(gn,xn){xn=typeof xn!="boolean"||xn;var En,Pn="";if(typeof gn=="string"){var Ln;En=(Ln=fn(gn))!==null&&Ln!==void 0?Ln:gn;try{Pn=f(En)}catch(Cn){if(xn)throw Ze(En)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Cn.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Pn};n.getImageProperties=function(gn){var xn,En,Pn="";if(Ce(gn)&&(gn=Be(gn)),typeof gn=="string"&&Ee(gn)===t&&((Pn=bn(gn,!1))===""&&(Pn=n.loadFile(gn)||""),gn=Pn),En=Ee(gn),!Oe(En))throw new Error("addImage does not support files of type '"+En+"', please ensure that a plugin for '"+En+"' support is added.");if(gn instanceof Uint8Array||(gn=mn(gn)),!(xn=this["process"+En.toUpperCase()](gn)))throw new Error("An unknown error occurred whilst processing the image");return xn.fileType=En,xn}})(E.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};E.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,Ee,Te,Re=this.internal.getCoordinateString,Me=this.internal.getVerticalCoordinateString,Ve=this.internal.getPageInfoByObjId(t.objId),De=t.pageContext.annotations,$e=!1,Oe=0;Oe<De.length&&!$e;Oe++)switch((r=De[Oe]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&($e=!0);break;case"reference":case"text":case"freetext":$e=!0}if($e!=0){this.internal.write("/Annots [");for(var Ce=0;Ce<De.length;Ce++){r=De[Ce];var Be=this.internal.pdfEscape,Ue=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var We=this.internal.newAdditionalObject(),He=this.internal.newAdditionalObject(),Ge=this.internal.getEncryptor(We.objId),Ye=r.title||"Note";Te="<</Type /Annot /Subtype /Text "+(Ee="/Rect ["+Re(r.bounds.x)+" "+Me(r.bounds.y+r.bounds.h)+" "+Re(r.bounds.x+r.bounds.w)+" "+Me(r.bounds.y)+"] ")+"/Contents ("+Be(Ge(r.contents))+")",Te+=" /Popup "+He.objId+" 0 R",Te+=" /P "+Ve.objId+" 0 R",Te+=" /T ("+Be(Ge(Ye))+") >>",We.content=Te;var Je=We.objId+" 0 R";Te="<</Type /Annot /Subtype /Popup "+(Ee="/Rect ["+Re(r.bounds.x+30)+" "+Me(r.bounds.y+r.bounds.h)+" "+Re(r.bounds.x+r.bounds.w+30)+" "+Me(r.bounds.y)+"] ")+" /Parent "+Je,r.open&&(Te+=" /Open true"),Te+=" >>",He.content=Te,this.internal.write(We.objId,"0 R",He.objId,"0 R");break;case"freetext":Ee="/Rect ["+Re(r.bounds.x)+" "+Me(r.bounds.y)+" "+Re(r.bounds.x+r.bounds.w)+" "+Me(r.bounds.y+r.bounds.h)+"] ";var Ze=r.color||"#000000";Te="<</Type /Annot /Subtype /FreeText "+Ee+"/Contents ("+Be(Ue(r.contents))+")",Te+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Ze+")",Te+=" /Border [0 0 0]",Te+=" >>",this.internal.write(Te);break;case"link":if(r.options.name){var fn=this.annotations._nameMap[r.options.name];r.options.pageNumber=fn.page,r.options.top=fn.y}else r.options.top||(r.options.top=0);if(Ee="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",Te="",r.options.url)Te="<</Type /Annot /Subtype /Link "+Ee+"/Border [0 0 0] /A <</S /URI /URI ("+Be(Ue(r.options.url))+") >>";else if(r.options.pageNumber)switch(Te="<</Type /Annot /Subtype /Link "+Ee+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":Te+=" /Fit]";break;case"FitH":Te+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,Te+=" /FitV "+r.options.left+"]";break;default:var yn=Me(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),Te+=" /XYZ "+r.options.left+" "+yn+" "+r.options.zoom+"]"}Te!=""&&(Te+=" >>",this.internal.write(Te))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,Ee,Te,Re){var Me=this.internal.getCurrentPageInfo(),Ve=this.internal.getCoordinateString,De=this.internal.getVerticalCoordinateString;Me.pageContext.annotations.push({finalBounds:{x:Ve(t),y:De(r),w:Ve(t+Ee),h:De(r+Te)},options:Re,type:"link"})},n.textWithLink=function(t,r,Ee,Te){var Re,Me,Ve=this.getTextWidth(t),De=this.internal.getLineHeight()/this.internal.scaleFactor;if(Te.maxWidth!==void 0){Me=Te.maxWidth;var $e=this.splitTextToSize(t,Me).length;Re=Math.ceil(De*$e)}else Me=Ve,Re=De;return this.text(t,r,Ee,Te),Ee+=.2*De,Te.align==="center"&&(r-=Ve/2),Te.align==="right"&&(r-=Ve),this.link(r,Ee-De,Me,Re,Te),Ve},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(E.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},Ee=[1570,1571,1573,1575];n.__arabicParser__={};var Te=n.__arabicParser__.isInArabicSubstitutionA=function(We){return e[We.charCodeAt(0)]!==void 0},Re=n.__arabicParser__.isArabicLetter=function(We){return typeof We=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(We)},Me=n.__arabicParser__.isArabicEndLetter=function(We){return Re(We)&&Te(We)&&e[We.charCodeAt(0)].length<=2},Ve=n.__arabicParser__.isArabicAlfLetter=function(We){return Re(We)&&Ee.indexOf(We.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(We){return Re(We)&&Te(We)&&e[We.charCodeAt(0)].length>=1};var De=n.__arabicParser__.arabicLetterHasFinalForm=function(We){return Re(We)&&Te(We)&&e[We.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(We){return Re(We)&&Te(We)&&e[We.charCodeAt(0)].length>=3};var $e=n.__arabicParser__.arabicLetterHasMedialForm=function(We){return Re(We)&&Te(We)&&e[We.charCodeAt(0)].length==4},Oe=n.__arabicParser__.resolveLigatures=function(We){var He=0,Ge=t,Ye="",Je=0;for(He=0;He<We.length;He+=1)Ge[We.charCodeAt(He)]!==void 0?(Je++,typeof(Ge=Ge[We.charCodeAt(He)])=="number"&&(Ye+=String.fromCharCode(Ge),Ge=t,Je=0),He===We.length-1&&(Ge=t,Ye+=We.charAt(He-(Je-1)),He-=Je-1,Je=0)):(Ge=t,Ye+=We.charAt(He-Je),He-=Je,Je=0);return Ye};n.__arabicParser__.isArabicDiacritic=function(We){return We!==void 0&&r[We.charCodeAt(0)]!==void 0};var Ce=n.__arabicParser__.getCorrectForm=function(We,He,Ge){return Re(We)?Te(We)===!1?-1:!De(We)||!Re(He)&&!Re(Ge)||!Re(Ge)&&Me(He)||Me(We)&&!Re(He)||Me(We)&&Ve(He)||Me(We)&&Me(He)?0:$e(We)&&Re(He)&&!Me(He)&&Re(Ge)&&De(Ge)?3:Me(We)||!Re(Ge)?1:2:-1},Be=function(We){var He=0,Ge=0,Ye=0,Je="",Ze="",fn="",yn=(We=We||"").split("\\s+"),mn=[];for(He=0;He<yn.length;He+=1){for(mn.push(""),Ge=0;Ge<yn[He].length;Ge+=1)Je=yn[He][Ge],Ze=yn[He][Ge-1],fn=yn[He][Ge+1],Re(Je)?(Ye=Ce(Je,Ze,fn),mn[He]+=Ye!==-1?String.fromCharCode(e[Je.charCodeAt(0)][Ye]):Je):mn[He]+=Je;mn[He]=Oe(mn[He])}return mn.join(" ")},Ue=n.__arabicParser__.processArabic=n.processArabic=function(){var We,He=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,Ge=[];if(Array.isArray(He)){var Ye=0;for(Ge=[],Ye=0;Ye<He.length;Ye+=1)Array.isArray(He[Ye])?Ge.push([Be(He[Ye][0]),He[Ye][1],He[Ye][2]]):Ge.push([Be(He[Ye])]);We=Ge}else We=Be(He);return typeof arguments[0]=="string"?We:(arguments[0].text=We,arguments[0])};n.events.push(["preProcessText",Ue])}(E.API),E.API.autoPrint=function(n){var e;return(n=n||{}).variant=n.variant||"non-conform",n.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(Me){t=Me}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(Me){r=isNaN(Me)||Number.isInteger(Me)===!1||Me<0?150:Me,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var Ee=300;Object.defineProperty(this,"height",{get:function(){return Ee},set:function(Me){Ee=isNaN(Me)||Number.isInteger(Me)===!1||Me<0?300:Me,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=Ee+1)}});var Te=[];Object.defineProperty(this,"childNodes",{get:function(){return Te},set:function(Me){Te=Me}});var Re={};Object.defineProperty(this,"style",{get:function(){return Re},set:function(Me){Re=Me}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var Ee;if((t=t||"2d")!=="2d")return null;for(Ee in r)this.pdf.context2d.hasOwnProperty(Ee)&&(this.pdf.context2d[Ee]=r[Ee]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(E.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),Ee.call(this))},Ee=function(){this.internal.__cell__.lastCell=new Te,this.internal.__cell__.pages=1},Te=function(){var Ve=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ve},set:function(We){Ve=We}});var De=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return De},set:function(We){De=We}});var $e=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return $e},set:function(We){$e=We}});var Oe=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return Oe},set:function(We){Oe=We}});var Ce=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return Ce},set:function(We){Ce=We}});var Be=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return Be},set:function(We){Be=We}});var Ue=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return Ue},set:function(We){Ue=We}}),this};Te.prototype.clone=function(){return new Te(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},Te.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(Ve){return r.call(this),this.internal.__cell__.headerFunction=typeof Ve=="function"?Ve:void 0,this},n.getTextDimensions=function(Ve,De){r.call(this);var $e=(De=De||{}).fontSize||this.getFontSize(),Oe=De.font||this.getFont(),Ce=De.scaleFactor||this.internal.scaleFactor,Be=0,Ue=0,We=0,He=this;if(!Array.isArray(Ve)&&typeof Ve!="string"){if(typeof Ve!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");Ve=String(Ve)}var Ge=De.maxWidth;Ge>0?typeof Ve=="string"?Ve=this.splitTextToSize(Ve,Ge):Object.prototype.toString.call(Ve)==="[object Array]"&&(Ve=Ve.reduce(function(Je,Ze){return Je.concat(He.splitTextToSize(Ze,Ge))},[])):Ve=Array.isArray(Ve)?Ve:[Ve];for(var Ye=0;Ye<Ve.length;Ye++)Be<(We=this.getStringUnitWidth(Ve[Ye],{font:Oe})*$e)&&(Be=We);return Be!==0&&(Ue=Ve.length),{w:Be/=Ce,h:Math.max((Ue*$e*this.getLineHeightFactor()-$e*(this.getLineHeightFactor()-1))/Ce,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var Ve=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new Te(Ve.left,Ve.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var Re=n.cell=function(){var Ve;Ve=arguments[0]instanceof Te?arguments[0]:new Te(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var De=this.internal.__cell__.lastCell,$e=this.internal.__cell__.padding,Oe=this.internal.__cell__.margins||e,Ce=this.internal.__cell__.tableHeaderRow,Be=this.internal.__cell__.printHeaders;return De.lineNumber!==void 0&&(De.lineNumber===Ve.lineNumber?(Ve.x=(De.x||0)+(De.width||0),Ve.y=De.y||0):De.y+De.height+Ve.height+Oe.bottom>this.getPageHeight()?(this.cellAddPage(),Ve.y=Oe.top,Be&&Ce&&(this.printHeaderRow(Ve.lineNumber,!0),Ve.y+=Ce[0].height)):Ve.y=De.y+De.height||Ve.y),Ve.text[0]!==void 0&&(this.rect(Ve.x,Ve.y,Ve.width,Ve.height,t===!0?"FD":void 0),Ve.align==="right"?this.text(Ve.text,Ve.x+Ve.width-$e,Ve.y+$e,{align:"right",baseline:"top"}):Ve.align==="center"?this.text(Ve.text,Ve.x+Ve.width/2,Ve.y+$e,{align:"center",baseline:"top",maxWidth:Ve.width-$e-$e}):this.text(Ve.text,Ve.x+$e,Ve.y+$e,{align:"left",baseline:"top",maxWidth:Ve.width-$e-$e})),this.internal.__cell__.lastCell=Ve,this};n.table=function(Ve,De,$e,Oe,Ce){if(r.call(this),!$e)throw new Error("No data for PDF table.");var Be,Ue,We,He,Ge=[],Ye=[],Je=[],Ze={},fn={},yn=[],mn=[],pn=(Ce=Ce||{}).autoSize||!1,un=Ce.printHeaders!==!1,bn=Ce.css&&Ce.css["font-size"]!==void 0?16*Ce.css["font-size"]:Ce.fontSize||12,gn=Ce.margins||Object.assign({width:this.getPageWidth()},e),xn=typeof Ce.padding=="number"?Ce.padding:3,En=Ce.headerBackgroundColor||"#c8c8c8",Pn=Ce.headerTextColor||"#000";if(Ee.call(this),this.internal.__cell__.printHeaders=un,this.internal.__cell__.margins=gn,this.internal.__cell__.table_font_size=bn,this.internal.__cell__.padding=xn,this.internal.__cell__.headerBackgroundColor=En,this.internal.__cell__.headerTextColor=Pn,this.setFontSize(bn),Oe==null)Ye=Ge=Object.keys($e[0]),Je=Ge.map(function(){return"left"});else if(Array.isArray(Oe)&&_typeof(Oe[0])==="object")for(Ge=Oe.map(function(On){return On.name}),Ye=Oe.map(function(On){return On.prompt||On.name||""}),Je=Oe.map(function(On){return On.align||"left"}),Be=0;Be<Oe.length;Be+=1)fn[Oe[Be].name]=.7499990551181103*Oe[Be].width;else Array.isArray(Oe)&&typeof Oe[0]=="string"&&(Ye=Ge=Oe,Je=Ge.map(function(){return"left"}));if(pn||Array.isArray(Oe)&&typeof Oe[0]=="string")for(Be=0;Be<Ge.length;Be+=1){for(Ze[He=Ge[Be]]=$e.map(function(On){return On[He]}),this.setFont(void 0,"bold"),yn.push(this.getTextDimensions(Ye[Be],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),Ue=Ze[He],this.setFont(void 0,"normal"),We=0;We<Ue.length;We+=1)yn.push(this.getTextDimensions(Ue[We],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);fn[He]=Math.max.apply(null,yn)+xn+xn,yn=[]}if(un){var Ln={};for(Be=0;Be<Ge.length;Be+=1)Ln[Ge[Be]]={},Ln[Ge[Be]].text=Ye[Be],Ln[Ge[Be]].align=Je[Be];var Cn=Me.call(this,Ln,fn);mn=Ge.map(function(On){return new Te(Ve,De,fn[On],Cn,Ln[On].text,void 0,Ln[On].align)}),this.setTableHeaderRow(mn),this.printHeaderRow(1,!1)}var Dn=Oe.reduce(function(On,$n){return On[$n.name]=$n.align,On},{});for(Be=0;Be<$e.length;Be+=1){"rowStart"in Ce&&Ce.rowStart instanceof Function&&Ce.rowStart({row:Be,data:$e[Be]},this);var Un=Me.call(this,$e[Be],fn);for(We=0;We<Ge.length;We+=1){var Wn=$e[Be][Ge[We]];"cellStart"in Ce&&Ce.cellStart instanceof Function&&Ce.cellStart({row:Be,col:We,data:Wn},this),Re.call(this,new Te(Ve,De,fn[Ge[We]],Un,Wn,Be+2,Dn[Ge[We]]))}}return this.internal.__cell__.table_x=Ve,this.internal.__cell__.table_y=De,this};var Me=function(Ve,De){var $e=this.internal.__cell__.padding,Oe=this.internal.__cell__.table_font_size,Ce=this.internal.scaleFactor;return Object.keys(Ve).map(function(Be){var Ue=Ve[Be];return this.splitTextToSize(Ue.hasOwnProperty("text")?Ue.text:Ue,De[Be]-$e-$e)},this).map(function(Be){return this.getLineHeightFactor()*Be.length*Oe/Ce+$e+$e},this).reduce(function(Be,Ue){return Math.max(Be,Ue)},0)};n.setTableHeaderRow=function(Ve){r.call(this),this.internal.__cell__.tableHeaderRow=Ve},n.printHeaderRow=function(Ve,De){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var $e;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var Oe=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new Te(Oe[0],Oe[1],Oe[2],Oe[3],void 0,-1)}this.setFont(void 0,"bold");for(var Ce=[],Be=0;Be<this.internal.__cell__.tableHeaderRow.length;Be+=1){$e=this.internal.__cell__.tableHeaderRow[Be].clone(),De&&($e.y=this.internal.__cell__.margins.top||0,Ce.push($e)),$e.lineNumber=Ve;var Ue=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),Re.call(this,$e),this.setTextColor(Ue)}Ce.length>0&&this.setTableHeaderRow(Ce),this.setFont(void 0,"normal"),t=!1}}(E.API);var Pt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},kt=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ft=_t(kt),It=[100,200,300,400,500,600,700,800,900],jt=_t(It);function Ct(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(Te){return Pt[Te=Te||"normal"]?Te:"normal"}(n.style),r=function(Te){return Te?typeof Te=="number"?Te>=100&&Te<=900&&Te%100==0?Te:400:/^\d00$/.test(Te)?parseInt(Te):Te==="bold"?700:400:400}(n.weight),Ee=function(Te){return typeof Ft[Te=Te||"normal"]=="number"?Te:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:Ee,src:n.src||[],ref:n.ref||{name:e,style:[Ee,t,r].join(" ")}}}function Ot(n,e,t,r){var Ee;for(Ee=t;Ee>=0&&Ee<e.length;Ee+=r)if(n[e[Ee]])return n[e[Ee]];for(Ee=t;Ee>=0&&Ee<e.length;Ee-=r)if(n[e[Ee]])return n[e[Ee]]}var Bt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Mt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function qt(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function Et(n){return n.trimLeft()}function Rt(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function Dt(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Tt,zt,Ut,Ht,Wt,Vt,Gt,Yt,Jt=["times"];function Xt(n,e,t,r){var Ee=4,Te=$t;switch(r){case E.API.image_compression.FAST:Ee=1,Te=Zt;break;case E.API.image_compression.MEDIUM:Ee=6,Te=Qt;break;case E.API.image_compression.SLOW:Ee=9,Te=te}n=function(Me,Ve,De,$e){for(var Oe,Ce=Me.length/Ve,Be=new Uint8Array(Me.length+Ce),Ue=[Kt,Zt,$t,Qt,te],We=0;We<Ce;We+=1){var He=We*Ve,Ge=Me.subarray(He,He+Ve);if($e)Be.set($e(Ge,De,Oe),He+We);else{for(var Ye=Ue.length,Je=[],Ze=0;Ze<Ye;Ze+=1)Je[Ze]=Ue[Ze](Ge,De,Oe);var fn=ne(Je.concat());Be.set(Je[fn],He+We)}Oe=Ge}return Be}(n,e,t,Te);var Re=zlibSync(n,{level:Ee});return E.API.__addimage__.arrayBufferToBinaryString(Re)}function Kt(n){var e=Array.apply([],n);return e.unshift(0),e}function Zt(n,e){var t=n.length,r=[];r[0]=1;for(var Ee=0;Ee<t;Ee+=1){var Te=n[Ee-e]||0;r[Ee+1]=n[Ee]-Te+256&255}return r}function $t(n,e,t){var r=n.length,Ee=[];Ee[0]=2;for(var Te=0;Te<r;Te+=1){var Re=t&&t[Te]||0;Ee[Te+1]=n[Te]-Re+256&255}return Ee}function Qt(n,e,t){var r=n.length,Ee=[];Ee[0]=3;for(var Te=0;Te<r;Te+=1){var Re=n[Te-e]||0,Me=t&&t[Te]||0;Ee[Te+1]=n[Te]+256-(Re+Me>>>1)&255}return Ee}function te(n,e,t){var r=n.length,Ee=[];Ee[0]=4;for(var Te=0;Te<r;Te+=1){var Re=ee(n[Te-e]||0,t&&t[Te]||0,t&&t[Te-e]||0);Ee[Te+1]=n[Te]-Re+256&255}return Ee}function ee(n,e,t){if(n===e&&e===t)return n;var r=Math.abs(e-t),Ee=Math.abs(n-t),Te=Math.abs(n+e-t-t);return r<=Ee&&r<=Te?n:Ee<=Te?e:t}function ne(n){var e=n.map(function(t){return t.reduce(function(r,Ee){return r+Math.abs(Ee)},0)});return e.indexOf(Math.min.apply(null,e))}function re$1(n,e,t){var r=e*t,Ee=Math.floor(r/8),Te=16-(r-8*Ee+t),Re=(1<<t)-1;return ae(n,Ee)>>Te&Re}function ie(n,e,t,r){var Ee=t*r,Te=Math.floor(Ee/8),Re=16-(Ee-8*Te+r),Me=(1<<r)-1,Ve=(e&Me)<<Re;(function(De,$e,Oe){if($e+1<De.byteLength)De.setUint16($e,Oe,!1);else{var Ce=Oe>>8&255;De.setUint8($e,Ce)}})(n,Te,ae(n,Te)&~(Me<<Re)&65535|Ve)}function ae(n,e){return e+1<n.byteLength?n.getUint16(e,!1):n.getUint8(e)<<8}function oe(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,Ee=n[e++],Te=Ee>>7,Re=1<<1+(7&Ee);n[e++],n[e++];var Me=null,Ve=null;Te&&(Me=e,Ve=Re,e+=3*Re);var De=!0,$e=[],Oe=0,Ce=null,Be=0,Ue=null;for(this.width=t,this.height=r;De&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,Ue=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((gn=n[e++])>=0))throw Error("Invalid block size");if(gn===0)break;e+=gn}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var We=n[e++];Oe=n[e++]|n[e++]<<8,Ce=n[e++],1&We||(Ce=null),Be=We>>2&7,e++;break;case 254:for(;;){if(!((gn=n[e++])>=0))throw Error("Invalid block size");if(gn===0)break;e+=gn}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var He=n[e++]|n[e++]<<8,Ge=n[e++]|n[e++]<<8,Ye=n[e++]|n[e++]<<8,Je=n[e++]|n[e++]<<8,Ze=n[e++],fn=Ze>>6&1,yn=1<<1+(7&Ze),mn=Me,pn=Ve,un=!1;Ze>>7&&(un=!0,mn=e,pn=yn,e+=3*yn);var bn=e;for(e++;;){var gn;if(!((gn=n[e++])>=0))throw Error("Invalid block size");if(gn===0)break;e+=gn}$e.push({x:He,y:Ge,width:Ye,height:Je,has_local_palette:un,palette_offset:mn,palette_size:pn,data_offset:bn,data_length:e-bn,transparent_index:Ce,interlaced:!!fn,delay:Oe,disposal:Be});break;case 59:De=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return $e.length},this.loopCount=function(){return Ue},this.frameInfo=function(xn){if(xn<0||xn>=$e.length)throw new Error("Frame index out of range.");return $e[xn]},this.decodeAndBlitFrameBGRA=function(xn,En){var Pn=this.frameInfo(xn),Ln=Pn.width*Pn.height,Cn=new Uint8Array(Ln);se(n,Pn.data_offset,Cn,Ln);var Dn=Pn.palette_offset,Un=Pn.transparent_index;Un===null&&(Un=256);var Wn=Pn.width,On=t-Wn,$n=Wn,kn=4*(Pn.y*t+Pn.x),In=4*((Pn.y+Pn.height)*t+Pn.x),Kn=kn,Qn=4*On;Pn.interlaced===!0&&(Qn+=4*t*7);for(var rr=8,or=0,pr=Cn.length;or<pr;++or){var mr=Cn[or];if($n===0&&($n=Wn,(Kn+=Qn)>=In&&(Qn=4*On+4*t*(rr-1),Kn=kn+(Wn+On)*(rr<<1),rr>>=1)),mr===Un)Kn+=4;else{var Er=n[Dn+3*mr],jr=n[Dn+3*mr+1],Kr=n[Dn+3*mr+2];En[Kn++]=Kr,En[Kn++]=jr,En[Kn++]=Er,En[Kn++]=255}--$n}},this.decodeAndBlitFrameRGBA=function(xn,En){var Pn=this.frameInfo(xn),Ln=Pn.width*Pn.height,Cn=new Uint8Array(Ln);se(n,Pn.data_offset,Cn,Ln);var Dn=Pn.palette_offset,Un=Pn.transparent_index;Un===null&&(Un=256);var Wn=Pn.width,On=t-Wn,$n=Wn,kn=4*(Pn.y*t+Pn.x),In=4*((Pn.y+Pn.height)*t+Pn.x),Kn=kn,Qn=4*On;Pn.interlaced===!0&&(Qn+=4*t*7);for(var rr=8,or=0,pr=Cn.length;or<pr;++or){var mr=Cn[or];if($n===0&&($n=Wn,(Kn+=Qn)>=In&&(Qn=4*On+4*t*(rr-1),Kn=kn+(Wn+On)*(rr<<1),rr>>=1)),mr===Un)Kn+=4;else{var Er=n[Dn+3*mr],jr=n[Dn+3*mr+1],Kr=n[Dn+3*mr+2];En[Kn++]=Er,En[Kn++]=jr,En[Kn++]=Kr,En[Kn++]=255}--$n}}}function se(n,e,t,r){for(var Ee=n[e++],Te=1<<Ee,Re=Te+1,Me=Re+1,Ve=Ee+1,De=(1<<Ve)-1,$e=0,Oe=0,Ce=0,Be=n[e++],Ue=new Int32Array(4096),We=null;;){for(;$e<16&&Be!==0;)Oe|=n[e++]<<$e,$e+=8,Be===1?Be=n[e++]:--Be;if($e<Ve)break;var He=Oe&De;if(Oe>>=Ve,$e-=Ve,He!==Te){if(He===Re)break;for(var Ge=He<Me?He:We,Ye=0,Je=Ge;Je>Te;)Je=Ue[Je]>>8,++Ye;var Ze=Je;if(Ce+Ye+(Ge!==He?1:0)>r)return void o.log("Warning, gif stream longer than expected.");t[Ce++]=Ze;var fn=Ce+=Ye;for(Ge!==He&&(t[Ce++]=Ze),Je=Ge;Ye--;)Je=Ue[Je],t[--fn]=255&Je,Je>>=8;We!==null&&Me<4096&&(Ue[Me++]=We<<8|Ze,Me>=De+1&&Ve<12&&(++Ve,De=De<<1|1)),We=He}else Me=Re+1,De=(1<<(Ve=Ee+1))-1,We=null}return Ce!==r&&o.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function ue(n){var e,t,r,Ee,Te,Re=Math.floor,Me=new Array(64),Ve=new Array(64),De=new Array(64),$e=new Array(64),Oe=new Array(65535),Ce=new Array(65535),Be=new Array(64),Ue=new Array(64),We=[],He=0,Ge=7,Ye=new Array(64),Je=new Array(64),Ze=new Array(64),fn=new Array(256),yn=new Array(2048),mn=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],pn=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],un=[0,1,2,3,4,5,6,7,8,9,10,11],bn=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],gn=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],xn=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],En=[0,1,2,3,4,5,6,7,8,9,10,11],Pn=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Ln=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Cn(kn,In){for(var Kn=0,Qn=0,rr=new Array,or=1;or<=16;or++){for(var pr=1;pr<=kn[or];pr++)rr[In[Qn]]=[],rr[In[Qn]][0]=Kn,rr[In[Qn]][1]=or,Qn++,Kn++;Kn*=2}return rr}function Dn(kn){for(var In=kn[0],Kn=kn[1]-1;Kn>=0;)In&1<<Kn&&(He|=1<<Ge),Kn--,--Ge<0&&(He==255?(Un(255),Un(0)):Un(He),Ge=7,He=0)}function Un(kn){We.push(kn)}function Wn(kn){Un(kn>>8&255),Un(255&kn)}function On(kn,In,Kn,Qn,rr){for(var or,pr=rr[0],mr=rr[240],Er=function(qr,di){var Zr,mi,pi,Wi,si,_r,Dr,Xr,Gr,ii,hi=0;for(Gr=0;Gr<8;++Gr){Zr=qr[hi],mi=qr[hi+1],pi=qr[hi+2],Wi=qr[hi+3],si=qr[hi+4],_r=qr[hi+5],Dr=qr[hi+6];var Mi=Zr+(Xr=qr[hi+7]),ji=Zr-Xr,Ur=mi+Dr,Pi=mi-Dr,Bi=pi+_r,vi=pi-_r,Ri=Wi+si,ui=Wi-si,vs=Mi+Ri,ds=Mi-Ri,ns=Ur+Bi,ni=Ur-Bi;qr[hi]=vs+ns,qr[hi+4]=vs-ns;var oi=.707106781*(ni+ds);qr[hi+2]=ds+oi,qr[hi+6]=ds-oi;var Di=.382683433*((vs=ui+vi)-(ni=Pi+ji)),Ns=.5411961*vs+Di,mo=1.306562965*ni+Di,Js=.707106781*(ns=vi+Pi),ki=ji+Js,ms=ji-Js;qr[hi+5]=ms+Ns,qr[hi+3]=ms-Ns,qr[hi+1]=ki+mo,qr[hi+7]=ki-mo,hi+=8}for(hi=0,Gr=0;Gr<8;++Gr){Zr=qr[hi],mi=qr[hi+8],pi=qr[hi+16],Wi=qr[hi+24],si=qr[hi+32],_r=qr[hi+40],Dr=qr[hi+48];var So=Zr+(Xr=qr[hi+56]),Ms=Zr-Xr,Zs=mi+Dr,ws=mi-Dr,Cs=pi+_r,xs=pi-_r,Yo=Wi+si,ta=Wi-si,oo=So+Yo,Hn=So-Yo,ir=Zs+Cs,ur=Zs-Cs;qr[hi]=oo+ir,qr[hi+32]=oo-ir;var gr=.707106781*(ur+Hn);qr[hi+16]=Hn+gr,qr[hi+48]=Hn-gr;var Pr=.382683433*((oo=ta+xs)-(ur=ws+Ms)),Cr=.5411961*oo+Pr,Jr=1.306562965*ur+Pr,_i=.707106781*(ir=xs+ws),fi=Ms+_i,Ui=Ms-_i;qr[hi+40]=Ui+Cr,qr[hi+24]=Ui-Cr,qr[hi+8]=fi+Jr,qr[hi+56]=fi-Jr,hi++}for(Gr=0;Gr<64;++Gr)ii=qr[Gr]*di[Gr],Be[Gr]=ii>0?ii+.5|0:ii-.5|0;return Be}(kn,In),jr=0;jr<64;++jr)Ue[mn[jr]]=Er[jr];var Kr=Ue[0]-Kn;Kn=Ue[0],Kr==0?Dn(Qn[0]):(Dn(Qn[Ce[or=32767+Kr]]),Dn(Oe[or]));for(var Hr=63;Hr>0&&Ue[Hr]==0;)Hr--;if(Hr==0)return Dn(pr),Kn;for(var xr,nr=1;nr<=Hr;){for(var Oi=nr;Ue[nr]==0&&nr<=Hr;)++nr;var Ti=nr-Oi;if(Ti>=16){xr=Ti>>4;for(var yi=1;yi<=xr;++yi)Dn(mr);Ti&=15}or=32767+Ue[nr],Dn(rr[(Ti<<4)+Ce[or]]),Dn(Oe[or]),nr++}return Hr!=63&&Dn(pr),Kn}function $n(kn){kn=Math.min(Math.max(kn,1),100),Te!=kn&&(function(In){for(var Kn=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Qn=0;Qn<64;Qn++){var rr=Re((Kn[Qn]*In+50)/100);rr=Math.min(Math.max(rr,1),255),Me[mn[Qn]]=rr}for(var or=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],pr=0;pr<64;pr++){var mr=Re((or[pr]*In+50)/100);mr=Math.min(Math.max(mr,1),255),Ve[mn[pr]]=mr}for(var Er=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],jr=0,Kr=0;Kr<8;Kr++)for(var Hr=0;Hr<8;Hr++)De[jr]=1/(Me[mn[jr]]*Er[Kr]*Er[Hr]*8),$e[jr]=1/(Ve[mn[jr]]*Er[Kr]*Er[Hr]*8),jr++}(kn<50?Math.floor(5e3/kn):Math.floor(200-2*kn)),Te=kn)}this.encode=function(kn,In){In&&$n(In),We=new Array,He=0,Ge=7,Wn(65496),Wn(65504),Wn(16),Un(74),Un(70),Un(73),Un(70),Un(0),Un(1),Un(1),Un(0),Wn(1),Wn(1),Un(0),Un(0),function(){Wn(65499),Wn(132),Un(0);for(var mi=0;mi<64;mi++)Un(Me[mi]);Un(1);for(var pi=0;pi<64;pi++)Un(Ve[pi])}(),function(mi,pi){Wn(65472),Wn(17),Un(8),Wn(pi),Wn(mi),Un(3),Un(1),Un(17),Un(0),Un(2),Un(17),Un(1),Un(3),Un(17),Un(1)}(kn.width,kn.height),function(){Wn(65476),Wn(418),Un(0);for(var mi=0;mi<16;mi++)Un(pn[mi+1]);for(var pi=0;pi<=11;pi++)Un(un[pi]);Un(16);for(var Wi=0;Wi<16;Wi++)Un(bn[Wi+1]);for(var si=0;si<=161;si++)Un(gn[si]);Un(1);for(var _r=0;_r<16;_r++)Un(xn[_r+1]);for(var Dr=0;Dr<=11;Dr++)Un(En[Dr]);Un(17);for(var Xr=0;Xr<16;Xr++)Un(Pn[Xr+1]);for(var Gr=0;Gr<=161;Gr++)Un(Ln[Gr])}(),Wn(65498),Wn(12),Un(3),Un(1),Un(0),Un(2),Un(17),Un(3),Un(17),Un(0),Un(63),Un(0);var Kn=0,Qn=0,rr=0;He=0,Ge=7,this.encode.displayName="_encode_";for(var or,pr,mr,Er,jr,Kr,Hr,xr,nr,Oi=kn.data,Ti=kn.width,yi=kn.height,qr=4*Ti,di=0;di<yi;){for(or=0;or<qr;){for(jr=qr*di+or,Hr=-1,xr=0,nr=0;nr<64;nr++)Kr=jr+(xr=nr>>3)*qr+(Hr=4*(7&nr)),di+xr>=yi&&(Kr-=qr*(di+1+xr-yi)),or+Hr>=qr&&(Kr-=or+Hr-qr+4),pr=Oi[Kr++],mr=Oi[Kr++],Er=Oi[Kr++],Ye[nr]=(yn[pr]+yn[mr+256|0]+yn[Er+512|0]>>16)-128,Je[nr]=(yn[pr+768|0]+yn[mr+1024|0]+yn[Er+1280|0]>>16)-128,Ze[nr]=(yn[pr+1280|0]+yn[mr+1536|0]+yn[Er+1792|0]>>16)-128;Kn=On(Ye,De,Kn,e,r),Qn=On(Je,$e,Qn,t,Ee),rr=On(Ze,$e,rr,t,Ee),or+=32}di+=8}if(Ge>=0){var Zr=[];Zr[1]=Ge+1,Zr[0]=(1<<Ge+1)-1,Dn(Zr)}return Wn(65497),new Uint8Array(We)},n=n||50,function(){for(var kn=String.fromCharCode,In=0;In<256;In++)fn[In]=kn(In)}(),e=Cn(pn,un),t=Cn(xn,En),r=Cn(bn,gn),Ee=Cn(Pn,Ln),function(){for(var kn=1,In=2,Kn=1;Kn<=15;Kn++){for(var Qn=kn;Qn<In;Qn++)Ce[32767+Qn]=Kn,Oe[32767+Qn]=[],Oe[32767+Qn][1]=Kn,Oe[32767+Qn][0]=Qn;for(var rr=-(In-1);rr<=-kn;rr++)Ce[32767+rr]=Kn,Oe[32767+rr]=[],Oe[32767+rr][1]=Kn,Oe[32767+rr][0]=In-1+rr;kn<<=1,In<<=1}}(),function(){for(var kn=0;kn<256;kn++)yn[kn]=19595*kn,yn[kn+256|0]=38470*kn,yn[kn+512|0]=7471*kn+32768,yn[kn+768|0]=-11059*kn,yn[kn+1024|0]=-21709*kn,yn[kn+1280|0]=32768*kn+8421375,yn[kn+1536|0]=-27439*kn,yn[kn+1792|0]=-5329*kn}(),$n(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ce(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function le(n){function e(un){if(!un)throw Error("assert :P")}function t(un,bn,gn){for(var xn=0;4>xn;xn++)if(un[bn+xn]!=gn.charCodeAt(xn))return!0;return!1}function r(un,bn,gn,xn,En){for(var Pn=0;Pn<En;Pn++)un[bn+Pn]=gn[xn+Pn]}function Ee(un,bn,gn,xn){for(var En=0;En<xn;En++)un[bn+En]=gn}function Te(un){return new Int32Array(un)}function Re(un,bn){for(var gn=[],xn=0;xn<un;xn++)gn.push(new bn);return gn}function Me(un,bn){var gn=[];return function xn(En,Pn,Ln){for(var Cn=Ln[Pn],Dn=0;Dn<Cn&&(En.push(Ln.length>Pn+1?[]:new bn),!(Ln.length<Pn+1));Dn++)xn(En[Dn],Pn+1,Ln)}(gn,0,un),gn}var Ve=function(){var un=this;function bn(Xe,hn){for(var Tn=1<<hn-1>>>0;Xe&Tn;)Tn>>>=1;return Tn?(Xe&Tn-1)+Tn:Xe}function gn(Xe,hn,Tn,Rn,Vn){e(!(Rn%Tn));do Xe[hn+(Rn-=Tn)]=Vn;while(0<Rn)}function xn(Xe,hn,Tn,Rn,Vn){if(e(2328>=Vn),512>=Vn)var Bn=Te(512);else if((Bn=Te(Vn))==null)return 0;return function(qn,Gn,Xn,Zn,cr,Tr){var tr,hr,wr=Gn,Vr=1<<Xn,Sr=Te(16),Lr=Te(16);for(e(cr!=0),e(Zn!=null),e(qn!=null),e(0<Xn),hr=0;hr<cr;++hr){if(15<Zn[hr])return 0;++Sr[Zn[hr]]}if(Sr[0]==cr)return 0;for(Lr[1]=0,tr=1;15>tr;++tr){if(Sr[tr]>1<<tr)return 0;Lr[tr+1]=Lr[tr]+Sr[tr]}for(hr=0;hr<cr;++hr)tr=Zn[hr],0<Zn[hr]&&(Tr[Lr[tr]++]=hr);if(Lr[15]==1)return(Zn=new En).g=0,Zn.value=Tr[0],gn(qn,wr,1,Vr,Zn),Vr;var Fr,Br=-1,zr=Vr-1,Ni=0,xi=1,is=1,Si=1<<Xn;for(hr=0,tr=1,cr=2;tr<=Xn;++tr,cr<<=1){if(xi+=is<<=1,0>(is-=Sr[tr]))return 0;for(;0<Sr[tr];--Sr[tr])(Zn=new En).g=tr,Zn.value=Tr[hr++],gn(qn,wr+Ni,cr,Si,Zn),Ni=bn(Ni,tr)}for(tr=Xn+1,cr=2;15>=tr;++tr,cr<<=1){if(xi+=is<<=1,0>(is-=Sr[tr]))return 0;for(;0<Sr[tr];--Sr[tr]){if(Zn=new En,(Ni&zr)!=Br){for(wr+=Si,Fr=1<<(Br=tr)-Xn;15>Br&&!(0>=(Fr-=Sr[Br]));)++Br,Fr<<=1;Vr+=Si=1<<(Fr=Br-Xn),qn[Gn+(Br=Ni&zr)].g=Fr+Xn,qn[Gn+Br].value=wr-Gn-Br}Zn.g=tr-Xn,Zn.value=Tr[hr++],gn(qn,wr+(Ni>>Xn),cr,Si,Zn),Ni=bn(Ni,tr)}}return xi!=2*Lr[15]-1?0:Vr}(Xe,hn,Tn,Rn,Vn,Bn)}function En(){this.value=this.g=0}function Pn(){this.value=this.g=0}function Ln(){this.G=Re(5,En),this.H=Te(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=Re(ya,Pn)}function Cn(Xe,hn,Tn,Rn){e(Xe!=null),e(hn!=null),e(2147483648>Rn),Xe.Ca=254,Xe.I=0,Xe.b=-8,Xe.Ka=0,Xe.oa=hn,Xe.pa=Tn,Xe.Jd=hn,Xe.Yc=Tn+Rn,Xe.Zc=4<=Rn?Tn+Rn-4+1:Tn,pr(Xe)}function Dn(Xe,hn){for(var Tn=0;0<hn--;)Tn|=Er(Xe,128)<<hn;return Tn}function Un(Xe,hn){var Tn=Dn(Xe,hn);return mr(Xe)?-Tn:Tn}function Wn(Xe,hn,Tn,Rn){var Vn,Bn=0;for(e(Xe!=null),e(hn!=null),e(4294967288>Rn),Xe.Sb=Rn,Xe.Ra=0,Xe.u=0,Xe.h=0,4<Rn&&(Rn=4),Vn=0;Vn<Rn;++Vn)Bn+=hn[Tn+Vn]<<8*Vn;Xe.Ra=Bn,Xe.bb=Rn,Xe.oa=hn,Xe.pa=Tn}function On(Xe){for(;8<=Xe.u&&Xe.bb<Xe.Sb;)Xe.Ra>>>=8,Xe.Ra+=Xe.oa[Xe.pa+Xe.bb]<<Ul-8>>>0,++Xe.bb,Xe.u-=8;Qn(Xe)&&(Xe.h=1,Xe.u=0)}function $n(Xe,hn){if(e(0<=hn),!Xe.h&&hn<=Ou){var Tn=Kn(Xe)&Bl[hn];return Xe.u+=hn,On(Xe),Tn}return Xe.h=1,Xe.u=0}function kn(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function In(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Kn(Xe){return Xe.Ra>>>(Xe.u&Ul-1)>>>0}function Qn(Xe){return e(Xe.bb<=Xe.Sb),Xe.h||Xe.bb==Xe.Sb&&Xe.u>Ul}function rr(Xe,hn){Xe.u=hn,Xe.h=Qn(Xe)}function or(Xe){Xe.u>=co&&(e(Xe.u>=co),On(Xe))}function pr(Xe){e(Xe!=null&&Xe.oa!=null),Xe.pa<Xe.Zc?(Xe.I=(Xe.oa[Xe.pa++]|Xe.I<<8)>>>0,Xe.b+=8):(e(Xe!=null&&Xe.oa!=null),Xe.pa<Xe.Yc?(Xe.b+=8,Xe.I=Xe.oa[Xe.pa++]|Xe.I<<8):Xe.Ka?Xe.b=0:(Xe.I<<=8,Xe.b+=8,Xe.Ka=1))}function mr(Xe){return Dn(Xe,1)}function Er(Xe,hn){var Tn=Xe.Ca;0>Xe.b&&pr(Xe);var Rn=Xe.b,Vn=Tn*hn>>>8,Bn=(Xe.I>>>Rn>Vn)+0;for(Bn?(Tn-=Vn,Xe.I-=Vn+1<<Rn>>>0):Tn=Vn+1,Rn=Tn,Vn=0;256<=Rn;)Vn+=8,Rn>>=8;return Rn=7^Vn+Ju[Rn],Xe.b-=Rn,Xe.Ca=(Tn<<Rn)-1,Bn}function jr(Xe,hn,Tn){Xe[hn+0]=Tn>>24&255,Xe[hn+1]=Tn>>16&255,Xe[hn+2]=Tn>>8&255,Xe[hn+3]=255&Tn}function Kr(Xe,hn){return Xe[hn+0]|Xe[hn+1]<<8}function Hr(Xe,hn){return Kr(Xe,hn)|Xe[hn+2]<<16}function xr(Xe,hn){return Kr(Xe,hn)|Kr(Xe,hn+2)<<16}function nr(Xe,hn){var Tn=1<<hn;return e(Xe!=null),e(0<hn),Xe.X=Te(Tn),Xe.X==null?0:(Xe.Mb=32-hn,Xe.Xa=hn,1)}function Oi(Xe,hn){e(Xe!=null),e(hn!=null),e(Xe.Xa==hn.Xa),r(hn.X,0,Xe.X,0,1<<hn.Xa)}function Ti(){this.X=[],this.Xa=this.Mb=0}function yi(Xe,hn,Tn,Rn){e(Tn!=null),e(Rn!=null);var Vn=Tn[0],Bn=Rn[0];return Vn==0&&(Vn=(Xe*Bn+hn/2)/hn),Bn==0&&(Bn=(hn*Vn+Xe/2)/Xe),0>=Vn||0>=Bn?0:(Tn[0]=Vn,Rn[0]=Bn,1)}function qr(Xe,hn){return Xe+(1<<hn)-1>>>hn}function di(Xe,hn){return((4278255360&Xe)+(4278255360&hn)>>>0&4278255360)+((16711935&Xe)+(16711935&hn)>>>0&16711935)>>>0}function Zr(Xe,hn){un[hn]=function(Tn,Rn,Vn,Bn,qn,Gn,Xn){var Zn;for(Zn=0;Zn<qn;++Zn){var cr=un[Xe](Gn[Xn+Zn-1],Vn,Bn+Zn);Gn[Xn+Zn]=di(Tn[Rn+Zn],cr)}}}function mi(){this.ud=this.hd=this.jd=0}function pi(Xe,hn){return((4278124286&(Xe^hn))>>>1)+(Xe&hn)>>>0}function Wi(Xe){return 0<=Xe&&256>Xe?Xe:0>Xe?0:255<Xe?255:void 0}function si(Xe,hn){return Wi(Xe+(Xe-hn+.5>>1))}function _r(Xe,hn,Tn){return Math.abs(hn-Tn)-Math.abs(Xe-Tn)}function Dr(Xe,hn,Tn,Rn,Vn,Bn,qn){for(Rn=Bn[qn-1],Tn=0;Tn<Vn;++Tn)Bn[qn+Tn]=Rn=di(Xe[hn+Tn],Rn)}function Xr(Xe,hn,Tn,Rn,Vn){var Bn;for(Bn=0;Bn<Tn;++Bn){var qn=Xe[hn+Bn],Gn=qn>>8&255,Xn=16711935&(Xn=(Xn=16711935&qn)+((Gn<<16)+Gn));Rn[Vn+Bn]=(4278255360&qn)+Xn>>>0}}function Gr(Xe,hn){hn.jd=255&Xe,hn.hd=Xe>>8&255,hn.ud=Xe>>16&255}function ii(Xe,hn,Tn,Rn,Vn,Bn){var qn;for(qn=0;qn<Rn;++qn){var Gn=hn[Tn+qn],Xn=Gn>>>8,Zn=Gn,cr=255&(cr=(cr=Gn>>>16)+((Xe.jd<<24>>24)*(Xn<<24>>24)>>>5));Zn=255&(Zn=(Zn+=(Xe.hd<<24>>24)*(Xn<<24>>24)>>>5)+((Xe.ud<<24>>24)*(cr<<24>>24)>>>5)),Vn[Bn+qn]=(4278255360&Gn)+(cr<<16)+Zn}}function hi(Xe,hn,Tn,Rn,Vn){un[hn]=function(Bn,qn,Gn,Xn,Zn,cr,Tr,tr,hr){for(Xn=Tr;Xn<tr;++Xn)for(Tr=0;Tr<hr;++Tr)Zn[cr++]=Vn(Gn[Rn(Bn[qn++])])},un[Xe]=function(Bn,qn,Gn,Xn,Zn,cr,Tr){var tr=8>>Bn.b,hr=Bn.Ea,wr=Bn.K[0],Vr=Bn.w;if(8>tr)for(Bn=(1<<Bn.b)-1,Vr=(1<<tr)-1;qn<Gn;++qn){var Sr,Lr=0;for(Sr=0;Sr<hr;++Sr)Sr&Bn||(Lr=Rn(Xn[Zn++])),cr[Tr++]=Vn(wr[Lr&Vr]),Lr>>=tr}else un["VP8LMapColor"+Tn](Xn,Zn,wr,Vr,cr,Tr,qn,Gn,hr)}}function Mi(Xe,hn,Tn,Rn,Vn){for(Tn=hn+Tn;hn<Tn;){var Bn=Xe[hn++];Rn[Vn++]=Bn>>16&255,Rn[Vn++]=Bn>>8&255,Rn[Vn++]=255&Bn}}function ji(Xe,hn,Tn,Rn,Vn){for(Tn=hn+Tn;hn<Tn;){var Bn=Xe[hn++];Rn[Vn++]=Bn>>16&255,Rn[Vn++]=Bn>>8&255,Rn[Vn++]=255&Bn,Rn[Vn++]=Bn>>24&255}}function Ur(Xe,hn,Tn,Rn,Vn){for(Tn=hn+Tn;hn<Tn;){var Bn=(qn=Xe[hn++])>>16&240|qn>>12&15,qn=240&qn|qn>>28&15;Rn[Vn++]=Bn,Rn[Vn++]=qn}}function Pi(Xe,hn,Tn,Rn,Vn){for(Tn=hn+Tn;hn<Tn;){var Bn=(qn=Xe[hn++])>>16&248|qn>>13&7,qn=qn>>5&224|qn>>3&31;Rn[Vn++]=Bn,Rn[Vn++]=qn}}function Bi(Xe,hn,Tn,Rn,Vn){for(Tn=hn+Tn;hn<Tn;){var Bn=Xe[hn++];Rn[Vn++]=255&Bn,Rn[Vn++]=Bn>>8&255,Rn[Vn++]=Bn>>16&255}}function vi(Xe,hn,Tn,Rn,Vn,Bn){if(Bn==0)for(Tn=hn+Tn;hn<Tn;)jr(Rn,((Bn=Xe[hn++])[0]>>24|Bn[1]>>8&65280|Bn[2]<<8&16711680|Bn[3]<<24)>>>0),Vn+=32;else r(Rn,Vn,Xe,hn,Tn)}function Ri(Xe,hn){un[hn][0]=un[Xe+"0"],un[hn][1]=un[Xe+"1"],un[hn][2]=un[Xe+"2"],un[hn][3]=un[Xe+"3"],un[hn][4]=un[Xe+"4"],un[hn][5]=un[Xe+"5"],un[hn][6]=un[Xe+"6"],un[hn][7]=un[Xe+"7"],un[hn][8]=un[Xe+"8"],un[hn][9]=un[Xe+"9"],un[hn][10]=un[Xe+"10"],un[hn][11]=un[Xe+"11"],un[hn][12]=un[Xe+"12"],un[hn][13]=un[Xe+"13"],un[hn][14]=un[Xe+"0"],un[hn][15]=un[Xe+"0"]}function ui(Xe){return Xe==gu||Xe==tu||Xe==Fu||Xe==Vu}function vs(){this.eb=[],this.size=this.A=this.fb=0}function ds(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ns(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new vs,this.f.kb=new ds,this.sd=null}function ni(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function oi(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Di(Xe){return alert("todo:WebPSamplerProcessPlane"),Xe.T}function Ns(Xe,hn){var Tn=Xe.T,Rn=hn.ba.f.RGBA,Vn=Rn.eb,Bn=Rn.fb+Xe.ka*Rn.A,qn=Oa[hn.ba.S],Gn=Xe.y,Xn=Xe.O,Zn=Xe.f,cr=Xe.N,Tr=Xe.ea,tr=Xe.W,hr=hn.cc,wr=hn.dc,Vr=hn.Mc,Sr=hn.Nc,Lr=Xe.ka,Fr=Xe.ka+Xe.T,Br=Xe.U,zr=Br+1>>1;for(Lr==0?qn(Gn,Xn,null,null,Zn,cr,Tr,tr,Zn,cr,Tr,tr,Vn,Bn,null,null,Br):(qn(hn.ec,hn.fc,Gn,Xn,hr,wr,Vr,Sr,Zn,cr,Tr,tr,Vn,Bn-Rn.A,Vn,Bn,Br),++Tn);Lr+2<Fr;Lr+=2)hr=Zn,wr=cr,Vr=Tr,Sr=tr,cr+=Xe.Rc,tr+=Xe.Rc,Bn+=2*Rn.A,qn(Gn,(Xn+=2*Xe.fa)-Xe.fa,Gn,Xn,hr,wr,Vr,Sr,Zn,cr,Tr,tr,Vn,Bn-Rn.A,Vn,Bn,Br);return Xn+=Xe.fa,Xe.j+Fr<Xe.o?(r(hn.ec,hn.fc,Gn,Xn,Br),r(hn.cc,hn.dc,Zn,cr,zr),r(hn.Mc,hn.Nc,Tr,tr,zr),Tn--):1&Fr||qn(Gn,Xn,null,null,Zn,cr,Tr,tr,Zn,cr,Tr,tr,Vn,Bn+Rn.A,null,null,Br),Tn}function mo(Xe,hn,Tn){var Rn=Xe.F,Vn=[Xe.J];if(Rn!=null){var Bn=Xe.U,qn=hn.ba.S,Gn=qn==Du||qn==Fu;hn=hn.ba.f.RGBA;var Xn=[0],Zn=Xe.ka;Xn[0]=Xe.T,Xe.Kb&&(Zn==0?--Xn[0]:(--Zn,Vn[0]-=Xe.width),Xe.j+Xe.ka+Xe.T==Xe.o&&(Xn[0]=Xe.o-Xe.j-Zn));var cr=hn.eb;Zn=hn.fb+Zn*hn.A,Xe=Mu(Rn,Vn[0],Xe.width,Bn,Xn,cr,Zn+(Gn?0:3),hn.A),e(Tn==Xn),Xe&&ui(qn)&&eu(cr,Zn,Gn,Bn,Xn,hn.A)}return 0}function Js(Xe){var hn=Xe.ma,Tn=hn.ba.S,Rn=11>Tn,Vn=Tn==ql||Tn==Lu||Tn==Du||Tn==js||Tn==12||ui(Tn);if(hn.memory=null,hn.Ib=null,hn.Jb=null,hn.Nd=null,!ma(hn.Oa,Xe,Vn?11:12))return 0;if(Vn&&ui(Tn)&&jl(),Xe.da)alert("todo:use_scaling");else{if(Rn){if(hn.Ib=Di,Xe.Kb){if(Tn=Xe.U+1>>1,hn.memory=Te(Xe.U+2*Tn),hn.memory==null)return 0;hn.ec=hn.memory,hn.fc=0,hn.cc=hn.ec,hn.dc=hn.fc+Xe.U,hn.Mc=hn.cc,hn.Nc=hn.dc+Tn,hn.Ib=Ns,jl()}}else alert("todo:EmitYUV");Vn&&(hn.Jb=mo,Rn&&yo())}if(Rn&&!Jo){for(Xe=0;256>Xe;++Xe)Na[Xe]=89858*(Xe-128)+sl>>Rl,Ma[Xe]=-22014*(Xe-128)+sl,vu[Xe]=-45773*(Xe-128),su[Xe]=113618*(Xe-128)+sl>>Rl;for(Xe=Os;Xe<Ds;++Xe)hn=76283*(Xe-16)+sl>>Rl,oc[Xe-Os]=fs(hn,255),nd[Xe-Os]=fs(hn+8>>4,15);Jo=1}return 1}function ki(Xe){var hn=Xe.ma,Tn=Xe.U,Rn=Xe.T;return e(!(1&Xe.ka)),0>=Tn||0>=Rn?0:(Tn=hn.Ib(Xe,hn),hn.Jb!=null&&hn.Jb(Xe,hn,Tn),hn.Dc+=Tn,1)}function ms(Xe){Xe.ma.memory=null}function So(Xe,hn,Tn,Rn){return $n(Xe,8)!=47?0:(hn[0]=$n(Xe,14)+1,Tn[0]=$n(Xe,14)+1,Rn[0]=$n(Xe,1),$n(Xe,3)!=0?0:!Xe.h)}function Ms(Xe,hn){if(4>Xe)return Xe+1;var Tn=Xe-2>>1;return(2+(1&Xe)<<Tn)+$n(hn,Tn)+1}function Zs(Xe,hn){return 120<hn?hn-120:1<=(Tn=((Tn=Nd[hn-1])>>4)*Xe+(8-(15&Tn)))?Tn:1;var Tn}function ws(Xe,hn,Tn){var Rn=Kn(Tn),Vn=Xe[hn+=255&Rn].g-8;return 0<Vn&&(rr(Tn,Tn.u+8),Rn=Kn(Tn),hn+=Xe[hn].value,hn+=Rn&(1<<Vn)-1),rr(Tn,Tn.u+Xe[hn].g),Xe[hn].value}function Cs(Xe,hn,Tn){return Tn.g+=Xe.g,Tn.value+=Xe.value<<hn>>>0,e(8>=Tn.g),Xe.g}function xs(Xe,hn,Tn){var Rn=Xe.xc;return e((hn=Rn==0?0:Xe.vc[Xe.md*(Tn>>Rn)+(hn>>Rn)])<Xe.Wb),Xe.Ya[hn]}function Yo(Xe,hn,Tn,Rn){var Vn=Xe.ab,Bn=Xe.c*hn,qn=Xe.C;hn=qn+hn;var Gn=Tn,Xn=Rn;for(Rn=Xe.Ta,Tn=Xe.Ua;0<Vn--;){var Zn=Xe.gc[Vn],cr=qn,Tr=hn,tr=Gn,hr=Xn,wr=(Xn=Rn,Gn=Tn,Zn.Ea);switch(e(cr<Tr),e(Tr<=Zn.nc),Zn.hc){case 2:cu(tr,hr,(Tr-cr)*wr,Xn,Gn);break;case 0:var Vr=cr,Sr=Tr,Lr=Xn,Fr=Gn,Br=(Si=Zn).Ea;Vr==0&&(Ia(tr,hr,null,null,1,Lr,Fr),Dr(tr,hr+1,0,0,Br-1,Lr,Fr+1),hr+=Br,Fr+=Br,++Vr);for(var zr=1<<Si.b,Ni=zr-1,xi=qr(Br,Si.b),is=Si.K,Si=Si.w+(Vr>>Si.b)*xi;Vr<Sr;){var ps=is,ho=Si,as=1;for(Ra(tr,hr,Lr,Fr-Br,1,Lr,Fr);as<Br;){var Ei=(as&~Ni)+zr;Ei>Br&&(Ei=Br),(0,Il[ps[ho++]>>8&15])(tr,hr+ +as,Lr,Fr+as-Br,Ei-as,Lr,Fr+as),as=Ei}hr+=Br,Fr+=Br,++Vr&Ni||(Si+=xi)}Tr!=Zn.nc&&r(Xn,Gn-wr,Xn,Gn+(Tr-cr-1)*wr,wr);break;case 1:for(wr=tr,Sr=hr,Br=(tr=Zn.Ea)-(Fr=tr&~(Lr=(hr=1<<Zn.b)-1)),Vr=qr(tr,Zn.b),zr=Zn.K,Zn=Zn.w+(cr>>Zn.b)*Vr;cr<Tr;){for(Ni=zr,xi=Zn,is=new mi,Si=Sr+Fr,ps=Sr+tr;Sr<Si;)Gr(Ni[xi++],is),pl(is,wr,Sr,hr,Xn,Gn),Sr+=hr,Gn+=hr;Sr<ps&&(Gr(Ni[xi++],is),pl(is,wr,Sr,Br,Xn,Gn),Sr+=Br,Gn+=Br),++cr&Lr||(Zn+=Vr)}break;case 3:if(tr==Xn&&hr==Gn&&0<Zn.b){for(Sr=Xn,tr=wr=Gn+(Tr-cr)*wr-(Fr=(Tr-cr)*qr(Zn.Ea,Zn.b)),hr=Xn,Lr=Gn,Vr=[],Fr=(Br=Fr)-1;0<=Fr;--Fr)Vr[Fr]=hr[Lr+Fr];for(Fr=Br-1;0<=Fr;--Fr)Sr[tr+Fr]=Vr[Fr];zl(Zn,cr,Tr,Xn,wr,Xn,Gn)}else zl(Zn,cr,Tr,tr,hr,Xn,Gn)}Gn=Rn,Xn=Tn}Xn!=Tn&&r(Rn,Tn,Gn,Xn,Bn)}function ta(Xe,hn){var Tn=Xe.V,Rn=Xe.Ba+Xe.c*Xe.C,Vn=hn-Xe.C;if(e(hn<=Xe.l.o),e(16>=Vn),0<Vn){var Bn=Xe.l,qn=Xe.Ta,Gn=Xe.Ua,Xn=Bn.width;if(Yo(Xe,Vn,Tn,Rn),Vn=Gn=[Gn],e((Tn=Xe.C)<(Rn=hn)),e(Bn.v<Bn.va),Rn>Bn.o&&(Rn=Bn.o),Tn<Bn.j){var Zn=Bn.j-Tn;Tn=Bn.j,Vn[0]+=Zn*Xn}if(Tn>=Rn?Tn=0:(Vn[0]+=4*Bn.v,Bn.ka=Tn-Bn.j,Bn.U=Bn.va-Bn.v,Bn.T=Rn-Tn,Tn=1),Tn){if(Gn=Gn[0],11>(Tn=Xe.ca).S){var cr=Tn.f.RGBA,Tr=(Rn=Tn.S,Vn=Bn.U,Bn=Bn.T,Zn=cr.eb,cr.A),tr=Bn;for(cr=cr.fb+Xe.Ma*cr.A;0<tr--;){var hr=qn,wr=Gn,Vr=Vn,Sr=Zn,Lr=cr;switch(Rn){case nc:hu(hr,wr,Vr,Sr,Lr);break;case ql:ka(hr,wr,Vr,Sr,Lr);break;case gu:ka(hr,wr,Vr,Sr,Lr),eu(Sr,Lr,0,Vr,1,0);break;case Xc:Hs(hr,wr,Vr,Sr,Lr);break;case Lu:vi(hr,wr,Vr,Sr,Lr,1);break;case tu:vi(hr,wr,Vr,Sr,Lr,1),eu(Sr,Lr,0,Vr,1,0);break;case Du:vi(hr,wr,Vr,Sr,Lr,0);break;case Fu:vi(hr,wr,Vr,Sr,Lr,0),eu(Sr,Lr,1,Vr,1,0);break;case js:ml(hr,wr,Vr,Sr,Lr);break;case Vu:ml(hr,wr,Vr,Sr,Lr),Ac(Sr,Lr,Vr,1,0);break;case rc:Ws(hr,wr,Vr,Sr,Lr);break;default:e(0)}Gn+=Xn,cr+=Tr}Xe.Ma+=Bn}else alert("todo:EmitRescaledRowsYUVA");e(Xe.Ma<=Tn.height)}}Xe.C=hn,e(Xe.C<=Xe.i)}function oo(Xe){var hn;if(0<Xe.ua)return 0;for(hn=0;hn<Xe.Wb;++hn){var Tn=Xe.Ya[hn].G,Rn=Xe.Ya[hn].H;if(0<Tn[1][Rn[1]+0].g||0<Tn[2][Rn[2]+0].g||0<Tn[3][Rn[3]+0].g)return 0}return 1}function Hn(Xe,hn,Tn,Rn,Vn,Bn){if(Xe.Z!=0){var qn=Xe.qd,Gn=Xe.rd;for(e(oa[Xe.Z]!=null);hn<Tn;++hn)oa[Xe.Z](qn,Gn,Rn,Vn,Rn,Vn,Bn),qn=Rn,Gn=Vn,Vn+=Bn;Xe.qd=qn,Xe.rd=Gn}}function ir(Xe,hn){var Tn=Xe.l.ma,Rn=Tn.Z==0||Tn.Z==1?Xe.l.j:Xe.C;if(Rn=Xe.C<Rn?Rn:Xe.C,e(hn<=Xe.l.o),hn>Rn){var Vn=Xe.l.width,Bn=Tn.ca,qn=Tn.tb+Vn*Rn,Gn=Xe.V,Xn=Xe.Ba+Xe.c*Rn,Zn=Xe.gc;e(Xe.ab==1),e(Zn[0].hc==3),Ql(Zn[0],Rn,hn,Gn,Xn,Bn,qn),Hn(Tn,Rn,hn,Bn,qn,Vn)}Xe.C=Xe.Ma=hn}function ur(Xe,hn,Tn,Rn,Vn,Bn,qn){var Gn=Xe.$/Rn,Xn=Xe.$%Rn,Zn=Xe.m,cr=Xe.s,Tr=Tn+Xe.$,tr=Tr;Vn=Tn+Rn*Vn;var hr=Tn+Rn*Bn,wr=280+cr.ua,Vr=Xe.Pb?Gn:16777216,Sr=0<cr.ua?cr.Wa:null,Lr=cr.wc,Fr=Tr<hr?xs(cr,Xn,Gn):null;e(Xe.C<Bn),e(hr<=Vn);var Br=!1;e:for(;;){for(;Br||Tr<hr;){var zr=0;if(Gn>=Vr){var Ni=Tr-Tn;e((Vr=Xe).Pb),Vr.wd=Vr.m,Vr.xd=Ni,0<Vr.s.ua&&Oi(Vr.s.Wa,Vr.s.vb),Vr=Gn+sc}if(Xn&Lr||(Fr=xs(cr,Xn,Gn)),e(Fr!=null),Fr.Qb&&(hn[Tr]=Fr.qb,Br=!0),!Br)if(or(Zn),Fr.jc){zr=Zn,Ni=hn;var xi=Tr,is=Fr.pd[Kn(zr)&ya-1];e(Fr.jc),256>is.g?(rr(zr,zr.u+is.g),Ni[xi]=is.value,zr=0):(rr(zr,zr.u+is.g-256),e(256<=is.value),zr=is.value),zr==0&&(Br=!0)}else zr=ws(Fr.G[0],Fr.H[0],Zn);if(Zn.h)break;if(Br||256>zr){if(!Br)if(Fr.nd)hn[Tr]=(Fr.qb|zr<<8)>>>0;else{if(or(Zn),Br=ws(Fr.G[1],Fr.H[1],Zn),or(Zn),Ni=ws(Fr.G[2],Fr.H[2],Zn),xi=ws(Fr.G[3],Fr.H[3],Zn),Zn.h)break;hn[Tr]=(xi<<24|Br<<16|zr<<8|Ni)>>>0}if(Br=!1,++Tr,++Xn>=Rn&&(Xn=0,++Gn,qn!=null&&Gn<=Bn&&!(Gn%16)&&qn(Xe,Gn),Sr!=null))for(;tr<Tr;)zr=hn[tr++],Sr.X[(506832829*zr&4294967295)>>>Sr.Mb]=zr}else if(280>zr){if(zr=Ms(zr-256,Zn),Ni=ws(Fr.G[4],Fr.H[4],Zn),or(Zn),Ni=Zs(Rn,Ni=Ms(Ni,Zn)),Zn.h)break;if(Tr-Tn<Ni||Vn-Tr<zr)break e;for(xi=0;xi<zr;++xi)hn[Tr+xi]=hn[Tr+xi-Ni];for(Tr+=zr,Xn+=zr;Xn>=Rn;)Xn-=Rn,++Gn,qn!=null&&Gn<=Bn&&!(Gn%16)&&qn(Xe,Gn);if(e(Tr<=Vn),Xn&Lr&&(Fr=xs(cr,Xn,Gn)),Sr!=null)for(;tr<Tr;)zr=hn[tr++],Sr.X[(506832829*zr&4294967295)>>>Sr.Mb]=zr}else{if(!(zr<wr))break e;for(Br=zr-280,e(Sr!=null);tr<Tr;)zr=hn[tr++],Sr.X[(506832829*zr&4294967295)>>>Sr.Mb]=zr;zr=Tr,e(!(Br>>>(Ni=Sr).Xa)),hn[zr]=Ni.X[Br],Br=!0}Br||e(Zn.h==Qn(Zn))}if(Xe.Pb&&Zn.h&&Tr<Vn)e(Xe.m.h),Xe.a=5,Xe.m=Xe.wd,Xe.$=Xe.xd,0<Xe.s.ua&&Oi(Xe.s.vb,Xe.s.Wa);else{if(Zn.h)break e;qn?.(Xe,Gn>Bn?Bn:Gn),Xe.a=0,Xe.$=Tr-Tn}return 1}return Xe.a=3,0}function gr(Xe){e(Xe!=null),Xe.vc=null,Xe.yc=null,Xe.Ya=null;var hn=Xe.Wa;hn!=null&&(hn.X=null),Xe.vb=null,e(Xe!=null)}function Pr(){var Xe=new qs;return Xe==null?null:(Xe.a=0,Xe.xb=yu,Ri("Predictor","VP8LPredictors"),Ri("Predictor","VP8LPredictors_C"),Ri("PredictorAdd","VP8LPredictorsAdd"),Ri("PredictorAdd","VP8LPredictorsAdd_C"),cu=Xr,pl=ii,hu=Mi,ka=ji,ml=Ur,Ws=Pi,Hs=Bi,un.VP8LMapColor32b=du,un.VP8LMapColor8b=Pl,Xe)}function Cr(Xe,hn,Tn,Rn,Vn){var Bn=1,qn=[Xe],Gn=[hn],Xn=Rn.m,Zn=Rn.s,cr=null,Tr=0;e:for(;;){if(Tn)for(;Bn&&$n(Xn,1);){var tr=qn,hr=Gn,wr=Rn,Vr=1,Sr=wr.m,Lr=wr.gc[wr.ab],Fr=$n(Sr,2);if(wr.Oc&1<<Fr)Bn=0;else{switch(wr.Oc|=1<<Fr,Lr.hc=Fr,Lr.Ea=tr[0],Lr.nc=hr[0],Lr.K=[null],++wr.ab,e(4>=wr.ab),Fr){case 0:case 1:Lr.b=$n(Sr,3)+2,Vr=Cr(qr(Lr.Ea,Lr.b),qr(Lr.nc,Lr.b),0,wr,Lr.K),Lr.K=Lr.K[0];break;case 3:var Br,zr=$n(Sr,8)+1,Ni=16<zr?0:4<zr?1:2<zr?2:3;if(tr[0]=qr(Lr.Ea,Ni),Lr.b=Ni,Br=Vr=Cr(zr,1,0,wr,Lr.K)){var xi,is=zr,Si=Lr,ps=1<<(8>>Si.b),ho=Te(ps);if(ho==null)Br=0;else{var as=Si.K[0],Ei=Si.w;for(ho[0]=Si.K[0][0],xi=1;xi<1*is;++xi)ho[xi]=di(as[Ei+xi],ho[xi-1]);for(;xi<4*ps;++xi)ho[xi]=0;Si.K[0]=null,Si.K[0]=ho,Br=1}}Vr=Br;break;case 2:break;default:e(0)}Bn=Vr}}if(qn=qn[0],Gn=Gn[0],Bn&&$n(Xn,1)&&!(Bn=1<=(Tr=$n(Xn,4))&&11>=Tr)){Rn.a=3;break e}var ci;if(ci=Bn)t:{var wo,Ji,cs,Gs=Rn,Wo=qn,Oo=Gn,so=Tr,jo=Tn,Ho=Gs.m,to=Gs.s,bs=[null],Ps=1,no=0,Is=Jc[so];n:for(;;){if(jo&&$n(Ho,1)){var fo=$n(Ho,3)+2,po=qr(Wo,fo),$s=qr(Oo,fo),aa=po*$s;if(!Cr(po,$s,0,Gs,bs))break n;for(bs=bs[0],to.xc=fo,wo=0;wo<aa;++wo){var Fs=bs[wo]>>8&65535;bs[wo]=Fs,Fs>=Ps&&(Ps=Fs+1)}}if(Ho.h)break n;for(Ji=0;5>Ji;++Ji){var Bs=nu[Ji];!Ji&&0<so&&(Bs+=1<<so),no<Bs&&(no=Bs)}var No=Re(Ps*Is,En),Zo=Ps,La=Re(Zo,Ln);if(La==null)var xo=null;else e(65536>=Zo),xo=La;var Eo=Te(no);if(xo==null||Eo==null||No==null){Gs.a=1;break n}var la=No;for(wo=cs=0;wo<Ps;++wo){var Us=xo[wo],ua=Us.G,Qa=Us.H,ol=0,Go=1,To=0;for(Ji=0;5>Ji;++Ji){Bs=nu[Ji],ua[Ji]=la,Qa[Ji]=cs,!Ji&&0<so&&(Bs+=1<<so);i:{var Gl,Cl=Bs,wu=Gs,bl=Eo,sd=la,Fc=cs,Qs=0,al=wu.m,Vc=$n(al,1);if(Ee(bl,0,0,Cl),Vc){var jc=$n(al,1)+1,ac=$n(al,1),uc=$n(al,ac==0?1:8);bl[uc]=1,jc==2&&(bl[uc=$n(al,8)]=1);var vl=1}else{var ro=Te(19),Mo=$n(al,4)+4;if(19<Mo){wu.a=3;var Ao=0;break i}for(Gl=0;Gl<Mo;++Gl)ro[Od[Gl]]=$n(al,3);var xu=void 0,Ol=void 0,Eu=wu,Vd=ro,$o=Cl,cc=bl,zu=0,wl=Eu.m,ll=8,$a=Re(128,En);r:for(;xn($a,0,7,Vd,19);){if($n(wl,1)){var qu=2+2*$n(wl,3);if((xu=2+$n(wl,qu))>$o)break r}else xu=$o;for(Ol=0;Ol<$o&&xu--;){or(wl);var dc=$a[0+(127&Kn(wl))];rr(wl,wl.u+dc.g);var Kl=dc.value;if(16>Kl)cc[Ol++]=Kl,Kl!=0&&(ll=Kl);else{var od=Kl==16,$c=Kl-16,ad=ic[$c],Bc=$n(wl,ju[$c])+ad;if(Ol+Bc>$o)break r;for(var ld=od?ll:0;0<Bc--;)cc[Ol++]=ld}}zu=1;break r}zu||(Eu.a=3),vl=zu}(vl=vl&&!al.h)&&(Qs=xn(sd,Fc,8,bl,Cl)),vl&&Qs!=0?Ao=Qs:(wu.a=3,Ao=0)}if(Ao==0)break n;if(Go&&Qc[Ji]==1&&(Go=la[cs].g==0),ol+=la[cs].g,cs+=Ao,3>=Ji){var Tu,hc=Eo[0];for(Tu=1;Tu<Bs;++Tu)Eo[Tu]>hc&&(hc=Eo[Tu]);To+=hc}}if(Us.nd=Go,Us.Qb=0,Go&&(Us.qb=(ua[3][Qa[3]+0].value<<24|ua[1][Qa[1]+0].value<<16|ua[2][Qa[2]+0].value)>>>0,ol==0&&256>ua[0][Qa[0]+0].value&&(Us.Qb=1,Us.qb+=ua[0][Qa[0]+0].value<<8)),Us.jc=!Us.Qb&&6>To,Us.jc){var Wu,Ba=Us;for(Wu=0;Wu<ya;++Wu){var Nl=Wu,ul=Ba.pd[Nl],au=Ba.G[0][Ba.H[0]+Nl];256<=au.value?(ul.g=au.g+256,ul.value=au.value):(ul.g=0,ul.value=0,Nl>>=Cs(au,8,ul),Nl>>=Cs(Ba.G[1][Ba.H[1]+Nl],16,ul),Nl>>=Cs(Ba.G[2][Ba.H[2]+Nl],0,ul),Cs(Ba.G[3][Ba.H[3]+Nl],24,ul))}}}to.vc=bs,to.Wb=Ps,to.Ya=xo,to.yc=No,ci=1;break t}ci=0}if(!(Bn=ci)){Rn.a=3;break e}if(0<Tr){if(Zn.ua=1<<Tr,!nr(Zn.Wa,Tr)){Rn.a=1,Bn=0;break e}}else Zn.ua=0;var fc=Rn,pc=qn,ud=Gn,mc=fc.s,gc=mc.xc;if(fc.c=pc,fc.i=ud,mc.md=qr(pc,gc),mc.wc=gc==0?-1:(1<<gc)-1,Tn){Rn.xb=yl;break e}if((cr=Te(qn*Gn))==null){Rn.a=1,Bn=0;break e}Bn=(Bn=ur(Rn,cr,0,qn,Gn,Gn,null))&&!Xn.h;break e}return Bn?(Vn!=null?Vn[0]=cr:(e(cr==null),e(Tn)),Rn.$=0,Tn||gr(Zn)):gr(Zn),Bn}function Jr(Xe,hn){var Tn=Xe.c*Xe.i,Rn=Tn+hn+16*hn;return e(Xe.c<=hn),Xe.V=Te(Rn),Xe.V==null?(Xe.Ta=null,Xe.Ua=0,Xe.a=1,0):(Xe.Ta=Xe.V,Xe.Ua=Xe.Ba+Tn+hn,1)}function _i(Xe,hn){var Tn=Xe.C,Rn=hn-Tn,Vn=Xe.V,Bn=Xe.Ba+Xe.c*Tn;for(e(hn<=Xe.l.o);0<Rn;){var qn=16<Rn?16:Rn,Gn=Xe.l.ma,Xn=Xe.l.width,Zn=Xn*qn,cr=Gn.ca,Tr=Gn.tb+Xn*Tn,tr=Xe.Ta,hr=Xe.Ua;Yo(Xe,qn,Vn,Bn),Sc(tr,hr,cr,Tr,Zn),Hn(Gn,Tn,Tn+qn,cr,Tr,Xn),Rn-=qn,Vn+=qn*Xe.c,Tn+=qn}e(Tn==hn),Xe.C=Xe.Ma=hn}function fi(){this.ub=this.yd=this.td=this.Rb=0}function Ui(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function gs(){this.Fb=this.Bb=this.Cb=0,this.Zb=Te(4),this.Lb=Te(4)}function Hi(){this.Yb=function(){var Xe=[];return function hn(Tn,Rn,Vn){for(var Bn=Vn[Rn],qn=0;qn<Bn&&(Tn.push(Vn.length>Rn+1?[]:0),!(Vn.length<Rn+1));qn++)hn(Tn[qn],Rn+1,Vn)}(Xe,0,[3,11]),Xe}()}function Vs(){this.jb=Te(3),this.Wc=Me([4,8],Hi),this.Xc=Me([4,17],Hi)}function Or(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new Te(4),this.od=new Te(4)}function Fi(){this.ld=this.La=this.dd=this.tc=0}function rs(){this.Na=this.la=0}function go(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Uo(){this.ad=Te(384),this.Za=0,this.Ob=Te(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ea(){this.uc=this.M=this.Nb=0,this.wa=Array(new Fi),this.Y=0,this.ya=Array(new Uo),this.aa=0,this.l=new _s}function Po(){this.y=Te(16),this.f=Te(8),this.ea=Te(8)}function dl(){this.cb=this.a=0,this.sc="",this.m=new kn,this.Od=new fi,this.Kc=new Ui,this.ed=new Or,this.Qa=new gs,this.Ic=this.$c=this.Aa=0,this.D=new Ea,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=Re(8,kn),this.ia=0,this.pb=Re(4,go),this.Pa=new Vs,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Po),this.Hd=0,this.rb=Array(new rs),this.sb=0,this.wa=Array(new Fi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Uo),this.L=this.aa=0,this.gd=Me([4,2],Fi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function _s(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function qa(){var Xe=new dl;return Xe!=null&&(Xe.a=0,Xe.sc="OK",Xe.cb=0,Xe.Xb=0,ru||(ru=na)),Xe}function zs(Xe,hn,Tn){return Xe.a==0&&(Xe.a=hn,Xe.sc=Tn,Xe.cb=0),0}function hl(Xe,hn,Tn){return 3<=Tn&&Xe[hn+0]==157&&Xe[hn+1]==1&&Xe[hn+2]==42}function Wa(Xe,hn){if(Xe==null)return 0;if(Xe.a=0,Xe.sc="OK",hn==null)return zs(Xe,2,"null VP8Io passed to VP8GetHeaders()");var Tn=hn.data,Rn=hn.w,Vn=hn.ha;if(4>Vn)return zs(Xe,7,"Truncated header.");var Bn=Tn[Rn+0]|Tn[Rn+1]<<8|Tn[Rn+2]<<16,qn=Xe.Od;if(qn.Rb=!(1&Bn),qn.td=Bn>>1&7,qn.yd=Bn>>4&1,qn.ub=Bn>>5,3<qn.td)return zs(Xe,3,"Incorrect keyframe parameters.");if(!qn.yd)return zs(Xe,4,"Frame not displayable.");Rn+=3,Vn-=3;var Gn=Xe.Kc;if(qn.Rb){if(7>Vn)return zs(Xe,7,"cannot parse picture header");if(!hl(Tn,Rn,Vn))return zs(Xe,3,"Bad code word");Gn.c=16383&(Tn[Rn+4]<<8|Tn[Rn+3]),Gn.Td=Tn[Rn+4]>>6,Gn.i=16383&(Tn[Rn+6]<<8|Tn[Rn+5]),Gn.Ud=Tn[Rn+6]>>6,Rn+=7,Vn-=7,Xe.za=Gn.c+15>>4,Xe.Ub=Gn.i+15>>4,hn.width=Gn.c,hn.height=Gn.i,hn.Da=0,hn.j=0,hn.v=0,hn.va=hn.width,hn.o=hn.height,hn.da=0,hn.ib=hn.width,hn.hb=hn.height,hn.U=hn.width,hn.T=hn.height,Ee((Bn=Xe.Pa).jb,0,255,Bn.jb.length),e((Bn=Xe.Qa)!=null),Bn.Cb=0,Bn.Bb=0,Bn.Fb=1,Ee(Bn.Zb,0,0,Bn.Zb.length),Ee(Bn.Lb,0,0,Bn.Lb)}if(qn.ub>Vn)return zs(Xe,7,"bad partition length");Cn(Bn=Xe.m,Tn,Rn,qn.ub),Rn+=qn.ub,Vn-=qn.ub,qn.Rb&&(Gn.Ld=mr(Bn),Gn.Kd=mr(Bn)),Gn=Xe.Qa;var Xn,Zn=Xe.Pa;if(e(Bn!=null),e(Gn!=null),Gn.Cb=mr(Bn),Gn.Cb){if(Gn.Bb=mr(Bn),mr(Bn)){for(Gn.Fb=mr(Bn),Xn=0;4>Xn;++Xn)Gn.Zb[Xn]=mr(Bn)?Un(Bn,7):0;for(Xn=0;4>Xn;++Xn)Gn.Lb[Xn]=mr(Bn)?Un(Bn,6):0}if(Gn.Bb)for(Xn=0;3>Xn;++Xn)Zn.jb[Xn]=mr(Bn)?Dn(Bn,8):255}else Gn.Bb=0;if(Bn.Ka)return zs(Xe,3,"cannot parse segment header");if((Gn=Xe.ed).zd=mr(Bn),Gn.Tb=Dn(Bn,6),Gn.wb=Dn(Bn,3),Gn.Pc=mr(Bn),Gn.Pc&&mr(Bn)){for(Zn=0;4>Zn;++Zn)mr(Bn)&&(Gn.vd[Zn]=Un(Bn,6));for(Zn=0;4>Zn;++Zn)mr(Bn)&&(Gn.od[Zn]=Un(Bn,6))}if(Xe.L=Gn.Tb==0?0:Gn.zd?1:2,Bn.Ka)return zs(Xe,3,"cannot parse filter header");var cr=Vn;if(Vn=Xn=Rn,Rn=Xn+cr,Gn=cr,Xe.Xb=(1<<Dn(Xe.m,2))-1,cr<3*(Zn=Xe.Xb))Tn=7;else{for(Xn+=3*Zn,Gn-=3*Zn,cr=0;cr<Zn;++cr){var Tr=Tn[Vn+0]|Tn[Vn+1]<<8|Tn[Vn+2]<<16;Tr>Gn&&(Tr=Gn),Cn(Xe.Jc[+cr],Tn,Xn,Tr),Xn+=Tr,Gn-=Tr,Vn+=3}Cn(Xe.Jc[+Zn],Tn,Xn,Gn),Tn=Xn<Rn?0:5}if(Tn!=0)return zs(Xe,Tn,"cannot parse partitions");for(Tn=Dn(Xn=Xe.m,7),Vn=mr(Xn)?Un(Xn,4):0,Rn=mr(Xn)?Un(Xn,4):0,Gn=mr(Xn)?Un(Xn,4):0,Zn=mr(Xn)?Un(Xn,4):0,Xn=mr(Xn)?Un(Xn,4):0,cr=Xe.Qa,Tr=0;4>Tr;++Tr){if(cr.Cb){var tr=cr.Zb[Tr];cr.Fb||(tr+=Tn)}else{if(0<Tr){Xe.pb[Tr]=Xe.pb[0];continue}tr=Tn}var hr=Xe.pb[Tr];hr.Sc[0]=_u[fs(tr+Vn,127)],hr.Sc[1]=$u[fs(tr+0,127)],hr.Eb[0]=2*_u[fs(tr+Rn,127)],hr.Eb[1]=101581*$u[fs(tr+Gn,127)]>>16,8>hr.Eb[1]&&(hr.Eb[1]=8),hr.Qc[0]=_u[fs(tr+Zn,117)],hr.Qc[1]=$u[fs(tr+Xn,127)],hr.lc=tr+Xn}if(!qn.Rb)return zs(Xe,4,"Not a key frame.");for(mr(Bn),qn=Xe.Pa,Tn=0;4>Tn;++Tn){for(Vn=0;8>Vn;++Vn)for(Rn=0;3>Rn;++Rn)for(Gn=0;11>Gn;++Gn)Zn=Er(Bn,Ld[Tn][Vn][Rn][Gn])?Dn(Bn,8):ed[Tn][Vn][Rn][Gn],qn.Wc[Tn][Vn].Yb[Rn][Gn]=Zn;for(Vn=0;17>Vn;++Vn)qn.Xc[Tn][Vn]=qn.Wc[Tn][Mc[Vn]]}return Xe.kc=mr(Bn),Xe.kc&&(Xe.Bd=Dn(Bn,8)),Xe.cb=1}function na(Xe,hn,Tn,Rn,Vn,Bn,qn){var Gn=hn[Vn].Yb[Tn];for(Tn=0;16>Vn;++Vn){if(!Er(Xe,Gn[Tn+0]))return Vn;for(;!Er(Xe,Gn[Tn+1]);)if(Gn=hn[++Vn].Yb[0],Tn=0,Vn==16)return 16;var Xn=hn[Vn+1].Yb;if(Er(Xe,Gn[Tn+2])){var Zn=Xe,cr=0;if(Er(Zn,(tr=Gn)[(Tr=Tn)+3]))if(Er(Zn,tr[Tr+6])){for(Gn=0,Tr=2*(cr=Er(Zn,tr[Tr+8]))+(tr=Er(Zn,tr[Tr+9+cr])),cr=0,tr=Oc[Tr];tr[Gn];++Gn)cr+=cr+Er(Zn,tr[Gn]);cr+=3+(8<<Tr)}else Er(Zn,tr[Tr+7])?(cr=7+2*Er(Zn,165),cr+=Er(Zn,145)):cr=5+Er(Zn,159);else cr=Er(Zn,tr[Tr+4])?3+Er(Zn,tr[Tr+5]):2;Gn=Xn[2]}else cr=1,Gn=Xn[1];Xn=qn+Nc[Vn],0>(Zn=Xe).b&&pr(Zn);var Tr,tr=Zn.b,hr=(Tr=Zn.Ca>>1)-(Zn.I>>tr)>>31;--Zn.b,Zn.Ca+=hr,Zn.Ca|=1,Zn.I-=(Tr+1&hr)<<tr,Bn[Xn]=((cr^hr)-hr)*Rn[(0<Vn)+0]}return 16}function ra(Xe){var hn=Xe.rb[Xe.sb-1];hn.la=0,hn.Na=0,Ee(Xe.zc,0,0,Xe.zc.length),Xe.ja=0}function ao(Xe,hn,Tn,Rn,Vn){Vn=Xe[hn+Tn+32*Rn]+(Vn>>3),Xe[hn+Tn+32*Rn]=-256&Vn?0>Vn?0:255:Vn}function Va(Xe,hn,Tn,Rn,Vn,Bn){ao(Xe,hn,0,Tn,Rn+Vn),ao(Xe,hn,1,Tn,Rn+Bn),ao(Xe,hn,2,Tn,Rn-Bn),ao(Xe,hn,3,Tn,Rn-Vn)}function Ts(Xe){return(20091*Xe>>16)+Xe}function Io(Xe,hn,Tn,Rn){var Vn,Bn=0,qn=Te(16);for(Vn=0;4>Vn;++Vn){var Gn=Xe[hn+0]+Xe[hn+8],Xn=Xe[hn+0]-Xe[hn+8],Zn=(35468*Xe[hn+4]>>16)-Ts(Xe[hn+12]),cr=Ts(Xe[hn+4])+(35468*Xe[hn+12]>>16);qn[Bn+0]=Gn+cr,qn[Bn+1]=Xn+Zn,qn[Bn+2]=Xn-Zn,qn[Bn+3]=Gn-cr,Bn+=4,hn++}for(Vn=Bn=0;4>Vn;++Vn)Gn=(Xe=qn[Bn+0]+4)+qn[Bn+8],Xn=Xe-qn[Bn+8],Zn=(35468*qn[Bn+4]>>16)-Ts(qn[Bn+12]),ao(Tn,Rn,0,0,Gn+(cr=Ts(qn[Bn+4])+(35468*qn[Bn+12]>>16))),ao(Tn,Rn,1,0,Xn+Zn),ao(Tn,Rn,2,0,Xn-Zn),ao(Tn,Rn,3,0,Gn-cr),Bn++,Rn+=32}function Ha(Xe,hn,Tn,Rn){var Vn=Xe[hn+0]+4,Bn=35468*Xe[hn+4]>>16,qn=Ts(Xe[hn+4]),Gn=35468*Xe[hn+1]>>16;Va(Tn,Rn,0,Vn+qn,Xe=Ts(Xe[hn+1]),Gn),Va(Tn,Rn,1,Vn+Bn,Xe,Gn),Va(Tn,Rn,2,Vn-Bn,Xe,Gn),Va(Tn,Rn,3,Vn-qn,Xe,Gn)}function ja(Xe,hn,Tn,Rn,Vn){Io(Xe,hn,Tn,Rn),Vn&&Io(Xe,hn+16,Tn,Rn+4)}function ha(Xe,hn,Tn,Rn){vo(Xe,hn+0,Tn,Rn,1),vo(Xe,hn+32,Tn,Rn+128,1)}function ls(Xe,hn,Tn,Rn){var Vn;for(Xe=Xe[hn+0]+4,Vn=0;4>Vn;++Vn)for(hn=0;4>hn;++hn)ao(Tn,Rn,hn,Vn,Xe)}function Ta(Xe,hn,Tn,Rn){Xe[hn+0]&&il(Xe,hn+0,Tn,Rn),Xe[hn+16]&&il(Xe,hn+16,Tn,Rn+4),Xe[hn+32]&&il(Xe,hn+32,Tn,Rn+128),Xe[hn+48]&&il(Xe,hn+48,Tn,Rn+128+4)}function ss(Xe,hn,Tn,Rn){var Vn,Bn=Te(16);for(Vn=0;4>Vn;++Vn){var qn=Xe[hn+0+Vn]+Xe[hn+12+Vn],Gn=Xe[hn+4+Vn]+Xe[hn+8+Vn],Xn=Xe[hn+4+Vn]-Xe[hn+8+Vn],Zn=Xe[hn+0+Vn]-Xe[hn+12+Vn];Bn[0+Vn]=qn+Gn,Bn[8+Vn]=qn-Gn,Bn[4+Vn]=Zn+Xn,Bn[12+Vn]=Zn-Xn}for(Vn=0;4>Vn;++Vn)qn=(Xe=Bn[0+4*Vn]+3)+Bn[3+4*Vn],Gn=Bn[1+4*Vn]+Bn[2+4*Vn],Xn=Bn[1+4*Vn]-Bn[2+4*Vn],Zn=Xe-Bn[3+4*Vn],Tn[Rn+0]=qn+Gn>>3,Tn[Rn+16]=Zn+Xn>>3,Tn[Rn+32]=qn-Gn>>3,Tn[Rn+48]=Zn-Xn>>3,Rn+=64}function zo(Xe,hn,Tn){var Rn,Vn=hn-32,Bn=ba,qn=255-Xe[Vn-1];for(Rn=0;Rn<Tn;++Rn){var Gn,Xn=Bn,Zn=qn+Xe[hn-1];for(Gn=0;Gn<Tn;++Gn)Xe[hn+Gn]=Xn[Zn+Xe[Vn+Gn]];hn+=32}}function Yi(Xe,hn){zo(Xe,hn,4)}function tl(Xe,hn){zo(Xe,hn,8)}function Zi(Xe,hn){zo(Xe,hn,16)}function Xi(Xe,hn){var Tn;for(Tn=0;16>Tn;++Tn)r(Xe,hn+32*Tn,Xe,hn-32,16)}function Ga(Xe,hn){var Tn;for(Tn=16;0<Tn;--Tn)Ee(Xe,hn,Xe[hn-1],16),hn+=32}function ia(Xe,hn,Tn){var Rn;for(Rn=0;16>Rn;++Rn)Ee(hn,Tn+32*Rn,Xe,16)}function Ro(Xe,hn){var Tn,Rn=16;for(Tn=0;16>Tn;++Tn)Rn+=Xe[hn-1+32*Tn]+Xe[hn+Tn-32];ia(Rn>>5,Xe,hn)}function lo(Xe,hn){var Tn,Rn=8;for(Tn=0;16>Tn;++Tn)Rn+=Xe[hn-1+32*Tn];ia(Rn>>4,Xe,hn)}function ko(Xe,hn){var Tn,Rn=8;for(Tn=0;16>Tn;++Tn)Rn+=Xe[hn+Tn-32];ia(Rn>>4,Xe,hn)}function qo(Xe,hn){ia(128,Xe,hn)}function Vi(Xe,hn,Tn){return Xe+2*hn+Tn+2>>2}function Xo(Xe,hn){var Tn,Rn=hn-32;for(Rn=new Uint8Array([Vi(Xe[Rn-1],Xe[Rn+0],Xe[Rn+1]),Vi(Xe[Rn+0],Xe[Rn+1],Xe[Rn+2]),Vi(Xe[Rn+1],Xe[Rn+2],Xe[Rn+3]),Vi(Xe[Rn+2],Xe[Rn+3],Xe[Rn+4])]),Tn=0;4>Tn;++Tn)r(Xe,hn+32*Tn,Rn,0,Rn.length)}function fa(Xe,hn){var Tn=Xe[hn-1],Rn=Xe[hn-1+32],Vn=Xe[hn-1+64],Bn=Xe[hn-1+96];jr(Xe,hn+0,16843009*Vi(Xe[hn-1-32],Tn,Rn)),jr(Xe,hn+32,16843009*Vi(Tn,Rn,Vn)),jr(Xe,hn+64,16843009*Vi(Rn,Vn,Bn)),jr(Xe,hn+96,16843009*Vi(Vn,Bn,Bn))}function Vl(Xe,hn){var Tn,Rn=4;for(Tn=0;4>Tn;++Tn)Rn+=Xe[hn+Tn-32]+Xe[hn-1+32*Tn];for(Rn>>=3,Tn=0;4>Tn;++Tn)Ee(Xe,hn+32*Tn,Rn,4)}function Tl(Xe,hn){var Tn=Xe[hn-1+0],Rn=Xe[hn-1+32],Vn=Xe[hn-1+64],Bn=Xe[hn-1-32],qn=Xe[hn+0-32],Gn=Xe[hn+1-32],Xn=Xe[hn+2-32],Zn=Xe[hn+3-32];Xe[hn+0+96]=Vi(Rn,Vn,Xe[hn-1+96]),Xe[hn+1+96]=Xe[hn+0+64]=Vi(Tn,Rn,Vn),Xe[hn+2+96]=Xe[hn+1+64]=Xe[hn+0+32]=Vi(Bn,Tn,Rn),Xe[hn+3+96]=Xe[hn+2+64]=Xe[hn+1+32]=Xe[hn+0+0]=Vi(qn,Bn,Tn),Xe[hn+3+64]=Xe[hn+2+32]=Xe[hn+1+0]=Vi(Gn,qn,Bn),Xe[hn+3+32]=Xe[hn+2+0]=Vi(Xn,Gn,qn),Xe[hn+3+0]=Vi(Zn,Xn,Gn)}function Ks(Xe,hn){var Tn=Xe[hn+1-32],Rn=Xe[hn+2-32],Vn=Xe[hn+3-32],Bn=Xe[hn+4-32],qn=Xe[hn+5-32],Gn=Xe[hn+6-32],Xn=Xe[hn+7-32];Xe[hn+0+0]=Vi(Xe[hn+0-32],Tn,Rn),Xe[hn+1+0]=Xe[hn+0+32]=Vi(Tn,Rn,Vn),Xe[hn+2+0]=Xe[hn+1+32]=Xe[hn+0+64]=Vi(Rn,Vn,Bn),Xe[hn+3+0]=Xe[hn+2+32]=Xe[hn+1+64]=Xe[hn+0+96]=Vi(Vn,Bn,qn),Xe[hn+3+32]=Xe[hn+2+64]=Xe[hn+1+96]=Vi(Bn,qn,Gn),Xe[hn+3+64]=Xe[hn+2+96]=Vi(qn,Gn,Xn),Xe[hn+3+96]=Vi(Gn,Xn,Xn)}function Aa(Xe,hn){var Tn=Xe[hn-1+0],Rn=Xe[hn-1+32],Vn=Xe[hn-1+64],Bn=Xe[hn-1-32],qn=Xe[hn+0-32],Gn=Xe[hn+1-32],Xn=Xe[hn+2-32],Zn=Xe[hn+3-32];Xe[hn+0+0]=Xe[hn+1+64]=Bn+qn+1>>1,Xe[hn+1+0]=Xe[hn+2+64]=qn+Gn+1>>1,Xe[hn+2+0]=Xe[hn+3+64]=Gn+Xn+1>>1,Xe[hn+3+0]=Xn+Zn+1>>1,Xe[hn+0+96]=Vi(Vn,Rn,Tn),Xe[hn+0+64]=Vi(Rn,Tn,Bn),Xe[hn+0+32]=Xe[hn+1+96]=Vi(Tn,Bn,qn),Xe[hn+1+32]=Xe[hn+2+96]=Vi(Bn,qn,Gn),Xe[hn+2+32]=Xe[hn+3+96]=Vi(qn,Gn,Xn),Xe[hn+3+32]=Vi(Gn,Xn,Zn)}function Al(Xe,hn){var Tn=Xe[hn+0-32],Rn=Xe[hn+1-32],Vn=Xe[hn+2-32],Bn=Xe[hn+3-32],qn=Xe[hn+4-32],Gn=Xe[hn+5-32],Xn=Xe[hn+6-32],Zn=Xe[hn+7-32];Xe[hn+0+0]=Tn+Rn+1>>1,Xe[hn+1+0]=Xe[hn+0+64]=Rn+Vn+1>>1,Xe[hn+2+0]=Xe[hn+1+64]=Vn+Bn+1>>1,Xe[hn+3+0]=Xe[hn+2+64]=Bn+qn+1>>1,Xe[hn+0+32]=Vi(Tn,Rn,Vn),Xe[hn+1+32]=Xe[hn+0+96]=Vi(Rn,Vn,Bn),Xe[hn+2+32]=Xe[hn+1+96]=Vi(Vn,Bn,qn),Xe[hn+3+32]=Xe[hn+2+96]=Vi(Bn,qn,Gn),Xe[hn+3+64]=Vi(qn,Gn,Xn),Xe[hn+3+96]=Vi(Gn,Xn,Zn)}function Mn(Xe,hn){var Tn=Xe[hn-1+0],Rn=Xe[hn-1+32],Vn=Xe[hn-1+64],Bn=Xe[hn-1+96];Xe[hn+0+0]=Tn+Rn+1>>1,Xe[hn+2+0]=Xe[hn+0+32]=Rn+Vn+1>>1,Xe[hn+2+32]=Xe[hn+0+64]=Vn+Bn+1>>1,Xe[hn+1+0]=Vi(Tn,Rn,Vn),Xe[hn+3+0]=Xe[hn+1+32]=Vi(Rn,Vn,Bn),Xe[hn+3+32]=Xe[hn+1+64]=Vi(Vn,Bn,Bn),Xe[hn+3+64]=Xe[hn+2+64]=Xe[hn+0+96]=Xe[hn+1+96]=Xe[hn+2+96]=Xe[hn+3+96]=Bn}function zn(Xe,hn){var Tn=Xe[hn-1+0],Rn=Xe[hn-1+32],Vn=Xe[hn-1+64],Bn=Xe[hn-1+96],qn=Xe[hn-1-32],Gn=Xe[hn+0-32],Xn=Xe[hn+1-32],Zn=Xe[hn+2-32];Xe[hn+0+0]=Xe[hn+2+32]=Tn+qn+1>>1,Xe[hn+0+32]=Xe[hn+2+64]=Rn+Tn+1>>1,Xe[hn+0+64]=Xe[hn+2+96]=Vn+Rn+1>>1,Xe[hn+0+96]=Bn+Vn+1>>1,Xe[hn+3+0]=Vi(Gn,Xn,Zn),Xe[hn+2+0]=Vi(qn,Gn,Xn),Xe[hn+1+0]=Xe[hn+3+32]=Vi(Tn,qn,Gn),Xe[hn+1+32]=Xe[hn+3+64]=Vi(Rn,Tn,qn),Xe[hn+1+64]=Xe[hn+3+96]=Vi(Vn,Rn,Tn),Xe[hn+1+96]=Vi(Bn,Vn,Rn)}function Jn(Xe,hn){var Tn;for(Tn=0;8>Tn;++Tn)r(Xe,hn+32*Tn,Xe,hn-32,8)}function ar(Xe,hn){var Tn;for(Tn=0;8>Tn;++Tn)Ee(Xe,hn,Xe[hn-1],8),hn+=32}function br(Xe,hn,Tn){var Rn;for(Rn=0;8>Rn;++Rn)Ee(hn,Tn+32*Rn,Xe,8)}function kr(Xe,hn){var Tn,Rn=8;for(Tn=0;8>Tn;++Tn)Rn+=Xe[hn+Tn-32]+Xe[hn-1+32*Tn];br(Rn>>4,Xe,hn)}function ti(Xe,hn){var Tn,Rn=4;for(Tn=0;8>Tn;++Tn)Rn+=Xe[hn+Tn-32];br(Rn>>3,Xe,hn)}function li(Xe,hn){var Tn,Rn=4;for(Tn=0;8>Tn;++Tn)Rn+=Xe[hn-1+32*Tn];br(Rn>>3,Xe,hn)}function es(Xe,hn){br(128,Xe,hn)}function Gi(Xe,hn,Tn){var Rn=Xe[hn-Tn],Vn=Xe[hn+0],Bn=3*(Vn-Rn)+_l[1020+Xe[hn-2*Tn]-Xe[hn+Tn]],qn=mu[112+(Bn+4>>3)];Xe[hn-Tn]=ba[255+Rn+mu[112+(Bn+3>>3)]],Xe[hn+0]=ba[255+Vn-qn]}function hs(Xe,hn,Tn,Rn){var Vn=Xe[hn+0],Bn=Xe[hn+Tn];return Ya[255+Xe[hn-2*Tn]-Xe[hn-Tn]]>Rn||Ya[255+Bn-Vn]>Rn}function _o(Xe,hn,Tn,Rn){return 4*Ya[255+Xe[hn-Tn]-Xe[hn+0]]+Ya[255+Xe[hn-2*Tn]-Xe[hn+Tn]]<=Rn}function io(Xe,hn,Tn,Rn,Vn){var Bn=Xe[hn-3*Tn],qn=Xe[hn-2*Tn],Gn=Xe[hn-Tn],Xn=Xe[hn+0],Zn=Xe[hn+Tn],cr=Xe[hn+2*Tn],Tr=Xe[hn+3*Tn];return 4*Ya[255+Gn-Xn]+Ya[255+qn-Zn]>Rn?0:Ya[255+Xe[hn-4*Tn]-Bn]<=Vn&&Ya[255+Bn-qn]<=Vn&&Ya[255+qn-Gn]<=Vn&&Ya[255+Tr-cr]<=Vn&&Ya[255+cr-Zn]<=Vn&&Ya[255+Zn-Xn]<=Vn}function Rr(Xe,hn,Tn,Rn){var Vn=2*Rn+1;for(Rn=0;16>Rn;++Rn)_o(Xe,hn+Rn,Tn,Vn)&&Gi(Xe,hn+Rn,Tn)}function Ki(Xe,hn,Tn,Rn){var Vn=2*Rn+1;for(Rn=0;16>Rn;++Rn)_o(Xe,hn+Rn*Tn,1,Vn)&&Gi(Xe,hn+Rn*Tn,1)}function os(Xe,hn,Tn,Rn){var Vn;for(Vn=3;0<Vn;--Vn)Rr(Xe,hn+=4*Tn,Tn,Rn)}function Do(Xe,hn,Tn,Rn){var Vn;for(Vn=3;0<Vn;--Vn)Ki(Xe,hn+=4,Tn,Rn)}function Ys(Xe,hn,Tn,Rn,Vn,Bn,qn,Gn){for(Bn=2*Bn+1;0<Vn--;){if(io(Xe,hn,Tn,Bn,qn))if(hs(Xe,hn,Tn,Gn))Gi(Xe,hn,Tn);else{var Xn=Xe,Zn=hn,cr=Tn,Tr=Xn[Zn-2*cr],tr=Xn[Zn-cr],hr=Xn[Zn+0],wr=Xn[Zn+cr],Vr=Xn[Zn+2*cr],Sr=27*(Fr=_l[1020+3*(hr-tr)+_l[1020+Tr-wr]])+63>>7,Lr=18*Fr+63>>7,Fr=9*Fr+63>>7;Xn[Zn-3*cr]=ba[255+Xn[Zn-3*cr]+Fr],Xn[Zn-2*cr]=ba[255+Tr+Lr],Xn[Zn-cr]=ba[255+tr+Sr],Xn[Zn+0]=ba[255+hr-Sr],Xn[Zn+cr]=ba[255+wr-Lr],Xn[Zn+2*cr]=ba[255+Vr-Fr]}hn+=Rn}}function Fo(Xe,hn,Tn,Rn,Vn,Bn,qn,Gn){for(Bn=2*Bn+1;0<Vn--;){if(io(Xe,hn,Tn,Bn,qn))if(hs(Xe,hn,Tn,Gn))Gi(Xe,hn,Tn);else{var Xn=Xe,Zn=hn,cr=Tn,Tr=Xn[Zn-cr],tr=Xn[Zn+0],hr=Xn[Zn+cr],wr=mu[112+(4+(Vr=3*(tr-Tr))>>3)],Vr=mu[112+(Vr+3>>3)],Sr=wr+1>>1;Xn[Zn-2*cr]=ba[255+Xn[Zn-2*cr]+Sr],Xn[Zn-cr]=ba[255+Tr+Vr],Xn[Zn+0]=ba[255+tr-wr],Xn[Zn+cr]=ba[255+hr-Sr]}hn+=Rn}}function wn(Xe,hn,Tn,Rn,Vn,Bn){Ys(Xe,hn,Tn,1,16,Rn,Vn,Bn)}function Fn(Xe,hn,Tn,Rn,Vn,Bn){Ys(Xe,hn,1,Tn,16,Rn,Vn,Bn)}function er(Xe,hn,Tn,Rn,Vn,Bn){var qn;for(qn=3;0<qn;--qn)Fo(Xe,hn+=4*Tn,Tn,1,16,Rn,Vn,Bn)}function lr(Xe,hn,Tn,Rn,Vn,Bn){var qn;for(qn=3;0<qn;--qn)Fo(Xe,hn+=4,1,Tn,16,Rn,Vn,Bn)}function yr(Xe,hn,Tn,Rn,Vn,Bn,qn,Gn){Ys(Xe,hn,Vn,1,8,Bn,qn,Gn),Ys(Tn,Rn,Vn,1,8,Bn,qn,Gn)}function $r(Xe,hn,Tn,Rn,Vn,Bn,qn,Gn){Ys(Xe,hn,1,Vn,8,Bn,qn,Gn),Ys(Tn,Rn,1,Vn,8,Bn,qn,Gn)}function Wr(Xe,hn,Tn,Rn,Vn,Bn,qn,Gn){Fo(Xe,hn+4*Vn,Vn,1,8,Bn,qn,Gn),Fo(Tn,Rn+4*Vn,Vn,1,8,Bn,qn,Gn)}function gi(Xe,hn,Tn,Rn,Vn,Bn,qn,Gn){Fo(Xe,hn+4,1,Vn,8,Bn,qn,Gn),Fo(Tn,Rn+4,1,Vn,8,Bn,qn,Gn)}function wi(){this.ba=new ns,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new oi,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function $i(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Qi(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ys(){this.ua=0,this.Wa=new Ti,this.vb=new Ti,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Ln,this.yc=new En}function qs(){this.xb=this.a=0,this.l=new _s,this.ca=new ns,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new In,this.Pb=0,this.wd=new In,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ys,this.ab=0,this.gc=Re(4,Qi),this.Oc=0}function Xs(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new _s,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Es(Xe,hn,Tn,Rn,Vn,Bn,qn){for(Xe=Xe==null?0:Xe[hn+0],hn=0;hn<qn;++hn)Vn[Bn+hn]=Xe+Tn[Rn+hn]&255,Xe=Vn[Bn+hn]}function uo(Xe,hn,Tn,Rn,Vn,Bn,qn){var Gn;if(Xe==null)Es(null,null,Tn,Rn,Vn,Bn,qn);else for(Gn=0;Gn<qn;++Gn)Vn[Bn+Gn]=Xe[hn+Gn]+Tn[Rn+Gn]&255}function Ls(Xe,hn,Tn,Rn,Vn,Bn,qn){if(Xe==null)Es(null,null,Tn,Rn,Vn,Bn,qn);else{var Gn,Xn=Xe[hn+0],Zn=Xn,cr=Xn;for(Gn=0;Gn<qn;++Gn)Zn=cr+(Xn=Xe[hn+Gn])-Zn,cr=Tn[Rn+Gn]+(-256&Zn?0>Zn?0:255:Zn)&255,Zn=Xn,Vn[Bn+Gn]=cr}}function Co(Xe,hn,Tn,Rn){var Vn=hn.width,Bn=hn.o;if(e(Xe!=null&&hn!=null),0>Tn||0>=Rn||Tn+Rn>Bn)return null;if(!Xe.Cc){if(Xe.ga==null){var qn;if(Xe.ga=new Xs,(qn=Xe.ga==null)||(qn=hn.width*hn.o,e(Xe.Gb.length==0),Xe.Gb=Te(qn),Xe.Uc=0,Xe.Gb==null?qn=0:(Xe.mb=Xe.Gb,Xe.nb=Xe.Uc,Xe.rc=null,qn=1),qn=!qn),!qn){qn=Xe.ga;var Gn=Xe.Fa,Xn=Xe.P,Zn=Xe.qc,cr=Xe.mb,Tr=Xe.nb,tr=Xn+1,hr=Zn-1,wr=qn.l;if(e(Gn!=null&&cr!=null&&hn!=null),oa[0]=null,oa[1]=Es,oa[2]=uo,oa[3]=Ls,qn.ca=cr,qn.tb=Tr,qn.c=hn.width,qn.i=hn.height,e(0<qn.c&&0<qn.i),1>=Zn)hn=0;else if(qn.$a=3&Gn[Xn+0],qn.Z=Gn[Xn+0]>>2&3,qn.Lc=Gn[Xn+0]>>4&3,Xn=Gn[Xn+0]>>6&3,0>qn.$a||1<qn.$a||4<=qn.Z||1<qn.Lc||Xn)hn=0;else if(wr.put=ki,wr.ac=Js,wr.bc=ms,wr.ma=qn,wr.width=hn.width,wr.height=hn.height,wr.Da=hn.Da,wr.v=hn.v,wr.va=hn.va,wr.j=hn.j,wr.o=hn.o,qn.$a)e:{e(qn.$a==1),hn=Pr();t:for(;;){if(hn==null){hn=0;break e}if(e(qn!=null),qn.mc=hn,hn.c=qn.c,hn.i=qn.i,hn.l=qn.l,hn.l.ma=qn,hn.l.width=qn.c,hn.l.height=qn.i,hn.a=0,Wn(hn.m,Gn,tr,hr),!Cr(qn.c,qn.i,1,hn,null)||(hn.ab==1&&hn.gc[0].hc==3&&oo(hn.s)?(qn.ic=1,Gn=hn.c*hn.i,hn.Ta=null,hn.Ua=0,hn.V=Te(Gn),hn.Ba=0,hn.V==null?(hn.a=1,hn=0):hn=1):(qn.ic=0,hn=Jr(hn,qn.c)),!hn))break t;hn=1;break e}qn.mc=null,hn=0}else hn=hr>=qn.c*qn.i;qn=!hn}if(qn)return null;Xe.ga.Lc!=1?Xe.Ga=0:Rn=Bn-Tn}e(Xe.ga!=null),e(Tn+Rn<=Bn);e:{if(hn=(Gn=Xe.ga).c,Bn=Gn.l.o,Gn.$a==0){if(tr=Xe.rc,hr=Xe.Vc,wr=Xe.Fa,Xn=Xe.P+1+Tn*hn,Zn=Xe.mb,cr=Xe.nb+Tn*hn,e(Xn<=Xe.P+Xe.qc),Gn.Z!=0)for(e(oa[Gn.Z]!=null),qn=0;qn<Rn;++qn)oa[Gn.Z](tr,hr,wr,Xn,Zn,cr,hn),tr=Zn,hr=cr,cr+=hn,Xn+=hn;else for(qn=0;qn<Rn;++qn)r(Zn,cr,wr,Xn,hn),tr=Zn,hr=cr,cr+=hn,Xn+=hn;Xe.rc=tr,Xe.Vc=hr}else{if(e(Gn.mc!=null),hn=Tn+Rn,e((qn=Gn.mc)!=null),e(hn<=qn.i),qn.C>=hn)hn=1;else if(Gn.ic||yo(),Gn.ic){Gn=qn.V,tr=qn.Ba,hr=qn.c;var Vr=qn.i,Sr=(wr=1,Xn=qn.$/hr,Zn=qn.$%hr,cr=qn.m,Tr=qn.s,qn.$),Lr=hr*Vr,Fr=hr*hn,Br=Tr.wc,zr=Sr<Fr?xs(Tr,Zn,Xn):null;e(Sr<=Lr),e(hn<=Vr),e(oo(Tr));t:for(;;){for(;!cr.h&&Sr<Fr;){if(Zn&Br||(zr=xs(Tr,Zn,Xn)),e(zr!=null),or(cr),256>(Vr=ws(zr.G[0],zr.H[0],cr)))Gn[tr+Sr]=Vr,++Sr,++Zn>=hr&&(Zn=0,++Xn<=hn&&!(Xn%16)&&ir(qn,Xn));else{if(!(280>Vr)){wr=0;break t}Vr=Ms(Vr-256,cr);var Ni,xi=ws(zr.G[4],zr.H[4],cr);if(or(cr),!(Sr>=(xi=Zs(hr,xi=Ms(xi,cr)))&&Lr-Sr>=Vr)){wr=0;break t}for(Ni=0;Ni<Vr;++Ni)Gn[tr+Sr+Ni]=Gn[tr+Sr+Ni-xi];for(Sr+=Vr,Zn+=Vr;Zn>=hr;)Zn-=hr,++Xn<=hn&&!(Xn%16)&&ir(qn,Xn);Sr<Fr&&Zn&Br&&(zr=xs(Tr,Zn,Xn))}e(cr.h==Qn(cr))}ir(qn,Xn>hn?hn:Xn);break t}!wr||cr.h&&Sr<Lr?(wr=0,qn.a=cr.h?5:3):qn.$=Sr,hn=wr}else hn=ur(qn,qn.V,qn.Ba,qn.c,qn.i,hn,_i);if(!hn){Rn=0;break e}}Tn+Rn>=Bn&&(Xe.Cc=1),Rn=1}if(!Rn)return null;if(Xe.Cc&&((Rn=Xe.ga)!=null&&(Rn.mc=null),Xe.ga=null,0<Xe.Ga))return alert("todo:WebPDequantizeLevels"),null}return Xe.nb+Tn*Vn}function Ka(Xe,hn,Tn,Rn,Vn,Bn){for(;0<Vn--;){var qn,Gn=Xe,Xn=hn+(Tn?1:0),Zn=Xe,cr=hn+(Tn?0:3);for(qn=0;qn<Rn;++qn){var Tr=Zn[cr+4*qn];Tr!=255&&(Tr*=32897,Gn[Xn+4*qn+0]=Gn[Xn+4*qn+0]*Tr>>23,Gn[Xn+4*qn+1]=Gn[Xn+4*qn+1]*Tr>>23,Gn[Xn+4*qn+2]=Gn[Xn+4*qn+2]*Tr>>23)}hn+=Bn}}function nl(Xe,hn,Tn,Rn,Vn){for(;0<Rn--;){var Bn;for(Bn=0;Bn<Tn;++Bn){var qn=Xe[hn+2*Bn+0],Gn=15&(Zn=Xe[hn+2*Bn+1]),Xn=4369*Gn,Zn=(240&Zn|Zn>>4)*Xn>>16;Xe[hn+2*Bn+0]=(240&qn|qn>>4)*Xn>>16&240|(15&qn|qn<<4)*Xn>>16>>4&15,Xe[hn+2*Bn+1]=240&Zn|Gn}hn+=Vn}}function Xl(Xe,hn,Tn,Rn,Vn,Bn,qn,Gn){var Xn,Zn,cr=255;for(Zn=0;Zn<Vn;++Zn){for(Xn=0;Xn<Rn;++Xn){var Tr=Xe[hn+Xn];Bn[qn+4*Xn]=Tr,cr&=Tr}hn+=Tn,qn+=Gn}return cr!=255}function Sl(Xe,hn,Tn,Rn,Vn){var Bn;for(Bn=0;Bn<Vn;++Bn)Tn[Rn+Bn]=Xe[hn+Bn]>>8}function yo(){eu=Ka,Ac=nl,Mu=Xl,Sc=Sl}function Sa(Xe,hn,Tn){un[Xe]=function(Rn,Vn,Bn,qn,Gn,Xn,Zn,cr,Tr,tr,hr,wr,Vr,Sr,Lr,Fr,Br){var zr,Ni=Br-1>>1,xi=Gn[Xn+0]|Zn[cr+0]<<16,is=Tr[tr+0]|hr[wr+0]<<16;e(Rn!=null);var Si=3*xi+is+131074>>2;for(hn(Rn[Vn+0],255&Si,Si>>16,Vr,Sr),Bn!=null&&(Si=3*is+xi+131074>>2,hn(Bn[qn+0],255&Si,Si>>16,Lr,Fr)),zr=1;zr<=Ni;++zr){var ps=Gn[Xn+zr]|Zn[cr+zr]<<16,ho=Tr[tr+zr]|hr[wr+zr]<<16,as=xi+ps+is+ho+524296,Ei=as+2*(ps+is)>>3;Si=Ei+xi>>1,xi=(as=as+2*(xi+ho)>>3)+ps>>1,hn(Rn[Vn+2*zr-1],255&Si,Si>>16,Vr,Sr+(2*zr-1)*Tn),hn(Rn[Vn+2*zr-0],255&xi,xi>>16,Vr,Sr+(2*zr-0)*Tn),Bn!=null&&(Si=as+is>>1,xi=Ei+ho>>1,hn(Bn[qn+2*zr-1],255&Si,Si>>16,Lr,Fr+(2*zr-1)*Tn),hn(Bn[qn+2*zr+0],255&xi,xi>>16,Lr,Fr+(2*zr+0)*Tn)),xi=ps,is=ho}1&Br||(Si=3*xi+is+131074>>2,hn(Rn[Vn+Br-1],255&Si,Si>>16,Vr,Sr+(Br-1)*Tn),Bn!=null&&(Si=3*is+xi+131074>>2,hn(Bn[qn+Br-1],255&Si,Si>>16,Lr,Fr+(Br-1)*Tn)))}}function jl(){Oa[nc]=Dd,Oa[ql]=Wl,Oa[Xc]=Fd,Oa[Lu]=bu,Oa[Du]=iu,Oa[js]=Bu,Oa[rc]=Lc,Oa[gu]=Wl,Oa[tu]=bu,Oa[Fu]=iu,Oa[Vu]=Bu}function pa(Xe){return Xe&-16384?0>Xe?0:255:Xe>>Hl}function Qe(Xe,hn){return pa((19077*Xe>>8)+(26149*hn>>8)-14234)}function An(Xe,hn,Tn){return pa((19077*Xe>>8)-(6419*hn>>8)-(13320*Tn>>8)+8708)}function Nn(Xe,hn){return pa((19077*Xe>>8)+(33050*hn>>8)-17685)}function Yn(Xe,hn,Tn,Rn,Vn){Rn[Vn+0]=Qe(Xe,Tn),Rn[Vn+1]=An(Xe,hn,Tn),Rn[Vn+2]=Nn(Xe,hn)}function vr(Xe,hn,Tn,Rn,Vn){Rn[Vn+0]=Nn(Xe,hn),Rn[Vn+1]=An(Xe,hn,Tn),Rn[Vn+2]=Qe(Xe,Tn)}function Mr(Xe,hn,Tn,Rn,Vn){var Bn=An(Xe,hn,Tn);hn=Bn<<3&224|Nn(Xe,hn)>>3,Rn[Vn+0]=248&Qe(Xe,Tn)|Bn>>5,Rn[Vn+1]=hn}function ei(Xe,hn,Tn,Rn,Vn){var Bn=240&Nn(Xe,hn)|15;Rn[Vn+0]=240&Qe(Xe,Tn)|An(Xe,hn,Tn)>>4,Rn[Vn+1]=Bn}function As(Xe,hn,Tn,Rn,Vn){Rn[Vn+0]=255,Yn(Xe,hn,Tn,Rn,Vn+1)}function eo(Xe,hn,Tn,Rn,Vn){vr(Xe,hn,Tn,Rn,Vn),Rn[Vn+3]=255}function us(Xe,hn,Tn,Rn,Vn){Yn(Xe,hn,Tn,Rn,Vn),Rn[Vn+3]=255}function fs(Xe,hn){return 0>Xe?0:Xe>hn?hn:Xe}function Ss(Xe,hn,Tn){un[Xe]=function(Rn,Vn,Bn,qn,Gn,Xn,Zn,cr,Tr){for(var tr=cr+(-2&Tr)*Tn;cr!=tr;)hn(Rn[Vn+0],Bn[qn+0],Gn[Xn+0],Zn,cr),hn(Rn[Vn+1],Bn[qn+0],Gn[Xn+0],Zn,cr+Tn),Vn+=2,++qn,++Xn,cr+=2*Tn;1&Tr&&hn(Rn[Vn+0],Bn[qn+0],Gn[Xn+0],Zn,cr)}}function sa(Xe,hn,Tn){return Tn==0?Xe==0?hn==0?6:5:hn==0?4:0:Tn}function Qo(Xe,hn,Tn,Rn,Vn){switch(Xe>>>30){case 3:vo(hn,Tn,Rn,Vn,0);break;case 2:Vo(hn,Tn,Rn,Vn);break;case 1:il(hn,Tn,Rn,Vn)}}function Pa(Xe,hn){var Tn,Rn,Vn=hn.M,Bn=hn.Nb,qn=Xe.oc,Gn=Xe.pc+40,Xn=Xe.oc,Zn=Xe.pc+584,cr=Xe.oc,Tr=Xe.pc+600;for(Tn=0;16>Tn;++Tn)qn[Gn+32*Tn-1]=129;for(Tn=0;8>Tn;++Tn)Xn[Zn+32*Tn-1]=129,cr[Tr+32*Tn-1]=129;for(0<Vn?qn[Gn-1-32]=Xn[Zn-1-32]=cr[Tr-1-32]=129:(Ee(qn,Gn-32-1,127,21),Ee(Xn,Zn-32-1,127,9),Ee(cr,Tr-32-1,127,9)),Rn=0;Rn<Xe.za;++Rn){var tr=hn.ya[hn.aa+Rn];if(0<Rn){for(Tn=-1;16>Tn;++Tn)r(qn,Gn+32*Tn-4,qn,Gn+32*Tn+12,4);for(Tn=-1;8>Tn;++Tn)r(Xn,Zn+32*Tn-4,Xn,Zn+32*Tn+4,4),r(cr,Tr+32*Tn-4,cr,Tr+32*Tn+4,4)}var hr=Xe.Gd,wr=Xe.Hd+Rn,Vr=tr.ad,Sr=tr.Hc;if(0<Vn&&(r(qn,Gn-32,hr[wr].y,0,16),r(Xn,Zn-32,hr[wr].f,0,8),r(cr,Tr-32,hr[wr].ea,0,8)),tr.Za){var Lr=qn,Fr=Gn-32+16;for(0<Vn&&(Rn>=Xe.za-1?Ee(Lr,Fr,hr[wr].y[15],4):r(Lr,Fr,hr[wr+1].y,0,4)),Tn=0;4>Tn;Tn++)Lr[Fr+128+Tn]=Lr[Fr+256+Tn]=Lr[Fr+384+Tn]=Lr[Fr+0+Tn];for(Tn=0;16>Tn;++Tn,Sr<<=2)Lr=qn,Fr=Gn+Dc[Tn],Xa[tr.Ob[Tn]](Lr,Fr),Qo(Sr,Vr,16*+Tn,Lr,Fr)}else if(Lr=sa(Rn,Vn,tr.Ob[0]),va[Lr](qn,Gn),Sr!=0)for(Tn=0;16>Tn;++Tn,Sr<<=2)Qo(Sr,Vr,16*+Tn,qn,Gn+Dc[Tn]);for(Tn=tr.Gc,Lr=sa(Rn,Vn,tr.Dd),Ca[Lr](Xn,Zn),Ca[Lr](cr,Tr),Sr=Vr,Lr=Xn,Fr=Zn,255&(tr=0|Tn)&&(170&tr?gl(Sr,256,Lr,Fr):fu(Sr,256,Lr,Fr)),tr=cr,Sr=Tr,255&(Tn>>=8)&&(170&Tn?gl(Vr,320,tr,Sr):fu(Vr,320,tr,Sr)),Vn<Xe.Ub-1&&(r(hr[wr].y,0,qn,Gn+480,16),r(hr[wr].f,0,Xn,Zn+224,8),r(hr[wr].ea,0,cr,Tr+224,8)),Tn=8*Bn*Xe.B,hr=Xe.sa,wr=Xe.ta+16*Rn+16*Bn*Xe.R,Vr=Xe.qa,tr=Xe.ra+8*Rn+Tn,Sr=Xe.Ha,Lr=Xe.Ia+8*Rn+Tn,Tn=0;16>Tn;++Tn)r(hr,wr+Tn*Xe.R,qn,Gn+32*Tn,16);for(Tn=0;8>Tn;++Tn)r(Vr,tr+Tn*Xe.B,Xn,Zn+32*Tn,8),r(Sr,Lr+Tn*Xe.B,cr,Tr+32*Tn,8)}}function rl(Xe,hn,Tn,Rn,Vn,Bn,qn,Gn,Xn){var Zn=[0],cr=[0],Tr=0,tr=Xn!=null?Xn.kd:0,hr=Xn??new $i;if(Xe==null||12>Tn)return 7;hr.data=Xe,hr.w=hn,hr.ha=Tn,hn=[hn],Tn=[Tn],hr.gb=[hr.gb];e:{var wr=hn,Vr=Tn,Sr=hr.gb;if(e(Xe!=null),e(Vr!=null),e(Sr!=null),Sr[0]=0,12<=Vr[0]&&!t(Xe,wr[0],"RIFF")){if(t(Xe,wr[0]+8,"WEBP")){Sr=3;break e}var Lr=xr(Xe,wr[0]+4);if(12>Lr||4294967286<Lr){Sr=3;break e}if(tr&&Lr>Vr[0]-8){Sr=7;break e}Sr[0]=Lr,wr[0]+=12,Vr[0]-=12}Sr=0}if(Sr!=0)return Sr;for(Lr=0<hr.gb[0],Tn=Tn[0];;){e:{var Fr=Xe;Vr=hn,Sr=Tn;var Br=Zn,zr=cr,Ni=wr=[0];if((Si=Tr=[Tr])[0]=0,8>Sr[0])Sr=7;else{if(!t(Fr,Vr[0],"VP8X")){if(xr(Fr,Vr[0]+4)!=10){Sr=3;break e}if(18>Sr[0]){Sr=7;break e}var xi=xr(Fr,Vr[0]+8),is=1+Hr(Fr,Vr[0]+12);if(2147483648<=is*(Fr=1+Hr(Fr,Vr[0]+15))){Sr=3;break e}Ni!=null&&(Ni[0]=xi),Br!=null&&(Br[0]=is),zr!=null&&(zr[0]=Fr),Vr[0]+=18,Sr[0]-=18,Si[0]=1}Sr=0}}if(Tr=Tr[0],wr=wr[0],Sr!=0)return Sr;if(Vr=!!(2&wr),!Lr&&Tr)return 3;if(Bn!=null&&(Bn[0]=!!(16&wr)),qn!=null&&(qn[0]=Vr),Gn!=null&&(Gn[0]=0),qn=Zn[0],wr=cr[0],Tr&&Vr&&Xn==null){Sr=0;break}if(4>Tn){Sr=7;break}if(Lr&&Tr||!Lr&&!Tr&&!t(Xe,hn[0],"ALPH")){Tn=[Tn],hr.na=[hr.na],hr.P=[hr.P],hr.Sa=[hr.Sa];e:{xi=Xe,Sr=hn,Lr=Tn;var Si=hr.gb;Br=hr.na,zr=hr.P,Ni=hr.Sa,is=22,e(xi!=null),e(Lr!=null),Fr=Sr[0];var ps=Lr[0];for(e(Br!=null),e(Ni!=null),Br[0]=null,zr[0]=null,Ni[0]=0;;){if(Sr[0]=Fr,Lr[0]=ps,8>ps){Sr=7;break e}var ho=xr(xi,Fr+4);if(4294967286<ho){Sr=3;break e}var as=8+ho+1&-2;if(is+=as,0<Si&&is>Si){Sr=3;break e}if(!t(xi,Fr,"VP8 ")||!t(xi,Fr,"VP8L")){Sr=0;break e}if(ps[0]<as){Sr=7;break e}t(xi,Fr,"ALPH")||(Br[0]=xi,zr[0]=Fr+8,Ni[0]=ho),Fr+=as,ps-=as}}if(Tn=Tn[0],hr.na=hr.na[0],hr.P=hr.P[0],hr.Sa=hr.Sa[0],Sr!=0)break}Tn=[Tn],hr.Ja=[hr.Ja],hr.xa=[hr.xa];e:if(Si=Xe,Sr=hn,Lr=Tn,Br=hr.gb[0],zr=hr.Ja,Ni=hr.xa,xi=Sr[0],Fr=!t(Si,xi,"VP8 "),is=!t(Si,xi,"VP8L"),e(Si!=null),e(Lr!=null),e(zr!=null),e(Ni!=null),8>Lr[0])Sr=7;else{if(Fr||is){if(Si=xr(Si,xi+4),12<=Br&&Si>Br-12){Sr=3;break e}if(tr&&Si>Lr[0]-8){Sr=7;break e}zr[0]=Si,Sr[0]+=8,Lr[0]-=8,Ni[0]=is}else Ni[0]=5<=Lr[0]&&Si[xi+0]==47&&!(Si[xi+4]>>5),zr[0]=Lr[0];Sr=0}if(Tn=Tn[0],hr.Ja=hr.Ja[0],hr.xa=hr.xa[0],hn=hn[0],Sr!=0)break;if(4294967286<hr.Ja)return 3;if(Gn==null||Vr||(Gn[0]=hr.xa?2:1),qn=[qn],wr=[wr],hr.xa){if(5>Tn){Sr=7;break}Gn=qn,tr=wr,Vr=Bn,Xe==null||5>Tn?Xe=0:5<=Tn&&Xe[hn+0]==47&&!(Xe[hn+4]>>5)?(Lr=[0],Si=[0],Br=[0],Wn(zr=new In,Xe,hn,Tn),So(zr,Lr,Si,Br)?(Gn!=null&&(Gn[0]=Lr[0]),tr!=null&&(tr[0]=Si[0]),Vr!=null&&(Vr[0]=Br[0]),Xe=1):Xe=0):Xe=0}else{if(10>Tn){Sr=7;break}Gn=wr,Xe==null||10>Tn||!hl(Xe,hn+3,Tn-3)?Xe=0:(tr=Xe[hn+0]|Xe[hn+1]<<8|Xe[hn+2]<<16,Vr=16383&(Xe[hn+7]<<8|Xe[hn+6]),Xe=16383&(Xe[hn+9]<<8|Xe[hn+8]),1&tr||3<(tr>>1&7)||!(tr>>4&1)||tr>>5>=hr.Ja||!Vr||!Xe?Xe=0:(qn&&(qn[0]=Vr),Gn&&(Gn[0]=Xe),Xe=1))}if(!Xe||(qn=qn[0],wr=wr[0],Tr&&(Zn[0]!=qn||cr[0]!=wr)))return 3;Xn!=null&&(Xn[0]=hr,Xn.offset=hn-Xn.w,e(4294967286>hn-Xn.w),e(Xn.offset==Xn.ha-Tn));break}return Sr==0||Sr==7&&Tr&&Xn==null?(Bn!=null&&(Bn[0]|=hr.na!=null&&0<hr.na.length),Rn!=null&&(Rn[0]=qn),Vn!=null&&(Vn[0]=wr),0):Sr}function ma(Xe,hn,Tn){var Rn=hn.width,Vn=hn.height,Bn=0,qn=0,Gn=Rn,Xn=Vn;if(hn.Da=Xe!=null&&0<Xe.Da,hn.Da&&(Gn=Xe.cd,Xn=Xe.bd,Bn=Xe.v,qn=Xe.j,11>Tn||(Bn&=-2,qn&=-2),0>Bn||0>qn||0>=Gn||0>=Xn||Bn+Gn>Rn||qn+Xn>Vn))return 0;if(hn.v=Bn,hn.j=qn,hn.va=Bn+Gn,hn.o=qn+Xn,hn.U=Gn,hn.T=Xn,hn.da=Xe!=null&&0<Xe.da,hn.da){if(!yi(Gn,Xn,Tn=[Xe.ib],Bn=[Xe.hb]))return 0;hn.ib=Tn[0],hn.hb=Bn[0]}return hn.ob=Xe!=null&&Xe.ob,hn.Kb=Xe==null||!Xe.Sd,hn.da&&(hn.ob=hn.ib<3*Rn/4&&hn.hb<3*Vn/4,hn.Kb=0),1}function ga(Xe){if(Xe==null)return 2;if(11>Xe.S){var hn=Xe.f.RGBA;hn.fb+=(Xe.height-1)*hn.A,hn.A=-hn.A}else hn=Xe.f.kb,Xe=Xe.height,hn.O+=(Xe-1)*hn.fa,hn.fa=-hn.fa,hn.N+=(Xe-1>>1)*hn.Ab,hn.Ab=-hn.Ab,hn.W+=(Xe-1>>1)*hn.Db,hn.Db=-hn.Db,hn.F!=null&&(hn.J+=(Xe-1)*hn.lb,hn.lb=-hn.lb);return 0}function $l(Xe,hn,Tn,Rn){if(Rn==null||0>=Xe||0>=hn)return 2;if(Tn!=null){if(Tn.Da){var Vn=Tn.cd,Bn=Tn.bd,qn=-2&Tn.v,Gn=-2&Tn.j;if(0>qn||0>Gn||0>=Vn||0>=Bn||qn+Vn>Xe||Gn+Bn>hn)return 2;Xe=Vn,hn=Bn}if(Tn.da){if(!yi(Xe,hn,Vn=[Tn.ib],Bn=[Tn.hb]))return 2;Xe=Vn[0],hn=Bn[0]}}Rn.width=Xe,Rn.height=hn;e:{var Xn=Rn.width,Zn=Rn.height;if(Xe=Rn.S,0>=Xn||0>=Zn||!(Xe>=nc&&13>Xe))Xe=2;else{if(0>=Rn.Rd&&Rn.sd==null){qn=Bn=Vn=hn=0;var cr=(Gn=Xn*Uu[Xe])*Zn;if(11>Xe||(Bn=(Zn+1)/2*(hn=(Xn+1)/2),Xe==12&&(qn=(Vn=Xn)*Zn)),(Zn=Te(cr+2*Bn+qn))==null){Xe=1;break e}Rn.sd=Zn,11>Xe?((Xn=Rn.f.RGBA).eb=Zn,Xn.fb=0,Xn.A=Gn,Xn.size=cr):((Xn=Rn.f.kb).y=Zn,Xn.O=0,Xn.fa=Gn,Xn.Fd=cr,Xn.f=Zn,Xn.N=0+cr,Xn.Ab=hn,Xn.Cd=Bn,Xn.ea=Zn,Xn.W=0+cr+Bn,Xn.Db=hn,Xn.Ed=Bn,Xe==12&&(Xn.F=Zn,Xn.J=0+cr+2*Bn),Xn.Tc=qn,Xn.lb=Vn)}if(hn=1,Vn=Rn.S,Bn=Rn.width,qn=Rn.height,Vn>=nc&&13>Vn)if(11>Vn)Xe=Rn.f.RGBA,hn&=(Gn=Math.abs(Xe.A))*(qn-1)+Bn<=Xe.size,hn&=Gn>=Bn*Uu[Vn],hn&=Xe.eb!=null;else{Xe=Rn.f.kb,Gn=(Bn+1)/2,cr=(qn+1)/2,Xn=Math.abs(Xe.fa),Zn=Math.abs(Xe.Ab);var Tr=Math.abs(Xe.Db),tr=Math.abs(Xe.lb),hr=tr*(qn-1)+Bn;hn&=Xn*(qn-1)+Bn<=Xe.Fd,hn&=Zn*(cr-1)+Gn<=Xe.Cd,hn=(hn&=Tr*(cr-1)+Gn<=Xe.Ed)&Xn>=Bn&Zn>=Gn&Tr>=Gn,hn&=Xe.y!=null,hn&=Xe.f!=null,hn&=Xe.ea!=null,Vn==12&&(hn&=tr>=Bn,hn&=hr<=Xe.Tc,hn&=Xe.F!=null)}else hn=0;Xe=hn?0:2}}return Xe!=0||Tn!=null&&Tn.fd&&(Xe=ga(Rn)),Xe}var ya=64,Bl=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ou=24,Ul=32,co=8,Ju=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Zr("Predictor0","PredictorAdd0"),un.Predictor0=function(){return 4278190080},un.Predictor1=function(Xe){return Xe},un.Predictor2=function(Xe,hn,Tn){return hn[Tn+0]},un.Predictor3=function(Xe,hn,Tn){return hn[Tn+1]},un.Predictor4=function(Xe,hn,Tn){return hn[Tn-1]},un.Predictor5=function(Xe,hn,Tn){return pi(pi(Xe,hn[Tn+1]),hn[Tn+0])},un.Predictor6=function(Xe,hn,Tn){return pi(Xe,hn[Tn-1])},un.Predictor7=function(Xe,hn,Tn){return pi(Xe,hn[Tn+0])},un.Predictor8=function(Xe,hn,Tn){return pi(hn[Tn-1],hn[Tn+0])},un.Predictor9=function(Xe,hn,Tn){return pi(hn[Tn+0],hn[Tn+1])},un.Predictor10=function(Xe,hn,Tn){return pi(pi(Xe,hn[Tn-1]),pi(hn[Tn+0],hn[Tn+1]))},un.Predictor11=function(Xe,hn,Tn){var Rn=hn[Tn+0];return 0>=_r(Rn>>24&255,Xe>>24&255,(hn=hn[Tn-1])>>24&255)+_r(Rn>>16&255,Xe>>16&255,hn>>16&255)+_r(Rn>>8&255,Xe>>8&255,hn>>8&255)+_r(255&Rn,255&Xe,255&hn)?Rn:Xe},un.Predictor12=function(Xe,hn,Tn){var Rn=hn[Tn+0];return(Wi((Xe>>24&255)+(Rn>>24&255)-((hn=hn[Tn-1])>>24&255))<<24|Wi((Xe>>16&255)+(Rn>>16&255)-(hn>>16&255))<<16|Wi((Xe>>8&255)+(Rn>>8&255)-(hn>>8&255))<<8|Wi((255&Xe)+(255&Rn)-(255&hn)))>>>0},un.Predictor13=function(Xe,hn,Tn){var Rn=hn[Tn-1];return(si((Xe=pi(Xe,hn[Tn+0]))>>24&255,Rn>>24&255)<<24|si(Xe>>16&255,Rn>>16&255)<<16|si(Xe>>8&255,Rn>>8&255)<<8|si(255&Xe,255&Rn))>>>0};var Ia=un.PredictorAdd0;un.PredictorAdd1=Dr,Zr("Predictor2","PredictorAdd2"),Zr("Predictor3","PredictorAdd3"),Zr("Predictor4","PredictorAdd4"),Zr("Predictor5","PredictorAdd5"),Zr("Predictor6","PredictorAdd6"),Zr("Predictor7","PredictorAdd7"),Zr("Predictor8","PredictorAdd8"),Zr("Predictor9","PredictorAdd9"),Zr("Predictor10","PredictorAdd10"),Zr("Predictor11","PredictorAdd11"),Zr("Predictor12","PredictorAdd12"),Zr("Predictor13","PredictorAdd13");var Ra=un.PredictorAdd2;hi("ColorIndexInverseTransform","MapARGB","32b",function(Xe){return Xe>>8&255},function(Xe){return Xe}),hi("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(Xe){return Xe},function(Xe){return Xe>>8&255});var cu,zl=un.ColorIndexInverseTransform,du=un.MapARGB,Ql=un.VP8LColorIndexInverseTransformAlpha,Pl=un.MapAlpha,Il=un.VP8LPredictorsAdd=[];Il.length=16,(un.VP8LPredictors=[]).length=16,(un.VP8LPredictorsAdd_C=[]).length=16,(un.VP8LPredictors_C=[]).length=16;var pl,hu,ka,ml,Ws,Hs,bo,vo,Vo,gl,il,fu,xc,Ec,Zu,Kc,Yc,Jl,ec,pu,tc,Tc,Nu,Zl,eu,Ac,Mu,Sc,Pc=Te(511),Ic=Te(2041),Rc=Te(225),kc=Te(767),Cc=0,_l=Ic,mu=Rc,ba=kc,Ya=Pc,nc=0,ql=1,Xc=2,Lu=3,Du=4,js=5,rc=6,gu=7,tu=8,Fu=9,Vu=10,ju=[2,3,7],ic=[3,3,11],nu=[280,256,256,256,40],Qc=[0,1,1,1,0],Od=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Nd=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Jc=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],sc=8,_u=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],$u=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ru=null,Oc=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Nc=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Zc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ed=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Md=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Ld=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Mc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],va=[],Xa=[],Ca=[],yl=1,yu=2,oa=[],Oa=[];Sa("UpsampleRgbLinePair",Yn,3),Sa("UpsampleBgrLinePair",vr,3),Sa("UpsampleRgbaLinePair",us,4),Sa("UpsampleBgraLinePair",eo,4),Sa("UpsampleArgbLinePair",As,4),Sa("UpsampleRgba4444LinePair",ei,2),Sa("UpsampleRgb565LinePair",Mr,2);var Dd=un.UpsampleRgbLinePair,Fd=un.UpsampleBgrLinePair,Wl=un.UpsampleRgbaLinePair,bu=un.UpsampleBgraLinePair,iu=un.UpsampleArgbLinePair,Bu=un.UpsampleRgba4444LinePair,Lc=un.UpsampleRgb565LinePair,Rl=16,sl=1<<Rl-1,Os=-227,Ds=482,Hl=6,Jo=0,Na=Te(256),su=Te(256),vu=Te(256),Ma=Te(256),oc=Te(Ds-Os),nd=Te(Ds-Os);Ss("YuvToRgbRow",Yn,3),Ss("YuvToBgrRow",vr,3),Ss("YuvToRgbaRow",us,4),Ss("YuvToBgraRow",eo,4),Ss("YuvToArgbRow",As,4),Ss("YuvToRgba4444Row",ei,2),Ss("YuvToRgb565Row",Mr,2);var Dc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ou=[0,2,8],rd=[8,7,6,4,4,2,2,2,1,1,1,1],kl=1;this.WebPDecodeRGBA=function(Xe,hn,Tn,Rn,Vn){var Bn=ql,qn=new wi,Gn=new ns;qn.ba=Gn,Gn.S=Bn,Gn.width=[Gn.width],Gn.height=[Gn.height];var Xn=Gn.width,Zn=Gn.height,cr=new ni;if(cr==null||Xe==null)var Tr=2;else e(cr!=null),Tr=rl(Xe,hn,Tn,cr.width,cr.height,cr.Pd,cr.Qd,cr.format,null);if(Tr!=0?Xn=0:(Xn!=null&&(Xn[0]=cr.width[0]),Zn!=null&&(Zn[0]=cr.height[0]),Xn=1),Xn){Gn.width=Gn.width[0],Gn.height=Gn.height[0],Rn!=null&&(Rn[0]=Gn.width),Vn!=null&&(Vn[0]=Gn.height);e:{if(Rn=new _s,(Vn=new $i).data=Xe,Vn.w=hn,Vn.ha=Tn,Vn.kd=1,hn=[0],e(Vn!=null),((Xe=rl(Vn.data,Vn.w,Vn.ha,null,null,null,hn,null,Vn))==0||Xe==7)&&hn[0]&&(Xe=4),(hn=Xe)==0){if(e(qn!=null),Rn.data=Vn.data,Rn.w=Vn.w+Vn.offset,Rn.ha=Vn.ha-Vn.offset,Rn.put=ki,Rn.ac=Js,Rn.bc=ms,Rn.ma=qn,Vn.xa){if((Xe=Pr())==null){qn=1;break e}if(function(tr,hr){var wr=[0],Vr=[0],Sr=[0];t:for(;;){if(tr==null)return 0;if(hr==null)return tr.a=2,0;if(tr.l=hr,tr.a=0,Wn(tr.m,hr.data,hr.w,hr.ha),!So(tr.m,wr,Vr,Sr)){tr.a=3;break t}if(tr.xb=yu,hr.width=wr[0],hr.height=Vr[0],!Cr(wr[0],Vr[0],1,tr,null))break t;return 1}return e(tr.a!=0),0}(Xe,Rn)){if(Rn=(hn=$l(Rn.width,Rn.height,qn.Oa,qn.ba))==0){t:{Rn=Xe;n:for(;;){if(Rn==null){Rn=0;break t}if(e(Rn.s.yc!=null),e(Rn.s.Ya!=null),e(0<Rn.s.Wb),e((Tn=Rn.l)!=null),e((Vn=Tn.ma)!=null),Rn.xb!=0){if(Rn.ca=Vn.ba,Rn.tb=Vn.tb,e(Rn.ca!=null),!ma(Vn.Oa,Tn,Lu)){Rn.a=2;break n}if(!Jr(Rn,Tn.width)||Tn.da)break n;if((Tn.da||ui(Rn.ca.S))&&yo(),11>Rn.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Rn.ca.f.kb.F!=null&&yo()),Rn.Pb&&0<Rn.s.ua&&Rn.s.vb.X==null&&!nr(Rn.s.vb,Rn.s.Wa.Xa)){Rn.a=1;break n}Rn.xb=0}if(!ur(Rn,Rn.V,Rn.Ba,Rn.c,Rn.i,Tn.o,ta))break n;Vn.Dc=Rn.Ma,Rn=1;break t}e(Rn.a!=0),Rn=0}Rn=!Rn}Rn&&(hn=Xe.a)}else hn=Xe.a}else{if((Xe=new qa)==null){qn=1;break e}if(Xe.Fa=Vn.na,Xe.P=Vn.P,Xe.qc=Vn.Sa,Wa(Xe,Rn)){if((hn=$l(Rn.width,Rn.height,qn.Oa,qn.ba))==0){if(Xe.Aa=0,Tn=qn.Oa,e((Vn=Xe)!=null),Tn!=null){if(0<(Xn=0>(Xn=Tn.Md)?0:100<Xn?255:255*Xn/100)){for(Zn=cr=0;4>Zn;++Zn)12>(Tr=Vn.pb[Zn]).lc&&(Tr.ia=Xn*rd[0>Tr.lc?0:Tr.lc]>>3),cr|=Tr.ia;cr&&(alert("todo:VP8InitRandom"),Vn.ia=1)}Vn.Ga=Tn.Id,100<Vn.Ga?Vn.Ga=100:0>Vn.Ga&&(Vn.Ga=0)}(function(tr,hr){if(tr==null)return 0;if(hr==null)return zs(tr,2,"NULL VP8Io parameter in VP8Decode().");if(!tr.cb&&!Wa(tr,hr))return 0;if(e(tr.cb),hr.ac==null||hr.ac(hr)){hr.ob&&(tr.L=0);var wr=ou[tr.L];if(tr.L==2?(tr.yb=0,tr.zb=0):(tr.yb=hr.v-wr>>4,tr.zb=hr.j-wr>>4,0>tr.yb&&(tr.yb=0),0>tr.zb&&(tr.zb=0)),tr.Va=hr.o+15+wr>>4,tr.Hb=hr.va+15+wr>>4,tr.Hb>tr.za&&(tr.Hb=tr.za),tr.Va>tr.Ub&&(tr.Va=tr.Ub),0<tr.L){var Vr=tr.ed;for(wr=0;4>wr;++wr){var Sr;if(tr.Qa.Cb){var Lr=tr.Qa.Lb[wr];tr.Qa.Fb||(Lr+=Vr.Tb)}else Lr=Vr.Tb;for(Sr=0;1>=Sr;++Sr){var Fr=tr.gd[wr][Sr],Br=Lr;if(Vr.Pc&&(Br+=Vr.vd[0],Sr&&(Br+=Vr.od[0])),0<(Br=0>Br?0:63<Br?63:Br)){var zr=Br;0<Vr.wb&&(zr=4<Vr.wb?zr>>2:zr>>1)>9-Vr.wb&&(zr=9-Vr.wb),1>zr&&(zr=1),Fr.dd=zr,Fr.tc=2*Br+zr,Fr.ld=40<=Br?2:15<=Br?1:0}else Fr.tc=0;Fr.La=Sr}}}wr=0}else zs(tr,6,"Frame setup failed"),wr=tr.a;if(wr=wr==0){if(wr){tr.$c=0,0<tr.Aa||(tr.Ic=kl);t:{wr=tr.Ic,Vr=4*(zr=tr.za);var Ni=32*zr,xi=zr+1,is=0<tr.L?zr*(0<tr.Aa?2:1):0,Si=(tr.Aa==2?2:1)*zr;if((Fr=Vr+832+(Sr=3*(16*wr+ou[tr.L])/2*Ni)+(Lr=tr.Fa!=null&&0<tr.Fa.length?tr.Kc.c*tr.Kc.i:0))!=Fr)wr=0;else{if(Fr>tr.Vb){if(tr.Vb=0,tr.Ec=Te(Fr),tr.Fc=0,tr.Ec==null){wr=zs(tr,1,"no memory during frame initialization.");break t}tr.Vb=Fr}Fr=tr.Ec,Br=tr.Fc,tr.Ac=Fr,tr.Bc=Br,Br+=Vr,tr.Gd=Re(Ni,Po),tr.Hd=0,tr.rb=Re(xi+1,rs),tr.sb=1,tr.wa=is?Re(is,Fi):null,tr.Y=0,tr.D.Nb=0,tr.D.wa=tr.wa,tr.D.Y=tr.Y,0<tr.Aa&&(tr.D.Y+=zr),e(!0),tr.oc=Fr,tr.pc=Br,Br+=832,tr.ya=Re(Si,Uo),tr.aa=0,tr.D.ya=tr.ya,tr.D.aa=tr.aa,tr.Aa==2&&(tr.D.aa+=zr),tr.R=16*zr,tr.B=8*zr,zr=(Ni=ou[tr.L])*tr.R,Ni=Ni/2*tr.B,tr.sa=Fr,tr.ta=Br+zr,tr.qa=tr.sa,tr.ra=tr.ta+16*wr*tr.R+Ni,tr.Ha=tr.qa,tr.Ia=tr.ra+8*wr*tr.B+Ni,tr.$c=0,Br+=Sr,tr.mb=Lr?Fr:null,tr.nb=Lr?Br:null,e(Br+Lr<=tr.Fc+tr.Vb),ra(tr),Ee(tr.Ac,tr.Bc,0,Vr),wr=1}}if(wr){if(hr.ka=0,hr.y=tr.sa,hr.O=tr.ta,hr.f=tr.qa,hr.N=tr.ra,hr.ea=tr.Ha,hr.Vd=tr.Ia,hr.fa=tr.R,hr.Rc=tr.B,hr.F=null,hr.J=0,!Cc){for(wr=-255;255>=wr;++wr)Pc[255+wr]=0>wr?-wr:wr;for(wr=-1020;1020>=wr;++wr)Ic[1020+wr]=-128>wr?-128:127<wr?127:wr;for(wr=-112;112>=wr;++wr)Rc[112+wr]=-16>wr?-16:15<wr?15:wr;for(wr=-255;510>=wr;++wr)kc[255+wr]=0>wr?0:255<wr?255:wr;Cc=1}bo=ss,vo=ja,gl=ha,il=ls,fu=Ta,Vo=Ha,xc=wn,Ec=Fn,Zu=yr,Kc=$r,Yc=er,Jl=lr,ec=Wr,pu=gi,tc=Rr,Tc=Ki,Nu=os,Zl=Do,Xa[0]=Vl,Xa[1]=Yi,Xa[2]=Xo,Xa[3]=fa,Xa[4]=Tl,Xa[5]=Aa,Xa[6]=Ks,Xa[7]=Al,Xa[8]=zn,Xa[9]=Mn,va[0]=Ro,va[1]=Zi,va[2]=Xi,va[3]=Ga,va[4]=lo,va[5]=ko,va[6]=qo,Ca[0]=kr,Ca[1]=tl,Ca[2]=Jn,Ca[3]=ar,Ca[4]=li,Ca[5]=ti,Ca[6]=es,wr=1}else wr=0}wr&&(wr=function(ps,ho){for(ps.M=0;ps.M<ps.Va;++ps.M){var as,Ei=ps.Jc[ps.M&ps.Xb],ci=ps.m,wo=ps;for(as=0;as<wo.za;++as){var Ji=ci,cs=wo,Gs=cs.Ac,Wo=cs.Bc+4*as,Oo=cs.zc,so=cs.ya[cs.aa+as];if(cs.Qa.Bb?so.$b=Er(Ji,cs.Pa.jb[0])?2+Er(Ji,cs.Pa.jb[2]):Er(Ji,cs.Pa.jb[1]):so.$b=0,cs.kc&&(so.Ad=Er(Ji,cs.Bd)),so.Za=!Er(Ji,145)+0,so.Za){var jo=so.Ob,Ho=0;for(cs=0;4>cs;++cs){var to,bs=Oo[0+cs];for(to=0;4>to;++to){bs=Md[Gs[Wo+to]][bs];for(var Ps=Zc[Er(Ji,bs[0])];0<Ps;)Ps=Zc[2*Ps+Er(Ji,bs[Ps])];bs=-Ps,Gs[Wo+to]=bs}r(jo,Ho,Gs,Wo,4),Ho+=4,Oo[0+cs]=bs}}else bs=Er(Ji,156)?Er(Ji,128)?1:3:Er(Ji,163)?2:0,so.Ob[0]=bs,Ee(Gs,Wo,bs,4),Ee(Oo,0,bs,4);so.Dd=Er(Ji,142)?Er(Ji,114)?Er(Ji,183)?1:3:2:0}if(wo.m.Ka)return zs(ps,7,"Premature end-of-partition0 encountered.");for(;ps.ja<ps.za;++ps.ja){if(wo=Ei,Ji=(ci=ps).rb[ci.sb-1],Gs=ci.rb[ci.sb+ci.ja],as=ci.ya[ci.aa+ci.ja],Wo=ci.kc?as.Ad:0)Ji.la=Gs.la=0,as.Za||(Ji.Na=Gs.Na=0),as.Hc=0,as.Gc=0,as.ia=0;else{var no,Is;if(Ji=Gs,Gs=wo,Wo=ci.Pa.Xc,Oo=ci.ya[ci.aa+ci.ja],so=ci.pb[Oo.$b],cs=Oo.ad,jo=0,Ho=ci.rb[ci.sb-1],bs=to=0,Ee(cs,jo,0,384),Oo.Za)var fo=0,po=Wo[3];else{Ps=Te(16);var $s=Ji.Na+Ho.Na;if($s=ru(Gs,Wo[1],$s,so.Eb,0,Ps,0),Ji.Na=Ho.Na=(0<$s)+0,1<$s)bo(Ps,0,cs,jo);else{var aa=Ps[0]+3>>3;for(Ps=0;256>Ps;Ps+=16)cs[jo+Ps]=aa}fo=1,po=Wo[0]}var Fs=15&Ji.la,Bs=15&Ho.la;for(Ps=0;4>Ps;++Ps){var No=1&Bs;for(aa=Is=0;4>aa;++aa)Fs=Fs>>1|(No=($s=ru(Gs,po,$s=No+(1&Fs),so.Sc,fo,cs,jo))>fo)<<7,Is=Is<<2|(3<$s?3:1<$s?2:cs[jo+0]!=0),jo+=16;Fs>>=4,Bs=Bs>>1|No<<7,to=(to<<8|Is)>>>0}for(po=Fs,fo=Bs>>4,no=0;4>no;no+=2){for(Is=0,Fs=Ji.la>>4+no,Bs=Ho.la>>4+no,Ps=0;2>Ps;++Ps){for(No=1&Bs,aa=0;2>aa;++aa)$s=No+(1&Fs),Fs=Fs>>1|(No=0<($s=ru(Gs,Wo[2],$s,so.Qc,0,cs,jo)))<<3,Is=Is<<2|(3<$s?3:1<$s?2:cs[jo+0]!=0),jo+=16;Fs>>=2,Bs=Bs>>1|No<<5}bs|=Is<<4*no,po|=Fs<<4<<no,fo|=(240&Bs)<<no}Ji.la=po,Ho.la=fo,Oo.Hc=to,Oo.Gc=bs,Oo.ia=43690&bs?0:so.ia,Wo=!(to|bs)}if(0<ci.L&&(ci.wa[ci.Y+ci.ja]=ci.gd[as.$b][as.Za],ci.wa[ci.Y+ci.ja].La|=!Wo),wo.Ka)return zs(ps,7,"Premature end-of-file encountered.")}if(ra(ps),ci=ho,wo=1,as=(Ei=ps).D,Ji=0<Ei.L&&Ei.M>=Ei.zb&&Ei.M<=Ei.Va,Ei.Aa==0)t:{if(as.M=Ei.M,as.uc=Ji,Pa(Ei,as),wo=1,as=(Is=Ei.D).Nb,Ji=(bs=ou[Ei.L])*Ei.R,Gs=bs/2*Ei.B,Ps=16*as*Ei.R,aa=8*as*Ei.B,Wo=Ei.sa,Oo=Ei.ta-Ji+Ps,so=Ei.qa,cs=Ei.ra-Gs+aa,jo=Ei.Ha,Ho=Ei.Ia-Gs+aa,Bs=(Fs=Is.M)==0,to=Fs>=Ei.Va-1,Ei.Aa==2&&Pa(Ei,Is),Is.uc)for(No=($s=Ei).D.M,e($s.D.uc),Is=$s.yb;Is<$s.Hb;++Is){fo=Is,po=No;var Zo=(La=(To=$s).D).Nb;no=To.R;var La=La.wa[La.Y+fo],xo=To.sa,Eo=To.ta+16*Zo*no+16*fo,la=La.dd,Us=La.tc;if(Us!=0)if(e(3<=Us),To.L==1)0<fo&&Tc(xo,Eo,no,Us+4),La.La&&Zl(xo,Eo,no,Us),0<po&&tc(xo,Eo,no,Us+4),La.La&&Nu(xo,Eo,no,Us);else{var ua=To.B,Qa=To.qa,ol=To.ra+8*Zo*ua+8*fo,Go=To.Ha,To=To.Ia+8*Zo*ua+8*fo;Zo=La.ld,0<fo&&(Ec(xo,Eo,no,Us+4,la,Zo),Kc(Qa,ol,Go,To,ua,Us+4,la,Zo)),La.La&&(Jl(xo,Eo,no,Us,la,Zo),pu(Qa,ol,Go,To,ua,Us,la,Zo)),0<po&&(xc(xo,Eo,no,Us+4,la,Zo),Zu(Qa,ol,Go,To,ua,Us+4,la,Zo)),La.La&&(Yc(xo,Eo,no,Us,la,Zo),ec(Qa,ol,Go,To,ua,Us,la,Zo))}}if(Ei.ia&&alert("todo:DitherRow"),ci.put!=null){if(Is=16*Fs,Fs=16*(Fs+1),Bs?(ci.y=Ei.sa,ci.O=Ei.ta+Ps,ci.f=Ei.qa,ci.N=Ei.ra+aa,ci.ea=Ei.Ha,ci.W=Ei.Ia+aa):(Is-=bs,ci.y=Wo,ci.O=Oo,ci.f=so,ci.N=cs,ci.ea=jo,ci.W=Ho),to||(Fs-=bs),Fs>ci.o&&(Fs=ci.o),ci.F=null,ci.J=null,Ei.Fa!=null&&0<Ei.Fa.length&&Is<Fs&&(ci.J=Co(Ei,ci,Is,Fs-Is),ci.F=Ei.mb,ci.F==null&&ci.F.length==0)){wo=zs(Ei,3,"Could not decode alpha data.");break t}Is<ci.j&&(bs=ci.j-Is,Is=ci.j,e(!(1&bs)),ci.O+=Ei.R*bs,ci.N+=Ei.B*(bs>>1),ci.W+=Ei.B*(bs>>1),ci.F!=null&&(ci.J+=ci.width*bs)),Is<Fs&&(ci.O+=ci.v,ci.N+=ci.v>>1,ci.W+=ci.v>>1,ci.F!=null&&(ci.J+=ci.v),ci.ka=Is-ci.j,ci.U=ci.va-ci.v,ci.T=Fs-Is,wo=ci.put(ci))}as+1!=Ei.Ic||to||(r(Ei.sa,Ei.ta-Ji,Wo,Oo+16*Ei.R,Ji),r(Ei.qa,Ei.ra-Gs,so,cs+8*Ei.B,Gs),r(Ei.Ha,Ei.Ia-Gs,jo,Ho+8*Ei.B,Gs))}if(!wo)return zs(ps,6,"Output aborted.")}return 1}(tr,hr)),hr.bc!=null&&hr.bc(hr),wr&=1}return wr?(tr.cb=0,wr):0})(Xe,Rn)||(hn=Xe.a)}}else hn=Xe.a}hn==0&&qn.Oa!=null&&qn.Oa.fd&&(hn=ga(qn.ba))}qn=hn}Bn=qn!=0?null:11>Bn?Gn.f.RGBA.eb:Gn.f.kb.y}else Bn=null;return Bn};var Uu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function De(un,bn){for(var gn="",xn=0;xn<4;xn++)gn+=String.fromCharCode(un[bn++]);return gn}function $e(un,bn){return un[bn+0]|un[bn+1]<<8}function Oe(un,bn){return(un[bn+0]|un[bn+1]<<8|un[bn+2]<<16)>>>0}function Ce(un,bn){return(un[bn+0]|un[bn+1]<<8|un[bn+2]<<16|un[bn+3]<<24)>>>0}new Ve;var Be=[0],Ue=[0],We=[],He=new Ve,Ge=n,Ye=function(un,bn){var gn={},xn=0,En=!1,Pn=0,Ln=0;if(gn.frames=[],!function(kn,In){for(var Kn=0;Kn<4;Kn++)if(kn[In+Kn]!="RIFF".charCodeAt(Kn))return!0;return!1}(un,bn)){for(Ce(un,bn+=4),bn+=8;bn<un.length;){var Cn=De(un,bn),Dn=Ce(un,bn+=4);bn+=4;var Un=Dn+(1&Dn);switch(Cn){case"VP8 ":case"VP8L":gn.frames[xn]===void 0&&(gn.frames[xn]={}),($n=gn.frames[xn]).src_off=En?Ln:bn-8,$n.src_size=Pn+Dn+8,xn++,En&&(En=!1,Pn=0,Ln=0);break;case"VP8X":($n=gn.header={}).feature_flags=un[bn];var Wn=bn+4;$n.canvas_width=1+Oe(un,Wn),Wn+=3,$n.canvas_height=1+Oe(un,Wn),Wn+=3;break;case"ALPH":En=!0,Pn=Un+8,Ln=bn-8;break;case"ANIM":($n=gn.header).bgcolor=Ce(un,bn),Wn=bn+4,$n.loop_count=$e(un,Wn),Wn+=2;break;case"ANMF":var On,$n;($n=gn.frames[xn]={}).offset_x=2*Oe(un,bn),bn+=3,$n.offset_y=2*Oe(un,bn),bn+=3,$n.width=1+Oe(un,bn),bn+=3,$n.height=1+Oe(un,bn),bn+=3,$n.duration=Oe(un,bn),bn+=3,On=un[bn++],$n.dispose=1&On,$n.blend=On>>1&1}Cn!="ANMF"&&(bn+=Un)}return gn}}(Ge,0);Ye.response=Ge,Ye.rgbaoutput=!0,Ye.dataurl=!1;var Je=Ye.header?Ye.header:null,Ze=Ye.frames?Ye.frames:null;if(Je){Je.loop_counter=Je.loop_count,Be=[Je.canvas_height],Ue=[Je.canvas_width];for(var fn=0;fn<Ze.length&&Ze[fn].blend!=0;fn++);}var yn=Ze[0],mn=He.WebPDecodeRGBA(Ge,yn.src_off,yn.src_size,Ue,Be);yn.rgba=mn,yn.imgwidth=Ue[0],yn.imgheight=Be[0];for(var pn=0;pn<Ue[0]*Be[0]*4;pn++)We[pn]=mn[pn];return this.width=Ue,this.height=Be,this.data=We,this}(function(n){var e,t,r,Ee,Te,Re,Me,Ve,De,$e=function(kn){return kn=kn||{},this.isStrokeTransparent=kn.isStrokeTransparent||!1,this.strokeOpacity=kn.strokeOpacity||1,this.strokeStyle=kn.strokeStyle||"#000000",this.fillStyle=kn.fillStyle||"#000000",this.isFillTransparent=kn.isFillTransparent||!1,this.fillOpacity=kn.fillOpacity||1,this.font=kn.font||"10px sans-serif",this.textBaseline=kn.textBaseline||"alphabetic",this.textAlign=kn.textAlign||"left",this.lineWidth=kn.lineWidth||1,this.lineJoin=kn.lineJoin||"miter",this.lineCap=kn.lineCap||"butt",this.path=kn.path||[],this.transform=kn.transform!==void 0?kn.transform.clone():new Ve,this.globalCompositeOperation=kn.globalCompositeOperation||"normal",this.globalAlpha=kn.globalAlpha||1,this.clip_path=kn.clip_path||[],this.currentPoint=kn.currentPoint||new Re,this.miterLimit=kn.miterLimit||10,this.lastPoint=kn.lastPoint||new Re,this.lineDashOffset=kn.lineDashOffset||0,this.lineDash=kn.lineDash||[],this.margin=kn.margin||[0,0,0,0],this.prevPageLastElemOffset=kn.prevPageLastElemOffset||0,this.ignoreClearRect=typeof kn.ignoreClearRect!="boolean"||kn.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new Oe(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,Ee=this.internal.getHorizontalCoordinate,Te=this.internal.getVerticalCoordinate,Re=this.internal.Point,Me=this.internal.Rectangle,Ve=this.internal.Matrix,De=new $e}]);var Oe=function(kn){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var In=kn;Object.defineProperty(this,"pdf",{get:function(){return In}});var Kn=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Kn},set:function(xr){Kn=!!xr}});var Qn=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Qn},set:function(xr){Qn=!!xr}});var rr=0;Object.defineProperty(this,"posX",{get:function(){return rr},set:function(xr){isNaN(xr)||(rr=xr)}});var or=0;Object.defineProperty(this,"posY",{get:function(){return or},set:function(xr){isNaN(xr)||(or=xr)}}),Object.defineProperty(this,"margin",{get:function(){return De.margin},set:function(xr){var nr;typeof xr=="number"?nr=[xr,xr,xr,xr]:((nr=new Array(4))[0]=xr[0],nr[1]=xr.length>=2?xr[1]:nr[0],nr[2]=xr.length>=3?xr[2]:nr[0],nr[3]=xr.length>=4?xr[3]:nr[1]),De.margin=nr}});var pr=!1;Object.defineProperty(this,"autoPaging",{get:function(){return pr},set:function(xr){pr=xr}});var mr=0;Object.defineProperty(this,"lastBreak",{get:function(){return mr},set:function(xr){mr=xr}});var Er=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Er},set:function(xr){Er=xr}}),Object.defineProperty(this,"ctx",{get:function(){return De},set:function(xr){xr instanceof $e&&(De=xr)}}),Object.defineProperty(this,"path",{get:function(){return De.path},set:function(xr){De.path=xr}});var jr=[];Object.defineProperty(this,"ctxStack",{get:function(){return jr},set:function(xr){jr=xr}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(xr){var nr;nr=Ce(xr),this.ctx.fillStyle=nr.style,this.ctx.isFillTransparent=nr.a===0,this.ctx.fillOpacity=nr.a,this.pdf.setFillColor(nr.r,nr.g,nr.b,{a:nr.a}),this.pdf.setTextColor(nr.r,nr.g,nr.b,{a:nr.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(xr){var nr=Ce(xr);this.ctx.strokeStyle=nr.style,this.ctx.isStrokeTransparent=nr.a===0,this.ctx.strokeOpacity=nr.a,nr.a===0?this.pdf.setDrawColor(255,255,255):(nr.a,this.pdf.setDrawColor(nr.r,nr.g,nr.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(xr){["butt","round","square"].indexOf(xr)!==-1&&(this.ctx.lineCap=xr,this.pdf.setLineCap(xr))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(xr){isNaN(xr)||(this.ctx.lineWidth=xr,this.pdf.setLineWidth(xr))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(xr){["bevel","round","miter"].indexOf(xr)!==-1&&(this.ctx.lineJoin=xr,this.pdf.setLineJoin(xr))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(xr){isNaN(xr)||(this.ctx.miterLimit=xr,this.pdf.setMiterLimit(xr))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(xr){this.ctx.textBaseline=xr}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(xr){["right","end","center","left","start"].indexOf(xr)!==-1&&(this.ctx.textAlign=xr)}});var Kr=null,Hr=null;Object.defineProperty(this,"fontFaces",{get:function(){return Hr},set:function(xr){Kr=null,Hr=xr}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(xr){var nr;if(this.ctx.font=xr,(nr=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(xr))!==null){var Oi=nr[1];nr[2];var Ti=nr[3],yi=nr[4];nr[5];var qr=nr[6],di=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(yi)[2];yi=Math.floor(di==="px"?parseFloat(yi)*this.pdf.internal.scaleFactor:di==="em"?parseFloat(yi)*this.pdf.getFontSize():parseFloat(yi)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(yi);var Zr=function(ii){var hi,Mi,ji=[],Ur=ii.trim();if(Ur==="")return Jt;if(Ur in Mt)return[Mt[Ur]];for(;Ur!=="";){switch(Mi=null,hi=(Ur=Et(Ur)).charAt(0)){case'"':case"'":Mi=Rt(Ur.substring(1),hi);break;default:Mi=Dt(Ur)}if(Mi===null||(ji.push(Mi[0]),(Ur=Et(Mi[1]))!==""&&Ur.charAt(0)!==","))return Jt;Ur=Ur.replace(/^,/,"")}return ji}(qr);if(this.fontFaces){var mi=function(ii,hi){if(Kr===null){var Mi=function(ji){var Ur=[];return Object.keys(ji).forEach(function(Pi){ji[Pi].forEach(function(Bi){var vi=null;switch(Bi){case"bold":vi={family:Pi,weight:"bold"};break;case"italic":vi={family:Pi,style:"italic"};break;case"bolditalic":vi={family:Pi,weight:"bold",style:"italic"};break;case"":case"normal":vi={family:Pi}}vi!==null&&(vi.ref={name:Pi,style:Bi},Ur.push(vi))})}),Ur}(ii.getFontList());Kr=function(ji){for(var Ur={},Pi=0;Pi<ji.length;++Pi){var Bi=Ct(ji[Pi]),vi=Bi.family,Ri=Bi.stretch,ui=Bi.style,vs=Bi.weight;Ur[vi]=Ur[vi]||{},Ur[vi][Ri]=Ur[vi][Ri]||{},Ur[vi][Ri][ui]=Ur[vi][Ri][ui]||{},Ur[vi][Ri][ui][vs]=Bi}return Ur}(Mi.concat(hi))}return Kr}(this.pdf,this.fontFaces),pi=Zr.map(function(ii){return{family:ii,stretch:"normal",weight:Ti,style:Oi}}),Wi=function(ii,hi,Mi){for(var ji=(Mi=Mi||{}).defaultFontFamily||"times",Ur=Object.assign({},Bt,Mi.genericFontFamilies||{}),Pi=null,Bi=null,vi=0;vi<hi.length;++vi)if(Ur[(Pi=Ct(hi[vi])).family]&&(Pi.family=Ur[Pi.family]),ii.hasOwnProperty(Pi.family)){Bi=ii[Pi.family];break}if(!(Bi=Bi||ii[ji]))throw new Error("Could not find a font-family for the rule '"+qt(Pi)+"' and default family '"+ji+"'.");if(Bi=function(Ri,ui){if(ui[Ri])return ui[Ri];var vs=Ft[Ri],ds=vs<=Ft.normal?-1:1,ns=Ot(ui,kt,vs,ds);if(!ns)throw new Error("Could not find a matching font-stretch value for "+Ri);return ns}(Pi.stretch,Bi),Bi=function(Ri,ui){if(ui[Ri])return ui[Ri];for(var vs=Pt[Ri],ds=0;ds<vs.length;++ds)if(ui[vs[ds]])return ui[vs[ds]];throw new Error("Could not find a matching font-style for "+Ri)}(Pi.style,Bi),!(Bi=function(Ri,ui){if(ui[Ri])return ui[Ri];if(Ri===400&&ui[500])return ui[500];if(Ri===500&&ui[400])return ui[400];var vs=jt[Ri],ds=Ot(ui,It,vs,Ri<400?-1:1);if(!ds)throw new Error("Could not find a matching font-weight for value "+Ri);return ds}(Pi.weight,Bi)))throw new Error("Failed to resolve a font for the rule '"+qt(Pi)+"'.");return Bi}(mi,pi);this.pdf.setFont(Wi.ref.name,Wi.ref.style)}else{var si="";(Ti==="bold"||parseInt(Ti,10)>=700||Oi==="bold")&&(si="bold"),Oi==="italic"&&(si+="italic"),si.length===0&&(si="normal");for(var _r="",Dr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Xr=0;Xr<Zr.length;Xr++){if(this.pdf.internal.getFont(Zr[Xr],si,{noFallback:!0,disableWarning:!0})!==void 0){_r=Zr[Xr];break}if(si==="bolditalic"&&this.pdf.internal.getFont(Zr[Xr],"bold",{noFallback:!0,disableWarning:!0})!==void 0)_r=Zr[Xr],si="bold";else if(this.pdf.internal.getFont(Zr[Xr],"normal",{noFallback:!0,disableWarning:!0})!==void 0){_r=Zr[Xr],si="normal";break}}if(_r===""){for(var Gr=0;Gr<Zr.length;Gr++)if(Dr[Zr[Gr]]){_r=Dr[Zr[Gr]];break}}_r=_r===""?"Times":_r,this.pdf.setFont(_r,si)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(xr){this.ctx.globalCompositeOperation=xr}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(xr){this.ctx.globalAlpha=xr}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(xr){this.ctx.lineDashOffset=xr,$n.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(xr){this.ctx.lineDash=xr,$n.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(xr){this.ctx.ignoreClearRect=!!xr}})};Oe.prototype.setLineDash=function(kn){this.lineDash=kn},Oe.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},Oe.prototype.fill=function(){Ze.call(this,"fill",!1)},Oe.prototype.stroke=function(){Ze.call(this,"stroke",!1)},Oe.prototype.beginPath=function(){this.path=[{type:"begin"}]},Oe.prototype.moveTo=function(kn,In){if(isNaN(kn)||isNaN(In))throw o.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Kn=this.ctx.transform.applyToPoint(new Re(kn,In));this.path.push({type:"mt",x:Kn.x,y:Kn.y}),this.ctx.lastPoint=new Re(kn,In)},Oe.prototype.closePath=function(){var kn=new Re(0,0),In=0;for(In=this.path.length-1;In!==-1;In--)if(this.path[In].type==="begin"&&_typeof(this.path[In+1])==="object"&&typeof this.path[In+1].x=="number"){kn=new Re(this.path[In+1].x,this.path[In+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new Re(kn.x,kn.y)},Oe.prototype.lineTo=function(kn,In){if(isNaN(kn)||isNaN(In))throw o.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Kn=this.ctx.transform.applyToPoint(new Re(kn,In));this.path.push({type:"lt",x:Kn.x,y:Kn.y}),this.ctx.lastPoint=new Re(Kn.x,Kn.y)},Oe.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Ze.call(this,null,!0)},Oe.prototype.quadraticCurveTo=function(kn,In,Kn,Qn){if(isNaN(Kn)||isNaN(Qn)||isNaN(kn)||isNaN(In))throw o.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var rr=this.ctx.transform.applyToPoint(new Re(Kn,Qn)),or=this.ctx.transform.applyToPoint(new Re(kn,In));this.path.push({type:"qct",x1:or.x,y1:or.y,x:rr.x,y:rr.y}),this.ctx.lastPoint=new Re(rr.x,rr.y)},Oe.prototype.bezierCurveTo=function(kn,In,Kn,Qn,rr,or){if(isNaN(rr)||isNaN(or)||isNaN(kn)||isNaN(In)||isNaN(Kn)||isNaN(Qn))throw o.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var pr=this.ctx.transform.applyToPoint(new Re(rr,or)),mr=this.ctx.transform.applyToPoint(new Re(kn,In)),Er=this.ctx.transform.applyToPoint(new Re(Kn,Qn));this.path.push({type:"bct",x1:mr.x,y1:mr.y,x2:Er.x,y2:Er.y,x:pr.x,y:pr.y}),this.ctx.lastPoint=new Re(pr.x,pr.y)},Oe.prototype.arc=function(kn,In,Kn,Qn,rr,or){if(isNaN(kn)||isNaN(In)||isNaN(Kn)||isNaN(Qn)||isNaN(rr))throw o.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(or=!!or,!this.ctx.transform.isIdentity){var pr=this.ctx.transform.applyToPoint(new Re(kn,In));kn=pr.x,In=pr.y;var mr=this.ctx.transform.applyToPoint(new Re(0,Kn)),Er=this.ctx.transform.applyToPoint(new Re(0,0));Kn=Math.sqrt(Math.pow(mr.x-Er.x,2)+Math.pow(mr.y-Er.y,2))}Math.abs(rr-Qn)>=2*Math.PI&&(Qn=0,rr=2*Math.PI),this.path.push({type:"arc",x:kn,y:In,radius:Kn,startAngle:Qn,endAngle:rr,counterclockwise:or})},Oe.prototype.arcTo=function(kn,In,Kn,Qn,rr){throw new Error("arcTo not implemented.")},Oe.prototype.rect=function(kn,In,Kn,Qn){if(isNaN(kn)||isNaN(In)||isNaN(Kn)||isNaN(Qn))throw o.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(kn,In),this.lineTo(kn+Kn,In),this.lineTo(kn+Kn,In+Qn),this.lineTo(kn,In+Qn),this.lineTo(kn,In),this.lineTo(kn+Kn,In),this.lineTo(kn,In)},Oe.prototype.fillRect=function(kn,In,Kn,Qn){if(isNaN(kn)||isNaN(In)||isNaN(Kn)||isNaN(Qn))throw o.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!Be.call(this)){var rr={};this.lineCap!=="butt"&&(rr.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(rr.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(kn,In,Kn,Qn),this.fill(),rr.hasOwnProperty("lineCap")&&(this.lineCap=rr.lineCap),rr.hasOwnProperty("lineJoin")&&(this.lineJoin=rr.lineJoin)}},Oe.prototype.strokeRect=function(kn,In,Kn,Qn){if(isNaN(kn)||isNaN(In)||isNaN(Kn)||isNaN(Qn))throw o.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");Ue.call(this)||(this.beginPath(),this.rect(kn,In,Kn,Qn),this.stroke())},Oe.prototype.clearRect=function(kn,In,Kn,Qn){if(isNaN(kn)||isNaN(In)||isNaN(Kn)||isNaN(Qn))throw o.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(kn,In,Kn,Qn))},Oe.prototype.save=function(kn){kn=typeof kn!="boolean"||kn;for(var In=this.pdf.internal.getCurrentPageInfo().pageNumber,Kn=0;Kn<this.pdf.internal.getNumberOfPages();Kn++)this.pdf.setPage(Kn+1),this.pdf.internal.out("q");if(this.pdf.setPage(In),kn){this.ctx.fontSize=this.pdf.internal.getFontSize();var Qn=new $e(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Qn}},Oe.prototype.restore=function(kn){kn=typeof kn!="boolean"||kn;for(var In=this.pdf.internal.getCurrentPageInfo().pageNumber,Kn=0;Kn<this.pdf.internal.getNumberOfPages();Kn++)this.pdf.setPage(Kn+1),this.pdf.internal.out("Q");this.pdf.setPage(In),kn&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},Oe.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var Ce=function(kn){var In,Kn,Qn,rr;if(kn.isCanvasGradient===!0&&(kn=kn.getColor()),!kn)return{r:0,g:0,b:0,a:0,style:kn};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(kn))In=0,Kn=0,Qn=0,rr=0;else{var or=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(kn);if(or!==null)In=parseInt(or[1]),Kn=parseInt(or[2]),Qn=parseInt(or[3]),rr=1;else if((or=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(kn))!==null)In=parseInt(or[1]),Kn=parseInt(or[2]),Qn=parseInt(or[3]),rr=parseFloat(or[4]);else{if(rr=1,typeof kn=="string"&&kn.charAt(0)!=="#"){var pr=new h(kn);kn=pr.ok?pr.toHex():"#000000"}kn.length===4?(In=kn.substring(1,2),In+=In,Kn=kn.substring(2,3),Kn+=Kn,Qn=kn.substring(3,4),Qn+=Qn):(In=kn.substring(1,3),Kn=kn.substring(3,5),Qn=kn.substring(5,7)),In=parseInt(In,16),Kn=parseInt(Kn,16),Qn=parseInt(Qn,16)}}return{r:In,g:Kn,b:Qn,a:rr,style:kn}},Be=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},Ue=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};Oe.prototype.fillText=function(kn,In,Kn,Qn){if(isNaN(In)||isNaN(Kn)||typeof kn!="string")throw o.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Qn=isNaN(Qn)?void 0:Qn,!Be.call(this)){var rr=Un(this.ctx.transform.rotation),or=this.ctx.transform.scaleX;xn.call(this,{text:kn,x:In,y:Kn,scale:or,angle:rr,align:this.textAlign,maxWidth:Qn})}},Oe.prototype.strokeText=function(kn,In,Kn,Qn){if(isNaN(In)||isNaN(Kn)||typeof kn!="string")throw o.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!Ue.call(this)){Qn=isNaN(Qn)?void 0:Qn;var rr=Un(this.ctx.transform.rotation),or=this.ctx.transform.scaleX;xn.call(this,{text:kn,x:In,y:Kn,scale:or,renderingMode:"stroke",angle:rr,align:this.textAlign,maxWidth:Qn})}},Oe.prototype.measureText=function(kn){if(typeof kn!="string")throw o.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var In=this.pdf,Kn=this.pdf.internal.scaleFactor,Qn=In.internal.getFontSize(),rr=In.getStringUnitWidth(kn)*Qn/In.internal.scaleFactor;return new function(or){var pr=(or=or||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return pr}}),this}({width:rr*=Math.round(96*Kn/72*1e4)/1e4})},Oe.prototype.scale=function(kn,In){if(isNaN(kn)||isNaN(In))throw o.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Kn=new Ve(kn,0,0,In,0,0);this.ctx.transform=this.ctx.transform.multiply(Kn)},Oe.prototype.rotate=function(kn){if(isNaN(kn))throw o.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var In=new Ve(Math.cos(kn),Math.sin(kn),-Math.sin(kn),Math.cos(kn),0,0);this.ctx.transform=this.ctx.transform.multiply(In)},Oe.prototype.translate=function(kn,In){if(isNaN(kn)||isNaN(In))throw o.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Kn=new Ve(1,0,0,1,kn,In);this.ctx.transform=this.ctx.transform.multiply(Kn)},Oe.prototype.transform=function(kn,In,Kn,Qn,rr,or){if(isNaN(kn)||isNaN(In)||isNaN(Kn)||isNaN(Qn)||isNaN(rr)||isNaN(or))throw o.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var pr=new Ve(kn,In,Kn,Qn,rr,or);this.ctx.transform=this.ctx.transform.multiply(pr)},Oe.prototype.setTransform=function(kn,In,Kn,Qn,rr,or){kn=isNaN(kn)?1:kn,In=isNaN(In)?0:In,Kn=isNaN(Kn)?0:Kn,Qn=isNaN(Qn)?1:Qn,rr=isNaN(rr)?0:rr,or=isNaN(or)?0:or,this.ctx.transform=new Ve(kn,In,Kn,Qn,rr,or)};var We=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};Oe.prototype.drawImage=function(kn,In,Kn,Qn,rr,or,pr,mr,Er){var jr=this.pdf.getImageProperties(kn),Kr=1,Hr=1,xr=1,nr=1;Qn!==void 0&&mr!==void 0&&(xr=mr/Qn,nr=Er/rr,Kr=jr.width/Qn*mr/Qn,Hr=jr.height/rr*Er/rr),or===void 0&&(or=In,pr=Kn,In=0,Kn=0),Qn!==void 0&&mr===void 0&&(mr=Qn,Er=rr),Qn===void 0&&mr===void 0&&(mr=jr.width,Er=jr.height);for(var Oi,Ti=this.ctx.transform.decompose(),yi=Un(Ti.rotate.shx),qr=new Ve,di=(qr=(qr=(qr=qr.multiply(Ti.translate)).multiply(Ti.skew)).multiply(Ti.scale)).applyToRectangle(new Me(or-In*xr,pr-Kn*nr,Qn*Kr,rr*Hr)),Zr=He.call(this,di),mi=[],pi=0;pi<Zr.length;pi+=1)mi.indexOf(Zr[pi])===-1&&mi.push(Zr[pi]);if(Je(mi),this.autoPaging)for(var Wi=mi[0],si=mi[mi.length-1],_r=Wi;_r<si+1;_r++){this.pdf.setPage(_r);var Dr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Xr=_r===1?this.posY+this.margin[0]:this.margin[0],Gr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ii=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],hi=_r===1?0:Gr+(_r-2)*ii;if(this.ctx.clip_path.length!==0){var Mi=this.path;Oi=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Ye(Oi,this.posX+this.margin[3],-hi+Xr+this.ctx.prevPageLastElemOffset),fn.call(this,"fill",!0),this.path=Mi}var ji=JSON.parse(JSON.stringify(di));ji=Ye([ji],this.posX+this.margin[3],-hi+Xr+this.ctx.prevPageLastElemOffset)[0];var Ur=(_r>Wi||_r<si)&&We.call(this);Ur&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Dr,ii,null).clip().discardPath()),this.pdf.addImage(kn,"JPEG",ji.x,ji.y,ji.w,ji.h,null,null,yi),Ur&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(kn,"JPEG",di.x,di.y,di.w,di.h,null,null,yi)};var He=function(kn,In,Kn){var Qn=[];In=In||this.pdf.internal.pageSize.width,Kn=Kn||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var rr=this.posY+this.ctx.prevPageLastElemOffset;switch(kn.type){default:case"mt":case"lt":Qn.push(Math.floor((kn.y+rr)/Kn)+1);break;case"arc":Qn.push(Math.floor((kn.y+rr-kn.radius)/Kn)+1),Qn.push(Math.floor((kn.y+rr+kn.radius)/Kn)+1);break;case"qct":var or=Wn(this.ctx.lastPoint.x,this.ctx.lastPoint.y,kn.x1,kn.y1,kn.x,kn.y);Qn.push(Math.floor((or.y+rr)/Kn)+1),Qn.push(Math.floor((or.y+or.h+rr)/Kn)+1);break;case"bct":var pr=On(this.ctx.lastPoint.x,this.ctx.lastPoint.y,kn.x1,kn.y1,kn.x2,kn.y2,kn.x,kn.y);Qn.push(Math.floor((pr.y+rr)/Kn)+1),Qn.push(Math.floor((pr.y+pr.h+rr)/Kn)+1);break;case"rect":Qn.push(Math.floor((kn.y+rr)/Kn)+1),Qn.push(Math.floor((kn.y+kn.h+rr)/Kn)+1)}for(var mr=0;mr<Qn.length;mr+=1)for(;this.pdf.internal.getNumberOfPages()<Qn[mr];)Ge.call(this);return Qn},Ge=function(){var kn=this.fillStyle,In=this.strokeStyle,Kn=this.font,Qn=this.lineCap,rr=this.lineWidth,or=this.lineJoin;this.pdf.addPage(),this.fillStyle=kn,this.strokeStyle=In,this.font=Kn,this.lineCap=Qn,this.lineWidth=rr,this.lineJoin=or},Ye=function(kn,In,Kn){for(var Qn=0;Qn<kn.length;Qn++)switch(kn[Qn].type){case"bct":kn[Qn].x2+=In,kn[Qn].y2+=Kn;case"qct":kn[Qn].x1+=In,kn[Qn].y1+=Kn;default:kn[Qn].x+=In,kn[Qn].y+=Kn}return kn},Je=function(kn){return kn.sort(function(In,Kn){return In-Kn})},Ze=function(kn,In){for(var Kn,Qn,rr=this.fillStyle,or=this.strokeStyle,pr=this.lineCap,mr=this.lineWidth,Er=Math.abs(mr*this.ctx.transform.scaleX),jr=this.lineJoin,Kr=JSON.parse(JSON.stringify(this.path)),Hr=JSON.parse(JSON.stringify(this.path)),xr=[],nr=0;nr<Hr.length;nr++)if(Hr[nr].x!==void 0)for(var Oi=He.call(this,Hr[nr]),Ti=0;Ti<Oi.length;Ti+=1)xr.indexOf(Oi[Ti])===-1&&xr.push(Oi[Ti]);for(var yi=0;yi<xr.length;yi++)for(;this.pdf.internal.getNumberOfPages()<xr[yi];)Ge.call(this);if(Je(xr),this.autoPaging)for(var qr=xr[0],di=xr[xr.length-1],Zr=qr;Zr<di+1;Zr++){this.pdf.setPage(Zr),this.fillStyle=rr,this.strokeStyle=or,this.lineCap=pr,this.lineWidth=Er,this.lineJoin=jr;var mi=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pi=Zr===1?this.posY+this.margin[0]:this.margin[0],Wi=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],si=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_r=Zr===1?0:Wi+(Zr-2)*si;if(this.ctx.clip_path.length!==0){var Dr=this.path;Kn=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Ye(Kn,this.posX+this.margin[3],-_r+pi+this.ctx.prevPageLastElemOffset),fn.call(this,kn,!0),this.path=Dr}if(Qn=JSON.parse(JSON.stringify(Kr)),this.path=Ye(Qn,this.posX+this.margin[3],-_r+pi+this.ctx.prevPageLastElemOffset),In===!1||Zr===0){var Xr=(Zr>qr||Zr<di)&&We.call(this);Xr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],mi,si,null).clip().discardPath()),fn.call(this,kn,In),Xr&&this.pdf.restoreGraphicsState()}this.lineWidth=mr}else this.lineWidth=Er,fn.call(this,kn,In),this.lineWidth=mr;this.path=Kr},fn=function(kn,In){if((kn!=="stroke"||In||!Ue.call(this))&&(kn==="stroke"||In||!Be.call(this))){for(var Kn,Qn,rr=[],or=this.path,pr=0;pr<or.length;pr++){var mr=or[pr];switch(mr.type){case"begin":rr.push({begin:!0});break;case"close":rr.push({close:!0});break;case"mt":rr.push({start:mr,deltas:[],abs:[]});break;case"lt":var Er=rr.length;if(or[pr-1]&&!isNaN(or[pr-1].x)&&(Kn=[mr.x-or[pr-1].x,mr.y-or[pr-1].y],Er>0)){for(;Er>=0;Er--)if(rr[Er-1].close!==!0&&rr[Er-1].begin!==!0){rr[Er-1].deltas.push(Kn),rr[Er-1].abs.push(mr);break}}break;case"bct":Kn=[mr.x1-or[pr-1].x,mr.y1-or[pr-1].y,mr.x2-or[pr-1].x,mr.y2-or[pr-1].y,mr.x-or[pr-1].x,mr.y-or[pr-1].y],rr[rr.length-1].deltas.push(Kn);break;case"qct":var jr=or[pr-1].x+2/3*(mr.x1-or[pr-1].x),Kr=or[pr-1].y+2/3*(mr.y1-or[pr-1].y),Hr=mr.x+2/3*(mr.x1-mr.x),xr=mr.y+2/3*(mr.y1-mr.y),nr=mr.x,Oi=mr.y;Kn=[jr-or[pr-1].x,Kr-or[pr-1].y,Hr-or[pr-1].x,xr-or[pr-1].y,nr-or[pr-1].x,Oi-or[pr-1].y],rr[rr.length-1].deltas.push(Kn);break;case"arc":rr.push({deltas:[],abs:[],arc:!0}),Array.isArray(rr[rr.length-1].abs)&&rr[rr.length-1].abs.push(mr)}}Qn=In?null:kn==="stroke"?"stroke":"fill";for(var Ti=!1,yi=0;yi<rr.length;yi++)if(rr[yi].arc)for(var qr=rr[yi].abs,di=0;di<qr.length;di++){var Zr=qr[di];Zr.type==="arc"?pn.call(this,Zr.x,Zr.y,Zr.radius,Zr.startAngle,Zr.endAngle,Zr.counterclockwise,void 0,In,!Ti):En.call(this,Zr.x,Zr.y),Ti=!0}else if(rr[yi].close===!0)this.pdf.internal.out("h"),Ti=!1;else if(rr[yi].begin!==!0){var mi=rr[yi].start.x,pi=rr[yi].start.y;Pn.call(this,rr[yi].deltas,mi,pi),Ti=!0}Qn&&un.call(this,Qn),In&&bn.call(this)}},yn=function(kn){var In=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Kn=In*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return kn-Kn;case"top":return kn+In-Kn;case"hanging":return kn+In-2*Kn;case"middle":return kn+In/2-Kn;default:return kn}},mn=function(kn){return kn+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};Oe.prototype.createLinearGradient=function(){var kn=function(){};return kn.colorStops=[],kn.addColorStop=function(In,Kn){this.colorStops.push([In,Kn])},kn.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},kn.isCanvasGradient=!0,kn},Oe.prototype.createPattern=function(){return this.createLinearGradient()},Oe.prototype.createRadialGradient=function(){return this.createLinearGradient()};var pn=function(kn,In,Kn,Qn,rr,or,pr,mr,Er){for(var jr=Cn.call(this,Kn,Qn,rr,or),Kr=0;Kr<jr.length;Kr++){var Hr=jr[Kr];Kr===0&&(Er?gn.call(this,Hr.x1+kn,Hr.y1+In):En.call(this,Hr.x1+kn,Hr.y1+In)),Ln.call(this,kn,In,Hr.x2,Hr.y2,Hr.x3,Hr.y3,Hr.x4,Hr.y4)}mr?bn.call(this):un.call(this,pr)},un=function(kn){switch(kn){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},bn=function(){this.pdf.clip(),this.pdf.discardPath()},gn=function(kn,In){this.pdf.internal.out(t(kn)+" "+r(In)+" m")},xn=function(kn){var In;switch(kn.align){case"right":case"end":In="right";break;case"center":In="center";break;default:In="left"}var Kn=this.pdf.getTextDimensions(kn.text),Qn=yn.call(this,kn.y),rr=mn.call(this,Qn)-Kn.h,or=this.ctx.transform.applyToPoint(new Re(kn.x,Qn)),pr=this.ctx.transform.decompose(),mr=new Ve;mr=(mr=(mr=mr.multiply(pr.translate)).multiply(pr.skew)).multiply(pr.scale);for(var Er,jr,Kr,Hr=this.ctx.transform.applyToRectangle(new Me(kn.x,Qn,Kn.w,Kn.h)),xr=mr.applyToRectangle(new Me(kn.x,rr,Kn.w,Kn.h)),nr=He.call(this,xr),Oi=[],Ti=0;Ti<nr.length;Ti+=1)Oi.indexOf(nr[Ti])===-1&&Oi.push(nr[Ti]);if(Je(Oi),this.autoPaging)for(var yi=Oi[0],qr=Oi[Oi.length-1],di=yi;di<qr+1;di++){this.pdf.setPage(di);var Zr=di===1?this.posY+this.margin[0]:this.margin[0],mi=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],pi=this.pdf.internal.pageSize.height-this.margin[2],Wi=pi-this.margin[0],si=this.pdf.internal.pageSize.width-this.margin[1],_r=si-this.margin[3],Dr=di===1?0:mi+(di-2)*Wi;if(this.ctx.clip_path.length!==0){var Xr=this.path;Er=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Ye(Er,this.posX+this.margin[3],-1*Dr+Zr),fn.call(this,"fill",!0),this.path=Xr}var Gr=Ye([JSON.parse(JSON.stringify(xr))],this.posX+this.margin[3],-Dr+Zr+this.ctx.prevPageLastElemOffset)[0];kn.scale>=.01&&(jr=this.pdf.internal.getFontSize(),this.pdf.setFontSize(jr*kn.scale),Kr=this.lineWidth,this.lineWidth=Kr*kn.scale);var ii=this.autoPaging!=="text";if(ii||Gr.y+Gr.h<=pi){if(ii||Gr.y>=Zr&&Gr.x<=si){var hi=ii?kn.text:this.pdf.splitTextToSize(kn.text,kn.maxWidth||si-Gr.x)[0],Mi=Ye([JSON.parse(JSON.stringify(Hr))],this.posX+this.margin[3],-Dr+Zr+this.ctx.prevPageLastElemOffset)[0],ji=ii&&(di>yi||di<qr)&&We.call(this);ji&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_r,Wi,null).clip().discardPath()),this.pdf.text(hi,Mi.x,Mi.y,{angle:kn.angle,align:In,renderingMode:kn.renderingMode}),ji&&this.pdf.restoreGraphicsState()}}else Gr.y<pi&&(this.ctx.prevPageLastElemOffset+=pi-Gr.y);kn.scale>=.01&&(this.pdf.setFontSize(jr),this.lineWidth=Kr)}else kn.scale>=.01&&(jr=this.pdf.internal.getFontSize(),this.pdf.setFontSize(jr*kn.scale),Kr=this.lineWidth,this.lineWidth=Kr*kn.scale),this.pdf.text(kn.text,or.x+this.posX,or.y+this.posY,{angle:kn.angle,align:In,renderingMode:kn.renderingMode,maxWidth:kn.maxWidth}),kn.scale>=.01&&(this.pdf.setFontSize(jr),this.lineWidth=Kr)},En=function(kn,In,Kn,Qn){Kn=Kn||0,Qn=Qn||0,this.pdf.internal.out(t(kn+Kn)+" "+r(In+Qn)+" l")},Pn=function(kn,In,Kn){return this.pdf.lines(kn,In,Kn,null,null)},Ln=function(kn,In,Kn,Qn,rr,or,pr,mr){this.pdf.internal.out([e(Ee(Kn+kn)),e(Te(Qn+In)),e(Ee(rr+kn)),e(Te(or+In)),e(Ee(pr+kn)),e(Te(mr+In)),"c"].join(" "))},Cn=function(kn,In,Kn,Qn){for(var rr=2*Math.PI,or=Math.PI/2;In>Kn;)In-=rr;var pr=Math.abs(Kn-In);pr<rr&&Qn&&(pr=rr-pr);for(var mr=[],Er=Qn?-1:1,jr=In;pr>1e-5;){var Kr=jr+Er*Math.min(pr,or);mr.push(Dn.call(this,kn,jr,Kr)),pr-=Math.abs(Kr-jr),jr=Kr}return mr},Dn=function(kn,In,Kn){var Qn=(Kn-In)/2,rr=kn*Math.cos(Qn),or=kn*Math.sin(Qn),pr=rr,mr=-or,Er=pr*pr+mr*mr,jr=Er+pr*rr+mr*or,Kr=4/3*(Math.sqrt(2*Er*jr)-jr)/(pr*or-mr*rr),Hr=pr-Kr*mr,xr=mr+Kr*pr,nr=Hr,Oi=-xr,Ti=Qn+In,yi=Math.cos(Ti),qr=Math.sin(Ti);return{x1:kn*Math.cos(In),y1:kn*Math.sin(In),x2:Hr*yi-xr*qr,y2:Hr*qr+xr*yi,x3:nr*yi-Oi*qr,y3:nr*qr+Oi*yi,x4:kn*Math.cos(Kn),y4:kn*Math.sin(Kn)}},Un=function(kn){return 180*kn/Math.PI},Wn=function(kn,In,Kn,Qn,rr,or){var pr=kn+.5*(Kn-kn),mr=In+.5*(Qn-In),Er=rr+.5*(Kn-rr),jr=or+.5*(Qn-or),Kr=Math.min(kn,rr,pr,Er),Hr=Math.max(kn,rr,pr,Er),xr=Math.min(In,or,mr,jr),nr=Math.max(In,or,mr,jr);return new Me(Kr,xr,Hr-Kr,nr-xr)},On=function(kn,In,Kn,Qn,rr,or,pr,mr){var Er,jr,Kr,Hr,xr,nr,Oi,Ti,yi,qr,di,Zr,mi,pi,Wi=Kn-kn,si=Qn-In,_r=rr-Kn,Dr=or-Qn,Xr=pr-rr,Gr=mr-or;for(jr=0;jr<41;jr++)yi=(Oi=(Kr=kn+(Er=jr/40)*Wi)+Er*((xr=Kn+Er*_r)-Kr))+Er*(xr+Er*(rr+Er*Xr-xr)-Oi),qr=(Ti=(Hr=In+Er*si)+Er*((nr=Qn+Er*Dr)-Hr))+Er*(nr+Er*(or+Er*Gr-nr)-Ti),jr==0?(di=yi,Zr=qr,mi=yi,pi=qr):(di=Math.min(di,yi),Zr=Math.min(Zr,qr),mi=Math.max(mi,yi),pi=Math.max(pi,qr));return new Me(Math.round(di),Math.round(Zr),Math.round(mi-di),Math.round(pi-Zr))},$n=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var kn,In,Kn=(kn=this.ctx.lineDash,In=this.ctx.lineDashOffset,JSON.stringify({lineDash:kn,lineDashOffset:In}));this.prevLineDash!==Kn&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Kn)}}})(E.API),function(n){var e=function(Re){var Me,Ve,De,$e,Oe,Ce,Be,Ue,We,He;for(Ve=[],De=0,$e=(Re+=Me="\0\0\0\0".slice(Re.length%4||4)).length;$e>De;De+=4)(Oe=(Re.charCodeAt(De)<<24)+(Re.charCodeAt(De+1)<<16)+(Re.charCodeAt(De+2)<<8)+Re.charCodeAt(De+3))!==0?(Ce=(Oe=((Oe=((Oe=((Oe=(Oe-(He=Oe%85))/85)-(We=Oe%85))/85)-(Ue=Oe%85))/85)-(Be=Oe%85))/85)%85,Ve.push(Ce+33,Be+33,Ue+33,We+33,He+33)):Ve.push(122);return function(Ge,Ye){for(var Je=Ye;Je>0;Je--)Ge.pop()}(Ve,Me.length),String.fromCharCode.apply(String,Ve)+"~>"},t=function(Re){var Me,Ve,De,$e,Oe,Ce=String,Be="length",Ue=255,We="charCodeAt",He="slice",Ge="replace";for(Re[He](-2),Re=Re[He](0,-2)[Ge](/\s/g,"")[Ge]("z","!!!!!"),De=[],$e=0,Oe=(Re+=Me="uuuuu"[He](Re[Be]%5||5))[Be];Oe>$e;$e+=5)Ve=52200625*(Re[We]($e)-33)+614125*(Re[We]($e+1)-33)+7225*(Re[We]($e+2)-33)+85*(Re[We]($e+3)-33)+(Re[We]($e+4)-33),De.push(Ue&Ve>>24,Ue&Ve>>16,Ue&Ve>>8,Ue&Ve);return function(Ye,Je){for(var Ze=Je;Ze>0;Ze--)Ye.pop()}(De,Me[Be]),Ce.fromCharCode.apply(Ce,De)},r=function(Re){return Re.split("").map(function(Me){return("0"+Me.charCodeAt().toString(16)).slice(-2)}).join("")+">"},Ee=function(Re){var Me=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((Re=Re.replace(/\s/g,"")).indexOf(">")!==-1&&(Re=Re.substr(0,Re.indexOf(">"))),Re.length%2&&(Re+="0"),Me.test(Re)===!1)return"";for(var Ve="",De=0;De<Re.length;De+=2)Ve+=String.fromCharCode("0x"+(Re[De]+Re[De+1]));return Ve},Te=function(Re){for(var Me=new Uint8Array(Re.length),Ve=Re.length;Ve--;)Me[Ve]=Re.charCodeAt(Ve);return(Me=zlibSync(Me)).reduce(function(De,$e){return De+String.fromCharCode($e)},"")};n.processDataByFilters=function(Re,Me){var Ve=0,De=Re||"",$e=[];for(typeof(Me=Me||[])=="string"&&(Me=[Me]),Ve=0;Ve<Me.length;Ve+=1)switch(Me[Ve]){case"ASCII85Decode":case"/ASCII85Decode":De=t(De),$e.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":De=e(De),$e.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":De=Ee(De),$e.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":De=r(De),$e.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":De=Te(De),$e.push("/FlateDecode");break;default:throw new Error('The filter: "'+Me[Ve]+'" is not implemented')}return{data:De,reverseChain:$e.reverse().join(" ")}}}(E.API),function(n){n.loadFile=function(e,t,r){return function(Ee,Te,Re){Te=Te!==!1,Re=typeof Re=="function"?Re:function(){};var Me=void 0;try{Me=function(Ve,De,$e){var Oe=new XMLHttpRequest,Ce=0,Be=function(Ue){var We=Ue.length,He=[],Ge=String.fromCharCode;for(Ce=0;Ce<We;Ce+=1)He.push(Ge(255&Ue.charCodeAt(Ce)));return He.join("")};if(Oe.open("GET",Ve,!De),Oe.overrideMimeType("text/plain; charset=x-user-defined"),De===!1&&(Oe.onload=function(){Oe.status===200?$e(Be(this.responseText)):$e(void 0)}),Oe.send(null),De&&Oe.status===200)return Be(Oe.responseText)}(Ee,Te,Re)}catch{}return Me}(e,t,r)},n.loadImageFile=n.loadFile}(E.API),function(n){function e(){return(i.html2canvas?Promise.resolve(i.html2canvas):__vitePreload(()=>import("./html2canvas.esm-BfxBtG_O.js"),[])).catch(function(Me){return Promise.reject(new Error("Could not load html2canvas: "+Me))}).then(function(Me){return Me.default?Me.default:Me})}function t(){return(i.DOMPurify?Promise.resolve(i.DOMPurify):__vitePreload(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(Me){return Promise.reject(new Error("Could not load dompurify: "+Me))}).then(function(Me){return Me.default?Me.default:Me})}var r=function(Me){var Ve=_typeof(Me);return Ve==="undefined"?"undefined":Ve==="string"||Me instanceof String?"string":Ve==="number"||Me instanceof Number?"number":Ve==="function"||Me instanceof Function?"function":Me&&Me.constructor===Array?"array":Me&&Me.nodeType===1?"element":Ve==="object"?"object":"unknown"},Ee=function(Me,Ve){var De=document.createElement(Me);for(var $e in Ve.className&&(De.className=Ve.className),Ve.innerHTML&&Ve.dompurify&&(De.innerHTML=Ve.dompurify.sanitize(Ve.innerHTML)),Ve.style)De.style[$e]=Ve.style[$e];return De},Te=function Me(Ve,De){for(var $e=Ve.nodeType===3?document.createTextNode(Ve.nodeValue):Ve.cloneNode(!1),Oe=Ve.firstChild;Oe;Oe=Oe.nextSibling)De!==!0&&Oe.nodeType===1&&Oe.nodeName==="SCRIPT"||$e.appendChild(Me(Oe,De));return Ve.nodeType===1&&(Ve.nodeName==="CANVAS"?($e.width=Ve.width,$e.height=Ve.height,$e.getContext("2d").drawImage(Ve,0,0)):Ve.nodeName!=="TEXTAREA"&&Ve.nodeName!=="SELECT"||($e.value=Ve.value),$e.addEventListener("load",function(){$e.scrollTop=Ve.scrollTop,$e.scrollLeft=Ve.scrollLeft},!0)),$e},Re=function Me(Ve){var De=Object.assign(Me.convert(Promise.resolve()),JSON.parse(JSON.stringify(Me.template))),$e=Me.convert(Promise.resolve(),De);return($e=$e.setProgress(1,Me,1,[Me])).set(Ve)};(Re.prototype=Object.create(Promise.prototype)).constructor=Re,Re.convert=function(Me,Ve){return Me.__proto__=Ve||Re.prototype,Me},Re.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},Re.prototype.from=function(Me,Ve){return this.then(function(){switch(Ve=Ve||function(De){switch(r(De)){case"string":return"string";case"element":return De.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(Me),Ve){case"string":return this.then(t).then(function(De){return this.set({src:Ee("div",{innerHTML:Me,dompurify:De})})});case"element":return this.set({src:Me});case"canvas":return this.set({canvas:Me});case"img":return this.set({img:Me});default:return this.error("Unknown source type.")}})},Re.prototype.to=function(Me){switch(Me){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},Re.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var Me={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},Ve=Te(this.prop.src,this.opt.html2canvas.javascriptEnabled);Ve.tagName==="BODY"&&(Me.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=Ee("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=Ee("div",{className:"html2pdf__container",style:Me}),this.prop.container.appendChild(Ve),this.prop.container.firstChild.appendChild(Ee("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},Re.prototype.toCanvas=function(){var Me=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(Me).then(e).then(function(Ve){var De=Object.assign({},this.opt.html2canvas);return delete De.onrendered,Ve(this.prop.container,De)}).then(function(Ve){(this.opt.html2canvas.onrendered||function(){})(Ve),this.prop.canvas=Ve,document.body.removeChild(this.prop.overlay)})},Re.prototype.toContext2d=function(){var Me=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(Me).then(e).then(function(Ve){var De=this.opt.jsPDF,$e=this.opt.fontFaces,Oe=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,Ce=Object.assign({async:!0,allowTaint:!0,scale:Oe,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete Ce.onrendered,De.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,De.context2d.posX=this.opt.x,De.context2d.posY=this.opt.y,De.context2d.margin=this.opt.margin,De.context2d.fontFaces=$e,$e)for(var Be=0;Be<$e.length;++Be){var Ue=$e[Be],We=Ue.src.find(function(He){return He.format==="truetype"});We&&De.addFont(We.url,Ue.ref.name,Ue.ref.style)}return Ce.windowHeight=Ce.windowHeight||0,Ce.windowHeight=Ce.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):Ce.windowHeight,De.context2d.save(!0),Ve(this.prop.container,Ce)}).then(function(Ve){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(Ve),this.prop.canvas=Ve,document.body.removeChild(this.prop.overlay)})},Re.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var Me=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=Me})},Re.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},Re.prototype.output=function(Me,Ve,De){return(De=De||"pdf").toLowerCase()==="img"||De.toLowerCase()==="image"?this.outputImg(Me,Ve):this.outputPdf(Me,Ve)},Re.prototype.outputPdf=function(Me,Ve){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(Me,Ve)})},Re.prototype.outputImg=function(Me){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(Me){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+Me+'" is not supported.'}})},Re.prototype.save=function(Me){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(Me?{filename:Me}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},Re.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},Re.prototype.set=function(Me){if(r(Me)!=="object")return this;var Ve=Object.keys(Me||{}).map(function(De){if(De in Re.template.prop)return function(){this.prop[De]=Me[De]};switch(De){case"margin":return this.setMargin.bind(this,Me.margin);case"jsPDF":return function(){return this.opt.jsPDF=Me.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,Me.pageSize);default:return function(){this.opt[De]=Me[De]}}},this);return this.then(function(){return this.thenList(Ve)})},Re.prototype.get=function(Me,Ve){return this.then(function(){var De=Me in Re.template.prop?this.prop[Me]:this.opt[Me];return Ve?Ve(De):De})},Re.prototype.setMargin=function(Me){return this.then(function(){switch(r(Me)){case"number":Me=[Me,Me,Me,Me];case"array":if(Me.length===2&&(Me=[Me[0],Me[1],Me[0],Me[1]]),Me.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=Me}).then(this.setPageSize)},Re.prototype.setPageSize=function(Me){function Ve(De,$e){return Math.floor(De*$e/72*96)}return this.then(function(){(Me=Me||E.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(Me.inner={width:Me.width-this.opt.margin[1]-this.opt.margin[3],height:Me.height-this.opt.margin[0]-this.opt.margin[2]},Me.inner.px={width:Ve(Me.inner.width,Me.k),height:Ve(Me.inner.height,Me.k)},Me.inner.ratio=Me.inner.height/Me.inner.width),this.prop.pageSize=Me})},Re.prototype.setProgress=function(Me,Ve,De,$e){return Me!=null&&(this.progress.val=Me),Ve!=null&&(this.progress.state=Ve),De!=null&&(this.progress.n=De),$e!=null&&(this.progress.stack=$e),this.progress.ratio=this.progress.val/this.progress.state,this},Re.prototype.updateProgress=function(Me,Ve,De,$e){return this.setProgress(Me?this.progress.val+Me:null,Ve||null,De?this.progress.n+De:null,$e?this.progress.stack.concat($e):null)},Re.prototype.then=function(Me,Ve){var De=this;return this.thenCore(Me,Ve,function($e,Oe){return De.updateProgress(null,null,1,[$e]),Promise.prototype.then.call(this,function(Ce){return De.updateProgress(null,$e),Ce}).then($e,Oe).then(function(Ce){return De.updateProgress(1),Ce})})},Re.prototype.thenCore=function(Me,Ve,De){De=De||Promise.prototype.then;var $e=this;Me&&(Me=Me.bind($e)),Ve&&(Ve=Ve.bind($e));var Oe=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?$e:Re.convert(Object.assign({},$e),Promise.prototype),Ce=De.call(Oe,Me,Ve);return Re.convert(Ce,$e.__proto__)},Re.prototype.thenExternal=function(Me,Ve){return Promise.prototype.then.call(this,Me,Ve)},Re.prototype.thenList=function(Me){var Ve=this;return Me.forEach(function(De){Ve=Ve.thenCore(De)}),Ve},Re.prototype.catch=function(Me){Me&&(Me=Me.bind(this));var Ve=Promise.prototype.catch.call(this,Me);return Re.convert(Ve,this)},Re.prototype.catchExternal=function(Me){return Promise.prototype.catch.call(this,Me)},Re.prototype.error=function(Me){return this.then(function(){throw new Error(Me)})},Re.prototype.using=Re.prototype.set,Re.prototype.saveAs=Re.prototype.save,Re.prototype.export=Re.prototype.output,Re.prototype.run=Re.prototype.then,E.getPageSize=function(Me,Ve,De){if(_typeof(Me)==="object"){var $e=Me;Me=$e.orientation,Ve=$e.unit||Ve,De=$e.format||De}Ve=Ve||"mm",De=De||"a4",Me=(""+(Me||"P")).toLowerCase();var Oe,Ce=(""+De).toLowerCase(),Be={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(Ve){case"pt":Oe=1;break;case"mm":Oe=72/25.4;break;case"cm":Oe=72/2.54;break;case"in":Oe=72;break;case"px":Oe=.75;break;case"pc":case"em":Oe=12;break;case"ex":Oe=6;break;default:throw"Invalid unit: "+Ve}var Ue,We=0,He=0;if(Be.hasOwnProperty(Ce))We=Be[Ce][1]/Oe,He=Be[Ce][0]/Oe;else try{We=De[1],He=De[0]}catch{throw new Error("Invalid format: "+De)}if(Me==="p"||Me==="portrait")Me="p",He>We&&(Ue=He,He=We,We=Ue);else{if(Me!=="l"&&Me!=="landscape")throw"Invalid orientation: "+Me;Me="l",We>He&&(Ue=He,He=We,We=Ue)}return{width:He,height:We,unit:Ve,k:Oe,orientation:Me}},n.html=function(Me,Ve){(Ve=Ve||{}).callback=Ve.callback||function(){},Ve.html2canvas=Ve.html2canvas||{},Ve.html2canvas.canvas=Ve.html2canvas.canvas||this.canvas,Ve.jsPDF=Ve.jsPDF||this,Ve.fontFaces=Ve.fontFaces?Ve.fontFaces.map(Ct):null;var De=new Re(Ve);return Ve.worker?De:De.from(Me).doCallback()}}(E.API),E.API.addJS=function(n){return Ut=n,this.internal.events.subscribe("postPutResources",function(){Tt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Tt+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),zt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ut+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Tt!==void 0&&zt!==void 0&&this.internal.out("/Names <</JavaScript "+Tt+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var Ee=t.outline.render().split(/\r\n/),Te=0;Te<Ee.length;Te++){var Re=Ee[Te],Me=r.exec(Re);if(Me!=null){var Ve=Me[1];t.internal.newObjectDeferredBegin(Ve,!1)}t.internal.write(Re)}if(this.outline.createNamedDestinations){var De=this.internal.pages.length,$e=[];for(Te=0;Te<De;Te++){var Oe=t.internal.newObject();$e.push(Oe);var Ce=t.internal.getPageInfo(Te+1);t.internal.write("<< /D["+Ce.objId+" 0 R /XYZ null null null]>> endobj")}var Be=t.internal.newObject();for(t.internal.write("<< /Names [ "),Te=0;Te<$e.length;Te++)t.internal.write("(page_"+(Te+1)+")"+$e[Te]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+Be+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){var t=this;t.outline.root.children.length>0&&(t.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&t.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,Ee,Te){var Re={title:Ee,options:Te,children:[]};return r==null&&(r=this.root),r.children.push(Re),Re},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var Ee=0;Ee<r.children.length;Ee++)this.genIds_r(r.children[Ee])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var Ee=this.ctx.pdf.internal.getVerticalCoordinateString,Te=0;Te<r.children.length;Te++){var Re=r.children[Te];this.objStart(Re),this.line("/Title "+this.makeString(Re.title)),this.line("/Parent "+this.makeRef(r)),Te>0&&this.line("/Prev "+this.makeRef(r.children[Te-1])),Te<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[Te+1])),Re.children.length>0&&(this.line("/First "+this.makeRef(Re.children[0])),this.line("/Last "+this.makeRef(Re.children[Re.children.length-1])));var Me=this.count=this.count_r({count:0},Re);if(Me>0&&this.line("/Count "+Me),Re.options&&Re.options.pageNumber){var Ve=t.internal.getPageInfo(Re.options.pageNumber);this.line("/Dest ["+Ve.objId+" 0 R /XYZ 0 "+Ee(0)+" 0]")}this.objEnd()}for(var De=0;De<r.children.length;De++)this.renderItems(r.children[De])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,Ee){for(var Te=0;Te<Ee.children.length;Te++)r.count++,this.count_r(r,Ee.children[Te]);return r.count}}])}(E.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,Ee,Te,Re,Me){var Ve,De=this.decode.DCT_DECODE,$e=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=Re||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,Ve=function(Oe){for(var Ce,Be=256*Oe.charCodeAt(4)+Oe.charCodeAt(5),Ue=Oe.length,We={width:0,height:0,numcomponents:1},He=4;He<Ue;He+=2){if(He+=Be,e.indexOf(Oe.charCodeAt(He+1))!==-1){Ce=256*Oe.charCodeAt(He+5)+Oe.charCodeAt(He+6),We={width:256*Oe.charCodeAt(He+7)+Oe.charCodeAt(He+8),height:Ce,numcomponents:Oe.charCodeAt(He+9)};break}Be=256*Oe.charCodeAt(He+2)+Oe.charCodeAt(He+3)}return We}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t),Ve.numcomponents){case 1:Me=this.color_spaces.DEVICE_GRAY;break;case 4:Me=this.color_spaces.DEVICE_CMYK;break;case 3:Me=this.color_spaces.DEVICE_RGB}$e={data:t,width:Ve.width,height:Ve.height,colorSpace:Me,bitsPerComponent:8,filter:De,index:r,alias:Ee}}return $e}}(E.API),E.API.processPNG=function(n,e,t,r){if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){var Ee,Te=decodePng(n,{checkCrc:!0}),Re=Te.width,Me=Te.height,Ve=Te.channels,De=Te.palette,$e=Te.depth;Ee=De&&Ve===1?function(mn){for(var pn=mn.width,un=mn.height,bn=mn.data,gn=mn.palette,xn=mn.depth,En=!1,Pn=[],Ln=[],Cn=void 0,Dn=!1,Un=0,Wn=0;Wn<gn.length;Wn++){var On=_slicedToArray(gn[Wn],4),$n=On[0],kn=On[1],In=On[2],Kn=On[3];Pn.push($n,kn,In),Kn!=null&&(Kn===0?(Un++,Ln.length<1&&Ln.push(Wn)):Kn<255&&(Dn=!0))}if(Dn||Un>1){En=!0,Ln=void 0;var Qn=pn*un;Cn=new Uint8Array(Qn);for(var rr=new DataView(bn.buffer),or=0;or<Qn;or++){var pr=re$1(rr,or,xn),mr=_slicedToArray(gn[pr],4)[3];Cn[or]=mr}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:bn,alphaBytes:Cn,needSMask:En,palette:Pn,mask:Ln}}(Te):Ve===2||Ve===4?function(mn){for(var pn=mn.data,un=mn.width,bn=mn.height,gn=mn.channels,xn=mn.depth,En=gn===2?"DeviceGray":"DeviceRGB",Pn=gn-1,Ln=un*bn,Cn=Pn,Dn=Ln*Cn,Un=1*Ln,Wn=Math.ceil(Dn*xn/8),On=Math.ceil(Un*xn/8),$n=new Uint8Array(Wn),kn=new Uint8Array(On),In=new DataView(pn.buffer),Kn=new DataView($n.buffer),Qn=new DataView(kn.buffer),rr=!1,or=0;or<Ln;or++){for(var pr=or*gn,mr=0;mr<Cn;mr++)ie(Kn,re$1(In,pr+mr,xn),or*Cn+mr,xn);var Er=re$1(In,pr+Cn,xn);Er<(1<<xn)-1&&(rr=!0),ie(Qn,Er,1*or,xn)}return{colorSpace:En,colorsPerPixel:Pn,colorBytes:$n,alphaBytes:kn,needSMask:rr}}(Te):function(mn){var pn=mn.data,un=mn.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:un,colorsPerPixel:un==="DeviceGray"?1:3,colorBytes:pn instanceof Uint8Array?pn:new Uint8Array(pn.buffer),needSMask:!1}}(Te);var Oe,Ce,Be,Ue=Ee,We=Ue.colorSpace,He=Ue.colorsPerPixel,Ge=Ue.colorBytes,Ye=Ue.alphaBytes,Je=Ue.needSMask,Ze=Ue.palette,fn=Ue.mask,yn=null;return r!==E.API.image_compression.NONE&&typeof zlibSync=="function"?(yn=function(mn){var pn;switch(mn){case E.API.image_compression.FAST:pn=11;break;case E.API.image_compression.MEDIUM:pn=13;break;case E.API.image_compression.SLOW:pn=14;break;default:pn=12}return pn}(r),Oe=this.decode.FLATE_DECODE,Ce="/Predictor ".concat(yn," "),n=Xt(Ge,Re*He,He,r),Je&&(Be=Xt(Ye,Re,1,r))):(Oe=void 0,Ce="",n=Ge,Je&&(Be=Ye)),Ce+="/Colors ".concat(He," /BitsPerComponent ").concat($e," /Columns ").concat(Re),(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(Be&&this.__addimage__.isArrayBuffer(Be)||this.__addimage__.isArrayBufferView(Be))&&(Be=this.__addimage__.arrayBufferToBinaryString(Be)),{alias:t,data:n,index:e,filter:Oe,decodeParameters:Ce,transparency:fn,palette:Ze,sMask:Be,predictor:yn,width:Re,height:Me,bitsPerComponent:$e,colorSpace:We}}},function(n){n.processGIF89A=function(e,t,r,Ee){var Te=new oe(e),Re=Te.width,Me=Te.height,Ve=[];Te.decodeAndBlitFrameRGBA(0,Ve);var De={data:Ve,width:Re,height:Me},$e=new ue(100).encode(De,100);return n.processJPEG.call(this,$e,t,r,Ee)},n.processGIF87A=n.processGIF89A}(E.API),ce.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),Ee=this.datav.getUint8(this.pos++,!0),Te=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:Ee,green:r,blue:t,quad:Te}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ce.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){o.log("bit decode error:"+t)}},ce.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,Ee=0;Ee<e;Ee++)for(var Te=this.datav.getUint8(this.pos++,!0),Re=r*this.width*4+8*Ee*4,Me=0;Me<8&&8*Ee+Me<this.width;Me++){var Ve=this.palette[Te>>7-Me&1];this.data[Re+4*Me]=Ve.blue,this.data[Re+4*Me+1]=Ve.green,this.data[Re+4*Me+2]=Ve.red,this.data[Re+4*Me+3]=255}t!==0&&(this.pos+=4-t)}},ce.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,Ee=0;Ee<n;Ee++){var Te=this.datav.getUint8(this.pos++,!0),Re=r*this.width*4+2*Ee*4,Me=Te>>4,Ve=15&Te,De=this.palette[Me];if(this.data[Re]=De.blue,this.data[Re+1]=De.green,this.data[Re+2]=De.red,this.data[Re+3]=255,2*Ee+1>=this.width)break;De=this.palette[Ve],this.data[Re+4]=De.blue,this.data[Re+4+1]=De.green,this.data[Re+4+2]=De.red,this.data[Re+4+3]=255}e!==0&&(this.pos+=4-e)}},ce.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var Ee=this.datav.getUint8(this.pos++,!0),Te=t*this.width*4+4*r;if(Ee<this.palette.length){var Re=this.palette[Ee];this.data[Te]=Re.red,this.data[Te+1]=Re.green,this.data[Te+2]=Re.blue,this.data[Te+3]=255}else this.data[Te]=255,this.data[Te+1]=255,this.data[Te+2]=255,this.data[Te+3]=255}n!==0&&(this.pos+=4-n)}},ce.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,Ee=0;Ee<this.width;Ee++){var Te=this.datav.getUint16(this.pos,!0);this.pos+=2;var Re=(Te&e)/e*255|0,Me=(Te>>5&e)/e*255|0,Ve=(Te>>10&e)/e*255|0,De=Te>>15?255:0,$e=r*this.width*4+4*Ee;this.data[$e]=Ve,this.data[$e+1]=Me,this.data[$e+2]=Re,this.data[$e+3]=De}this.pos+=n}},ce.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var Ee=this.bottom_up?r:this.height-1-r,Te=0;Te<this.width;Te++){var Re=this.datav.getUint16(this.pos,!0);this.pos+=2;var Me=(Re&e)/e*255|0,Ve=(Re>>5&t)/t*255|0,De=(Re>>11)/e*255|0,$e=Ee*this.width*4+4*Te;this.data[$e]=De,this.data[$e+1]=Ve,this.data[$e+2]=Me,this.data[$e+3]=255}this.pos+=n}},ce.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),Ee=this.datav.getUint8(this.pos++,!0),Te=this.datav.getUint8(this.pos++,!0),Re=e*this.width*4+4*t;this.data[Re]=Te,this.data[Re+1]=Ee,this.data[Re+2]=r,this.data[Re+3]=255}this.pos+=this.width%4}},ce.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),Ee=this.datav.getUint8(this.pos++,!0),Te=this.datav.getUint8(this.pos++,!0),Re=this.datav.getUint8(this.pos++,!0),Me=e*this.width*4+4*t;this.data[Me]=Te,this.data[Me+1]=Ee,this.data[Me+2]=r,this.data[Me+3]=Re}},ce.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,Ee){var Te=new ce(e,!1),Re=Te.width,Me=Te.height,Ve={data:Te.getData(),width:Re,height:Me},De=new ue(100).encode(Ve,100);return n.processJPEG.call(this,De,t,r,Ee)}}(E.API),le.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,Ee){var Te=new le(e),Re=Te.width,Me=Te.height,Ve={data:Te.getData(),width:Re,height:Me},De=new ue(100).encode(Ve,100);return n.processJPEG.call(this,De,t,r,Ee)}}(E.API),E.API.processRGBA=function(n,e,t){for(var r=n.data,Ee=r.length,Te=new Uint8Array(Ee/4*3),Re=new Uint8Array(Ee/4),Me=0,Ve=0,De=0;De<Ee;De+=4){var $e=r[De],Oe=r[De+1],Ce=r[De+2],Be=r[De+3];Te[Me++]=$e,Te[Me++]=Oe,Te[Me++]=Ce,Re[Ve++]=Be}var Ue=this.__addimage__.arrayBufferToBinaryString(Te);return{alpha:this.__addimage__.arrayBufferToBinaryString(Re),data:Ue,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},E.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Ht=E.API,Wt=Ht.getCharWidthsArray=function(n,e){var t,r,Ee=(e=e||{}).font||this.internal.getFont(),Te=e.fontSize||this.internal.getFontSize(),Re=e.charSpace||this.internal.getCharSpace(),Me=e.widths?e.widths:Ee.metadata.Unicode.widths,Ve=Me.fof?Me.fof:1,De=e.kerning?e.kerning:Ee.metadata.Unicode.kerning,$e=De.fof?De.fof:1,Oe=e.doKerning!==!1,Ce=0,Be=n.length,Ue=0,We=Me[0]||Ve,He=[];for(t=0;t<Be;t++)r=n.charCodeAt(t),typeof Ee.metadata.widthOfString=="function"?He.push((Ee.metadata.widthOfGlyph(Ee.metadata.characterToGlyph(r))+Re*(1e3/Te)||0)/1e3):(Ce=Oe&&_typeof(De[r])==="object"&&!isNaN(parseInt(De[r][Ue],10))?De[r][Ue]/$e:0,He.push((Me[r]||We)/Ve+Ce)),Ue=r;return He},Vt=Ht.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),Ee=e.charSpace||this.internal.getCharSpace();return Ht.processArabic&&(n=Ht.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,Ee)/t:Wt.apply(this,arguments).reduce(function(Te,Re){return Te+Re},0)},Gt=function(n,e,t,r){for(var Ee=[],Te=0,Re=n.length,Me=0;Te!==Re&&Me+e[Te]<t;)Me+=e[Te],Te++;Ee.push(n.slice(0,Te));var Ve=Te;for(Me=0;Te!==Re;)Me+e[Te]>r&&(Ee.push(n.slice(Ve,Te)),Me=0,Ve=Te),Me+=e[Te],Te++;return Ve!==Te&&Ee.push(n.slice(Ve,Te)),Ee},Yt=function(n,e,t){t||(t={});var r,Ee,Te,Re,Me,Ve,De,$e=[],Oe=[$e],Ce=t.textIndent||0,Be=0,Ue=0,We=n.split(" "),He=Wt.apply(this,[" ",t])[0];if(Ve=t.lineIndent===-1?We[0].length+2:t.lineIndent||0){var Ge=Array(Ve).join(" "),Ye=[];We.map(function(Ze){(Ze=Ze.split(/\s*\n/)).length>1?Ye=Ye.concat(Ze.map(function(fn,yn){return(yn&&fn.length?`
`:"")+fn})):Ye.push(Ze[0])}),We=Ye,Ve=Vt.apply(this,[Ge,t])}for(Te=0,Re=We.length;Te<Re;Te++){var Je=0;if(r=We[Te],Ve&&r[0]==`
`&&(r=r.substr(1),Je=1),Ce+Be+(Ue=(Ee=Wt.apply(this,[r,t])).reduce(function(Ze,fn){return Ze+fn},0))>e||Je){if(Ue>e){for(Me=Gt.apply(this,[r,Ee,e-(Ce+Be),e]),$e.push(Me.shift()),$e=[Me.pop()];Me.length;)Oe.push([Me.shift()]);Ue=Ee.slice(r.length-($e[0]?$e[0].length:0)).reduce(function(Ze,fn){return Ze+fn},0)}else $e=[r];Oe.push($e),Ce=Ue+Ve,Be=He}else $e.push(r),Ce+=Be+Ue,Be=He}return De=Ve?function(Ze,fn){return(fn?Ge:"")+Ze.join(" ")}:function(Ze){return Ze.join(" ")},Oe.map(De)},Ht.splitTextToSize=function(n,e,t){var r,Ee=(t=t||{}).fontSize||this.internal.getFontSize(),Te=(function($e){if($e.widths&&$e.kerning)return{widths:$e.widths,kerning:$e.kerning};var Oe=this.internal.getFont($e.fontName,$e.fontStyle),Ce="Unicode";return Oe.metadata[Ce]?{widths:Oe.metadata[Ce].widths||{0:1},kerning:Oe.metadata[Ce].kerning||{}}:{font:Oe.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var Re=1*this.internal.scaleFactor*e/Ee;Te.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/Ee:0,Te.lineIndent=t.lineIndent;var Me,Ve,De=[];for(Me=0,Ve=r.length;Me<Ve;Me++)De=De.concat(Yt.apply(this,[r[Me],Re,Te]));return De},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="0123456789abcdef",t="klmnopqrstuvwxyz",r={},Ee={},Te=0;Te<16;Te++)r[t[Te]]=e[Te],Ee[e[Te]]=t[Te];var Re=function(Ce){return"0x"+parseInt(Ce,10).toString(16)},Me=n.__fontmetrics__.compress=function(Ce){var Be,Ue,We,He,Ge=["{"];for(var Ye in Ce){if(Be=Ce[Ye],isNaN(parseInt(Ye,10))?Ue="'"+Ye+"'":(Ye=parseInt(Ye,10),Ue=(Ue=Re(Ye).slice(2)).slice(0,-1)+Ee[Ue.slice(-1)]),typeof Be=="number")Be<0?(We=Re(Be).slice(3),He="-"):(We=Re(Be).slice(2),He=""),We=He+We.slice(0,-1)+Ee[We.slice(-1)];else{if(_typeof(Be)!=="object")throw new Error("Don't know what to do with value type "+_typeof(Be)+".");We=Me(Be)}Ge.push(Ue+We)}return Ge.push("}"),Ge.join("")},Ve=n.__fontmetrics__.uncompress=function(Ce){if(typeof Ce!="string")throw new Error("Invalid argument passed to uncompress.");for(var Be,Ue,We,He,Ge={},Ye=1,Je=Ge,Ze=[],fn="",yn="",mn=Ce.length-1,pn=1;pn<mn;pn+=1)(He=Ce[pn])=="'"?Be?(We=Be.join(""),Be=void 0):Be=[]:Be?Be.push(He):He=="{"?(Ze.push([Je,We]),Je={},We=void 0):He=="}"?((Ue=Ze.pop())[0][Ue[1]]=Je,We=void 0,Je=Ue[0]):He=="-"?Ye=-1:We===void 0?r.hasOwnProperty(He)?(fn+=r[He],We=parseInt(fn,16)*Ye,Ye=1,fn=""):fn+=He:r.hasOwnProperty(He)?(yn+=r[He],Je[We]=parseInt(yn,16)*Ye,Ye=1,We=void 0,yn=""):yn+=He;return Ge},De={codePages:["WinAnsiEncoding"],WinAnsiEncoding:Ve("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},$e={Unicode:{Courier:De,"Courier-Bold":De,"Courier-BoldOblique":De,"Courier-Oblique":De,Helvetica:De,"Helvetica-Bold":De,"Helvetica-BoldOblique":De,"Helvetica-Oblique":De,"Times-Roman":De,"Times-Bold":De,"Times-BoldItalic":De,"Times-Italic":De}},Oe={Unicode:{"Courier-Oblique":Ve("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":Ve("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":Ve("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:Ve("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":Ve("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":Ve("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:Ve("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:Ve("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":Ve("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:Ve("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":Ve("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":Ve("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":Ve("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":Ve("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(Ce){var Be=Ce.font,Ue=Oe.Unicode[Be.postScriptName];Ue&&(Be.metadata.Unicode={},Be.metadata.Unicode.widths=Ue.widths,Be.metadata.Unicode.kerning=Ue.kerning);var We=$e.Unicode[Be.postScriptName];We&&(Be.metadata.Unicode.encoding=We,Be.encoding=We.codePages[0])}])}(E.API),function(n){var e=function(t){for(var r=t.length,Ee=new Uint8Array(r),Te=0;Te<r;Te++)Ee[Te]=t.charCodeAt(Te);return Ee};n.API.events.push(["addFont",function(t){var r=void 0,Ee=t.font,Te=t.instance;if(!Ee.isStandardFont){if(Te===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+Ee.postScriptName+"').");if(typeof(r=Te.existsFileInVFS(Ee.postScriptName)===!1?Te.loadFile(Ee.postScriptName):Te.getFileFromVFS(Ee.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+Ee.postScriptName+"').");(function(Re,Me){Me=/^\x00\x01\x00\x00/.test(Me)?e(Me):e(f(Me)),Re.metadata=n.API.TTFFont.open(Me),Re.metadata.Unicode=Re.metadata.Unicode||{encoding:{},kerning:{},widths:[]},Re.metadata.glyIdsUsed=[0]})(Ee,r)}}])}(E),E.API.addSvgAsImage=function(n,e,t,r,Ee,Te,Re,Me){if(isNaN(e)||isNaN(t))throw o.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(Ee))throw o.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var Ve=document.createElement("canvas");Ve.width=r,Ve.height=Ee;var De=Ve.getContext("2d");De.fillStyle="#fff",De.fillRect(0,0,Ve.width,Ve.height);var $e={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},Oe=this;return(i.canvg?Promise.resolve(i.canvg):__vitePreload(()=>import("./index.es-wnmBZhk7.js"),[])).catch(function(Ce){return Promise.reject(new Error("Could not load canvg: "+Ce))}).then(function(Ce){return Ce.default?Ce.default:Ce}).then(function(Ce){return Ce.fromString(De,n,$e)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(Ce){return Ce.render($e)}).then(function(){Oe.addImage(Ve.toDataURL("image/jpeg",1),e,t,r,Ee,Re,Me)})},E.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var Ee=0;Ee<this.internal.pages[r].length;Ee++)this.internal.pages[r][Ee]=this.internal.pages[r][Ee].replace(e,t);return this},E.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,Ee,Te,Re={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},Me=Object.keys(Re),Ve=[],De=0,$e=0,Oe=0;function Ce(Ue,We){var He,Ge=!1;for(He=0;He<Ue.length;He+=1)Ue[He]===We&&(Ge=!0);return Ge}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(Re)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var Be=Me.length;for(Oe=0;Oe<Be;Oe+=1)t[Me[Oe]].value=t[Me[Oe]].defaultValue,t[Me[Oe]].explicitSet=!1}if(_typeof(n)==="object"){for(Ee in n)if(Te=n[Ee],Ce(Me,Ee)&&Te!==void 0){if(t[Ee].type==="boolean"&&typeof Te=="boolean")t[Ee].value=Te;else if(t[Ee].type==="name"&&Ce(t[Ee].valueSet,Te))t[Ee].value=Te;else if(t[Ee].type==="integer"&&Number.isInteger(Te))t[Ee].value=Te;else if(t[Ee].type==="array"){for(De=0;De<Te.length;De+=1)if(r=!0,Te[De].length===1&&typeof Te[De][0]=="number")Ve.push(String(Te[De]-1));else if(Te[De].length>1){for($e=0;$e<Te[De].length;$e+=1)typeof Te[De][$e]!="number"&&(r=!1);r===!0&&Ve.push([Te[De][0]-1,Te[De][1]-1].join(" "))}t[Ee].value="["+Ve.join(" ")+"]"}else t[Ee].value=t[Ee].defaultValue;t[Ee].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var Ue,We=[];for(Ue in t)t[Ue].explicitSet===!0&&(t[Ue].type==="name"?We.push("/"+Ue+" /"+t[Ue].value):We.push("/"+Ue+" "+t[Ue].value));We.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+We.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',Ee=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),Te=unescape(encodeURIComponent(r)),Re=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),Me=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),Ve=unescape(encodeURIComponent("</x:xmpmeta>")),De=Te.length+Re.length+Me.length+Ee.length+Ve.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+De+" >>"),this.internal.write("stream"),this.internal.write(Ee+Te+Re+Me+Ve),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,Ee){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:Ee||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(E.API),function(n){var e=n.API,t=e.pdfEscape16=function(Te,Re){for(var Me,Ve=Re.metadata.Unicode.widths,De=["","0","00","000","0000"],$e=[""],Oe=0,Ce=Te.length;Oe<Ce;++Oe){if(Me=Re.metadata.characterToGlyph(Te.charCodeAt(Oe)),Re.metadata.glyIdsUsed.push(Me),Re.metadata.toUnicode[Me]=Te.charCodeAt(Oe),Ve.indexOf(Me)==-1&&(Ve.push(Me),Ve.push([parseInt(Re.metadata.widthOfGlyph(Me),10)])),Me=="0")return $e.join("");Me=Me.toString(16),$e.push(De[4-Me.length],Me)}return $e.join("")},r=function(Te){var Re,Me,Ve,De,$e,Oe,Ce;for($e=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,Ve=[],Oe=0,Ce=(Me=Object.keys(Te).sort(function(Be,Ue){return Be-Ue})).length;Oe<Ce;Oe++)Re=Me[Oe],Ve.length>=100&&($e+=`
`+Ve.length+` beginbfchar
`+Ve.join(`
`)+`
endbfchar`,Ve=[]),Te[Re]!==void 0&&Te[Re]!==null&&typeof Te[Re].toString=="function"&&(De=("0000"+Te[Re].toString(16)).slice(-4),Re=("0000"+(+Re).toString(16)).slice(-4),Ve.push("<"+Re+"><"+De+">"));return Ve.length&&($e+=`
`+Ve.length+` beginbfchar
`+Ve.join(`
`)+`
endbfchar
`),$e+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(Te){(function(Re){var Me=Re.font,Ve=Re.out,De=Re.newObject,$e=Re.putStream;if(Me.metadata instanceof n.API.TTFFont&&Me.encoding==="Identity-H"){for(var Oe=Me.metadata.Unicode.widths,Ce=Me.metadata.subset.encode(Me.metadata.glyIdsUsed,1),Be="",Ue=0;Ue<Ce.length;Ue++)Be+=String.fromCharCode(Ce[Ue]);var We=De();$e({data:Be,addLength1:!0,objectId:We}),Ve("endobj");var He=De();$e({data:r(Me.metadata.toUnicode),addLength1:!0,objectId:He}),Ve("endobj");var Ge=De();Ve("<<"),Ve("/Type /FontDescriptor"),Ve("/FontName /"+j(Me.fontName)),Ve("/FontFile2 "+We+" 0 R"),Ve("/FontBBox "+n.API.PDFObject.convert(Me.metadata.bbox)),Ve("/Flags "+Me.metadata.flags),Ve("/StemV "+Me.metadata.stemV),Ve("/ItalicAngle "+Me.metadata.italicAngle),Ve("/Ascent "+Me.metadata.ascender),Ve("/Descent "+Me.metadata.decender),Ve("/CapHeight "+Me.metadata.capHeight),Ve(">>"),Ve("endobj");var Ye=De();Ve("<<"),Ve("/Type /Font"),Ve("/BaseFont /"+j(Me.fontName)),Ve("/FontDescriptor "+Ge+" 0 R"),Ve("/W "+n.API.PDFObject.convert(Oe)),Ve("/CIDToGIDMap /Identity"),Ve("/DW 1000"),Ve("/Subtype /CIDFontType2"),Ve("/CIDSystemInfo"),Ve("<<"),Ve("/Supplement 0"),Ve("/Registry (Adobe)"),Ve("/Ordering ("+Me.encoding+")"),Ve(">>"),Ve(">>"),Ve("endobj"),Me.objectNumber=De(),Ve("<<"),Ve("/Type /Font"),Ve("/Subtype /Type0"),Ve("/ToUnicode "+He+" 0 R"),Ve("/BaseFont /"+j(Me.fontName)),Ve("/Encoding /"+Me.encoding),Ve("/DescendantFonts ["+Ye+" 0 R]"),Ve(">>"),Ve("endobj"),Me.isAlreadyPutted=!0}})(Te)}]),e.events.push(["putFont",function(Te){(function(Re){var Me=Re.font,Ve=Re.out,De=Re.newObject,$e=Re.putStream;if(Me.metadata instanceof n.API.TTFFont&&Me.encoding==="WinAnsiEncoding"){for(var Oe=Me.metadata.rawData,Ce="",Be=0;Be<Oe.length;Be++)Ce+=String.fromCharCode(Oe[Be]);var Ue=De();$e({data:Ce,addLength1:!0,objectId:Ue}),Ve("endobj");var We=De();$e({data:r(Me.metadata.toUnicode),addLength1:!0,objectId:We}),Ve("endobj");var He=De();Ve("<<"),Ve("/Descent "+Me.metadata.decender),Ve("/CapHeight "+Me.metadata.capHeight),Ve("/StemV "+Me.metadata.stemV),Ve("/Type /FontDescriptor"),Ve("/FontFile2 "+Ue+" 0 R"),Ve("/Flags 96"),Ve("/FontBBox "+n.API.PDFObject.convert(Me.metadata.bbox)),Ve("/FontName /"+j(Me.fontName)),Ve("/ItalicAngle "+Me.metadata.italicAngle),Ve("/Ascent "+Me.metadata.ascender),Ve(">>"),Ve("endobj"),Me.objectNumber=De();for(var Ge=0;Ge<Me.metadata.hmtx.widths.length;Ge++)Me.metadata.hmtx.widths[Ge]=parseInt(Me.metadata.hmtx.widths[Ge]*(1e3/Me.metadata.head.unitsPerEm));Ve("<</Subtype/TrueType/Type/Font/ToUnicode "+We+" 0 R/BaseFont/"+j(Me.fontName)+"/FontDescriptor "+He+" 0 R/Encoding/"+Me.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(Me.metadata.hmtx.widths)+">>"),Ve("endobj"),Me.isAlreadyPutted=!0}})(Te)}]);var Ee=function(Te){var Re,Me=Te.text||"",Ve=Te.x,De=Te.y,$e=Te.options||{},Oe=Te.mutex||{},Ce=Oe.pdfEscape,Be=Oe.activeFontKey,Ue=Oe.fonts,We=Be,He="",Ge=0,Ye="",Je=Ue[We].encoding;if(Ue[We].encoding!=="Identity-H")return{text:Me,x:Ve,y:De,options:$e,mutex:Oe};for(Ye=Me,We=Be,Array.isArray(Me)&&(Ye=Me[0]),Ge=0;Ge<Ye.length;Ge+=1)Ue[We].metadata.hasOwnProperty("cmap")&&(Re=Ue[We].metadata.cmap.unicode.codeMap[Ye[Ge].charCodeAt(0)]),Re||Ye[Ge].charCodeAt(0)<256&&Ue[We].metadata.hasOwnProperty("Unicode")?He+=Ye[Ge]:He+="";var Ze="";return parseInt(We.slice(1))<14||Je==="WinAnsiEncoding"?Ze=Ce(He,We).split("").map(function(fn){return fn.charCodeAt(0).toString(16)}).join(""):Je==="Identity-H"&&(Ze=t(He,Ue[We])),Oe.isHex=!0,{text:Ze,x:Ve,y:De,options:$e,mutex:Oe}};e.events.push(["postProcessText",function(Te){var Re=Te.text||"",Me=[],Ve={text:Re,x:Te.x,y:Te.y,options:Te.options,mutex:Te.mutex};if(Array.isArray(Re)){var De=0;for(De=0;De<Re.length;De+=1)Array.isArray(Re[De])&&Re[De].length===3?Me.push([Ee(Object.assign({},Ve,{text:Re[De][0]})).text,Re[De][1],Re[De][2]]):Me.push(Ee(Object.assign({},Ve,{text:Re[De]})).text);Te.text=Me}else Te.text=Ee(Object.assign({},Ve,{text:Re})).text}])}(E),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(E.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var Ee,Te,Re,Me,Ve,De,$e,Oe=e,Ce=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],Be=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],Ue={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},We={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},He=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],Ge=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Ye=!1,Je=0;this.__bidiEngine__={};var Ze=function(gn){var xn=gn.charCodeAt(),En=xn>>8,Pn=We[En];return Pn!==void 0?Oe[256*Pn+(255&xn)]:En===252||En===253?"AL":Ge.test(En)?"L":En===8?"R":"N"},fn=function(gn){for(var xn,En=0;En<gn.length;En++){if((xn=Ze(gn.charAt(En)))==="L")return!1;if(xn==="R")return!0}return!1},yn=function(gn,xn,En,Pn){var Ln,Cn,Dn,Un,Wn=xn[Pn];switch(Wn){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Ye=!1;break;case"N":case"AN":break;case"EN":Ye&&(Wn="AN");break;case"AL":Ye=!0,Wn="R";break;case"WS":case"BN":Wn="N";break;case"CS":Pn<1||Pn+1>=xn.length||(Ln=En[Pn-1])!=="EN"&&Ln!=="AN"||(Cn=xn[Pn+1])!=="EN"&&Cn!=="AN"?Wn="N":Ye&&(Cn="AN"),Wn=Cn===Ln?Cn:"N";break;case"ES":Wn=(Ln=Pn>0?En[Pn-1]:"B")==="EN"&&Pn+1<xn.length&&xn[Pn+1]==="EN"?"EN":"N";break;case"ET":if(Pn>0&&En[Pn-1]==="EN"){Wn="EN";break}if(Ye){Wn="N";break}for(Dn=Pn+1,Un=xn.length;Dn<Un&&xn[Dn]==="ET";)Dn++;Wn=Dn<Un&&xn[Dn]==="EN"?"EN":"N";break;case"NSM":if(Re&&!Me){for(Un=xn.length,Dn=Pn+1;Dn<Un&&xn[Dn]==="NSM";)Dn++;if(Dn<Un){var On=gn[Pn],$n=On>=1425&&On<=2303||On===64286;if(Ln=xn[Dn],$n&&(Ln==="R"||Ln==="AL")){Wn="R";break}}}Wn=Pn<1||(Ln=xn[Pn-1])==="B"?"N":En[Pn-1];break;case"B":Ye=!1,Ee=!0,Wn=Je;break;case"S":Te=!0,Wn="N"}return Wn},mn=function(gn,xn,En){var Pn=gn.split("");return En&&pn(Pn,En,{hiLevel:Je}),Pn.reverse(),xn&&xn.reverse(),Pn.join("")},pn=function(gn,xn,En){var Pn,Ln,Cn,Dn,Un,Wn=-1,On=gn.length,$n=0,kn=[],In=Je?Be:Ce,Kn=[];for(Ye=!1,Ee=!1,Te=!1,Ln=0;Ln<On;Ln++)Kn[Ln]=Ze(gn[Ln]);for(Cn=0;Cn<On;Cn++){if(Un=$n,kn[Cn]=yn(gn,Kn,kn,Cn),Pn=240&($n=In[Un][Ue[kn[Cn]]]),$n&=15,xn[Cn]=Dn=In[$n][5],Pn>0)if(Pn===16){for(Ln=Wn;Ln<Cn;Ln++)xn[Ln]=1;Wn=-1}else Wn=-1;if(In[$n][6])Wn===-1&&(Wn=Cn);else if(Wn>-1){for(Ln=Wn;Ln<Cn;Ln++)xn[Ln]=Dn;Wn=-1}Kn[Cn]==="B"&&(xn[Cn]=0),En.hiLevel|=Dn}Te&&function(Qn,rr,or){for(var pr=0;pr<or;pr++)if(Qn[pr]==="S"){rr[pr]=Je;for(var mr=pr-1;mr>=0&&Qn[mr]==="WS";mr--)rr[mr]=Je}}(Kn,xn,On)},un=function(gn,xn,En,Pn,Ln){if(!(Ln.hiLevel<gn)){if(gn===1&&Je===1&&!Ee)return xn.reverse(),void(En&&En.reverse());for(var Cn,Dn,Un,Wn,On=xn.length,$n=0;$n<On;){if(Pn[$n]>=gn){for(Un=$n+1;Un<On&&Pn[Un]>=gn;)Un++;for(Wn=$n,Dn=Un-1;Wn<Dn;Wn++,Dn--)Cn=xn[Wn],xn[Wn]=xn[Dn],xn[Dn]=Cn,En&&(Cn=En[Wn],En[Wn]=En[Dn],En[Dn]=Cn);$n=Un}$n++}}},bn=function(gn,xn,En){var Pn=gn.split(""),Ln={hiLevel:Je};return En||(En=[]),pn(Pn,En,Ln),function(Cn,Dn,Un){if(Un.hiLevel!==0&&$e)for(var Wn,On=0;On<Cn.length;On++)Dn[On]===1&&(Wn=He.indexOf(Cn[On]))>=0&&(Cn[On]=He[Wn+1])}(Pn,En,Ln),un(2,Pn,xn,En,Ln),un(1,Pn,xn,En,Ln),Pn.join("")};return this.__bidiEngine__.doBidiReorder=function(gn,xn,En){if(function(Ln,Cn){if(Cn)for(var Dn=0;Dn<Ln.length;Dn++)Cn[Dn]=Dn;Me===void 0&&(Me=fn(Ln)),De===void 0&&(De=fn(Ln))}(gn,xn),Re||!Ve||De)if(Re&&Ve&&Me^De)Je=Me?1:0,gn=mn(gn,xn,En);else if(!Re&&Ve&&De)Je=Me?1:0,gn=bn(gn,xn,En),gn=mn(gn,xn);else if(!Re||Me||Ve||De){if(Re&&!Ve&&Me^De)gn=mn(gn,xn),Me?(Je=0,gn=bn(gn,xn,En)):(Je=1,gn=bn(gn,xn,En),gn=mn(gn,xn));else if(Re&&Me&&!Ve&&De)Je=1,gn=bn(gn,xn,En),gn=mn(gn,xn);else if(!Re&&!Ve&&Me^De){var Pn=$e;Me?(Je=1,gn=bn(gn,xn,En),Je=0,$e=!1,gn=bn(gn,xn,En),$e=Pn):(Je=0,gn=bn(gn,xn,En),gn=mn(gn,xn),Je=1,$e=!1,gn=bn(gn,xn,En),$e=Pn,gn=mn(gn,xn))}}else Je=0,gn=bn(gn,xn,En);else Je=Me?1:0,gn=bn(gn,xn,En);return gn},this.__bidiEngine__.setOptions=function(gn){gn&&(Re=gn.isInputVisual,Ve=gn.isOutputVisual,Me=gn.isInputRtl,De=gn.isOutputRtl,$e=gn.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var Ee=r.text;r.x,r.y;var Te=r.options||{};r.mutex,Te.lang;var Re=[];if(Te.isInputVisual=typeof Te.isInputVisual!="boolean"||Te.isInputVisual,t.setOptions(Te),Object.prototype.toString.call(Ee)==="[object Array]"){var Me=0;for(Re=[],Me=0;Me<Ee.length;Me+=1)Object.prototype.toString.call(Ee[Me])==="[object Array]"?Re.push([t.doBidiReorder(Ee[Me][0]),Ee[Me][1],Ee[Me][2]]):Re.push([t.doBidiReorder(Ee[Me])]);r.text=Re}else r.text=t.doBidiReorder(Ee);t.setOptions({isInputVisual:!0})}])}(E),E.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new fe(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new je(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new de(this.contents),this.head=new me(this),this.name=new xe(this),this.cmap=new be(this),this.toUnicode={},this.hhea=new ye(this),this.maxp=new Ae(this),this.hmtx=new Se(this),this.post=new Ne(this),this.os2=new we(this),this.loca=new Ie(this),this.glyf=new Pe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,Ee,Te;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var Re,Me,Ve,De;for(De=[],Re=0,Me=(Ve=this.bbox).length;Re<Me;Re++)e=Ve[Re],De.push(Math.round(e*this.scaleFactor));return De}).call(this),this.stemV=0,this.post.exists?(r=255&(Ee=this.post.italic_angle),32768&(t=Ee>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(Te=this.familyClass)===1||Te===2||Te===3||Te===4||Te===5||Te===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var Ee,Te,Re,Me;for(Re=0,Te=0,Me=(e=""+e).length;0<=Me?Te<Me:Te>Me;Te=0<=Me?++Te:--Te)Ee=e.charCodeAt(Te),Re+=this.widthOfGlyph(this.characterToGlyph(Ee))+r*(1e3/t)||0;return Re*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var he,fe=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,Ee;for(Ee=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)Ee.push(this.writeByte(e.charCodeAt(t)));return Ee},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,Ee,Te,Re,Me,Ve;return e=this.readByte(),t=this.readByte(),r=this.readByte(),Ee=this.readByte(),Te=this.readByte(),Re=this.readByte(),Me=this.readByte(),Ve=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^Ee)+16777216*(255^Te)+65536*(255^Re)+256*(255^Me)+(255^Ve)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*Ee+16777216*Te+65536*Re+256*Me+Ve},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,Ee,Te;for(Te=[],r=0,Ee=e.length;r<Ee;r++)t=e[r],Te.push(this.writeByte(t));return Te},n}(),de=function(){var n;function e(t){var r,Ee,Te;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},Ee=0,Te=this.tableCount;0<=Te?Ee<Te:Ee>Te;Ee=0<=Te?++Ee:--Ee)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,Ee,Te,Re,Me,Ve,De,$e,Oe,Ce,Be,Ue,We;for(We in Be=Object.keys(t).length,Ve=Math.log(2),Oe=16*Math.floor(Math.log(Be)/Ve),Re=Math.floor(Oe/Ve),$e=16*Be-Oe,(Ee=new fe).writeInt(this.scalarType),Ee.writeShort(Be),Ee.writeShort(Oe),Ee.writeShort(Re),Ee.writeShort($e),Te=16*Be,De=Ee.pos+Te,Me=null,Ue=[],t)for(Ce=t[We],Ee.writeString(We),Ee.writeInt(n(Ce)),Ee.writeInt(De),Ee.writeInt(Ce.length),Ue=Ue.concat(Ce),We==="head"&&(Me=De),De+=Ce.length;De%4;)Ue.push(0),De++;return Ee.write(Ue),r=2981146554-n(Ee.data),Ee.pos=Me+8,Ee.writeUInt32(r),Ee.data},n=function(t){var r,Ee,Te,Re;for(t=_e.call(t);t.length%4;)t.push(0);for(Te=new fe(t),Ee=0,r=0,Re=t.length;r<Re;r=r+=4)Ee+=Te.readUInt32();return 4294967295&Ee},e}(),pe={}.hasOwnProperty,ge=function(n,e){for(var t in e)pe.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};he=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var me=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ge(n,he),n.prototype.tag="head",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},n.prototype.encode=function(e){var t;return(t=new fe).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},n}(),ve=function(){function n(e,t){var r,Ee,Te,Re,Me,Ve,De,$e,Oe,Ce,Be,Ue,We,He,Ge,Ye,Je;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),Oe=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(Ve=0;Ve<256;++Ve)this.codeMap[Ve]=e.readByte();break;case 4:for(Be=e.readUInt16(),Ce=Be/2,e.pos+=6,Te=function(){var Ze,fn;for(fn=[],Ve=Ze=0;0<=Ce?Ze<Ce:Ze>Ce;Ve=0<=Ce?++Ze:--Ze)fn.push(e.readUInt16());return fn}(),e.pos+=2,We=function(){var Ze,fn;for(fn=[],Ve=Ze=0;0<=Ce?Ze<Ce:Ze>Ce;Ve=0<=Ce?++Ze:--Ze)fn.push(e.readUInt16());return fn}(),De=function(){var Ze,fn;for(fn=[],Ve=Ze=0;0<=Ce?Ze<Ce:Ze>Ce;Ve=0<=Ce?++Ze:--Ze)fn.push(e.readUInt16());return fn}(),$e=function(){var Ze,fn;for(fn=[],Ve=Ze=0;0<=Ce?Ze<Ce:Ze>Ce;Ve=0<=Ce?++Ze:--Ze)fn.push(e.readUInt16());return fn}(),Ee=(this.length-e.pos+this.offset)/2,Me=function(){var Ze,fn;for(fn=[],Ve=Ze=0;0<=Ee?Ze<Ee:Ze>Ee;Ve=0<=Ee?++Ze:--Ze)fn.push(e.readUInt16());return fn}(),Ve=Ge=0,Je=Te.length;Ge<Je;Ve=++Ge)for(He=Te[Ve],r=Ye=Ue=We[Ve];Ue<=He?Ye<=He:Ye>=He;r=Ue<=He?++Ye:--Ye)$e[Ve]===0?Re=r+De[Ve]:(Re=Me[$e[Ve]/2+(r-Ue)-(Ce-Ve)]||0)!==0&&(Re+=De[Ve]),this.codeMap[r]=65535&Re}e.pos=Oe}return n.encode=function(e,t){var r,Ee,Te,Re,Me,Ve,De,$e,Oe,Ce,Be,Ue,We,He,Ge,Ye,Je,Ze,fn,yn,mn,pn,un,bn,gn,xn,En,Pn,Ln,Cn,Dn,Un,Wn,On,$n,kn,In,Kn,Qn,rr,or,pr,mr,Er,jr,Kr;switch(Pn=new fe,Re=Object.keys(e).sort(function(Hr,xr){return Hr-xr}),t){case"macroman":for(We=0,He=function(){var Hr=[];for(Ue=0;Ue<256;++Ue)Hr.push(0);return Hr}(),Ye={0:0},Te={},Ln=0,Wn=Re.length;Ln<Wn;Ln++)Ye[mr=e[Ee=Re[Ln]]]==null&&(Ye[mr]=++We),Te[Ee]={old:e[Ee],new:Ye[e[Ee]]},He[Ee]=Ye[e[Ee]];return Pn.writeUInt16(1),Pn.writeUInt16(0),Pn.writeUInt32(12),Pn.writeUInt16(0),Pn.writeUInt16(262),Pn.writeUInt16(0),Pn.write(He),{charMap:Te,subtable:Pn.data,maxGlyphID:We+1};case"unicode":for(xn=[],Oe=[],Je=0,Ye={},r={},Ge=De=null,Cn=0,On=Re.length;Cn<On;Cn++)Ye[fn=e[Ee=Re[Cn]]]==null&&(Ye[fn]=++Je),r[Ee]={old:fn,new:Ye[fn]},Me=Ye[fn]-Ee,Ge!=null&&Me===De||(Ge&&Oe.push(Ge),xn.push(Ee),De=Me),Ge=Ee;for(Ge&&Oe.push(Ge),Oe.push(65535),xn.push(65535),bn=2*(un=xn.length),pn=2*Math.pow(Math.log(un)/Math.LN2,2),Ce=Math.log(pn/2)/Math.LN2,mn=2*un-pn,Ve=[],yn=[],Be=[],Ue=Dn=0,$n=xn.length;Dn<$n;Ue=++Dn){if(gn=xn[Ue],$e=Oe[Ue],gn===65535){Ve.push(0),yn.push(0);break}if(gn-(En=r[gn].new)>=32768)for(Ve.push(0),yn.push(2*(Be.length+un-Ue)),Ee=Un=gn;gn<=$e?Un<=$e:Un>=$e;Ee=gn<=$e?++Un:--Un)Be.push(r[Ee].new);else Ve.push(En-gn),yn.push(0)}for(Pn.writeUInt16(3),Pn.writeUInt16(1),Pn.writeUInt32(12),Pn.writeUInt16(4),Pn.writeUInt16(16+8*un+2*Be.length),Pn.writeUInt16(0),Pn.writeUInt16(bn),Pn.writeUInt16(pn),Pn.writeUInt16(Ce),Pn.writeUInt16(mn),or=0,kn=Oe.length;or<kn;or++)Ee=Oe[or],Pn.writeUInt16(Ee);for(Pn.writeUInt16(0),pr=0,In=xn.length;pr<In;pr++)Ee=xn[pr],Pn.writeUInt16(Ee);for(Er=0,Kn=Ve.length;Er<Kn;Er++)Me=Ve[Er],Pn.writeUInt16(Me);for(jr=0,Qn=yn.length;jr<Qn;jr++)Ze=yn[jr],Pn.writeUInt16(Ze);for(Kr=0,rr=Be.length;Kr<rr;Kr++)We=Be[Kr],Pn.writeUInt16(We);return{charMap:r,subtable:Pn.data,maxGlyphID:Je+1}}},n}(),be=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ge(n,he),n.prototype.tag="cmap",n.prototype.parse=function(e){var t,r,Ee;for(e.pos=this.offset,this.version=e.readUInt16(),Ee=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=Ee?r<Ee:r>Ee;r=0<=Ee?++r:--r)t=new ve(e,this.offset),this.tables.push(t),t.isUnicode&&this.unicode==null&&(this.unicode=t);return!0},n.encode=function(e,t){var r,Ee;return t==null&&(t="macroman"),r=ve.encode(e,t),(Ee=new fe).writeUInt16(0),Ee.writeUInt16(1),r.table=Ee.data.concat(r.subtable),r},n}(),ye=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ge(n,he),n.prototype.tag="hhea",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},n}(),we=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ge(n,he),n.prototype.tag="OS/2",n.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,r;for(r=[],t=0;t<10;++t)r.push(e.readByte());return r}(),this.charRange=function(){var t,r;for(r=[],t=0;t<4;++t)r.push(e.readInt());return r}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,r;for(r=[],t=0;t<2;t=++t)r.push(e.readInt());return r}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},n}(),Ne=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ge(n,he),n.prototype.tag="post",n.prototype.parse=function(e){var t,r,Ee;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var Te;for(r=e.readUInt16(),this.glyphNameIndex=[],Te=0;0<=r?Te<r:Te>r;Te=0<=r?++Te:--Te)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],Ee=[];e.pos<this.offset+this.length;)t=e.readByte(),Ee.push(this.names.push(e.readString(t)));return Ee;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var Re,Me,Ve;for(Ve=[],Te=Re=0,Me=this.file.maxp.numGlyphs;0<=Me?Re<Me:Re>Me;Te=0<=Me?++Re:--Re)Ve.push(e.readUInt32());return Ve}).call(this)}},n}(),Le=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},xe=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ge(n,he),n.prototype.tag="name",n.prototype.parse=function(e){var t,r,Ee,Te,Re,Me,Ve,De,$e,Oe,Ce;for(e.pos=this.offset,e.readShort(),t=e.readShort(),Me=e.readShort(),r=[],Te=0;0<=t?Te<t:Te>t;Te=0<=t?++Te:--Te)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+Me+e.readShort()});for(Ve={},Te=$e=0,Oe=r.length;$e<Oe;Te=++$e)Ee=r[Te],e.pos=Ee.offset,De=e.readString(Ee.length),Re=new Le(De,Ee),Ve[Ce=Ee.nameID]==null&&(Ve[Ce]=[]),Ve[Ee.nameID].push(Re);this.strings=Ve,this.copyright=Ve[0],this.fontFamily=Ve[1],this.fontSubfamily=Ve[2],this.uniqueSubfamily=Ve[3],this.fontName=Ve[4],this.version=Ve[5];try{this.postscriptName=Ve[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=Ve[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=Ve[7],this.manufacturer=Ve[8],this.designer=Ve[9],this.description=Ve[10],this.vendorUrl=Ve[11],this.designerUrl=Ve[12],this.license=Ve[13],this.licenseUrl=Ve[14],this.preferredFamily=Ve[15],this.preferredSubfamily=Ve[17],this.compatibleFull=Ve[18],this.sampleText=Ve[19]},n}(),Ae=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ge(n,he),n.prototype.tag="maxp",n.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},n}(),Se=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ge(n,he),n.prototype.tag="hmtx",n.prototype.parse=function(e){var t,r,Ee,Te,Re,Me,Ve;for(e.pos=this.offset,this.metrics=[],t=0,Me=this.file.hhea.numberOfMetrics;0<=Me?t<Me:t>Me;t=0<=Me?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(Ee=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var De,$e;for($e=[],t=De=0;0<=Ee?De<Ee:De>Ee;t=0<=Ee?++De:--De)$e.push(e.readInt16());return $e}(),this.widths=(function(){var De,$e,Oe,Ce;for(Ce=[],De=0,$e=(Oe=this.metrics).length;De<$e;De++)Te=Oe[De],Ce.push(Te.advance);return Ce}).call(this),r=this.widths[this.widths.length-1],Ve=[],t=Re=0;0<=Ee?Re<Ee:Re>Ee;t=0<=Ee?++Re:--Re)Ve.push(this.widths.push(r));return Ve},n.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},n}(),_e=[].slice,Pe=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ge(n,he),n.prototype.tag="glyf",n.prototype.parse=function(){return this.cache={}},n.prototype.glyphFor=function(e){var t,r,Ee,Te,Re,Me,Ve,De,$e,Oe;return e in this.cache?this.cache[e]:(Te=this.file.loca,t=this.file.contents,r=Te.indexOf(e),(Ee=Te.lengthOf(e))===0?this.cache[e]=null:(t.pos=this.offset+r,Re=(Me=new fe(t.read(Ee))).readShort(),De=Me.readShort(),Oe=Me.readShort(),Ve=Me.readShort(),$e=Me.readShort(),this.cache[e]=Re===-1?new Fe(Me,De,Oe,Ve,$e):new ke(Me,Re,De,Oe,Ve,$e),this.cache[e]))},n.prototype.encode=function(e,t,r){var Ee,Te,Re,Me,Ve;for(Re=[],Te=[],Me=0,Ve=t.length;Me<Ve;Me++)Ee=e[t[Me]],Te.push(Re.length),Ee&&(Re=Re.concat(Ee.encode(r)));return Te.push(Re.length),{table:Re,offsets:Te}},n}(),ke=function(){function n(e,t,r,Ee,Te,Re){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=Ee,this.xMax=Te,this.yMax=Re,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),Fe=function(){function n(e,t,r,Ee,Te){var Re,Me;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=Ee,this.yMax=Te,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],Re=this.raw;Me=Re.readShort(),this.glyphOffsets.push(Re.pos),this.glyphIDs.push(Re.readUInt16()),32&Me;)Re.pos+=1&Me?4:2,128&Me?Re.pos+=8:64&Me?Re.pos+=4:8&Me&&(Re.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new fe(_e.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),Ie=function(){function n(){return n.__super__.constructor.apply(this,arguments)}return ge(n,he),n.prototype.tag="loca",n.prototype.parse=function(e){var t,r;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=t===0?(function(){var Ee,Te;for(Te=[],r=0,Ee=this.length;r<Ee;r+=2)Te.push(2*e.readUInt16());return Te}).call(this):(function(){var Ee,Te;for(Te=[],r=0,Ee=this.length;r<Ee;r+=4)Te.push(e.readUInt32());return Te}).call(this)},n.prototype.indexOf=function(e){return this.offsets[e]},n.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},n.prototype.encode=function(e,t){for(var r=new Uint32Array(this.offsets.length),Ee=0,Te=0,Re=0;Re<r.length;++Re)if(r[Re]=Ee,Te<t.length&&t[Te]==Re){++Te,r[Re]=Ee;var Me=this.offsets[Re],Ve=this.offsets[Re+1]-Me;Ve>0&&(Ee+=Ve)}for(var De=new Array(4*r.length),$e=0;$e<r.length;++$e)De[4*$e+3]=255&r[$e],De[4*$e+2]=(65280&r[$e])>>8,De[4*$e+1]=(16711680&r[$e])>>16,De[4*$e]=(4278190080&r[$e])>>24;return De},n}(),je=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,Ee,Te;for(t in Ee=this.font.cmap.tables[0].codeMap,e={},Te=this.subset)r=Te[t],e[t]=Ee[r];return e},n.prototype.glyphsFor=function(e){var t,r,Ee,Te,Re,Me,Ve;for(Ee={},Re=0,Me=e.length;Re<Me;Re++)Ee[Te=e[Re]]=this.font.glyf.glyphFor(Te);for(Te in t=[],Ee)(r=Ee[Te])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(Te in Ve=this.glyphsFor(t))r=Ve[Te],Ee[Te]=r;return Ee},n.prototype.encode=function(e,t){var r,Ee,Te,Re,Me,Ve,De,$e,Oe,Ce,Be,Ue,We,He,Ge;for(Ee in r=be.encode(this.generateCmap(),"unicode"),Re=this.glyphsFor(e),Be={0:0},Ge=r.charMap)Be[(Ve=Ge[Ee]).old]=Ve.new;for(Ue in Ce=r.maxGlyphID,Re)Ue in Be||(Be[Ue]=Ce++);return $e=function(Ye){var Je,Ze;for(Je in Ze={},Ye)Ze[Ye[Je]]=Je;return Ze}(Be),Oe=Object.keys($e).sort(function(Ye,Je){return Ye-Je}),We=function(){var Ye,Je,Ze;for(Ze=[],Ye=0,Je=Oe.length;Ye<Je;Ye++)Me=Oe[Ye],Ze.push($e[Me]);return Ze}(),Te=this.font.glyf.encode(Re,We,Be),De=this.font.loca.encode(Te.offsets,We),He={cmap:this.font.cmap.raw(),glyf:Te.table,loca:De,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(He["OS/2"]=this.font.os2.raw()),this.font.directory.encode(He)},n}();E.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,Ee,Te,Re;if(Array.isArray(t))return"["+function(){var Me,Ve,De;for(De=[],Me=0,Ve=t.length;Me<Ve;Me++)r=t[Me],De.push(e.convert(r));return De}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(Ee in Te=["<<"],t)Re=t[Ee],Te.push("/"+Ee+" "+e.convert(Re));return Te.push(">>"),Te.join(`
`)}return""+t},e}();function autoTableText(n,e,t,r,Ee){r=r||{};var Te=1.15,Re=Ee.internal.scaleFactor,Me=Ee.internal.getFontSize()/Re,Ve=Ee.getLineHeightFactor?Ee.getLineHeightFactor():Te,De=Me*Ve,$e=/\r\n|\r|\n/g,Oe="",Ce=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(Oe=typeof n=="string"?n.split($e):n,Ce=Oe.length||1),t+=Me*(2-Te),r.valign==="middle"?t-=Ce/2*De:r.valign==="bottom"&&(t-=Ce*De),r.halign==="center"||r.halign==="right"){var Be=Me;if(r.halign==="center"&&(Be*=.5),Oe&&Ce>=1){for(var Ue=0;Ue<Oe.length;Ue++)Ee.text(Oe[Ue],e-Ee.getStringUnitWidth(Oe[Ue])*Be,t),t+=De;return Ee}e-=Ee.getStringUnitWidth(n)*Be}return r.halign==="justify"?Ee.text(n,e,t,{maxWidth:r.maxWidth||100,align:"justify"}):Ee.text(n,e,t),Ee}var globalDefaults={},DocHandler=function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:globalDefaults=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,t){var r,Ee,Te;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var Re=this.jsPDFDocument.internal.getFont(),Me=Re.fontStyle,Ve=Re.fontName;if(e.font&&(Ve=e.font),e.fontStyle){Me=e.fontStyle;var De=this.getFontList()[Ve];De&&De.indexOf(Me)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(De[0]),Me=De[0])}if(this.jsPDFDocument.setFont(Ve,Me),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var $e=n.unifyColor(e.fillColor);$e&&(r=this.jsPDFDocument).setFillColor.apply(r,$e),$e=n.unifyColor(e.textColor),$e&&(Ee=this.jsPDFDocument).setTextColor.apply(Ee,$e),$e=n.unifyColor(e.lineColor),$e&&(Te=this.jsPDFDocument).setDrawColor.apply(Te,$e),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,t,r){return this.jsPDFDocument.splitTextToSize(e,t,r)},n.prototype.rect=function(e,t,r,Ee,Te){return this.jsPDFDocument.rect(e,t,r,Ee,Te)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return globalDefaults||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n}(),extendStatics=function(n,e){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var Ee in r)Object.prototype.hasOwnProperty.call(r,Ee)&&(t[Ee]=r[Ee])},extendStatics(n,e)};function __extends(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");extendStatics(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}typeof SuppressedError=="function"&&SuppressedError;var HtmlRowInput=function(n){__extends(e,n);function e(t){var r=n.call(this)||this;return r._element=t,r}return e}(Array);function defaultStyles(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function getTheme(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function getStringWidth(n,e,t){t.applyStyles(e,!0);var r=Array.isArray(n)?n:[n],Ee=r.map(function(Te){return t.getTextWidth(Te)}).reduce(function(Te,Re){return Math.max(Te,Re)},0);return Ee}function addTableBorder(n,e,t,r){var Ee=e.settings.tableLineWidth,Te=e.settings.tableLineColor;n.applyStyles({lineWidth:Ee,lineColor:Te});var Re=getFillStyle(Ee,!1);Re&&n.rect(t.x,t.y,e.getWidth(n.pageSize().width),r.y-t.y,Re)}function getFillStyle(n,e){var t=n>0,r=e||e===0;return t&&r?"DF":t?"S":r?"F":null}function parseSpacing(n,e){var t,r,Ee,Te;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(t=n.left)!==null&&t!==void 0?t:e,top:(r=n.top)!==null&&r!==void 0?r:e,right:(Ee=n.right)!==null&&Ee!==void 0?Ee:e,bottom:(Te=n.bottom)!==null&&Te!==void 0?Te:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function getPageAvailableWidth(n,e){var t=parseSpacing(e.settings.margin,0);return n.pageSize().width-(t.left+t.right)}function parseCss(n,e,t,r,Ee){var Te={},Re=1.3333333333333333,Me=parseColor(e,function(Je){return Ee.getComputedStyle(Je).backgroundColor});Me!=null&&(Te.fillColor=Me);var Ve=parseColor(e,function(Je){return Ee.getComputedStyle(Je).color});Ve!=null&&(Te.textColor=Ve);var De=parsePadding(r,t);De&&(Te.cellPadding=De);var $e="borderTopColor",Oe=Re*t,Ce=r.borderTopWidth;if(r.borderBottomWidth===Ce&&r.borderRightWidth===Ce&&r.borderLeftWidth===Ce){var Be=(parseFloat(Ce)||0)/Oe;Be&&(Te.lineWidth=Be)}else Te.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/Oe,right:(parseFloat(r.borderRightWidth)||0)/Oe,bottom:(parseFloat(r.borderBottomWidth)||0)/Oe,left:(parseFloat(r.borderLeftWidth)||0)/Oe},Te.lineWidth.top||(Te.lineWidth.right?$e="borderRightColor":Te.lineWidth.bottom?$e="borderBottomColor":Te.lineWidth.left&&($e="borderLeftColor"));var Ue=parseColor(e,function(Je){return Ee.getComputedStyle(Je)[$e]});Ue!=null&&(Te.lineColor=Ue);var We=["left","right","center","justify"];We.indexOf(r.textAlign)!==-1&&(Te.halign=r.textAlign),We=["middle","bottom","top"],We.indexOf(r.verticalAlign)!==-1&&(Te.valign=r.verticalAlign);var He=parseInt(r.fontSize||"");isNaN(He)||(Te.fontSize=He/Re);var Ge=parseFontStyle(r);Ge&&(Te.fontStyle=Ge);var Ye=(r.fontFamily||"").toLowerCase();return n.indexOf(Ye)!==-1&&(Te.font=Ye),Te}function parseFontStyle(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function parseColor(n,e){var t=realColor(n,e);if(!t)return null;var r=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var Ee=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],Te=parseInt(r[4]);return Te===0||isNaN(Ee[0])||isNaN(Ee[1])||isNaN(Ee[2])?null:Ee}function realColor(n,e){var t=e(n);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?n.parentElement==null?null:realColor(n.parentElement,e):t}function parsePadding(n,e){var t=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],r=96/(72/e),Ee=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,Te=t.map(function(Me){return parseInt(Me||"0")/r}),Re=parseSpacing(Te,0);return Ee>Re.top&&(Re.top=Ee),Ee>Re.bottom&&(Re.bottom=Ee),Re}function parseHtml(n,e,t,r,Ee){var Te,Re;r===void 0&&(r=!1),Ee===void 0&&(Ee=!1);var Me;typeof e=="string"?Me=t.document.querySelector(e):Me=e;var Ve=Object.keys(n.getFontList()),De=n.scaleFactor(),$e=[],Oe=[],Ce=[];if(!Me)return console.error("Html table could not be found with input: ",e),{head:$e,body:Oe,foot:Ce};for(var Be=0;Be<Me.rows.length;Be++){var Ue=Me.rows[Be],We=(Re=(Te=Ue?.parentElement)===null||Te===void 0?void 0:Te.tagName)===null||Re===void 0?void 0:Re.toLowerCase(),He=parseRowContent(Ve,De,t,Ue,r,Ee);He&&(We==="thead"?$e.push(He):We==="tfoot"?Ce.push(He):Oe.push(He))}return{head:$e,body:Oe,foot:Ce}}function parseRowContent(n,e,t,r,Ee,Te){for(var Re=new HtmlRowInput(r),Me=0;Me<r.cells.length;Me++){var Ve=r.cells[Me],De=t.getComputedStyle(Ve);if(Ee||De.display!=="none"){var $e=void 0;Te&&($e=parseCss(n,Ve,e,De,t)),Re.push({rowSpan:Ve.rowSpan,colSpan:Ve.colSpan,styles:$e,_element:Ve,content:parseCellContent(Ve)})}}var Oe=t.getComputedStyle(r);if(Re.length>0&&(Ee||Oe.display!=="none"))return Re}function parseCellContent(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function validateInput(n,e,t){for(var r=0,Ee=[n,e,t];r<Ee.length;r++){var Te=Ee[r];Te&&typeof Te!="object"&&console.error("The options parameter should be of type object, is: "+typeof Te),Te.startY&&typeof Te.startY!="number"&&(console.error("Invalid value for startY option",Te.startY),delete Te.startY)}}function assign(n,e,t,r,Ee){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var Te=Object(n),Re=1;Re<arguments.length;Re++){var Me=arguments[Re];if(Me!=null)for(var Ve in Me)Object.prototype.hasOwnProperty.call(Me,Ve)&&(Te[Ve]=Me[Ve])}return Te}function parseInput(n,e){var t=new DocHandler(n),r=t.getDocumentOptions(),Ee=t.getGlobalOptions();validateInput(Ee,r,e);var Te=assign({},Ee,r,e),Re;typeof window<"u"&&(Re=window);var Me=parseStyles(Ee,r,e),Ve=parseHooks(Ee,r,e),De=parseSettings(t,Te),$e=parseContent$1(t,Te,Re);return{id:e.tableId,content:$e,hooks:Ve,styles:Me,settings:De}}function parseStyles(n,e,t){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},Ee=function(Ve){if(Ve==="columnStyles"){var De=n[Ve],$e=e[Ve],Oe=t[Ve];r.columnStyles=assign({},De,$e,Oe)}else{var Ce=[n,e,t],Be=Ce.map(function(Ue){return Ue[Ve]||{}});r[Ve]=assign({},Be[0],Be[1],Be[2])}},Te=0,Re=Object.keys(r);Te<Re.length;Te++){var Me=Re[Te];Ee(Me)}return r}function parseHooks(n,e,t){for(var r=[n,e,t],Ee={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},Te=0,Re=r;Te<Re.length;Te++){var Me=Re[Te];Me.didParseCell&&Ee.didParseCell.push(Me.didParseCell),Me.willDrawCell&&Ee.willDrawCell.push(Me.willDrawCell),Me.didDrawCell&&Ee.didDrawCell.push(Me.didDrawCell),Me.willDrawPage&&Ee.willDrawPage.push(Me.willDrawPage),Me.didDrawPage&&Ee.didDrawPage.push(Me.didDrawPage)}return Ee}function parseSettings(n,e){var t,r,Ee,Te,Re,Me,Ve,De,$e,Oe,Ce,Be,Ue=parseSpacing(e.margin,40/n.scaleFactor()),We=(t=getStartY(n,e.startY))!==null&&t!==void 0?t:Ue.top,He;e.showFoot===!0?He="everyPage":e.showFoot===!1?He="never":He=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var Ge;e.showHead===!0?Ge="everyPage":e.showHead===!1?Ge="never":Ge=(Ee=e.showHead)!==null&&Ee!==void 0?Ee:"everyPage";var Ye=(Te=e.useCss)!==null&&Te!==void 0?Te:!1,Je=e.theme||(Ye?"plain":"striped"),Ze=!!e.horizontalPageBreak,fn=(Re=e.horizontalPageBreakRepeat)!==null&&Re!==void 0?Re:null;return{includeHiddenHtml:(Me=e.includeHiddenHtml)!==null&&Me!==void 0?Me:!1,useCss:Ye,theme:Je,startY:We,margin:Ue,pageBreak:(Ve=e.pageBreak)!==null&&Ve!==void 0?Ve:"auto",rowPageBreak:(De=e.rowPageBreak)!==null&&De!==void 0?De:"auto",tableWidth:($e=e.tableWidth)!==null&&$e!==void 0?$e:"auto",showHead:Ge,showFoot:He,tableLineWidth:(Oe=e.tableLineWidth)!==null&&Oe!==void 0?Oe:0,tableLineColor:(Ce=e.tableLineColor)!==null&&Ce!==void 0?Ce:200,horizontalPageBreak:Ze,horizontalPageBreakRepeat:fn,horizontalPageBreakBehaviour:(Be=e.horizontalPageBreakBehaviour)!==null&&Be!==void 0?Be:"afterAllRows"}}function getStartY(n,e){var t=n.getLastAutoTable(),r=n.scaleFactor(),Ee=n.pageNumber(),Te=!1;if(t&&t.startPageNumber){var Re=t.startPageNumber+t.pageNumber-1;Te=Re===Ee}return typeof e=="number"?e:(e==null||e===!1)&&Te&&t?.finalY!=null?t.finalY+20/r:null}function parseContent$1(n,e,t){var r=e.head||[],Ee=e.body||[],Te=e.foot||[];if(e.html){var Re=e.includeHiddenHtml;if(t){var Me=parseHtml(n,e.html,t,Re,e.useCss)||{};r=Me.head||r,Ee=Me.body||r,Te=Me.foot||r}else console.error("Cannot parse html in non browser environment")}var Ve=e.columns||parseColumns(r,Ee,Te);return{columns:Ve,head:r,body:Ee,foot:Te}}function parseColumns(n,e,t){var r=n[0]||e[0]||t[0]||[],Ee=[];return Object.keys(r).filter(function(Te){return Te!=="_element"}).forEach(function(Te){var Re=1,Me;Array.isArray(r)?Me=r[parseInt(Te)]:Me=r[Te],typeof Me=="object"&&!Array.isArray(Me)&&(Re=Me?.colSpan||1);for(var Ve=0;Ve<Re;Ve++){var De=void 0;Array.isArray(r)?De=Ee.length:De=Te+(Ve>0?"_".concat(Ve):"");var $e={dataKey:De};Ee.push($e)}}),Ee}var HookData=function(){function n(e,t,r){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=r,this.doc=e.getDocument()}return n}(),CellHookData=function(n){__extends(e,n);function e(t,r,Ee,Te,Re,Me){var Ve=n.call(this,t,r,Me)||this;return Ve.cell=Ee,Ve.row=Te,Ve.column=Re,Ve.section=Te.section,Ve}return e}(HookData),Table=function(){function n(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,t,r,Ee,Te,Re){for(var Me=0,Ve=t;Me<Ve.length;Me++){var De=Ve[Me],$e=new CellHookData(e,this,r,Ee,Te,Re),Oe=De($e)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],Oe)return!1}return!0},n.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var r=0,Ee=this.hooks.didDrawPage;r<Ee.length;r++){var Te=Ee[r];Te(new HookData(e,this,t))}},n.prototype.callWillDrawPageHooks=function(e,t){for(var r=0,Ee=this.hooks.willDrawPage;r<Ee.length;r++){var Te=Ee[r];Te(new HookData(e,this,t))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(Ee,Te){return Ee+Te.wrappedWidth},0);return t}else{var r=this.settings.margin;return e-r.left-r.right}},n}(),Row=function(){function n(e,t,r,Ee,Te){Te===void 0&&(Te=!1),this.height=0,this.raw=e,e instanceof HtmlRowInput&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=r,this.cells=Ee,this.spansMultiplePages=Te}return n.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(r,Ee){var Te;return Math.max(r,((Te=t.cells[Ee.index])===null||Te===void 0?void 0:Te.height)||0)},0)},n.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(r){var Ee=t.cells[r.index];return Ee?Ee.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},n.prototype.getMinimumRowHeight=function(e,t){var r=this;return e.reduce(function(Ee,Te){var Re=r.cells[Te.index];if(!Re)return 0;var Me=t.getLineHeight(Re.styles.fontSize),Ve=Re.padding("vertical"),De=Ve+Me;return De>Ee?De:Ee},0)},n}(),Cell=function(){function n(e,t,r){var Ee;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=r,this.raw=e;var Te=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,Te=(Ee=e.content)!==null&&Ee!==void 0?Ee:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var Re=Te!=null?""+Te:"",Me=/\r\n|\r|\n/g;this.text=Re.split(Me)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var Ee=this.width-this.padding("horizontal");r=this.x+Ee/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},n.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var r=Array.isArray(this.text)?this.text.length:1,Ee=this.styles.fontSize/e*t,Te=r*Ee+this.padding("vertical");return Math.max(Te,this.styles.minCellHeight)},n.prototype.padding=function(e){var t=parseSpacing(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},n}(),Column=function(){function n(e,t,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=r}return n.prototype.getMaxCustomCellWidth=function(e){for(var t=0,r=0,Ee=e.allRows();r<Ee.length;r++){var Te=Ee[r],Re=Te.cells[this.index];Re&&typeof Re.styles.cellWidth=="number"&&(t=Math.max(t,Re.styles.cellWidth))}return t},n}();function calculateWidths(n,e){calculate(n,e);var t=[],r=0;e.columns.forEach(function(Te){var Re=Te.getMaxCustomCellWidth(e);Re?Te.width=Re:(Te.width=Te.wrappedWidth,t.push(Te)),r+=Te.width});var Ee=e.getWidth(n.pageSize().width)-r;Ee&&(Ee=resizeColumns(t,Ee,function(Te){return Math.max(Te.minReadableWidth,Te.minWidth)})),Ee&&(Ee=resizeColumns(t,Ee,function(Te){return Te.minWidth})),Ee=Math.abs(Ee),!e.settings.horizontalPageBreak&&Ee>.1/n.scaleFactor()&&(Ee=Ee<1?Ee:Math.round(Ee),console.warn("Of the table content, ".concat(Ee," units width could not fit page"))),applyColSpans(e),fitContent(e,n),applyRowSpans(e)}function calculate(n,e){var t=n.scaleFactor(),r=e.settings.horizontalPageBreak,Ee=getPageAvailableWidth(n,e);e.allRows().forEach(function(Te){for(var Re=0,Me=e.columns;Re<Me.length;Re++){var Ve=Me[Re],De=Te.cells[Ve.index];if(De){var $e=e.hooks.didParseCell;e.callCellHooks(n,$e,De,Te,Ve,null);var Oe=De.padding("horizontal");De.contentWidth=getStringWidth(De.text,De.styles,n)+Oe;var Ce=getStringWidth(De.text.join(" ").split(/[^\S\u00A0]+/),De.styles,n);if(De.minReadableWidth=Ce+De.padding("horizontal"),typeof De.styles.cellWidth=="number")De.minWidth=De.styles.cellWidth,De.wrappedWidth=De.styles.cellWidth;else if(De.styles.cellWidth==="wrap"||r===!0)De.contentWidth>Ee?(De.minWidth=Ee,De.wrappedWidth=Ee):(De.minWidth=De.contentWidth,De.wrappedWidth=De.contentWidth);else{var Be=10/t;De.minWidth=De.styles.minCellWidth||Be,De.wrappedWidth=De.contentWidth,De.minWidth>De.wrappedWidth&&(De.wrappedWidth=De.minWidth)}}}}),e.allRows().forEach(function(Te){for(var Re=0,Me=e.columns;Re<Me.length;Re++){var Ve=Me[Re],De=Te.cells[Ve.index];if(De&&De.colSpan===1)Ve.wrappedWidth=Math.max(Ve.wrappedWidth,De.wrappedWidth),Ve.minWidth=Math.max(Ve.minWidth,De.minWidth),Ve.minReadableWidth=Math.max(Ve.minReadableWidth,De.minReadableWidth);else{var $e=e.styles.columnStyles[Ve.dataKey]||e.styles.columnStyles[Ve.index]||{},Oe=$e.cellWidth||$e.minCellWidth;Oe&&typeof Oe=="number"&&(Ve.minWidth=Oe,Ve.wrappedWidth=Oe)}De&&(De.colSpan>1&&!Ve.minWidth&&(Ve.minWidth=De.minWidth),De.colSpan>1&&!Ve.wrappedWidth&&(Ve.wrappedWidth=De.minWidth))}})}function resizeColumns(n,e,t){for(var r=e,Ee=n.reduce(function(Be,Ue){return Be+Ue.wrappedWidth},0),Te=0;Te<n.length;Te++){var Re=n[Te],Me=Re.wrappedWidth/Ee,Ve=r*Me,De=Re.width+Ve,$e=t(Re),Oe=De<$e?$e:De;e-=Oe-Re.width,Re.width=Oe}if(e=Math.round(e*1e10)/1e10,e){var Ce=n.filter(function(Be){return e<0?Be.width>t(Be):!0});Ce.length&&(e=resizeColumns(Ce,e,t))}return e}function applyRowSpans(n){for(var e={},t=1,r=n.allRows(),Ee=0;Ee<r.length;Ee++)for(var Te=r[Ee],Re=0,Me=n.columns;Re<Me.length;Re++){var Ve=Me[Re],De=e[Ve.index];if(t>1)t--,delete Te.cells[Ve.index];else if(De)De.cell.height+=Te.height,t=De.cell.colSpan,delete Te.cells[Ve.index],De.left--,De.left<=1&&delete e[Ve.index];else{var $e=Te.cells[Ve.index];if(!$e)continue;if($e.height=Te.height,$e.rowSpan>1){var Oe=r.length-Ee,Ce=$e.rowSpan>Oe?Oe:$e.rowSpan;e[Ve.index]={cell:$e,left:Ce,row:Te}}}}}function applyColSpans(n){for(var e=n.allRows(),t=0;t<e.length;t++)for(var r=e[t],Ee=null,Te=0,Re=0,Me=0;Me<n.columns.length;Me++){var Ve=n.columns[Me];if(Re-=1,Re>1&&n.columns[Me+1])Te+=Ve.width,delete r.cells[Ve.index];else if(Ee){var De=Ee;delete r.cells[Ve.index],Ee=null,De.width=Ve.width+Te}else{var De=r.cells[Ve.index];if(!De)continue;if(Re=De.colSpan,Te=0,De.colSpan>1){Ee=De,Te+=Ve.width;continue}De.width=Ve.width+Te}}}function fitContent(n,e){for(var t={count:0,height:0},r=0,Ee=n.allRows();r<Ee.length;r++){for(var Te=Ee[r],Re=0,Me=n.columns;Re<Me.length;Re++){var Ve=Me[Re],De=Te.cells[Ve.index];if(De){e.applyStyles(De.styles,!0);var $e=De.width-De.padding("horizontal");if(De.styles.overflow==="linebreak")De.text=e.splitTextToSize(De.text,$e+1/e.scaleFactor(),{fontSize:De.styles.fontSize});else if(De.styles.overflow==="ellipsize")De.text=ellipsize(De.text,$e,De.styles,e,"...");else if(De.styles.overflow==="hidden")De.text=ellipsize(De.text,$e,De.styles,e,"");else if(typeof De.styles.overflow=="function"){var Oe=De.styles.overflow(De.text,$e);typeof Oe=="string"?De.text=[Oe]:De.text=Oe}De.contentHeight=De.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var Ce=De.contentHeight/De.rowSpan;De.rowSpan>1&&t.count*t.height<Ce*De.rowSpan?t={height:Ce,count:De.rowSpan}:t&&t.count>0&&t.height>Ce&&(Ce=t.height),Ce>Te.height&&(Te.height=Ce)}}t.count--}}function ellipsize(n,e,t,r,Ee){return n.map(function(Te){return ellipsizeStr(Te,e,t,r,Ee)})}function ellipsizeStr(n,e,t,r,Ee){var Te=1e4*r.scaleFactor();if(e=Math.ceil(e*Te)/Te,e>=getStringWidth(n,t,r))return n;for(;e<getStringWidth(n+Ee,t,r)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+Ee}function createTable(n,e){var t=new DocHandler(n),r=parseContent(e,t.scaleFactor()),Ee=new Table(e,r);return calculateWidths(t,Ee),t.applyStyles(t.userStyles),Ee}function parseContent(n,e){var t=n.content,r=createColumns(t.columns);if(t.head.length===0){var Ee=generateSectionRow(r,"head");Ee&&t.head.push(Ee)}if(t.foot.length===0){var Ee=generateSectionRow(r,"foot");Ee&&t.foot.push(Ee)}var Te=n.settings.theme,Re=n.styles;return{columns:r,head:parseSection("head",t.head,r,Re,Te,e),body:parseSection("body",t.body,r,Re,Te,e),foot:parseSection("foot",t.foot,r,Re,Te,e)}}function parseSection(n,e,t,r,Ee,Te){var Re={},Me=e.map(function(Ve,De){for(var $e=0,Oe={},Ce=0,Be=0,Ue=0,We=t;Ue<We.length;Ue++){var He=We[Ue];if(Re[He.index]==null||Re[He.index].left===0)if(Be===0){var Ge=void 0;Array.isArray(Ve)?Ge=Ve[He.index-Ce-$e]:Ge=Ve[He.dataKey];var Ye={};typeof Ge=="object"&&!Array.isArray(Ge)&&(Ye=Ge?.styles||{});var Je=cellStyles(n,He,De,Ee,r,Te,Ye),Ze=new Cell(Ge,Je,n);Oe[He.dataKey]=Ze,Oe[He.index]=Ze,Be=Ze.colSpan-1,Re[He.index]={left:Ze.rowSpan-1,times:Be}}else Be--,Ce++;else Re[He.index].left--,Be=Re[He.index].times,$e++}return new Row(Ve,De,n,Oe)});return Me}function generateSectionRow(n,e){var t={};return n.forEach(function(r){if(r.raw!=null){var Ee=getSectionTitle(e,r.raw);Ee!=null&&(t[r.dataKey]=Ee)}}),Object.keys(t).length>0?t:null}function getSectionTitle(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function createColumns(n){return n.map(function(e,t){var r,Ee;return typeof e=="object"?Ee=(r=e.dataKey)!==null&&r!==void 0?r:t:Ee=t,new Column(Ee,e,t)})}function cellStyles(n,e,t,r,Ee,Te,Re){var Me=getTheme(r),Ve;n==="head"?Ve=Ee.headStyles:n==="body"?Ve=Ee.bodyStyles:n==="foot"&&(Ve=Ee.footStyles);var De=assign({},Me.table,Me[n],Ee.styles,Ve),$e=Ee.columnStyles[e.dataKey]||Ee.columnStyles[e.index]||{},Oe=n==="body"?$e:{},Ce=n==="body"&&t%2===0?assign({},Me.alternateRow,Ee.alternateRowStyles):{},Be=defaultStyles(Te),Ue=assign({},Be,De,Ce,Oe);return assign(Ue,Re)}function getColumnsCanFitInPage(n,e,t){var r;t===void 0&&(t={});var Ee=getPageAvailableWidth(n,e),Te=new Map,Re=[],Me=[],Ve=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?Ve=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(Ve=[e.settings.horizontalPageBreakRepeat]),Ve.forEach(function(Ce){var Be=e.columns.find(function(Ue){return Ue.dataKey===Ce||Ue.index===Ce});Be&&!Te.has(Be.index)&&(Te.set(Be.index,!0),Re.push(Be.index),Me.push(e.columns[Be.index]),Ee-=Be.wrappedWidth)});for(var De=!0,$e=(r=t?.start)!==null&&r!==void 0?r:0;$e<e.columns.length;){if(Te.has($e)){$e++;continue}var Oe=e.columns[$e].wrappedWidth;if(De||Ee>=Oe)De=!1,Re.push($e),Me.push(e.columns[$e]),Ee-=Oe;else break;$e++}return{colIndexes:Re,columns:Me,lastIndex:$e-1}}function calculateAllColumnsCanFitInPage(n,e){for(var t=[],r=0;r<e.columns.length;r++){var Ee=getColumnsCanFitInPage(n,e,{start:r});Ee.columns.length&&(t.push(Ee),r=Ee.lastIndex)}return t}function drawTable(n,e){var t=e.settings,r=t.startY,Ee=t.margin,Te={x:Ee.left,y:r},Re=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),Me=r+Ee.bottom+Re;if(t.pageBreak==="avoid"){var Ve=e.body,De=Ve.reduce(function(Ce,Be){return Ce+Be.height},0);Me+=De}var $e=new DocHandler(n);(t.pageBreak==="always"||t.startY!=null&&Me>$e.pageSize().height)&&(nextPage($e),Te.y=Ee.top),e.callWillDrawPageHooks($e,Te);var Oe=assign({},Te);e.startPageNumber=$e.pageNumber(),t.horizontalPageBreak?printTableWithHorizontalPageBreak($e,e,Oe,Te):($e.applyStyles($e.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(Ce){return printRow($e,e,Ce,Te,e.columns)}),$e.applyStyles($e.userStyles),e.body.forEach(function(Ce,Be){var Ue=Be===e.body.length-1;printFullRow($e,e,Ce,Ue,Oe,Te,e.columns)}),$e.applyStyles($e.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(Ce){return printRow($e,e,Ce,Te,e.columns)})),addTableBorder($e,e,Oe,Te),e.callEndPageHooks($e,Te),e.finalY=Te.y,n.lastAutoTable=e,$e.applyStyles($e.userStyles)}function printTableWithHorizontalPageBreak(n,e,t,r){var Ee=calculateAllColumnsCanFitInPage(n,e),Te=e.settings;if(Te.horizontalPageBreakBehaviour==="afterAllRows")Ee.forEach(function(De,$e){n.applyStyles(n.userStyles),$e>0?addPage(n,e,t,r,De.columns,!0):printHead(n,e,r,De.columns),printBody(n,e,t,r,De.columns),printFoot(n,e,r,De.columns)});else for(var Re=-1,Me=Ee[0],Ve=function(){var De=Re;if(Me){n.applyStyles(n.userStyles);var $e=Me.columns;Re>=0?addPage(n,e,t,r,$e,!0):printHead(n,e,r,$e),De=printBodyWithoutPageBreaks(n,e,Re+1,r,$e),printFoot(n,e,r,$e)}var Oe=De-Re;Ee.slice(1).forEach(function(Ce){n.applyStyles(n.userStyles),addPage(n,e,t,r,Ce.columns,!0),printBodyWithoutPageBreaks(n,e,Re+1,r,Ce.columns,Oe),printFoot(n,e,r,Ce.columns)}),Re=De};Re<e.body.length-1;)Ve()}function printHead(n,e,t,r){var Ee=e.settings;n.applyStyles(n.userStyles),(Ee.showHead==="firstPage"||Ee.showHead==="everyPage")&&e.head.forEach(function(Te){return printRow(n,e,Te,t,r)})}function printBody(n,e,t,r,Ee){n.applyStyles(n.userStyles),e.body.forEach(function(Te,Re){var Me=Re===e.body.length-1;printFullRow(n,e,Te,Me,t,r,Ee)})}function printBodyWithoutPageBreaks(n,e,t,r,Ee,Te){n.applyStyles(n.userStyles),Te=Te??e.body.length;var Re=Math.min(t+Te,e.body.length),Me=-1;return e.body.slice(t,Re).forEach(function(Ve,De){var $e=t+De===e.body.length-1,Oe=getRemainingPageSpace(n,e,$e,r);Ve.canEntireRowFit(Oe,Ee)&&(printRow(n,e,Ve,r,Ee),Me=t+De)}),Me}function printFoot(n,e,t,r){var Ee=e.settings;n.applyStyles(n.userStyles),(Ee.showFoot==="lastPage"||Ee.showFoot==="everyPage")&&e.foot.forEach(function(Te){return printRow(n,e,Te,t,r)})}function getRemainingLineCount(n,e,t){var r=t.getLineHeight(n.styles.fontSize),Ee=n.padding("vertical"),Te=Math.floor((e-Ee)/r);return Math.max(0,Te)}function modifyRowToFit(n,e,t,r){var Ee={};n.spansMultiplePages=!0,n.height=0;for(var Te=0,Re=0,Me=t.columns;Re<Me.length;Re++){var Ve=Me[Re],De=n.cells[Ve.index];if(De){Array.isArray(De.text)||(De.text=[De.text]);var $e=new Cell(De.raw,De.styles,De.section);$e=assign($e,De),$e.text=[];var Oe=getRemainingLineCount(De,e,r);De.text.length>Oe&&($e.text=De.text.splice(Oe,De.text.length));var Ce=r.scaleFactor(),Be=r.getLineHeightFactor();De.contentHeight=De.getContentHeight(Ce,Be),De.contentHeight>=e&&(De.contentHeight=e,$e.styles.minCellHeight-=e),De.contentHeight>n.height&&(n.height=De.contentHeight),$e.contentHeight=$e.getContentHeight(Ce,Be),$e.contentHeight>Te&&(Te=$e.contentHeight),Ee[Ve.index]=$e}}var Ue=new Row(n.raw,-1,n.section,Ee,!0);Ue.height=Te;for(var We=0,He=t.columns;We<He.length;We++){var Ve=He[We],$e=Ue.cells[Ve.index];$e&&($e.height=Ue.height);var De=n.cells[Ve.index];De&&(De.height=n.height)}return Ue}function shouldPrintOnCurrentPage(n,e,t,r){var Ee=n.pageSize().height,Te=r.settings.margin,Re=Te.top+Te.bottom,Me=Ee-Re;e.section==="body"&&(Me-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var Ve=e.getMinimumRowHeight(r.columns,n),De=Ve<t;if(Ve>Me)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!De)return!1;var $e=e.hasRowSpan(r.columns),Oe=e.getMaxCellHeight(r.columns)>Me;return Oe?($e&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!($e||r.settings.rowPageBreak==="avoid")}function printFullRow(n,e,t,r,Ee,Te,Re){var Me=getRemainingPageSpace(n,e,r,Te);if(t.canEntireRowFit(Me,Re))printRow(n,e,t,Te,Re);else if(shouldPrintOnCurrentPage(n,t,Me,e)){var Ve=modifyRowToFit(t,Me,e,n);printRow(n,e,t,Te,Re),addPage(n,e,Ee,Te,Re),printFullRow(n,e,Ve,r,Ee,Te,Re)}else addPage(n,e,Ee,Te,Re),printFullRow(n,e,t,r,Ee,Te,Re)}function printRow(n,e,t,r,Ee){r.x=e.settings.margin.left;for(var Te=0,Re=Ee;Te<Re.length;Te++){var Me=Re[Te],Ve=t.cells[Me.index];if(!Ve){r.x+=Me.width;continue}n.applyStyles(Ve.styles),Ve.x=r.x,Ve.y=r.y;var De=e.callCellHooks(n,e.hooks.willDrawCell,Ve,t,Me,r);if(De===!1){r.x+=Me.width;continue}drawCellRect(n,Ve,r);var $e=Ve.getTextPos();autoTableText(Ve.text,$e.x,$e.y,{halign:Ve.styles.halign,valign:Ve.styles.valign,maxWidth:Math.ceil(Ve.width-Ve.padding("left")-Ve.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,Ve,t,Me,r),r.x+=Me.width}r.y+=t.height}function drawCellRect(n,e,t){var r=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof r.lineWidth=="number"){var Ee=getFillStyle(r.lineWidth,r.fillColor);Ee&&n.rect(e.x,t.y,e.width,e.height,Ee)}else typeof r.lineWidth=="object"&&(r.fillColor&&n.rect(e.x,t.y,e.width,e.height,"F"),drawCellBorders(n,e,t,r.lineWidth))}function drawCellBorders(n,e,t,r){var Ee,Te,Re,Me;r.top&&(Ee=t.x,Te=t.y,Re=t.x+e.width,Me=t.y,r.right&&(Re+=.5*r.right),r.left&&(Ee-=.5*r.left),Ve(r.top,Ee,Te,Re,Me)),r.bottom&&(Ee=t.x,Te=t.y+e.height,Re=t.x+e.width,Me=t.y+e.height,r.right&&(Re+=.5*r.right),r.left&&(Ee-=.5*r.left),Ve(r.bottom,Ee,Te,Re,Me)),r.left&&(Ee=t.x,Te=t.y,Re=t.x,Me=t.y+e.height,r.top&&(Te-=.5*r.top),r.bottom&&(Me+=.5*r.bottom),Ve(r.left,Ee,Te,Re,Me)),r.right&&(Ee=t.x+e.width,Te=t.y,Re=t.x+e.width,Me=t.y+e.height,r.top&&(Te-=.5*r.top),r.bottom&&(Me+=.5*r.bottom),Ve(r.right,Ee,Te,Re,Me));function Ve(De,$e,Oe,Ce,Be){n.getDocument().setLineWidth(De),n.getDocument().line($e,Oe,Ce,Be,"S")}}function getRemainingPageSpace(n,e,t,r){var Ee=e.settings.margin.bottom,Te=e.settings.showFoot;return(Te==="everyPage"||Te==="lastPage"&&t)&&(Ee+=e.getFootHeight(e.columns)),n.pageSize().height-r.y-Ee}function addPage(n,e,t,r,Ee,Te){Ee===void 0&&(Ee=[]),Te===void 0&&(Te=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!Te&&e.foot.forEach(function(Me){return printRow(n,e,Me,r,Ee)}),e.callEndPageHooks(n,r);var Re=e.settings.margin;addTableBorder(n,e,t,r),nextPage(n),e.pageNumber++,r.x=Re.left,r.y=Re.top,t.y=Re.top,e.callWillDrawPageHooks(n,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(Me){return printRow(n,e,Me,r,Ee)}),n.applyStyles(n.userStyles))}function nextPage(n){var e=n.pageNumber();n.setPage(e+1);var t=n.pageNumber();return t===e?(n.addPage(),!0):!1}function applyPlugin(n){n.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],Ee=parseInput(this,r),Te=createTable(this,Ee);return drawTable(this,Te),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,t,r,Ee){autoTableText(e,t,r,Ee,this)},n.API.autoTableSetDefaults=function(e){return DocHandler.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,t){DocHandler.setDefaults(e,t)},n.API.autoTableHtmlToJson=function(e,t){var r;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var Ee=new DocHandler(this),Te=parseHtml(Ee,e,window,t,!1),Re=Te.head,Me=Te.body,Ve=((r=Re[0])===null||r===void 0?void 0:r.map(function(De){return De.content}))||[];return{columns:Ve,rows:Me,data:Me}}}var _a;function autoTable(n,e){var t=parseInput(n,e),r=createTable(n,t);drawTable(n,r)}try{if(typeof window<"u"&&window){var anyWindow=window,jsPDF=anyWindow.jsPDF||((_a=anyWindow.jspdf)===null||_a===void 0?void 0:_a.jsPDF);jsPDF&&applyPlugin(jsPDF)}}catch(n){console.error("Could not apply autoTable plugin",n)}const LoginModal$1=({onClose:n})=>{const[e,t]=reactExports.useState(!1),[r,Ee]=reactExports.useState(!1),[Te,Re]=reactExports.useState(!1),[Me,Ve]=reactExports.useState(!1),[De,$e]=reactExports.useState(!1),[Oe,Ce]=reactExports.useState(!1),[Be,Ue]=reactExports.useState({fullName:"",email:"",password:"",confirmPassword:"",newPassword:"",confirmNewPassword:""}),[We,He]=reactExports.useState(""),[Ge,Ye]=reactExports.useState(""),[Je,Ze]=reactExports.useState(!1),fn=useNavigate(),yn=reactExports.useRef();reactExports.useEffect(()=>{const En=Pn=>{yn.current&&!yn.current.contains(Pn.target)&&(n?n():fn(-1))};return document.addEventListener("mousedown",En),()=>{document.removeEventListener("mousedown",En)}},[n,fn]);const mn=En=>{Ue({...Be,[En.target.name]:En.target.value})},pn=()=>{const{fullName:En,email:Pn,password:Ln,confirmPassword:Cn}=Be;if(r)return!Pn||!/\S+@\S+\.\S+/.test(Pn)?"Valid email is required.":null;if(e){if(!En.trim())return"Full Name is required.";if(!/^[A-Za-z\s]+$/.test(En))return"Full Name can only contain letters and spaces.";if(Ln!==Cn)return"Passwords do not match."}return!Pn||!/\S+@\S+\.\S+/.test(Pn)?"Valid email is required.":!Ln||Ln.length<6?"Password must be at least 6 characters.":null},un=async En=>{En.preventDefault();const Pn=pn();if(Pn){He(Pn);return}Ze(!0),He(""),Ye("");try{await sendPasswordResetEmail(auth,Be.email),Ye("✅ Password reset email sent! Check your inbox and follow the instructions to reset your password."),setTimeout(()=>{Ee(!1),gn()},3e3)}catch(Ln){Ln.code==="auth/user-not-found"?He("❌ No account found with this email address."):Ln.code==="auth/invalid-email"?He("❌ Invalid email address."):He("❌ "+Ln.message)}finally{Ze(!1)}},bn=async En=>{En.preventDefault();const Pn=pn();if(Pn){He(Pn);return}Ze(!0),He(""),Ye("");try{let Ln;e?(Ln=await createUserWithEmailAndPassword(auth,Be.email,Be.password),await setDoc(doc(db,"users",Ln.user.uid),{fullName:Be.fullName,email:Be.email,createdAt:serverTimestamp()})):Ln=await signInWithEmailAndPassword(auth,Be.email,Be.password),fn("/")}catch(Ln){const Cn=Ln.code;He(Cn==="auth/email-already-in-use"?"⚠️ Email already registered. Try logging in.":Cn==="auth/invalid-email"?"⚠️ Invalid email format.":Cn==="auth/weak-password"?"⚠️ Password too weak (min 6 characters).":Cn==="auth/user-not-found"||Cn==="auth/wrong-password"?"❌ Wrong email or password.":"❌ "+Ln.message)}finally{Ze(!1)}},gn=()=>{Ue({fullName:"",email:"",password:"",confirmPassword:"",newPassword:"",confirmNewPassword:""}),He(""),Ye(""),Re(!1),Ve(!1),$e(!1),Ce(!1)},xn=()=>{n?n():fn(-1)};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:jsxRuntimeExports.jsxs("div",{ref:yn,className:"bg-gray-900/95 backdrop-blur-md border border-gray-800 p-8 rounded-2xl shadow-2xl w-full max-w-md space-y-6 relative overflow-hidden",children:[jsxRuntimeExports.jsx("button",{onClick:xn,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-white transition-colors duration-200 cursor-pointer z-40",title:"Go back",children:jsxRuntimeExports.jsx(X$1,{className:"w-6 h-6"})}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-900/20 via-transparent to-purple-600/10 rounded-2xl"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsxs("div",{className:"text-center space-y-2 mb-8",children:[jsxRuntimeExports.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-purple-600 to-purple-500 rounded-full mb-4",children:jsxRuntimeExports.jsx("span",{className:"text-2xl font-bold text-white",children:"E"})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white",children:r?"Reset Password":e?"Join EDGEx":"Welcome Back"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm",children:r?"Enter your email and new password to reset your account":e?"Create your account to start your AI-powered learning journey":"Sign in to continue your learning journey"})]}),We&&jsxRuntimeExports.jsxs("div",{className:"px-4 py-3 rounded-lg text-sm mb-6 flex items-center gap-2 border",style:{backgroundColor:"rgba(220, 38, 38, 0.1)",borderColor:"rgba(220, 38, 38, 0.3)",color:"#ef4444"},children:[jsxRuntimeExports.jsx("span",{style:{color:"#dc2626"},children:"⚠️"}),jsxRuntimeExports.jsx("span",{style:{color:"#ef4444"},children:We})]}),Ge&&jsxRuntimeExports.jsxs("div",{className:"px-4 py-3 rounded-lg text-sm mb-6 flex items-center gap-2 border",style:{backgroundColor:"rgba(34, 197, 94, 0.1)",borderColor:"rgba(34, 197, 94, 0.3)",color:"#22c55e"},children:[jsxRuntimeExports.jsx("span",{style:{color:"#16a34a"},children:"✅"}),jsxRuntimeExports.jsx("span",{style:{color:"#22c55e"},children:Ge})]}),jsxRuntimeExports.jsx("form",{onSubmit:r?un:bn,className:"space-y-4",children:r?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Mail,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:Be.email,onChange:mn,className:"w-full bg-gray-800/50 border border-gray-700 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 px-10 py-3 rounded-lg text-white placeholder-gray-400 transition-all duration-200 outline-none",placeholder:"Enter your email address",required:!0})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:Je,className:"w-full bg-gradient-to-r from-purple-600 to-purple-500 hover:from-purple-700 hover:to-purple-600 text-white py-3 rounded-lg font-semibold transition-all duration-200 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:Je?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Sending Reset Email..."]}):"Send Reset Email"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[e&&jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(User,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),jsxRuntimeExports.jsx("input",{type:"text",name:"fullName",value:Be.fullName,onChange:mn,className:"w-full bg-gray-800/50 border border-gray-700 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 px-10 py-3 rounded-lg text-white placeholder-gray-400 transition-all duration-200 outline-none",placeholder:"Full Name",required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Mail,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),jsxRuntimeExports.jsx("input",{type:"email",name:"email",value:Be.email,onChange:mn,className:"w-full bg-gray-800/50 border border-gray-700 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 px-10 py-3 rounded-lg text-white placeholder-gray-400 transition-all duration-200 outline-none",placeholder:"Email Address",required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Lock,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),jsxRuntimeExports.jsx("input",{type:Te?"text":"password",name:"password",value:Be.password,onChange:mn,className:"w-full bg-gray-800/50 border border-gray-700 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 px-10 pr-12 py-3 rounded-lg text-white placeholder-gray-400 transition-all duration-200 outline-none",placeholder:"Password",required:!0}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Re(!Te),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-300 transition-colors",children:Te?jsxRuntimeExports.jsx(EyeOff,{className:"w-5 h-5"}):jsxRuntimeExports.jsx(Eye,{className:"w-5 h-5"})})]}),e&&jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Lock,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),jsxRuntimeExports.jsx("input",{type:Me?"text":"password",name:"confirmPassword",value:Be.confirmPassword,onChange:mn,className:"w-full bg-gray-800/50 border border-gray-700 focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 px-10 pr-12 py-3 rounded-lg text-white placeholder-gray-400 transition-all duration-200 outline-none",placeholder:"Confirm Password",required:!0}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>Ve(!Me),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-300 transition-colors",children:Me?jsxRuntimeExports.jsx(EyeOff,{className:"w-5 h-5"}):jsxRuntimeExports.jsx(Eye,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:Je,className:"w-full bg-gradient-to-r from-purple-600 to-purple-500 hover:from-purple-700 hover:to-purple-600 text-white py-3 rounded-lg font-semibold transition-all duration-200 transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:Je?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Processing..."]}):e?"Create Account":"Sign In"})]})}),jsxRuntimeExports.jsx("div",{className:"text-center pt-6 border-t border-gray-700/50 space-y-3",children:r?jsxRuntimeExports.jsxs("button",{onClick:()=>{Ee(!1),gn()},className:"flex items-center justify-center gap-2 text-purple-400 font-semibold hover:text-purple-300 transition-colors hover:underline mx-auto",children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"w-4 h-4"}),"Back to Sign In"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!e&&jsxRuntimeExports.jsx("button",{onClick:()=>{Ee(!0),gn()},className:"text-purple-400 font-semibold hover:text-purple-300 transition-colors hover:underline text-sm",children:"Forgot Password?"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-400 text-sm",children:[e?"Already have an account?":"New to EDGEx?"," ",jsxRuntimeExports.jsx("button",{onClick:()=>{t(!e),gn()},className:"text-purple-400 font-semibold hover:text-purple-300 transition-colors hover:underline",children:e?"Sign In":"Create Account"})]})]})})]})]})})};function ChatInput$2({onSend:n,disabled:e}){const[t,r]=reactExports.useState(""),[Ee,Te]=reactExports.useState(!1),Re=reactExports.useRef(null),Me=()=>{const De=t.trim();!De||e||(n?.(De),r(""))},Ve=De=>{(De.key==="Enter"||De.code==="Enter")&&!De.shiftKey&&!Ee&&(De.preventDefault(),Me())};return reactExports.useEffect(()=>{const De=Re.current;if(De){De.style.height="auto";const $e=De.scrollHeight;De.style.height=`${Math.min($e,200)}px`}},[t]),jsxRuntimeExports.jsxs("div",{className:"flex items-end gap-2 bg-white/90 dark:bg-purple-700 border border-gray-300 dark:border-purple-600 rounded-2xl px-4 py-2 shadow-xl backdrop-blur-lg",children:[jsxRuntimeExports.jsx("textarea",{ref:Re,value:t,onChange:De=>r(De.target.value),onKeyDown:Ve,onCompositionStart:()=>Te(!0),onCompositionEnd:()=>Te(!1),rows:1,placeholder:"💡 Tell me about your goals, hobbies, dreams...","aria-label":"Message",disabled:e,className:"flex-1 resize-none bg-transparent outline-none text-gray-800 dark:text-white placeholder:text-gray-500 dark:placeholder:text-purple-200"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:Me,disabled:e||!t.trim(),className:"p-2 rounded-full hover:scale-110 transition-all text-pink-600 dark:text-pink-300 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Send message",children:jsxRuntimeExports.jsx(SendHorizontal,{className:"w-5 h-5"})})]})}const extractMemory=n=>{const e=n.match(/(?:I am|My name is)\s+(\w+)/i)?.[1],t=n.match(/(?:I like|enjoy|love)\s+(.+?)(?=[.,]|$)/i)?.[1],r=n.match(/(?:want to be(?:come)?|dream of being)\s+(.+?)(?=[.,]|$)/i)?.[1];return{name:e||"friend",favSubject:t||"design",goal:r||"a designer"}};function CareerCrack({user:n}){const[e,t]=reactExports.useState([]),[r,Ee]=reactExports.useState(null),[Te,Re]=reactExports.useState([]),[Me,Ve]=reactExports.useState(null),[De,$e]=reactExports.useState(!1),[Oe,Ce]=reactExports.useState(!0),[Be,Ue]=reactExports.useState(!1),We=reactExports.useRef(null),[He,Ge]=reactExports.useState(!1);reactExports.useEffect(()=>{We.current?.scrollIntoView({behavior:"smooth"})},[e]),reactExports.useEffect(()=>{n?(Ee(n.uid),Ye(n.uid),yn(n.uid),Ge(!1)):(Ee(null),t([]),Re([]),Ge(!0))},[n]);const Ye=async gn=>{const xn=doc(db,"memory",gn),En=await getDoc(xn);if(En.exists()){const{name:Pn,favSubject:Ln,goal:Cn}=En.data();t([{role:"ai",text:`👋 Welcome back, ${Pn}! I remember you like ${Ln} and dream of becoming ${Cn}.`}])}else t([])},Je=async gn=>{const xn=extractMemory(gn);r&&await setDoc(doc(db,"memory",r),xn)},Ze=async gn=>{if(!r)return;const xn=gn.find(Pn=>Pn.role==="user")?.text||"Untitled",En=await addDoc(collection(db,"chats",r,"history"),{title:xn.slice(0,25),messages:gn,createdAt:serverTimestamp()});Ve(En.id)},fn=async gn=>{if(!gn.trim()||!r)return;Ue(!0);const xn={role:"user",text:gn},En={role:"ai",text:"__typing__"},Pn=[...e,xn,En];t(Pn);const Ln=`
      You are CareerCrack, an intelligent, empathetic, and professional career guidance assistant designed to help students explore career options, make informed decisions, and plan their academic and professional journeys.

      Your Role & Goals:
        - Act as a career counselor for students.
        - Provide guidance, resources, and advice about career paths, higher education, skill development, internships, and job opportunities.
        - Adapt responses based on the student’s background, interests, and goals.
        - Help students understand emerging industries, skill demands, and educational pathways.
        - Stay encouraging, supportive, and non-judgmental in tone.

      What You Can Do
      1. Career Exploration
        - Suggest career paths based on student’s interests, strengths, and aspirations.
        - Explain roles in different industries (engineering, medicine, arts, business, IT, AI/ML, design, etc.).
        - Provide information on future career trends.

      2. Academic Guidance
        - Recommend suitable courses, degrees, and certifications.
        - Explain differences between educational streams (STEM, humanities, commerce, vocational, etc.).
        - Advise on standardized tests, entrance exams, and scholarships.

      3. Skill Development
        - Suggest relevant technical and soft skills.
        - Recommend online learning resources (Coursera, edX, Udemy, free resources, etc.).
        - Provide project or portfolio-building ideas.

      4. Professional Growth
        - Guidance on internships, resume building, networking, LinkedIn usage.
        - Explain workplace skills (communication, teamwork, adaptability).
        - Share strategies for career transitions.

      5. Decision-Making Support
        - Help students compare multiple career options with pros/cons.
        - Provide step-by-step pathways (short-term and long-term).
        - Encourage self-reflection and informed choices rather than giving absolute answers.

      What You Should Avoid
        - Do not write or debug programming code (your role is guidance, not coding).
        - Do not provide medical, financial, or legal advice.
        - Do not guarantee job placement, exam success, or admission results.
        - Do not share misinformation—if unsure, clarify or encourage further research.
        - Avoid being dismissive, negative, or judgmental.

      Interaction Style
        - Use simple, student-friendly language (avoid jargon unless explained).
        - Be empathetic and motivational: acknowledge the student’s concerns and encourage them.
        - Provide step-by-step explanations when guiding.
        - Suggest actionable next steps (e.g., “You could start by taking an online course in Python” rather than vague advice).

      Extras
        - Maintain a friendly tone.
        - Always stick to your scope of replies, i.e, DO NOT reply to any other queries except those regarding career guidance. You don't have to be helpful for non relevant queries. Just reject the user and ask them to ask valid questions which are related to your field of expertise. You don't need to provide any tips too. Just say that you can't reply to that query and stop.
        - You should NEVER write code at any cost.
        - You shouldn't provide any guidance regarding coding queries
        - You should NOT reply to any queries which are not related to career guidance. (for example, asking questions related to a code.)

      EXAMPLES
      <RELEVANT REQUESTS>
      1. Student: I want to get into Data Science. Where should I start?
        - Chatbot: That’s an exciting field! 🚀 A step-by-step path would be:
        - Math & Stats – Brush up on probability, linear algebra, and statistics.
        - Programming – Start with Python (most beginner-friendly).
        - Data Handling – Learn Pandas, NumPy, and SQL for data analysis.
        - Visualization – Tools like Matplotlib, Seaborn, or Tableau.
        - Machine Learning Basics – Understand regression, classification, clustering.

        Free resources you could check:
        - Kaggle (hands-on datasets & competitions)
        - Coursera: Data Science Specialization
        - YouTube: Krish Naik, Data School

        Would you like me to suggest a 3-month learning plan to kickstart your journey?

      2. Student: I’m in Class 11 and I really like biology, but I’m not sure if I should go for medicine.
        - Chatbot: That’s great! Enjoying biology opens up many possibilities beyond medicine. 😊
        - If you like research, you could explore biotechnology, genetics, or bioinformatics.
        - If you enjoy helping people directly, medicine, nursing, or physiotherapy could be a fit.
        - If you’re curious about environment & sustainability, fields like environmental biology or agricultural sciences are options.
        - Would you like me to give you a roadmap for medical vs. non-medical biology careers so you can compare them clearly?

      <IRRELEVANT REQUESTS>
      3. Student: Can you write me a C++ program for factorial?
        - Chatbot: I’m not here to write code for you—but if you’re interested in programming, that’s a great career skill!
        - Would you like me to guide you on how to start with C++ and the kinds of careers (like Software Engineering, Game Development, AI) where it’s really useful?

      4. Student: Can you tell me how to win in Valorant?
        - Chatbot: Haha, sounds fun! But I focus only on career and academic guidance.
        - If you’re passionate about gaming, though, I can show you career options in Game Design, Esports, and Game Development. Do you want me to share those?

      5. Student: Bro, I don’t know how to talk to my girlfriend. Can you give me tips?
        - Chatbot: Relationships are very personal, and I might not be the best fit to guide you there.
        - But if you’re asking because you’re worried about balancing personal life with studies and career, I can definitely help you with time management and stress balance strategies. Want me to suggest some techniques?
    `;try{let Cn="";Oe?Cn=(await axios.post("https://edgex-backend.onrender.com/groq",{model:"llama3-8b-8192",messages:[{role:"system",content:Ln},{role:"user",content:gn}],temperature:.7})).data.choices[0].message.content:Cn=(await axios.post("http://127.0.0.1:5000/ask",{prompt:gn})).data.response,await Je(gn);const Dn=[...Pn.slice(0,-1),{role:"ai",text:Cn}];t(Dn),await Ze(Dn)}catch(Cn){console.error("AI error:",Cn),t(Dn=>[...Dn.slice(0,-1),{role:"ai",text:"⚠️ Something went wrong. Try again!"}])}finally{Ue(!1)}},yn=gn=>{const xn=query(collection(db,"chats",gn,"history"),orderBy("createdAt","desc"));onSnapshot(xn,En=>{const Pn=En.docs.map(Ln=>({id:Ln.id,...Ln.data()}));Re(Pn)})},mn=async(gn,xn)=>{const En=doc(db,"chats",r,"history",gn);await updateDoc(En,{title:xn})},pn=gn=>{const xn=Te.find(En=>En.id===gn);xn&&(t(xn.messages||[]),Ve(gn))},un=(gn,xn,En,Pn,Ln,Cn,Dn,Un)=>{if(!xn||xn.length===0)return;if(!En||En.length!==xn.length){console.error("Chart data and labels must have the same length");return}Un<=0&&(Un=Math.max(...xn,1));const Wn=Cn/xn.length*.6,On=Cn/xn.length*.4;gn.setFillColor("#7E57C2"),gn.setDrawColor("#5E35B1"),gn.setLineWidth(.8),xn.forEach(($n,kn)=>{const In=$n/Un*Dn,Kn=Pn+kn*(Wn+On),Qn=Ln+Dn-In;gn.roundedRect(Kn,Qn,Wn,In,3,3,"F"),gn.setFontSize(9),gn.setTextColor("#333");const rr=gn.getTextWidth(En[kn]);gn.text(En[kn],Kn+Wn/2-rr/2,Ln+Dn+12)}),gn.setDrawColor("#AAA"),gn.rect(Pn,Ln,Cn,Dn)},bn=async(gn,xn,En)=>{try{const Pn=xn||{name:"friend",favSubject:"design",goal:"designer"},{recommendedCareers:Ln=["Software Engineer","Designer"],keySkills:Cn=["Problem Solving","Collaboration"],nextSteps:Dn=["Take online course","Build projects"],skillFitScores:Un=[80,65,90],skillFitLabels:Wn=["Coding","Communication","Creativity"]}=En||{},On=new E({unit:"pt",format:"a4",orientation:"portrait"}),$n=On.internal.pageSize.getWidth();On.setFillColor("#7E57C2"),On.rect(0,0,$n,60,"F"),On.setFont("helvetica","bold"),On.setFontSize(24),On.setTextColor("#FFFFFF"),On.text("Your Career Report",40,40),On.setFontSize(12),On.setFont("helvetica","normal"),On.text("powered by Edgex",40,55);let kn=90;On.setFillColor("#F3E5F5"),On.roundedRect(40,kn-20,$n-80,80,10,10,"F"),On.setTextColor("#4A148C"),On.setFont("helvetica","bold"),On.setFontSize(16),On.text("User Information",50,kn),On.setFont("helvetica","normal"),On.setFontSize(12),On.setTextColor("#333333"),On.text(`Name: ${Pn.name}`,50,kn+30),On.text(`Dream Career: ${Pn.goal}`,50,kn+50),On.text(`Favorite Subject: ${Pn.favSubject}`,280,kn+30),kn+=100,On.setFont("helvetica","bold"),On.setFontSize(16),On.setTextColor("#5E35B1"),On.text("AI Suggestions",40,kn),kn+=10;const In={startY:kn,margin:{left:40,right:40},headStyles:{fillColor:"#CE93D8",textColor:"#4A148C",fontStyle:"bold"},styles:{fontSize:11,cellPadding:6}};autoTable(On,{...In,head:[["Recommended Career Fields"]],body:Ln.map(or=>[or])}),kn=On.lastAutoTable.finalY+15,autoTable(On,{...In,startY:kn,head:[["Key Skills to Learn"]],body:Cn.map(or=>[or])}),kn=On.lastAutoTable.finalY+15,autoTable(On,{...In,startY:kn,head:[["Actionable Next Steps"]],body:Dn.map(or=>[or])}),kn=On.lastAutoTable.finalY+40,On.setFontSize(14),On.setFont("helvetica","bold"),On.setTextColor("#5E35B1"),On.text("Skill Fit Overview",40,kn-10);const Kn=$n-80,Qn=100,rr=Math.max(...Un,100);un(On,Un,Wn,40,kn,Kn,Qn,rr),On.setFontSize(10),On.setTextColor("#888888"),On.text("Dream big! - Team Edgex",40,780),On.save("Career_Report.pdf")}catch(Pn){console.error("Failed to generate PDF:",Pn),alert("Failed to generate PDF. Please try again.")}};return jsxRuntimeExports.jsxs("div",{className:`${De?"dark":""}`,children:[He&&jsxRuntimeExports.jsx(LoginModal$1,{onClose:()=>Ge(!1)}),jsxRuntimeExports.jsxs("div",{className:"flex min-h-screen bg-gradient-to-br from-[#ffe0ec] via-[#f8bbd0] to-[#f3d1f4] dark:from-[#2a004f] dark:via-[#3c1361] dark:to-[#1b0032] text-gray-900 dark:text-white font-[Poppins] transition-all duration-500 ease-in-out",children:[jsxRuntimeExports.jsxs("div",{className:"w-64 bg-white/60 dark:bg-[#30104d]/60 backdrop-blur-xl border-r border-white/20 p-4 space-y-4 shadow-xl rounded-tr-3xl rounded-br-3xl transition-all duration-500",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold",children:"💬 Your Chats"}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2",children:jsxRuntimeExports.jsx("button",{onClick:()=>$e(!De),className:"p-1 rounded-full hover:bg-white/20 transition-all",children:De?jsxRuntimeExports.jsx(Sun,{className:"w-5 h-5"}):jsxRuntimeExports.jsx(Moon,{className:"w-5 h-5"})})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-gradient-to-r from-pink-100 to-purple-200 dark:from-purple-800 dark:to-fuchsia-900 rounded-xl",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-bold text-gray-800 dark:text-white",children:"🧠 AI Mode"}),jsxRuntimeExports.jsx("button",{onClick:()=>Ce(!Oe),className:"text-xs bg-white/70 dark:bg-purple-700 px-3 py-1 rounded-full font-bold hover:bg-white dark:hover:bg-purple-600 transition shadow",children:Oe?"🌐 Groq":"💻 Local"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{t([]),Ve(null)},className:"flex items-center gap-2 text-sm bg-gradient-to-r from-pink-500 via-fuchsia-500 to-purple-500 text-white w-full py-2 px-3 rounded-full hover:scale-105 shadow-xl transition-all duration-300",children:[jsxRuntimeExports.jsx(CirclePlus,{size:16})," New Chat"]}),Te.map(gn=>jsxRuntimeExports.jsxs("div",{className:`p-2 rounded-xl cursor-pointer hover:scale-[1.02] hover:bg-white/40 dark:hover:bg-purple-800 transition-all shadow-sm ${Me===gn.id?"bg-white/50 dark:bg-purple-700":""}`,onClick:()=>pn(gn.id),children:[jsxRuntimeExports.jsx("input",{className:"bg-transparent font-medium text-sm w-full",defaultValue:gn.title,onBlur:xn=>mn(gn.id,xn.target.value)}),gn.createdAt?.seconds&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:["🕒 ",new Date(gn.createdAt.seconds*1e3).toLocaleString()]})]},gn.id))]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 p-6 animate-fade-in",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center mb-6",children:jsxRuntimeExports.jsx("h1",{className:"text-4xl font-extrabold bg-gradient-to-r from-purple-600 via-pink-500 to-fuchsia-500 bg-clip-text text-transparent drop-shadow-lg",children:"CareerCrack"})}),jsxRuntimeExports.jsxs("div",{className:"h-96 overflow-y-auto space-y-4 p-4 bg-white/70 dark:bg-[#2a004f]/60 backdrop-blur-xl rounded-3xl border border-white/30 shadow-2xl animate-slide-in-up transition-all",children:[e.map((gn,xn)=>jsxRuntimeExports.jsx(ChatBubble,{role:gn.role,text:gn.text},xn)),jsxRuntimeExports.jsx("div",{ref:We})]}),jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx(ChatInput$2,{onSend:fn,disabled:Be})}),jsxRuntimeExports.jsxs("button",{onClick:bn,className:"mt-6 flex items-center gap-2 bg-gradient-to-r from-pink-500 via-fuchsia-500 to-purple-600 text-white px-5 py-3 rounded-full shadow-lg hover:scale-105 hover:shadow-xl transition-all duration-300",children:["📄 Export Chat",jsxRuntimeExports.jsx("span",{className:"text-xs font-semibold bg-white/20 px-2 py-1 rounded-full",children:"PDF"})]})]})]})]})}function ChatInput$1({onSend:n,disabled:e}){const[t,r]=reactExports.useState(""),[Ee,Te]=reactExports.useState(!1),Re=()=>{const Ve=t.trim();!Ve||e||(n?.(Ve),r(""))},Me=Ve=>{(Ve.key==="Enter"||Ve.code==="Enter")&&!Ve.shiftKey&&!Ee&&(Ve.preventDefault(),Re())};return jsxRuntimeExports.jsxs("div",{className:"flex items-end gap-2",children:[jsxRuntimeExports.jsx("textarea",{value:t,onChange:Ve=>r(Ve.target.value),onKeyDown:Me,onCompositionStart:()=>Te(!0),onCompositionEnd:()=>Te(!1),rows:1,placeholder:"Type a message…","aria-label":"Message",className:"flex-1 resize-none rounded-xl border p-3 outline-none"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:Re,disabled:e||!t.trim(),className:"rounded-xl px-4 py-2 border","aria-label":"Send message",children:"Send"})]})}const LoginModal=({onLogin:n})=>{const[e,t]=reactExports.useState(""),[r,Ee]=reactExports.useState(""),[Te,Re]=reactExports.useState(""),[Me,Ve]=reactExports.useState("login"),De=async $e=>{$e.preventDefault(),Re("");try{let Oe;Me==="signup"?Oe=await createUserWithEmailAndPassword(auth,e,r):Oe=await signInWithEmailAndPassword(auth,e,r),n(Oe.user.uid)}catch(Oe){const Ce=Oe.code;Re(Ce==="auth/email-already-in-use"?"⚠️ Email already registered. Try logging in.":Ce==="auth/invalid-email"?"⚠️ Invalid email address.":Ce==="auth/weak-password"?"⚠️ Password too weak. Use at least 6 characters.":Ce==="auth/user-not-found"||Ce==="auth/wrong-password"?"❌ Invalid email or password.":"⚠️ Something went wrong. Try again.")}};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white dark:bg-gray-900 p-6 rounded-xl shadow-md w-full max-w-md space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-center text-gray-800 dark:text-white",children:Me==="signup"?"📝 Create Account":"🔐 Login to MoodMirror"}),Te&&jsxRuntimeExports.jsx("p",{className:"text-red-600 text-sm text-center",children:Te}),jsxRuntimeExports.jsxs("form",{onSubmit:De,className:"space-y-3",children:[jsxRuntimeExports.jsx("input",{type:"email",placeholder:"Email",className:"w-full border px-3 py-2 rounded-lg",value:e,onChange:$e=>t($e.target.value),required:!0}),jsxRuntimeExports.jsx("input",{type:"password",placeholder:"Password",className:"w-full border px-3 py-2 rounded-lg",value:r,onChange:$e=>Ee($e.target.value),required:!0}),jsxRuntimeExports.jsx("button",{type:"submit",className:"w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 transition",children:Me==="signup"?"Create Account":"Login"})]}),jsxRuntimeExports.jsxs("p",{className:"text-center text-sm",children:[Me==="signup"?"Already have an account?":"New here?"," ",jsxRuntimeExports.jsx("button",{onClick:()=>Ve(Me==="signup"?"login":"signup"),className:"text-indigo-600 hover:underline",children:Me==="signup"?"Login":"Sign Up"})]})]})})};function MoodMirror(){const[n,e]=reactExports.useState([]),[t,r]=reactExports.useState(null),[Ee,Te]=reactExports.useState([]),[Re,Me]=reactExports.useState(null),[Ve,De]=reactExports.useState(!1),$e=reactExports.useRef(null);reactExports.useEffect(()=>{$e.current?.scrollIntoView({behavior:"smooth"})},[n]),reactExports.useEffect(()=>{const Ge=onAuthStateChanged(auth,Ye=>{Ye&&(r(Ye.uid),Be(Ye.uid))});return()=>Ge()},[]),reactExports.useEffect(()=>{document.documentElement.classList.toggle("dark",Ve)},[Ve]);const Oe=async Ge=>{if(!Ge.trim())return;const Ye={role:"user",text:Ge},Je={role:"ai",text:"__typing__"},Ze=[...n,Ye,Je];e(Ze);try{const yn=(await axios.post("https://edgex-backend.onrender.com/groq",{model:"llama3-8b-8192",messages:[{role:"system",content:"You are MoodMirror by Mindmorph, a friendly Gen Z AI big sibling who reads chats and gives brutally honest but warm analysis of relationships: flirt, rizz, friendzone, manipulation, or overthinking. End with real advice."},{role:"user",content:Ge}],temperature:.75})).data.choices[0].message.content,mn=[...Ze.slice(0,-1),{role:"ai",text:yn}];e(mn),await Ce(mn)}catch(fn){console.error("Groq error:",fn),e(yn=>[...yn.slice(0,-1),{role:"ai",text:"⚠️ Something went wrong. Try again!"}])}},Ce=async Ge=>{if(t)if(Re){const Ye=doc(db,"moodmirror",t,"history",Re);await updateDoc(Ye,{messages:Ge})}else{const Ye=Ge.find(Ze=>Ze.role==="user")?.text||"Untitled",Je=await addDoc(collection(db,"moodmirror",t,"history"),{title:Ye.slice(0,25),messages:Ge,createdAt:serverTimestamp()});Me(Je.id)}},Be=Ge=>{const Ye=query(collection(db,"moodmirror",Ge,"history"),orderBy("createdAt","desc"));onSnapshot(Ye,Je=>{const Ze=Je.docs.map(fn=>({id:fn.id,...fn.data()}));Te(Ze)})},Ue=async(Ge,Ye)=>{const Je=doc(db,"moodmirror",t,"history",Ge);await updateDoc(Je,{title:Ye})},We=Ge=>{const Ye=Ee.find(Je=>Je.id===Ge);Ye&&(e(Ye.messages||[]),Me(Ge))},He=()=>{const Ge=new E;let Ye=10;n.forEach(({role:Je,text:Ze})=>{const fn=Je==="user"?"🧍 You:":"🫀 MoodMirror:";Ge.splitTextToSize(`${fn} ${Ze}`,180).forEach(mn=>{Ye>280&&(Ge.addPage(),Ye=10),Ge.text(mn,10,Ye),Ye+=8}),Ye+=4}),Ge.save("MoodMirror_Chat.pdf")};return t?jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row min-h-screen bg-gradient-to-br from-blue-100 via-indigo-100 to-purple-50 dark:from-[#0f1b2e] dark:via-[#1c1a40] dark:to-[#1a0e2e] font-[Poppins] text-gray-900 dark:text-gray-100 transition-all duration-500 ease-in-out",children:[jsxRuntimeExports.jsxs("div",{className:"w-full md:w-64 bg-white/40 dark:bg-white/5 backdrop-blur-md border-r border-white/20 p-4 space-y-4 shadow-md",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-extrabold bg-gradient-to-r from-indigo-600 via-purple-500 to-blue-400 bg-clip-text text-transparent dark:from-indigo-300 dark:via-purple-300 dark:to-blue-200",children:"MoodMirror"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{e([]),Me(null)},title:"New Chat",className:"text-indigo-600 dark:text-purple-300 hover:text-purple-700 dark:hover:text-blue-200 transition",children:jsxRuntimeExports.jsx(CirclePlus,{size:20})}),jsxRuntimeExports.jsx("button",{onClick:()=>De(!Ve),title:"Toggle Dark Mode",className:"text-indigo-600 dark:text-purple-300 hover:text-purple-700 dark:hover:text-blue-200 transition",children:Ve?jsxRuntimeExports.jsx(Sun,{size:20}):jsxRuntimeExports.jsx(Moon,{size:20})})]})]}),Ee.map(Ge=>jsxRuntimeExports.jsxs("div",{className:`p-2 rounded-md cursor-pointer hover:bg-white/40 dark:hover:bg-white/10 transition ${Re===Ge.id?"bg-white/60 dark:bg-white/10":""}`,onClick:()=>We(Ge.id),children:[jsxRuntimeExports.jsx("input",{className:"bg-transparent font-medium text-sm w-full dark:text-white focus:outline-none",defaultValue:Ge.title,onBlur:Ye=>Ue(Ge.id,Ye.target.value)}),Ge.createdAt?.seconds&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:["🕒 ",new Date(Ge.createdAt.seconds*1e3).toLocaleString()]})]},Ge.id))]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 p-4 md:p-6",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-extrabold text-center mb-6 bg-gradient-to-r from-indigo-600 via-purple-500 to-blue-400 bg-clip-text text-transparent dark:from-indigo-300 dark:via-purple-300 dark:to-blue-200",children:"MoodMirror: Decode the Vibe"}),jsxRuntimeExports.jsxs("div",{className:"h-[65vh] overflow-y-auto space-y-4 p-4 bg-white/60 dark:bg-white/5 rounded-2xl border border-white/20 shadow-inner backdrop-blur-md",children:[n.map((Ge,Ye)=>jsxRuntimeExports.jsx(ChatBubble,{role:Ge.role,text:Ge.text},Ye)),jsxRuntimeExports.jsx("div",{ref:$e})]}),jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx(ChatInput$1,{onSend:Oe})}),jsxRuntimeExports.jsxs("button",{onClick:He,className:"mt-6 flex items-center gap-2 bg-gradient-to-r from-indigo-600 via-purple-500 to-blue-400 text-white px-4 py-2 rounded-full shadow-xl hover:scale-105 hover:shadow-2xl transition-all duration-300",children:["📄 Export Chat",jsxRuntimeExports.jsx("span",{className:"text-xs font-semibold bg-white/20 px-2 py-1 rounded-full",children:"PDF"})]})]})]}):jsxRuntimeExports.jsx(LoginModal,{onLogin:Ge=>r(Ge)})}function ok$1(){}function unreachable(){}function stringify$1(n,e){const t={};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const nameRe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,nameReJsx=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,emptyOptions$2={};function name$1(n,e){return(emptyOptions$2.jsx?nameReJsx:nameRe).test(n)}const re=/[ \t\n\f\r]/g;function whitespace(n){return typeof n=="object"?n.type==="text"?empty$1(n.value):!1:empty$1(n)}function empty$1(n){return n.replace(re,"")===""}class Schema{constructor(e,t,r){this.normal=t,this.property=e,r&&(this.space=r)}}Schema.prototype.normal={};Schema.prototype.property={};Schema.prototype.space=void 0;function merge(n,e){const t={},r={};for(const Ee of n)Object.assign(t,Ee.property),Object.assign(r,Ee.normal);return new Schema(t,r,e)}function normalize$1(n){return n.toLowerCase()}class Info{constructor(e,t){this.attribute=t,this.property=e}}Info.prototype.attribute="";Info.prototype.booleanish=!1;Info.prototype.boolean=!1;Info.prototype.commaOrSpaceSeparated=!1;Info.prototype.commaSeparated=!1;Info.prototype.defined=!1;Info.prototype.mustUseProperty=!1;Info.prototype.number=!1;Info.prototype.overloadedBoolean=!1;Info.prototype.property="";Info.prototype.spaceSeparated=!1;Info.prototype.space=void 0;let powers=0;const boolean=increment(),booleanish=increment(),overloadedBoolean=increment(),number=increment(),spaceSeparated=increment(),commaSeparated=increment(),commaOrSpaceSeparated=increment();function increment(){return 2**++powers}const types=Object.freeze(Object.defineProperty({__proto__:null,boolean,booleanish,commaOrSpaceSeparated,commaSeparated,number,overloadedBoolean,spaceSeparated},Symbol.toStringTag,{value:"Module"})),checks=Object.keys(types);class DefinedInfo extends Info{constructor(e,t,r,Ee){let Te=-1;if(super(e,t),mark(this,"space",Ee),typeof r=="number")for(;++Te<checks.length;){const Re=checks[Te];mark(this,checks[Te],(r&types[Re])===types[Re])}}}DefinedInfo.prototype.defined=!0;function mark(n,e,t){t&&(n[e]=t)}function create(n){const e={},t={};for(const[r,Ee]of Object.entries(n.properties)){const Te=new DefinedInfo(r,n.transform(n.attributes||{},r),Ee,n.space);n.mustUseProperty&&n.mustUseProperty.includes(r)&&(Te.mustUseProperty=!0),e[r]=Te,t[normalize$1(r)]=r,t[normalize$1(Te.attribute)]=r}return new Schema(e,t,n.space)}const aria=create({properties:{ariaActiveDescendant:null,ariaAtomic:booleanish,ariaAutoComplete:null,ariaBusy:booleanish,ariaChecked:booleanish,ariaColCount:number,ariaColIndex:number,ariaColSpan:number,ariaControls:spaceSeparated,ariaCurrent:null,ariaDescribedBy:spaceSeparated,ariaDetails:null,ariaDisabled:booleanish,ariaDropEffect:spaceSeparated,ariaErrorMessage:null,ariaExpanded:booleanish,ariaFlowTo:spaceSeparated,ariaGrabbed:booleanish,ariaHasPopup:null,ariaHidden:booleanish,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:spaceSeparated,ariaLevel:number,ariaLive:null,ariaModal:booleanish,ariaMultiLine:booleanish,ariaMultiSelectable:booleanish,ariaOrientation:null,ariaOwns:spaceSeparated,ariaPlaceholder:null,ariaPosInSet:number,ariaPressed:booleanish,ariaReadOnly:booleanish,ariaRelevant:null,ariaRequired:booleanish,ariaRoleDescription:spaceSeparated,ariaRowCount:number,ariaRowIndex:number,ariaRowSpan:number,ariaSelected:booleanish,ariaSetSize:number,ariaSort:null,ariaValueMax:number,ariaValueMin:number,ariaValueNow:number,ariaValueText:null,role:null},transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function caseSensitiveTransform(n,e){return e in n?n[e]:e}function caseInsensitiveTransform(n,e){return caseSensitiveTransform(n,e.toLowerCase())}const html$2=create({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:commaSeparated,acceptCharset:spaceSeparated,accessKey:spaceSeparated,action:null,allow:null,allowFullScreen:boolean,allowPaymentRequest:boolean,allowUserMedia:boolean,alt:null,as:null,async:boolean,autoCapitalize:null,autoComplete:spaceSeparated,autoFocus:boolean,autoPlay:boolean,blocking:spaceSeparated,capture:null,charSet:null,checked:boolean,cite:null,className:spaceSeparated,cols:number,colSpan:null,content:null,contentEditable:booleanish,controls:boolean,controlsList:spaceSeparated,coords:number|commaSeparated,crossOrigin:null,data:null,dateTime:null,decoding:null,default:boolean,defer:boolean,dir:null,dirName:null,disabled:boolean,download:overloadedBoolean,draggable:booleanish,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:boolean,formTarget:null,headers:spaceSeparated,height:number,hidden:overloadedBoolean,high:number,href:null,hrefLang:null,htmlFor:spaceSeparated,httpEquiv:spaceSeparated,id:null,imageSizes:null,imageSrcSet:null,inert:boolean,inputMode:null,integrity:null,is:null,isMap:boolean,itemId:null,itemProp:spaceSeparated,itemRef:spaceSeparated,itemScope:boolean,itemType:spaceSeparated,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:boolean,low:number,manifest:null,max:null,maxLength:number,media:null,method:null,min:null,minLength:number,multiple:boolean,muted:boolean,name:null,nonce:null,noModule:boolean,noValidate:boolean,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:boolean,optimum:number,pattern:null,ping:spaceSeparated,placeholder:null,playsInline:boolean,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:boolean,referrerPolicy:null,rel:spaceSeparated,required:boolean,reversed:boolean,rows:number,rowSpan:number,sandbox:spaceSeparated,scope:null,scoped:boolean,seamless:boolean,selected:boolean,shadowRootClonable:boolean,shadowRootDelegatesFocus:boolean,shadowRootMode:null,shape:null,size:number,sizes:null,slot:null,span:number,spellCheck:booleanish,src:null,srcDoc:null,srcLang:null,srcSet:null,start:number,step:null,style:null,tabIndex:number,target:null,title:null,translate:null,type:null,typeMustMatch:boolean,useMap:null,value:booleanish,width:number,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:spaceSeparated,axis:null,background:null,bgColor:null,border:number,borderColor:null,bottomMargin:number,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:boolean,declare:boolean,event:null,face:null,frame:null,frameBorder:null,hSpace:number,leftMargin:number,link:null,longDesc:null,lowSrc:null,marginHeight:number,marginWidth:number,noResize:boolean,noHref:boolean,noShade:boolean,noWrap:boolean,object:null,profile:null,prompt:null,rev:null,rightMargin:number,rules:null,scheme:null,scrolling:booleanish,standby:null,summary:null,text:null,topMargin:number,valueType:null,version:null,vAlign:null,vLink:null,vSpace:number,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:boolean,disableRemotePlayback:boolean,prefix:null,property:null,results:number,security:null,unselectable:null},space:"html",transform:caseInsensitiveTransform}),svg$1=create({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:commaOrSpaceSeparated,accentHeight:number,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:number,amplitude:number,arabicForm:null,ascent:number,attributeName:null,attributeType:null,azimuth:number,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:number,by:null,calcMode:null,capHeight:number,className:spaceSeparated,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:number,diffuseConstant:number,direction:null,display:null,dur:null,divisor:number,dominantBaseline:null,download:boolean,dx:null,dy:null,edgeMode:null,editable:null,elevation:number,enableBackground:null,end:null,event:null,exponent:number,externalResourcesRequired:null,fill:null,fillOpacity:number,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:commaSeparated,g2:commaSeparated,glyphName:commaSeparated,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:number,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:number,horizOriginX:number,horizOriginY:number,id:null,ideographic:number,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:number,k:number,k1:number,k2:number,k3:number,k4:number,kernelMatrix:commaOrSpaceSeparated,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:number,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:number,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:number,overlineThickness:number,paintOrder:null,panose1:null,path:null,pathLength:number,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:spaceSeparated,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:number,pointsAtY:number,pointsAtZ:number,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:commaOrSpaceSeparated,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:commaOrSpaceSeparated,rev:commaOrSpaceSeparated,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:commaOrSpaceSeparated,requiredFeatures:commaOrSpaceSeparated,requiredFonts:commaOrSpaceSeparated,requiredFormats:commaOrSpaceSeparated,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:number,specularExponent:number,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:number,strikethroughThickness:number,string:null,stroke:null,strokeDashArray:commaOrSpaceSeparated,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:number,strokeOpacity:number,strokeWidth:null,style:null,surfaceScale:number,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:commaOrSpaceSeparated,tabIndex:number,tableValues:null,target:null,targetX:number,targetY:number,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:commaOrSpaceSeparated,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:number,underlineThickness:number,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:number,values:null,vAlphabetic:number,vMathematical:number,vectorEffect:null,vHanging:number,vIdeographic:number,version:null,vertAdvY:number,vertOriginX:number,vertOriginY:number,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:number,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:caseSensitiveTransform}),xlink=create({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()}}),xmlns=create({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:caseInsensitiveTransform}),xml=create({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()}}),hastToReact={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},cap$1=/[A-Z]/g,dash=/-[a-z]/g,valid=/^data[-\w.:]+$/i;function find(n,e){const t=normalize$1(e);let r=e,Ee=Info;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&valid.test(e)){if(e.charAt(4)==="-"){const Te=e.slice(5).replace(dash,camelcase);r="data"+Te.charAt(0).toUpperCase()+Te.slice(1)}else{const Te=e.slice(4);if(!dash.test(Te)){let Re=Te.replace(cap$1,kebab);Re.charAt(0)!=="-"&&(Re="-"+Re),e="data"+Re}}Ee=DefinedInfo}return new Ee(r,e)}function kebab(n){return"-"+n.toLowerCase()}function camelcase(n){return n.charAt(1).toUpperCase()}const html$1=merge([aria,html$2,xlink,xmlns,xml],"html"),svg=merge([aria,svg$1,xlink,xmlns,xml],"svg");function stringify(n){return n.join(" ").trim()}var cjs$1={},inlineStyleParser,hasRequiredInlineStyleParser;function requireInlineStyleParser(){if(hasRequiredInlineStyleParser)return inlineStyleParser;hasRequiredInlineStyleParser=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,t=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Ee=/^:\s*/,Te=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Re=/^[;\s]*/,Me=/^\s+|\s+$/g,Ve=`
`,De="/",$e="*",Oe="",Ce="comment",Be="declaration";inlineStyleParser=function(We,He){if(typeof We!="string")throw new TypeError("First argument must be a string");if(!We)return[];He=He||{};var Ge=1,Ye=1;function Je(En){var Pn=En.match(e);Pn&&(Ge+=Pn.length);var Ln=En.lastIndexOf(Ve);Ye=~Ln?En.length-Ln:Ye+En.length}function Ze(){var En={line:Ge,column:Ye};return function(Pn){return Pn.position=new fn(En),pn(),Pn}}function fn(En){this.start=En,this.end={line:Ge,column:Ye},this.source=He.source}fn.prototype.content=We;function yn(En){var Pn=new Error(He.source+":"+Ge+":"+Ye+": "+En);if(Pn.reason=En,Pn.filename=He.source,Pn.line=Ge,Pn.column=Ye,Pn.source=We,!He.silent)throw Pn}function mn(En){var Pn=En.exec(We);if(Pn){var Ln=Pn[0];return Je(Ln),We=We.slice(Ln.length),Pn}}function pn(){mn(t)}function un(En){var Pn;for(En=En||[];Pn=bn();)Pn!==!1&&En.push(Pn);return En}function bn(){var En=Ze();if(!(De!=We.charAt(0)||$e!=We.charAt(1))){for(var Pn=2;Oe!=We.charAt(Pn)&&($e!=We.charAt(Pn)||De!=We.charAt(Pn+1));)++Pn;if(Pn+=2,Oe===We.charAt(Pn-1))return yn("End of comment missing");var Ln=We.slice(2,Pn-2);return Ye+=2,Je(Ln),We=We.slice(Pn),Ye+=2,En({type:Ce,comment:Ln})}}function gn(){var En=Ze(),Pn=mn(r);if(Pn){if(bn(),!mn(Ee))return yn("property missing ':'");var Ln=mn(Te),Cn=En({type:Be,property:Ue(Pn[0].replace(n,Oe)),value:Ln?Ue(Ln[0].replace(n,Oe)):Oe});return mn(Re),Cn}}function xn(){var En=[];un(En);for(var Pn;Pn=gn();)Pn!==!1&&(En.push(Pn),un(En));return En}return pn(),xn()};function Ue(We){return We?We.replace(Me,Oe):Oe}return inlineStyleParser}var hasRequiredCjs$1;function requireCjs$1(){if(hasRequiredCjs$1)return cjs$1;hasRequiredCjs$1=1;var n=cjs$1&&cjs$1.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(cjs$1,"__esModule",{value:!0}),cjs$1.default=t;var e=n(requireInlineStyleParser());function t(r,Ee){var Te=null;if(!r||typeof r!="string")return Te;var Re=(0,e.default)(r),Me=typeof Ee=="function";return Re.forEach(function(Ve){if(Ve.type==="declaration"){var De=Ve.property,$e=Ve.value;Me?Ee(De,$e,Ve):$e&&(Te=Te||{},Te[De]=$e)}}),Te}return cjs$1}var utilities={},hasRequiredUtilities;function requireUtilities(){if(hasRequiredUtilities)return utilities;hasRequiredUtilities=1,Object.defineProperty(utilities,"__esModule",{value:!0}),utilities.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,t=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,Ee=/^-(ms)-/,Te=function(De){return!De||t.test(De)||n.test(De)},Re=function(De,$e){return $e.toUpperCase()},Me=function(De,$e){return"".concat($e,"-")},Ve=function(De,$e){return $e===void 0&&($e={}),Te(De)?De:(De=De.toLowerCase(),$e.reactCompat?De=De.replace(Ee,Me):De=De.replace(r,Me),De.replace(e,Re))};return utilities.camelCase=Ve,utilities}var cjs,hasRequiredCjs;function requireCjs(){if(hasRequiredCjs)return cjs;hasRequiredCjs=1;var n=cjs&&cjs.__importDefault||function(Ee){return Ee&&Ee.__esModule?Ee:{default:Ee}},e=n(requireCjs$1()),t=requireUtilities();function r(Ee,Te){var Re={};return!Ee||typeof Ee!="string"||(0,e.default)(Ee,function(Me,Ve){Me&&Ve&&(Re[(0,t.camelCase)(Me,Te)]=Ve)}),Re}return r.default=r,cjs=r,cjs}var cjsExports=requireCjs();const styleToJs=getDefaultExportFromCjs(cjsExports),pointEnd=point$2("end"),pointStart=point$2("start");function point$2(n){return e;function e(t){const r=t&&t.position&&t.position[n]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function position$1(n){const e=pointStart(n),t=pointEnd(n);if(e&&t)return{start:e,end:t}}function stringifyPosition(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?position(n.position):"start"in n||"end"in n?position(n):"line"in n||"column"in n?point$1(n):""}function point$1(n){return index(n&&n.line)+":"+index(n&&n.column)}function position(n){return point$1(n&&n.start)+"-"+point$1(n&&n.end)}function index(n){return n&&typeof n=="number"?n:1}class VFileMessage extends Error{constructor(e,t,r){super(),typeof t=="string"&&(r=t,t=void 0);let Ee="",Te={},Re=!1;if(t&&("line"in t&&"column"in t?Te={place:t}:"start"in t&&"end"in t?Te={place:t}:"type"in t?Te={ancestors:[t],place:t.position}:Te={...t}),typeof e=="string"?Ee=e:!Te.cause&&e&&(Re=!0,Ee=e.message,Te.cause=e),!Te.ruleId&&!Te.source&&typeof r=="string"){const Ve=r.indexOf(":");Ve===-1?Te.ruleId=r:(Te.source=r.slice(0,Ve),Te.ruleId=r.slice(Ve+1))}if(!Te.place&&Te.ancestors&&Te.ancestors){const Ve=Te.ancestors[Te.ancestors.length-1];Ve&&(Te.place=Ve.position)}const Me=Te.place&&"start"in Te.place?Te.place.start:Te.place;this.ancestors=Te.ancestors||void 0,this.cause=Te.cause||void 0,this.column=Me?Me.column:void 0,this.fatal=void 0,this.file="",this.message=Ee,this.line=Me?Me.line:void 0,this.name=stringifyPosition(Te.place)||"1:1",this.place=Te.place||void 0,this.reason=this.message,this.ruleId=Te.ruleId||void 0,this.source=Te.source||void 0,this.stack=Re&&Te.cause&&typeof Te.cause.stack=="string"?Te.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}VFileMessage.prototype.file="";VFileMessage.prototype.name="";VFileMessage.prototype.reason="";VFileMessage.prototype.message="";VFileMessage.prototype.stack="";VFileMessage.prototype.column=void 0;VFileMessage.prototype.line=void 0;VFileMessage.prototype.ancestors=void 0;VFileMessage.prototype.cause=void 0;VFileMessage.prototype.fatal=void 0;VFileMessage.prototype.place=void 0;VFileMessage.prototype.ruleId=void 0;VFileMessage.prototype.source=void 0;const own$3={}.hasOwnProperty,emptyMap=new Map,cap=/[A-Z]/g,tableElements=new Set(["table","tbody","thead","tfoot","tr"]),tableCellElement=new Set(["td","th"]),docs="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function toJsxRuntime(n,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=developmentCreate(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=productionCreate(t,e.jsx,e.jsxs)}const Ee={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?svg:html$1,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},Te=one$1(Ee,n,void 0);return Te&&typeof Te!="string"?Te:Ee.create(n,Ee.Fragment,{children:Te||void 0},void 0)}function one$1(n,e,t){if(e.type==="element")return element$1(n,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return mdxExpression(n,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return mdxJsxElement(n,e,t);if(e.type==="mdxjsEsm")return mdxEsm(n,e);if(e.type==="root")return root$1(n,e,t);if(e.type==="text")return text$3(n,e)}function element$1(n,e,t){const r=n.schema;let Ee=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(Ee=svg,n.schema=Ee),n.ancestors.push(e);const Te=findComponentFromName(n,e.tagName,!1),Re=createElementProps(n,e);let Me=createChildren(n,e);return tableElements.has(e.tagName)&&(Me=Me.filter(function(Ve){return typeof Ve=="string"?!whitespace(Ve):!0})),addNode(n,Re,Te,e),addChildren(Re,Me),n.ancestors.pop(),n.schema=r,n.create(e,Te,Re,t)}function mdxExpression(n,e){if(e.data&&e.data.estree&&n.evaluater){const r=e.data.estree.body[0];return r.type,n.evaluater.evaluateExpression(r.expression)}crashEstree(n,e.position)}function mdxEsm(n,e){if(e.data&&e.data.estree&&n.evaluater)return n.evaluater.evaluateProgram(e.data.estree);crashEstree(n,e.position)}function mdxJsxElement(n,e,t){const r=n.schema;let Ee=r;e.name==="svg"&&r.space==="html"&&(Ee=svg,n.schema=Ee),n.ancestors.push(e);const Te=e.name===null?n.Fragment:findComponentFromName(n,e.name,!0),Re=createJsxElementProps(n,e),Me=createChildren(n,e);return addNode(n,Re,Te,e),addChildren(Re,Me),n.ancestors.pop(),n.schema=r,n.create(e,Te,Re,t)}function root$1(n,e,t){const r={};return addChildren(r,createChildren(n,e)),n.create(e,n.Fragment,r,t)}function text$3(n,e){return e.value}function addNode(n,e,t,r){typeof t!="string"&&t!==n.Fragment&&n.passNode&&(e.node=r)}function addChildren(n,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(n.children=t)}}function productionCreate(n,e,t){return r;function r(Ee,Te,Re,Me){const De=Array.isArray(Re.children)?t:e;return Me?De(Te,Re,Me):De(Te,Re)}}function developmentCreate(n,e){return t;function t(r,Ee,Te,Re){const Me=Array.isArray(Te.children),Ve=pointStart(r);return e(Ee,Te,Re,Me,{columnNumber:Ve?Ve.column-1:void 0,fileName:n,lineNumber:Ve?Ve.line:void 0},void 0)}}function createElementProps(n,e){const t={};let r,Ee;for(Ee in e.properties)if(Ee!=="children"&&own$3.call(e.properties,Ee)){const Te=createProperty(n,Ee,e.properties[Ee]);if(Te){const[Re,Me]=Te;n.tableCellAlignToStyle&&Re==="align"&&typeof Me=="string"&&tableCellElement.has(e.tagName)?r=Me:t[Re]=Me}}if(r){const Te=t.style||(t.style={});Te[n.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return t}function createJsxElementProps(n,e){const t={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&n.evaluater){const Te=r.data.estree.body[0];Te.type;const Re=Te.expression;Re.type;const Me=Re.properties[0];Me.type,Object.assign(t,n.evaluater.evaluateExpression(Me.argument))}else crashEstree(n,e.position);else{const Ee=r.name;let Te;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&n.evaluater){const Me=r.value.data.estree.body[0];Me.type,Te=n.evaluater.evaluateExpression(Me.expression)}else crashEstree(n,e.position);else Te=r.value===null?!0:r.value;t[Ee]=Te}return t}function createChildren(n,e){const t=[];let r=-1;const Ee=n.passKeys?new Map:emptyMap;for(;++r<e.children.length;){const Te=e.children[r];let Re;if(n.passKeys){const Ve=Te.type==="element"?Te.tagName:Te.type==="mdxJsxFlowElement"||Te.type==="mdxJsxTextElement"?Te.name:void 0;if(Ve){const De=Ee.get(Ve)||0;Re=Ve+"-"+De,Ee.set(Ve,De+1)}}const Me=one$1(n,Te,Re);Me!==void 0&&t.push(Me)}return t}function createProperty(n,e,t){const r=find(n.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=r.commaSeparated?stringify$1(t):stringify(t)),r.property==="style"){let Ee=typeof t=="object"?t:parseStyle(n,String(t));return n.stylePropertyNameCase==="css"&&(Ee=transformStylesToCssCasing(Ee)),["style",Ee]}return[n.elementAttributeNameCase==="react"&&r.space?hastToReact[r.property]||r.property:r.attribute,t]}}function parseStyle(n,e){try{return styleToJs(e,{reactCompat:!0})}catch(t){if(n.ignoreInvalidStyle)return{};const r=t,Ee=new VFileMessage("Cannot parse `style` attribute",{ancestors:n.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw Ee.file=n.filePath||void 0,Ee.url=docs+"#cannot-parse-style-attribute",Ee}}function findComponentFromName(n,e,t){let r;if(!t)r={type:"Literal",value:e};else if(e.includes(".")){const Ee=e.split(".");let Te=-1,Re;for(;++Te<Ee.length;){const Me=name$1(Ee[Te])?{type:"Identifier",name:Ee[Te]}:{type:"Literal",value:Ee[Te]};Re=Re?{type:"MemberExpression",object:Re,property:Me,computed:!!(Te&&Me.type==="Literal"),optional:!1}:Me}r=Re}else r=name$1(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const Ee=r.value;return own$3.call(n.components,Ee)?n.components[Ee]:Ee}if(n.evaluater)return n.evaluater.evaluateExpression(r);crashEstree(n)}function crashEstree(n,e){const t=new VFileMessage("Cannot handle MDX estrees without `createEvaluater`",{ancestors:n.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=n.filePath||void 0,t.url=docs+"#cannot-handle-mdx-estrees-without-createevaluater",t}function transformStylesToCssCasing(n){const e={};let t;for(t in n)own$3.call(n,t)&&(e[transformStyleToCssCasing(t)]=n[t]);return e}function transformStyleToCssCasing(n){let e=n.replace(cap,toDash);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function toDash(n){return"-"+n.toLowerCase()}const urlAttributes={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},emptyOptions$1={};function toString$1(n,e){const t=emptyOptions$1,r=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,Ee=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return one(n,r,Ee)}function one(n,e,t){if(node(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return all(n.children,e,t)}return Array.isArray(n)?all(n,e,t):""}function all(n,e,t){const r=[];let Ee=-1;for(;++Ee<n.length;)r[Ee]=one(n[Ee],e,t);return r.join("")}function node(n){return!!(n&&typeof n=="object")}const element=document.createElement("i");function decodeNamedCharacterReference(n){const e="&"+n+";";element.innerHTML=e;const t=element.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function splice(n,e,t,r){const Ee=n.length;let Te=0,Re;if(e<0?e=-e>Ee?0:Ee+e:e=e>Ee?Ee:e,t=t>0?t:0,r.length<1e4)Re=Array.from(r),Re.unshift(e,t),n.splice(...Re);else for(t&&n.splice(e,t);Te<r.length;)Re=r.slice(Te,Te+1e4),Re.unshift(e,0),n.splice(...Re),Te+=1e4,e+=1e4}function push(n,e){return n.length>0?(splice(n,n.length,0,e),n):e}const hasOwnProperty={}.hasOwnProperty;function combineExtensions(n){const e={};let t=-1;for(;++t<n.length;)syntaxExtension(e,n[t]);return e}function syntaxExtension(n,e){let t;for(t in e){const Ee=(hasOwnProperty.call(n,t)?n[t]:void 0)||(n[t]={}),Te=e[t];let Re;if(Te)for(Re in Te){hasOwnProperty.call(Ee,Re)||(Ee[Re]=[]);const Me=Te[Re];constructs(Ee[Re],Array.isArray(Me)?Me:Me?[Me]:[])}}}function constructs(n,e){let t=-1;const r=[];for(;++t<e.length;)(e[t].add==="after"?n:r).push(e[t]);splice(n,0,0,r)}function decodeNumericCharacterReference(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"�":String.fromCodePoint(t)}function normalizeIdentifier(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const asciiAlpha=regexCheck(/[A-Za-z]/),asciiAlphanumeric=regexCheck(/[\dA-Za-z]/),asciiAtext=regexCheck(/[#-'*+\--9=?A-Z^-~]/);function asciiControl(n){return n!==null&&(n<32||n===127)}const asciiDigit=regexCheck(/\d/),asciiHexDigit=regexCheck(/[\dA-Fa-f]/),asciiPunctuation=regexCheck(/[!-/:-@[-`{-~]/);function markdownLineEnding(n){return n!==null&&n<-2}function markdownLineEndingOrSpace(n){return n!==null&&(n<0||n===32)}function markdownSpace(n){return n===-2||n===-1||n===32}const unicodePunctuation=regexCheck(new RegExp("\\p{P}|\\p{S}","u")),unicodeWhitespace=regexCheck(/\s/);function regexCheck(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function normalizeUri(n){const e=[];let t=-1,r=0,Ee=0;for(;++t<n.length;){const Te=n.charCodeAt(t);let Re="";if(Te===37&&asciiAlphanumeric(n.charCodeAt(t+1))&&asciiAlphanumeric(n.charCodeAt(t+2)))Ee=2;else if(Te<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(Te))||(Re=String.fromCharCode(Te));else if(Te>55295&&Te<57344){const Me=n.charCodeAt(t+1);Te<56320&&Me>56319&&Me<57344?(Re=String.fromCharCode(Te,Me),Ee=1):Re="�"}else Re=String.fromCharCode(Te);Re&&(e.push(n.slice(r,t),encodeURIComponent(Re)),r=t+Ee+1,Re=""),Ee&&(t+=Ee,Ee=0)}return e.join("")+n.slice(r)}function factorySpace(n,e,t,r){const Ee=r?r-1:Number.POSITIVE_INFINITY;let Te=0;return Re;function Re(Ve){return markdownSpace(Ve)?(n.enter(t),Me(Ve)):e(Ve)}function Me(Ve){return markdownSpace(Ve)&&Te++<Ee?(n.consume(Ve),Me):(n.exit(t),e(Ve))}}const content$1={tokenize:initializeContent};function initializeContent(n){const e=n.attempt(this.parser.constructs.contentInitial,r,Ee);let t;return e;function r(Me){if(Me===null){n.consume(Me);return}return n.enter("lineEnding"),n.consume(Me),n.exit("lineEnding"),factorySpace(n,e,"linePrefix")}function Ee(Me){return n.enter("paragraph"),Te(Me)}function Te(Me){const Ve=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=Ve),t=Ve,Re(Me)}function Re(Me){if(Me===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(Me);return}return markdownLineEnding(Me)?(n.consume(Me),n.exit("chunkText"),Te):(n.consume(Me),Re)}}const document$2={tokenize:initializeDocument},containerConstruct={tokenize:tokenizeContainer};function initializeDocument(n){const e=this,t=[];let r=0,Ee,Te,Re;return Me;function Me(Je){if(r<t.length){const Ze=t[r];return e.containerState=Ze[1],n.attempt(Ze[0].continuation,Ve,De)(Je)}return De(Je)}function Ve(Je){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,Ee&&Ye();const Ze=e.events.length;let fn=Ze,yn;for(;fn--;)if(e.events[fn][0]==="exit"&&e.events[fn][1].type==="chunkFlow"){yn=e.events[fn][1].end;break}Ge(r);let mn=Ze;for(;mn<e.events.length;)e.events[mn][1].end={...yn},mn++;return splice(e.events,fn+1,0,e.events.slice(Ze)),e.events.length=mn,De(Je)}return Me(Je)}function De(Je){if(r===t.length){if(!Ee)return Ce(Je);if(Ee.currentConstruct&&Ee.currentConstruct.concrete)return Ue(Je);e.interrupt=!!(Ee.currentConstruct&&!Ee._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(containerConstruct,$e,Oe)(Je)}function $e(Je){return Ee&&Ye(),Ge(r),Ce(Je)}function Oe(Je){return e.parser.lazy[e.now().line]=r!==t.length,Re=e.now().offset,Ue(Je)}function Ce(Je){return e.containerState={},n.attempt(containerConstruct,Be,Ue)(Je)}function Be(Je){return r++,t.push([e.currentConstruct,e.containerState]),Ce(Je)}function Ue(Je){if(Je===null){Ee&&Ye(),Ge(0),n.consume(Je);return}return Ee=Ee||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:Ee,contentType:"flow",previous:Te}),We(Je)}function We(Je){if(Je===null){He(n.exit("chunkFlow"),!0),Ge(0),n.consume(Je);return}return markdownLineEnding(Je)?(n.consume(Je),He(n.exit("chunkFlow")),r=0,e.interrupt=void 0,Me):(n.consume(Je),We)}function He(Je,Ze){const fn=e.sliceStream(Je);if(Ze&&fn.push(null),Je.previous=Te,Te&&(Te.next=Je),Te=Je,Ee.defineSkip(Je.start),Ee.write(fn),e.parser.lazy[Je.start.line]){let yn=Ee.events.length;for(;yn--;)if(Ee.events[yn][1].start.offset<Re&&(!Ee.events[yn][1].end||Ee.events[yn][1].end.offset>Re))return;const mn=e.events.length;let pn=mn,un,bn;for(;pn--;)if(e.events[pn][0]==="exit"&&e.events[pn][1].type==="chunkFlow"){if(un){bn=e.events[pn][1].end;break}un=!0}for(Ge(r),yn=mn;yn<e.events.length;)e.events[yn][1].end={...bn},yn++;splice(e.events,pn+1,0,e.events.slice(mn)),e.events.length=yn}}function Ge(Je){let Ze=t.length;for(;Ze-- >Je;){const fn=t[Ze];e.containerState=fn[1],fn[0].exit.call(e,n)}t.length=Je}function Ye(){Ee.write([null]),Te=void 0,Ee=void 0,e.containerState._closeFlow=void 0}}function tokenizeContainer(n,e,t){return factorySpace(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function classifyCharacter(n){if(n===null||markdownLineEndingOrSpace(n)||unicodeWhitespace(n))return 1;if(unicodePunctuation(n))return 2}function resolveAll(n,e,t){const r=[];let Ee=-1;for(;++Ee<n.length;){const Te=n[Ee].resolveAll;Te&&!r.includes(Te)&&(e=Te(e,t),r.push(Te))}return e}const attention={name:"attention",resolveAll:resolveAllAttention,tokenize:tokenizeAttention};function resolveAllAttention(n,e){let t=-1,r,Ee,Te,Re,Me,Ve,De,$e;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(r=t;r--;)if(n[r][0]==="exit"&&n[r][1].type==="attentionSequence"&&n[r][1]._open&&e.sliceSerialize(n[r][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[r][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[r][1].end.offset-n[r][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;Ve=n[r][1].end.offset-n[r][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const Oe={...n[r][1].end},Ce={...n[t][1].start};movePoint(Oe,-Ve),movePoint(Ce,Ve),Re={type:Ve>1?"strongSequence":"emphasisSequence",start:Oe,end:{...n[r][1].end}},Me={type:Ve>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:Ce},Te={type:Ve>1?"strongText":"emphasisText",start:{...n[r][1].end},end:{...n[t][1].start}},Ee={type:Ve>1?"strong":"emphasis",start:{...Re.start},end:{...Me.end}},n[r][1].end={...Re.start},n[t][1].start={...Me.end},De=[],n[r][1].end.offset-n[r][1].start.offset&&(De=push(De,[["enter",n[r][1],e],["exit",n[r][1],e]])),De=push(De,[["enter",Ee,e],["enter",Re,e],["exit",Re,e],["enter",Te,e]]),De=push(De,resolveAll(e.parser.constructs.insideSpan.null,n.slice(r+1,t),e)),De=push(De,[["exit",Te,e],["enter",Me,e],["exit",Me,e],["exit",Ee,e]]),n[t][1].end.offset-n[t][1].start.offset?($e=2,De=push(De,[["enter",n[t][1],e],["exit",n[t][1],e]])):$e=0,splice(n,r-1,t-r+3,De),t=r+De.length-$e-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function tokenizeAttention(n,e){const t=this.parser.constructs.attentionMarkers.null,r=this.previous,Ee=classifyCharacter(r);let Te;return Re;function Re(Ve){return Te=Ve,n.enter("attentionSequence"),Me(Ve)}function Me(Ve){if(Ve===Te)return n.consume(Ve),Me;const De=n.exit("attentionSequence"),$e=classifyCharacter(Ve),Oe=!$e||$e===2&&Ee||t.includes(Ve),Ce=!Ee||Ee===2&&$e||t.includes(r);return De._open=!!(Te===42?Oe:Oe&&(Ee||!Ce)),De._close=!!(Te===42?Ce:Ce&&($e||!Oe)),e(Ve)}}function movePoint(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const autolink={name:"autolink",tokenize:tokenizeAutolink};function tokenizeAutolink(n,e,t){let r=0;return Ee;function Ee(Be){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(Be),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),Te}function Te(Be){return asciiAlpha(Be)?(n.consume(Be),Re):Be===64?t(Be):De(Be)}function Re(Be){return Be===43||Be===45||Be===46||asciiAlphanumeric(Be)?(r=1,Me(Be)):De(Be)}function Me(Be){return Be===58?(n.consume(Be),r=0,Ve):(Be===43||Be===45||Be===46||asciiAlphanumeric(Be))&&r++<32?(n.consume(Be),Me):(r=0,De(Be))}function Ve(Be){return Be===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(Be),n.exit("autolinkMarker"),n.exit("autolink"),e):Be===null||Be===32||Be===60||asciiControl(Be)?t(Be):(n.consume(Be),Ve)}function De(Be){return Be===64?(n.consume(Be),$e):asciiAtext(Be)?(n.consume(Be),De):t(Be)}function $e(Be){return asciiAlphanumeric(Be)?Oe(Be):t(Be)}function Oe(Be){return Be===46?(n.consume(Be),r=0,$e):Be===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(Be),n.exit("autolinkMarker"),n.exit("autolink"),e):Ce(Be)}function Ce(Be){if((Be===45||asciiAlphanumeric(Be))&&r++<63){const Ue=Be===45?Ce:Oe;return n.consume(Be),Ue}return t(Be)}}const blankLine={partial:!0,tokenize:tokenizeBlankLine};function tokenizeBlankLine(n,e,t){return r;function r(Te){return markdownSpace(Te)?factorySpace(n,Ee,"linePrefix")(Te):Ee(Te)}function Ee(Te){return Te===null||markdownLineEnding(Te)?e(Te):t(Te)}}const blockQuote={continuation:{tokenize:tokenizeBlockQuoteContinuation},exit,name:"blockQuote",tokenize:tokenizeBlockQuoteStart};function tokenizeBlockQuoteStart(n,e,t){const r=this;return Ee;function Ee(Re){if(Re===62){const Me=r.containerState;return Me.open||(n.enter("blockQuote",{_container:!0}),Me.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(Re),n.exit("blockQuoteMarker"),Te}return t(Re)}function Te(Re){return markdownSpace(Re)?(n.enter("blockQuotePrefixWhitespace"),n.consume(Re),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(Re))}}function tokenizeBlockQuoteContinuation(n,e,t){const r=this;return Ee;function Ee(Re){return markdownSpace(Re)?factorySpace(n,Te,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Re):Te(Re)}function Te(Re){return n.attempt(blockQuote,e,t)(Re)}}function exit(n){n.exit("blockQuote")}const characterEscape={name:"characterEscape",tokenize:tokenizeCharacterEscape};function tokenizeCharacterEscape(n,e,t){return r;function r(Te){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(Te),n.exit("escapeMarker"),Ee}function Ee(Te){return asciiPunctuation(Te)?(n.enter("characterEscapeValue"),n.consume(Te),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(Te)}}const characterReference={name:"characterReference",tokenize:tokenizeCharacterReference};function tokenizeCharacterReference(n,e,t){const r=this;let Ee=0,Te,Re;return Me;function Me(Oe){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(Oe),n.exit("characterReferenceMarker"),Ve}function Ve(Oe){return Oe===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(Oe),n.exit("characterReferenceMarkerNumeric"),De):(n.enter("characterReferenceValue"),Te=31,Re=asciiAlphanumeric,$e(Oe))}function De(Oe){return Oe===88||Oe===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(Oe),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),Te=6,Re=asciiHexDigit,$e):(n.enter("characterReferenceValue"),Te=7,Re=asciiDigit,$e(Oe))}function $e(Oe){if(Oe===59&&Ee){const Ce=n.exit("characterReferenceValue");return Re===asciiAlphanumeric&&!decodeNamedCharacterReference(r.sliceSerialize(Ce))?t(Oe):(n.enter("characterReferenceMarker"),n.consume(Oe),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return Re(Oe)&&Ee++<Te?(n.consume(Oe),$e):t(Oe)}}const nonLazyContinuation={partial:!0,tokenize:tokenizeNonLazyContinuation},codeFenced={concrete:!0,name:"codeFenced",tokenize:tokenizeCodeFenced};function tokenizeCodeFenced(n,e,t){const r=this,Ee={partial:!0,tokenize:fn};let Te=0,Re=0,Me;return Ve;function Ve(yn){return De(yn)}function De(yn){const mn=r.events[r.events.length-1];return Te=mn&&mn[1].type==="linePrefix"?mn[2].sliceSerialize(mn[1],!0).length:0,Me=yn,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),$e(yn)}function $e(yn){return yn===Me?(Re++,n.consume(yn),$e):Re<3?t(yn):(n.exit("codeFencedFenceSequence"),markdownSpace(yn)?factorySpace(n,Oe,"whitespace")(yn):Oe(yn))}function Oe(yn){return yn===null||markdownLineEnding(yn)?(n.exit("codeFencedFence"),r.interrupt?e(yn):n.check(nonLazyContinuation,We,Ze)(yn)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),Ce(yn))}function Ce(yn){return yn===null||markdownLineEnding(yn)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),Oe(yn)):markdownSpace(yn)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),factorySpace(n,Be,"whitespace")(yn)):yn===96&&yn===Me?t(yn):(n.consume(yn),Ce)}function Be(yn){return yn===null||markdownLineEnding(yn)?Oe(yn):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),Ue(yn))}function Ue(yn){return yn===null||markdownLineEnding(yn)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),Oe(yn)):yn===96&&yn===Me?t(yn):(n.consume(yn),Ue)}function We(yn){return n.attempt(Ee,Ze,He)(yn)}function He(yn){return n.enter("lineEnding"),n.consume(yn),n.exit("lineEnding"),Ge}function Ge(yn){return Te>0&&markdownSpace(yn)?factorySpace(n,Ye,"linePrefix",Te+1)(yn):Ye(yn)}function Ye(yn){return yn===null||markdownLineEnding(yn)?n.check(nonLazyContinuation,We,Ze)(yn):(n.enter("codeFlowValue"),Je(yn))}function Je(yn){return yn===null||markdownLineEnding(yn)?(n.exit("codeFlowValue"),Ye(yn)):(n.consume(yn),Je)}function Ze(yn){return n.exit("codeFenced"),e(yn)}function fn(yn,mn,pn){let un=0;return bn;function bn(Ln){return yn.enter("lineEnding"),yn.consume(Ln),yn.exit("lineEnding"),gn}function gn(Ln){return yn.enter("codeFencedFence"),markdownSpace(Ln)?factorySpace(yn,xn,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Ln):xn(Ln)}function xn(Ln){return Ln===Me?(yn.enter("codeFencedFenceSequence"),En(Ln)):pn(Ln)}function En(Ln){return Ln===Me?(un++,yn.consume(Ln),En):un>=Re?(yn.exit("codeFencedFenceSequence"),markdownSpace(Ln)?factorySpace(yn,Pn,"whitespace")(Ln):Pn(Ln)):pn(Ln)}function Pn(Ln){return Ln===null||markdownLineEnding(Ln)?(yn.exit("codeFencedFence"),mn(Ln)):pn(Ln)}}}function tokenizeNonLazyContinuation(n,e,t){const r=this;return Ee;function Ee(Re){return Re===null?t(Re):(n.enter("lineEnding"),n.consume(Re),n.exit("lineEnding"),Te)}function Te(Re){return r.parser.lazy[r.now().line]?t(Re):e(Re)}}const codeIndented={name:"codeIndented",tokenize:tokenizeCodeIndented},furtherStart={partial:!0,tokenize:tokenizeFurtherStart};function tokenizeCodeIndented(n,e,t){const r=this;return Ee;function Ee(De){return n.enter("codeIndented"),factorySpace(n,Te,"linePrefix",5)(De)}function Te(De){const $e=r.events[r.events.length-1];return $e&&$e[1].type==="linePrefix"&&$e[2].sliceSerialize($e[1],!0).length>=4?Re(De):t(De)}function Re(De){return De===null?Ve(De):markdownLineEnding(De)?n.attempt(furtherStart,Re,Ve)(De):(n.enter("codeFlowValue"),Me(De))}function Me(De){return De===null||markdownLineEnding(De)?(n.exit("codeFlowValue"),Re(De)):(n.consume(De),Me)}function Ve(De){return n.exit("codeIndented"),e(De)}}function tokenizeFurtherStart(n,e,t){const r=this;return Ee;function Ee(Re){return r.parser.lazy[r.now().line]?t(Re):markdownLineEnding(Re)?(n.enter("lineEnding"),n.consume(Re),n.exit("lineEnding"),Ee):factorySpace(n,Te,"linePrefix",5)(Re)}function Te(Re){const Me=r.events[r.events.length-1];return Me&&Me[1].type==="linePrefix"&&Me[2].sliceSerialize(Me[1],!0).length>=4?e(Re):markdownLineEnding(Re)?Ee(Re):t(Re)}}const codeText={name:"codeText",previous,resolve:resolveCodeText,tokenize:tokenizeCodeText};function resolveCodeText(n){let e=n.length-4,t=3,r,Ee;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(r=t;++r<e;)if(n[r][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(r=t-1,e++;++r<=e;)Ee===void 0?r!==e&&n[r][1].type!=="lineEnding"&&(Ee=r):(r===e||n[r][1].type==="lineEnding")&&(n[Ee][1].type="codeTextData",r!==Ee+2&&(n[Ee][1].end=n[r-1][1].end,n.splice(Ee+2,r-Ee-2),e-=r-Ee-2,r=Ee+2),Ee=void 0);return n}function previous(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function tokenizeCodeText(n,e,t){let r=0,Ee,Te;return Re;function Re(Oe){return n.enter("codeText"),n.enter("codeTextSequence"),Me(Oe)}function Me(Oe){return Oe===96?(n.consume(Oe),r++,Me):(n.exit("codeTextSequence"),Ve(Oe))}function Ve(Oe){return Oe===null?t(Oe):Oe===32?(n.enter("space"),n.consume(Oe),n.exit("space"),Ve):Oe===96?(Te=n.enter("codeTextSequence"),Ee=0,$e(Oe)):markdownLineEnding(Oe)?(n.enter("lineEnding"),n.consume(Oe),n.exit("lineEnding"),Ve):(n.enter("codeTextData"),De(Oe))}function De(Oe){return Oe===null||Oe===32||Oe===96||markdownLineEnding(Oe)?(n.exit("codeTextData"),Ve(Oe)):(n.consume(Oe),De)}function $e(Oe){return Oe===96?(n.consume(Oe),Ee++,$e):Ee===r?(n.exit("codeTextSequence"),n.exit("codeText"),e(Oe)):(Te.type="codeTextData",De(Oe))}}class SpliceBuffer{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const r=t??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,t,r){const Ee=t||0;this.setCursor(Math.trunc(e));const Te=this.right.splice(this.right.length-Ee,Number.POSITIVE_INFINITY);return r&&chunkedPush(this.left,r),Te.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),chunkedPush(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),chunkedPush(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);chunkedPush(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);chunkedPush(this.left,t.reverse())}}}function chunkedPush(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function subtokenize(n){const e={};let t=-1,r,Ee,Te,Re,Me,Ve,De;const $e=new SpliceBuffer(n);for(;++t<$e.length;){for(;t in e;)t=e[t];if(r=$e.get(t),t&&r[1].type==="chunkFlow"&&$e.get(t-1)[1].type==="listItemPrefix"&&(Ve=r[1]._tokenizer.events,Te=0,Te<Ve.length&&Ve[Te][1].type==="lineEndingBlank"&&(Te+=2),Te<Ve.length&&Ve[Te][1].type==="content"))for(;++Te<Ve.length&&Ve[Te][1].type!=="content";)Ve[Te][1].type==="chunkText"&&(Ve[Te][1]._isInFirstContentOfListItem=!0,Te++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,subcontent($e,t)),t=e[t],De=!0);else if(r[1]._container){for(Te=t,Ee=void 0;Te--;)if(Re=$e.get(Te),Re[1].type==="lineEnding"||Re[1].type==="lineEndingBlank")Re[0]==="enter"&&(Ee&&($e.get(Ee)[1].type="lineEndingBlank"),Re[1].type="lineEnding",Ee=Te);else if(!(Re[1].type==="linePrefix"||Re[1].type==="listItemIndent"))break;Ee&&(r[1].end={...$e.get(Ee)[1].start},Me=$e.slice(Ee,t),Me.unshift(r),$e.splice(Ee,t-Ee+1,Me))}}return splice(n,0,Number.POSITIVE_INFINITY,$e.slice(0)),!De}function subcontent(n,e){const t=n.get(e)[1],r=n.get(e)[2];let Ee=e-1;const Te=[];let Re=t._tokenizer;Re||(Re=r.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(Re._contentTypeTextTrailing=!0));const Me=Re.events,Ve=[],De={};let $e,Oe,Ce=-1,Be=t,Ue=0,We=0;const He=[We];for(;Be;){for(;n.get(++Ee)[1]!==Be;);Te.push(Ee),Be._tokenizer||($e=r.sliceStream(Be),Be.next||$e.push(null),Oe&&Re.defineSkip(Be.start),Be._isInFirstContentOfListItem&&(Re._gfmTasklistFirstContentOfListItem=!0),Re.write($e),Be._isInFirstContentOfListItem&&(Re._gfmTasklistFirstContentOfListItem=void 0)),Oe=Be,Be=Be.next}for(Be=t;++Ce<Me.length;)Me[Ce][0]==="exit"&&Me[Ce-1][0]==="enter"&&Me[Ce][1].type===Me[Ce-1][1].type&&Me[Ce][1].start.line!==Me[Ce][1].end.line&&(We=Ce+1,He.push(We),Be._tokenizer=void 0,Be.previous=void 0,Be=Be.next);for(Re.events=[],Be?(Be._tokenizer=void 0,Be.previous=void 0):He.pop(),Ce=He.length;Ce--;){const Ge=Me.slice(He[Ce],He[Ce+1]),Ye=Te.pop();Ve.push([Ye,Ye+Ge.length-1]),n.splice(Ye,2,Ge)}for(Ve.reverse(),Ce=-1;++Ce<Ve.length;)De[Ue+Ve[Ce][0]]=Ue+Ve[Ce][1],Ue+=Ve[Ce][1]-Ve[Ce][0]-1;return De}const content={resolve:resolveContent,tokenize:tokenizeContent},continuationConstruct={partial:!0,tokenize:tokenizeContinuation};function resolveContent(n){return subtokenize(n),n}function tokenizeContent(n,e){let t;return r;function r(Me){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),Ee(Me)}function Ee(Me){return Me===null?Te(Me):markdownLineEnding(Me)?n.check(continuationConstruct,Re,Te)(Me):(n.consume(Me),Ee)}function Te(Me){return n.exit("chunkContent"),n.exit("content"),e(Me)}function Re(Me){return n.consume(Me),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,Ee}}function tokenizeContinuation(n,e,t){const r=this;return Ee;function Ee(Re){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(Re),n.exit("lineEnding"),factorySpace(n,Te,"linePrefix")}function Te(Re){if(Re===null||markdownLineEnding(Re))return t(Re);const Me=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&Me&&Me[1].type==="linePrefix"&&Me[2].sliceSerialize(Me[1],!0).length>=4?e(Re):n.interrupt(r.parser.constructs.flow,t,e)(Re)}}function factoryDestination(n,e,t,r,Ee,Te,Re,Me,Ve){const De=Ve||Number.POSITIVE_INFINITY;let $e=0;return Oe;function Oe(Ge){return Ge===60?(n.enter(r),n.enter(Ee),n.enter(Te),n.consume(Ge),n.exit(Te),Ce):Ge===null||Ge===32||Ge===41||asciiControl(Ge)?t(Ge):(n.enter(r),n.enter(Re),n.enter(Me),n.enter("chunkString",{contentType:"string"}),We(Ge))}function Ce(Ge){return Ge===62?(n.enter(Te),n.consume(Ge),n.exit(Te),n.exit(Ee),n.exit(r),e):(n.enter(Me),n.enter("chunkString",{contentType:"string"}),Be(Ge))}function Be(Ge){return Ge===62?(n.exit("chunkString"),n.exit(Me),Ce(Ge)):Ge===null||Ge===60||markdownLineEnding(Ge)?t(Ge):(n.consume(Ge),Ge===92?Ue:Be)}function Ue(Ge){return Ge===60||Ge===62||Ge===92?(n.consume(Ge),Be):Be(Ge)}function We(Ge){return!$e&&(Ge===null||Ge===41||markdownLineEndingOrSpace(Ge))?(n.exit("chunkString"),n.exit(Me),n.exit(Re),n.exit(r),e(Ge)):$e<De&&Ge===40?(n.consume(Ge),$e++,We):Ge===41?(n.consume(Ge),$e--,We):Ge===null||Ge===32||Ge===40||asciiControl(Ge)?t(Ge):(n.consume(Ge),Ge===92?He:We)}function He(Ge){return Ge===40||Ge===41||Ge===92?(n.consume(Ge),We):We(Ge)}}function factoryLabel(n,e,t,r,Ee,Te){const Re=this;let Me=0,Ve;return De;function De(Be){return n.enter(r),n.enter(Ee),n.consume(Be),n.exit(Ee),n.enter(Te),$e}function $e(Be){return Me>999||Be===null||Be===91||Be===93&&!Ve||Be===94&&!Me&&"_hiddenFootnoteSupport"in Re.parser.constructs?t(Be):Be===93?(n.exit(Te),n.enter(Ee),n.consume(Be),n.exit(Ee),n.exit(r),e):markdownLineEnding(Be)?(n.enter("lineEnding"),n.consume(Be),n.exit("lineEnding"),$e):(n.enter("chunkString",{contentType:"string"}),Oe(Be))}function Oe(Be){return Be===null||Be===91||Be===93||markdownLineEnding(Be)||Me++>999?(n.exit("chunkString"),$e(Be)):(n.consume(Be),Ve||(Ve=!markdownSpace(Be)),Be===92?Ce:Oe)}function Ce(Be){return Be===91||Be===92||Be===93?(n.consume(Be),Me++,Oe):Oe(Be)}}function factoryTitle(n,e,t,r,Ee,Te){let Re;return Me;function Me(Ce){return Ce===34||Ce===39||Ce===40?(n.enter(r),n.enter(Ee),n.consume(Ce),n.exit(Ee),Re=Ce===40?41:Ce,Ve):t(Ce)}function Ve(Ce){return Ce===Re?(n.enter(Ee),n.consume(Ce),n.exit(Ee),n.exit(r),e):(n.enter(Te),De(Ce))}function De(Ce){return Ce===Re?(n.exit(Te),Ve(Re)):Ce===null?t(Ce):markdownLineEnding(Ce)?(n.enter("lineEnding"),n.consume(Ce),n.exit("lineEnding"),factorySpace(n,De,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),$e(Ce))}function $e(Ce){return Ce===Re||Ce===null||markdownLineEnding(Ce)?(n.exit("chunkString"),De(Ce)):(n.consume(Ce),Ce===92?Oe:$e)}function Oe(Ce){return Ce===Re||Ce===92?(n.consume(Ce),$e):$e(Ce)}}function factoryWhitespace(n,e){let t;return r;function r(Ee){return markdownLineEnding(Ee)?(n.enter("lineEnding"),n.consume(Ee),n.exit("lineEnding"),t=!0,r):markdownSpace(Ee)?factorySpace(n,r,t?"linePrefix":"lineSuffix")(Ee):e(Ee)}}const definition={name:"definition",tokenize:tokenizeDefinition},titleBefore={partial:!0,tokenize:tokenizeTitleBefore};function tokenizeDefinition(n,e,t){const r=this;let Ee;return Te;function Te(Be){return n.enter("definition"),Re(Be)}function Re(Be){return factoryLabel.call(r,n,Me,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(Be)}function Me(Be){return Ee=normalizeIdentifier(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),Be===58?(n.enter("definitionMarker"),n.consume(Be),n.exit("definitionMarker"),Ve):t(Be)}function Ve(Be){return markdownLineEndingOrSpace(Be)?factoryWhitespace(n,De)(Be):De(Be)}function De(Be){return factoryDestination(n,$e,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(Be)}function $e(Be){return n.attempt(titleBefore,Oe,Oe)(Be)}function Oe(Be){return markdownSpace(Be)?factorySpace(n,Ce,"whitespace")(Be):Ce(Be)}function Ce(Be){return Be===null||markdownLineEnding(Be)?(n.exit("definition"),r.parser.defined.push(Ee),e(Be)):t(Be)}}function tokenizeTitleBefore(n,e,t){return r;function r(Me){return markdownLineEndingOrSpace(Me)?factoryWhitespace(n,Ee)(Me):t(Me)}function Ee(Me){return factoryTitle(n,Te,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(Me)}function Te(Me){return markdownSpace(Me)?factorySpace(n,Re,"whitespace")(Me):Re(Me)}function Re(Me){return Me===null||markdownLineEnding(Me)?e(Me):t(Me)}}const hardBreakEscape={name:"hardBreakEscape",tokenize:tokenizeHardBreakEscape};function tokenizeHardBreakEscape(n,e,t){return r;function r(Te){return n.enter("hardBreakEscape"),n.consume(Te),Ee}function Ee(Te){return markdownLineEnding(Te)?(n.exit("hardBreakEscape"),e(Te)):t(Te)}}const headingAtx={name:"headingAtx",resolve:resolveHeadingAtx,tokenize:tokenizeHeadingAtx};function resolveHeadingAtx(n,e){let t=n.length-2,r=3,Ee,Te;return n[r][1].type==="whitespace"&&(r+=2),t-2>r&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(r===t-1||t-4>r&&n[t-2][1].type==="whitespace")&&(t-=r+1===t?2:4),t>r&&(Ee={type:"atxHeadingText",start:n[r][1].start,end:n[t][1].end},Te={type:"chunkText",start:n[r][1].start,end:n[t][1].end,contentType:"text"},splice(n,r,t-r+1,[["enter",Ee,e],["enter",Te,e],["exit",Te,e],["exit",Ee,e]])),n}function tokenizeHeadingAtx(n,e,t){let r=0;return Ee;function Ee($e){return n.enter("atxHeading"),Te($e)}function Te($e){return n.enter("atxHeadingSequence"),Re($e)}function Re($e){return $e===35&&r++<6?(n.consume($e),Re):$e===null||markdownLineEndingOrSpace($e)?(n.exit("atxHeadingSequence"),Me($e)):t($e)}function Me($e){return $e===35?(n.enter("atxHeadingSequence"),Ve($e)):$e===null||markdownLineEnding($e)?(n.exit("atxHeading"),e($e)):markdownSpace($e)?factorySpace(n,Me,"whitespace")($e):(n.enter("atxHeadingText"),De($e))}function Ve($e){return $e===35?(n.consume($e),Ve):(n.exit("atxHeadingSequence"),Me($e))}function De($e){return $e===null||$e===35||markdownLineEndingOrSpace($e)?(n.exit("atxHeadingText"),Me($e)):(n.consume($e),De)}}const htmlBlockNames=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],htmlRawNames=["pre","script","style","textarea"],htmlFlow={concrete:!0,name:"htmlFlow",resolveTo:resolveToHtmlFlow,tokenize:tokenizeHtmlFlow},blankLineBefore={partial:!0,tokenize:tokenizeBlankLineBefore},nonLazyContinuationStart={partial:!0,tokenize:tokenizeNonLazyContinuationStart};function resolveToHtmlFlow(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function tokenizeHtmlFlow(n,e,t){const r=this;let Ee,Te,Re,Me,Ve;return De;function De(In){return $e(In)}function $e(In){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(In),Oe}function Oe(In){return In===33?(n.consume(In),Ce):In===47?(n.consume(In),Te=!0,We):In===63?(n.consume(In),Ee=3,r.interrupt?e:On):asciiAlpha(In)?(n.consume(In),Re=String.fromCharCode(In),He):t(In)}function Ce(In){return In===45?(n.consume(In),Ee=2,Be):In===91?(n.consume(In),Ee=5,Me=0,Ue):asciiAlpha(In)?(n.consume(In),Ee=4,r.interrupt?e:On):t(In)}function Be(In){return In===45?(n.consume(In),r.interrupt?e:On):t(In)}function Ue(In){const Kn="CDATA[";return In===Kn.charCodeAt(Me++)?(n.consume(In),Me===Kn.length?r.interrupt?e:xn:Ue):t(In)}function We(In){return asciiAlpha(In)?(n.consume(In),Re=String.fromCharCode(In),He):t(In)}function He(In){if(In===null||In===47||In===62||markdownLineEndingOrSpace(In)){const Kn=In===47,Qn=Re.toLowerCase();return!Kn&&!Te&&htmlRawNames.includes(Qn)?(Ee=1,r.interrupt?e(In):xn(In)):htmlBlockNames.includes(Re.toLowerCase())?(Ee=6,Kn?(n.consume(In),Ge):r.interrupt?e(In):xn(In)):(Ee=7,r.interrupt&&!r.parser.lazy[r.now().line]?t(In):Te?Ye(In):Je(In))}return In===45||asciiAlphanumeric(In)?(n.consume(In),Re+=String.fromCharCode(In),He):t(In)}function Ge(In){return In===62?(n.consume(In),r.interrupt?e:xn):t(In)}function Ye(In){return markdownSpace(In)?(n.consume(In),Ye):bn(In)}function Je(In){return In===47?(n.consume(In),bn):In===58||In===95||asciiAlpha(In)?(n.consume(In),Ze):markdownSpace(In)?(n.consume(In),Je):bn(In)}function Ze(In){return In===45||In===46||In===58||In===95||asciiAlphanumeric(In)?(n.consume(In),Ze):fn(In)}function fn(In){return In===61?(n.consume(In),yn):markdownSpace(In)?(n.consume(In),fn):Je(In)}function yn(In){return In===null||In===60||In===61||In===62||In===96?t(In):In===34||In===39?(n.consume(In),Ve=In,mn):markdownSpace(In)?(n.consume(In),yn):pn(In)}function mn(In){return In===Ve?(n.consume(In),Ve=null,un):In===null||markdownLineEnding(In)?t(In):(n.consume(In),mn)}function pn(In){return In===null||In===34||In===39||In===47||In===60||In===61||In===62||In===96||markdownLineEndingOrSpace(In)?fn(In):(n.consume(In),pn)}function un(In){return In===47||In===62||markdownSpace(In)?Je(In):t(In)}function bn(In){return In===62?(n.consume(In),gn):t(In)}function gn(In){return In===null||markdownLineEnding(In)?xn(In):markdownSpace(In)?(n.consume(In),gn):t(In)}function xn(In){return In===45&&Ee===2?(n.consume(In),Cn):In===60&&Ee===1?(n.consume(In),Dn):In===62&&Ee===4?(n.consume(In),$n):In===63&&Ee===3?(n.consume(In),On):In===93&&Ee===5?(n.consume(In),Wn):markdownLineEnding(In)&&(Ee===6||Ee===7)?(n.exit("htmlFlowData"),n.check(blankLineBefore,kn,En)(In)):In===null||markdownLineEnding(In)?(n.exit("htmlFlowData"),En(In)):(n.consume(In),xn)}function En(In){return n.check(nonLazyContinuationStart,Pn,kn)(In)}function Pn(In){return n.enter("lineEnding"),n.consume(In),n.exit("lineEnding"),Ln}function Ln(In){return In===null||markdownLineEnding(In)?En(In):(n.enter("htmlFlowData"),xn(In))}function Cn(In){return In===45?(n.consume(In),On):xn(In)}function Dn(In){return In===47?(n.consume(In),Re="",Un):xn(In)}function Un(In){if(In===62){const Kn=Re.toLowerCase();return htmlRawNames.includes(Kn)?(n.consume(In),$n):xn(In)}return asciiAlpha(In)&&Re.length<8?(n.consume(In),Re+=String.fromCharCode(In),Un):xn(In)}function Wn(In){return In===93?(n.consume(In),On):xn(In)}function On(In){return In===62?(n.consume(In),$n):In===45&&Ee===2?(n.consume(In),On):xn(In)}function $n(In){return In===null||markdownLineEnding(In)?(n.exit("htmlFlowData"),kn(In)):(n.consume(In),$n)}function kn(In){return n.exit("htmlFlow"),e(In)}}function tokenizeNonLazyContinuationStart(n,e,t){const r=this;return Ee;function Ee(Re){return markdownLineEnding(Re)?(n.enter("lineEnding"),n.consume(Re),n.exit("lineEnding"),Te):t(Re)}function Te(Re){return r.parser.lazy[r.now().line]?t(Re):e(Re)}}function tokenizeBlankLineBefore(n,e,t){return r;function r(Ee){return n.enter("lineEnding"),n.consume(Ee),n.exit("lineEnding"),n.attempt(blankLine,e,t)}}const htmlText={name:"htmlText",tokenize:tokenizeHtmlText};function tokenizeHtmlText(n,e,t){const r=this;let Ee,Te,Re;return Me;function Me(On){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(On),Ve}function Ve(On){return On===33?(n.consume(On),De):On===47?(n.consume(On),fn):On===63?(n.consume(On),Je):asciiAlpha(On)?(n.consume(On),pn):t(On)}function De(On){return On===45?(n.consume(On),$e):On===91?(n.consume(On),Te=0,Ue):asciiAlpha(On)?(n.consume(On),Ye):t(On)}function $e(On){return On===45?(n.consume(On),Be):t(On)}function Oe(On){return On===null?t(On):On===45?(n.consume(On),Ce):markdownLineEnding(On)?(Re=Oe,Dn(On)):(n.consume(On),Oe)}function Ce(On){return On===45?(n.consume(On),Be):Oe(On)}function Be(On){return On===62?Cn(On):On===45?Ce(On):Oe(On)}function Ue(On){const $n="CDATA[";return On===$n.charCodeAt(Te++)?(n.consume(On),Te===$n.length?We:Ue):t(On)}function We(On){return On===null?t(On):On===93?(n.consume(On),He):markdownLineEnding(On)?(Re=We,Dn(On)):(n.consume(On),We)}function He(On){return On===93?(n.consume(On),Ge):We(On)}function Ge(On){return On===62?Cn(On):On===93?(n.consume(On),Ge):We(On)}function Ye(On){return On===null||On===62?Cn(On):markdownLineEnding(On)?(Re=Ye,Dn(On)):(n.consume(On),Ye)}function Je(On){return On===null?t(On):On===63?(n.consume(On),Ze):markdownLineEnding(On)?(Re=Je,Dn(On)):(n.consume(On),Je)}function Ze(On){return On===62?Cn(On):Je(On)}function fn(On){return asciiAlpha(On)?(n.consume(On),yn):t(On)}function yn(On){return On===45||asciiAlphanumeric(On)?(n.consume(On),yn):mn(On)}function mn(On){return markdownLineEnding(On)?(Re=mn,Dn(On)):markdownSpace(On)?(n.consume(On),mn):Cn(On)}function pn(On){return On===45||asciiAlphanumeric(On)?(n.consume(On),pn):On===47||On===62||markdownLineEndingOrSpace(On)?un(On):t(On)}function un(On){return On===47?(n.consume(On),Cn):On===58||On===95||asciiAlpha(On)?(n.consume(On),bn):markdownLineEnding(On)?(Re=un,Dn(On)):markdownSpace(On)?(n.consume(On),un):Cn(On)}function bn(On){return On===45||On===46||On===58||On===95||asciiAlphanumeric(On)?(n.consume(On),bn):gn(On)}function gn(On){return On===61?(n.consume(On),xn):markdownLineEnding(On)?(Re=gn,Dn(On)):markdownSpace(On)?(n.consume(On),gn):un(On)}function xn(On){return On===null||On===60||On===61||On===62||On===96?t(On):On===34||On===39?(n.consume(On),Ee=On,En):markdownLineEnding(On)?(Re=xn,Dn(On)):markdownSpace(On)?(n.consume(On),xn):(n.consume(On),Pn)}function En(On){return On===Ee?(n.consume(On),Ee=void 0,Ln):On===null?t(On):markdownLineEnding(On)?(Re=En,Dn(On)):(n.consume(On),En)}function Pn(On){return On===null||On===34||On===39||On===60||On===61||On===96?t(On):On===47||On===62||markdownLineEndingOrSpace(On)?un(On):(n.consume(On),Pn)}function Ln(On){return On===47||On===62||markdownLineEndingOrSpace(On)?un(On):t(On)}function Cn(On){return On===62?(n.consume(On),n.exit("htmlTextData"),n.exit("htmlText"),e):t(On)}function Dn(On){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(On),n.exit("lineEnding"),Un}function Un(On){return markdownSpace(On)?factorySpace(n,Wn,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(On):Wn(On)}function Wn(On){return n.enter("htmlTextData"),Re(On)}}const labelEnd={name:"labelEnd",resolveAll:resolveAllLabelEnd,resolveTo:resolveToLabelEnd,tokenize:tokenizeLabelEnd},resourceConstruct={tokenize:tokenizeResource},referenceFullConstruct={tokenize:tokenizeReferenceFull},referenceCollapsedConstruct={tokenize:tokenizeReferenceCollapsed};function resolveAllLabelEnd(n){let e=-1;const t=[];for(;++e<n.length;){const r=n[e][1];if(t.push(n[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const Ee=r.type==="labelImage"?4:2;r.type="data",e+=Ee}}return n.length!==t.length&&splice(n,0,n.length,t),n}function resolveToLabelEnd(n,e){let t=n.length,r=0,Ee,Te,Re,Me;for(;t--;)if(Ee=n[t][1],Te){if(Ee.type==="link"||Ee.type==="labelLink"&&Ee._inactive)break;n[t][0]==="enter"&&Ee.type==="labelLink"&&(Ee._inactive=!0)}else if(Re){if(n[t][0]==="enter"&&(Ee.type==="labelImage"||Ee.type==="labelLink")&&!Ee._balanced&&(Te=t,Ee.type!=="labelLink")){r=2;break}}else Ee.type==="labelEnd"&&(Re=t);const Ve={type:n[Te][1].type==="labelLink"?"link":"image",start:{...n[Te][1].start},end:{...n[n.length-1][1].end}},De={type:"label",start:{...n[Te][1].start},end:{...n[Re][1].end}},$e={type:"labelText",start:{...n[Te+r+2][1].end},end:{...n[Re-2][1].start}};return Me=[["enter",Ve,e],["enter",De,e]],Me=push(Me,n.slice(Te+1,Te+r+3)),Me=push(Me,[["enter",$e,e]]),Me=push(Me,resolveAll(e.parser.constructs.insideSpan.null,n.slice(Te+r+4,Re-3),e)),Me=push(Me,[["exit",$e,e],n[Re-2],n[Re-1],["exit",De,e]]),Me=push(Me,n.slice(Re+1)),Me=push(Me,[["exit",Ve,e]]),splice(n,Te,n.length,Me),n}function tokenizeLabelEnd(n,e,t){const r=this;let Ee=r.events.length,Te,Re;for(;Ee--;)if((r.events[Ee][1].type==="labelImage"||r.events[Ee][1].type==="labelLink")&&!r.events[Ee][1]._balanced){Te=r.events[Ee][1];break}return Me;function Me(Ce){return Te?Te._inactive?Oe(Ce):(Re=r.parser.defined.includes(normalizeIdentifier(r.sliceSerialize({start:Te.end,end:r.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(Ce),n.exit("labelMarker"),n.exit("labelEnd"),Ve):t(Ce)}function Ve(Ce){return Ce===40?n.attempt(resourceConstruct,$e,Re?$e:Oe)(Ce):Ce===91?n.attempt(referenceFullConstruct,$e,Re?De:Oe)(Ce):Re?$e(Ce):Oe(Ce)}function De(Ce){return n.attempt(referenceCollapsedConstruct,$e,Oe)(Ce)}function $e(Ce){return e(Ce)}function Oe(Ce){return Te._balanced=!0,t(Ce)}}function tokenizeResource(n,e,t){return r;function r(Oe){return n.enter("resource"),n.enter("resourceMarker"),n.consume(Oe),n.exit("resourceMarker"),Ee}function Ee(Oe){return markdownLineEndingOrSpace(Oe)?factoryWhitespace(n,Te)(Oe):Te(Oe)}function Te(Oe){return Oe===41?$e(Oe):factoryDestination(n,Re,Me,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(Oe)}function Re(Oe){return markdownLineEndingOrSpace(Oe)?factoryWhitespace(n,Ve)(Oe):$e(Oe)}function Me(Oe){return t(Oe)}function Ve(Oe){return Oe===34||Oe===39||Oe===40?factoryTitle(n,De,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(Oe):$e(Oe)}function De(Oe){return markdownLineEndingOrSpace(Oe)?factoryWhitespace(n,$e)(Oe):$e(Oe)}function $e(Oe){return Oe===41?(n.enter("resourceMarker"),n.consume(Oe),n.exit("resourceMarker"),n.exit("resource"),e):t(Oe)}}function tokenizeReferenceFull(n,e,t){const r=this;return Ee;function Ee(Me){return factoryLabel.call(r,n,Te,Re,"reference","referenceMarker","referenceString")(Me)}function Te(Me){return r.parser.defined.includes(normalizeIdentifier(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(Me):t(Me)}function Re(Me){return t(Me)}}function tokenizeReferenceCollapsed(n,e,t){return r;function r(Te){return n.enter("reference"),n.enter("referenceMarker"),n.consume(Te),n.exit("referenceMarker"),Ee}function Ee(Te){return Te===93?(n.enter("referenceMarker"),n.consume(Te),n.exit("referenceMarker"),n.exit("reference"),e):t(Te)}}const labelStartImage={name:"labelStartImage",resolveAll:labelEnd.resolveAll,tokenize:tokenizeLabelStartImage};function tokenizeLabelStartImage(n,e,t){const r=this;return Ee;function Ee(Me){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(Me),n.exit("labelImageMarker"),Te}function Te(Me){return Me===91?(n.enter("labelMarker"),n.consume(Me),n.exit("labelMarker"),n.exit("labelImage"),Re):t(Me)}function Re(Me){return Me===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(Me):e(Me)}}const labelStartLink={name:"labelStartLink",resolveAll:labelEnd.resolveAll,tokenize:tokenizeLabelStartLink};function tokenizeLabelStartLink(n,e,t){const r=this;return Ee;function Ee(Re){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(Re),n.exit("labelMarker"),n.exit("labelLink"),Te}function Te(Re){return Re===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(Re):e(Re)}}const lineEnding={name:"lineEnding",tokenize:tokenizeLineEnding};function tokenizeLineEnding(n,e){return t;function t(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),factorySpace(n,e,"linePrefix")}}const thematicBreak$1={name:"thematicBreak",tokenize:tokenizeThematicBreak};function tokenizeThematicBreak(n,e,t){let r=0,Ee;return Te;function Te(De){return n.enter("thematicBreak"),Re(De)}function Re(De){return Ee=De,Me(De)}function Me(De){return De===Ee?(n.enter("thematicBreakSequence"),Ve(De)):r>=3&&(De===null||markdownLineEnding(De))?(n.exit("thematicBreak"),e(De)):t(De)}function Ve(De){return De===Ee?(n.consume(De),r++,Ve):(n.exit("thematicBreakSequence"),markdownSpace(De)?factorySpace(n,Me,"whitespace")(De):Me(De))}}const list$1={continuation:{tokenize:tokenizeListContinuation},exit:tokenizeListEnd,name:"list",tokenize:tokenizeListStart},listItemPrefixWhitespaceConstruct={partial:!0,tokenize:tokenizeListItemPrefixWhitespace},indentConstruct={partial:!0,tokenize:tokenizeIndent};function tokenizeListStart(n,e,t){const r=this,Ee=r.events[r.events.length-1];let Te=Ee&&Ee[1].type==="linePrefix"?Ee[2].sliceSerialize(Ee[1],!0).length:0,Re=0;return Me;function Me(Be){const Ue=r.containerState.type||(Be===42||Be===43||Be===45?"listUnordered":"listOrdered");if(Ue==="listUnordered"?!r.containerState.marker||Be===r.containerState.marker:asciiDigit(Be)){if(r.containerState.type||(r.containerState.type=Ue,n.enter(Ue,{_container:!0})),Ue==="listUnordered")return n.enter("listItemPrefix"),Be===42||Be===45?n.check(thematicBreak$1,t,De)(Be):De(Be);if(!r.interrupt||Be===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),Ve(Be)}return t(Be)}function Ve(Be){return asciiDigit(Be)&&++Re<10?(n.consume(Be),Ve):(!r.interrupt||Re<2)&&(r.containerState.marker?Be===r.containerState.marker:Be===41||Be===46)?(n.exit("listItemValue"),De(Be)):t(Be)}function De(Be){return n.enter("listItemMarker"),n.consume(Be),n.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||Be,n.check(blankLine,r.interrupt?t:$e,n.attempt(listItemPrefixWhitespaceConstruct,Ce,Oe))}function $e(Be){return r.containerState.initialBlankLine=!0,Te++,Ce(Be)}function Oe(Be){return markdownSpace(Be)?(n.enter("listItemPrefixWhitespace"),n.consume(Be),n.exit("listItemPrefixWhitespace"),Ce):t(Be)}function Ce(Be){return r.containerState.size=Te+r.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(Be)}}function tokenizeListContinuation(n,e,t){const r=this;return r.containerState._closeFlow=void 0,n.check(blankLine,Ee,Te);function Ee(Me){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,factorySpace(n,e,"listItemIndent",r.containerState.size+1)(Me)}function Te(Me){return r.containerState.furtherBlankLines||!markdownSpace(Me)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,Re(Me)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,n.attempt(indentConstruct,e,Re)(Me))}function Re(Me){return r.containerState._closeFlow=!0,r.interrupt=void 0,factorySpace(n,n.attempt(list$1,e,t),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Me)}}function tokenizeIndent(n,e,t){const r=this;return factorySpace(n,Ee,"listItemIndent",r.containerState.size+1);function Ee(Te){const Re=r.events[r.events.length-1];return Re&&Re[1].type==="listItemIndent"&&Re[2].sliceSerialize(Re[1],!0).length===r.containerState.size?e(Te):t(Te)}}function tokenizeListEnd(n){n.exit(this.containerState.type)}function tokenizeListItemPrefixWhitespace(n,e,t){const r=this;return factorySpace(n,Ee,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function Ee(Te){const Re=r.events[r.events.length-1];return!markdownSpace(Te)&&Re&&Re[1].type==="listItemPrefixWhitespace"?e(Te):t(Te)}}const setextUnderline={name:"setextUnderline",resolveTo:resolveToSetextUnderline,tokenize:tokenizeSetextUnderline};function resolveToSetextUnderline(n,e){let t=n.length,r,Ee,Te;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){r=t;break}n[t][1].type==="paragraph"&&(Ee=t)}else n[t][1].type==="content"&&n.splice(t,1),!Te&&n[t][1].type==="definition"&&(Te=t);const Re={type:"setextHeading",start:{...n[r][1].start},end:{...n[n.length-1][1].end}};return n[Ee][1].type="setextHeadingText",Te?(n.splice(Ee,0,["enter",Re,e]),n.splice(Te+1,0,["exit",n[r][1],e]),n[r][1].end={...n[Te][1].end}):n[r][1]=Re,n.push(["exit",Re,e]),n}function tokenizeSetextUnderline(n,e,t){const r=this;let Ee;return Te;function Te(De){let $e=r.events.length,Oe;for(;$e--;)if(r.events[$e][1].type!=="lineEnding"&&r.events[$e][1].type!=="linePrefix"&&r.events[$e][1].type!=="content"){Oe=r.events[$e][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||Oe)?(n.enter("setextHeadingLine"),Ee=De,Re(De)):t(De)}function Re(De){return n.enter("setextHeadingLineSequence"),Me(De)}function Me(De){return De===Ee?(n.consume(De),Me):(n.exit("setextHeadingLineSequence"),markdownSpace(De)?factorySpace(n,Ve,"lineSuffix")(De):Ve(De))}function Ve(De){return De===null||markdownLineEnding(De)?(n.exit("setextHeadingLine"),e(De)):t(De)}}const flow$1={tokenize:initializeFlow};function initializeFlow(n){const e=this,t=n.attempt(blankLine,r,n.attempt(this.parser.constructs.flowInitial,Ee,factorySpace(n,n.attempt(this.parser.constructs.flow,Ee,n.attempt(content,Ee)),"linePrefix")));return t;function r(Te){if(Te===null){n.consume(Te);return}return n.enter("lineEndingBlank"),n.consume(Te),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function Ee(Te){if(Te===null){n.consume(Te);return}return n.enter("lineEnding"),n.consume(Te),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const resolver={resolveAll:createResolver()},string$1=initializeFactory("string"),text$2=initializeFactory("text");function initializeFactory(n){return{resolveAll:createResolver(n==="text"?resolveAllLineSuffixes:void 0),tokenize:e};function e(t){const r=this,Ee=this.parser.constructs[n],Te=t.attempt(Ee,Re,Me);return Re;function Re($e){return De($e)?Te($e):Me($e)}function Me($e){if($e===null){t.consume($e);return}return t.enter("data"),t.consume($e),Ve}function Ve($e){return De($e)?(t.exit("data"),Te($e)):(t.consume($e),Ve)}function De($e){if($e===null)return!0;const Oe=Ee[$e];let Ce=-1;if(Oe)for(;++Ce<Oe.length;){const Be=Oe[Ce];if(!Be.previous||Be.previous.call(r,r.previous))return!0}return!1}}}function createResolver(n){return e;function e(t,r){let Ee=-1,Te;for(;++Ee<=t.length;)Te===void 0?t[Ee]&&t[Ee][1].type==="data"&&(Te=Ee,Ee++):(!t[Ee]||t[Ee][1].type!=="data")&&(Ee!==Te+2&&(t[Te][1].end=t[Ee-1][1].end,t.splice(Te+2,Ee-Te-2),Ee=Te+2),Te=void 0);return n?n(t,r):t}}function resolveAllLineSuffixes(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const r=n[t-1][1],Ee=e.sliceStream(r);let Te=Ee.length,Re=-1,Me=0,Ve;for(;Te--;){const De=Ee[Te];if(typeof De=="string"){for(Re=De.length;De.charCodeAt(Re-1)===32;)Me++,Re--;if(Re)break;Re=-1}else if(De===-2)Ve=!0,Me++;else if(De!==-1){Te++;break}}if(e._contentTypeTextTrailing&&t===n.length&&(Me=0),Me){const De={type:t===n.length||Ve||Me<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:Te?Re:r.start._bufferIndex+Re,_index:r.start._index+Te,line:r.end.line,column:r.end.column-Me,offset:r.end.offset-Me},end:{...r.end}};r.end={...De.start},r.start.offset===r.end.offset?Object.assign(r,De):(n.splice(t,0,["enter",De,e],["exit",De,e]),t+=2)}t++}return n}const document$1={42:list$1,43:list$1,45:list$1,48:list$1,49:list$1,50:list$1,51:list$1,52:list$1,53:list$1,54:list$1,55:list$1,56:list$1,57:list$1,62:blockQuote},contentInitial={91:definition},flowInitial={[-2]:codeIndented,[-1]:codeIndented,32:codeIndented},flow={35:headingAtx,42:thematicBreak$1,45:[setextUnderline,thematicBreak$1],60:htmlFlow,61:setextUnderline,95:thematicBreak$1,96:codeFenced,126:codeFenced},string={38:characterReference,92:characterEscape},text$1={[-5]:lineEnding,[-4]:lineEnding,[-3]:lineEnding,33:labelStartImage,38:characterReference,42:attention,60:[autolink,htmlText],91:labelStartLink,92:[hardBreakEscape,characterEscape],93:labelEnd,95:attention,96:codeText},insideSpan={null:[attention,resolver]},attentionMarkers={null:[42,95]},disable={null:[]},defaultConstructs=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers,contentInitial,disable,document:document$1,flow,flowInitial,insideSpan,string,text:text$1},Symbol.toStringTag,{value:"Module"}));function createTokenizer(n,e,t){let r={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const Ee={},Te=[];let Re=[],Me=[];const Ve={attempt:mn(fn),check:mn(yn),consume:Ye,enter:Je,exit:Ze,interrupt:mn(yn,{interrupt:!0})},De={code:null,containerState:{},defineSkip:We,events:[],now:Ue,parser:n,previous:null,sliceSerialize:Ce,sliceStream:Be,write:Oe};let $e=e.tokenize.call(De,Ve);return e.resolveAll&&Te.push(e),De;function Oe(gn){return Re=push(Re,gn),He(),Re[Re.length-1]!==null?[]:(pn(e,0),De.events=resolveAll(Te,De.events,De),De.events)}function Ce(gn,xn){return serializeChunks(Be(gn),xn)}function Be(gn){return sliceChunks(Re,gn)}function Ue(){const{_bufferIndex:gn,_index:xn,line:En,column:Pn,offset:Ln}=r;return{_bufferIndex:gn,_index:xn,line:En,column:Pn,offset:Ln}}function We(gn){Ee[gn.line]=gn.column,bn()}function He(){let gn;for(;r._index<Re.length;){const xn=Re[r._index];if(typeof xn=="string")for(gn=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===gn&&r._bufferIndex<xn.length;)Ge(xn.charCodeAt(r._bufferIndex));else Ge(xn)}}function Ge(gn){$e=$e(gn)}function Ye(gn){markdownLineEnding(gn)?(r.line++,r.column=1,r.offset+=gn===-3?2:1,bn()):gn!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===Re[r._index].length&&(r._bufferIndex=-1,r._index++)),De.previous=gn}function Je(gn,xn){const En=xn||{};return En.type=gn,En.start=Ue(),De.events.push(["enter",En,De]),Me.push(En),En}function Ze(gn){const xn=Me.pop();return xn.end=Ue(),De.events.push(["exit",xn,De]),xn}function fn(gn,xn){pn(gn,xn.from)}function yn(gn,xn){xn.restore()}function mn(gn,xn){return En;function En(Pn,Ln,Cn){let Dn,Un,Wn,On;return Array.isArray(Pn)?kn(Pn):"tokenize"in Pn?kn([Pn]):$n(Pn);function $n(rr){return or;function or(pr){const mr=pr!==null&&rr[pr],Er=pr!==null&&rr.null,jr=[...Array.isArray(mr)?mr:mr?[mr]:[],...Array.isArray(Er)?Er:Er?[Er]:[]];return kn(jr)(pr)}}function kn(rr){return Dn=rr,Un=0,rr.length===0?Cn:In(rr[Un])}function In(rr){return or;function or(pr){return On=un(),Wn=rr,rr.partial||(De.currentConstruct=rr),rr.name&&De.parser.constructs.disable.null.includes(rr.name)?Qn():rr.tokenize.call(xn?Object.assign(Object.create(De),xn):De,Ve,Kn,Qn)(pr)}}function Kn(rr){return gn(Wn,On),Ln}function Qn(rr){return On.restore(),++Un<Dn.length?In(Dn[Un]):Cn}}}function pn(gn,xn){gn.resolveAll&&!Te.includes(gn)&&Te.push(gn),gn.resolve&&splice(De.events,xn,De.events.length-xn,gn.resolve(De.events.slice(xn),De)),gn.resolveTo&&(De.events=gn.resolveTo(De.events,De))}function un(){const gn=Ue(),xn=De.previous,En=De.currentConstruct,Pn=De.events.length,Ln=Array.from(Me);return{from:Pn,restore:Cn};function Cn(){r=gn,De.previous=xn,De.currentConstruct=En,De.events.length=Pn,Me=Ln,bn()}}function bn(){r.line in Ee&&r.column<2&&(r.column=Ee[r.line],r.offset+=Ee[r.line]-1)}}function sliceChunks(n,e){const t=e.start._index,r=e.start._bufferIndex,Ee=e.end._index,Te=e.end._bufferIndex;let Re;if(t===Ee)Re=[n[t].slice(r,Te)];else{if(Re=n.slice(t,Ee),r>-1){const Me=Re[0];typeof Me=="string"?Re[0]=Me.slice(r):Re.shift()}Te>0&&Re.push(n[Ee].slice(0,Te))}return Re}function serializeChunks(n,e){let t=-1;const r=[];let Ee;for(;++t<n.length;){const Te=n[t];let Re;if(typeof Te=="string")Re=Te;else switch(Te){case-5:{Re="\r";break}case-4:{Re=`
`;break}case-3:{Re=`\r
`;break}case-2:{Re=e?" ":"	";break}case-1:{if(!e&&Ee)continue;Re=" ";break}default:Re=String.fromCharCode(Te)}Ee=Te===-2,r.push(Re)}return r.join("")}function parse$1(n){const r={constructs:combineExtensions([defaultConstructs,...(n||{}).extensions||[]]),content:Ee(content$1),defined:[],document:Ee(document$2),flow:Ee(flow$1),lazy:{},string:Ee(string$1),text:Ee(text$2)};return r;function Ee(Te){return Re;function Re(Me){return createTokenizer(r,Te,Me)}}}function postprocess(n){for(;!subtokenize(n););return n}const search=/[\0\t\n\r]/g;function preprocess$1(){let n=1,e="",t=!0,r;return Ee;function Ee(Te,Re,Me){const Ve=[];let De,$e,Oe,Ce,Be;for(Te=e+(typeof Te=="string"?Te.toString():new TextDecoder(Re||void 0).decode(Te)),Oe=0,e="",t&&(Te.charCodeAt(0)===65279&&Oe++,t=void 0);Oe<Te.length;){if(search.lastIndex=Oe,De=search.exec(Te),Ce=De&&De.index!==void 0?De.index:Te.length,Be=Te.charCodeAt(Ce),!De){e=Te.slice(Oe);break}if(Be===10&&Oe===Ce&&r)Ve.push(-3),r=void 0;else switch(r&&(Ve.push(-5),r=void 0),Oe<Ce&&(Ve.push(Te.slice(Oe,Ce)),n+=Ce-Oe),Be){case 0:{Ve.push(65533),n++;break}case 9:{for($e=Math.ceil(n/4)*4,Ve.push(-2);n++<$e;)Ve.push(-1);break}case 10:{Ve.push(-4),n=1;break}default:r=!0,n=1}Oe=Ce+1}return Me&&(r&&Ve.push(-5),e&&Ve.push(e),Ve.push(null)),Ve}}const characterEscapeOrReference=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function decodeString(n){return n.replace(characterEscapeOrReference,decode)}function decode(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const Ee=t.charCodeAt(1),Te=Ee===120||Ee===88;return decodeNumericCharacterReference(t.slice(Te?2:1),Te?16:10)}return decodeNamedCharacterReference(t)||n}const own$2={}.hasOwnProperty;function fromMarkdown(n,e,t){return typeof e!="string"&&(t=e,e=void 0),compiler(t)(postprocess(parse$1(t).document().write(preprocess$1()(n,e,!0))))}function compiler(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:Te(qr),autolinkProtocol:un,autolinkEmail:un,atxHeading:Te(nr),blockQuote:Te(Er),characterEscape:un,characterReference:un,codeFenced:Te(jr),codeFencedFenceInfo:Re,codeFencedFenceMeta:Re,codeIndented:Te(jr,Re),codeText:Te(Kr,Re),codeTextData:un,data:un,codeFlowValue:un,definition:Te(Hr),definitionDestinationString:Re,definitionLabelString:Re,definitionTitleString:Re,emphasis:Te(xr),hardBreakEscape:Te(Oi),hardBreakTrailing:Te(Oi),htmlFlow:Te(Ti,Re),htmlFlowData:un,htmlText:Te(Ti,Re),htmlTextData:un,image:Te(yi),label:Re,link:Te(qr),listItem:Te(Zr),listItemValue:Ce,listOrdered:Te(di,Oe),listUnordered:Te(di),paragraph:Te(mi),reference:In,referenceString:Re,resourceDestinationString:Re,resourceTitleString:Re,setextHeading:Te(nr),strong:Te(pi),thematicBreak:Te(si)},exit:{atxHeading:Ve(),atxHeadingSequence:fn,autolink:Ve(),autolinkEmail:mr,autolinkProtocol:pr,blockQuote:Ve(),characterEscapeValue:bn,characterReferenceMarkerHexadecimal:Qn,characterReferenceMarkerNumeric:Qn,characterReferenceValue:rr,characterReference:or,codeFenced:Ve(He),codeFencedFence:We,codeFencedFenceInfo:Be,codeFencedFenceMeta:Ue,codeFlowValue:bn,codeIndented:Ve(Ge),codeText:Ve(Ln),codeTextData:bn,data:bn,definition:Ve(),definitionDestinationString:Ze,definitionLabelString:Ye,definitionTitleString:Je,emphasis:Ve(),hardBreakEscape:Ve(xn),hardBreakTrailing:Ve(xn),htmlFlow:Ve(En),htmlFlowData:bn,htmlText:Ve(Pn),htmlTextData:bn,image:Ve(Dn),label:Wn,labelText:Un,lineEnding:gn,link:Ve(Cn),listItem:Ve(),listOrdered:Ve(),listUnordered:Ve(),paragraph:Ve(),referenceString:Kn,resourceDestinationString:On,resourceTitleString:$n,resource:kn,setextHeading:Ve(pn),setextHeadingLineSequence:mn,setextHeadingText:yn,strong:Ve(),thematicBreak:Ve()}};configure(e,(n||{}).mdastExtensions||[]);const t={};return r;function r(_r){let Dr={type:"root",children:[]};const Xr={stack:[Dr],tokenStack:[],config:e,enter:Me,exit:De,buffer:Re,resume:$e,data:t},Gr=[];let ii=-1;for(;++ii<_r.length;)if(_r[ii][1].type==="listOrdered"||_r[ii][1].type==="listUnordered")if(_r[ii][0]==="enter")Gr.push(ii);else{const hi=Gr.pop();ii=Ee(_r,hi,ii)}for(ii=-1;++ii<_r.length;){const hi=e[_r[ii][0]];own$2.call(hi,_r[ii][1].type)&&hi[_r[ii][1].type].call(Object.assign({sliceSerialize:_r[ii][2].sliceSerialize},Xr),_r[ii][1])}if(Xr.tokenStack.length>0){const hi=Xr.tokenStack[Xr.tokenStack.length-1];(hi[1]||defaultOnError).call(Xr,void 0,hi[0])}for(Dr.position={start:point(_r.length>0?_r[0][1].start:{line:1,column:1,offset:0}),end:point(_r.length>0?_r[_r.length-2][1].end:{line:1,column:1,offset:0})},ii=-1;++ii<e.transforms.length;)Dr=e.transforms[ii](Dr)||Dr;return Dr}function Ee(_r,Dr,Xr){let Gr=Dr-1,ii=-1,hi=!1,Mi,ji,Ur,Pi;for(;++Gr<=Xr;){const Bi=_r[Gr];switch(Bi[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Bi[0]==="enter"?ii++:ii--,Pi=void 0;break}case"lineEndingBlank":{Bi[0]==="enter"&&(Mi&&!Pi&&!ii&&!Ur&&(Ur=Gr),Pi=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Pi=void 0}if(!ii&&Bi[0]==="enter"&&Bi[1].type==="listItemPrefix"||ii===-1&&Bi[0]==="exit"&&(Bi[1].type==="listUnordered"||Bi[1].type==="listOrdered")){if(Mi){let vi=Gr;for(ji=void 0;vi--;){const Ri=_r[vi];if(Ri[1].type==="lineEnding"||Ri[1].type==="lineEndingBlank"){if(Ri[0]==="exit")continue;ji&&(_r[ji][1].type="lineEndingBlank",hi=!0),Ri[1].type="lineEnding",ji=vi}else if(!(Ri[1].type==="linePrefix"||Ri[1].type==="blockQuotePrefix"||Ri[1].type==="blockQuotePrefixWhitespace"||Ri[1].type==="blockQuoteMarker"||Ri[1].type==="listItemIndent"))break}Ur&&(!ji||Ur<ji)&&(Mi._spread=!0),Mi.end=Object.assign({},ji?_r[ji][1].start:Bi[1].end),_r.splice(ji||Gr,0,["exit",Mi,Bi[2]]),Gr++,Xr++}if(Bi[1].type==="listItemPrefix"){const vi={type:"listItem",_spread:!1,start:Object.assign({},Bi[1].start),end:void 0};Mi=vi,_r.splice(Gr,0,["enter",vi,Bi[2]]),Gr++,Xr++,Ur=void 0,Pi=!0}}}return _r[Dr][1]._spread=hi,Xr}function Te(_r,Dr){return Xr;function Xr(Gr){Me.call(this,_r(Gr),Gr),Dr&&Dr.call(this,Gr)}}function Re(){this.stack.push({type:"fragment",children:[]})}function Me(_r,Dr,Xr){this.stack[this.stack.length-1].children.push(_r),this.stack.push(_r),this.tokenStack.push([Dr,Xr||void 0]),_r.position={start:point(Dr.start),end:void 0}}function Ve(_r){return Dr;function Dr(Xr){_r&&_r.call(this,Xr),De.call(this,Xr)}}function De(_r,Dr){const Xr=this.stack.pop(),Gr=this.tokenStack.pop();if(Gr)Gr[0].type!==_r.type&&(Dr?Dr.call(this,_r,Gr[0]):(Gr[1]||defaultOnError).call(this,_r,Gr[0]));else throw new Error("Cannot close `"+_r.type+"` ("+stringifyPosition({start:_r.start,end:_r.end})+"): it’s not open");Xr.position.end=point(_r.end)}function $e(){return toString$1(this.stack.pop())}function Oe(){this.data.expectingFirstListItemValue=!0}function Ce(_r){if(this.data.expectingFirstListItemValue){const Dr=this.stack[this.stack.length-2];Dr.start=Number.parseInt(this.sliceSerialize(_r),10),this.data.expectingFirstListItemValue=void 0}}function Be(){const _r=this.resume(),Dr=this.stack[this.stack.length-1];Dr.lang=_r}function Ue(){const _r=this.resume(),Dr=this.stack[this.stack.length-1];Dr.meta=_r}function We(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function He(){const _r=this.resume(),Dr=this.stack[this.stack.length-1];Dr.value=_r.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function Ge(){const _r=this.resume(),Dr=this.stack[this.stack.length-1];Dr.value=_r.replace(/(\r?\n|\r)$/g,"")}function Ye(_r){const Dr=this.resume(),Xr=this.stack[this.stack.length-1];Xr.label=Dr,Xr.identifier=normalizeIdentifier(this.sliceSerialize(_r)).toLowerCase()}function Je(){const _r=this.resume(),Dr=this.stack[this.stack.length-1];Dr.title=_r}function Ze(){const _r=this.resume(),Dr=this.stack[this.stack.length-1];Dr.url=_r}function fn(_r){const Dr=this.stack[this.stack.length-1];if(!Dr.depth){const Xr=this.sliceSerialize(_r).length;Dr.depth=Xr}}function yn(){this.data.setextHeadingSlurpLineEnding=!0}function mn(_r){const Dr=this.stack[this.stack.length-1];Dr.depth=this.sliceSerialize(_r).codePointAt(0)===61?1:2}function pn(){this.data.setextHeadingSlurpLineEnding=void 0}function un(_r){const Xr=this.stack[this.stack.length-1].children;let Gr=Xr[Xr.length-1];(!Gr||Gr.type!=="text")&&(Gr=Wi(),Gr.position={start:point(_r.start),end:void 0},Xr.push(Gr)),this.stack.push(Gr)}function bn(_r){const Dr=this.stack.pop();Dr.value+=this.sliceSerialize(_r),Dr.position.end=point(_r.end)}function gn(_r){const Dr=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Xr=Dr.children[Dr.children.length-1];Xr.position.end=point(_r.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Dr.type)&&(un.call(this,_r),bn.call(this,_r))}function xn(){this.data.atHardBreak=!0}function En(){const _r=this.resume(),Dr=this.stack[this.stack.length-1];Dr.value=_r}function Pn(){const _r=this.resume(),Dr=this.stack[this.stack.length-1];Dr.value=_r}function Ln(){const _r=this.resume(),Dr=this.stack[this.stack.length-1];Dr.value=_r}function Cn(){const _r=this.stack[this.stack.length-1];if(this.data.inReference){const Dr=this.data.referenceType||"shortcut";_r.type+="Reference",_r.referenceType=Dr,delete _r.url,delete _r.title}else delete _r.identifier,delete _r.label;this.data.referenceType=void 0}function Dn(){const _r=this.stack[this.stack.length-1];if(this.data.inReference){const Dr=this.data.referenceType||"shortcut";_r.type+="Reference",_r.referenceType=Dr,delete _r.url,delete _r.title}else delete _r.identifier,delete _r.label;this.data.referenceType=void 0}function Un(_r){const Dr=this.sliceSerialize(_r),Xr=this.stack[this.stack.length-2];Xr.label=decodeString(Dr),Xr.identifier=normalizeIdentifier(Dr).toLowerCase()}function Wn(){const _r=this.stack[this.stack.length-1],Dr=this.resume(),Xr=this.stack[this.stack.length-1];if(this.data.inReference=!0,Xr.type==="link"){const Gr=_r.children;Xr.children=Gr}else Xr.alt=Dr}function On(){const _r=this.resume(),Dr=this.stack[this.stack.length-1];Dr.url=_r}function $n(){const _r=this.resume(),Dr=this.stack[this.stack.length-1];Dr.title=_r}function kn(){this.data.inReference=void 0}function In(){this.data.referenceType="collapsed"}function Kn(_r){const Dr=this.resume(),Xr=this.stack[this.stack.length-1];Xr.label=Dr,Xr.identifier=normalizeIdentifier(this.sliceSerialize(_r)).toLowerCase(),this.data.referenceType="full"}function Qn(_r){this.data.characterReferenceType=_r.type}function rr(_r){const Dr=this.sliceSerialize(_r),Xr=this.data.characterReferenceType;let Gr;Xr?(Gr=decodeNumericCharacterReference(Dr,Xr==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Gr=decodeNamedCharacterReference(Dr);const ii=this.stack[this.stack.length-1];ii.value+=Gr}function or(_r){const Dr=this.stack.pop();Dr.position.end=point(_r.end)}function pr(_r){bn.call(this,_r);const Dr=this.stack[this.stack.length-1];Dr.url=this.sliceSerialize(_r)}function mr(_r){bn.call(this,_r);const Dr=this.stack[this.stack.length-1];Dr.url="mailto:"+this.sliceSerialize(_r)}function Er(){return{type:"blockquote",children:[]}}function jr(){return{type:"code",lang:null,meta:null,value:""}}function Kr(){return{type:"inlineCode",value:""}}function Hr(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function xr(){return{type:"emphasis",children:[]}}function nr(){return{type:"heading",depth:0,children:[]}}function Oi(){return{type:"break"}}function Ti(){return{type:"html",value:""}}function yi(){return{type:"image",title:null,url:"",alt:null}}function qr(){return{type:"link",title:null,url:"",children:[]}}function di(_r){return{type:"list",ordered:_r.type==="listOrdered",start:null,spread:_r._spread,children:[]}}function Zr(_r){return{type:"listItem",spread:_r._spread,checked:null,children:[]}}function mi(){return{type:"paragraph",children:[]}}function pi(){return{type:"strong",children:[]}}function Wi(){return{type:"text",value:""}}function si(){return{type:"thematicBreak"}}}function point(n){return{line:n.line,column:n.column,offset:n.offset}}function configure(n,e){let t=-1;for(;++t<e.length;){const r=e[t];Array.isArray(r)?configure(n,r):extension(n,r)}}function extension(n,e){let t;for(t in e)if(own$2.call(e,t))switch(t){case"canContainEols":{const r=e[t];r&&n[t].push(...r);break}case"transforms":{const r=e[t];r&&n[t].push(...r);break}case"enter":case"exit":{const r=e[t];r&&Object.assign(n[t],r);break}}}function defaultOnError(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+stringifyPosition({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+stringifyPosition({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+stringifyPosition({start:e.start,end:e.end})+") is still open")}function remarkParse(n){const e=this;e.parser=t;function t(r){return fromMarkdown(r,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function blockquote(n,e){const t={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(e),!0)};return n.patch(e,t),n.applyData(e,t)}function hardBreak(n,e){const t={type:"element",tagName:"br",properties:{},children:[]};return n.patch(e,t),[n.applyData(e,t),{type:"text",value:`
`}]}function code(n,e){const t=e.value?e.value+`
`:"",r={};e.lang&&(r.className=["language-"+e.lang]);let Ee={type:"element",tagName:"code",properties:r,children:[{type:"text",value:t}]};return e.meta&&(Ee.data={meta:e.meta}),n.patch(e,Ee),Ee=n.applyData(e,Ee),Ee={type:"element",tagName:"pre",properties:{},children:[Ee]},n.patch(e,Ee),Ee}function strikethrough(n,e){const t={type:"element",tagName:"del",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function emphasis(n,e){const t={type:"element",tagName:"em",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function footnoteReference(n,e){const t=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),Ee=normalizeUri(r.toLowerCase()),Te=n.footnoteOrder.indexOf(r);let Re,Me=n.footnoteCounts.get(r);Me===void 0?(Me=0,n.footnoteOrder.push(r),Re=n.footnoteOrder.length):Re=Te+1,Me+=1,n.footnoteCounts.set(r,Me);const Ve={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+Ee,id:t+"fnref-"+Ee+(Me>1?"-"+Me:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(Re)}]};n.patch(e,Ve);const De={type:"element",tagName:"sup",properties:{},children:[Ve]};return n.patch(e,De),n.applyData(e,De)}function heading(n,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function html(n,e){if(n.options.allowDangerousHtml){const t={type:"raw",value:e.value};return n.patch(e,t),n.applyData(e,t)}}function revert(n,e){const t=e.referenceType;let r="]";if(t==="collapsed"?r+="[]":t==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const Ee=n.all(e),Te=Ee[0];Te&&Te.type==="text"?Te.value="["+Te.value:Ee.unshift({type:"text",value:"["});const Re=Ee[Ee.length-1];return Re&&Re.type==="text"?Re.value+=r:Ee.push({type:"text",value:r}),Ee}function imageReference(n,e){const t=String(e.identifier).toUpperCase(),r=n.definitionById.get(t);if(!r)return revert(n,e);const Ee={src:normalizeUri(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(Ee.title=r.title);const Te={type:"element",tagName:"img",properties:Ee,children:[]};return n.patch(e,Te),n.applyData(e,Te)}function image(n,e){const t={src:normalizeUri(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const r={type:"element",tagName:"img",properties:t,children:[]};return n.patch(e,r),n.applyData(e,r)}function inlineCode(n,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};n.patch(e,t);const r={type:"element",tagName:"code",properties:{},children:[t]};return n.patch(e,r),n.applyData(e,r)}function linkReference(n,e){const t=String(e.identifier).toUpperCase(),r=n.definitionById.get(t);if(!r)return revert(n,e);const Ee={href:normalizeUri(r.url||"")};r.title!==null&&r.title!==void 0&&(Ee.title=r.title);const Te={type:"element",tagName:"a",properties:Ee,children:n.all(e)};return n.patch(e,Te),n.applyData(e,Te)}function link(n,e){const t={href:normalizeUri(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const r={type:"element",tagName:"a",properties:t,children:n.all(e)};return n.patch(e,r),n.applyData(e,r)}function listItem(n,e,t){const r=n.all(e),Ee=t?listLoose(t):listItemLoose(e),Te={},Re=[];if(typeof e.checked=="boolean"){const $e=r[0];let Oe;$e&&$e.type==="element"&&$e.tagName==="p"?Oe=$e:(Oe={type:"element",tagName:"p",properties:{},children:[]},r.unshift(Oe)),Oe.children.length>0&&Oe.children.unshift({type:"text",value:" "}),Oe.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),Te.className=["task-list-item"]}let Me=-1;for(;++Me<r.length;){const $e=r[Me];(Ee||Me!==0||$e.type!=="element"||$e.tagName!=="p")&&Re.push({type:"text",value:`
`}),$e.type==="element"&&$e.tagName==="p"&&!Ee?Re.push(...$e.children):Re.push($e)}const Ve=r[r.length-1];Ve&&(Ee||Ve.type!=="element"||Ve.tagName!=="p")&&Re.push({type:"text",value:`
`});const De={type:"element",tagName:"li",properties:Te,children:Re};return n.patch(e,De),n.applyData(e,De)}function listLoose(n){let e=!1;if(n.type==="list"){e=n.spread||!1;const t=n.children;let r=-1;for(;!e&&++r<t.length;)e=listItemLoose(t[r])}return e}function listItemLoose(n){const e=n.spread;return e??n.children.length>1}function list(n,e){const t={},r=n.all(e);let Ee=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++Ee<r.length;){const Re=r[Ee];if(Re.type==="element"&&Re.tagName==="li"&&Re.properties&&Array.isArray(Re.properties.className)&&Re.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const Te={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:n.wrap(r,!0)};return n.patch(e,Te),n.applyData(e,Te)}function paragraph(n,e){const t={type:"element",tagName:"p",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function root(n,e){const t={type:"root",children:n.wrap(n.all(e))};return n.patch(e,t),n.applyData(e,t)}function strong(n,e){const t={type:"element",tagName:"strong",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function table(n,e){const t=n.all(e),r=t.shift(),Ee=[];if(r){const Re={type:"element",tagName:"thead",properties:{},children:n.wrap([r],!0)};n.patch(e.children[0],Re),Ee.push(Re)}if(t.length>0){const Re={type:"element",tagName:"tbody",properties:{},children:n.wrap(t,!0)},Me=pointStart(e.children[1]),Ve=pointEnd(e.children[e.children.length-1]);Me&&Ve&&(Re.position={start:Me,end:Ve}),Ee.push(Re)}const Te={type:"element",tagName:"table",properties:{},children:n.wrap(Ee,!0)};return n.patch(e,Te),n.applyData(e,Te)}function tableRow(n,e,t){const r=t?t.children:void 0,Te=(r?r.indexOf(e):1)===0?"th":"td",Re=t&&t.type==="table"?t.align:void 0,Me=Re?Re.length:e.children.length;let Ve=-1;const De=[];for(;++Ve<Me;){const Oe=e.children[Ve],Ce={},Be=Re?Re[Ve]:void 0;Be&&(Ce.align=Be);let Ue={type:"element",tagName:Te,properties:Ce,children:[]};Oe&&(Ue.children=n.all(Oe),n.patch(Oe,Ue),Ue=n.applyData(Oe,Ue)),De.push(Ue)}const $e={type:"element",tagName:"tr",properties:{},children:n.wrap(De,!0)};return n.patch(e,$e),n.applyData(e,$e)}function tableCell(n,e){const t={type:"element",tagName:"td",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}const tab=9,space=32;function trimLines(n){const e=String(n),t=/\r?\n|\r/g;let r=t.exec(e),Ee=0;const Te=[];for(;r;)Te.push(trimLine(e.slice(Ee,r.index),Ee>0,!0),r[0]),Ee=r.index+r[0].length,r=t.exec(e);return Te.push(trimLine(e.slice(Ee),Ee>0,!1)),Te.join("")}function trimLine(n,e,t){let r=0,Ee=n.length;if(e){let Te=n.codePointAt(r);for(;Te===tab||Te===space;)r++,Te=n.codePointAt(r)}if(t){let Te=n.codePointAt(Ee-1);for(;Te===tab||Te===space;)Ee--,Te=n.codePointAt(Ee-1)}return Ee>r?n.slice(r,Ee):""}function text(n,e){const t={type:"text",value:trimLines(String(e.value))};return n.patch(e,t),n.applyData(e,t)}function thematicBreak(n,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return n.patch(e,t),n.applyData(e,t)}const handlers={blockquote,break:hardBreak,code,delete:strikethrough,emphasis,footnoteReference,heading,html,imageReference,image,inlineCode,linkReference,link,listItem,list,paragraph,root,strong,table,tableCell,tableRow,text,thematicBreak,toml:ignore,yaml:ignore,definition:ignore,footnoteDefinition:ignore};function ignore(){}const VOID=-1,PRIMITIVE=0,ARRAY=1,OBJECT=2,DATE=3,REGEXP=4,MAP=5,SET=6,ERROR=7,BIGINT=8,env$3=typeof self=="object"?self:globalThis,deserializer=(n,e)=>{const t=(Ee,Te)=>(n.set(Te,Ee),Ee),r=Ee=>{if(n.has(Ee))return n.get(Ee);const[Te,Re]=e[Ee];switch(Te){case PRIMITIVE:case VOID:return t(Re,Ee);case ARRAY:{const Me=t([],Ee);for(const Ve of Re)Me.push(r(Ve));return Me}case OBJECT:{const Me=t({},Ee);for(const[Ve,De]of Re)Me[r(Ve)]=r(De);return Me}case DATE:return t(new Date(Re),Ee);case REGEXP:{const{source:Me,flags:Ve}=Re;return t(new RegExp(Me,Ve),Ee)}case MAP:{const Me=t(new Map,Ee);for(const[Ve,De]of Re)Me.set(r(Ve),r(De));return Me}case SET:{const Me=t(new Set,Ee);for(const Ve of Re)Me.add(r(Ve));return Me}case ERROR:{const{name:Me,message:Ve}=Re;return t(new env$3[Me](Ve),Ee)}case BIGINT:return t(BigInt(Re),Ee);case"BigInt":return t(Object(BigInt(Re)),Ee);case"ArrayBuffer":return t(new Uint8Array(Re).buffer,Re);case"DataView":{const{buffer:Me}=new Uint8Array(Re);return t(new DataView(Me),Re)}}return t(new env$3[Te](Re),Ee)};return r},deserialize=n=>deserializer(new Map,n)(0),EMPTY="",{toString}={},{keys}=Object,typeOf=n=>{const e=typeof n;if(e!=="object"||!n)return[PRIMITIVE,e];const t=toString.call(n).slice(8,-1);switch(t){case"Array":return[ARRAY,EMPTY];case"Object":return[OBJECT,EMPTY];case"Date":return[DATE,EMPTY];case"RegExp":return[REGEXP,EMPTY];case"Map":return[MAP,EMPTY];case"Set":return[SET,EMPTY];case"DataView":return[ARRAY,t]}return t.includes("Array")?[ARRAY,t]:t.includes("Error")?[ERROR,t]:[OBJECT,t]},shouldSkip=([n,e])=>n===PRIMITIVE&&(e==="function"||e==="symbol"),serializer=(n,e,t,r)=>{const Ee=(Re,Me)=>{const Ve=r.push(Re)-1;return t.set(Me,Ve),Ve},Te=Re=>{if(t.has(Re))return t.get(Re);let[Me,Ve]=typeOf(Re);switch(Me){case PRIMITIVE:{let $e=Re;switch(Ve){case"bigint":Me=BIGINT,$e=Re.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+Ve);$e=null;break;case"undefined":return Ee([VOID],Re)}return Ee([Me,$e],Re)}case ARRAY:{if(Ve){let Ce=Re;return Ve==="DataView"?Ce=new Uint8Array(Re.buffer):Ve==="ArrayBuffer"&&(Ce=new Uint8Array(Re)),Ee([Ve,[...Ce]],Re)}const $e=[],Oe=Ee([Me,$e],Re);for(const Ce of Re)$e.push(Te(Ce));return Oe}case OBJECT:{if(Ve)switch(Ve){case"BigInt":return Ee([Ve,Re.toString()],Re);case"Boolean":case"Number":case"String":return Ee([Ve,Re.valueOf()],Re)}if(e&&"toJSON"in Re)return Te(Re.toJSON());const $e=[],Oe=Ee([Me,$e],Re);for(const Ce of keys(Re))(n||!shouldSkip(typeOf(Re[Ce])))&&$e.push([Te(Ce),Te(Re[Ce])]);return Oe}case DATE:return Ee([Me,Re.toISOString()],Re);case REGEXP:{const{source:$e,flags:Oe}=Re;return Ee([Me,{source:$e,flags:Oe}],Re)}case MAP:{const $e=[],Oe=Ee([Me,$e],Re);for(const[Ce,Be]of Re)(n||!(shouldSkip(typeOf(Ce))||shouldSkip(typeOf(Be))))&&$e.push([Te(Ce),Te(Be)]);return Oe}case SET:{const $e=[],Oe=Ee([Me,$e],Re);for(const Ce of Re)(n||!shouldSkip(typeOf(Ce)))&&$e.push(Te(Ce));return Oe}}const{message:De}=Re;return Ee([Me,{name:Ve,message:De}],Re)};return Te},serialize=(n,{json:e,lossy:t}={})=>{const r=[];return serializer(!(e||t),!!e,new Map,r)(n),r},structuredClone$1=typeof structuredClone=="function"?(n,e)=>e&&("json"in e||"lossy"in e)?deserialize(serialize(n,e)):structuredClone(n):(n,e)=>deserialize(serialize(n,e));function defaultFootnoteBackContent(n,e){const t=[{type:"text",value:"↩"}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function defaultFootnoteBackLabel(n,e){return"Back to reference "+(n+1)+(e>1?"-"+e:"")}function footer(n){const e=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",t=n.options.footnoteBackContent||defaultFootnoteBackContent,r=n.options.footnoteBackLabel||defaultFootnoteBackLabel,Ee=n.options.footnoteLabel||"Footnotes",Te=n.options.footnoteLabelTagName||"h2",Re=n.options.footnoteLabelProperties||{className:["sr-only"]},Me=[];let Ve=-1;for(;++Ve<n.footnoteOrder.length;){const De=n.footnoteById.get(n.footnoteOrder[Ve]);if(!De)continue;const $e=n.all(De),Oe=String(De.identifier).toUpperCase(),Ce=normalizeUri(Oe.toLowerCase());let Be=0;const Ue=[],We=n.footnoteCounts.get(Oe);for(;We!==void 0&&++Be<=We;){Ue.length>0&&Ue.push({type:"text",value:" "});let Ye=typeof t=="string"?t:t(Ve,Be);typeof Ye=="string"&&(Ye={type:"text",value:Ye}),Ue.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+Ce+(Be>1?"-"+Be:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(Ve,Be),className:["data-footnote-backref"]},children:Array.isArray(Ye)?Ye:[Ye]})}const He=$e[$e.length-1];if(He&&He.type==="element"&&He.tagName==="p"){const Ye=He.children[He.children.length-1];Ye&&Ye.type==="text"?Ye.value+=" ":He.children.push({type:"text",value:" "}),He.children.push(...Ue)}else $e.push(...Ue);const Ge={type:"element",tagName:"li",properties:{id:e+"fn-"+Ce},children:n.wrap($e,!0)};n.patch(De,Ge),Me.push(Ge)}if(Me.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:Te,properties:{...structuredClone$1(Re),id:"footnote-label"},children:[{type:"text",value:Ee}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:n.wrap(Me,!0)},{type:"text",value:`
`}]}}const convert=function(n){if(n==null)return ok;if(typeof n=="function")return castFactory(n);if(typeof n=="object")return Array.isArray(n)?anyFactory(n):propsFactory(n);if(typeof n=="string")return typeFactory(n);throw new Error("Expected function, string, or object as test")};function anyFactory(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=convert(n[t]);return castFactory(r);function r(...Ee){let Te=-1;for(;++Te<e.length;)if(e[Te].apply(this,Ee))return!0;return!1}}function propsFactory(n){const e=n;return castFactory(t);function t(r){const Ee=r;let Te;for(Te in n)if(Ee[Te]!==e[Te])return!1;return!0}}function typeFactory(n){return castFactory(e);function e(t){return t&&t.type===n}}function castFactory(n){return e;function e(t,r,Ee){return!!(looksLikeANode(t)&&n.call(this,t,typeof r=="number"?r:void 0,Ee||void 0))}}function ok(){return!0}function looksLikeANode(n){return n!==null&&typeof n=="object"&&"type"in n}function color(n){return n}const empty=[],CONTINUE=!0,EXIT=!1,SKIP="skip";function visitParents(n,e,t,r){let Ee;typeof e=="function"&&typeof t!="function"?(r=t,t=e):Ee=e;const Te=convert(Ee),Re=r?-1:1;Me(n,void 0,[])();function Me(Ve,De,$e){const Oe=Ve&&typeof Ve=="object"?Ve:{};if(typeof Oe.type=="string"){const Be=typeof Oe.tagName=="string"?Oe.tagName:typeof Oe.name=="string"?Oe.name:void 0;Object.defineProperty(Ce,"name",{value:"node ("+(Ve.type+(Be?"<"+Be+">":""))+")"})}return Ce;function Ce(){let Be=empty,Ue,We,He;if((!e||Te(Ve,De,$e[$e.length-1]||void 0))&&(Be=toResult(t(Ve,$e)),Be[0]===EXIT))return Be;if("children"in Ve&&Ve.children){const Ge=Ve;if(Ge.children&&Be[0]!==SKIP)for(We=(r?Ge.children.length:-1)+Re,He=$e.concat(Ge);We>-1&&We<Ge.children.length;){const Ye=Ge.children[We];if(Ue=Me(Ye,We,He)(),Ue[0]===EXIT)return Ue;We=typeof Ue[1]=="number"?Ue[1]:We+Re}}return Be}}}function toResult(n){return Array.isArray(n)?n:typeof n=="number"?[CONTINUE,n]:n==null?empty:[n]}function visit(n,e,t,r){let Ee,Te,Re;typeof e=="function"&&typeof t!="function"?(Te=void 0,Re=e,Ee=t):(Te=e,Re=t,Ee=r),visitParents(n,Te,Me,Ee);function Me(Ve,De){const $e=De[De.length-1],Oe=$e?$e.children.indexOf(Ve):void 0;return Re(Ve,Oe,$e)}}const own$1={}.hasOwnProperty,emptyOptions={};function createState(n,e){const t=e||emptyOptions,r=new Map,Ee=new Map,Te=new Map,Re={...handlers,...t.handlers},Me={all:De,applyData,definitionById:r,footnoteById:Ee,footnoteCounts:Te,footnoteOrder:[],handlers:Re,one:Ve,options:t,patch,wrap:wrap$1};return visit(n,function($e){if($e.type==="definition"||$e.type==="footnoteDefinition"){const Oe=$e.type==="definition"?r:Ee,Ce=String($e.identifier).toUpperCase();Oe.has(Ce)||Oe.set(Ce,$e)}}),Me;function Ve($e,Oe){const Ce=$e.type,Be=Me.handlers[Ce];if(own$1.call(Me.handlers,Ce)&&Be)return Be(Me,$e,Oe);if(Me.options.passThrough&&Me.options.passThrough.includes(Ce)){if("children"in $e){const{children:We,...He}=$e,Ge=structuredClone$1(He);return Ge.children=Me.all($e),Ge}return structuredClone$1($e)}return(Me.options.unknownHandler||defaultUnknownHandler)(Me,$e,Oe)}function De($e){const Oe=[];if("children"in $e){const Ce=$e.children;let Be=-1;for(;++Be<Ce.length;){const Ue=Me.one(Ce[Be],$e);if(Ue){if(Be&&Ce[Be-1].type==="break"&&(!Array.isArray(Ue)&&Ue.type==="text"&&(Ue.value=trimMarkdownSpaceStart(Ue.value)),!Array.isArray(Ue)&&Ue.type==="element")){const We=Ue.children[0];We&&We.type==="text"&&(We.value=trimMarkdownSpaceStart(We.value))}Array.isArray(Ue)?Oe.push(...Ue):Oe.push(Ue)}}}return Oe}}function patch(n,e){n.position&&(e.position=position$1(n))}function applyData(n,e){let t=e;if(n&&n.data){const r=n.data.hName,Ee=n.data.hChildren,Te=n.data.hProperties;if(typeof r=="string")if(t.type==="element")t.tagName=r;else{const Re="children"in t?t.children:[t];t={type:"element",tagName:r,properties:{},children:Re}}t.type==="element"&&Te&&Object.assign(t.properties,structuredClone$1(Te)),"children"in t&&t.children&&Ee!==null&&Ee!==void 0&&(t.children=Ee)}return t}function defaultUnknownHandler(n,e){const t=e.data||{},r="value"in e&&!(own$1.call(t,"hProperties")||own$1.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:n.all(e)};return n.patch(e,r),n.applyData(e,r)}function wrap$1(n,e){const t=[];let r=-1;for(e&&t.push({type:"text",value:`
`});++r<n.length;)r&&t.push({type:"text",value:`
`}),t.push(n[r]);return e&&n.length>0&&t.push({type:"text",value:`
`}),t}function trimMarkdownSpaceStart(n){let e=0,t=n.charCodeAt(e);for(;t===9||t===32;)e++,t=n.charCodeAt(e);return n.slice(e)}function toHast(n,e){const t=createState(n,e),r=t.one(n,void 0),Ee=footer(t),Te=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return Ee&&Te.children.push({type:"text",value:`
`},Ee),Te}function remarkRehype(n,e){return n&&"run"in n?async function(t,r){const Ee=toHast(t,{file:r,...e});await n.run(Ee,r)}:function(t,r){return toHast(t,{file:r,...n||e})}}function bail(n){if(n)throw n}var extend$1,hasRequiredExtend;function requireExtend(){if(hasRequiredExtend)return extend$1;hasRequiredExtend=1;var n=Object.prototype.hasOwnProperty,e=Object.prototype.toString,t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,Ee=function(De){return typeof Array.isArray=="function"?Array.isArray(De):e.call(De)==="[object Array]"},Te=function(De){if(!De||e.call(De)!=="[object Object]")return!1;var $e=n.call(De,"constructor"),Oe=De.constructor&&De.constructor.prototype&&n.call(De.constructor.prototype,"isPrototypeOf");if(De.constructor&&!$e&&!Oe)return!1;var Ce;for(Ce in De);return typeof Ce>"u"||n.call(De,Ce)},Re=function(De,$e){t&&$e.name==="__proto__"?t(De,$e.name,{enumerable:!0,configurable:!0,value:$e.newValue,writable:!0}):De[$e.name]=$e.newValue},Me=function(De,$e){if($e==="__proto__")if(n.call(De,$e)){if(r)return r(De,$e).value}else return;return De[$e]};return extend$1=function Ve(){var De,$e,Oe,Ce,Be,Ue,We=arguments[0],He=1,Ge=arguments.length,Ye=!1;for(typeof We=="boolean"&&(Ye=We,We=arguments[1]||{},He=2),(We==null||typeof We!="object"&&typeof We!="function")&&(We={});He<Ge;++He)if(De=arguments[He],De!=null)for($e in De)Oe=Me(We,$e),Ce=Me(De,$e),We!==Ce&&(Ye&&Ce&&(Te(Ce)||(Be=Ee(Ce)))?(Be?(Be=!1,Ue=Oe&&Ee(Oe)?Oe:[]):Ue=Oe&&Te(Oe)?Oe:{},Re(We,{name:$e,newValue:Ve(Ye,Ue,Ce)})):typeof Ce<"u"&&Re(We,{name:$e,newValue:Ce}));return We},extend$1}var extendExports=requireExtend();const extend=getDefaultExportFromCjs(extendExports);function isPlainObject(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function trough(){const n=[],e={run:t,use:r};return e;function t(...Ee){let Te=-1;const Re=Ee.pop();if(typeof Re!="function")throw new TypeError("Expected function as last argument, not "+Re);Me(null,...Ee);function Me(Ve,...De){const $e=n[++Te];let Oe=-1;if(Ve){Re(Ve);return}for(;++Oe<Ee.length;)(De[Oe]===null||De[Oe]===void 0)&&(De[Oe]=Ee[Oe]);Ee=De,$e?wrap($e,Me)(...De):Re(null,...De)}}function r(Ee){if(typeof Ee!="function")throw new TypeError("Expected `middelware` to be a function, not "+Ee);return n.push(Ee),e}}function wrap(n,e){let t;return r;function r(...Re){const Me=n.length>Re.length;let Ve;Me&&Re.push(Ee);try{Ve=n.apply(this,Re)}catch(De){const $e=De;if(Me&&t)throw $e;return Ee($e)}Me||(Ve&&Ve.then&&typeof Ve.then=="function"?Ve.then(Te,Ee):Ve instanceof Error?Ee(Ve):Te(Ve))}function Ee(Re,...Me){t||(t=!0,e(Re,...Me))}function Te(Re){Ee(null,Re)}}const minpath={basename,dirname,extname,join,sep:"/"};function basename(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');assertPath$1(n);let t=0,r=-1,Ee=n.length,Te;if(e===void 0||e.length===0||e.length>n.length){for(;Ee--;)if(n.codePointAt(Ee)===47){if(Te){t=Ee+1;break}}else r<0&&(Te=!0,r=Ee+1);return r<0?"":n.slice(t,r)}if(e===n)return"";let Re=-1,Me=e.length-1;for(;Ee--;)if(n.codePointAt(Ee)===47){if(Te){t=Ee+1;break}}else Re<0&&(Te=!0,Re=Ee+1),Me>-1&&(n.codePointAt(Ee)===e.codePointAt(Me--)?Me<0&&(r=Ee):(Me=-1,r=Re));return t===r?r=Re:r<0&&(r=n.length),n.slice(t,r)}function dirname(n){if(assertPath$1(n),n.length===0)return".";let e=-1,t=n.length,r;for(;--t;)if(n.codePointAt(t)===47){if(r){e=t;break}}else r||(r=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function extname(n){assertPath$1(n);let e=n.length,t=-1,r=0,Ee=-1,Te=0,Re;for(;e--;){const Me=n.codePointAt(e);if(Me===47){if(Re){r=e+1;break}continue}t<0&&(Re=!0,t=e+1),Me===46?Ee<0?Ee=e:Te!==1&&(Te=1):Ee>-1&&(Te=-1)}return Ee<0||t<0||Te===0||Te===1&&Ee===t-1&&Ee===r+1?"":n.slice(Ee,t)}function join(...n){let e=-1,t;for(;++e<n.length;)assertPath$1(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":normalize(t)}function normalize(n){assertPath$1(n);const e=n.codePointAt(0)===47;let t=normalizeString(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function normalizeString(n,e){let t="",r=0,Ee=-1,Te=0,Re=-1,Me,Ve;for(;++Re<=n.length;){if(Re<n.length)Me=n.codePointAt(Re);else{if(Me===47)break;Me=47}if(Me===47){if(!(Ee===Re-1||Te===1))if(Ee!==Re-1&&Te===2){if(t.length<2||r!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(Ve=t.lastIndexOf("/"),Ve!==t.length-1){Ve<0?(t="",r=0):(t=t.slice(0,Ve),r=t.length-1-t.lastIndexOf("/")),Ee=Re,Te=0;continue}}else if(t.length>0){t="",r=0,Ee=Re,Te=0;continue}}e&&(t=t.length>0?t+"/..":"..",r=2)}else t.length>0?t+="/"+n.slice(Ee+1,Re):t=n.slice(Ee+1,Re),r=Re-Ee-1;Ee=Re,Te=0}else Me===46&&Te>-1?Te++:Te=-1}return t}function assertPath$1(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const minproc={cwd};function cwd(){return"/"}function isUrl(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function urlToPath(n){if(typeof n=="string")n=new URL(n);else if(!isUrl(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return getPathFromURLPosix(n)}function getPathFromURLPosix(n){if(n.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const r=e.codePointAt(t+2);if(r===70||r===102){const Ee=new TypeError("File URL path must not include encoded / characters");throw Ee.code="ERR_INVALID_FILE_URL_PATH",Ee}}return decodeURIComponent(e)}const order=["history","path","basename","stem","extname","dirname"];class VFile{constructor(e){let t;e?isUrl(e)?t={path:e}:typeof e=="string"||isUint8Array$1(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":minproc.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<order.length;){const Te=order[r];Te in t&&t[Te]!==void 0&&t[Te]!==null&&(this[Te]=Te==="history"?[...t[Te]]:t[Te])}let Ee;for(Ee in t)order.includes(Ee)||(this[Ee]=t[Ee])}get basename(){return typeof this.path=="string"?minpath.basename(this.path):void 0}set basename(e){assertNonEmpty(e,"basename"),assertPart(e,"basename"),this.path=minpath.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?minpath.dirname(this.path):void 0}set dirname(e){assertPath(this.basename,"dirname"),this.path=minpath.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?minpath.extname(this.path):void 0}set extname(e){if(assertPart(e,"extname"),assertPath(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=minpath.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){isUrl(e)&&(e=urlToPath(e)),assertNonEmpty(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?minpath.basename(this.path,this.extname):void 0}set stem(e){assertNonEmpty(e,"stem"),assertPart(e,"stem"),this.path=minpath.join(this.dirname||"",e+(this.extname||""))}fail(e,t,r){const Ee=this.message(e,t,r);throw Ee.fatal=!0,Ee}info(e,t,r){const Ee=this.message(e,t,r);return Ee.fatal=void 0,Ee}message(e,t,r){const Ee=new VFileMessage(e,t,r);return this.path&&(Ee.name=this.path+":"+Ee.name,Ee.file=this.path),Ee.fatal=!1,this.messages.push(Ee),Ee}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function assertPart(n,e){if(n&&n.includes(minpath.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+minpath.sep+"`")}function assertNonEmpty(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function assertPath(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function isUint8Array$1(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const CallableInstance=function(n){const r=this.constructor.prototype,Ee=r[n],Te=function(){return Ee.apply(Te,arguments)};return Object.setPrototypeOf(Te,r),Te},own={}.hasOwnProperty;let Processor$1=class Tf extends CallableInstance{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=trough()}copy(){const e=new Tf;let t=-1;for(;++t<this.attachers.length;){const r=this.attachers[t];e.use(...r)}return e.data(extend(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(assertUnfrozen("data",this.frozen),this.namespace[e]=t,this):own.call(this.namespace,e)&&this.namespace[e]||void 0:e?(assertUnfrozen("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const Ee=t.call(e,...r);typeof Ee=="function"&&this.transformers.use(Ee)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=vfile(e),r=this.parser||this.Parser;return assertParser("parse",r),r(String(t),t)}process(e,t){const r=this;return this.freeze(),assertParser("process",this.parser||this.Parser),assertCompiler("process",this.compiler||this.Compiler),t?Ee(void 0,t):new Promise(Ee);function Ee(Te,Re){const Me=vfile(e),Ve=r.parse(Me);r.run(Ve,Me,function($e,Oe,Ce){if($e||!Oe||!Ce)return De($e);const Be=Oe,Ue=r.stringify(Be,Ce);looksLikeAValue(Ue)?Ce.value=Ue:Ce.result=Ue,De($e,Ce)});function De($e,Oe){$e||!Oe?Re($e):Te?Te(Oe):t(void 0,Oe)}}}processSync(e){let t=!1,r;return this.freeze(),assertParser("processSync",this.parser||this.Parser),assertCompiler("processSync",this.compiler||this.Compiler),this.process(e,Ee),assertDone("processSync","process",t),r;function Ee(Te,Re){t=!0,bail(Te),r=Re}}run(e,t,r){assertNode(e),this.freeze();const Ee=this.transformers;return!r&&typeof t=="function"&&(r=t,t=void 0),r?Te(void 0,r):new Promise(Te);function Te(Re,Me){const Ve=vfile(t);Ee.run(e,Ve,De);function De($e,Oe,Ce){const Be=Oe||e;$e?Me($e):Re?Re(Be):r(void 0,Be,Ce)}}}runSync(e,t){let r=!1,Ee;return this.run(e,t,Te),assertDone("runSync","run",r),Ee;function Te(Re,Me){bail(Re),Ee=Me,r=!0}}stringify(e,t){this.freeze();const r=vfile(t),Ee=this.compiler||this.Compiler;return assertCompiler("stringify",Ee),assertNode(e),Ee(e,r)}use(e,...t){const r=this.attachers,Ee=this.namespace;if(assertUnfrozen("use",this.frozen),e!=null)if(typeof e=="function")Ve(e,t);else if(typeof e=="object")Array.isArray(e)?Me(e):Re(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function Te(De){if(typeof De=="function")Ve(De,[]);else if(typeof De=="object")if(Array.isArray(De)){const[$e,...Oe]=De;Ve($e,Oe)}else Re(De);else throw new TypeError("Expected usable value, not `"+De+"`")}function Re(De){if(!("plugins"in De)&&!("settings"in De))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");Me(De.plugins),De.settings&&(Ee.settings=extend(!0,Ee.settings,De.settings))}function Me(De){let $e=-1;if(De!=null)if(Array.isArray(De))for(;++$e<De.length;){const Oe=De[$e];Te(Oe)}else throw new TypeError("Expected a list of plugins, not `"+De+"`")}function Ve(De,$e){let Oe=-1,Ce=-1;for(;++Oe<r.length;)if(r[Oe][0]===De){Ce=Oe;break}if(Ce===-1)r.push([De,...$e]);else if($e.length>0){let[Be,...Ue]=$e;const We=r[Ce][1];isPlainObject(We)&&isPlainObject(Be)&&(Be=extend(!0,We,Be)),r[Ce]=[De,Be,...Ue]}}}};const unified=new Processor$1().freeze();function assertParser(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function assertCompiler(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function assertUnfrozen(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function assertNode(n){if(!isPlainObject(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function assertDone(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function vfile(n){return looksLikeAVFile(n)?n:new VFile(n)}function looksLikeAVFile(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function looksLikeAValue(n){return typeof n=="string"||isUint8Array(n)}function isUint8Array(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const changelog="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",emptyPlugins=[],emptyRemarkRehypeOptions={allowDangerousHtml:!0},safeProtocol=/^(https?|ircs?|mailto|xmpp)$/i,deprecations=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Markdown(n){const e=createProcessor(n),t=createFile(n);return post(e.runSync(e.parse(t),t),n)}function createProcessor(n){const e=n.rehypePlugins||emptyPlugins,t=n.remarkPlugins||emptyPlugins,r=n.remarkRehypeOptions?{...n.remarkRehypeOptions,...emptyRemarkRehypeOptions}:emptyRemarkRehypeOptions;return unified().use(remarkParse).use(t).use(remarkRehype,r).use(e)}function createFile(n){const e=n.children||"",t=new VFile;return typeof e=="string"&&(t.value=e),t}function post(n,e){const t=e.allowedElements,r=e.allowElement,Ee=e.components,Te=e.disallowedElements,Re=e.skipHtml,Me=e.unwrapDisallowed,Ve=e.urlTransform||defaultUrlTransform;for(const $e of deprecations)Object.hasOwn(e,$e.from)&&(""+$e.from+($e.to?"use `"+$e.to+"` instead":"remove it")+changelog+$e.id,void 0);return visit(n,De),toJsxRuntime(n,{Fragment:jsxRuntimeExports.Fragment,components:Ee,ignoreInvalidStyle:!0,jsx:jsxRuntimeExports.jsx,jsxs:jsxRuntimeExports.jsxs,passKeys:!0,passNode:!0});function De($e,Oe,Ce){if($e.type==="raw"&&Ce&&typeof Oe=="number")return Re?Ce.children.splice(Oe,1):Ce.children[Oe]={type:"text",value:$e.value},Oe;if($e.type==="element"){let Be;for(Be in urlAttributes)if(Object.hasOwn(urlAttributes,Be)&&Object.hasOwn($e.properties,Be)){const Ue=$e.properties[Be],We=urlAttributes[Be];(We===null||We.includes($e.tagName))&&($e.properties[Be]=Ve(String(Ue||""),Be,$e))}}if($e.type==="element"){let Be=t?!t.includes($e.tagName):Te?Te.includes($e.tagName):!1;if(!Be&&r&&typeof Oe=="number"&&(Be=!r($e,Oe,Ce)),Be&&Ce&&typeof Oe=="number")return Me&&$e.children?Ce.children.splice(Oe,1,...$e.children):Ce.children.splice(Oe,1),Oe}}}function defaultUrlTransform(n){const e=n.indexOf(":"),t=n.indexOf("?"),r=n.indexOf("#"),Ee=n.indexOf("/");return e===-1||Ee!==-1&&e>Ee||t!==-1&&e>t||r!==-1&&e>r||safeProtocol.test(n.slice(0,e))?n:""}const scholarshipsData=[{name:"National Means-Cum-Merit Scholarship (NMMS)",states:["All"],grades:["9","10"],board:["CBSE","ICSE","State Board"],category:"All",income_limit:35e4,deadline:"2025-10-31",url:"https://scholarships.gov.in"},{name:"Inspire Scholarship (DST)",states:["All"],grades:["12","College"],board:["CBSE","ICSE","State Board"],category:"All",income_limit:8e5,deadline:"2025-11-30",url:"https://online-inspire.gov.in"},{name:"Kishore Vaigyanik Protsahan Yojana (KVPY)",states:["All"],grades:["11","12","College"],board:["CBSE","ICSE","State Board"],category:"All",income_limit:1e6,deadline:"2025-08-15",url:"https://kvpy.iisc.ac.in"},{name:"Maulana Azad National Fellowship (MANF)",states:["All"],grades:["College"],board:["CBSE","ICSE","State Board"],category:"Minority",income_limit:6e5,deadline:"2025-09-15",url:"https://minorityaffairs.gov.in"},{name:"ONGC Scholarship for SC/ST",states:["All"],grades:["College"],board:["CBSE","ICSE","State Board"],category:"SC",income_limit:45e4,deadline:"2025-12-01",url:"https://ongcindia.com"},{name:"Buddy4Study - Sardar Patel Scholarship",states:["All"],grades:["11","12"],board:["CBSE","ICSE","State Board"],category:"All",income_limit:6e5,deadline:"2025-09-20",url:"https://www.buddy4study.com"},{name:"Ishan Uday (North Eastern Region)",states:["Assam","Meghalaya","Manipur","Tripura","Nagaland","Arunachal Pradesh","Mizoram","Sikkim"],grades:["College"],board:["CBSE","ICSE","State Board"],category:"All",income_limit:45e4,deadline:"2025-10-10",url:"https://scholarships.gov.in"},{name:"Prime Minister’s Scholarship Scheme (PMSS)",states:["All"],grades:["College"],board:["CBSE","ICSE","State Board"],category:"All",income_limit:6e5,deadline:"2025-08-30",url:"https://ksb.gov.in"},{name:"NSP Post Matric Scholarship (SC Students)",states:["All"],grades:["11","12","College"],board:["CBSE","ICSE","State Board"],category:"SC",income_limit:25e4,deadline:"2025-10-15",url:"https://scholarships.gov.in"},{name:"NTSE (National Talent Search Exam)",states:["All"],grades:["10"],board:["CBSE","ICSE","State Board"],category:"All",income_limit:1e6,deadline:"2025-07-30",url:"https://ncert.nic.in"}];function ScholarshipScout(){const[n,e]=reactExports.useState({state:"",board:"",grade:"",category:"",income:"",interests:"",achievements:""}),[t,r]=reactExports.useState(0),[Ee,Te]=reactExports.useState(!1),[Re,Me]=reactExports.useState([]),Ve=reactExports.useRef(null),De=[{label:"State",key:"state",type:"select",options:["West Bengal","Bihar","Maharashtra","Tamil Nadu","All"]},{label:"Board",key:"board",type:"select",options:["CBSE","ICSE","State Board"]},{label:"Grade",key:"grade",type:"select",options:["9","10","11","12","College"]},{label:"Category",key:"category",type:"select",options:["General","SC","ST","OBC","EWS"]},{label:"Family Income (₹)",key:"income",type:"number"},{label:"Interests",key:"interests",type:"text",placeholder:"e.g. Science, Arts"},{label:"Achievements",key:"achievements",type:"text",placeholder:"Optional, e.g. Olympiad winner"}],$e=Ue=>{e(We=>({...We,[De[t].key]:Ue.target.value}))},Oe=Ue=>{try{const We=new URL(Ue);return["gov.in","edu.in","ac.in","org","com"].some(He=>We.hostname.endsWith(He))}catch{return!1}},Ce=async()=>{if(t<De.length-1){r(t+1);return}Te(!0);const Ue=scholarshipsData.filter(He=>(He.states.includes(n.state)||He.states.includes("All"))&&He.board.includes(n.board)&&He.grades.includes(n.grade)&&Number(n.income)<=He.income_limit&&(He.category==="All"||He.category===n.category)&&Oe(He.url)),We=`
You are ScholarshipScout, an accurate scholarship advisor for Indian students.

Only recommend real, safe, working scholarships. Use only this list to recommend.
Avoid fake or sketchy URLs. Prioritize trusted sources (NSP, UGC, DST, Buddy4Study, KVPY, etc).

Scholarship Data:
${JSON.stringify(Ue,null,2)}

Student Profile:
- State: ${n.state}
- Board: ${n.board}
- Grade: ${n.grade}
- Category: ${n.category}
- Family Income: ₹${n.income}
- Interests: ${n.interests}
- Achievements: ${n.achievements}

Respond with max 5 matches in this format:
1. **Scholarship Name**
Why it's a good match.
🔗 [Apply here](link)
`.trim();try{const Ye=((await axios.post("https://api.groq.com/openai/v1/chat/completions",{model:"llama3-70b-8192",messages:[{role:"system",content:"You're ScholarshipScout, an AI expert for verified Indian scholarships."},{role:"user",content:We}],temperature:.7},{headers:{Authorization:"Bearer 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"}})).data.choices[0].message.content||"").split(/\n{2,}/).filter(Boolean);Me(Ye)}catch(He){console.error("AI error, using fallback:",He);const Ge=Ue.map(Ye=>`**${Ye.name}**
Deadline: **${Ye.deadline}**
🔗 [Apply here](${Ye.url})`);Me(Ge)}finally{Te(!1),Ve.current?.scrollIntoView({behavior:"smooth"})}},Be=De[t];return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gradient-to-br from-yellow-200 via-orange-100 to-yellow-300 p-6 font-poppins text-gray-900",children:jsxRuntimeExports.jsxs("div",{className:"max-w-2xl mx-auto bg-white/50 backdrop-blur-xl p-8 rounded-3xl border border-orange-200 shadow-2xl",children:[jsxRuntimeExports.jsx("h1",{className:"text-4xl font-extrabold text-center bg-gradient-to-r from-yellow-700 via-orange-500 to-red-500 bg-clip-text text-transparent mb-6 drop-shadow-md",children:"🎓 ScholarshipScout"}),Re.length===0&&jsxRuntimeExports.jsxs("div",{className:"space-y-4 animate-fade-in",children:[jsxRuntimeExports.jsx("label",{className:"block text-lg font-semibold text-orange-800",children:Be.label}),Be.type==="select"?jsxRuntimeExports.jsxs("select",{value:n[Be.key],onChange:$e,className:"w-full p-3 rounded-xl border bg-yellow-50 focus:outline-none focus:ring-2 focus:ring-orange-400",children:[jsxRuntimeExports.jsxs("option",{value:"",children:["Select ",Be.label]}),Be.options.map(Ue=>jsxRuntimeExports.jsx("option",{value:Ue,children:Ue},Ue))]}):jsxRuntimeExports.jsx("input",{type:Be.type,placeholder:Be.placeholder||Be.label,value:n[Be.key],onChange:$e,className:"w-full p-3 rounded-xl border bg-yellow-50 focus:outline-none focus:ring-2 focus:ring-orange-400"}),jsxRuntimeExports.jsxs("button",{onClick:Ce,disabled:!n[Be.key]||Ee,className:"mt-4 w-full bg-gradient-to-r from-yellow-600 via-orange-500 to-red-400 hover:scale-105 text-white py-3 rounded-full font-semibold flex justify-center items-center gap-2 shadow-md transition-all duration-300 disabled:opacity-50",children:[t<De.length-1?"Next":Ee?"🔎 Searching…":"🎯 Find Scholarships",jsxRuntimeExports.jsx(CircleArrowRight,{size:20})]})]}),Re.length>0&&jsxRuntimeExports.jsxs("div",{ref:Ve,className:"mt-8 space-y-4 animate-fade-in",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-orange-800 mb-3",children:"✅ Top Matches for You:"}),Re.map((Ue,We)=>jsxRuntimeExports.jsx("div",{className:"p-4 bg-yellow-100/80 rounded-2xl border border-orange-200 backdrop-blur-md shadow-inner hover:scale-[1.02] transition-transform duration-300",children:jsxRuntimeExports.jsx(Markdown,{components:{p:({node:He,...Ge})=>jsxRuntimeExports.jsx("p",{className:"whitespace-pre-wrap",...Ge}),strong:({node:He,...Ge})=>jsxRuntimeExports.jsx("strong",{className:"text-orange-700 font-bold",...Ge}),a:({node:He,...Ge})=>jsxRuntimeExports.jsx("a",{className:"text-red-600 underline hover:text-red-800 font-medium",target:"_blank",rel:"noopener noreferrer",...Ge})},children:Ue})},We))]})]})})}function ChatInput({onSend:n,disabled:e}){const[t,r]=reactExports.useState(""),[Ee,Te]=reactExports.useState(!1),Re=reactExports.useRef(null),Me=()=>{const De=t.trim();!De||e||(n?.(De),r(""))},Ve=De=>{(De.key==="Enter"||De.code==="Enter")&&!De.shiftKey&&!Ee&&(De.preventDefault(),Me())};return reactExports.useEffect(()=>{const De=Re.current;if(De){De.style.height="auto";const $e=De.scrollHeight;De.style.height=`${Math.min($e,150)}px`}},[t]),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-[#0e0e1a] flex items-end gap-2 border-t border-white/10",children:[jsxRuntimeExports.jsx("textarea",{ref:Re,value:t,onChange:De=>r(De.target.value),onKeyDown:Ve,onCompositionStart:()=>Te(!0),onCompositionEnd:()=>Te(!1),placeholder:"Paste your class notes or questions...",className:"flex-1 p-3 bg-[#12121c] rounded-lg resize-none text-white border border-white/10 outline-none",rows:1,disabled:e}),jsxRuntimeExports.jsx("button",{onClick:Me,disabled:e||!t.trim(),className:"bg-purple-600 hover:bg-purple-700 p-3 rounded-lg text-white flex items-center justify-center h-12 w-12 disabled:opacity-50 disabled:cursor-not-allowed",children:jsxRuntimeExports.jsx(ArrowRight,{})})]})}function SmartNotes(){const[n,e]=reactExports.useState([{from:"bot",text:"Hi! Paste your class notes and I’ll summarize and tag them for you."}]),[t,r]=reactExports.useState(!1),Ee=reactExports.useRef(null);reactExports.useEffect(()=>{Ee.current?.scrollIntoView({behavior:"smooth"})},[n]);const Te=async Re=>{if(!Re.trim())return;r(!0);const Me={from:"user",text:Re};e(Ve=>[...Ve,Me]),e(Ve=>[...Ve,{from:"bot",text:"Thinking..."}]),setTimeout(()=>{const Ve={from:"bot",text:`✅ Summary:
- ${Re.split(".").slice(0,3).map(De=>De.trim()).filter(Boolean).join(`
- `)}

🏷️ Tags: [Conceptual, Important, Notes]`};e(De=>[...De.slice(0,-1),Ve]),r(!1)},1e3)};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-[#0a0a14] text-white flex flex-col",children:[jsxRuntimeExports.jsx("header",{className:"p-4 bg-[#12121c] text-center shadow-md text-xl font-bold text-purple-400",children:"📝 Smart Notes AI"}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-6 space-y-4",children:[n.map((Re,Me)=>jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`max-w-xl p-4 rounded-lg ${Re.from==="user"?"ml-auto bg-purple-600 text-white":"bg-[#1a1a2e] text-gray-200"}`,children:Re.text.split(`
`).map((Ve,De)=>jsxRuntimeExports.jsx("p",{children:Ve},De))},Me)),jsxRuntimeExports.jsx("div",{ref:Ee})]}),jsxRuntimeExports.jsx(ChatInput,{onSend:Te,disabled:t})]})}function dispatchCallback(n,e){n&&n(e)}function reverseDictionary(n){return Object.fromEntries(Object.entries(n).map(([e,t])=>[t,e]))}function escapeRegExp(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const Callable=class{constructor(){let n=function(...e){return n._call(...e)};return Object.setPrototypeOf(n,new.target.prototype)}_call(...n){throw Error("Must implement _call method in subclass")}};function isTypedArray(n){return n?.prototype?.__proto__?.constructor?.name==="TypedArray"}function isIntegralNumber(n){return Number.isInteger(n)||typeof n=="bigint"}function exists(n){return n!=null}function calculateDimensions(n){const e=[];let t=n;for(;Array.isArray(t);)e.push(t.length),t=t[0];return e}function pop(n,e,t=void 0){const r=n[e];if(r!==void 0)return delete n[e],r;if(t===void 0)throw Error(`Key ${e} does not exist in object.`);return t}function mergeArrays(...n){return Array.prototype.concat.apply([],n)}function product(...n){return n.reduce((e,t)=>e.flatMap(r=>t.map(Ee=>[r,Ee])))}function calculateReflectOffset(n,e){return Math.abs((n+e)%(2*e)-e)}const sharp={},ONNX_NODE=Object.freeze(Object.defineProperty({__proto__:null,default:sharp},Symbol.toStringTag,{value:"Module"}));var ortWeb_min$1={exports:{}};const backends={},backendsSortedByPriority=[],registerBackend=(n,e,t)=>{if(e&&typeof e.init=="function"&&typeof e.createSessionHandler=="function"){const r=backends[n];if(r===void 0)backends[n]={backend:e,priority:t};else{if(r.priority>t)return;if(r.priority===t&&r.backend!==e)throw new Error(`cannot register backend "${n}" using priority ${t}`)}if(t>=0){const Ee=backendsSortedByPriority.indexOf(n);Ee!==-1&&backendsSortedByPriority.splice(Ee,1);for(let Te=0;Te<backendsSortedByPriority.length;Te++)if(backends[backendsSortedByPriority[Te]].priority<=t){backendsSortedByPriority.splice(Te,0,n);return}backendsSortedByPriority.push(n)}return}throw new TypeError("not a valid backend")},resolveBackend=async n=>{const e=n.length===0?backendsSortedByPriority:n,t=[];for(const r of e){const Ee=backends[r];if(Ee){if(Ee.initialized)return Ee.backend;if(Ee.aborted)continue;const Te=!!Ee.initPromise;try{return Te||(Ee.initPromise=Ee.backend.init()),await Ee.initPromise,Ee.initialized=!0,Ee.backend}catch(Re){Te||t.push({name:r,err:Re}),Ee.aborted=!0}finally{delete Ee.initPromise}}}throw new Error(`no available backend found. ERR: ${t.map(r=>`[${r.name}] ${r.err}`).join(", ")}`)};class EnvImpl{constructor(){this.wasm={},this.webgl={},this.logLevelInternal="warning"}set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);this.logLevelInternal=e}}get logLevel(){return this.logLevelInternal}}const env$2=new EnvImpl,isBigInt64ArrayAvailable=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",isBigUint64ArrayAvailable=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function",NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]);isBigInt64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("int64",BigInt64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigInt64Array,"int64"));isBigUint64ArrayAvailable&&(NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.set("uint64",BigUint64Array),NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.set(BigUint64Array,"uint64"));const calculateSize=n=>{let e=1;for(let t=0;t<n.length;t++){const r=n[t];if(typeof r!="number"||!Number.isSafeInteger(r))throw new TypeError(`dims[${t}] must be an integer, got: ${r}`);if(r<0)throw new RangeError(`dims[${t}] must be a non-negative integer, got: ${r}`);e*=r}return e};let Tensor$2=class Qu{constructor(e,t,r){let Ee,Te,Re;if(typeof e=="string")if(Ee=e,Re=r,e==="string"){if(!Array.isArray(t))throw new TypeError("A string tensor's data must be a string array.");Te=t}else{const Ve=NUMERIC_TENSOR_TYPE_TO_TYPEDARRAY_MAP.get(e);if(Ve===void 0)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(t))Te=Ve.from(t);else if(t instanceof Ve)Te=t;else throw new TypeError(`A ${Ee} tensor's data must be type of ${Ve}`)}else if(Re=t,Array.isArray(e)){if(e.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");const Ve=typeof e[0];if(Ve==="string")Ee="string",Te=e;else if(Ve==="boolean")Ee="bool",Te=Uint8Array.from(e);else throw new TypeError(`Invalid element type of data array: ${Ve}.`)}else{const Ve=NUMERIC_TENSOR_TYPEDARRAY_TO_TYPE_MAP.get(e.constructor);if(Ve===void 0)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);Ee=Ve,Te=e}if(Re===void 0)Re=[Te.length];else if(!Array.isArray(Re))throw new TypeError("A tensor's dims must be a number array");const Me=calculateSize(Re);if(Me!==Te.length)throw new Error(`Tensor's size(${Me}) does not match data length(${Te.length}).`);this.dims=Re,this.type=Ee,this.data=Te,this.size=Me}static bufferToTensor(e,t){if(e===void 0)throw new Error("Image buffer must be defined");if(t.height===void 0||t.width===void 0)throw new Error("Image height and width must be defined");const{height:r,width:Ee}=t,Te=t.norm;let Re,Me;Te===void 0||Te.mean===void 0?Re=255:Re=Te.mean,Te===void 0||Te.bias===void 0?Me=0:Me=Te.bias;const Ve=t.bitmapFormat!==void 0?t.bitmapFormat:"RGBA",De=t.tensorFormat!==void 0&&t.tensorFormat!==void 0?t.tensorFormat:"RGB",$e=r*Ee,Oe=De==="RGBA"?new Float32Array($e*4):new Float32Array($e*3);let Ce=4,Be=0,Ue=1,We=2,He=3,Ge=0,Ye=$e,Je=$e*2,Ze=-1;Ve==="RGB"&&(Ce=3,Be=0,Ue=1,We=2,He=-1),De==="RGBA"?Ze=$e*3:De==="RBG"?(Ge=0,Je=$e,Ye=$e*2):De==="BGR"&&(Je=0,Ye=$e,Ge=$e*2);for(let yn=0;yn<$e;yn++,Be+=Ce,We+=Ce,Ue+=Ce,He+=Ce)Oe[Ge++]=(e[Be]+Me)/Re,Oe[Ye++]=(e[Ue]+Me)/Re,Oe[Je++]=(e[We]+Me)/Re,Ze!==-1&&He!==-1&&(Oe[Ze++]=(e[He]+Me)/Re);return De==="RGBA"?new Qu("float32",Oe,[1,4,r,Ee]):new Qu("float32",Oe,[1,3,r,Ee])}static async fromImage(e,t){const r=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,Ee=typeof ImageData<"u"&&e instanceof ImageData,Te=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,Re=typeof String<"u"&&(e instanceof String||typeof e=="string");let Me,Ve={};if(r){const De=document.createElement("canvas"),$e=De.getContext("2d");if($e!=null){let Oe=e.naturalHeight,Ce=e.naturalWidth;if(t!==void 0&&t.resizedHeight!==void 0&&t.resizedWidth!==void 0&&(Oe=t.resizedHeight,Ce=t.resizedWidth),t!==void 0){if(Ve=t,t.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");if(Ve.tensorFormat="RGBA",t.height!==void 0&&t.height!==Oe)throw new Error("Image input config height doesn't match HTMLImageElement height");if(Ve.height=Oe,t.width!==void 0&&t.width!==Ce)throw new Error("Image input config width doesn't match HTMLImageElement width");Ve.width=Ce}else Ve.tensorFormat="RGBA",Ve.height=Oe,Ve.width=Ce;De.width=Ce,De.height=Oe,$e.drawImage(e,0,0,Ce,Oe),Me=$e.getImageData(0,0,Ce,Oe).data}else throw new Error("Can not access image data")}else if(Ee){const De="RGBA";let $e,Oe;if(t!==void 0&&t.resizedWidth!==void 0&&t.resizedHeight!==void 0?($e=t.resizedHeight,Oe=t.resizedWidth):($e=e.height,Oe=e.width),t!==void 0){if(Ve=t,t.bitmapFormat!==void 0&&t.bitmapFormat!==De)throw new Error("Image input config format must be RGBA for ImageData");Ve.bitmapFormat="RGBA"}else Ve.bitmapFormat="RGBA";if(Ve.height=$e,Ve.width=Oe,t!==void 0){const Ce=document.createElement("canvas");Ce.width=Oe,Ce.height=$e;const Be=Ce.getContext("2d");if(Be!=null)Be.putImageData(e,0,0),Me=Be.getImageData(0,0,Oe,$e).data;else throw new Error("Can not access image data")}else Me=e.data}else if(Te){if(t===void 0)throw new Error("Please provide image config with format for Imagebitmap");if(t.bitmapFormat!==void 0)throw new Error("Image input config format must be defined for ImageBitmap");const De=document.createElement("canvas").getContext("2d");if(De!=null){const $e=e.height,Oe=e.width;if(De.drawImage(e,0,0,Oe,$e),Me=De.getImageData(0,0,Oe,$e).data,t!==void 0){if(t.height!==void 0&&t.height!==$e)throw new Error("Image input config height doesn't match ImageBitmap height");if(Ve.height=$e,t.width!==void 0&&t.width!==Oe)throw new Error("Image input config width doesn't match ImageBitmap width");Ve.width=Oe}else Ve.height=$e,Ve.width=Oe;return Qu.bufferToTensor(Me,Ve)}else throw new Error("Can not access image data")}else{if(Re)return new Promise((De,$e)=>{const Oe=document.createElement("canvas"),Ce=Oe.getContext("2d");if(!e||!Ce)return $e();const Be=new Image;Be.crossOrigin="Anonymous",Be.src=e,Be.onload=()=>{Oe.width=Be.width,Oe.height=Be.height,Ce.drawImage(Be,0,0,Oe.width,Oe.height);const Ue=Ce.getImageData(0,0,Oe.width,Oe.height);if(t!==void 0){if(t.height!==void 0&&t.height!==Oe.height)throw new Error("Image input config height doesn't match ImageBitmap height");if(Ve.height=Oe.height,t.width!==void 0&&t.width!==Oe.width)throw new Error("Image input config width doesn't match ImageBitmap width");Ve.width=Oe.width}else Ve.height=Oe.height,Ve.width=Oe.width;De(Qu.bufferToTensor(Ue.data,Ve))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(Me!==void 0)return Qu.bufferToTensor(Me,Ve);throw new Error("Input data provided is not supported - aborted tensor creation")}toImageData(e){var t,r;const Ee=document.createElement("canvas").getContext("2d");let Te;if(Ee!=null){const Re=this.dims[3],Me=this.dims[2],Ve=this.dims[1],De=e!==void 0&&e.format!==void 0?e.format:"RGB",$e=e!==void 0&&((t=e.norm)===null||t===void 0?void 0:t.mean)!==void 0?e.norm.mean:255,Oe=e!==void 0&&((r=e.norm)===null||r===void 0?void 0:r.bias)!==void 0?e.norm.bias:0,Ce=Me*Re;if(e!==void 0){if(e.height!==void 0&&e.height!==Me)throw new Error("Image output config height doesn't match tensor height");if(e.width!==void 0&&e.width!==Re)throw new Error("Image output config width doesn't match tensor width");if(e.format!==void 0&&Ve===4&&e.format!=="RGBA"||Ve===3&&e.format!=="RGB"&&e.format!=="BGR")throw new Error("Tensor format doesn't match input tensor dims")}const Be=4;let Ue=0,We=1,He=2,Ge=3,Ye=0,Je=Ce,Ze=Ce*2,fn=-1;De==="RGBA"?(Ye=0,Je=Ce,Ze=Ce*2,fn=Ce*3):De==="RGB"?(Ye=0,Je=Ce,Ze=Ce*2):De==="RBG"&&(Ye=0,Ze=Ce,Je=Ce*2),Te=Ee.createImageData(Re,Me);for(let yn=0;yn<Me*Re;Ue+=Be,We+=Be,He+=Be,Ge+=Be,yn++)Te.data[Ue]=(this.data[Ye++]-Oe)*$e,Te.data[We]=(this.data[Je++]-Oe)*$e,Te.data[He]=(this.data[Ze++]-Oe)*$e,Te.data[Ge]=fn===-1?255:(this.data[fn++]-Oe)*$e}else throw new Error("Can not access image data");return Te}reshape(e){return new Qu(this.type,this.data,e)}};const Tensor$1=Tensor$2;let InferenceSession$2=class Af{constructor(e){this.handler=e}async run(e,t,r){const Ee={};let Te={};if(typeof e!="object"||e===null||e instanceof Tensor$1||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let Re=!0;if(typeof t=="object"){if(t===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(t instanceof Tensor$1)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(t)){if(t.length===0)throw new TypeError("'fetches' cannot be an empty array.");Re=!1;for(const De of t){if(typeof De!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(De)===-1)throw new RangeError(`'fetches' contains invalid output name: ${De}.`);Ee[De]=null}if(typeof r=="object"&&r!==null)Te=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else{let De=!1;const $e=Object.getOwnPropertyNames(t);for(const Oe of this.outputNames)if($e.indexOf(Oe)!==-1){const Ce=t[Oe];(Ce===null||Ce instanceof Tensor$1)&&(De=!0,Re=!1,Ee[Oe]=Ce)}if(De){if(typeof r=="object"&&r!==null)Te=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else Te=t}}else if(typeof t<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(const De of this.inputNames)if(typeof e[De]>"u")throw new Error(`input '${De}' is missing in 'feeds'.`);if(Re)for(const De of this.outputNames)Ee[De]=null;const Me=await this.handler.run(e,Ee,Te),Ve={};for(const De in Me)Object.hasOwnProperty.call(Me,De)&&(Ve[De]=new Tensor$1(Me[De].type,Me[De].data,Me[De].dims));return Ve}static async create(e,t,r,Ee){let Te,Re={};if(typeof e=="string"){if(Te=e,typeof t=="object"&&t!==null)Re=t;else if(typeof t<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof Uint8Array){if(Te=e,typeof t=="object"&&t!==null)Re=t;else if(typeof t<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer){const Oe=e;let Ce=0,Be=e.byteLength;if(typeof t=="object"&&t!==null)Re=t;else if(typeof t=="number"){if(Ce=t,!Number.isSafeInteger(Ce))throw new RangeError("'byteOffset' must be an integer.");if(Ce<0||Ce>=Oe.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${Oe.byteLength}).`);if(Be=e.byteLength-Ce,typeof r=="number"){if(Be=r,!Number.isSafeInteger(Be))throw new RangeError("'byteLength' must be an integer.");if(Be<=0||Ce+Be>Oe.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${Oe.byteLength-Ce}].`);if(typeof Ee=="object"&&Ee!==null)Re=Ee;else if(typeof Ee<"u")throw new TypeError("'options' must be an object.")}else if(typeof r<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof t<"u")throw new TypeError("'options' must be an object.");Te=new Uint8Array(Oe,Ce,Be)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");const Ve=(Re.executionProviders||[]).map(Oe=>typeof Oe=="string"?Oe:Oe.name),$e=await(await resolveBackend(Ve)).createSessionHandler(Te,Re);return new Af($e)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}};const InferenceSession$1=InferenceSession$2,lib=Object.freeze(Object.defineProperty({__proto__:null,InferenceSession:InferenceSession$1,Tensor:Tensor$1,env:env$2,registerBackend},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(lib);/*!
* ONNX Runtime Web v1.14.0
* Copyright (c) Microsoft Corporation. All rights reserved.
* Licensed under the MIT License.
*/var hasRequiredOrtWeb_min;function requireOrtWeb_min(){return hasRequiredOrtWeb_min||(hasRequiredOrtWeb_min=1,function(module,exports){(function(n,e){module.exports=e(require$$0)})(self,__WEBPACK_EXTERNAL_MODULE__1670__=>(()=>{var __webpack_modules__={3474:(n,e,t)=>{var r,Ee=(r=(r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(Te){function Re(){return Wn.buffer!=$n&&Hr(Wn.buffer),kn}function Me(){return Wn.buffer!=$n&&Hr(Wn.buffer),In}function Ve(){return Wn.buffer!=$n&&Hr(Wn.buffer),Kn}function De(){return Wn.buffer!=$n&&Hr(Wn.buffer),Qn}function $e(){return Wn.buffer!=$n&&Hr(Wn.buffer),rr}var Oe,Ce,Be;Te=Te||{},Oe||(Oe=Te!==void 0?Te:{}),Oe.ready=new Promise(function(Mn,zn){Ce=Mn,Be=zn});var Ue,We,He,Ge,Ye,Je,Ze=Object.assign({},Oe),fn="./this.program",yn=(Mn,zn)=>{throw zn},mn=typeof window=="object",pn=typeof importScripts=="function",un=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",bn=Oe.ENVIRONMENT_IS_PTHREAD||!1,gn="";function xn(Mn){return Oe.locateFile?Oe.locateFile(Mn,gn):gn+Mn}if(un){let Mn;gn=pn?t(908).dirname(gn)+"/":"//",Je=()=>{Ye||(Ge=t(1384),Ye=t(908))},Ue=function(zn,Jn){return Je(),zn=Ye.normalize(zn),Ge.readFileSync(zn,Jn?void 0:"utf8")},He=zn=>((zn=Ue(zn,!0)).buffer||(zn=new Uint8Array(zn)),zn),We=(zn,Jn,ar)=>{Je(),zn=Ye.normalize(zn),Ge.readFile(zn,function(br,kr){br?ar(br):Jn(kr.buffer)})},1<process.argv.length&&(fn=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(zn){if(!(zn instanceof Gr))throw zn}),process.on("unhandledRejection",function(zn){throw zn}),yn=(zn,Jn)=>{if(di())throw process.exitCode=zn,Jn;Jn instanceof Gr||Dn("exiting due to exception: "+Jn),process.exit(zn)},Oe.inspect=function(){return"[Emscripten Module object]"};try{Mn=t(9925)}catch(zn){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),zn}t.g.Worker=Mn.Worker}else(mn||pn)&&(pn?gn=self.location.href:typeof document<"u"&&document.currentScript&&(gn=document.currentScript.src),r&&(gn=r),gn=gn.indexOf("blob:")!==0?gn.substr(0,gn.replace(/[?#].*/,"").lastIndexOf("/")+1):"",un||(Ue=Mn=>{var zn=new XMLHttpRequest;return zn.open("GET",Mn,!1),zn.send(null),zn.responseText},pn&&(He=Mn=>{var zn=new XMLHttpRequest;return zn.open("GET",Mn,!1),zn.responseType="arraybuffer",zn.send(null),new Uint8Array(zn.response)}),We=(Mn,zn,Jn)=>{var ar=new XMLHttpRequest;ar.open("GET",Mn,!0),ar.responseType="arraybuffer",ar.onload=()=>{ar.status==200||ar.status==0&&ar.response?zn(ar.response):Jn()},ar.onerror=Jn,ar.send(null)}));un&&typeof performance>"u"&&(t.g.performance=t(6953).performance);var En=console.log.bind(console),Pn=console.warn.bind(console);un&&(Je(),En=Mn=>Ge.writeSync(1,Mn+`
`),Pn=Mn=>Ge.writeSync(2,Mn+`
`));var Ln,Cn=Oe.print||En,Dn=Oe.printErr||Pn;Object.assign(Oe,Ze),Ze=null,Oe.thisProgram&&(fn=Oe.thisProgram),Oe.quit&&(yn=Oe.quit),Oe.wasmBinary&&(Ln=Oe.wasmBinary);var Un=Oe.noExitRuntime||!1;typeof WebAssembly!="object"&&si("no native wasm support detected");var Wn,On,$n,kn,In,Kn,Qn,rr,or=!1,pr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function mr(Mn,zn,Jn){var ar=(zn>>>=0)+Jn;for(Jn=zn;Mn[Jn]&&!(Jn>=ar);)++Jn;if(16<Jn-zn&&Mn.buffer&&pr)return pr.decode(Mn.buffer instanceof SharedArrayBuffer?Mn.slice(zn,Jn):Mn.subarray(zn,Jn));for(ar="";zn<Jn;){var br=Mn[zn++];if(128&br){var kr=63&Mn[zn++];if((224&br)==192)ar+=String.fromCharCode((31&br)<<6|kr);else{var ti=63&Mn[zn++];65536>(br=(240&br)==224?(15&br)<<12|kr<<6|ti:(7&br)<<18|kr<<12|ti<<6|63&Mn[zn++])?ar+=String.fromCharCode(br):(br-=65536,ar+=String.fromCharCode(55296|br>>10,56320|1023&br))}}else ar+=String.fromCharCode(br)}return ar}function Er(Mn,zn){return(Mn>>>=0)?mr(Me(),Mn,zn):""}function jr(Mn,zn,Jn,ar){if(!(0<ar))return 0;var br=Jn>>>=0;ar=Jn+ar-1;for(var kr=0;kr<Mn.length;++kr){var ti=Mn.charCodeAt(kr);if(55296<=ti&&57343>=ti&&(ti=65536+((1023&ti)<<10)|1023&Mn.charCodeAt(++kr)),127>=ti){if(Jn>=ar)break;zn[Jn++>>>0]=ti}else{if(2047>=ti){if(Jn+1>=ar)break;zn[Jn++>>>0]=192|ti>>6}else{if(65535>=ti){if(Jn+2>=ar)break;zn[Jn++>>>0]=224|ti>>12}else{if(Jn+3>=ar)break;zn[Jn++>>>0]=240|ti>>18,zn[Jn++>>>0]=128|ti>>12&63}zn[Jn++>>>0]=128|ti>>6&63}zn[Jn++>>>0]=128|63&ti}}return zn[Jn>>>0]=0,Jn-br}function Kr(Mn){for(var zn=0,Jn=0;Jn<Mn.length;++Jn){var ar=Mn.charCodeAt(Jn);127>=ar?zn++:2047>=ar?zn+=2:55296<=ar&&57343>=ar?(zn+=4,++Jn):zn+=3}return zn}function Hr(Mn){$n=Mn,Oe.HEAP8=kn=new Int8Array(Mn),Oe.HEAP16=new Int16Array(Mn),Oe.HEAP32=Kn=new Int32Array(Mn),Oe.HEAPU8=In=new Uint8Array(Mn),Oe.HEAPU16=new Uint16Array(Mn),Oe.HEAPU32=Qn=new Uint32Array(Mn),Oe.HEAPF32=new Float32Array(Mn),Oe.HEAPF64=rr=new Float64Array(Mn)}bn&&($n=Oe.buffer);var xr=Oe.INITIAL_MEMORY||16777216;if(bn)Wn=Oe.wasmMemory,$n=Oe.buffer;else if(Oe.wasmMemory)Wn=Oe.wasmMemory;else if(!((Wn=new WebAssembly.Memory({initial:xr/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw Dn("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),un&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");Wn&&($n=Wn.buffer),xr=$n.byteLength,Hr($n);var nr,Oi=[],Ti=[],yi=[],qr=[];function di(){return Un||!1}function Zr(){var Mn=Oe.preRun.shift();Oi.unshift(Mn)}var mi,pi=0,Wi=null;function si(Mn){throw bn?postMessage({cmd:"onAbort",arg:Mn}):Oe.onAbort&&Oe.onAbort(Mn),Dn(Mn="Aborted("+Mn+")"),or=!0,Mn=new WebAssembly.RuntimeError(Mn+". Build with -sASSERTIONS for more info."),Be(Mn),Mn}function _r(){return mi.startsWith("data:application/octet-stream;base64,")}function Dr(){var Mn=mi;try{if(Mn==mi&&Ln)return new Uint8Array(Ln);if(He)return He(Mn);throw"both async and sync fetching of the wasm failed"}catch(zn){si(zn)}}mi="ort-wasm-threaded.wasm",_r()||(mi=xn(mi));var Xr={};function Gr(Mn){this.name="ExitStatus",this.message="Program terminated with exit("+Mn+")",this.status=Mn}function ii(Mn){(Mn=Ur.Vb[Mn])||si(),Ur.mc(Mn)}function hi(Mn){var zn=Ur.Cc();if(!zn)return 6;Ur.ac.push(zn),Ur.Vb[Mn.Ub]=zn,zn.Ub=Mn.Ub;var Jn={cmd:"run",start_routine:Mn.Ic,arg:Mn.zc,pthread_ptr:Mn.Ub};return zn.$b=()=>{Jn.time=performance.now(),zn.postMessage(Jn,Mn.Nc)},zn.loaded&&(zn.$b(),delete zn.$b),0}function Mi(Mn){if(bn)return fi(1,1,Mn);di()||(Ur.oc(),Oe.onExit&&Oe.onExit(Mn),or=!0),yn(Mn,new Gr(Mn))}function ji(Mn,zn){if(!zn&&bn)throw vi(Mn),"unwind";di()||bn||(Ha(),Pi(yi),Io(0),Ea[1].length&&Po(1,10),Ea[2].length&&Po(2,10),Ur.oc()),Mi(Mn)}var Ur={Yb:[],ac:[],qc:[],Vb:{},fc:function(){bn&&Ur.Ec()},Pc:function(){},Ec:function(){Ur.receiveObjectTransfer=Ur.Gc,Ur.threadInitTLS=Ur.pc,Ur.setExitStatus=Ur.nc,Un=!1},nc:function(){},oc:function(){for(var Mn of Object.values(Ur.Vb))Ur.mc(Mn);for(Mn of Ur.Yb)Mn.terminate();Ur.Yb=[]},mc:function(Mn){var zn=Mn.Ub;delete Ur.Vb[zn],Ur.Yb.push(Mn),Ur.ac.splice(Ur.ac.indexOf(Mn),1),Mn.Ub=0,ss(zn)},Gc:function(){},pc:function(){Ur.qc.forEach(Mn=>Mn())},Fc:function(Mn,zn){Mn.onmessage=Jn=>{var ar=(Jn=Jn.data).cmd;if(Mn.Ub&&(Ur.Bc=Mn.Ub),Jn.targetThread&&Jn.targetThread!=ao()){var br=Ur.Vb[Jn.Qc];br?br.postMessage(Jn,Jn.transferList):Dn('Internal error! Worker sent a message "'+ar+'" to target pthread '+Jn.targetThread+", but that thread no longer exists!")}else ar==="processProxyingQueue"?ur(Jn.queue):ar==="spawnThread"?hi(Jn):ar==="cleanupThread"?ii(Jn.thread):ar==="killThread"?(Jn=Jn.thread,ar=Ur.Vb[Jn],delete Ur.Vb[Jn],ar.terminate(),ss(Jn),Ur.ac.splice(Ur.ac.indexOf(ar),1),ar.Ub=0):ar==="cancelThread"?Ur.Vb[Jn.thread].postMessage({cmd:"cancel"}):ar==="loaded"?(Mn.loaded=!0,zn&&zn(Mn),Mn.$b&&(Mn.$b(),delete Mn.$b)):ar==="print"?Cn("Thread "+Jn.threadId+": "+Jn.text):ar==="printErr"?Dn("Thread "+Jn.threadId+": "+Jn.text):ar==="alert"?alert("Thread "+Jn.threadId+": "+Jn.text):Jn.target==="setimmediate"?Mn.postMessage(Jn):ar==="onAbort"?Oe.onAbort&&Oe.onAbort(Jn.arg):ar&&Dn("worker sent an unknown command "+ar);Ur.Bc=void 0},Mn.onerror=Jn=>{throw Dn("worker sent an error! "+Jn.filename+":"+Jn.lineno+": "+Jn.message),Jn},un&&(Mn.on("message",function(Jn){Mn.onmessage({data:Jn})}),Mn.on("error",function(Jn){Mn.onerror(Jn)}),Mn.on("detachedExit",function(){})),Mn.postMessage({cmd:"load",urlOrBlob:Oe.mainScriptUrlOrBlob||r,wasmMemory:Wn,wasmModule:On})},yc:function(){var Mn=xn("ort-wasm-threaded.worker.js");Ur.Yb.push(new Worker(Mn))},Cc:function(){return Ur.Yb.length==0&&(Ur.yc(),Ur.Fc(Ur.Yb[0])),Ur.Yb.pop()}};function Pi(Mn){for(;0<Mn.length;)Mn.shift()(Oe)}function Bi(Mn){var zn=Zi();return Mn=Mn(),Xi(zn),Mn}function vi(Mn){if(bn)return fi(2,0,Mn);try{ji(Mn)}catch(zn){zn instanceof Gr||zn=="unwind"||yn(1,zn)}}Oe.PThread=Ur,Oe.establishStackSpace=function(){var Mn=ao(),zn=Ve()[Mn+44>>2>>>0];Mn=Ve()[Mn+48>>2>>>0],tl(zn,zn-Mn),Xi(zn)};var Ri=[];function ui(Mn){var zn=Ri[Mn];return zn||(Mn>=Ri.length&&(Ri.length=Mn+1),Ri[Mn]=zn=nr.get(Mn)),zn}Oe.invokeEntryPoint=function(Mn,zn){Mn=ui(Mn)(zn),di()?Ur.nc(Mn):zo(Mn)};var vs,ds,ns=[],ni=0,oi=0;function Di(Mn){this.Zb=Mn,this.Sb=Mn-24,this.xc=function(zn){De()[this.Sb+4>>2>>>0]=zn},this.bc=function(){return De()[this.Sb+4>>2>>>0]},this.wc=function(zn){De()[this.Sb+8>>2>>>0]=zn},this.Dc=function(){return De()[this.Sb+8>>2>>>0]},this.rc=function(){Ve()[this.Sb>>2>>>0]=0},this.hc=function(zn){zn=zn?1:0,Re()[this.Sb+12>>0>>>0]=zn},this.uc=function(){return Re()[this.Sb+12>>0>>>0]!=0},this.ic=function(zn){zn=zn?1:0,Re()[this.Sb+13>>0>>>0]=zn},this.kc=function(){return Re()[this.Sb+13>>0>>>0]!=0},this.fc=function(zn,Jn){this.cc(0),this.xc(zn),this.wc(Jn),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(Ve(),this.Sb>>2,1)},this.Hc=function(){return Atomics.sub(Ve(),this.Sb>>2,1)===1},this.cc=function(zn){De()[this.Sb+16>>2>>>0]=zn},this.tc=function(){return De()[this.Sb+16>>2>>>0]},this.vc=function(){if(Ro(this.bc()))return De()[this.Zb>>2>>>0];var zn=this.tc();return zn!==0?zn:this.Zb}}function Ns(Mn){return Ts(new Di(Mn).Sb)}function mo(Mn,zn,Jn,ar){return bn?fi(3,1,Mn,zn,Jn,ar):Js(Mn,zn,Jn,ar)}function Js(Mn,zn,Jn,ar){if(typeof SharedArrayBuffer>"u")return Dn("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var br=[];return bn&&br.length===0?mo(Mn,zn,Jn,ar):(Mn={Ic:Jn,Ub:Mn,zc:ar,Nc:br},bn?(Mn.Oc="spawnThread",postMessage(Mn,br),0):hi(Mn))}function ki(Mn,zn,Jn){return bn?fi(4,1,Mn,zn,Jn):0}function ms(Mn,zn){if(bn)return fi(5,1,Mn,zn)}function So(Mn,zn){if(bn)return fi(6,1,Mn,zn)}function Ms(Mn,zn,Jn){if(bn)return fi(7,1,Mn,zn,Jn)}function Zs(Mn,zn,Jn){return bn?fi(8,1,Mn,zn,Jn):0}function ws(Mn,zn){if(bn)return fi(9,1,Mn,zn)}function Cs(Mn,zn,Jn){if(bn)return fi(10,1,Mn,zn,Jn)}function xs(Mn,zn,Jn,ar){if(bn)return fi(11,1,Mn,zn,Jn,ar)}function Yo(Mn,zn,Jn,ar){if(bn)return fi(12,1,Mn,zn,Jn,ar)}function ta(Mn,zn,Jn,ar){if(bn)return fi(13,1,Mn,zn,Jn,ar)}function oo(Mn){if(bn)return fi(14,1,Mn)}function Hn(Mn,zn){if(bn)return fi(15,1,Mn,zn)}function ir(Mn,zn,Jn){if(bn)return fi(16,1,Mn,zn,Jn)}function ur(Mn){Atomics.store(Ve(),Mn>>2,1),ao()&&Ta(Mn),Atomics.compareExchange(Ve(),Mn>>2,1,0)}function gr(Mn){return De()[Mn>>>2]+4294967296*Ve()[Mn+4>>>2]}function Pr(Mn,zn,Jn,ar,br,kr){return bn?fi(17,1,Mn,zn,Jn,ar,br,kr):-52}function Cr(Mn,zn,Jn,ar,br,kr){if(bn)return fi(18,1,Mn,zn,Jn,ar,br,kr)}function Jr(Mn){var zn=Kr(Mn)+1,Jn=Va(zn);return Jn&&jr(Mn,Re(),Jn,zn),Jn}function _i(Mn,zn,Jn){function ar(Gi){return(Gi=Gi.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Gi[1]:"GMT"}if(bn)return fi(19,1,Mn,zn,Jn);var br=new Date().getFullYear(),kr=new Date(br,0,1),ti=new Date(br,6,1);br=kr.getTimezoneOffset();var li=ti.getTimezoneOffset(),es=Math.max(br,li);Ve()[Mn>>2>>>0]=60*es,Ve()[zn>>2>>>0]=+(br!=li),Mn=ar(kr),zn=ar(ti),Mn=Jr(Mn),zn=Jr(zn),li<br?(De()[Jn>>2>>>0]=Mn,De()[Jn+4>>2>>>0]=zn):(De()[Jn>>2>>>0]=zn,De()[Jn+4>>2>>>0]=Mn)}function fi(Mn,zn){var Jn=arguments.length-2,ar=arguments;return Bi(()=>{for(var br=Ga(8*Jn),kr=br>>3,ti=0;ti<Jn;ti++){var li=ar[2+ti];$e()[kr+ti>>>0]=li}return ls(Mn,Jn,br,zn)})}Oe.executeNotifiedProxyingQueue=ur,ds=un?()=>{var Mn=process.hrtime();return 1e3*Mn[0]+Mn[1]/1e6}:bn?()=>performance.now()-Oe.__performance_now_clock_drift:()=>performance.now();var Ui,gs=[],Hi={};function Vs(){if(!Ui){var Mn,zn={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:fn||"./this.program"};for(Mn in Hi)Hi[Mn]===void 0?delete zn[Mn]:zn[Mn]=Hi[Mn];var Jn=[];for(Mn in zn)Jn.push(Mn+"="+zn[Mn]);Ui=Jn}return Ui}function Or(Mn,zn){if(bn)return fi(20,1,Mn,zn);var Jn=0;return Vs().forEach(function(ar,br){var kr=zn+Jn;for(br=De()[Mn+4*br>>2>>>0]=kr,kr=0;kr<ar.length;++kr)Re()[br++>>0>>>0]=ar.charCodeAt(kr);Re()[br>>0>>>0]=0,Jn+=ar.length+1}),0}function Fi(Mn,zn){if(bn)return fi(21,1,Mn,zn);var Jn=Vs();De()[Mn>>2>>>0]=Jn.length;var ar=0;return Jn.forEach(function(br){ar+=br.length+1}),De()[zn>>2>>>0]=ar,0}function rs(Mn){return bn?fi(22,1,Mn):52}function go(Mn,zn,Jn,ar){return bn?fi(23,1,Mn,zn,Jn,ar):52}function Uo(Mn,zn,Jn,ar,br){return bn?fi(24,1,Mn,zn,Jn,ar,br):70}var Ea=[null,[],[]];function Po(Mn,zn){var Jn=Ea[Mn];zn===0||zn===10?((Mn===1?Cn:Dn)(mr(Jn,0)),Jn.length=0):Jn.push(zn)}function dl(Mn,zn,Jn,ar){if(bn)return fi(25,1,Mn,zn,Jn,ar);for(var br=0,kr=0;kr<Jn;kr++){var ti=De()[zn>>2>>>0],li=De()[zn+4>>2>>>0];zn+=8;for(var es=0;es<li;es++)Po(Mn,Me()[ti+es>>>0]);br+=li}return De()[ar>>2>>>0]=br,0}var _s=0;function qa(Mn){return Mn%4==0&&(Mn%100!=0||Mn%400==0)}var zs=[31,29,31,30,31,30,31,31,30,31,30,31],hl=[31,28,31,30,31,30,31,31,30,31,30,31];function Wa(Mn,zn,Jn,ar){function br(Rr,Ki,os){for(Rr=typeof Rr=="number"?Rr.toString():Rr||"";Rr.length<Ki;)Rr=os[0]+Rr;return Rr}function kr(Rr,Ki){return br(Rr,Ki,"0")}function ti(Rr,Ki){function os(Ys){return 0>Ys?-1:0<Ys?1:0}var Do;return(Do=os(Rr.getFullYear()-Ki.getFullYear()))===0&&(Do=os(Rr.getMonth()-Ki.getMonth()))===0&&(Do=os(Rr.getDate()-Ki.getDate())),Do}function li(Rr){switch(Rr.getDay()){case 0:return new Date(Rr.getFullYear()-1,11,29);case 1:return Rr;case 2:return new Date(Rr.getFullYear(),0,3);case 3:return new Date(Rr.getFullYear(),0,2);case 4:return new Date(Rr.getFullYear(),0,1);case 5:return new Date(Rr.getFullYear()-1,11,31);case 6:return new Date(Rr.getFullYear()-1,11,30)}}function es(Rr){var Ki=Rr.Wb;for(Rr=new Date(new Date(Rr.Xb+1900,0,1).getTime());0<Ki;){var os=Rr.getMonth(),Do=(qa(Rr.getFullYear())?zs:hl)[os];if(!(Ki>Do-Rr.getDate())){Rr.setDate(Rr.getDate()+Ki);break}Ki-=Do-Rr.getDate()+1,Rr.setDate(1),11>os?Rr.setMonth(os+1):(Rr.setMonth(0),Rr.setFullYear(Rr.getFullYear()+1))}return os=new Date(Rr.getFullYear()+1,0,4),Ki=li(new Date(Rr.getFullYear(),0,4)),os=li(os),0>=ti(Ki,Rr)?0>=ti(os,Rr)?Rr.getFullYear()+1:Rr.getFullYear():Rr.getFullYear()-1}var Gi=Ve()[ar+40>>2>>>0];for(var hs in ar={Lc:Ve()[ar>>2>>>0],Kc:Ve()[ar+4>>2>>>0],dc:Ve()[ar+8>>2>>>0],jc:Ve()[ar+12>>2>>>0],ec:Ve()[ar+16>>2>>>0],Xb:Ve()[ar+20>>2>>>0],Tb:Ve()[ar+24>>2>>>0],Wb:Ve()[ar+28>>2>>>0],Rc:Ve()[ar+32>>2>>>0],Jc:Ve()[ar+36>>2>>>0],Mc:Gi?Er(Gi):""},Jn=Er(Jn),Gi={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})Jn=Jn.replace(new RegExp(hs,"g"),Gi[hs]);var _o="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),io="January February March April May June July August September October November December".split(" ");for(hs in Gi={"%a":function(Rr){return _o[Rr.Tb].substring(0,3)},"%A":function(Rr){return _o[Rr.Tb]},"%b":function(Rr){return io[Rr.ec].substring(0,3)},"%B":function(Rr){return io[Rr.ec]},"%C":function(Rr){return kr((Rr.Xb+1900)/100|0,2)},"%d":function(Rr){return kr(Rr.jc,2)},"%e":function(Rr){return br(Rr.jc,2," ")},"%g":function(Rr){return es(Rr).toString().substring(2)},"%G":function(Rr){return es(Rr)},"%H":function(Rr){return kr(Rr.dc,2)},"%I":function(Rr){return(Rr=Rr.dc)==0?Rr=12:12<Rr&&(Rr-=12),kr(Rr,2)},"%j":function(Rr){for(var Ki=0,os=0;os<=Rr.ec-1;Ki+=(qa(Rr.Xb+1900)?zs:hl)[os++]);return kr(Rr.jc+Ki,3)},"%m":function(Rr){return kr(Rr.ec+1,2)},"%M":function(Rr){return kr(Rr.Kc,2)},"%n":function(){return`
`},"%p":function(Rr){return 0<=Rr.dc&&12>Rr.dc?"AM":"PM"},"%S":function(Rr){return kr(Rr.Lc,2)},"%t":function(){return"	"},"%u":function(Rr){return Rr.Tb||7},"%U":function(Rr){return kr(Math.floor((Rr.Wb+7-Rr.Tb)/7),2)},"%V":function(Rr){var Ki=Math.floor((Rr.Wb+7-(Rr.Tb+6)%7)/7);if(2>=(Rr.Tb+371-Rr.Wb-2)%7&&Ki++,Ki)Ki==53&&((os=(Rr.Tb+371-Rr.Wb)%7)==4||os==3&&qa(Rr.Xb)||(Ki=1));else{Ki=52;var os=(Rr.Tb+7-Rr.Wb-1)%7;(os==4||os==5&&qa(Rr.Xb%400-1))&&Ki++}return kr(Ki,2)},"%w":function(Rr){return Rr.Tb},"%W":function(Rr){return kr(Math.floor((Rr.Wb+7-(Rr.Tb+6)%7)/7),2)},"%y":function(Rr){return(Rr.Xb+1900).toString().substring(2)},"%Y":function(Rr){return Rr.Xb+1900},"%z":function(Rr){var Ki=0<=(Rr=Rr.Jc);return Rr=Math.abs(Rr)/60,(Ki?"+":"-")+("0000"+(Rr/60*100+Rr%60)).slice(-4)},"%Z":function(Rr){return Rr.Mc},"%%":function(){return"%"}},Jn=Jn.replace(/%%/g,"\0\0"),Gi)Jn.includes(hs)&&(Jn=Jn.replace(new RegExp(hs,"g"),Gi[hs](ar)));return hs=function(Rr){var Ki=Array(Kr(Rr)+1);return jr(Rr,Ki,0,Ki.length),Ki}(Jn=Jn.replace(/\0\0/g,"%")),hs.length>zn?0:(function(Rr,Ki){Re().set(Rr,Ki>>>0)}(hs,Mn),hs.length-1)}Ur.fc();var na=[null,Mi,vi,mo,ki,ms,So,Ms,Zs,ws,Cs,xs,Yo,ta,oo,Hn,ir,Pr,Cr,_i,Or,Fi,rs,go,Uo,dl],ra={b:function(Mn){return Va(Mn+24)+24},n:function(Mn){return(Mn=new Di(Mn)).uc()||(Mn.hc(!0),ni--),Mn.ic(!1),ns.push(Mn),Mn.sc(),Mn.vc()},ma:function(Mn){throw Dn("Unexpected exception thrown, this is not properly supported - aborting"),or=!0,Mn},x:function(){Yi(0);var Mn=ns.pop();if(Mn.Hc()&&!Mn.kc()){var zn=Mn.Dc();zn&&ui(zn)(Mn.Zb),Ns(Mn.Zb)}oi=0},e:function(){var Mn=oi;if(!Mn)return _s=0;var zn=new Di(Mn);zn.cc(Mn);var Jn=zn.bc();if(!Jn)return _s=0,Mn;for(var ar=Array.prototype.slice.call(arguments),br=0;br<ar.length;br++){var kr=ar[br];if(kr===0||kr===Jn)break;if(ia(kr,Jn,zn.Sb+16))return _s=kr,Mn}return _s=Jn,Mn},l:function(){var Mn=oi;if(!Mn)return _s=0;var zn=new Di(Mn);zn.cc(Mn);var Jn=zn.bc();if(!Jn)return _s=0,Mn;for(var ar=Array.prototype.slice.call(arguments),br=0;br<ar.length;br++){var kr=ar[br];if(kr===0||kr===Jn)break;if(ia(kr,Jn,zn.Sb+16))return _s=kr,Mn}return _s=Jn,Mn},h:function(){var Mn=oi;if(!Mn)return _s=0;var zn=new Di(Mn);zn.cc(Mn);var Jn=zn.bc();if(!Jn)return _s=0,Mn;for(var ar=Array.prototype.slice.call(arguments),br=0;br<ar.length;br++){var kr=ar[br];if(kr===0||kr===Jn)break;if(ia(kr,Jn,zn.Sb+16))return _s=kr,Mn}return _s=Jn,Mn},t:Ns,M:function(){var Mn=ns.pop();Mn||si("no exception to throw");var zn=Mn.Zb;throw Mn.kc()||(ns.push(Mn),Mn.ic(!0),Mn.hc(!1),ni++),oi=zn,zn},c:function(Mn,zn,Jn){throw new Di(Mn).fc(zn,Jn),oi=Mn,ni++,Mn},pa:function(){return ni},Fa:function(Mn){ja(Mn,!pn,1,!mn),Ur.pc()},T:function(Mn){bn?postMessage({cmd:"cleanupThread",thread:Mn}):ii(Mn)},xa:Js,j:function(Mn){throw oi||(oi=Mn),Mn},H:ki,Ma:ms,ua:So,wa:Ms,oa:Zs,Ka:ws,Ca:Cs,Ja:xs,V:Yo,va:ta,sa:oo,La:Hn,ta:ir,Ta:function(){},X:function(){si("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){si("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(Mn,zn,Jn,ar){if(Mn==zn)setTimeout(()=>ur(ar));else if(bn)postMessage({targetThread:Mn,cmd:"processProxyingQueue",queue:ar});else{if(!(Mn=Ur.Vb[Mn]))return;Mn.postMessage({cmd:"processProxyingQueue",queue:ar})}return 1},Ea:function(){return-1},Pa:function(Mn,zn){Mn=new Date(1e3*gr(Mn)),Ve()[zn>>2>>>0]=Mn.getUTCSeconds(),Ve()[zn+4>>2>>>0]=Mn.getUTCMinutes(),Ve()[zn+8>>2>>>0]=Mn.getUTCHours(),Ve()[zn+12>>2>>>0]=Mn.getUTCDate(),Ve()[zn+16>>2>>>0]=Mn.getUTCMonth(),Ve()[zn+20>>2>>>0]=Mn.getUTCFullYear()-1900,Ve()[zn+24>>2>>>0]=Mn.getUTCDay(),Mn=(Mn.getTime()-Date.UTC(Mn.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,Ve()[zn+28>>2>>>0]=Mn},Qa:function(Mn,zn){Mn=new Date(1e3*gr(Mn)),Ve()[zn>>2>>>0]=Mn.getSeconds(),Ve()[zn+4>>2>>>0]=Mn.getMinutes(),Ve()[zn+8>>2>>>0]=Mn.getHours(),Ve()[zn+12>>2>>>0]=Mn.getDate(),Ve()[zn+16>>2>>>0]=Mn.getMonth(),Ve()[zn+20>>2>>>0]=Mn.getFullYear()-1900,Ve()[zn+24>>2>>>0]=Mn.getDay();var Jn=new Date(Mn.getFullYear(),0,1),ar=(Mn.getTime()-Jn.getTime())/864e5|0;Ve()[zn+28>>2>>>0]=ar,Ve()[zn+36>>2>>>0]=-60*Mn.getTimezoneOffset(),ar=new Date(Mn.getFullYear(),6,1).getTimezoneOffset(),Mn=0|(ar!=(Jn=Jn.getTimezoneOffset())&&Mn.getTimezoneOffset()==Math.min(Jn,ar)),Ve()[zn+32>>2>>>0]=Mn},Ra:function(Mn){var zn=new Date(Ve()[Mn+20>>2>>>0]+1900,Ve()[Mn+16>>2>>>0],Ve()[Mn+12>>2>>>0],Ve()[Mn+8>>2>>>0],Ve()[Mn+4>>2>>>0],Ve()[Mn>>2>>>0],0),Jn=Ve()[Mn+32>>2>>>0],ar=zn.getTimezoneOffset(),br=new Date(zn.getFullYear(),0,1),kr=new Date(zn.getFullYear(),6,1).getTimezoneOffset(),ti=br.getTimezoneOffset(),li=Math.min(ti,kr);return 0>Jn?Ve()[Mn+32>>2>>>0]=+(kr!=ti&&li==ar):0<Jn!=(li==ar)&&(kr=Math.max(ti,kr),zn.setTime(zn.getTime()+6e4*((0<Jn?li:kr)-ar))),Ve()[Mn+24>>2>>>0]=zn.getDay(),Jn=(zn.getTime()-br.getTime())/864e5|0,Ve()[Mn+28>>2>>>0]=Jn,Ve()[Mn>>2>>>0]=zn.getSeconds(),Ve()[Mn+4>>2>>>0]=zn.getMinutes(),Ve()[Mn+8>>2>>>0]=zn.getHours(),Ve()[Mn+12>>2>>>0]=zn.getDate(),Ve()[Mn+16>>2>>>0]=zn.getMonth(),zn.getTime()/1e3|0},Aa:Pr,Ba:Cr,Sa:function Mn(zn,Jn,ar){Mn.Ac||(Mn.Ac=!0,_i(zn,Jn,ar))},y:function(){si("")},U:function(){if(!un&&!pn){var Mn="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";vs||(vs={}),vs[Mn]||(vs[Mn]=1,un&&(Mn="warning: "+Mn),Dn(Mn))}},ra:function(){return 4294901760},B:ds,Ia:function(Mn,zn,Jn){Me().copyWithin(Mn>>>0,zn>>>0,zn+Jn>>>0)},F:function(){return un?t(3993).cpus().length:navigator.hardwareConcurrency},Da:function(Mn,zn,Jn){gs.length=zn,Jn>>=3;for(var ar=0;ar<zn;ar++)gs[ar]=$e()[Jn+ar>>>0];return(0>Mn?Xr[-Mn-1]:na[Mn]).apply(null,gs)},qa:function(Mn){var zn=Me().length;if((Mn>>>=0)<=zn||4294901760<Mn)return!1;for(var Jn=1;4>=Jn;Jn*=2){var ar=zn*(1+.2/Jn);ar=Math.min(ar,Mn+100663296);var br=Math;ar=Math.max(Mn,ar),br=br.min.call(br,4294901760,ar+(65536-ar%65536)%65536);e:{try{Wn.grow(br-$n.byteLength+65535>>>16),Hr(Wn.buffer);var kr=1;break e}catch{}kr=void 0}if(kr)return!0}return!1},Na:function(){throw"unwind"},Ga:Or,Ha:Fi,J:ji,I:rs,S:go,ga:Uo,R:dl,d:function(){return _s},na:function Mn(zn,Jn){Mn.lc||(Mn.lc=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var br=new Uint8Array(1);return()=>(crypto.getRandomValues(br),br[0])}if(un)try{var kr=t(Object(function(){var ti=new Error("Cannot find module 'crypto'");throw ti.code="MODULE_NOT_FOUND",ti}()));return()=>kr.randomBytes(1)[0]}catch{}return()=>si("randomDevice")}());for(var ar=0;ar<Jn;ar++)Re()[zn+ar>>0>>>0]=Mn.lc();return 0},ia:function(Mn,zn,Jn){var ar=Zi();try{return ui(Mn)(zn,Jn)}catch(br){if(Xi(ar),br!==br+0)throw br;Yi(1,0)}},ja:function(Mn,zn,Jn){var ar=Zi();try{return ui(Mn)(zn,Jn)}catch(br){if(Xi(ar),br!==br+0)throw br;Yi(1,0)}},K:function(Mn){var zn=Zi();try{return ui(Mn)()}catch(Jn){if(Xi(zn),Jn!==Jn+0)throw Jn;Yi(1,0)}},f:function(Mn,zn){var Jn=Zi();try{return ui(Mn)(zn)}catch(ar){if(Xi(Jn),ar!==ar+0)throw ar;Yi(1,0)}},P:function(Mn,zn,Jn){var ar=Zi();try{return ui(Mn)(zn,Jn)}catch(br){if(Xi(ar),br!==br+0)throw br;Yi(1,0)}},Q:function(Mn,zn,Jn){var ar=Zi();try{return ui(Mn)(zn,Jn)}catch(br){if(Xi(ar),br!==br+0)throw br;Yi(1,0)}},k:function(Mn,zn,Jn){var ar=Zi();try{return ui(Mn)(zn,Jn)}catch(br){if(Xi(ar),br!==br+0)throw br;Yi(1,0)}},p:function(Mn,zn,Jn,ar){var br=Zi();try{return ui(Mn)(zn,Jn,ar)}catch(kr){if(Xi(br),kr!==kr+0)throw kr;Yi(1,0)}},q:function(Mn,zn,Jn,ar,br){var kr=Zi();try{return ui(Mn)(zn,Jn,ar,br)}catch(ti){if(Xi(kr),ti!==ti+0)throw ti;Yi(1,0)}},N:function(Mn,zn,Jn,ar,br,kr){var ti=Zi();try{return ui(Mn)(zn,Jn,ar,br,kr)}catch(li){if(Xi(ti),li!==li+0)throw li;Yi(1,0)}},s:function(Mn,zn,Jn,ar,br,kr){var ti=Zi();try{return ui(Mn)(zn,Jn,ar,br,kr)}catch(li){if(Xi(ti),li!==li+0)throw li;Yi(1,0)}},w:function(Mn,zn,Jn,ar,br,kr,ti){var li=Zi();try{return ui(Mn)(zn,Jn,ar,br,kr,ti)}catch(es){if(Xi(li),es!==es+0)throw es;Yi(1,0)}},L:function(Mn,zn,Jn,ar,br,kr,ti,li){var es=Zi();try{return ui(Mn)(zn,Jn,ar,br,kr,ti,li)}catch(Gi){if(Xi(es),Gi!==Gi+0)throw Gi;Yi(1,0)}},E:function(Mn,zn,Jn,ar,br,kr,ti,li,es,Gi,hs,_o){var io=Zi();try{return ui(Mn)(zn,Jn,ar,br,kr,ti,li,es,Gi,hs,_o)}catch(Rr){if(Xi(io),Rr!==Rr+0)throw Rr;Yi(1,0)}},aa:function(Mn,zn,Jn,ar,br,kr,ti,li){var es=Zi();try{return Ks(Mn,zn,Jn,ar,br,kr,ti,li)}catch(Gi){if(Xi(es),Gi!==Gi+0)throw Gi;Yi(1,0)}},_:function(Mn,zn,Jn,ar,br,kr,ti){var li=Zi();try{return ko(Mn,zn,Jn,ar,br,kr,ti)}catch(es){if(Xi(li),es!==es+0)throw es;Yi(1,0)}},Z:function(Mn,zn,Jn,ar,br){var kr=Zi();try{return Aa(Mn,zn,Jn,ar,br)}catch(ti){if(Xi(kr),ti!==ti+0)throw ti;Yi(1,0)}},ca:function(Mn,zn,Jn,ar){var br=Zi();try{return Vl(Mn,zn,Jn,ar)}catch(kr){if(Xi(br),kr!==kr+0)throw kr;Yi(1,0)}},$:function(Mn){var zn=Zi();try{return lo(Mn)}catch(Jn){if(Xi(zn),Jn!==Jn+0)throw Jn;Yi(1,0)}},ba:function(Mn,zn){var Jn=Zi();try{return Tl(Mn,zn)}catch(ar){if(Xi(Jn),ar!==ar+0)throw ar;Yi(1,0)}},Y:function(Mn,zn,Jn){var ar=Zi();try{return qo(Mn,zn,Jn)}catch(br){if(Xi(ar),br!==br+0)throw br;Yi(1,0)}},g:function(Mn){var zn=Zi();try{ui(Mn)()}catch(Jn){if(Xi(zn),Jn!==Jn+0)throw Jn;Yi(1,0)}},r:function(Mn,zn){var Jn=Zi();try{ui(Mn)(zn)}catch(ar){if(Xi(Jn),ar!==ar+0)throw ar;Yi(1,0)}},i:function(Mn,zn,Jn){var ar=Zi();try{ui(Mn)(zn,Jn)}catch(br){if(Xi(ar),br!==br+0)throw br;Yi(1,0)}},ha:function(Mn,zn,Jn,ar){var br=Zi();try{ui(Mn)(zn,Jn,ar)}catch(kr){if(Xi(br),kr!==kr+0)throw kr;Yi(1,0)}},m:function(Mn,zn,Jn,ar){var br=Zi();try{ui(Mn)(zn,Jn,ar)}catch(kr){if(Xi(br),kr!==kr+0)throw kr;Yi(1,0)}},v:function(Mn,zn,Jn,ar,br){var kr=Zi();try{ui(Mn)(zn,Jn,ar,br)}catch(ti){if(Xi(kr),ti!==ti+0)throw ti;Yi(1,0)}},u:function(Mn,zn,Jn,ar,br,kr){var ti=Zi();try{ui(Mn)(zn,Jn,ar,br,kr)}catch(li){if(Xi(ti),li!==li+0)throw li;Yi(1,0)}},O:function(Mn,zn,Jn,ar,br,kr,ti){var li=Zi();try{ui(Mn)(zn,Jn,ar,br,kr,ti)}catch(es){if(Xi(li),es!==es+0)throw es;Yi(1,0)}},A:function(Mn,zn,Jn,ar,br,kr,ti,li){var es=Zi();try{ui(Mn)(zn,Jn,ar,br,kr,ti,li)}catch(Gi){if(Xi(es),Gi!==Gi+0)throw Gi;Yi(1,0)}},ka:function(Mn,zn,Jn,ar,br,kr,ti,li,es){var Gi=Zi();try{ui(Mn)(zn,Jn,ar,br,kr,ti,li,es)}catch(hs){if(Xi(Gi),hs!==hs+0)throw hs;Yi(1,0)}},C:function(Mn,zn,Jn,ar,br,kr,ti,li,es,Gi,hs){var _o=Zi();try{ui(Mn)(zn,Jn,ar,br,kr,ti,li,es,Gi,hs)}catch(io){if(Xi(_o),io!==io+0)throw io;Yi(1,0)}},D:function(Mn,zn,Jn,ar,br,kr,ti,li,es,Gi,hs,_o,io,Rr,Ki,os){var Do=Zi();try{ui(Mn)(zn,Jn,ar,br,kr,ti,li,es,Gi,hs,_o,io,Rr,Ki,os)}catch(Ys){if(Xi(Do),Ys!==Ys+0)throw Ys;Yi(1,0)}},fa:function(Mn,zn,Jn,ar,br,kr,ti,li){var es=Zi();try{Vi(Mn,zn,Jn,ar,br,kr,ti,li)}catch(Gi){if(Xi(es),Gi!==Gi+0)throw Gi;Yi(1,0)}},da:function(Mn,zn,Jn,ar,br,kr,ti,li,es,Gi,hs,_o){var io=Zi();try{fa(Mn,zn,Jn,ar,br,kr,ti,li,es,Gi,hs,_o)}catch(Rr){if(Xi(io),Rr!==Rr+0)throw Rr;Yi(1,0)}},ea:function(Mn,zn,Jn,ar,br,kr){var ti=Zi();try{Xo(Mn,zn,Jn,ar,br,kr)}catch(li){if(Xi(ti),li!==li+0)throw li;Yi(1,0)}},o:function(Mn){return Mn},a:Wn||Oe.wasmMemory,G:function(Mn){_s=Mn},la:Wa,z:function(Mn,zn,Jn,ar){return Wa(Mn,zn,Jn,ar)}};(function(){function Mn(br,kr){Oe.asm=br.exports,Ur.qc.push(Oe.asm.sb),nr=Oe.asm.ub,Ti.unshift(Oe.asm.Va),On=kr,bn||(pi--,Oe.monitorRunDependencies&&Oe.monitorRunDependencies(pi),pi==0&&Wi&&(br=Wi,Wi=null,br()))}function zn(br){Mn(br.instance,br.module)}function Jn(br){return function(){if(!Ln&&(mn||pn)){if(typeof fetch=="function"&&!mi.startsWith("file://"))return fetch(mi,{credentials:"same-origin"}).then(function(kr){if(!kr.ok)throw"failed to load wasm binary file at '"+mi+"'";return kr.arrayBuffer()}).catch(function(){return Dr()});if(We)return new Promise(function(kr,ti){We(mi,function(li){kr(new Uint8Array(li))},ti)})}return Promise.resolve().then(function(){return Dr()})}().then(function(kr){return WebAssembly.instantiate(kr,ar)}).then(function(kr){return kr}).then(br,function(kr){Dn("failed to asynchronously prepare wasm: "+kr),si(kr)})}var ar={a:ra};if(bn||(pi++,Oe.monitorRunDependencies&&Oe.monitorRunDependencies(pi)),Oe.instantiateWasm)try{return Oe.instantiateWasm(ar,Mn)}catch(br){return Dn("Module.instantiateWasm callback failed with error: "+br),!1}(Ln||typeof WebAssembly.instantiateStreaming!="function"||_r()||mi.startsWith("file://")||un||typeof fetch!="function"?Jn(zn):fetch(mi,{credentials:"same-origin"}).then(function(br){return WebAssembly.instantiateStreaming(br,ar).then(zn,function(kr){return Dn("wasm streaming compile failed: "+kr),Dn("falling back to ArrayBuffer instantiation"),Jn(zn)})})).catch(Be)})(),Oe.___wasm_call_ctors=function(){return(Oe.___wasm_call_ctors=Oe.asm.Va).apply(null,arguments)},Oe._OrtInit=function(){return(Oe._OrtInit=Oe.asm.Wa).apply(null,arguments)},Oe._OrtCreateSessionOptions=function(){return(Oe._OrtCreateSessionOptions=Oe.asm.Xa).apply(null,arguments)},Oe._OrtAppendExecutionProvider=function(){return(Oe._OrtAppendExecutionProvider=Oe.asm.Ya).apply(null,arguments)},Oe._OrtAddSessionConfigEntry=function(){return(Oe._OrtAddSessionConfigEntry=Oe.asm.Za).apply(null,arguments)},Oe._OrtReleaseSessionOptions=function(){return(Oe._OrtReleaseSessionOptions=Oe.asm._a).apply(null,arguments)},Oe._OrtCreateSession=function(){return(Oe._OrtCreateSession=Oe.asm.$a).apply(null,arguments)},Oe._OrtReleaseSession=function(){return(Oe._OrtReleaseSession=Oe.asm.ab).apply(null,arguments)},Oe._OrtGetInputCount=function(){return(Oe._OrtGetInputCount=Oe.asm.bb).apply(null,arguments)},Oe._OrtGetOutputCount=function(){return(Oe._OrtGetOutputCount=Oe.asm.cb).apply(null,arguments)},Oe._OrtGetInputName=function(){return(Oe._OrtGetInputName=Oe.asm.db).apply(null,arguments)},Oe._OrtGetOutputName=function(){return(Oe._OrtGetOutputName=Oe.asm.eb).apply(null,arguments)},Oe._OrtFree=function(){return(Oe._OrtFree=Oe.asm.fb).apply(null,arguments)},Oe._OrtCreateTensor=function(){return(Oe._OrtCreateTensor=Oe.asm.gb).apply(null,arguments)},Oe._OrtGetTensorData=function(){return(Oe._OrtGetTensorData=Oe.asm.hb).apply(null,arguments)},Oe._OrtReleaseTensor=function(){return(Oe._OrtReleaseTensor=Oe.asm.ib).apply(null,arguments)},Oe._OrtCreateRunOptions=function(){return(Oe._OrtCreateRunOptions=Oe.asm.jb).apply(null,arguments)},Oe._OrtAddRunConfigEntry=function(){return(Oe._OrtAddRunConfigEntry=Oe.asm.kb).apply(null,arguments)},Oe._OrtReleaseRunOptions=function(){return(Oe._OrtReleaseRunOptions=Oe.asm.lb).apply(null,arguments)},Oe._OrtRun=function(){return(Oe._OrtRun=Oe.asm.mb).apply(null,arguments)},Oe._OrtEndProfiling=function(){return(Oe._OrtEndProfiling=Oe.asm.nb).apply(null,arguments)};var ao=Oe._pthread_self=function(){return(ao=Oe._pthread_self=Oe.asm.ob).apply(null,arguments)},Va=Oe._malloc=function(){return(Va=Oe._malloc=Oe.asm.pb).apply(null,arguments)},Ts=Oe._free=function(){return(Ts=Oe._free=Oe.asm.qb).apply(null,arguments)},Io=Oe._fflush=function(){return(Io=Oe._fflush=Oe.asm.rb).apply(null,arguments)};Oe.__emscripten_tls_init=function(){return(Oe.__emscripten_tls_init=Oe.asm.sb).apply(null,arguments)};var Ha=Oe.___funcs_on_exit=function(){return(Ha=Oe.___funcs_on_exit=Oe.asm.tb).apply(null,arguments)},ja=Oe.__emscripten_thread_init=function(){return(ja=Oe.__emscripten_thread_init=Oe.asm.vb).apply(null,arguments)};Oe.__emscripten_thread_crashed=function(){return(Oe.__emscripten_thread_crashed=Oe.asm.wb).apply(null,arguments)};var ha,ls=Oe._emscripten_run_in_main_runtime_thread_js=function(){return(ls=Oe._emscripten_run_in_main_runtime_thread_js=Oe.asm.xb).apply(null,arguments)},Ta=Oe.__emscripten_proxy_execute_task_queue=function(){return(Ta=Oe.__emscripten_proxy_execute_task_queue=Oe.asm.yb).apply(null,arguments)},ss=Oe.__emscripten_thread_free_data=function(){return(ss=Oe.__emscripten_thread_free_data=Oe.asm.zb).apply(null,arguments)},zo=Oe.__emscripten_thread_exit=function(){return(zo=Oe.__emscripten_thread_exit=Oe.asm.Ab).apply(null,arguments)},Yi=Oe._setThrew=function(){return(Yi=Oe._setThrew=Oe.asm.Bb).apply(null,arguments)},tl=Oe._emscripten_stack_set_limits=function(){return(tl=Oe._emscripten_stack_set_limits=Oe.asm.Cb).apply(null,arguments)},Zi=Oe.stackSave=function(){return(Zi=Oe.stackSave=Oe.asm.Db).apply(null,arguments)},Xi=Oe.stackRestore=function(){return(Xi=Oe.stackRestore=Oe.asm.Eb).apply(null,arguments)},Ga=Oe.stackAlloc=function(){return(Ga=Oe.stackAlloc=Oe.asm.Fb).apply(null,arguments)},ia=Oe.___cxa_can_catch=function(){return(ia=Oe.___cxa_can_catch=Oe.asm.Gb).apply(null,arguments)},Ro=Oe.___cxa_is_pointer_type=function(){return(Ro=Oe.___cxa_is_pointer_type=Oe.asm.Hb).apply(null,arguments)},lo=Oe.dynCall_j=function(){return(lo=Oe.dynCall_j=Oe.asm.Ib).apply(null,arguments)},ko=Oe.dynCall_iiiiij=function(){return(ko=Oe.dynCall_iiiiij=Oe.asm.Jb).apply(null,arguments)},qo=Oe.dynCall_jii=function(){return(qo=Oe.dynCall_jii=Oe.asm.Kb).apply(null,arguments)},Vi=Oe.dynCall_viiiiij=function(){return(Vi=Oe.dynCall_viiiiij=Oe.asm.Lb).apply(null,arguments)},Xo=Oe.dynCall_vjji=function(){return(Xo=Oe.dynCall_vjji=Oe.asm.Mb).apply(null,arguments)},fa=Oe.dynCall_viiijjjii=function(){return(fa=Oe.dynCall_viiijjjii=Oe.asm.Nb).apply(null,arguments)},Vl=Oe.dynCall_iij=function(){return(Vl=Oe.dynCall_iij=Oe.asm.Ob).apply(null,arguments)},Tl=Oe.dynCall_ji=function(){return(Tl=Oe.dynCall_ji=Oe.asm.Pb).apply(null,arguments)},Ks=Oe.dynCall_iiiiiij=function(){return(Ks=Oe.dynCall_iiiiiij=Oe.asm.Qb).apply(null,arguments)},Aa=Oe.dynCall_iiij=function(){return(Aa=Oe.dynCall_iiij=Oe.asm.Rb).apply(null,arguments)};function Al(){function Mn(){if(!ha&&(ha=!0,Oe.calledRun=!0,!or)&&(bn||Pi(Ti),Ce(Oe),Oe.onRuntimeInitialized&&Oe.onRuntimeInitialized(),!bn)){if(Oe.postRun)for(typeof Oe.postRun=="function"&&(Oe.postRun=[Oe.postRun]);Oe.postRun.length;){var zn=Oe.postRun.shift();qr.unshift(zn)}Pi(qr)}}if(!(0<pi))if(bn)Ce(Oe),bn||Pi(Ti),postMessage({cmd:"loaded"});else{if(Oe.preRun)for(typeof Oe.preRun=="function"&&(Oe.preRun=[Oe.preRun]);Oe.preRun.length;)Zr();Pi(Oi),0<pi||(Oe.setStatus?(Oe.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Oe.setStatus("")},1),Mn()},1)):Mn())}}if(Oe.UTF8ToString=Er,Oe.stringToUTF8=function(Mn,zn,Jn){return jr(Mn,Me(),zn,Jn)},Oe.lengthBytesUTF8=Kr,Oe.keepRuntimeAlive=di,Oe.wasmMemory=Wn,Oe.stackSave=Zi,Oe.stackRestore=Xi,Oe.stackAlloc=Ga,Oe.ExitStatus=Gr,Oe.PThread=Ur,Wi=function Mn(){ha||Al(),ha||(Wi=Mn)},Oe.preInit)for(typeof Oe.preInit=="function"&&(Oe.preInit=[Oe.preInit]);0<Oe.preInit.length;)Oe.preInit.pop()();return Al(),Te.ready});n.exports=Ee},932:(n,e,t)=>{var r,Ee=(r=(r=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(Te){var Re,Me,Ve;Te=Te||{},Re||(Re=Te!==void 0?Te:{}),Re.ready=new Promise(function(Hn,ir){Me=Hn,Ve=ir});var De,$e,Oe,Ce,Be,Ue,We=Object.assign({},Re),He="./this.program",Ge=(Hn,ir)=>{throw ir},Ye=typeof window=="object",Je=typeof importScripts=="function",Ze=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",fn="";Ze?(fn=Je?t(908).dirname(fn)+"/":"//",Ue=()=>{Be||(Ce=t(1384),Be=t(908))},De=function(Hn,ir){return Ue(),Hn=Be.normalize(Hn),Ce.readFileSync(Hn,ir?void 0:"utf8")},Oe=Hn=>((Hn=De(Hn,!0)).buffer||(Hn=new Uint8Array(Hn)),Hn),$e=(Hn,ir,ur)=>{Ue(),Hn=Be.normalize(Hn),Ce.readFile(Hn,function(gr,Pr){gr?ur(gr):ir(Pr.buffer)})},1<process.argv.length&&(He=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",function(Hn){if(!(Hn instanceof Ti))throw Hn}),process.on("unhandledRejection",function(Hn){throw Hn}),Ge=(Hn,ir)=>{if(un||0<pr)throw process.exitCode=Hn,ir;ir instanceof Ti||pn("exiting due to exception: "+ir),process.exit(Hn)},Re.inspect=function(){return"[Emscripten Module object]"}):(Ye||Je)&&(Je?fn=self.location.href:typeof document<"u"&&document.currentScript&&(fn=document.currentScript.src),r&&(fn=r),fn=fn.indexOf("blob:")!==0?fn.substr(0,fn.replace(/[?#].*/,"").lastIndexOf("/")+1):"",De=Hn=>{var ir=new XMLHttpRequest;return ir.open("GET",Hn,!1),ir.send(null),ir.responseText},Je&&(Oe=Hn=>{var ir=new XMLHttpRequest;return ir.open("GET",Hn,!1),ir.responseType="arraybuffer",ir.send(null),new Uint8Array(ir.response)}),$e=(Hn,ir,ur)=>{var gr=new XMLHttpRequest;gr.open("GET",Hn,!0),gr.responseType="arraybuffer",gr.onload=()=>{gr.status==200||gr.status==0&&gr.response?ir(gr.response):ur()},gr.onerror=ur,gr.send(null)});var yn,mn=Re.print||console.log.bind(console),pn=Re.printErr||console.warn.bind(console);Object.assign(Re,We),We=null,Re.thisProgram&&(He=Re.thisProgram),Re.quit&&(Ge=Re.quit),Re.wasmBinary&&(yn=Re.wasmBinary);var un=Re.noExitRuntime||!1;typeof WebAssembly!="object"&&Hr("no native wasm support detected");var bn,gn,xn,En,Pn,Ln,Cn=!1,Dn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Un(Hn,ir,ur){var gr=(ir>>>=0)+ur;for(ur=ir;Hn[ur]&&!(ur>=gr);)++ur;if(16<ur-ir&&Hn.buffer&&Dn)return Dn.decode(Hn.subarray(ir,ur));for(gr="";ir<ur;){var Pr=Hn[ir++];if(128&Pr){var Cr=63&Hn[ir++];if((224&Pr)==192)gr+=String.fromCharCode((31&Pr)<<6|Cr);else{var Jr=63&Hn[ir++];65536>(Pr=(240&Pr)==224?(15&Pr)<<12|Cr<<6|Jr:(7&Pr)<<18|Cr<<12|Jr<<6|63&Hn[ir++])?gr+=String.fromCharCode(Pr):(Pr-=65536,gr+=String.fromCharCode(55296|Pr>>10,56320|1023&Pr))}}else gr+=String.fromCharCode(Pr)}return gr}function Wn(Hn,ir){return(Hn>>>=0)?Un(En,Hn,ir):""}function On(Hn,ir,ur,gr){if(!(0<gr))return 0;var Pr=ur>>>=0;gr=ur+gr-1;for(var Cr=0;Cr<Hn.length;++Cr){var Jr=Hn.charCodeAt(Cr);if(55296<=Jr&&57343>=Jr&&(Jr=65536+((1023&Jr)<<10)|1023&Hn.charCodeAt(++Cr)),127>=Jr){if(ur>=gr)break;ir[ur++>>>0]=Jr}else{if(2047>=Jr){if(ur+1>=gr)break;ir[ur++>>>0]=192|Jr>>6}else{if(65535>=Jr){if(ur+2>=gr)break;ir[ur++>>>0]=224|Jr>>12}else{if(ur+3>=gr)break;ir[ur++>>>0]=240|Jr>>18,ir[ur++>>>0]=128|Jr>>12&63}ir[ur++>>>0]=128|Jr>>6&63}ir[ur++>>>0]=128|63&Jr}}return ir[ur>>>0]=0,ur-Pr}function $n(Hn){for(var ir=0,ur=0;ur<Hn.length;++ur){var gr=Hn.charCodeAt(ur);127>=gr?ir++:2047>=gr?ir+=2:55296<=gr&&57343>=gr?(ir+=4,++ur):ir+=3}return ir}function kn(){var Hn=bn.buffer;gn=Hn,Re.HEAP8=xn=new Int8Array(Hn),Re.HEAP16=new Int16Array(Hn),Re.HEAP32=Pn=new Int32Array(Hn),Re.HEAPU8=En=new Uint8Array(Hn),Re.HEAPU16=new Uint16Array(Hn),Re.HEAPU32=Ln=new Uint32Array(Hn),Re.HEAPF32=new Float32Array(Hn),Re.HEAPF64=new Float64Array(Hn)}var In,Kn=[],Qn=[],rr=[],or=[],pr=0;function mr(){var Hn=Re.preRun.shift();Kn.unshift(Hn)}var Er,jr=0,Kr=null;function Hr(Hn){throw Re.onAbort&&Re.onAbort(Hn),pn(Hn="Aborted("+Hn+")"),Cn=!0,Hn=new WebAssembly.RuntimeError(Hn+". Build with -sASSERTIONS for more info."),Ve(Hn),Hn}function xr(){return Er.startsWith("data:application/octet-stream;base64,")}if(Er="ort-wasm.wasm",!xr()){var nr=Er;Er=Re.locateFile?Re.locateFile(nr,fn):fn+nr}function Oi(){var Hn=Er;try{if(Hn==Er&&yn)return new Uint8Array(yn);if(Oe)return Oe(Hn);throw"both async and sync fetching of the wasm failed"}catch(ir){Hr(ir)}}function Ti(Hn){this.name="ExitStatus",this.message="Program terminated with exit("+Hn+")",this.status=Hn}function yi(Hn){for(;0<Hn.length;)Hn.shift()(Re)}var qr=[],di=0,Zr=0;function mi(Hn){this.Db=Hn,this.zb=Hn-24,this.Ub=function(ir){Ln[this.zb+4>>2>>>0]=ir},this.Eb=function(){return Ln[this.zb+4>>2>>>0]},this.Sb=function(ir){Ln[this.zb+8>>2>>>0]=ir},this.Wb=function(){return Ln[this.zb+8>>2>>>0]},this.Tb=function(){Pn[this.zb>>2>>>0]=0},this.Ib=function(ir){xn[this.zb+12>>0>>>0]=ir?1:0},this.Pb=function(){return xn[this.zb+12>>0>>>0]!=0},this.Jb=function(ir){xn[this.zb+13>>0>>>0]=ir?1:0},this.Lb=function(){return xn[this.zb+13>>0>>>0]!=0},this.Rb=function(ir,ur){this.Fb(0),this.Ub(ir),this.Sb(ur),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){Pn[this.zb>>2>>>0]+=1},this.Xb=function(){var ir=Pn[this.zb>>2>>>0];return Pn[this.zb>>2>>>0]=ir-1,ir===1},this.Fb=function(ir){Ln[this.zb+16>>2>>>0]=ir},this.Ob=function(){return Ln[this.zb+16>>2>>>0]},this.Qb=function(){if(Js(this.Eb()))return Ln[this.Db>>2>>>0];var ir=this.Ob();return ir!==0?ir:this.Db}}function pi(Hn){return vs(new mi(Hn).zb)}var Wi=[];function si(Hn){var ir=Wi[Hn];return ir||(Hn>=Wi.length&&(Wi.length=Hn+1),Wi[Hn]=ir=In.get(Hn)),ir}function _r(Hn){var ir=$n(Hn)+1,ur=ui(ir);return ur&&On(Hn,xn,ur,ir),ur}var Dr={};function Xr(){if(!Gr){var Hn,ir={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:He||"./this.program"};for(Hn in Dr)Dr[Hn]===void 0?delete ir[Hn]:ir[Hn]=Dr[Hn];var ur=[];for(Hn in ir)ur.push(Hn+"="+ir[Hn]);Gr=ur}return Gr}var Gr,ii=[null,[],[]];function hi(Hn,ir){var ur=ii[Hn];ir===0||ir===10?((Hn===1?mn:pn)(Un(ur,0)),ur.length=0):ur.push(ir)}var Mi=0;function ji(Hn){return Hn%4==0&&(Hn%100!=0||Hn%400==0)}var Ur=[31,29,31,30,31,30,31,31,30,31,30,31],Pi=[31,28,31,30,31,30,31,31,30,31,30,31];function Bi(Hn,ir,ur,gr){function Pr(Or,Fi,rs){for(Or=typeof Or=="number"?Or.toString():Or||"";Or.length<Fi;)Or=rs[0]+Or;return Or}function Cr(Or,Fi){return Pr(Or,Fi,"0")}function Jr(Or,Fi){function rs(Uo){return 0>Uo?-1:0<Uo?1:0}var go;return(go=rs(Or.getFullYear()-Fi.getFullYear()))===0&&(go=rs(Or.getMonth()-Fi.getMonth()))===0&&(go=rs(Or.getDate()-Fi.getDate())),go}function _i(Or){switch(Or.getDay()){case 0:return new Date(Or.getFullYear()-1,11,29);case 1:return Or;case 2:return new Date(Or.getFullYear(),0,3);case 3:return new Date(Or.getFullYear(),0,2);case 4:return new Date(Or.getFullYear(),0,1);case 5:return new Date(Or.getFullYear()-1,11,31);case 6:return new Date(Or.getFullYear()-1,11,30)}}function fi(Or){var Fi=Or.Bb;for(Or=new Date(new Date(Or.Cb+1900,0,1).getTime());0<Fi;){var rs=Or.getMonth(),go=(ji(Or.getFullYear())?Ur:Pi)[rs];if(!(Fi>go-Or.getDate())){Or.setDate(Or.getDate()+Fi);break}Fi-=go-Or.getDate()+1,Or.setDate(1),11>rs?Or.setMonth(rs+1):(Or.setMonth(0),Or.setFullYear(Or.getFullYear()+1))}return rs=new Date(Or.getFullYear()+1,0,4),Fi=_i(new Date(Or.getFullYear(),0,4)),rs=_i(rs),0>=Jr(Fi,Or)?0>=Jr(rs,Or)?Or.getFullYear()+1:Or.getFullYear():Or.getFullYear()-1}var Ui=Pn[gr+40>>2>>>0];for(var gs in gr={$b:Pn[gr>>2>>>0],Zb:Pn[gr+4>>2>>>0],Gb:Pn[gr+8>>2>>>0],Kb:Pn[gr+12>>2>>>0],Hb:Pn[gr+16>>2>>>0],Cb:Pn[gr+20>>2>>>0],Ab:Pn[gr+24>>2>>>0],Bb:Pn[gr+28>>2>>>0],bc:Pn[gr+32>>2>>>0],Yb:Pn[gr+36>>2>>>0],ac:Ui?Wn(Ui):""},ur=Wn(ur),Ui={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})ur=ur.replace(new RegExp(gs,"g"),Ui[gs]);var Hi="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Vs="January February March April May June July August September October November December".split(" ");for(gs in Ui={"%a":function(Or){return Hi[Or.Ab].substring(0,3)},"%A":function(Or){return Hi[Or.Ab]},"%b":function(Or){return Vs[Or.Hb].substring(0,3)},"%B":function(Or){return Vs[Or.Hb]},"%C":function(Or){return Cr((Or.Cb+1900)/100|0,2)},"%d":function(Or){return Cr(Or.Kb,2)},"%e":function(Or){return Pr(Or.Kb,2," ")},"%g":function(Or){return fi(Or).toString().substring(2)},"%G":function(Or){return fi(Or)},"%H":function(Or){return Cr(Or.Gb,2)},"%I":function(Or){return(Or=Or.Gb)==0?Or=12:12<Or&&(Or-=12),Cr(Or,2)},"%j":function(Or){for(var Fi=0,rs=0;rs<=Or.Hb-1;Fi+=(ji(Or.Cb+1900)?Ur:Pi)[rs++]);return Cr(Or.Kb+Fi,3)},"%m":function(Or){return Cr(Or.Hb+1,2)},"%M":function(Or){return Cr(Or.Zb,2)},"%n":function(){return`
`},"%p":function(Or){return 0<=Or.Gb&&12>Or.Gb?"AM":"PM"},"%S":function(Or){return Cr(Or.$b,2)},"%t":function(){return"	"},"%u":function(Or){return Or.Ab||7},"%U":function(Or){return Cr(Math.floor((Or.Bb+7-Or.Ab)/7),2)},"%V":function(Or){var Fi=Math.floor((Or.Bb+7-(Or.Ab+6)%7)/7);if(2>=(Or.Ab+371-Or.Bb-2)%7&&Fi++,Fi)Fi==53&&((rs=(Or.Ab+371-Or.Bb)%7)==4||rs==3&&ji(Or.Cb)||(Fi=1));else{Fi=52;var rs=(Or.Ab+7-Or.Bb-1)%7;(rs==4||rs==5&&ji(Or.Cb%400-1))&&Fi++}return Cr(Fi,2)},"%w":function(Or){return Or.Ab},"%W":function(Or){return Cr(Math.floor((Or.Bb+7-(Or.Ab+6)%7)/7),2)},"%y":function(Or){return(Or.Cb+1900).toString().substring(2)},"%Y":function(Or){return Or.Cb+1900},"%z":function(Or){var Fi=0<=(Or=Or.Yb);return Or=Math.abs(Or)/60,(Fi?"+":"-")+("0000"+(Or/60*100+Or%60)).slice(-4)},"%Z":function(Or){return Or.ac},"%%":function(){return"%"}},ur=ur.replace(/%%/g,"\0\0"),Ui)ur.includes(gs)&&(ur=ur.replace(new RegExp(gs,"g"),Ui[gs](gr)));return gs=function(Or){var Fi=Array($n(Or)+1);return On(Or,Fi,0,Fi.length),Fi}(ur=ur.replace(/\0\0/g,"%")),gs.length>ir?0:(xn.set(gs,Hn>>>0),gs.length-1)}var vi={a:function(Hn){return ui(Hn+24)+24},m:function(Hn){return(Hn=new mi(Hn)).Pb()||(Hn.Ib(!0),di--),Hn.Jb(!1),qr.push(Hn),Hn.Nb(),Hn.Qb()},ia:function(Hn){throw pn("Unexpected exception thrown, this is not properly supported - aborting"),Cn=!0,Hn},w:function(){ni(0);var Hn=qr.pop();if(Hn.Xb()&&!Hn.Lb()){var ir=Hn.Wb();ir&&si(ir)(Hn.Db),pi(Hn.Db)}Zr=0},d:function(){var Hn=Zr;if(!Hn)return Mi=0;var ir=new mi(Hn);ir.Fb(Hn);var ur=ir.Eb();if(!ur)return Mi=0,Hn;for(var gr=Array.prototype.slice.call(arguments),Pr=0;Pr<gr.length;Pr++){var Cr=gr[Pr];if(Cr===0||Cr===ur)break;if(mo(Cr,ur,ir.zb+16))return Mi=Cr,Hn}return Mi=ur,Hn},k:function(){var Hn=Zr;if(!Hn)return Mi=0;var ir=new mi(Hn);ir.Fb(Hn);var ur=ir.Eb();if(!ur)return Mi=0,Hn;for(var gr=Array.prototype.slice.call(arguments),Pr=0;Pr<gr.length;Pr++){var Cr=gr[Pr];if(Cr===0||Cr===ur)break;if(mo(Cr,ur,ir.zb+16))return Mi=Cr,Hn}return Mi=ur,Hn},g:function(){var Hn=Zr;if(!Hn)return Mi=0;var ir=new mi(Hn);ir.Fb(Hn);var ur=ir.Eb();if(!ur)return Mi=0,Hn;for(var gr=Array.prototype.slice.call(arguments),Pr=0;Pr<gr.length;Pr++){var Cr=gr[Pr];if(Cr===0||Cr===ur)break;if(mo(Cr,ur,ir.zb+16))return Mi=Cr,Hn}return Mi=ur,Hn},s:pi,L:function(){var Hn=qr.pop();Hn||Hr("no exception to throw");var ir=Hn.Db;throw Hn.Lb()||(qr.push(Hn),Hn.Jb(!0),Hn.Ib(!1),di++),Zr=ir,ir},b:function(Hn,ir,ur){throw new mi(Hn).Rb(ir,ur),Zr=Hn,di++,Hn},la:function(){return di},i:function(Hn){throw Zr||(Zr=Hn),Hn},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){Hr("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){Hr("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(Hn,ir){Hn=new Date(1e3*(Ln[Hn>>>2]+4294967296*Pn[Hn+4>>>2])),Pn[ir>>2>>>0]=Hn.getUTCSeconds(),Pn[ir+4>>2>>>0]=Hn.getUTCMinutes(),Pn[ir+8>>2>>>0]=Hn.getUTCHours(),Pn[ir+12>>2>>>0]=Hn.getUTCDate(),Pn[ir+16>>2>>>0]=Hn.getUTCMonth(),Pn[ir+20>>2>>>0]=Hn.getUTCFullYear()-1900,Pn[ir+24>>2>>>0]=Hn.getUTCDay(),Pn[ir+28>>2>>>0]=(Hn.getTime()-Date.UTC(Hn.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(Hn,ir){Hn=new Date(1e3*(Ln[Hn>>>2]+4294967296*Pn[Hn+4>>>2])),Pn[ir>>2>>>0]=Hn.getSeconds(),Pn[ir+4>>2>>>0]=Hn.getMinutes(),Pn[ir+8>>2>>>0]=Hn.getHours(),Pn[ir+12>>2>>>0]=Hn.getDate(),Pn[ir+16>>2>>>0]=Hn.getMonth(),Pn[ir+20>>2>>>0]=Hn.getFullYear()-1900,Pn[ir+24>>2>>>0]=Hn.getDay();var ur=new Date(Hn.getFullYear(),0,1);Pn[ir+28>>2>>>0]=(Hn.getTime()-ur.getTime())/864e5|0,Pn[ir+36>>2>>>0]=-60*Hn.getTimezoneOffset();var gr=new Date(Hn.getFullYear(),6,1).getTimezoneOffset();ur=ur.getTimezoneOffset(),Pn[ir+32>>2>>>0]=0|(gr!=ur&&Hn.getTimezoneOffset()==Math.min(ur,gr))},Fa:function(Hn){var ir=new Date(Pn[Hn+20>>2>>>0]+1900,Pn[Hn+16>>2>>>0],Pn[Hn+12>>2>>>0],Pn[Hn+8>>2>>>0],Pn[Hn+4>>2>>>0],Pn[Hn>>2>>>0],0),ur=Pn[Hn+32>>2>>>0],gr=ir.getTimezoneOffset(),Pr=new Date(ir.getFullYear(),0,1),Cr=new Date(ir.getFullYear(),6,1).getTimezoneOffset(),Jr=Pr.getTimezoneOffset(),_i=Math.min(Jr,Cr);return 0>ur?Pn[Hn+32>>2>>>0]=+(Cr!=Jr&&_i==gr):0<ur!=(_i==gr)&&(Cr=Math.max(Jr,Cr),ir.setTime(ir.getTime()+6e4*((0<ur?_i:Cr)-gr))),Pn[Hn+24>>2>>>0]=ir.getDay(),Pn[Hn+28>>2>>>0]=(ir.getTime()-Pr.getTime())/864e5|0,Pn[Hn>>2>>>0]=ir.getSeconds(),Pn[Hn+4>>2>>>0]=ir.getMinutes(),Pn[Hn+8>>2>>>0]=ir.getHours(),Pn[Hn+12>>2>>>0]=ir.getDate(),Pn[Hn+16>>2>>>0]=ir.getMonth(),ir.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function Hn(ir,ur,gr){Hn.Vb||(Hn.Vb=!0,function(Pr,Cr,Jr){function _i(Vs){return(Vs=Vs.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Vs[1]:"GMT"}var fi=new Date().getFullYear(),Ui=new Date(fi,0,1),gs=new Date(fi,6,1);fi=Ui.getTimezoneOffset();var Hi=gs.getTimezoneOffset();Pn[Pr>>2>>>0]=60*Math.max(fi,Hi),Pn[Cr>>2>>>0]=+(fi!=Hi),Pr=_i(Ui),Cr=_i(gs),Pr=_r(Pr),Cr=_r(Cr),Hi<fi?(Ln[Jr>>2>>>0]=Pr,Ln[Jr+4>>2>>>0]=Cr):(Ln[Jr>>2>>>0]=Cr,Ln[Jr+4>>2>>>0]=Pr)}(ir,ur,gr))},B:function(){Hr("")},ma:function(){return 4294901760},I:Ze?()=>{var Hn=process.hrtime();return 1e3*Hn[0]+Hn[1]/1e6}:()=>performance.now(),xa:function(Hn,ir,ur){En.copyWithin(Hn>>>0,ir>>>0,ir+ur>>>0)},G:function(Hn){var ir=En.length;if(4294901760<(Hn>>>=0))return!1;for(var ur=1;4>=ur;ur*=2){var gr=ir*(1+.2/ur);gr=Math.min(gr,Hn+100663296);var Pr=Math;gr=Math.max(Hn,gr),Pr=Pr.min.call(Pr,4294901760,gr+(65536-gr%65536)%65536);e:{try{bn.grow(Pr-gn.byteLength+65535>>>16),kn();var Cr=1;break e}catch{}Cr=void 0}if(Cr)return!0}return!1},va:function(Hn,ir){var ur=0;return Xr().forEach(function(gr,Pr){var Cr=ir+ur;for(Pr=Ln[Hn+4*Pr>>2>>>0]=Cr,Cr=0;Cr<gr.length;++Cr)xn[Pr++>>0>>>0]=gr.charCodeAt(Cr);xn[Pr>>0>>>0]=0,ur+=gr.length+1}),0},wa:function(Hn,ir){var ur=Xr();Ln[Hn>>2>>>0]=ur.length;var gr=0;return ur.forEach(function(Pr){gr+=Pr.length+1}),Ln[ir>>2>>>0]=gr,0},ba:function(Hn){un||0<pr||(ns(),yi(rr),ds(0),ii[1].length&&hi(1,10),ii[2].length&&hi(2,10)),un||0<pr||(Re.onExit&&Re.onExit(Hn),Cn=!0),Ge(Hn,new Ti(Hn))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(Hn,ir,ur,gr){for(var Pr=0,Cr=0;Cr<ur;Cr++){var Jr=Ln[ir>>2>>>0],_i=Ln[ir+4>>2>>>0];ir+=8;for(var fi=0;fi<_i;fi++)hi(Hn,En[Jr+fi>>>0]);Pr+=_i}return Ln[gr>>2>>>0]=Pr,0},c:function(){return Mi},ja:function Hn(ir,ur){Hn.Mb||(Hn.Mb=function(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var Pr=new Uint8Array(1);return()=>(crypto.getRandomValues(Pr),Pr[0])}if(Ze)try{var Cr=t(Object(function(){var Jr=new Error("Cannot find module 'crypto'");throw Jr.code="MODULE_NOT_FOUND",Jr}()));return()=>Cr.randomBytes(1)[0]}catch{}return()=>Hr("randomDevice")}());for(var gr=0;gr<ur;gr++)xn[ir+gr>>0>>>0]=Hn.Mb();return 0},ea:function(Hn,ir,ur){var gr=oi();try{return si(Hn)(ir,ur)}catch(Pr){if(Di(gr),Pr!==Pr+0)throw Pr;ni(1,0)}},fa:function(Hn,ir,ur){var gr=oi();try{return si(Hn)(ir,ur)}catch(Pr){if(Di(gr),Pr!==Pr+0)throw Pr;ni(1,0)}},J:function(Hn){var ir=oi();try{return si(Hn)()}catch(ur){if(Di(ir),ur!==ur+0)throw ur;ni(1,0)}},e:function(Hn,ir){var ur=oi();try{return si(Hn)(ir)}catch(gr){if(Di(ur),gr!==gr+0)throw gr;ni(1,0)}},N:function(Hn,ir,ur){var gr=oi();try{return si(Hn)(ir,ur)}catch(Pr){if(Di(gr),Pr!==Pr+0)throw Pr;ni(1,0)}},O:function(Hn,ir,ur){var gr=oi();try{return si(Hn)(ir,ur)}catch(Pr){if(Di(gr),Pr!==Pr+0)throw Pr;ni(1,0)}},j:function(Hn,ir,ur){var gr=oi();try{return si(Hn)(ir,ur)}catch(Pr){if(Di(gr),Pr!==Pr+0)throw Pr;ni(1,0)}},o:function(Hn,ir,ur,gr){var Pr=oi();try{return si(Hn)(ir,ur,gr)}catch(Cr){if(Di(Pr),Cr!==Cr+0)throw Cr;ni(1,0)}},p:function(Hn,ir,ur,gr,Pr){var Cr=oi();try{return si(Hn)(ir,ur,gr,Pr)}catch(Jr){if(Di(Cr),Jr!==Jr+0)throw Jr;ni(1,0)}},M:function(Hn,ir,ur,gr,Pr,Cr){var Jr=oi();try{return si(Hn)(ir,ur,gr,Pr,Cr)}catch(_i){if(Di(Jr),_i!==_i+0)throw _i;ni(1,0)}},r:function(Hn,ir,ur,gr,Pr,Cr){var Jr=oi();try{return si(Hn)(ir,ur,gr,Pr,Cr)}catch(_i){if(Di(Jr),_i!==_i+0)throw _i;ni(1,0)}},v:function(Hn,ir,ur,gr,Pr,Cr,Jr){var _i=oi();try{return si(Hn)(ir,ur,gr,Pr,Cr,Jr)}catch(fi){if(Di(_i),fi!==fi+0)throw fi;ni(1,0)}},K:function(Hn,ir,ur,gr,Pr,Cr,Jr,_i){var fi=oi();try{return si(Hn)(ir,ur,gr,Pr,Cr,Jr,_i)}catch(Ui){if(Di(fi),Ui!==Ui+0)throw Ui;ni(1,0)}},D:function(Hn,ir,ur,gr,Pr,Cr,Jr,_i,fi,Ui,gs,Hi){var Vs=oi();try{return si(Hn)(ir,ur,gr,Pr,Cr,Jr,_i,fi,Ui,gs,Hi)}catch(Or){if(Di(Vs),Or!==Or+0)throw Or;ni(1,0)}},X:function(Hn,ir,ur,gr,Pr,Cr,Jr,_i){var fi=oi();try{return Yo(Hn,ir,ur,gr,Pr,Cr,Jr,_i)}catch(Ui){if(Di(fi),Ui!==Ui+0)throw Ui;ni(1,0)}},V:function(Hn,ir,ur,gr,Pr,Cr,Jr){var _i=oi();try{return ms(Hn,ir,ur,gr,Pr,Cr,Jr)}catch(fi){if(Di(_i),fi!==fi+0)throw fi;ni(1,0)}},U:function(Hn,ir,ur,gr,Pr){var Cr=oi();try{return ta(Hn,ir,ur,gr,Pr)}catch(Jr){if(Di(Cr),Jr!==Jr+0)throw Jr;ni(1,0)}},Z:function(Hn,ir,ur,gr){var Pr=oi();try{return Cs(Hn,ir,ur,gr)}catch(Cr){if(Di(Pr),Cr!==Cr+0)throw Cr;ni(1,0)}},W:function(Hn){var ir=oi();try{return ki(Hn)}catch(ur){if(Di(ir),ur!==ur+0)throw ur;ni(1,0)}},Y:function(Hn,ir){var ur=oi();try{return xs(Hn,ir)}catch(gr){if(Di(ur),gr!==gr+0)throw gr;ni(1,0)}},T:function(Hn,ir,ur){var gr=oi();try{return So(Hn,ir,ur)}catch(Pr){if(Di(gr),Pr!==Pr+0)throw Pr;ni(1,0)}},f:function(Hn){var ir=oi();try{si(Hn)()}catch(ur){if(Di(ir),ur!==ur+0)throw ur;ni(1,0)}},q:function(Hn,ir){var ur=oi();try{si(Hn)(ir)}catch(gr){if(Di(ur),gr!==gr+0)throw gr;ni(1,0)}},h:function(Hn,ir,ur){var gr=oi();try{si(Hn)(ir,ur)}catch(Pr){if(Di(gr),Pr!==Pr+0)throw Pr;ni(1,0)}},da:function(Hn,ir,ur,gr){var Pr=oi();try{si(Hn)(ir,ur,gr)}catch(Cr){if(Di(Pr),Cr!==Cr+0)throw Cr;ni(1,0)}},l:function(Hn,ir,ur,gr){var Pr=oi();try{si(Hn)(ir,ur,gr)}catch(Cr){if(Di(Pr),Cr!==Cr+0)throw Cr;ni(1,0)}},t:function(Hn,ir,ur,gr,Pr){var Cr=oi();try{si(Hn)(ir,ur,gr,Pr)}catch(Jr){if(Di(Cr),Jr!==Jr+0)throw Jr;ni(1,0)}},u:function(Hn,ir,ur,gr,Pr,Cr){var Jr=oi();try{si(Hn)(ir,ur,gr,Pr,Cr)}catch(_i){if(Di(Jr),_i!==_i+0)throw _i;ni(1,0)}},x:function(Hn,ir,ur,gr,Pr,Cr,Jr){var _i=oi();try{si(Hn)(ir,ur,gr,Pr,Cr,Jr)}catch(fi){if(Di(_i),fi!==fi+0)throw fi;ni(1,0)}},z:function(Hn,ir,ur,gr,Pr,Cr,Jr,_i){var fi=oi();try{si(Hn)(ir,ur,gr,Pr,Cr,Jr,_i)}catch(Ui){if(Di(fi),Ui!==Ui+0)throw Ui;ni(1,0)}},ga:function(Hn,ir,ur,gr,Pr,Cr,Jr,_i,fi){var Ui=oi();try{si(Hn)(ir,ur,gr,Pr,Cr,Jr,_i,fi)}catch(gs){if(Di(Ui),gs!==gs+0)throw gs;ni(1,0)}},A:function(Hn,ir,ur,gr,Pr,Cr,Jr,_i,fi,Ui,gs){var Hi=oi();try{si(Hn)(ir,ur,gr,Pr,Cr,Jr,_i,fi,Ui,gs)}catch(Vs){if(Di(Hi),Vs!==Vs+0)throw Vs;ni(1,0)}},C:function(Hn,ir,ur,gr,Pr,Cr,Jr,_i,fi,Ui,gs,Hi,Vs,Or,Fi,rs){var go=oi();try{si(Hn)(ir,ur,gr,Pr,Cr,Jr,_i,fi,Ui,gs,Hi,Vs,Or,Fi,rs)}catch(Uo){if(Di(go),Uo!==Uo+0)throw Uo;ni(1,0)}},aa:function(Hn,ir,ur,gr,Pr,Cr,Jr,_i){var fi=oi();try{Ms(Hn,ir,ur,gr,Pr,Cr,Jr,_i)}catch(Ui){if(Di(fi),Ui!==Ui+0)throw Ui;ni(1,0)}},_:function(Hn,ir,ur,gr,Pr,Cr,Jr,_i,fi,Ui,gs,Hi){var Vs=oi();try{ws(Hn,ir,ur,gr,Pr,Cr,Jr,_i,fi,Ui,gs,Hi)}catch(Or){if(Di(Vs),Or!==Or+0)throw Or;ni(1,0)}},$:function(Hn,ir,ur,gr,Pr,Cr){var Jr=oi();try{Zs(Hn,ir,ur,gr,Pr,Cr)}catch(_i){if(Di(Jr),_i!==_i+0)throw _i;ni(1,0)}},n:function(Hn){return Hn},F:function(Hn){Mi=Hn},ha:Bi,y:function(Hn,ir,ur,gr){return Bi(Hn,ir,ur,gr)}};(function(){function Hn(Pr){Re.asm=Pr.exports,bn=Re.asm.Ka,kn(),In=Re.asm.ib,Qn.unshift(Re.asm.La),jr--,Re.monitorRunDependencies&&Re.monitorRunDependencies(jr),jr==0&&Kr&&(Pr=Kr,Kr=null,Pr())}function ir(Pr){Hn(Pr.instance)}function ur(Pr){return function(){if(!yn&&(Ye||Je)){if(typeof fetch=="function"&&!Er.startsWith("file://"))return fetch(Er,{credentials:"same-origin"}).then(function(Cr){if(!Cr.ok)throw"failed to load wasm binary file at '"+Er+"'";return Cr.arrayBuffer()}).catch(function(){return Oi()});if($e)return new Promise(function(Cr,Jr){$e(Er,function(_i){Cr(new Uint8Array(_i))},Jr)})}return Promise.resolve().then(function(){return Oi()})}().then(function(Cr){return WebAssembly.instantiate(Cr,gr)}).then(function(Cr){return Cr}).then(Pr,function(Cr){pn("failed to asynchronously prepare wasm: "+Cr),Hr(Cr)})}var gr={a:vi};if(jr++,Re.monitorRunDependencies&&Re.monitorRunDependencies(jr),Re.instantiateWasm)try{return Re.instantiateWasm(gr,Hn)}catch(Pr){return pn("Module.instantiateWasm callback failed with error: "+Pr),!1}(yn||typeof WebAssembly.instantiateStreaming!="function"||xr()||Er.startsWith("file://")||Ze||typeof fetch!="function"?ur(ir):fetch(Er,{credentials:"same-origin"}).then(function(Pr){return WebAssembly.instantiateStreaming(Pr,gr).then(ir,function(Cr){return pn("wasm streaming compile failed: "+Cr),pn("falling back to ArrayBuffer instantiation"),ur(ir)})})).catch(Ve)})(),Re.___wasm_call_ctors=function(){return(Re.___wasm_call_ctors=Re.asm.La).apply(null,arguments)},Re._OrtInit=function(){return(Re._OrtInit=Re.asm.Ma).apply(null,arguments)},Re._OrtCreateSessionOptions=function(){return(Re._OrtCreateSessionOptions=Re.asm.Na).apply(null,arguments)},Re._OrtAppendExecutionProvider=function(){return(Re._OrtAppendExecutionProvider=Re.asm.Oa).apply(null,arguments)},Re._OrtAddSessionConfigEntry=function(){return(Re._OrtAddSessionConfigEntry=Re.asm.Pa).apply(null,arguments)},Re._OrtReleaseSessionOptions=function(){return(Re._OrtReleaseSessionOptions=Re.asm.Qa).apply(null,arguments)},Re._OrtCreateSession=function(){return(Re._OrtCreateSession=Re.asm.Ra).apply(null,arguments)},Re._OrtReleaseSession=function(){return(Re._OrtReleaseSession=Re.asm.Sa).apply(null,arguments)},Re._OrtGetInputCount=function(){return(Re._OrtGetInputCount=Re.asm.Ta).apply(null,arguments)},Re._OrtGetOutputCount=function(){return(Re._OrtGetOutputCount=Re.asm.Ua).apply(null,arguments)},Re._OrtGetInputName=function(){return(Re._OrtGetInputName=Re.asm.Va).apply(null,arguments)},Re._OrtGetOutputName=function(){return(Re._OrtGetOutputName=Re.asm.Wa).apply(null,arguments)},Re._OrtFree=function(){return(Re._OrtFree=Re.asm.Xa).apply(null,arguments)},Re._OrtCreateTensor=function(){return(Re._OrtCreateTensor=Re.asm.Ya).apply(null,arguments)},Re._OrtGetTensorData=function(){return(Re._OrtGetTensorData=Re.asm.Za).apply(null,arguments)},Re._OrtReleaseTensor=function(){return(Re._OrtReleaseTensor=Re.asm._a).apply(null,arguments)},Re._OrtCreateRunOptions=function(){return(Re._OrtCreateRunOptions=Re.asm.$a).apply(null,arguments)},Re._OrtAddRunConfigEntry=function(){return(Re._OrtAddRunConfigEntry=Re.asm.ab).apply(null,arguments)},Re._OrtReleaseRunOptions=function(){return(Re._OrtReleaseRunOptions=Re.asm.bb).apply(null,arguments)},Re._OrtRun=function(){return(Re._OrtRun=Re.asm.cb).apply(null,arguments)},Re._OrtEndProfiling=function(){return(Re._OrtEndProfiling=Re.asm.db).apply(null,arguments)};var Ri,ui=Re._malloc=function(){return(ui=Re._malloc=Re.asm.eb).apply(null,arguments)},vs=Re._free=function(){return(vs=Re._free=Re.asm.fb).apply(null,arguments)},ds=Re._fflush=function(){return(ds=Re._fflush=Re.asm.gb).apply(null,arguments)},ns=Re.___funcs_on_exit=function(){return(ns=Re.___funcs_on_exit=Re.asm.hb).apply(null,arguments)},ni=Re._setThrew=function(){return(ni=Re._setThrew=Re.asm.jb).apply(null,arguments)},oi=Re.stackSave=function(){return(oi=Re.stackSave=Re.asm.kb).apply(null,arguments)},Di=Re.stackRestore=function(){return(Di=Re.stackRestore=Re.asm.lb).apply(null,arguments)},Ns=Re.stackAlloc=function(){return(Ns=Re.stackAlloc=Re.asm.mb).apply(null,arguments)},mo=Re.___cxa_can_catch=function(){return(mo=Re.___cxa_can_catch=Re.asm.nb).apply(null,arguments)},Js=Re.___cxa_is_pointer_type=function(){return(Js=Re.___cxa_is_pointer_type=Re.asm.ob).apply(null,arguments)},ki=Re.dynCall_j=function(){return(ki=Re.dynCall_j=Re.asm.pb).apply(null,arguments)},ms=Re.dynCall_iiiiij=function(){return(ms=Re.dynCall_iiiiij=Re.asm.qb).apply(null,arguments)},So=Re.dynCall_jii=function(){return(So=Re.dynCall_jii=Re.asm.rb).apply(null,arguments)},Ms=Re.dynCall_viiiiij=function(){return(Ms=Re.dynCall_viiiiij=Re.asm.sb).apply(null,arguments)},Zs=Re.dynCall_vjji=function(){return(Zs=Re.dynCall_vjji=Re.asm.tb).apply(null,arguments)},ws=Re.dynCall_viiijjjii=function(){return(ws=Re.dynCall_viiijjjii=Re.asm.ub).apply(null,arguments)},Cs=Re.dynCall_iij=function(){return(Cs=Re.dynCall_iij=Re.asm.vb).apply(null,arguments)},xs=Re.dynCall_ji=function(){return(xs=Re.dynCall_ji=Re.asm.wb).apply(null,arguments)},Yo=Re.dynCall_iiiiiij=function(){return(Yo=Re.dynCall_iiiiiij=Re.asm.xb).apply(null,arguments)},ta=Re.dynCall_iiij=function(){return(ta=Re.dynCall_iiij=Re.asm.yb).apply(null,arguments)};function oo(){function Hn(){if(!Ri&&(Ri=!0,Re.calledRun=!0,!Cn)){if(yi(Qn),Me(Re),Re.onRuntimeInitialized&&Re.onRuntimeInitialized(),Re.postRun)for(typeof Re.postRun=="function"&&(Re.postRun=[Re.postRun]);Re.postRun.length;){var ir=Re.postRun.shift();or.unshift(ir)}yi(or)}}if(!(0<jr)){if(Re.preRun)for(typeof Re.preRun=="function"&&(Re.preRun=[Re.preRun]);Re.preRun.length;)mr();yi(Kn),0<jr||(Re.setStatus?(Re.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Re.setStatus("")},1),Hn()},1)):Hn())}}if(Re.UTF8ToString=Wn,Re.stringToUTF8=function(Hn,ir,ur){return On(Hn,En,ir,ur)},Re.lengthBytesUTF8=$n,Re.stackSave=oi,Re.stackRestore=Di,Re.stackAlloc=Ns,Kr=function Hn(){Ri||oo(),Ri||(Kr=Hn)},Re.preInit)for(typeof Re.preInit=="function"&&(Re.preInit=[Re.preInit]);0<Re.preInit.length;)Re.preInit.pop()();return oo(),Te.ready});n.exports=Ee},4537:n=>{n.exports=function(e,t){for(var r=new Array(arguments.length-1),Ee=0,Te=2,Re=!0;Te<arguments.length;)r[Ee++]=arguments[Te++];return new Promise(function(Me,Ve){r[Ee]=function(De){if(Re)if(Re=!1,De)Ve(De);else{for(var $e=new Array(arguments.length-1),Oe=0;Oe<$e.length;)$e[Oe++]=arguments[Oe];Me.apply(null,$e)}};try{e.apply(t||null,r)}catch(De){Re&&(Re=!1,Ve(De))}})}},7419:(n,e)=>{var t=e;t.length=function(Me){var Ve=Me.length;if(!Ve)return 0;for(var De=0;--Ve%4>1&&Me.charAt(Ve)==="=";)++De;return Math.ceil(3*Me.length)/4-De};for(var r=new Array(64),Ee=new Array(123),Te=0;Te<64;)Ee[r[Te]=Te<26?Te+65:Te<52?Te+71:Te<62?Te-4:Te-59|43]=Te++;t.encode=function(Me,Ve,De){for(var $e,Oe=null,Ce=[],Be=0,Ue=0;Ve<De;){var We=Me[Ve++];switch(Ue){case 0:Ce[Be++]=r[We>>2],$e=(3&We)<<4,Ue=1;break;case 1:Ce[Be++]=r[$e|We>>4],$e=(15&We)<<2,Ue=2;break;case 2:Ce[Be++]=r[$e|We>>6],Ce[Be++]=r[63&We],Ue=0}Be>8191&&((Oe||(Oe=[])).push(String.fromCharCode.apply(String,Ce)),Be=0)}return Ue&&(Ce[Be++]=r[$e],Ce[Be++]=61,Ue===1&&(Ce[Be++]=61)),Oe?(Be&&Oe.push(String.fromCharCode.apply(String,Ce.slice(0,Be))),Oe.join("")):String.fromCharCode.apply(String,Ce.slice(0,Be))};var Re="invalid encoding";t.decode=function(Me,Ve,De){for(var $e,Oe=De,Ce=0,Be=0;Be<Me.length;){var Ue=Me.charCodeAt(Be++);if(Ue===61&&Ce>1)break;if((Ue=Ee[Ue])===void 0)throw Error(Re);switch(Ce){case 0:$e=Ue,Ce=1;break;case 1:Ve[De++]=$e<<2|(48&Ue)>>4,$e=Ue,Ce=2;break;case 2:Ve[De++]=(15&$e)<<4|(60&Ue)>>2,$e=Ue,Ce=3;break;case 3:Ve[De++]=(3&$e)<<6|Ue,Ce=0}}if(Ce===1)throw Error(Re);return De-Oe},t.test=function(Me){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(Me)}},9211:n=>{function e(){this._listeners={}}n.exports=e,e.prototype.on=function(t,r,Ee){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:r,ctx:Ee||this}),this},e.prototype.off=function(t,r){if(t===void 0)this._listeners={};else if(r===void 0)this._listeners[t]=[];else for(var Ee=this._listeners[t],Te=0;Te<Ee.length;)Ee[Te].fn===r?Ee.splice(Te,1):++Te;return this},e.prototype.emit=function(t){var r=this._listeners[t];if(r){for(var Ee=[],Te=1;Te<arguments.length;)Ee.push(arguments[Te++]);for(Te=0;Te<r.length;)r[Te].fn.apply(r[Te++].ctx,Ee)}return this}},945:n=>{function e(Re){return typeof Float32Array<"u"?function(){var Me=new Float32Array([-0]),Ve=new Uint8Array(Me.buffer),De=Ve[3]===128;function $e(Ue,We,He){Me[0]=Ue,We[He]=Ve[0],We[He+1]=Ve[1],We[He+2]=Ve[2],We[He+3]=Ve[3]}function Oe(Ue,We,He){Me[0]=Ue,We[He]=Ve[3],We[He+1]=Ve[2],We[He+2]=Ve[1],We[He+3]=Ve[0]}function Ce(Ue,We){return Ve[0]=Ue[We],Ve[1]=Ue[We+1],Ve[2]=Ue[We+2],Ve[3]=Ue[We+3],Me[0]}function Be(Ue,We){return Ve[3]=Ue[We],Ve[2]=Ue[We+1],Ve[1]=Ue[We+2],Ve[0]=Ue[We+3],Me[0]}Re.writeFloatLE=De?$e:Oe,Re.writeFloatBE=De?Oe:$e,Re.readFloatLE=De?Ce:Be,Re.readFloatBE=De?Be:Ce}():function(){function Me(De,$e,Oe,Ce){var Be=$e<0?1:0;if(Be&&($e=-$e),$e===0)De(1/$e>0?0:2147483648,Oe,Ce);else if(isNaN($e))De(2143289344,Oe,Ce);else if($e>34028234663852886e22)De((Be<<31|2139095040)>>>0,Oe,Ce);else if($e<11754943508222875e-54)De((Be<<31|Math.round($e/1401298464324817e-60))>>>0,Oe,Ce);else{var Ue=Math.floor(Math.log($e)/Math.LN2);De((Be<<31|Ue+127<<23|8388607&Math.round($e*Math.pow(2,-Ue)*8388608))>>>0,Oe,Ce)}}function Ve(De,$e,Oe){var Ce=De($e,Oe),Be=2*(Ce>>31)+1,Ue=Ce>>>23&255,We=8388607&Ce;return Ue===255?We?NaN:Be*(1/0):Ue===0?1401298464324817e-60*Be*We:Be*Math.pow(2,Ue-150)*(We+8388608)}Re.writeFloatLE=Me.bind(null,t),Re.writeFloatBE=Me.bind(null,r),Re.readFloatLE=Ve.bind(null,Ee),Re.readFloatBE=Ve.bind(null,Te)}(),typeof Float64Array<"u"?function(){var Me=new Float64Array([-0]),Ve=new Uint8Array(Me.buffer),De=Ve[7]===128;function $e(Ue,We,He){Me[0]=Ue,We[He]=Ve[0],We[He+1]=Ve[1],We[He+2]=Ve[2],We[He+3]=Ve[3],We[He+4]=Ve[4],We[He+5]=Ve[5],We[He+6]=Ve[6],We[He+7]=Ve[7]}function Oe(Ue,We,He){Me[0]=Ue,We[He]=Ve[7],We[He+1]=Ve[6],We[He+2]=Ve[5],We[He+3]=Ve[4],We[He+4]=Ve[3],We[He+5]=Ve[2],We[He+6]=Ve[1],We[He+7]=Ve[0]}function Ce(Ue,We){return Ve[0]=Ue[We],Ve[1]=Ue[We+1],Ve[2]=Ue[We+2],Ve[3]=Ue[We+3],Ve[4]=Ue[We+4],Ve[5]=Ue[We+5],Ve[6]=Ue[We+6],Ve[7]=Ue[We+7],Me[0]}function Be(Ue,We){return Ve[7]=Ue[We],Ve[6]=Ue[We+1],Ve[5]=Ue[We+2],Ve[4]=Ue[We+3],Ve[3]=Ue[We+4],Ve[2]=Ue[We+5],Ve[1]=Ue[We+6],Ve[0]=Ue[We+7],Me[0]}Re.writeDoubleLE=De?$e:Oe,Re.writeDoubleBE=De?Oe:$e,Re.readDoubleLE=De?Ce:Be,Re.readDoubleBE=De?Be:Ce}():function(){function Me(De,$e,Oe,Ce,Be,Ue){var We=Ce<0?1:0;if(We&&(Ce=-Ce),Ce===0)De(0,Be,Ue+$e),De(1/Ce>0?0:2147483648,Be,Ue+Oe);else if(isNaN(Ce))De(0,Be,Ue+$e),De(2146959360,Be,Ue+Oe);else if(Ce>17976931348623157e292)De(0,Be,Ue+$e),De((We<<31|2146435072)>>>0,Be,Ue+Oe);else{var He;if(Ce<22250738585072014e-324)De((He=Ce/5e-324)>>>0,Be,Ue+$e),De((We<<31|He/4294967296)>>>0,Be,Ue+Oe);else{var Ge=Math.floor(Math.log(Ce)/Math.LN2);Ge===1024&&(Ge=1023),De(4503599627370496*(He=Ce*Math.pow(2,-Ge))>>>0,Be,Ue+$e),De((We<<31|Ge+1023<<20|1048576*He&1048575)>>>0,Be,Ue+Oe)}}}function Ve(De,$e,Oe,Ce,Be){var Ue=De(Ce,Be+$e),We=De(Ce,Be+Oe),He=2*(We>>31)+1,Ge=We>>>20&2047,Ye=4294967296*(1048575&We)+Ue;return Ge===2047?Ye?NaN:He*(1/0):Ge===0?5e-324*He*Ye:He*Math.pow(2,Ge-1075)*(Ye+4503599627370496)}Re.writeDoubleLE=Me.bind(null,t,0,4),Re.writeDoubleBE=Me.bind(null,r,4,0),Re.readDoubleLE=Ve.bind(null,Ee,0,4),Re.readDoubleBE=Ve.bind(null,Te,4,0)}(),Re}function t(Re,Me,Ve){Me[Ve]=255&Re,Me[Ve+1]=Re>>>8&255,Me[Ve+2]=Re>>>16&255,Me[Ve+3]=Re>>>24}function r(Re,Me,Ve){Me[Ve]=Re>>>24,Me[Ve+1]=Re>>>16&255,Me[Ve+2]=Re>>>8&255,Me[Ve+3]=255&Re}function Ee(Re,Me){return(Re[Me]|Re[Me+1]<<8|Re[Me+2]<<16|Re[Me+3]<<24)>>>0}function Te(Re,Me){return(Re[Me]<<24|Re[Me+1]<<16|Re[Me+2]<<8|Re[Me+3])>>>0}n.exports=e(e)},7199:module=>{function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(n){}return null}module.exports=inquire},6662:n=>{n.exports=function(e,t,r){var Ee=r||8192,Te=Ee>>>1,Re=null,Me=Ee;return function(Ve){if(Ve<1||Ve>Te)return e(Ve);Me+Ve>Ee&&(Re=e(Ee),Me=0);var De=t.call(Re,Me,Me+=Ve);return 7&Me&&(Me=1+(7|Me)),De}}},4997:(n,e)=>{var t=e;t.length=function(r){for(var Ee=0,Te=0,Re=0;Re<r.length;++Re)(Te=r.charCodeAt(Re))<128?Ee+=1:Te<2048?Ee+=2:(64512&Te)==55296&&(64512&r.charCodeAt(Re+1))==56320?(++Re,Ee+=4):Ee+=3;return Ee},t.read=function(r,Ee,Te){if(Te-Ee<1)return"";for(var Re,Me=null,Ve=[],De=0;Ee<Te;)(Re=r[Ee++])<128?Ve[De++]=Re:Re>191&&Re<224?Ve[De++]=(31&Re)<<6|63&r[Ee++]:Re>239&&Re<365?(Re=((7&Re)<<18|(63&r[Ee++])<<12|(63&r[Ee++])<<6|63&r[Ee++])-65536,Ve[De++]=55296+(Re>>10),Ve[De++]=56320+(1023&Re)):Ve[De++]=(15&Re)<<12|(63&r[Ee++])<<6|63&r[Ee++],De>8191&&((Me||(Me=[])).push(String.fromCharCode.apply(String,Ve)),De=0);return Me?(De&&Me.push(String.fromCharCode.apply(String,Ve.slice(0,De))),Me.join("")):String.fromCharCode.apply(String,Ve.slice(0,De))},t.write=function(r,Ee,Te){for(var Re,Me,Ve=Te,De=0;De<r.length;++De)(Re=r.charCodeAt(De))<128?Ee[Te++]=Re:Re<2048?(Ee[Te++]=Re>>6|192,Ee[Te++]=63&Re|128):(64512&Re)==55296&&(64512&(Me=r.charCodeAt(De+1)))==56320?(Re=65536+((1023&Re)<<10)+(1023&Me),++De,Ee[Te++]=Re>>18|240,Ee[Te++]=Re>>12&63|128,Ee[Te++]=Re>>6&63|128,Ee[Te++]=63&Re|128):(Ee[Te++]=Re>>12|224,Ee[Te++]=Re>>6&63|128,Ee[Te++]=63&Re|128);return Te-Ve}},3442:(n,e)=>{e.__esModule=!0;var t=function(){function r(Ee){if(!Ee)throw new TypeError("Invalid argument; `value` has no value.");this.value=r.EMPTY,Ee&&r.isGuid(Ee)&&(this.value=Ee)}return r.isGuid=function(Ee){var Te=Ee.toString();return Ee&&(Ee instanceof r||r.validator.test(Te))},r.create=function(){return new r([r.gen(2),r.gen(1),r.gen(1),r.gen(1),r.gen(3)].join("-"))},r.createEmpty=function(){return new r("emptyguid")},r.parse=function(Ee){return new r(Ee)},r.raw=function(){return[r.gen(2),r.gen(1),r.gen(1),r.gen(1),r.gen(3)].join("-")},r.gen=function(Ee){for(var Te="",Re=0;Re<Ee;Re++)Te+=(65536*(1+Math.random())|0).toString(16).substring(1);return Te},r.prototype.equals=function(Ee){return r.isGuid(Ee)&&this.value===Ee.toString()},r.prototype.isEmpty=function(){return this.value===r.EMPTY},r.prototype.toString=function(){return this.value},r.prototype.toJSON=function(){return{value:this.value}},r.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),r.EMPTY="00000000-0000-0000-0000-000000000000",r}();e.Guid=t},3720:n=>{n.exports=t;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function t(un,bn,gn){this.low=0|un,this.high=0|bn,this.unsigned=!!gn}function r(un){return(un&&un.__isLong__)===!0}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0}),t.isLong=r;var Ee={},Te={};function Re(un,bn){var gn,xn,En;return bn?(En=0<=(un>>>=0)&&un<256)&&(xn=Te[un])?xn:(gn=Ve(un,(0|un)<0?-1:0,!0),En&&(Te[un]=gn),gn):(En=-128<=(un|=0)&&un<128)&&(xn=Ee[un])?xn:(gn=Ve(un,un<0?-1:0,!1),En&&(Ee[un]=gn),gn)}function Me(un,bn){if(isNaN(un))return bn?Ge:He;if(bn){if(un<0)return Ge;if(un>=Be)return yn}else{if(un<=-Ue)return mn;if(un+1>=Ue)return fn}return un<0?Me(-un,bn).neg():Ve(un%Ce|0,un/Ce|0,bn)}function Ve(un,bn,gn){return new t(un,bn,gn)}t.fromInt=Re,t.fromNumber=Me,t.fromBits=Ve;var De=Math.pow;function $e(un,bn,gn){if(un.length===0)throw Error("empty string");if(un==="NaN"||un==="Infinity"||un==="+Infinity"||un==="-Infinity")return He;if(typeof bn=="number"?(gn=bn,bn=!1):bn=!!bn,(gn=gn||10)<2||36<gn)throw RangeError("radix");var xn;if((xn=un.indexOf("-"))>0)throw Error("interior hyphen");if(xn===0)return $e(un.substring(1),bn,gn).neg();for(var En=Me(De(gn,8)),Pn=He,Ln=0;Ln<un.length;Ln+=8){var Cn=Math.min(8,un.length-Ln),Dn=parseInt(un.substring(Ln,Ln+Cn),gn);if(Cn<8){var Un=Me(De(gn,Cn));Pn=Pn.mul(Un).add(Me(Dn))}else Pn=(Pn=Pn.mul(En)).add(Me(Dn))}return Pn.unsigned=bn,Pn}function Oe(un,bn){return typeof un=="number"?Me(un,bn):typeof un=="string"?$e(un,bn):Ve(un.low,un.high,typeof bn=="boolean"?bn:un.unsigned)}t.fromString=$e,t.fromValue=Oe;var Ce=4294967296,Be=Ce*Ce,Ue=Be/2,We=Re(1<<24),He=Re(0);t.ZERO=He;var Ge=Re(0,!0);t.UZERO=Ge;var Ye=Re(1);t.ONE=Ye;var Je=Re(1,!0);t.UONE=Je;var Ze=Re(-1);t.NEG_ONE=Ze;var fn=Ve(-1,2147483647,!1);t.MAX_VALUE=fn;var yn=Ve(-1,-1,!0);t.MAX_UNSIGNED_VALUE=yn;var mn=Ve(0,-2147483648,!1);t.MIN_VALUE=mn;var pn=t.prototype;pn.toInt=function(){return this.unsigned?this.low>>>0:this.low},pn.toNumber=function(){return this.unsigned?(this.high>>>0)*Ce+(this.low>>>0):this.high*Ce+(this.low>>>0)},pn.toString=function(un){if((un=un||10)<2||36<un)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(mn)){var bn=Me(un),gn=this.div(bn),xn=gn.mul(bn).sub(this);return gn.toString(un)+xn.toInt().toString(un)}return"-"+this.neg().toString(un)}for(var En=Me(De(un,6),this.unsigned),Pn=this,Ln="";;){var Cn=Pn.div(En),Dn=(Pn.sub(Cn.mul(En)).toInt()>>>0).toString(un);if((Pn=Cn).isZero())return Dn+Ln;for(;Dn.length<6;)Dn="0"+Dn;Ln=""+Dn+Ln}},pn.getHighBits=function(){return this.high},pn.getHighBitsUnsigned=function(){return this.high>>>0},pn.getLowBits=function(){return this.low},pn.getLowBitsUnsigned=function(){return this.low>>>0},pn.getNumBitsAbs=function(){if(this.isNegative())return this.eq(mn)?64:this.neg().getNumBitsAbs();for(var un=this.high!=0?this.high:this.low,bn=31;bn>0&&(un&1<<bn)==0;bn--);return this.high!=0?bn+33:bn+1},pn.isZero=function(){return this.high===0&&this.low===0},pn.eqz=pn.isZero,pn.isNegative=function(){return!this.unsigned&&this.high<0},pn.isPositive=function(){return this.unsigned||this.high>=0},pn.isOdd=function(){return(1&this.low)==1},pn.isEven=function(){return(1&this.low)==0},pn.equals=function(un){return r(un)||(un=Oe(un)),(this.unsigned===un.unsigned||this.high>>>31!=1||un.high>>>31!=1)&&this.high===un.high&&this.low===un.low},pn.eq=pn.equals,pn.notEquals=function(un){return!this.eq(un)},pn.neq=pn.notEquals,pn.ne=pn.notEquals,pn.lessThan=function(un){return this.comp(un)<0},pn.lt=pn.lessThan,pn.lessThanOrEqual=function(un){return this.comp(un)<=0},pn.lte=pn.lessThanOrEqual,pn.le=pn.lessThanOrEqual,pn.greaterThan=function(un){return this.comp(un)>0},pn.gt=pn.greaterThan,pn.greaterThanOrEqual=function(un){return this.comp(un)>=0},pn.gte=pn.greaterThanOrEqual,pn.ge=pn.greaterThanOrEqual,pn.compare=function(un){if(r(un)||(un=Oe(un)),this.eq(un))return 0;var bn=this.isNegative(),gn=un.isNegative();return bn&&!gn?-1:!bn&&gn?1:this.unsigned?un.high>>>0>this.high>>>0||un.high===this.high&&un.low>>>0>this.low>>>0?-1:1:this.sub(un).isNegative()?-1:1},pn.comp=pn.compare,pn.negate=function(){return!this.unsigned&&this.eq(mn)?mn:this.not().add(Ye)},pn.neg=pn.negate,pn.add=function(un){r(un)||(un=Oe(un));var bn=this.high>>>16,gn=65535&this.high,xn=this.low>>>16,En=65535&this.low,Pn=un.high>>>16,Ln=65535&un.high,Cn=un.low>>>16,Dn=0,Un=0,Wn=0,On=0;return Wn+=(On+=En+(65535&un.low))>>>16,Un+=(Wn+=xn+Cn)>>>16,Dn+=(Un+=gn+Ln)>>>16,Dn+=bn+Pn,Ve((Wn&=65535)<<16|(On&=65535),(Dn&=65535)<<16|(Un&=65535),this.unsigned)},pn.subtract=function(un){return r(un)||(un=Oe(un)),this.add(un.neg())},pn.sub=pn.subtract,pn.multiply=function(un){if(this.isZero())return He;if(r(un)||(un=Oe(un)),e)return Ve(e.mul(this.low,this.high,un.low,un.high),e.get_high(),this.unsigned);if(un.isZero())return He;if(this.eq(mn))return un.isOdd()?mn:He;if(un.eq(mn))return this.isOdd()?mn:He;if(this.isNegative())return un.isNegative()?this.neg().mul(un.neg()):this.neg().mul(un).neg();if(un.isNegative())return this.mul(un.neg()).neg();if(this.lt(We)&&un.lt(We))return Me(this.toNumber()*un.toNumber(),this.unsigned);var bn=this.high>>>16,gn=65535&this.high,xn=this.low>>>16,En=65535&this.low,Pn=un.high>>>16,Ln=65535&un.high,Cn=un.low>>>16,Dn=65535&un.low,Un=0,Wn=0,On=0,$n=0;return On+=($n+=En*Dn)>>>16,Wn+=(On+=xn*Dn)>>>16,On&=65535,Wn+=(On+=En*Cn)>>>16,Un+=(Wn+=gn*Dn)>>>16,Wn&=65535,Un+=(Wn+=xn*Cn)>>>16,Wn&=65535,Un+=(Wn+=En*Ln)>>>16,Un+=bn*Dn+gn*Cn+xn*Ln+En*Pn,Ve((On&=65535)<<16|($n&=65535),(Un&=65535)<<16|(Wn&=65535),this.unsigned)},pn.mul=pn.multiply,pn.divide=function(un){if(r(un)||(un=Oe(un)),un.isZero())throw Error("division by zero");var bn,gn,xn;if(e)return this.unsigned||this.high!==-2147483648||un.low!==-1||un.high!==-1?Ve((this.unsigned?e.div_u:e.div_s)(this.low,this.high,un.low,un.high),e.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?Ge:He;if(this.unsigned){if(un.unsigned||(un=un.toUnsigned()),un.gt(this))return Ge;if(un.gt(this.shru(1)))return Je;xn=Ge}else{if(this.eq(mn))return un.eq(Ye)||un.eq(Ze)?mn:un.eq(mn)?Ye:(bn=this.shr(1).div(un).shl(1)).eq(He)?un.isNegative()?Ye:Ze:(gn=this.sub(un.mul(bn)),xn=bn.add(gn.div(un)));if(un.eq(mn))return this.unsigned?Ge:He;if(this.isNegative())return un.isNegative()?this.neg().div(un.neg()):this.neg().div(un).neg();if(un.isNegative())return this.div(un.neg()).neg();xn=He}for(gn=this;gn.gte(un);){bn=Math.max(1,Math.floor(gn.toNumber()/un.toNumber()));for(var En=Math.ceil(Math.log(bn)/Math.LN2),Pn=En<=48?1:De(2,En-48),Ln=Me(bn),Cn=Ln.mul(un);Cn.isNegative()||Cn.gt(gn);)Cn=(Ln=Me(bn-=Pn,this.unsigned)).mul(un);Ln.isZero()&&(Ln=Ye),xn=xn.add(Ln),gn=gn.sub(Cn)}return xn},pn.div=pn.divide,pn.modulo=function(un){return r(un)||(un=Oe(un)),e?Ve((this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,un.low,un.high),e.get_high(),this.unsigned):this.sub(this.div(un).mul(un))},pn.mod=pn.modulo,pn.rem=pn.modulo,pn.not=function(){return Ve(~this.low,~this.high,this.unsigned)},pn.and=function(un){return r(un)||(un=Oe(un)),Ve(this.low&un.low,this.high&un.high,this.unsigned)},pn.or=function(un){return r(un)||(un=Oe(un)),Ve(this.low|un.low,this.high|un.high,this.unsigned)},pn.xor=function(un){return r(un)||(un=Oe(un)),Ve(this.low^un.low,this.high^un.high,this.unsigned)},pn.shiftLeft=function(un){return r(un)&&(un=un.toInt()),(un&=63)==0?this:un<32?Ve(this.low<<un,this.high<<un|this.low>>>32-un,this.unsigned):Ve(0,this.low<<un-32,this.unsigned)},pn.shl=pn.shiftLeft,pn.shiftRight=function(un){return r(un)&&(un=un.toInt()),(un&=63)==0?this:un<32?Ve(this.low>>>un|this.high<<32-un,this.high>>un,this.unsigned):Ve(this.high>>un-32,this.high>=0?0:-1,this.unsigned)},pn.shr=pn.shiftRight,pn.shiftRightUnsigned=function(un){if(r(un)&&(un=un.toInt()),(un&=63)==0)return this;var bn=this.high;return un<32?Ve(this.low>>>un|bn<<32-un,bn>>>un,this.unsigned):Ve(un===32?bn:bn>>>un-32,0,this.unsigned)},pn.shru=pn.shiftRightUnsigned,pn.shr_u=pn.shiftRightUnsigned,pn.toSigned=function(){return this.unsigned?Ve(this.low,this.high,!1):this},pn.toUnsigned=function(){return this.unsigned?this:Ve(this.low,this.high,!0)},pn.toBytes=function(un){return un?this.toBytesLE():this.toBytesBE()},pn.toBytesLE=function(){var un=this.high,bn=this.low;return[255&bn,bn>>>8&255,bn>>>16&255,bn>>>24,255&un,un>>>8&255,un>>>16&255,un>>>24]},pn.toBytesBE=function(){var un=this.high,bn=this.low;return[un>>>24,un>>>16&255,un>>>8&255,255&un,bn>>>24,bn>>>16&255,bn>>>8&255,255&bn]},t.fromBytes=function(un,bn,gn){return gn?t.fromBytesLE(un,bn):t.fromBytesBE(un,bn)},t.fromBytesLE=function(un,bn){return new t(un[0]|un[1]<<8|un[2]<<16|un[3]<<24,un[4]|un[5]<<8|un[6]<<16|un[7]<<24,bn)},t.fromBytesBE=function(un,bn){return new t(un[4]<<24|un[5]<<16|un[6]<<8|un[7],un[0]<<24|un[1]<<16|un[2]<<8|un[3],bn)}},1446:(n,e,t)=>{var r,Ee,Te,Re=t(2100),Me=Re.Reader,Ve=Re.Writer,De=Re.util,$e=Re.roots.default||(Re.roots.default={});$e.onnx=((Te={}).Version=(r={},(Ee=Object.create(r))[r[0]="_START_VERSION"]=0,Ee[r[1]="IR_VERSION_2017_10_10"]=1,Ee[r[2]="IR_VERSION_2017_10_30"]=2,Ee[r[3]="IR_VERSION_2017_11_3"]=3,Ee[r[4]="IR_VERSION_2019_1_22"]=4,Ee[r[5]="IR_VERSION"]=5,Ee),Te.AttributeProto=function(){function Oe(Ce){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],Ce)for(var Be=Object.keys(Ce),Ue=0;Ue<Be.length;++Ue)Ce[Be[Ue]]!=null&&(this[Be[Ue]]=Ce[Be[Ue]])}return Oe.prototype.name="",Oe.prototype.refAttrName="",Oe.prototype.docString="",Oe.prototype.type=0,Oe.prototype.f=0,Oe.prototype.i=De.Long?De.Long.fromBits(0,0,!1):0,Oe.prototype.s=De.newBuffer([]),Oe.prototype.t=null,Oe.prototype.g=null,Oe.prototype.floats=De.emptyArray,Oe.prototype.ints=De.emptyArray,Oe.prototype.strings=De.emptyArray,Oe.prototype.tensors=De.emptyArray,Oe.prototype.graphs=De.emptyArray,Oe.create=function(Ce){return new Oe(Ce)},Oe.encode=function(Ce,Be){if(Be||(Be=Ve.create()),Ce.name!=null&&Ce.hasOwnProperty("name")&&Be.uint32(10).string(Ce.name),Ce.f!=null&&Ce.hasOwnProperty("f")&&Be.uint32(21).float(Ce.f),Ce.i!=null&&Ce.hasOwnProperty("i")&&Be.uint32(24).int64(Ce.i),Ce.s!=null&&Ce.hasOwnProperty("s")&&Be.uint32(34).bytes(Ce.s),Ce.t!=null&&Ce.hasOwnProperty("t")&&$e.onnx.TensorProto.encode(Ce.t,Be.uint32(42).fork()).ldelim(),Ce.g!=null&&Ce.hasOwnProperty("g")&&$e.onnx.GraphProto.encode(Ce.g,Be.uint32(50).fork()).ldelim(),Ce.floats!=null&&Ce.floats.length){Be.uint32(58).fork();for(var Ue=0;Ue<Ce.floats.length;++Ue)Be.float(Ce.floats[Ue]);Be.ldelim()}if(Ce.ints!=null&&Ce.ints.length){for(Be.uint32(66).fork(),Ue=0;Ue<Ce.ints.length;++Ue)Be.int64(Ce.ints[Ue]);Be.ldelim()}if(Ce.strings!=null&&Ce.strings.length)for(Ue=0;Ue<Ce.strings.length;++Ue)Be.uint32(74).bytes(Ce.strings[Ue]);if(Ce.tensors!=null&&Ce.tensors.length)for(Ue=0;Ue<Ce.tensors.length;++Ue)$e.onnx.TensorProto.encode(Ce.tensors[Ue],Be.uint32(82).fork()).ldelim();if(Ce.graphs!=null&&Ce.graphs.length)for(Ue=0;Ue<Ce.graphs.length;++Ue)$e.onnx.GraphProto.encode(Ce.graphs[Ue],Be.uint32(90).fork()).ldelim();return Ce.docString!=null&&Ce.hasOwnProperty("docString")&&Be.uint32(106).string(Ce.docString),Ce.type!=null&&Ce.hasOwnProperty("type")&&Be.uint32(160).int32(Ce.type),Ce.refAttrName!=null&&Ce.hasOwnProperty("refAttrName")&&Be.uint32(170).string(Ce.refAttrName),Be},Oe.encodeDelimited=function(Ce,Be){return this.encode(Ce,Be).ldelim()},Oe.decode=function(Ce,Be){Ce instanceof Me||(Ce=Me.create(Ce));for(var Ue=Be===void 0?Ce.len:Ce.pos+Be,We=new $e.onnx.AttributeProto;Ce.pos<Ue;){var He=Ce.uint32();switch(He>>>3){case 1:We.name=Ce.string();break;case 21:We.refAttrName=Ce.string();break;case 13:We.docString=Ce.string();break;case 20:We.type=Ce.int32();break;case 2:We.f=Ce.float();break;case 3:We.i=Ce.int64();break;case 4:We.s=Ce.bytes();break;case 5:We.t=$e.onnx.TensorProto.decode(Ce,Ce.uint32());break;case 6:We.g=$e.onnx.GraphProto.decode(Ce,Ce.uint32());break;case 7:if(We.floats&&We.floats.length||(We.floats=[]),(7&He)==2)for(var Ge=Ce.uint32()+Ce.pos;Ce.pos<Ge;)We.floats.push(Ce.float());else We.floats.push(Ce.float());break;case 8:if(We.ints&&We.ints.length||(We.ints=[]),(7&He)==2)for(Ge=Ce.uint32()+Ce.pos;Ce.pos<Ge;)We.ints.push(Ce.int64());else We.ints.push(Ce.int64());break;case 9:We.strings&&We.strings.length||(We.strings=[]),We.strings.push(Ce.bytes());break;case 10:We.tensors&&We.tensors.length||(We.tensors=[]),We.tensors.push($e.onnx.TensorProto.decode(Ce,Ce.uint32()));break;case 11:We.graphs&&We.graphs.length||(We.graphs=[]),We.graphs.push($e.onnx.GraphProto.decode(Ce,Ce.uint32()));break;default:Ce.skipType(7&He)}}return We},Oe.decodeDelimited=function(Ce){return Ce instanceof Me||(Ce=new Me(Ce)),this.decode(Ce,Ce.uint32())},Oe.verify=function(Ce){if(typeof Ce!="object"||Ce===null)return"object expected";if(Ce.name!=null&&Ce.hasOwnProperty("name")&&!De.isString(Ce.name))return"name: string expected";if(Ce.refAttrName!=null&&Ce.hasOwnProperty("refAttrName")&&!De.isString(Ce.refAttrName))return"refAttrName: string expected";if(Ce.docString!=null&&Ce.hasOwnProperty("docString")&&!De.isString(Ce.docString))return"docString: string expected";if(Ce.type!=null&&Ce.hasOwnProperty("type"))switch(Ce.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:}if(Ce.f!=null&&Ce.hasOwnProperty("f")&&typeof Ce.f!="number")return"f: number expected";if(Ce.i!=null&&Ce.hasOwnProperty("i")&&!(De.isInteger(Ce.i)||Ce.i&&De.isInteger(Ce.i.low)&&De.isInteger(Ce.i.high)))return"i: integer|Long expected";if(Ce.s!=null&&Ce.hasOwnProperty("s")&&!(Ce.s&&typeof Ce.s.length=="number"||De.isString(Ce.s)))return"s: buffer expected";if(Ce.t!=null&&Ce.hasOwnProperty("t")&&(Ue=$e.onnx.TensorProto.verify(Ce.t)))return"t."+Ue;if(Ce.g!=null&&Ce.hasOwnProperty("g")&&(Ue=$e.onnx.GraphProto.verify(Ce.g)))return"g."+Ue;if(Ce.floats!=null&&Ce.hasOwnProperty("floats")){if(!Array.isArray(Ce.floats))return"floats: array expected";for(var Be=0;Be<Ce.floats.length;++Be)if(typeof Ce.floats[Be]!="number")return"floats: number[] expected"}if(Ce.ints!=null&&Ce.hasOwnProperty("ints")){if(!Array.isArray(Ce.ints))return"ints: array expected";for(Be=0;Be<Ce.ints.length;++Be)if(!(De.isInteger(Ce.ints[Be])||Ce.ints[Be]&&De.isInteger(Ce.ints[Be].low)&&De.isInteger(Ce.ints[Be].high)))return"ints: integer|Long[] expected"}if(Ce.strings!=null&&Ce.hasOwnProperty("strings")){if(!Array.isArray(Ce.strings))return"strings: array expected";for(Be=0;Be<Ce.strings.length;++Be)if(!(Ce.strings[Be]&&typeof Ce.strings[Be].length=="number"||De.isString(Ce.strings[Be])))return"strings: buffer[] expected"}if(Ce.tensors!=null&&Ce.hasOwnProperty("tensors")){if(!Array.isArray(Ce.tensors))return"tensors: array expected";for(Be=0;Be<Ce.tensors.length;++Be)if(Ue=$e.onnx.TensorProto.verify(Ce.tensors[Be]))return"tensors."+Ue}if(Ce.graphs!=null&&Ce.hasOwnProperty("graphs")){if(!Array.isArray(Ce.graphs))return"graphs: array expected";for(Be=0;Be<Ce.graphs.length;++Be){var Ue;if(Ue=$e.onnx.GraphProto.verify(Ce.graphs[Be]))return"graphs."+Ue}}return null},Oe.fromObject=function(Ce){if(Ce instanceof $e.onnx.AttributeProto)return Ce;var Be=new $e.onnx.AttributeProto;switch(Ce.name!=null&&(Be.name=String(Ce.name)),Ce.refAttrName!=null&&(Be.refAttrName=String(Ce.refAttrName)),Ce.docString!=null&&(Be.docString=String(Ce.docString)),Ce.type){case"UNDEFINED":case 0:Be.type=0;break;case"FLOAT":case 1:Be.type=1;break;case"INT":case 2:Be.type=2;break;case"STRING":case 3:Be.type=3;break;case"TENSOR":case 4:Be.type=4;break;case"GRAPH":case 5:Be.type=5;break;case"FLOATS":case 6:Be.type=6;break;case"INTS":case 7:Be.type=7;break;case"STRINGS":case 8:Be.type=8;break;case"TENSORS":case 9:Be.type=9;break;case"GRAPHS":case 10:Be.type=10}if(Ce.f!=null&&(Be.f=Number(Ce.f)),Ce.i!=null&&(De.Long?(Be.i=De.Long.fromValue(Ce.i)).unsigned=!1:typeof Ce.i=="string"?Be.i=parseInt(Ce.i,10):typeof Ce.i=="number"?Be.i=Ce.i:typeof Ce.i=="object"&&(Be.i=new De.LongBits(Ce.i.low>>>0,Ce.i.high>>>0).toNumber())),Ce.s!=null&&(typeof Ce.s=="string"?De.base64.decode(Ce.s,Be.s=De.newBuffer(De.base64.length(Ce.s)),0):Ce.s.length&&(Be.s=Ce.s)),Ce.t!=null){if(typeof Ce.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");Be.t=$e.onnx.TensorProto.fromObject(Ce.t)}if(Ce.g!=null){if(typeof Ce.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");Be.g=$e.onnx.GraphProto.fromObject(Ce.g)}if(Ce.floats){if(!Array.isArray(Ce.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");Be.floats=[];for(var Ue=0;Ue<Ce.floats.length;++Ue)Be.floats[Ue]=Number(Ce.floats[Ue])}if(Ce.ints){if(!Array.isArray(Ce.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");for(Be.ints=[],Ue=0;Ue<Ce.ints.length;++Ue)De.Long?(Be.ints[Ue]=De.Long.fromValue(Ce.ints[Ue])).unsigned=!1:typeof Ce.ints[Ue]=="string"?Be.ints[Ue]=parseInt(Ce.ints[Ue],10):typeof Ce.ints[Ue]=="number"?Be.ints[Ue]=Ce.ints[Ue]:typeof Ce.ints[Ue]=="object"&&(Be.ints[Ue]=new De.LongBits(Ce.ints[Ue].low>>>0,Ce.ints[Ue].high>>>0).toNumber())}if(Ce.strings){if(!Array.isArray(Ce.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");for(Be.strings=[],Ue=0;Ue<Ce.strings.length;++Ue)typeof Ce.strings[Ue]=="string"?De.base64.decode(Ce.strings[Ue],Be.strings[Ue]=De.newBuffer(De.base64.length(Ce.strings[Ue])),0):Ce.strings[Ue].length&&(Be.strings[Ue]=Ce.strings[Ue])}if(Ce.tensors){if(!Array.isArray(Ce.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");for(Be.tensors=[],Ue=0;Ue<Ce.tensors.length;++Ue){if(typeof Ce.tensors[Ue]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");Be.tensors[Ue]=$e.onnx.TensorProto.fromObject(Ce.tensors[Ue])}}if(Ce.graphs){if(!Array.isArray(Ce.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");for(Be.graphs=[],Ue=0;Ue<Ce.graphs.length;++Ue){if(typeof Ce.graphs[Ue]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");Be.graphs[Ue]=$e.onnx.GraphProto.fromObject(Ce.graphs[Ue])}}return Be},Oe.toObject=function(Ce,Be){Be||(Be={});var Ue={};if((Be.arrays||Be.defaults)&&(Ue.floats=[],Ue.ints=[],Ue.strings=[],Ue.tensors=[],Ue.graphs=[]),Be.defaults){if(Ue.name="",Ue.f=0,De.Long){var We=new De.Long(0,0,!1);Ue.i=Be.longs===String?We.toString():Be.longs===Number?We.toNumber():We}else Ue.i=Be.longs===String?"0":0;Be.bytes===String?Ue.s="":(Ue.s=[],Be.bytes!==Array&&(Ue.s=De.newBuffer(Ue.s))),Ue.t=null,Ue.g=null,Ue.docString="",Ue.type=Be.enums===String?"UNDEFINED":0,Ue.refAttrName=""}if(Ce.name!=null&&Ce.hasOwnProperty("name")&&(Ue.name=Ce.name),Ce.f!=null&&Ce.hasOwnProperty("f")&&(Ue.f=Be.json&&!isFinite(Ce.f)?String(Ce.f):Ce.f),Ce.i!=null&&Ce.hasOwnProperty("i")&&(typeof Ce.i=="number"?Ue.i=Be.longs===String?String(Ce.i):Ce.i:Ue.i=Be.longs===String?De.Long.prototype.toString.call(Ce.i):Be.longs===Number?new De.LongBits(Ce.i.low>>>0,Ce.i.high>>>0).toNumber():Ce.i),Ce.s!=null&&Ce.hasOwnProperty("s")&&(Ue.s=Be.bytes===String?De.base64.encode(Ce.s,0,Ce.s.length):Be.bytes===Array?Array.prototype.slice.call(Ce.s):Ce.s),Ce.t!=null&&Ce.hasOwnProperty("t")&&(Ue.t=$e.onnx.TensorProto.toObject(Ce.t,Be)),Ce.g!=null&&Ce.hasOwnProperty("g")&&(Ue.g=$e.onnx.GraphProto.toObject(Ce.g,Be)),Ce.floats&&Ce.floats.length){Ue.floats=[];for(var He=0;He<Ce.floats.length;++He)Ue.floats[He]=Be.json&&!isFinite(Ce.floats[He])?String(Ce.floats[He]):Ce.floats[He]}if(Ce.ints&&Ce.ints.length)for(Ue.ints=[],He=0;He<Ce.ints.length;++He)typeof Ce.ints[He]=="number"?Ue.ints[He]=Be.longs===String?String(Ce.ints[He]):Ce.ints[He]:Ue.ints[He]=Be.longs===String?De.Long.prototype.toString.call(Ce.ints[He]):Be.longs===Number?new De.LongBits(Ce.ints[He].low>>>0,Ce.ints[He].high>>>0).toNumber():Ce.ints[He];if(Ce.strings&&Ce.strings.length)for(Ue.strings=[],He=0;He<Ce.strings.length;++He)Ue.strings[He]=Be.bytes===String?De.base64.encode(Ce.strings[He],0,Ce.strings[He].length):Be.bytes===Array?Array.prototype.slice.call(Ce.strings[He]):Ce.strings[He];if(Ce.tensors&&Ce.tensors.length)for(Ue.tensors=[],He=0;He<Ce.tensors.length;++He)Ue.tensors[He]=$e.onnx.TensorProto.toObject(Ce.tensors[He],Be);if(Ce.graphs&&Ce.graphs.length)for(Ue.graphs=[],He=0;He<Ce.graphs.length;++He)Ue.graphs[He]=$e.onnx.GraphProto.toObject(Ce.graphs[He],Be);return Ce.docString!=null&&Ce.hasOwnProperty("docString")&&(Ue.docString=Ce.docString),Ce.type!=null&&Ce.hasOwnProperty("type")&&(Ue.type=Be.enums===String?$e.onnx.AttributeProto.AttributeType[Ce.type]:Ce.type),Ce.refAttrName!=null&&Ce.hasOwnProperty("refAttrName")&&(Ue.refAttrName=Ce.refAttrName),Ue},Oe.prototype.toJSON=function(){return this.constructor.toObject(this,Re.util.toJSONOptions)},Oe.AttributeType=function(){var Ce={},Be=Object.create(Ce);return Be[Ce[0]="UNDEFINED"]=0,Be[Ce[1]="FLOAT"]=1,Be[Ce[2]="INT"]=2,Be[Ce[3]="STRING"]=3,Be[Ce[4]="TENSOR"]=4,Be[Ce[5]="GRAPH"]=5,Be[Ce[6]="FLOATS"]=6,Be[Ce[7]="INTS"]=7,Be[Ce[8]="STRINGS"]=8,Be[Ce[9]="TENSORS"]=9,Be[Ce[10]="GRAPHS"]=10,Be}(),Oe}(),Te.ValueInfoProto=function(){function Oe(Ce){if(Ce)for(var Be=Object.keys(Ce),Ue=0;Ue<Be.length;++Ue)Ce[Be[Ue]]!=null&&(this[Be[Ue]]=Ce[Be[Ue]])}return Oe.prototype.name="",Oe.prototype.type=null,Oe.prototype.docString="",Oe.create=function(Ce){return new Oe(Ce)},Oe.encode=function(Ce,Be){return Be||(Be=Ve.create()),Ce.name!=null&&Ce.hasOwnProperty("name")&&Be.uint32(10).string(Ce.name),Ce.type!=null&&Ce.hasOwnProperty("type")&&$e.onnx.TypeProto.encode(Ce.type,Be.uint32(18).fork()).ldelim(),Ce.docString!=null&&Ce.hasOwnProperty("docString")&&Be.uint32(26).string(Ce.docString),Be},Oe.encodeDelimited=function(Ce,Be){return this.encode(Ce,Be).ldelim()},Oe.decode=function(Ce,Be){Ce instanceof Me||(Ce=Me.create(Ce));for(var Ue=Be===void 0?Ce.len:Ce.pos+Be,We=new $e.onnx.ValueInfoProto;Ce.pos<Ue;){var He=Ce.uint32();switch(He>>>3){case 1:We.name=Ce.string();break;case 2:We.type=$e.onnx.TypeProto.decode(Ce,Ce.uint32());break;case 3:We.docString=Ce.string();break;default:Ce.skipType(7&He)}}return We},Oe.decodeDelimited=function(Ce){return Ce instanceof Me||(Ce=new Me(Ce)),this.decode(Ce,Ce.uint32())},Oe.verify=function(Ce){if(typeof Ce!="object"||Ce===null)return"object expected";if(Ce.name!=null&&Ce.hasOwnProperty("name")&&!De.isString(Ce.name))return"name: string expected";if(Ce.type!=null&&Ce.hasOwnProperty("type")){var Be=$e.onnx.TypeProto.verify(Ce.type);if(Be)return"type."+Be}return Ce.docString!=null&&Ce.hasOwnProperty("docString")&&!De.isString(Ce.docString)?"docString: string expected":null},Oe.fromObject=function(Ce){if(Ce instanceof $e.onnx.ValueInfoProto)return Ce;var Be=new $e.onnx.ValueInfoProto;if(Ce.name!=null&&(Be.name=String(Ce.name)),Ce.type!=null){if(typeof Ce.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");Be.type=$e.onnx.TypeProto.fromObject(Ce.type)}return Ce.docString!=null&&(Be.docString=String(Ce.docString)),Be},Oe.toObject=function(Ce,Be){Be||(Be={});var Ue={};return Be.defaults&&(Ue.name="",Ue.type=null,Ue.docString=""),Ce.name!=null&&Ce.hasOwnProperty("name")&&(Ue.name=Ce.name),Ce.type!=null&&Ce.hasOwnProperty("type")&&(Ue.type=$e.onnx.TypeProto.toObject(Ce.type,Be)),Ce.docString!=null&&Ce.hasOwnProperty("docString")&&(Ue.docString=Ce.docString),Ue},Oe.prototype.toJSON=function(){return this.constructor.toObject(this,Re.util.toJSONOptions)},Oe}(),Te.NodeProto=function(){function Oe(Ce){if(this.input=[],this.output=[],this.attribute=[],Ce)for(var Be=Object.keys(Ce),Ue=0;Ue<Be.length;++Ue)Ce[Be[Ue]]!=null&&(this[Be[Ue]]=Ce[Be[Ue]])}return Oe.prototype.input=De.emptyArray,Oe.prototype.output=De.emptyArray,Oe.prototype.name="",Oe.prototype.opType="",Oe.prototype.domain="",Oe.prototype.attribute=De.emptyArray,Oe.prototype.docString="",Oe.create=function(Ce){return new Oe(Ce)},Oe.encode=function(Ce,Be){if(Be||(Be=Ve.create()),Ce.input!=null&&Ce.input.length)for(var Ue=0;Ue<Ce.input.length;++Ue)Be.uint32(10).string(Ce.input[Ue]);if(Ce.output!=null&&Ce.output.length)for(Ue=0;Ue<Ce.output.length;++Ue)Be.uint32(18).string(Ce.output[Ue]);if(Ce.name!=null&&Ce.hasOwnProperty("name")&&Be.uint32(26).string(Ce.name),Ce.opType!=null&&Ce.hasOwnProperty("opType")&&Be.uint32(34).string(Ce.opType),Ce.attribute!=null&&Ce.attribute.length)for(Ue=0;Ue<Ce.attribute.length;++Ue)$e.onnx.AttributeProto.encode(Ce.attribute[Ue],Be.uint32(42).fork()).ldelim();return Ce.docString!=null&&Ce.hasOwnProperty("docString")&&Be.uint32(50).string(Ce.docString),Ce.domain!=null&&Ce.hasOwnProperty("domain")&&Be.uint32(58).string(Ce.domain),Be},Oe.encodeDelimited=function(Ce,Be){return this.encode(Ce,Be).ldelim()},Oe.decode=function(Ce,Be){Ce instanceof Me||(Ce=Me.create(Ce));for(var Ue=Be===void 0?Ce.len:Ce.pos+Be,We=new $e.onnx.NodeProto;Ce.pos<Ue;){var He=Ce.uint32();switch(He>>>3){case 1:We.input&&We.input.length||(We.input=[]),We.input.push(Ce.string());break;case 2:We.output&&We.output.length||(We.output=[]),We.output.push(Ce.string());break;case 3:We.name=Ce.string();break;case 4:We.opType=Ce.string();break;case 7:We.domain=Ce.string();break;case 5:We.attribute&&We.attribute.length||(We.attribute=[]),We.attribute.push($e.onnx.AttributeProto.decode(Ce,Ce.uint32()));break;case 6:We.docString=Ce.string();break;default:Ce.skipType(7&He)}}return We},Oe.decodeDelimited=function(Ce){return Ce instanceof Me||(Ce=new Me(Ce)),this.decode(Ce,Ce.uint32())},Oe.verify=function(Ce){if(typeof Ce!="object"||Ce===null)return"object expected";if(Ce.input!=null&&Ce.hasOwnProperty("input")){if(!Array.isArray(Ce.input))return"input: array expected";for(var Be=0;Be<Ce.input.length;++Be)if(!De.isString(Ce.input[Be]))return"input: string[] expected"}if(Ce.output!=null&&Ce.hasOwnProperty("output")){if(!Array.isArray(Ce.output))return"output: array expected";for(Be=0;Be<Ce.output.length;++Be)if(!De.isString(Ce.output[Be]))return"output: string[] expected"}if(Ce.name!=null&&Ce.hasOwnProperty("name")&&!De.isString(Ce.name))return"name: string expected";if(Ce.opType!=null&&Ce.hasOwnProperty("opType")&&!De.isString(Ce.opType))return"opType: string expected";if(Ce.domain!=null&&Ce.hasOwnProperty("domain")&&!De.isString(Ce.domain))return"domain: string expected";if(Ce.attribute!=null&&Ce.hasOwnProperty("attribute")){if(!Array.isArray(Ce.attribute))return"attribute: array expected";for(Be=0;Be<Ce.attribute.length;++Be){var Ue=$e.onnx.AttributeProto.verify(Ce.attribute[Be]);if(Ue)return"attribute."+Ue}}return Ce.docString!=null&&Ce.hasOwnProperty("docString")&&!De.isString(Ce.docString)?"docString: string expected":null},Oe.fromObject=function(Ce){if(Ce instanceof $e.onnx.NodeProto)return Ce;var Be=new $e.onnx.NodeProto;if(Ce.input){if(!Array.isArray(Ce.input))throw TypeError(".onnx.NodeProto.input: array expected");Be.input=[];for(var Ue=0;Ue<Ce.input.length;++Ue)Be.input[Ue]=String(Ce.input[Ue])}if(Ce.output){if(!Array.isArray(Ce.output))throw TypeError(".onnx.NodeProto.output: array expected");for(Be.output=[],Ue=0;Ue<Ce.output.length;++Ue)Be.output[Ue]=String(Ce.output[Ue])}if(Ce.name!=null&&(Be.name=String(Ce.name)),Ce.opType!=null&&(Be.opType=String(Ce.opType)),Ce.domain!=null&&(Be.domain=String(Ce.domain)),Ce.attribute){if(!Array.isArray(Ce.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");for(Be.attribute=[],Ue=0;Ue<Ce.attribute.length;++Ue){if(typeof Ce.attribute[Ue]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");Be.attribute[Ue]=$e.onnx.AttributeProto.fromObject(Ce.attribute[Ue])}}return Ce.docString!=null&&(Be.docString=String(Ce.docString)),Be},Oe.toObject=function(Ce,Be){Be||(Be={});var Ue={};if((Be.arrays||Be.defaults)&&(Ue.input=[],Ue.output=[],Ue.attribute=[]),Be.defaults&&(Ue.name="",Ue.opType="",Ue.docString="",Ue.domain=""),Ce.input&&Ce.input.length){Ue.input=[];for(var We=0;We<Ce.input.length;++We)Ue.input[We]=Ce.input[We]}if(Ce.output&&Ce.output.length)for(Ue.output=[],We=0;We<Ce.output.length;++We)Ue.output[We]=Ce.output[We];if(Ce.name!=null&&Ce.hasOwnProperty("name")&&(Ue.name=Ce.name),Ce.opType!=null&&Ce.hasOwnProperty("opType")&&(Ue.opType=Ce.opType),Ce.attribute&&Ce.attribute.length)for(Ue.attribute=[],We=0;We<Ce.attribute.length;++We)Ue.attribute[We]=$e.onnx.AttributeProto.toObject(Ce.attribute[We],Be);return Ce.docString!=null&&Ce.hasOwnProperty("docString")&&(Ue.docString=Ce.docString),Ce.domain!=null&&Ce.hasOwnProperty("domain")&&(Ue.domain=Ce.domain),Ue},Oe.prototype.toJSON=function(){return this.constructor.toObject(this,Re.util.toJSONOptions)},Oe}(),Te.ModelProto=function(){function Oe(Ce){if(this.opsetImport=[],this.metadataProps=[],Ce)for(var Be=Object.keys(Ce),Ue=0;Ue<Be.length;++Ue)Ce[Be[Ue]]!=null&&(this[Be[Ue]]=Ce[Be[Ue]])}return Oe.prototype.irVersion=De.Long?De.Long.fromBits(0,0,!1):0,Oe.prototype.opsetImport=De.emptyArray,Oe.prototype.producerName="",Oe.prototype.producerVersion="",Oe.prototype.domain="",Oe.prototype.modelVersion=De.Long?De.Long.fromBits(0,0,!1):0,Oe.prototype.docString="",Oe.prototype.graph=null,Oe.prototype.metadataProps=De.emptyArray,Oe.create=function(Ce){return new Oe(Ce)},Oe.encode=function(Ce,Be){if(Be||(Be=Ve.create()),Ce.irVersion!=null&&Ce.hasOwnProperty("irVersion")&&Be.uint32(8).int64(Ce.irVersion),Ce.producerName!=null&&Ce.hasOwnProperty("producerName")&&Be.uint32(18).string(Ce.producerName),Ce.producerVersion!=null&&Ce.hasOwnProperty("producerVersion")&&Be.uint32(26).string(Ce.producerVersion),Ce.domain!=null&&Ce.hasOwnProperty("domain")&&Be.uint32(34).string(Ce.domain),Ce.modelVersion!=null&&Ce.hasOwnProperty("modelVersion")&&Be.uint32(40).int64(Ce.modelVersion),Ce.docString!=null&&Ce.hasOwnProperty("docString")&&Be.uint32(50).string(Ce.docString),Ce.graph!=null&&Ce.hasOwnProperty("graph")&&$e.onnx.GraphProto.encode(Ce.graph,Be.uint32(58).fork()).ldelim(),Ce.opsetImport!=null&&Ce.opsetImport.length)for(var Ue=0;Ue<Ce.opsetImport.length;++Ue)$e.onnx.OperatorSetIdProto.encode(Ce.opsetImport[Ue],Be.uint32(66).fork()).ldelim();if(Ce.metadataProps!=null&&Ce.metadataProps.length)for(Ue=0;Ue<Ce.metadataProps.length;++Ue)$e.onnx.StringStringEntryProto.encode(Ce.metadataProps[Ue],Be.uint32(114).fork()).ldelim();return Be},Oe.encodeDelimited=function(Ce,Be){return this.encode(Ce,Be).ldelim()},Oe.decode=function(Ce,Be){Ce instanceof Me||(Ce=Me.create(Ce));for(var Ue=Be===void 0?Ce.len:Ce.pos+Be,We=new $e.onnx.ModelProto;Ce.pos<Ue;){var He=Ce.uint32();switch(He>>>3){case 1:We.irVersion=Ce.int64();break;case 8:We.opsetImport&&We.opsetImport.length||(We.opsetImport=[]),We.opsetImport.push($e.onnx.OperatorSetIdProto.decode(Ce,Ce.uint32()));break;case 2:We.producerName=Ce.string();break;case 3:We.producerVersion=Ce.string();break;case 4:We.domain=Ce.string();break;case 5:We.modelVersion=Ce.int64();break;case 6:We.docString=Ce.string();break;case 7:We.graph=$e.onnx.GraphProto.decode(Ce,Ce.uint32());break;case 14:We.metadataProps&&We.metadataProps.length||(We.metadataProps=[]),We.metadataProps.push($e.onnx.StringStringEntryProto.decode(Ce,Ce.uint32()));break;default:Ce.skipType(7&He)}}return We},Oe.decodeDelimited=function(Ce){return Ce instanceof Me||(Ce=new Me(Ce)),this.decode(Ce,Ce.uint32())},Oe.verify=function(Ce){if(typeof Ce!="object"||Ce===null)return"object expected";if(Ce.irVersion!=null&&Ce.hasOwnProperty("irVersion")&&!(De.isInteger(Ce.irVersion)||Ce.irVersion&&De.isInteger(Ce.irVersion.low)&&De.isInteger(Ce.irVersion.high)))return"irVersion: integer|Long expected";if(Ce.opsetImport!=null&&Ce.hasOwnProperty("opsetImport")){if(!Array.isArray(Ce.opsetImport))return"opsetImport: array expected";for(var Be=0;Be<Ce.opsetImport.length;++Be)if(Ue=$e.onnx.OperatorSetIdProto.verify(Ce.opsetImport[Be]))return"opsetImport."+Ue}if(Ce.producerName!=null&&Ce.hasOwnProperty("producerName")&&!De.isString(Ce.producerName))return"producerName: string expected";if(Ce.producerVersion!=null&&Ce.hasOwnProperty("producerVersion")&&!De.isString(Ce.producerVersion))return"producerVersion: string expected";if(Ce.domain!=null&&Ce.hasOwnProperty("domain")&&!De.isString(Ce.domain))return"domain: string expected";if(Ce.modelVersion!=null&&Ce.hasOwnProperty("modelVersion")&&!(De.isInteger(Ce.modelVersion)||Ce.modelVersion&&De.isInteger(Ce.modelVersion.low)&&De.isInteger(Ce.modelVersion.high)))return"modelVersion: integer|Long expected";if(Ce.docString!=null&&Ce.hasOwnProperty("docString")&&!De.isString(Ce.docString))return"docString: string expected";if(Ce.graph!=null&&Ce.hasOwnProperty("graph")&&(Ue=$e.onnx.GraphProto.verify(Ce.graph)))return"graph."+Ue;if(Ce.metadataProps!=null&&Ce.hasOwnProperty("metadataProps")){if(!Array.isArray(Ce.metadataProps))return"metadataProps: array expected";for(Be=0;Be<Ce.metadataProps.length;++Be){var Ue;if(Ue=$e.onnx.StringStringEntryProto.verify(Ce.metadataProps[Be]))return"metadataProps."+Ue}}return null},Oe.fromObject=function(Ce){if(Ce instanceof $e.onnx.ModelProto)return Ce;var Be=new $e.onnx.ModelProto;if(Ce.irVersion!=null&&(De.Long?(Be.irVersion=De.Long.fromValue(Ce.irVersion)).unsigned=!1:typeof Ce.irVersion=="string"?Be.irVersion=parseInt(Ce.irVersion,10):typeof Ce.irVersion=="number"?Be.irVersion=Ce.irVersion:typeof Ce.irVersion=="object"&&(Be.irVersion=new De.LongBits(Ce.irVersion.low>>>0,Ce.irVersion.high>>>0).toNumber())),Ce.opsetImport){if(!Array.isArray(Ce.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");Be.opsetImport=[];for(var Ue=0;Ue<Ce.opsetImport.length;++Ue){if(typeof Ce.opsetImport[Ue]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");Be.opsetImport[Ue]=$e.onnx.OperatorSetIdProto.fromObject(Ce.opsetImport[Ue])}}if(Ce.producerName!=null&&(Be.producerName=String(Ce.producerName)),Ce.producerVersion!=null&&(Be.producerVersion=String(Ce.producerVersion)),Ce.domain!=null&&(Be.domain=String(Ce.domain)),Ce.modelVersion!=null&&(De.Long?(Be.modelVersion=De.Long.fromValue(Ce.modelVersion)).unsigned=!1:typeof Ce.modelVersion=="string"?Be.modelVersion=parseInt(Ce.modelVersion,10):typeof Ce.modelVersion=="number"?Be.modelVersion=Ce.modelVersion:typeof Ce.modelVersion=="object"&&(Be.modelVersion=new De.LongBits(Ce.modelVersion.low>>>0,Ce.modelVersion.high>>>0).toNumber())),Ce.docString!=null&&(Be.docString=String(Ce.docString)),Ce.graph!=null){if(typeof Ce.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");Be.graph=$e.onnx.GraphProto.fromObject(Ce.graph)}if(Ce.metadataProps){if(!Array.isArray(Ce.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");for(Be.metadataProps=[],Ue=0;Ue<Ce.metadataProps.length;++Ue){if(typeof Ce.metadataProps[Ue]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");Be.metadataProps[Ue]=$e.onnx.StringStringEntryProto.fromObject(Ce.metadataProps[Ue])}}return Be},Oe.toObject=function(Ce,Be){Be||(Be={});var Ue={};if((Be.arrays||Be.defaults)&&(Ue.opsetImport=[],Ue.metadataProps=[]),Be.defaults){if(De.Long){var We=new De.Long(0,0,!1);Ue.irVersion=Be.longs===String?We.toString():Be.longs===Number?We.toNumber():We}else Ue.irVersion=Be.longs===String?"0":0;Ue.producerName="",Ue.producerVersion="",Ue.domain="",De.Long?(We=new De.Long(0,0,!1),Ue.modelVersion=Be.longs===String?We.toString():Be.longs===Number?We.toNumber():We):Ue.modelVersion=Be.longs===String?"0":0,Ue.docString="",Ue.graph=null}if(Ce.irVersion!=null&&Ce.hasOwnProperty("irVersion")&&(typeof Ce.irVersion=="number"?Ue.irVersion=Be.longs===String?String(Ce.irVersion):Ce.irVersion:Ue.irVersion=Be.longs===String?De.Long.prototype.toString.call(Ce.irVersion):Be.longs===Number?new De.LongBits(Ce.irVersion.low>>>0,Ce.irVersion.high>>>0).toNumber():Ce.irVersion),Ce.producerName!=null&&Ce.hasOwnProperty("producerName")&&(Ue.producerName=Ce.producerName),Ce.producerVersion!=null&&Ce.hasOwnProperty("producerVersion")&&(Ue.producerVersion=Ce.producerVersion),Ce.domain!=null&&Ce.hasOwnProperty("domain")&&(Ue.domain=Ce.domain),Ce.modelVersion!=null&&Ce.hasOwnProperty("modelVersion")&&(typeof Ce.modelVersion=="number"?Ue.modelVersion=Be.longs===String?String(Ce.modelVersion):Ce.modelVersion:Ue.modelVersion=Be.longs===String?De.Long.prototype.toString.call(Ce.modelVersion):Be.longs===Number?new De.LongBits(Ce.modelVersion.low>>>0,Ce.modelVersion.high>>>0).toNumber():Ce.modelVersion),Ce.docString!=null&&Ce.hasOwnProperty("docString")&&(Ue.docString=Ce.docString),Ce.graph!=null&&Ce.hasOwnProperty("graph")&&(Ue.graph=$e.onnx.GraphProto.toObject(Ce.graph,Be)),Ce.opsetImport&&Ce.opsetImport.length){Ue.opsetImport=[];for(var He=0;He<Ce.opsetImport.length;++He)Ue.opsetImport[He]=$e.onnx.OperatorSetIdProto.toObject(Ce.opsetImport[He],Be)}if(Ce.metadataProps&&Ce.metadataProps.length)for(Ue.metadataProps=[],He=0;He<Ce.metadataProps.length;++He)Ue.metadataProps[He]=$e.onnx.StringStringEntryProto.toObject(Ce.metadataProps[He],Be);return Ue},Oe.prototype.toJSON=function(){return this.constructor.toObject(this,Re.util.toJSONOptions)},Oe}(),Te.StringStringEntryProto=function(){function Oe(Ce){if(Ce)for(var Be=Object.keys(Ce),Ue=0;Ue<Be.length;++Ue)Ce[Be[Ue]]!=null&&(this[Be[Ue]]=Ce[Be[Ue]])}return Oe.prototype.key="",Oe.prototype.value="",Oe.create=function(Ce){return new Oe(Ce)},Oe.encode=function(Ce,Be){return Be||(Be=Ve.create()),Ce.key!=null&&Ce.hasOwnProperty("key")&&Be.uint32(10).string(Ce.key),Ce.value!=null&&Ce.hasOwnProperty("value")&&Be.uint32(18).string(Ce.value),Be},Oe.encodeDelimited=function(Ce,Be){return this.encode(Ce,Be).ldelim()},Oe.decode=function(Ce,Be){Ce instanceof Me||(Ce=Me.create(Ce));for(var Ue=Be===void 0?Ce.len:Ce.pos+Be,We=new $e.onnx.StringStringEntryProto;Ce.pos<Ue;){var He=Ce.uint32();switch(He>>>3){case 1:We.key=Ce.string();break;case 2:We.value=Ce.string();break;default:Ce.skipType(7&He)}}return We},Oe.decodeDelimited=function(Ce){return Ce instanceof Me||(Ce=new Me(Ce)),this.decode(Ce,Ce.uint32())},Oe.verify=function(Ce){return typeof Ce!="object"||Ce===null?"object expected":Ce.key!=null&&Ce.hasOwnProperty("key")&&!De.isString(Ce.key)?"key: string expected":Ce.value!=null&&Ce.hasOwnProperty("value")&&!De.isString(Ce.value)?"value: string expected":null},Oe.fromObject=function(Ce){if(Ce instanceof $e.onnx.StringStringEntryProto)return Ce;var Be=new $e.onnx.StringStringEntryProto;return Ce.key!=null&&(Be.key=String(Ce.key)),Ce.value!=null&&(Be.value=String(Ce.value)),Be},Oe.toObject=function(Ce,Be){Be||(Be={});var Ue={};return Be.defaults&&(Ue.key="",Ue.value=""),Ce.key!=null&&Ce.hasOwnProperty("key")&&(Ue.key=Ce.key),Ce.value!=null&&Ce.hasOwnProperty("value")&&(Ue.value=Ce.value),Ue},Oe.prototype.toJSON=function(){return this.constructor.toObject(this,Re.util.toJSONOptions)},Oe}(),Te.TensorAnnotation=function(){function Oe(Ce){if(this.quantParameterTensorNames=[],Ce)for(var Be=Object.keys(Ce),Ue=0;Ue<Be.length;++Ue)Ce[Be[Ue]]!=null&&(this[Be[Ue]]=Ce[Be[Ue]])}return Oe.prototype.tensorName="",Oe.prototype.quantParameterTensorNames=De.emptyArray,Oe.create=function(Ce){return new Oe(Ce)},Oe.encode=function(Ce,Be){if(Be||(Be=Ve.create()),Ce.tensorName!=null&&Ce.hasOwnProperty("tensorName")&&Be.uint32(10).string(Ce.tensorName),Ce.quantParameterTensorNames!=null&&Ce.quantParameterTensorNames.length)for(var Ue=0;Ue<Ce.quantParameterTensorNames.length;++Ue)$e.onnx.StringStringEntryProto.encode(Ce.quantParameterTensorNames[Ue],Be.uint32(18).fork()).ldelim();return Be},Oe.encodeDelimited=function(Ce,Be){return this.encode(Ce,Be).ldelim()},Oe.decode=function(Ce,Be){Ce instanceof Me||(Ce=Me.create(Ce));for(var Ue=Be===void 0?Ce.len:Ce.pos+Be,We=new $e.onnx.TensorAnnotation;Ce.pos<Ue;){var He=Ce.uint32();switch(He>>>3){case 1:We.tensorName=Ce.string();break;case 2:We.quantParameterTensorNames&&We.quantParameterTensorNames.length||(We.quantParameterTensorNames=[]),We.quantParameterTensorNames.push($e.onnx.StringStringEntryProto.decode(Ce,Ce.uint32()));break;default:Ce.skipType(7&He)}}return We},Oe.decodeDelimited=function(Ce){return Ce instanceof Me||(Ce=new Me(Ce)),this.decode(Ce,Ce.uint32())},Oe.verify=function(Ce){if(typeof Ce!="object"||Ce===null)return"object expected";if(Ce.tensorName!=null&&Ce.hasOwnProperty("tensorName")&&!De.isString(Ce.tensorName))return"tensorName: string expected";if(Ce.quantParameterTensorNames!=null&&Ce.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(Ce.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var Be=0;Be<Ce.quantParameterTensorNames.length;++Be){var Ue=$e.onnx.StringStringEntryProto.verify(Ce.quantParameterTensorNames[Be]);if(Ue)return"quantParameterTensorNames."+Ue}}return null},Oe.fromObject=function(Ce){if(Ce instanceof $e.onnx.TensorAnnotation)return Ce;var Be=new $e.onnx.TensorAnnotation;if(Ce.tensorName!=null&&(Be.tensorName=String(Ce.tensorName)),Ce.quantParameterTensorNames){if(!Array.isArray(Ce.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");Be.quantParameterTensorNames=[];for(var Ue=0;Ue<Ce.quantParameterTensorNames.length;++Ue){if(typeof Ce.quantParameterTensorNames[Ue]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");Be.quantParameterTensorNames[Ue]=$e.onnx.StringStringEntryProto.fromObject(Ce.quantParameterTensorNames[Ue])}}return Be},Oe.toObject=function(Ce,Be){Be||(Be={});var Ue={};if((Be.arrays||Be.defaults)&&(Ue.quantParameterTensorNames=[]),Be.defaults&&(Ue.tensorName=""),Ce.tensorName!=null&&Ce.hasOwnProperty("tensorName")&&(Ue.tensorName=Ce.tensorName),Ce.quantParameterTensorNames&&Ce.quantParameterTensorNames.length){Ue.quantParameterTensorNames=[];for(var We=0;We<Ce.quantParameterTensorNames.length;++We)Ue.quantParameterTensorNames[We]=$e.onnx.StringStringEntryProto.toObject(Ce.quantParameterTensorNames[We],Be)}return Ue},Oe.prototype.toJSON=function(){return this.constructor.toObject(this,Re.util.toJSONOptions)},Oe}(),Te.GraphProto=function(){function Oe(Ce){if(this.node=[],this.initializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],Ce)for(var Be=Object.keys(Ce),Ue=0;Ue<Be.length;++Ue)Ce[Be[Ue]]!=null&&(this[Be[Ue]]=Ce[Be[Ue]])}return Oe.prototype.node=De.emptyArray,Oe.prototype.name="",Oe.prototype.initializer=De.emptyArray,Oe.prototype.docString="",Oe.prototype.input=De.emptyArray,Oe.prototype.output=De.emptyArray,Oe.prototype.valueInfo=De.emptyArray,Oe.prototype.quantizationAnnotation=De.emptyArray,Oe.create=function(Ce){return new Oe(Ce)},Oe.encode=function(Ce,Be){if(Be||(Be=Ve.create()),Ce.node!=null&&Ce.node.length)for(var Ue=0;Ue<Ce.node.length;++Ue)$e.onnx.NodeProto.encode(Ce.node[Ue],Be.uint32(10).fork()).ldelim();if(Ce.name!=null&&Ce.hasOwnProperty("name")&&Be.uint32(18).string(Ce.name),Ce.initializer!=null&&Ce.initializer.length)for(Ue=0;Ue<Ce.initializer.length;++Ue)$e.onnx.TensorProto.encode(Ce.initializer[Ue],Be.uint32(42).fork()).ldelim();if(Ce.docString!=null&&Ce.hasOwnProperty("docString")&&Be.uint32(82).string(Ce.docString),Ce.input!=null&&Ce.input.length)for(Ue=0;Ue<Ce.input.length;++Ue)$e.onnx.ValueInfoProto.encode(Ce.input[Ue],Be.uint32(90).fork()).ldelim();if(Ce.output!=null&&Ce.output.length)for(Ue=0;Ue<Ce.output.length;++Ue)$e.onnx.ValueInfoProto.encode(Ce.output[Ue],Be.uint32(98).fork()).ldelim();if(Ce.valueInfo!=null&&Ce.valueInfo.length)for(Ue=0;Ue<Ce.valueInfo.length;++Ue)$e.onnx.ValueInfoProto.encode(Ce.valueInfo[Ue],Be.uint32(106).fork()).ldelim();if(Ce.quantizationAnnotation!=null&&Ce.quantizationAnnotation.length)for(Ue=0;Ue<Ce.quantizationAnnotation.length;++Ue)$e.onnx.TensorAnnotation.encode(Ce.quantizationAnnotation[Ue],Be.uint32(114).fork()).ldelim();return Be},Oe.encodeDelimited=function(Ce,Be){return this.encode(Ce,Be).ldelim()},Oe.decode=function(Ce,Be){Ce instanceof Me||(Ce=Me.create(Ce));for(var Ue=Be===void 0?Ce.len:Ce.pos+Be,We=new $e.onnx.GraphProto;Ce.pos<Ue;){var He=Ce.uint32();switch(He>>>3){case 1:We.node&&We.node.length||(We.node=[]),We.node.push($e.onnx.NodeProto.decode(Ce,Ce.uint32()));break;case 2:We.name=Ce.string();break;case 5:We.initializer&&We.initializer.length||(We.initializer=[]),We.initializer.push($e.onnx.TensorProto.decode(Ce,Ce.uint32()));break;case 10:We.docString=Ce.string();break;case 11:We.input&&We.input.length||(We.input=[]),We.input.push($e.onnx.ValueInfoProto.decode(Ce,Ce.uint32()));break;case 12:We.output&&We.output.length||(We.output=[]),We.output.push($e.onnx.ValueInfoProto.decode(Ce,Ce.uint32()));break;case 13:We.valueInfo&&We.valueInfo.length||(We.valueInfo=[]),We.valueInfo.push($e.onnx.ValueInfoProto.decode(Ce,Ce.uint32()));break;case 14:We.quantizationAnnotation&&We.quantizationAnnotation.length||(We.quantizationAnnotation=[]),We.quantizationAnnotation.push($e.onnx.TensorAnnotation.decode(Ce,Ce.uint32()));break;default:Ce.skipType(7&He)}}return We},Oe.decodeDelimited=function(Ce){return Ce instanceof Me||(Ce=new Me(Ce)),this.decode(Ce,Ce.uint32())},Oe.verify=function(Ce){if(typeof Ce!="object"||Ce===null)return"object expected";if(Ce.node!=null&&Ce.hasOwnProperty("node")){if(!Array.isArray(Ce.node))return"node: array expected";for(var Be=0;Be<Ce.node.length;++Be)if(Ue=$e.onnx.NodeProto.verify(Ce.node[Be]))return"node."+Ue}if(Ce.name!=null&&Ce.hasOwnProperty("name")&&!De.isString(Ce.name))return"name: string expected";if(Ce.initializer!=null&&Ce.hasOwnProperty("initializer")){if(!Array.isArray(Ce.initializer))return"initializer: array expected";for(Be=0;Be<Ce.initializer.length;++Be)if(Ue=$e.onnx.TensorProto.verify(Ce.initializer[Be]))return"initializer."+Ue}if(Ce.docString!=null&&Ce.hasOwnProperty("docString")&&!De.isString(Ce.docString))return"docString: string expected";if(Ce.input!=null&&Ce.hasOwnProperty("input")){if(!Array.isArray(Ce.input))return"input: array expected";for(Be=0;Be<Ce.input.length;++Be)if(Ue=$e.onnx.ValueInfoProto.verify(Ce.input[Be]))return"input."+Ue}if(Ce.output!=null&&Ce.hasOwnProperty("output")){if(!Array.isArray(Ce.output))return"output: array expected";for(Be=0;Be<Ce.output.length;++Be)if(Ue=$e.onnx.ValueInfoProto.verify(Ce.output[Be]))return"output."+Ue}if(Ce.valueInfo!=null&&Ce.hasOwnProperty("valueInfo")){if(!Array.isArray(Ce.valueInfo))return"valueInfo: array expected";for(Be=0;Be<Ce.valueInfo.length;++Be)if(Ue=$e.onnx.ValueInfoProto.verify(Ce.valueInfo[Be]))return"valueInfo."+Ue}if(Ce.quantizationAnnotation!=null&&Ce.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(Ce.quantizationAnnotation))return"quantizationAnnotation: array expected";for(Be=0;Be<Ce.quantizationAnnotation.length;++Be){var Ue;if(Ue=$e.onnx.TensorAnnotation.verify(Ce.quantizationAnnotation[Be]))return"quantizationAnnotation."+Ue}}return null},Oe.fromObject=function(Ce){if(Ce instanceof $e.onnx.GraphProto)return Ce;var Be=new $e.onnx.GraphProto;if(Ce.node){if(!Array.isArray(Ce.node))throw TypeError(".onnx.GraphProto.node: array expected");Be.node=[];for(var Ue=0;Ue<Ce.node.length;++Ue){if(typeof Ce.node[Ue]!="object")throw TypeError(".onnx.GraphProto.node: object expected");Be.node[Ue]=$e.onnx.NodeProto.fromObject(Ce.node[Ue])}}if(Ce.name!=null&&(Be.name=String(Ce.name)),Ce.initializer){if(!Array.isArray(Ce.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");for(Be.initializer=[],Ue=0;Ue<Ce.initializer.length;++Ue){if(typeof Ce.initializer[Ue]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");Be.initializer[Ue]=$e.onnx.TensorProto.fromObject(Ce.initializer[Ue])}}if(Ce.docString!=null&&(Be.docString=String(Ce.docString)),Ce.input){if(!Array.isArray(Ce.input))throw TypeError(".onnx.GraphProto.input: array expected");for(Be.input=[],Ue=0;Ue<Ce.input.length;++Ue){if(typeof Ce.input[Ue]!="object")throw TypeError(".onnx.GraphProto.input: object expected");Be.input[Ue]=$e.onnx.ValueInfoProto.fromObject(Ce.input[Ue])}}if(Ce.output){if(!Array.isArray(Ce.output))throw TypeError(".onnx.GraphProto.output: array expected");for(Be.output=[],Ue=0;Ue<Ce.output.length;++Ue){if(typeof Ce.output[Ue]!="object")throw TypeError(".onnx.GraphProto.output: object expected");Be.output[Ue]=$e.onnx.ValueInfoProto.fromObject(Ce.output[Ue])}}if(Ce.valueInfo){if(!Array.isArray(Ce.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");for(Be.valueInfo=[],Ue=0;Ue<Ce.valueInfo.length;++Ue){if(typeof Ce.valueInfo[Ue]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");Be.valueInfo[Ue]=$e.onnx.ValueInfoProto.fromObject(Ce.valueInfo[Ue])}}if(Ce.quantizationAnnotation){if(!Array.isArray(Ce.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");for(Be.quantizationAnnotation=[],Ue=0;Ue<Ce.quantizationAnnotation.length;++Ue){if(typeof Ce.quantizationAnnotation[Ue]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");Be.quantizationAnnotation[Ue]=$e.onnx.TensorAnnotation.fromObject(Ce.quantizationAnnotation[Ue])}}return Be},Oe.toObject=function(Ce,Be){Be||(Be={});var Ue={};if((Be.arrays||Be.defaults)&&(Ue.node=[],Ue.initializer=[],Ue.input=[],Ue.output=[],Ue.valueInfo=[],Ue.quantizationAnnotation=[]),Be.defaults&&(Ue.name="",Ue.docString=""),Ce.node&&Ce.node.length){Ue.node=[];for(var We=0;We<Ce.node.length;++We)Ue.node[We]=$e.onnx.NodeProto.toObject(Ce.node[We],Be)}if(Ce.name!=null&&Ce.hasOwnProperty("name")&&(Ue.name=Ce.name),Ce.initializer&&Ce.initializer.length)for(Ue.initializer=[],We=0;We<Ce.initializer.length;++We)Ue.initializer[We]=$e.onnx.TensorProto.toObject(Ce.initializer[We],Be);if(Ce.docString!=null&&Ce.hasOwnProperty("docString")&&(Ue.docString=Ce.docString),Ce.input&&Ce.input.length)for(Ue.input=[],We=0;We<Ce.input.length;++We)Ue.input[We]=$e.onnx.ValueInfoProto.toObject(Ce.input[We],Be);if(Ce.output&&Ce.output.length)for(Ue.output=[],We=0;We<Ce.output.length;++We)Ue.output[We]=$e.onnx.ValueInfoProto.toObject(Ce.output[We],Be);if(Ce.valueInfo&&Ce.valueInfo.length)for(Ue.valueInfo=[],We=0;We<Ce.valueInfo.length;++We)Ue.valueInfo[We]=$e.onnx.ValueInfoProto.toObject(Ce.valueInfo[We],Be);if(Ce.quantizationAnnotation&&Ce.quantizationAnnotation.length)for(Ue.quantizationAnnotation=[],We=0;We<Ce.quantizationAnnotation.length;++We)Ue.quantizationAnnotation[We]=$e.onnx.TensorAnnotation.toObject(Ce.quantizationAnnotation[We],Be);return Ue},Oe.prototype.toJSON=function(){return this.constructor.toObject(this,Re.util.toJSONOptions)},Oe}(),Te.TensorProto=function(){function Oe(Ce){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],Ce)for(var Be=Object.keys(Ce),Ue=0;Ue<Be.length;++Ue)Ce[Be[Ue]]!=null&&(this[Be[Ue]]=Ce[Be[Ue]])}return Oe.prototype.dims=De.emptyArray,Oe.prototype.dataType=0,Oe.prototype.segment=null,Oe.prototype.floatData=De.emptyArray,Oe.prototype.int32Data=De.emptyArray,Oe.prototype.stringData=De.emptyArray,Oe.prototype.int64Data=De.emptyArray,Oe.prototype.name="",Oe.prototype.docString="",Oe.prototype.rawData=De.newBuffer([]),Oe.prototype.externalData=De.emptyArray,Oe.prototype.dataLocation=0,Oe.prototype.doubleData=De.emptyArray,Oe.prototype.uint64Data=De.emptyArray,Oe.create=function(Ce){return new Oe(Ce)},Oe.encode=function(Ce,Be){if(Be||(Be=Ve.create()),Ce.dims!=null&&Ce.dims.length){Be.uint32(10).fork();for(var Ue=0;Ue<Ce.dims.length;++Ue)Be.int64(Ce.dims[Ue]);Be.ldelim()}if(Ce.dataType!=null&&Ce.hasOwnProperty("dataType")&&Be.uint32(16).int32(Ce.dataType),Ce.segment!=null&&Ce.hasOwnProperty("segment")&&$e.onnx.TensorProto.Segment.encode(Ce.segment,Be.uint32(26).fork()).ldelim(),Ce.floatData!=null&&Ce.floatData.length){for(Be.uint32(34).fork(),Ue=0;Ue<Ce.floatData.length;++Ue)Be.float(Ce.floatData[Ue]);Be.ldelim()}if(Ce.int32Data!=null&&Ce.int32Data.length){for(Be.uint32(42).fork(),Ue=0;Ue<Ce.int32Data.length;++Ue)Be.int32(Ce.int32Data[Ue]);Be.ldelim()}if(Ce.stringData!=null&&Ce.stringData.length)for(Ue=0;Ue<Ce.stringData.length;++Ue)Be.uint32(50).bytes(Ce.stringData[Ue]);if(Ce.int64Data!=null&&Ce.int64Data.length){for(Be.uint32(58).fork(),Ue=0;Ue<Ce.int64Data.length;++Ue)Be.int64(Ce.int64Data[Ue]);Be.ldelim()}if(Ce.name!=null&&Ce.hasOwnProperty("name")&&Be.uint32(66).string(Ce.name),Ce.rawData!=null&&Ce.hasOwnProperty("rawData")&&Be.uint32(74).bytes(Ce.rawData),Ce.doubleData!=null&&Ce.doubleData.length){for(Be.uint32(82).fork(),Ue=0;Ue<Ce.doubleData.length;++Ue)Be.double(Ce.doubleData[Ue]);Be.ldelim()}if(Ce.uint64Data!=null&&Ce.uint64Data.length){for(Be.uint32(90).fork(),Ue=0;Ue<Ce.uint64Data.length;++Ue)Be.uint64(Ce.uint64Data[Ue]);Be.ldelim()}if(Ce.docString!=null&&Ce.hasOwnProperty("docString")&&Be.uint32(98).string(Ce.docString),Ce.externalData!=null&&Ce.externalData.length)for(Ue=0;Ue<Ce.externalData.length;++Ue)$e.onnx.StringStringEntryProto.encode(Ce.externalData[Ue],Be.uint32(106).fork()).ldelim();return Ce.dataLocation!=null&&Ce.hasOwnProperty("dataLocation")&&Be.uint32(112).int32(Ce.dataLocation),Be},Oe.encodeDelimited=function(Ce,Be){return this.encode(Ce,Be).ldelim()},Oe.decode=function(Ce,Be){Ce instanceof Me||(Ce=Me.create(Ce));for(var Ue=Be===void 0?Ce.len:Ce.pos+Be,We=new $e.onnx.TensorProto;Ce.pos<Ue;){var He=Ce.uint32();switch(He>>>3){case 1:if(We.dims&&We.dims.length||(We.dims=[]),(7&He)==2)for(var Ge=Ce.uint32()+Ce.pos;Ce.pos<Ge;)We.dims.push(Ce.int64());else We.dims.push(Ce.int64());break;case 2:We.dataType=Ce.int32();break;case 3:We.segment=$e.onnx.TensorProto.Segment.decode(Ce,Ce.uint32());break;case 4:if(We.floatData&&We.floatData.length||(We.floatData=[]),(7&He)==2)for(Ge=Ce.uint32()+Ce.pos;Ce.pos<Ge;)We.floatData.push(Ce.float());else We.floatData.push(Ce.float());break;case 5:if(We.int32Data&&We.int32Data.length||(We.int32Data=[]),(7&He)==2)for(Ge=Ce.uint32()+Ce.pos;Ce.pos<Ge;)We.int32Data.push(Ce.int32());else We.int32Data.push(Ce.int32());break;case 6:We.stringData&&We.stringData.length||(We.stringData=[]),We.stringData.push(Ce.bytes());break;case 7:if(We.int64Data&&We.int64Data.length||(We.int64Data=[]),(7&He)==2)for(Ge=Ce.uint32()+Ce.pos;Ce.pos<Ge;)We.int64Data.push(Ce.int64());else We.int64Data.push(Ce.int64());break;case 8:We.name=Ce.string();break;case 12:We.docString=Ce.string();break;case 9:We.rawData=Ce.bytes();break;case 13:We.externalData&&We.externalData.length||(We.externalData=[]),We.externalData.push($e.onnx.StringStringEntryProto.decode(Ce,Ce.uint32()));break;case 14:We.dataLocation=Ce.int32();break;case 10:if(We.doubleData&&We.doubleData.length||(We.doubleData=[]),(7&He)==2)for(Ge=Ce.uint32()+Ce.pos;Ce.pos<Ge;)We.doubleData.push(Ce.double());else We.doubleData.push(Ce.double());break;case 11:if(We.uint64Data&&We.uint64Data.length||(We.uint64Data=[]),(7&He)==2)for(Ge=Ce.uint32()+Ce.pos;Ce.pos<Ge;)We.uint64Data.push(Ce.uint64());else We.uint64Data.push(Ce.uint64());break;default:Ce.skipType(7&He)}}return We},Oe.decodeDelimited=function(Ce){return Ce instanceof Me||(Ce=new Me(Ce)),this.decode(Ce,Ce.uint32())},Oe.verify=function(Ce){if(typeof Ce!="object"||Ce===null)return"object expected";if(Ce.dims!=null&&Ce.hasOwnProperty("dims")){if(!Array.isArray(Ce.dims))return"dims: array expected";for(var Be=0;Be<Ce.dims.length;++Be)if(!(De.isInteger(Ce.dims[Be])||Ce.dims[Be]&&De.isInteger(Ce.dims[Be].low)&&De.isInteger(Ce.dims[Be].high)))return"dims: integer|Long[] expected"}if(Ce.dataType!=null&&Ce.hasOwnProperty("dataType")&&!De.isInteger(Ce.dataType))return"dataType: integer expected";if(Ce.segment!=null&&Ce.hasOwnProperty("segment")&&(Ue=$e.onnx.TensorProto.Segment.verify(Ce.segment)))return"segment."+Ue;if(Ce.floatData!=null&&Ce.hasOwnProperty("floatData")){if(!Array.isArray(Ce.floatData))return"floatData: array expected";for(Be=0;Be<Ce.floatData.length;++Be)if(typeof Ce.floatData[Be]!="number")return"floatData: number[] expected"}if(Ce.int32Data!=null&&Ce.hasOwnProperty("int32Data")){if(!Array.isArray(Ce.int32Data))return"int32Data: array expected";for(Be=0;Be<Ce.int32Data.length;++Be)if(!De.isInteger(Ce.int32Data[Be]))return"int32Data: integer[] expected"}if(Ce.stringData!=null&&Ce.hasOwnProperty("stringData")){if(!Array.isArray(Ce.stringData))return"stringData: array expected";for(Be=0;Be<Ce.stringData.length;++Be)if(!(Ce.stringData[Be]&&typeof Ce.stringData[Be].length=="number"||De.isString(Ce.stringData[Be])))return"stringData: buffer[] expected"}if(Ce.int64Data!=null&&Ce.hasOwnProperty("int64Data")){if(!Array.isArray(Ce.int64Data))return"int64Data: array expected";for(Be=0;Be<Ce.int64Data.length;++Be)if(!(De.isInteger(Ce.int64Data[Be])||Ce.int64Data[Be]&&De.isInteger(Ce.int64Data[Be].low)&&De.isInteger(Ce.int64Data[Be].high)))return"int64Data: integer|Long[] expected"}if(Ce.name!=null&&Ce.hasOwnProperty("name")&&!De.isString(Ce.name))return"name: string expected";if(Ce.docString!=null&&Ce.hasOwnProperty("docString")&&!De.isString(Ce.docString))return"docString: string expected";if(Ce.rawData!=null&&Ce.hasOwnProperty("rawData")&&!(Ce.rawData&&typeof Ce.rawData.length=="number"||De.isString(Ce.rawData)))return"rawData: buffer expected";if(Ce.externalData!=null&&Ce.hasOwnProperty("externalData")){if(!Array.isArray(Ce.externalData))return"externalData: array expected";for(Be=0;Be<Ce.externalData.length;++Be){var Ue;if(Ue=$e.onnx.StringStringEntryProto.verify(Ce.externalData[Be]))return"externalData."+Ue}}if(Ce.dataLocation!=null&&Ce.hasOwnProperty("dataLocation"))switch(Ce.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:}if(Ce.doubleData!=null&&Ce.hasOwnProperty("doubleData")){if(!Array.isArray(Ce.doubleData))return"doubleData: array expected";for(Be=0;Be<Ce.doubleData.length;++Be)if(typeof Ce.doubleData[Be]!="number")return"doubleData: number[] expected"}if(Ce.uint64Data!=null&&Ce.hasOwnProperty("uint64Data")){if(!Array.isArray(Ce.uint64Data))return"uint64Data: array expected";for(Be=0;Be<Ce.uint64Data.length;++Be)if(!(De.isInteger(Ce.uint64Data[Be])||Ce.uint64Data[Be]&&De.isInteger(Ce.uint64Data[Be].low)&&De.isInteger(Ce.uint64Data[Be].high)))return"uint64Data: integer|Long[] expected"}return null},Oe.fromObject=function(Ce){if(Ce instanceof $e.onnx.TensorProto)return Ce;var Be=new $e.onnx.TensorProto;if(Ce.dims){if(!Array.isArray(Ce.dims))throw TypeError(".onnx.TensorProto.dims: array expected");Be.dims=[];for(var Ue=0;Ue<Ce.dims.length;++Ue)De.Long?(Be.dims[Ue]=De.Long.fromValue(Ce.dims[Ue])).unsigned=!1:typeof Ce.dims[Ue]=="string"?Be.dims[Ue]=parseInt(Ce.dims[Ue],10):typeof Ce.dims[Ue]=="number"?Be.dims[Ue]=Ce.dims[Ue]:typeof Ce.dims[Ue]=="object"&&(Be.dims[Ue]=new De.LongBits(Ce.dims[Ue].low>>>0,Ce.dims[Ue].high>>>0).toNumber())}if(Ce.dataType!=null&&(Be.dataType=0|Ce.dataType),Ce.segment!=null){if(typeof Ce.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");Be.segment=$e.onnx.TensorProto.Segment.fromObject(Ce.segment)}if(Ce.floatData){if(!Array.isArray(Ce.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");for(Be.floatData=[],Ue=0;Ue<Ce.floatData.length;++Ue)Be.floatData[Ue]=Number(Ce.floatData[Ue])}if(Ce.int32Data){if(!Array.isArray(Ce.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");for(Be.int32Data=[],Ue=0;Ue<Ce.int32Data.length;++Ue)Be.int32Data[Ue]=0|Ce.int32Data[Ue]}if(Ce.stringData){if(!Array.isArray(Ce.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");for(Be.stringData=[],Ue=0;Ue<Ce.stringData.length;++Ue)typeof Ce.stringData[Ue]=="string"?De.base64.decode(Ce.stringData[Ue],Be.stringData[Ue]=De.newBuffer(De.base64.length(Ce.stringData[Ue])),0):Ce.stringData[Ue].length&&(Be.stringData[Ue]=Ce.stringData[Ue])}if(Ce.int64Data){if(!Array.isArray(Ce.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");for(Be.int64Data=[],Ue=0;Ue<Ce.int64Data.length;++Ue)De.Long?(Be.int64Data[Ue]=De.Long.fromValue(Ce.int64Data[Ue])).unsigned=!1:typeof Ce.int64Data[Ue]=="string"?Be.int64Data[Ue]=parseInt(Ce.int64Data[Ue],10):typeof Ce.int64Data[Ue]=="number"?Be.int64Data[Ue]=Ce.int64Data[Ue]:typeof Ce.int64Data[Ue]=="object"&&(Be.int64Data[Ue]=new De.LongBits(Ce.int64Data[Ue].low>>>0,Ce.int64Data[Ue].high>>>0).toNumber())}if(Ce.name!=null&&(Be.name=String(Ce.name)),Ce.docString!=null&&(Be.docString=String(Ce.docString)),Ce.rawData!=null&&(typeof Ce.rawData=="string"?De.base64.decode(Ce.rawData,Be.rawData=De.newBuffer(De.base64.length(Ce.rawData)),0):Ce.rawData.length&&(Be.rawData=Ce.rawData)),Ce.externalData){if(!Array.isArray(Ce.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");for(Be.externalData=[],Ue=0;Ue<Ce.externalData.length;++Ue){if(typeof Ce.externalData[Ue]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");Be.externalData[Ue]=$e.onnx.StringStringEntryProto.fromObject(Ce.externalData[Ue])}}switch(Ce.dataLocation){case"DEFAULT":case 0:Be.dataLocation=0;break;case"EXTERNAL":case 1:Be.dataLocation=1}if(Ce.doubleData){if(!Array.isArray(Ce.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");for(Be.doubleData=[],Ue=0;Ue<Ce.doubleData.length;++Ue)Be.doubleData[Ue]=Number(Ce.doubleData[Ue])}if(Ce.uint64Data){if(!Array.isArray(Ce.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");for(Be.uint64Data=[],Ue=0;Ue<Ce.uint64Data.length;++Ue)De.Long?(Be.uint64Data[Ue]=De.Long.fromValue(Ce.uint64Data[Ue])).unsigned=!0:typeof Ce.uint64Data[Ue]=="string"?Be.uint64Data[Ue]=parseInt(Ce.uint64Data[Ue],10):typeof Ce.uint64Data[Ue]=="number"?Be.uint64Data[Ue]=Ce.uint64Data[Ue]:typeof Ce.uint64Data[Ue]=="object"&&(Be.uint64Data[Ue]=new De.LongBits(Ce.uint64Data[Ue].low>>>0,Ce.uint64Data[Ue].high>>>0).toNumber(!0))}return Be},Oe.toObject=function(Ce,Be){Be||(Be={});var Ue={};if((Be.arrays||Be.defaults)&&(Ue.dims=[],Ue.floatData=[],Ue.int32Data=[],Ue.stringData=[],Ue.int64Data=[],Ue.doubleData=[],Ue.uint64Data=[],Ue.externalData=[]),Be.defaults&&(Ue.dataType=0,Ue.segment=null,Ue.name="",Be.bytes===String?Ue.rawData="":(Ue.rawData=[],Be.bytes!==Array&&(Ue.rawData=De.newBuffer(Ue.rawData))),Ue.docString="",Ue.dataLocation=Be.enums===String?"DEFAULT":0),Ce.dims&&Ce.dims.length){Ue.dims=[];for(var We=0;We<Ce.dims.length;++We)typeof Ce.dims[We]=="number"?Ue.dims[We]=Be.longs===String?String(Ce.dims[We]):Ce.dims[We]:Ue.dims[We]=Be.longs===String?De.Long.prototype.toString.call(Ce.dims[We]):Be.longs===Number?new De.LongBits(Ce.dims[We].low>>>0,Ce.dims[We].high>>>0).toNumber():Ce.dims[We]}if(Ce.dataType!=null&&Ce.hasOwnProperty("dataType")&&(Ue.dataType=Ce.dataType),Ce.segment!=null&&Ce.hasOwnProperty("segment")&&(Ue.segment=$e.onnx.TensorProto.Segment.toObject(Ce.segment,Be)),Ce.floatData&&Ce.floatData.length)for(Ue.floatData=[],We=0;We<Ce.floatData.length;++We)Ue.floatData[We]=Be.json&&!isFinite(Ce.floatData[We])?String(Ce.floatData[We]):Ce.floatData[We];if(Ce.int32Data&&Ce.int32Data.length)for(Ue.int32Data=[],We=0;We<Ce.int32Data.length;++We)Ue.int32Data[We]=Ce.int32Data[We];if(Ce.stringData&&Ce.stringData.length)for(Ue.stringData=[],We=0;We<Ce.stringData.length;++We)Ue.stringData[We]=Be.bytes===String?De.base64.encode(Ce.stringData[We],0,Ce.stringData[We].length):Be.bytes===Array?Array.prototype.slice.call(Ce.stringData[We]):Ce.stringData[We];if(Ce.int64Data&&Ce.int64Data.length)for(Ue.int64Data=[],We=0;We<Ce.int64Data.length;++We)typeof Ce.int64Data[We]=="number"?Ue.int64Data[We]=Be.longs===String?String(Ce.int64Data[We]):Ce.int64Data[We]:Ue.int64Data[We]=Be.longs===String?De.Long.prototype.toString.call(Ce.int64Data[We]):Be.longs===Number?new De.LongBits(Ce.int64Data[We].low>>>0,Ce.int64Data[We].high>>>0).toNumber():Ce.int64Data[We];if(Ce.name!=null&&Ce.hasOwnProperty("name")&&(Ue.name=Ce.name),Ce.rawData!=null&&Ce.hasOwnProperty("rawData")&&(Ue.rawData=Be.bytes===String?De.base64.encode(Ce.rawData,0,Ce.rawData.length):Be.bytes===Array?Array.prototype.slice.call(Ce.rawData):Ce.rawData),Ce.doubleData&&Ce.doubleData.length)for(Ue.doubleData=[],We=0;We<Ce.doubleData.length;++We)Ue.doubleData[We]=Be.json&&!isFinite(Ce.doubleData[We])?String(Ce.doubleData[We]):Ce.doubleData[We];if(Ce.uint64Data&&Ce.uint64Data.length)for(Ue.uint64Data=[],We=0;We<Ce.uint64Data.length;++We)typeof Ce.uint64Data[We]=="number"?Ue.uint64Data[We]=Be.longs===String?String(Ce.uint64Data[We]):Ce.uint64Data[We]:Ue.uint64Data[We]=Be.longs===String?De.Long.prototype.toString.call(Ce.uint64Data[We]):Be.longs===Number?new De.LongBits(Ce.uint64Data[We].low>>>0,Ce.uint64Data[We].high>>>0).toNumber(!0):Ce.uint64Data[We];if(Ce.docString!=null&&Ce.hasOwnProperty("docString")&&(Ue.docString=Ce.docString),Ce.externalData&&Ce.externalData.length)for(Ue.externalData=[],We=0;We<Ce.externalData.length;++We)Ue.externalData[We]=$e.onnx.StringStringEntryProto.toObject(Ce.externalData[We],Be);return Ce.dataLocation!=null&&Ce.hasOwnProperty("dataLocation")&&(Ue.dataLocation=Be.enums===String?$e.onnx.TensorProto.DataLocation[Ce.dataLocation]:Ce.dataLocation),Ue},Oe.prototype.toJSON=function(){return this.constructor.toObject(this,Re.util.toJSONOptions)},Oe.DataType=function(){var Ce={},Be=Object.create(Ce);return Be[Ce[0]="UNDEFINED"]=0,Be[Ce[1]="FLOAT"]=1,Be[Ce[2]="UINT8"]=2,Be[Ce[3]="INT8"]=3,Be[Ce[4]="UINT16"]=4,Be[Ce[5]="INT16"]=5,Be[Ce[6]="INT32"]=6,Be[Ce[7]="INT64"]=7,Be[Ce[8]="STRING"]=8,Be[Ce[9]="BOOL"]=9,Be[Ce[10]="FLOAT16"]=10,Be[Ce[11]="DOUBLE"]=11,Be[Ce[12]="UINT32"]=12,Be[Ce[13]="UINT64"]=13,Be[Ce[14]="COMPLEX64"]=14,Be[Ce[15]="COMPLEX128"]=15,Be[Ce[16]="BFLOAT16"]=16,Be}(),Oe.Segment=function(){function Ce(Be){if(Be)for(var Ue=Object.keys(Be),We=0;We<Ue.length;++We)Be[Ue[We]]!=null&&(this[Ue[We]]=Be[Ue[We]])}return Ce.prototype.begin=De.Long?De.Long.fromBits(0,0,!1):0,Ce.prototype.end=De.Long?De.Long.fromBits(0,0,!1):0,Ce.create=function(Be){return new Ce(Be)},Ce.encode=function(Be,Ue){return Ue||(Ue=Ve.create()),Be.begin!=null&&Be.hasOwnProperty("begin")&&Ue.uint32(8).int64(Be.begin),Be.end!=null&&Be.hasOwnProperty("end")&&Ue.uint32(16).int64(Be.end),Ue},Ce.encodeDelimited=function(Be,Ue){return this.encode(Be,Ue).ldelim()},Ce.decode=function(Be,Ue){Be instanceof Me||(Be=Me.create(Be));for(var We=Ue===void 0?Be.len:Be.pos+Ue,He=new $e.onnx.TensorProto.Segment;Be.pos<We;){var Ge=Be.uint32();switch(Ge>>>3){case 1:He.begin=Be.int64();break;case 2:He.end=Be.int64();break;default:Be.skipType(7&Ge)}}return He},Ce.decodeDelimited=function(Be){return Be instanceof Me||(Be=new Me(Be)),this.decode(Be,Be.uint32())},Ce.verify=function(Be){return typeof Be!="object"||Be===null?"object expected":Be.begin!=null&&Be.hasOwnProperty("begin")&&!(De.isInteger(Be.begin)||Be.begin&&De.isInteger(Be.begin.low)&&De.isInteger(Be.begin.high))?"begin: integer|Long expected":Be.end!=null&&Be.hasOwnProperty("end")&&!(De.isInteger(Be.end)||Be.end&&De.isInteger(Be.end.low)&&De.isInteger(Be.end.high))?"end: integer|Long expected":null},Ce.fromObject=function(Be){if(Be instanceof $e.onnx.TensorProto.Segment)return Be;var Ue=new $e.onnx.TensorProto.Segment;return Be.begin!=null&&(De.Long?(Ue.begin=De.Long.fromValue(Be.begin)).unsigned=!1:typeof Be.begin=="string"?Ue.begin=parseInt(Be.begin,10):typeof Be.begin=="number"?Ue.begin=Be.begin:typeof Be.begin=="object"&&(Ue.begin=new De.LongBits(Be.begin.low>>>0,Be.begin.high>>>0).toNumber())),Be.end!=null&&(De.Long?(Ue.end=De.Long.fromValue(Be.end)).unsigned=!1:typeof Be.end=="string"?Ue.end=parseInt(Be.end,10):typeof Be.end=="number"?Ue.end=Be.end:typeof Be.end=="object"&&(Ue.end=new De.LongBits(Be.end.low>>>0,Be.end.high>>>0).toNumber())),Ue},Ce.toObject=function(Be,Ue){Ue||(Ue={});var We={};if(Ue.defaults){if(De.Long){var He=new De.Long(0,0,!1);We.begin=Ue.longs===String?He.toString():Ue.longs===Number?He.toNumber():He}else We.begin=Ue.longs===String?"0":0;De.Long?(He=new De.Long(0,0,!1),We.end=Ue.longs===String?He.toString():Ue.longs===Number?He.toNumber():He):We.end=Ue.longs===String?"0":0}return Be.begin!=null&&Be.hasOwnProperty("begin")&&(typeof Be.begin=="number"?We.begin=Ue.longs===String?String(Be.begin):Be.begin:We.begin=Ue.longs===String?De.Long.prototype.toString.call(Be.begin):Ue.longs===Number?new De.LongBits(Be.begin.low>>>0,Be.begin.high>>>0).toNumber():Be.begin),Be.end!=null&&Be.hasOwnProperty("end")&&(typeof Be.end=="number"?We.end=Ue.longs===String?String(Be.end):Be.end:We.end=Ue.longs===String?De.Long.prototype.toString.call(Be.end):Ue.longs===Number?new De.LongBits(Be.end.low>>>0,Be.end.high>>>0).toNumber():Be.end),We},Ce.prototype.toJSON=function(){return this.constructor.toObject(this,Re.util.toJSONOptions)},Ce}(),Oe.DataLocation=function(){var Ce={},Be=Object.create(Ce);return Be[Ce[0]="DEFAULT"]=0,Be[Ce[1]="EXTERNAL"]=1,Be}(),Oe}(),Te.TensorShapeProto=function(){function Oe(Ce){if(this.dim=[],Ce)for(var Be=Object.keys(Ce),Ue=0;Ue<Be.length;++Ue)Ce[Be[Ue]]!=null&&(this[Be[Ue]]=Ce[Be[Ue]])}return Oe.prototype.dim=De.emptyArray,Oe.create=function(Ce){return new Oe(Ce)},Oe.encode=function(Ce,Be){if(Be||(Be=Ve.create()),Ce.dim!=null&&Ce.dim.length)for(var Ue=0;Ue<Ce.dim.length;++Ue)$e.onnx.TensorShapeProto.Dimension.encode(Ce.dim[Ue],Be.uint32(10).fork()).ldelim();return Be},Oe.encodeDelimited=function(Ce,Be){return this.encode(Ce,Be).ldelim()},Oe.decode=function(Ce,Be){Ce instanceof Me||(Ce=Me.create(Ce));for(var Ue=Be===void 0?Ce.len:Ce.pos+Be,We=new $e.onnx.TensorShapeProto;Ce.pos<Ue;){var He=Ce.uint32();He>>>3==1?(We.dim&&We.dim.length||(We.dim=[]),We.dim.push($e.onnx.TensorShapeProto.Dimension.decode(Ce,Ce.uint32()))):Ce.skipType(7&He)}return We},Oe.decodeDelimited=function(Ce){return Ce instanceof Me||(Ce=new Me(Ce)),this.decode(Ce,Ce.uint32())},Oe.verify=function(Ce){if(typeof Ce!="object"||Ce===null)return"object expected";if(Ce.dim!=null&&Ce.hasOwnProperty("dim")){if(!Array.isArray(Ce.dim))return"dim: array expected";for(var Be=0;Be<Ce.dim.length;++Be){var Ue=$e.onnx.TensorShapeProto.Dimension.verify(Ce.dim[Be]);if(Ue)return"dim."+Ue}}return null},Oe.fromObject=function(Ce){if(Ce instanceof $e.onnx.TensorShapeProto)return Ce;var Be=new $e.onnx.TensorShapeProto;if(Ce.dim){if(!Array.isArray(Ce.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");Be.dim=[];for(var Ue=0;Ue<Ce.dim.length;++Ue){if(typeof Ce.dim[Ue]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");Be.dim[Ue]=$e.onnx.TensorShapeProto.Dimension.fromObject(Ce.dim[Ue])}}return Be},Oe.toObject=function(Ce,Be){Be||(Be={});var Ue={};if((Be.arrays||Be.defaults)&&(Ue.dim=[]),Ce.dim&&Ce.dim.length){Ue.dim=[];for(var We=0;We<Ce.dim.length;++We)Ue.dim[We]=$e.onnx.TensorShapeProto.Dimension.toObject(Ce.dim[We],Be)}return Ue},Oe.prototype.toJSON=function(){return this.constructor.toObject(this,Re.util.toJSONOptions)},Oe.Dimension=function(){function Ce(Ue){if(Ue)for(var We=Object.keys(Ue),He=0;He<We.length;++He)Ue[We[He]]!=null&&(this[We[He]]=Ue[We[He]])}var Be;return Ce.prototype.dimValue=De.Long?De.Long.fromBits(0,0,!1):0,Ce.prototype.dimParam="",Ce.prototype.denotation="",Object.defineProperty(Ce.prototype,"value",{get:De.oneOfGetter(Be=["dimValue","dimParam"]),set:De.oneOfSetter(Be)}),Ce.create=function(Ue){return new Ce(Ue)},Ce.encode=function(Ue,We){return We||(We=Ve.create()),Ue.dimValue!=null&&Ue.hasOwnProperty("dimValue")&&We.uint32(8).int64(Ue.dimValue),Ue.dimParam!=null&&Ue.hasOwnProperty("dimParam")&&We.uint32(18).string(Ue.dimParam),Ue.denotation!=null&&Ue.hasOwnProperty("denotation")&&We.uint32(26).string(Ue.denotation),We},Ce.encodeDelimited=function(Ue,We){return this.encode(Ue,We).ldelim()},Ce.decode=function(Ue,We){Ue instanceof Me||(Ue=Me.create(Ue));for(var He=We===void 0?Ue.len:Ue.pos+We,Ge=new $e.onnx.TensorShapeProto.Dimension;Ue.pos<He;){var Ye=Ue.uint32();switch(Ye>>>3){case 1:Ge.dimValue=Ue.int64();break;case 2:Ge.dimParam=Ue.string();break;case 3:Ge.denotation=Ue.string();break;default:Ue.skipType(7&Ye)}}return Ge},Ce.decodeDelimited=function(Ue){return Ue instanceof Me||(Ue=new Me(Ue)),this.decode(Ue,Ue.uint32())},Ce.verify=function(Ue){if(typeof Ue!="object"||Ue===null)return"object expected";var We={};if(Ue.dimValue!=null&&Ue.hasOwnProperty("dimValue")&&(We.value=1,!(De.isInteger(Ue.dimValue)||Ue.dimValue&&De.isInteger(Ue.dimValue.low)&&De.isInteger(Ue.dimValue.high))))return"dimValue: integer|Long expected";if(Ue.dimParam!=null&&Ue.hasOwnProperty("dimParam")){if(We.value===1)return"value: multiple values";if(We.value=1,!De.isString(Ue.dimParam))return"dimParam: string expected"}return Ue.denotation!=null&&Ue.hasOwnProperty("denotation")&&!De.isString(Ue.denotation)?"denotation: string expected":null},Ce.fromObject=function(Ue){if(Ue instanceof $e.onnx.TensorShapeProto.Dimension)return Ue;var We=new $e.onnx.TensorShapeProto.Dimension;return Ue.dimValue!=null&&(De.Long?(We.dimValue=De.Long.fromValue(Ue.dimValue)).unsigned=!1:typeof Ue.dimValue=="string"?We.dimValue=parseInt(Ue.dimValue,10):typeof Ue.dimValue=="number"?We.dimValue=Ue.dimValue:typeof Ue.dimValue=="object"&&(We.dimValue=new De.LongBits(Ue.dimValue.low>>>0,Ue.dimValue.high>>>0).toNumber())),Ue.dimParam!=null&&(We.dimParam=String(Ue.dimParam)),Ue.denotation!=null&&(We.denotation=String(Ue.denotation)),We},Ce.toObject=function(Ue,We){We||(We={});var He={};return We.defaults&&(He.denotation=""),Ue.dimValue!=null&&Ue.hasOwnProperty("dimValue")&&(typeof Ue.dimValue=="number"?He.dimValue=We.longs===String?String(Ue.dimValue):Ue.dimValue:He.dimValue=We.longs===String?De.Long.prototype.toString.call(Ue.dimValue):We.longs===Number?new De.LongBits(Ue.dimValue.low>>>0,Ue.dimValue.high>>>0).toNumber():Ue.dimValue,We.oneofs&&(He.value="dimValue")),Ue.dimParam!=null&&Ue.hasOwnProperty("dimParam")&&(He.dimParam=Ue.dimParam,We.oneofs&&(He.value="dimParam")),Ue.denotation!=null&&Ue.hasOwnProperty("denotation")&&(He.denotation=Ue.denotation),He},Ce.prototype.toJSON=function(){return this.constructor.toObject(this,Re.util.toJSONOptions)},Ce}(),Oe}(),Te.TypeProto=function(){function Oe(Be){if(Be)for(var Ue=Object.keys(Be),We=0;We<Ue.length;++We)Be[Ue[We]]!=null&&(this[Ue[We]]=Be[Ue[We]])}var Ce;return Oe.prototype.tensorType=null,Oe.prototype.denotation="",Object.defineProperty(Oe.prototype,"value",{get:De.oneOfGetter(Ce=["tensorType"]),set:De.oneOfSetter(Ce)}),Oe.create=function(Be){return new Oe(Be)},Oe.encode=function(Be,Ue){return Ue||(Ue=Ve.create()),Be.tensorType!=null&&Be.hasOwnProperty("tensorType")&&$e.onnx.TypeProto.Tensor.encode(Be.tensorType,Ue.uint32(10).fork()).ldelim(),Be.denotation!=null&&Be.hasOwnProperty("denotation")&&Ue.uint32(50).string(Be.denotation),Ue},Oe.encodeDelimited=function(Be,Ue){return this.encode(Be,Ue).ldelim()},Oe.decode=function(Be,Ue){Be instanceof Me||(Be=Me.create(Be));for(var We=Ue===void 0?Be.len:Be.pos+Ue,He=new $e.onnx.TypeProto;Be.pos<We;){var Ge=Be.uint32();switch(Ge>>>3){case 1:He.tensorType=$e.onnx.TypeProto.Tensor.decode(Be,Be.uint32());break;case 6:He.denotation=Be.string();break;default:Be.skipType(7&Ge)}}return He},Oe.decodeDelimited=function(Be){return Be instanceof Me||(Be=new Me(Be)),this.decode(Be,Be.uint32())},Oe.verify=function(Be){if(typeof Be!="object"||Be===null)return"object expected";if(Be.tensorType!=null&&Be.hasOwnProperty("tensorType")){var Ue=$e.onnx.TypeProto.Tensor.verify(Be.tensorType);if(Ue)return"tensorType."+Ue}return Be.denotation!=null&&Be.hasOwnProperty("denotation")&&!De.isString(Be.denotation)?"denotation: string expected":null},Oe.fromObject=function(Be){if(Be instanceof $e.onnx.TypeProto)return Be;var Ue=new $e.onnx.TypeProto;if(Be.tensorType!=null){if(typeof Be.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");Ue.tensorType=$e.onnx.TypeProto.Tensor.fromObject(Be.tensorType)}return Be.denotation!=null&&(Ue.denotation=String(Be.denotation)),Ue},Oe.toObject=function(Be,Ue){Ue||(Ue={});var We={};return Ue.defaults&&(We.denotation=""),Be.tensorType!=null&&Be.hasOwnProperty("tensorType")&&(We.tensorType=$e.onnx.TypeProto.Tensor.toObject(Be.tensorType,Ue),Ue.oneofs&&(We.value="tensorType")),Be.denotation!=null&&Be.hasOwnProperty("denotation")&&(We.denotation=Be.denotation),We},Oe.prototype.toJSON=function(){return this.constructor.toObject(this,Re.util.toJSONOptions)},Oe.Tensor=function(){function Be(Ue){if(Ue)for(var We=Object.keys(Ue),He=0;He<We.length;++He)Ue[We[He]]!=null&&(this[We[He]]=Ue[We[He]])}return Be.prototype.elemType=0,Be.prototype.shape=null,Be.create=function(Ue){return new Be(Ue)},Be.encode=function(Ue,We){return We||(We=Ve.create()),Ue.elemType!=null&&Ue.hasOwnProperty("elemType")&&We.uint32(8).int32(Ue.elemType),Ue.shape!=null&&Ue.hasOwnProperty("shape")&&$e.onnx.TensorShapeProto.encode(Ue.shape,We.uint32(18).fork()).ldelim(),We},Be.encodeDelimited=function(Ue,We){return this.encode(Ue,We).ldelim()},Be.decode=function(Ue,We){Ue instanceof Me||(Ue=Me.create(Ue));for(var He=We===void 0?Ue.len:Ue.pos+We,Ge=new $e.onnx.TypeProto.Tensor;Ue.pos<He;){var Ye=Ue.uint32();switch(Ye>>>3){case 1:Ge.elemType=Ue.int32();break;case 2:Ge.shape=$e.onnx.TensorShapeProto.decode(Ue,Ue.uint32());break;default:Ue.skipType(7&Ye)}}return Ge},Be.decodeDelimited=function(Ue){return Ue instanceof Me||(Ue=new Me(Ue)),this.decode(Ue,Ue.uint32())},Be.verify=function(Ue){if(typeof Ue!="object"||Ue===null)return"object expected";if(Ue.elemType!=null&&Ue.hasOwnProperty("elemType")&&!De.isInteger(Ue.elemType))return"elemType: integer expected";if(Ue.shape!=null&&Ue.hasOwnProperty("shape")){var We=$e.onnx.TensorShapeProto.verify(Ue.shape);if(We)return"shape."+We}return null},Be.fromObject=function(Ue){if(Ue instanceof $e.onnx.TypeProto.Tensor)return Ue;var We=new $e.onnx.TypeProto.Tensor;if(Ue.elemType!=null&&(We.elemType=0|Ue.elemType),Ue.shape!=null){if(typeof Ue.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");We.shape=$e.onnx.TensorShapeProto.fromObject(Ue.shape)}return We},Be.toObject=function(Ue,We){We||(We={});var He={};return We.defaults&&(He.elemType=0,He.shape=null),Ue.elemType!=null&&Ue.hasOwnProperty("elemType")&&(He.elemType=Ue.elemType),Ue.shape!=null&&Ue.hasOwnProperty("shape")&&(He.shape=$e.onnx.TensorShapeProto.toObject(Ue.shape,We)),He},Be.prototype.toJSON=function(){return this.constructor.toObject(this,Re.util.toJSONOptions)},Be}(),Oe}(),Te.OperatorSetIdProto=function(){function Oe(Ce){if(Ce)for(var Be=Object.keys(Ce),Ue=0;Ue<Be.length;++Ue)Ce[Be[Ue]]!=null&&(this[Be[Ue]]=Ce[Be[Ue]])}return Oe.prototype.domain="",Oe.prototype.version=De.Long?De.Long.fromBits(0,0,!1):0,Oe.create=function(Ce){return new Oe(Ce)},Oe.encode=function(Ce,Be){return Be||(Be=Ve.create()),Ce.domain!=null&&Ce.hasOwnProperty("domain")&&Be.uint32(10).string(Ce.domain),Ce.version!=null&&Ce.hasOwnProperty("version")&&Be.uint32(16).int64(Ce.version),Be},Oe.encodeDelimited=function(Ce,Be){return this.encode(Ce,Be).ldelim()},Oe.decode=function(Ce,Be){Ce instanceof Me||(Ce=Me.create(Ce));for(var Ue=Be===void 0?Ce.len:Ce.pos+Be,We=new $e.onnx.OperatorSetIdProto;Ce.pos<Ue;){var He=Ce.uint32();switch(He>>>3){case 1:We.domain=Ce.string();break;case 2:We.version=Ce.int64();break;default:Ce.skipType(7&He)}}return We},Oe.decodeDelimited=function(Ce){return Ce instanceof Me||(Ce=new Me(Ce)),this.decode(Ce,Ce.uint32())},Oe.verify=function(Ce){return typeof Ce!="object"||Ce===null?"object expected":Ce.domain!=null&&Ce.hasOwnProperty("domain")&&!De.isString(Ce.domain)?"domain: string expected":Ce.version!=null&&Ce.hasOwnProperty("version")&&!(De.isInteger(Ce.version)||Ce.version&&De.isInteger(Ce.version.low)&&De.isInteger(Ce.version.high))?"version: integer|Long expected":null},Oe.fromObject=function(Ce){if(Ce instanceof $e.onnx.OperatorSetIdProto)return Ce;var Be=new $e.onnx.OperatorSetIdProto;return Ce.domain!=null&&(Be.domain=String(Ce.domain)),Ce.version!=null&&(De.Long?(Be.version=De.Long.fromValue(Ce.version)).unsigned=!1:typeof Ce.version=="string"?Be.version=parseInt(Ce.version,10):typeof Ce.version=="number"?Be.version=Ce.version:typeof Ce.version=="object"&&(Be.version=new De.LongBits(Ce.version.low>>>0,Ce.version.high>>>0).toNumber())),Be},Oe.toObject=function(Ce,Be){Be||(Be={});var Ue={};if(Be.defaults)if(Ue.domain="",De.Long){var We=new De.Long(0,0,!1);Ue.version=Be.longs===String?We.toString():Be.longs===Number?We.toNumber():We}else Ue.version=Be.longs===String?"0":0;return Ce.domain!=null&&Ce.hasOwnProperty("domain")&&(Ue.domain=Ce.domain),Ce.version!=null&&Ce.hasOwnProperty("version")&&(typeof Ce.version=="number"?Ue.version=Be.longs===String?String(Ce.version):Ce.version:Ue.version=Be.longs===String?De.Long.prototype.toString.call(Ce.version):Be.longs===Number?new De.LongBits(Ce.version.low>>>0,Ce.version.high>>>0).toNumber():Ce.version),Ue},Oe.prototype.toJSON=function(){return this.constructor.toObject(this,Re.util.toJSONOptions)},Oe}(),Te),n.exports=$e},2100:(n,e,t)=>{n.exports=t(9482)},9482:(n,e,t)=>{var r=e;function Ee(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=t(1173),r.BufferWriter=t(3155),r.Reader=t(1408),r.BufferReader=t(593),r.util=t(9693),r.rpc=t(5994),r.roots=t(5054),r.configure=Ee,Ee()},1408:(n,e,t)=>{n.exports=Ve;var r,Ee=t(9693),Te=Ee.LongBits,Re=Ee.utf8;function Me(We,He){return RangeError("index out of range: "+We.pos+" + "+(He||1)+" > "+We.len)}function Ve(We){this.buf=We,this.pos=0,this.len=We.length}var De,$e=typeof Uint8Array<"u"?function(We){if(We instanceof Uint8Array||Array.isArray(We))return new Ve(We);throw Error("illegal buffer")}:function(We){if(Array.isArray(We))return new Ve(We);throw Error("illegal buffer")},Oe=function(){return Ee.Buffer?function(We){return(Ve.create=function(He){return Ee.Buffer.isBuffer(He)?new r(He):$e(He)})(We)}:$e};function Ce(){var We=new Te(0,0),He=0;if(!(this.len-this.pos>4)){for(;He<3;++He){if(this.pos>=this.len)throw Me(this);if(We.lo=(We.lo|(127&this.buf[this.pos])<<7*He)>>>0,this.buf[this.pos++]<128)return We}return We.lo=(We.lo|(127&this.buf[this.pos++])<<7*He)>>>0,We}for(;He<4;++He)if(We.lo=(We.lo|(127&this.buf[this.pos])<<7*He)>>>0,this.buf[this.pos++]<128)return We;if(We.lo=(We.lo|(127&this.buf[this.pos])<<28)>>>0,We.hi=(We.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return We;if(He=0,this.len-this.pos>4){for(;He<5;++He)if(We.hi=(We.hi|(127&this.buf[this.pos])<<7*He+3)>>>0,this.buf[this.pos++]<128)return We}else for(;He<5;++He){if(this.pos>=this.len)throw Me(this);if(We.hi=(We.hi|(127&this.buf[this.pos])<<7*He+3)>>>0,this.buf[this.pos++]<128)return We}throw Error("invalid varint encoding")}function Be(We,He){return(We[He-4]|We[He-3]<<8|We[He-2]<<16|We[He-1]<<24)>>>0}function Ue(){if(this.pos+8>this.len)throw Me(this,8);return new Te(Be(this.buf,this.pos+=4),Be(this.buf,this.pos+=4))}Ve.create=Oe(),Ve.prototype._slice=Ee.Array.prototype.subarray||Ee.Array.prototype.slice,Ve.prototype.uint32=(De=4294967295,function(){if(De=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(De=(De|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(De=(De|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(De=(De|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(De=(De|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return De;if((this.pos+=5)>this.len)throw this.pos=this.len,Me(this,10);return De}),Ve.prototype.int32=function(){return 0|this.uint32()},Ve.prototype.sint32=function(){var We=this.uint32();return We>>>1^-(1&We)|0},Ve.prototype.bool=function(){return this.uint32()!==0},Ve.prototype.fixed32=function(){if(this.pos+4>this.len)throw Me(this,4);return Be(this.buf,this.pos+=4)},Ve.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Me(this,4);return 0|Be(this.buf,this.pos+=4)},Ve.prototype.float=function(){if(this.pos+4>this.len)throw Me(this,4);var We=Ee.float.readFloatLE(this.buf,this.pos);return this.pos+=4,We},Ve.prototype.double=function(){if(this.pos+8>this.len)throw Me(this,4);var We=Ee.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,We},Ve.prototype.bytes=function(){var We=this.uint32(),He=this.pos,Ge=this.pos+We;if(Ge>this.len)throw Me(this,We);return this.pos+=We,Array.isArray(this.buf)?this.buf.slice(He,Ge):He===Ge?new this.buf.constructor(0):this._slice.call(this.buf,He,Ge)},Ve.prototype.string=function(){var We=this.bytes();return Re.read(We,0,We.length)},Ve.prototype.skip=function(We){if(typeof We=="number"){if(this.pos+We>this.len)throw Me(this,We);this.pos+=We}else do if(this.pos>=this.len)throw Me(this);while(128&this.buf[this.pos++]);return this},Ve.prototype.skipType=function(We){switch(We){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(We=7&this.uint32())!=4;)this.skipType(We);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+We+" at offset "+this.pos)}return this},Ve._configure=function(We){r=We,Ve.create=Oe(),r._configure();var He=Ee.Long?"toLong":"toNumber";Ee.merge(Ve.prototype,{int64:function(){return Ce.call(this)[He](!1)},uint64:function(){return Ce.call(this)[He](!0)},sint64:function(){return Ce.call(this).zzDecode()[He](!1)},fixed64:function(){return Ue.call(this)[He](!0)},sfixed64:function(){return Ue.call(this)[He](!1)}})}},593:(n,e,t)=>{n.exports=Te;var r=t(1408);(Te.prototype=Object.create(r.prototype)).constructor=Te;var Ee=t(9693);function Te(Re){r.call(this,Re)}Te._configure=function(){Ee.Buffer&&(Te.prototype._slice=Ee.Buffer.prototype.slice)},Te.prototype.string=function(){var Re=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+Re,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+Re,this.len))},Te._configure()},5054:n=>{n.exports={}},5994:(n,e,t)=>{e.Service=t(7948)},7948:(n,e,t)=>{n.exports=Ee;var r=t(9693);function Ee(Te,Re,Me){if(typeof Te!="function")throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=Te,this.requestDelimited=!!Re,this.responseDelimited=!!Me}(Ee.prototype=Object.create(r.EventEmitter.prototype)).constructor=Ee,Ee.prototype.rpcCall=function Te(Re,Me,Ve,De,$e){if(!De)throw TypeError("request must be specified");var Oe=this;if(!$e)return r.asPromise(Te,Oe,Re,Me,Ve,De);if(Oe.rpcImpl)try{return Oe.rpcImpl(Re,Me[Oe.requestDelimited?"encodeDelimited":"encode"](De).finish(),function(Ce,Be){if(Ce)return Oe.emit("error",Ce,Re),$e(Ce);if(Be!==null){if(!(Be instanceof Ve))try{Be=Ve[Oe.responseDelimited?"decodeDelimited":"decode"](Be)}catch(Ue){return Oe.emit("error",Ue,Re),$e(Ue)}return Oe.emit("data",Be,Re),$e(null,Be)}Oe.end(!0)})}catch(Ce){return Oe.emit("error",Ce,Re),void setTimeout(function(){$e(Ce)},0)}else setTimeout(function(){$e(Error("already ended"))},0)},Ee.prototype.end=function(Te){return this.rpcImpl&&(Te||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1945:(n,e,t)=>{n.exports=Ee;var r=t(9693);function Ee(Ve,De){this.lo=Ve>>>0,this.hi=De>>>0}var Te=Ee.zero=new Ee(0,0);Te.toNumber=function(){return 0},Te.zzEncode=Te.zzDecode=function(){return this},Te.length=function(){return 1};var Re=Ee.zeroHash="\0\0\0\0\0\0\0\0";Ee.fromNumber=function(Ve){if(Ve===0)return Te;var De=Ve<0;De&&(Ve=-Ve);var $e=Ve>>>0,Oe=(Ve-$e)/4294967296>>>0;return De&&(Oe=~Oe>>>0,$e=~$e>>>0,++$e>4294967295&&($e=0,++Oe>4294967295&&(Oe=0))),new Ee($e,Oe)},Ee.from=function(Ve){if(typeof Ve=="number")return Ee.fromNumber(Ve);if(r.isString(Ve)){if(!r.Long)return Ee.fromNumber(parseInt(Ve,10));Ve=r.Long.fromString(Ve)}return Ve.low||Ve.high?new Ee(Ve.low>>>0,Ve.high>>>0):Te},Ee.prototype.toNumber=function(Ve){if(!Ve&&this.hi>>>31){var De=1+~this.lo>>>0,$e=~this.hi>>>0;return De||($e=$e+1>>>0),-(De+4294967296*$e)}return this.lo+4294967296*this.hi},Ee.prototype.toLong=function(Ve){return r.Long?new r.Long(0|this.lo,0|this.hi,!!Ve):{low:0|this.lo,high:0|this.hi,unsigned:!!Ve}};var Me=String.prototype.charCodeAt;Ee.fromHash=function(Ve){return Ve===Re?Te:new Ee((Me.call(Ve,0)|Me.call(Ve,1)<<8|Me.call(Ve,2)<<16|Me.call(Ve,3)<<24)>>>0,(Me.call(Ve,4)|Me.call(Ve,5)<<8|Me.call(Ve,6)<<16|Me.call(Ve,7)<<24)>>>0)},Ee.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},Ee.prototype.zzEncode=function(){var Ve=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^Ve)>>>0,this.lo=(this.lo<<1^Ve)>>>0,this},Ee.prototype.zzDecode=function(){var Ve=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^Ve)>>>0,this.hi=(this.hi>>>1^Ve)>>>0,this},Ee.prototype.length=function(){var Ve=this.lo,De=(this.lo>>>28|this.hi<<4)>>>0,$e=this.hi>>>24;return $e===0?De===0?Ve<16384?Ve<128?1:2:Ve<2097152?3:4:De<16384?De<128?5:6:De<2097152?7:8:$e<128?9:10}},9693:function(n,e,t){var r=e;function Ee(Re,Me,Ve){for(var De=Object.keys(Me),$e=0;$e<De.length;++$e)Re[De[$e]]!==void 0&&Ve||(Re[De[$e]]=Me[De[$e]]);return Re}function Te(Re){function Me(Ve,De){if(!(this instanceof Me))return new Me(Ve,De);Object.defineProperty(this,"message",{get:function(){return Ve}}),Error.captureStackTrace?Error.captureStackTrace(this,Me):Object.defineProperty(this,"stack",{value:new Error().stack||""}),De&&Ee(this,De)}return(Me.prototype=Object.create(Error.prototype)).constructor=Me,Object.defineProperty(Me.prototype,"name",{get:function(){return Re}}),Me.prototype.toString=function(){return this.name+": "+this.message},Me}r.asPromise=t(4537),r.base64=t(7419),r.EventEmitter=t(9211),r.float=t(945),r.inquire=t(7199),r.utf8=t(4997),r.pool=t(6662),r.LongBits=t(1945),r.isNode=!!(t.g!==void 0&&t.g&&t.g.process&&t.g.process.versions&&t.g.process.versions.node),r.global=r.isNode&&t.g||typeof window<"u"&&window||typeof self<"u"&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(Re){return typeof Re=="number"&&isFinite(Re)&&Math.floor(Re)===Re},r.isString=function(Re){return typeof Re=="string"||Re instanceof String},r.isObject=function(Re){return Re&&typeof Re=="object"},r.isset=r.isSet=function(Re,Me){var Ve=Re[Me];return!(Ve==null||!Re.hasOwnProperty(Me))&&(typeof Ve!="object"||(Array.isArray(Ve)?Ve.length:Object.keys(Ve).length)>0)},r.Buffer=function(){try{var Re=r.inquire("buffer").Buffer;return Re.prototype.utf8Write?Re:null}catch{return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(Re){return typeof Re=="number"?r.Buffer?r._Buffer_allocUnsafe(Re):new r.Array(Re):r.Buffer?r._Buffer_from(Re):typeof Uint8Array>"u"?Re:new Uint8Array(Re)},r.Array=typeof Uint8Array<"u"?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(Re){return Re?r.LongBits.from(Re).toHash():r.LongBits.zeroHash},r.longFromHash=function(Re,Me){var Ve=r.LongBits.fromHash(Re);return r.Long?r.Long.fromBits(Ve.lo,Ve.hi,Me):Ve.toNumber(!!Me)},r.merge=Ee,r.lcFirst=function(Re){return Re.charAt(0).toLowerCase()+Re.substring(1)},r.newError=Te,r.ProtocolError=Te("ProtocolError"),r.oneOfGetter=function(Re){for(var Me={},Ve=0;Ve<Re.length;++Ve)Me[Re[Ve]]=1;return function(){for(var De=Object.keys(this),$e=De.length-1;$e>-1;--$e)if(Me[De[$e]]===1&&this[De[$e]]!==void 0&&this[De[$e]]!==null)return De[$e]}},r.oneOfSetter=function(Re){return function(Me){for(var Ve=0;Ve<Re.length;++Ve)Re[Ve]!==Me&&delete this[Re[Ve]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var Re=r.Buffer;Re?(r._Buffer_from=Re.from!==Uint8Array.from&&Re.from||function(Me,Ve){return new Re(Me,Ve)},r._Buffer_allocUnsafe=Re.allocUnsafe||function(Me){return new Re(Me)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},1173:(n,e,t)=>{n.exports=Oe;var r,Ee=t(9693),Te=Ee.LongBits,Re=Ee.base64,Me=Ee.utf8;function Ve(Ye,Je,Ze){this.fn=Ye,this.len=Je,this.next=void 0,this.val=Ze}function De(){}function $e(Ye){this.head=Ye.head,this.tail=Ye.tail,this.len=Ye.len,this.next=Ye.states}function Oe(){this.len=0,this.head=new Ve(De,0,0),this.tail=this.head,this.states=null}var Ce=function(){return Ee.Buffer?function(){return(Oe.create=function(){return new r})()}:function(){return new Oe}};function Be(Ye,Je,Ze){Je[Ze]=255&Ye}function Ue(Ye,Je){this.len=Ye,this.next=void 0,this.val=Je}function We(Ye,Je,Ze){for(;Ye.hi;)Je[Ze++]=127&Ye.lo|128,Ye.lo=(Ye.lo>>>7|Ye.hi<<25)>>>0,Ye.hi>>>=7;for(;Ye.lo>127;)Je[Ze++]=127&Ye.lo|128,Ye.lo=Ye.lo>>>7;Je[Ze++]=Ye.lo}function He(Ye,Je,Ze){Je[Ze]=255&Ye,Je[Ze+1]=Ye>>>8&255,Je[Ze+2]=Ye>>>16&255,Je[Ze+3]=Ye>>>24}Oe.create=Ce(),Oe.alloc=function(Ye){return new Ee.Array(Ye)},Ee.Array!==Array&&(Oe.alloc=Ee.pool(Oe.alloc,Ee.Array.prototype.subarray)),Oe.prototype._push=function(Ye,Je,Ze){return this.tail=this.tail.next=new Ve(Ye,Je,Ze),this.len+=Je,this},Ue.prototype=Object.create(Ve.prototype),Ue.prototype.fn=function(Ye,Je,Ze){for(;Ye>127;)Je[Ze++]=127&Ye|128,Ye>>>=7;Je[Ze]=Ye},Oe.prototype.uint32=function(Ye){return this.len+=(this.tail=this.tail.next=new Ue((Ye>>>=0)<128?1:Ye<16384?2:Ye<2097152?3:Ye<268435456?4:5,Ye)).len,this},Oe.prototype.int32=function(Ye){return Ye<0?this._push(We,10,Te.fromNumber(Ye)):this.uint32(Ye)},Oe.prototype.sint32=function(Ye){return this.uint32((Ye<<1^Ye>>31)>>>0)},Oe.prototype.uint64=function(Ye){var Je=Te.from(Ye);return this._push(We,Je.length(),Je)},Oe.prototype.int64=Oe.prototype.uint64,Oe.prototype.sint64=function(Ye){var Je=Te.from(Ye).zzEncode();return this._push(We,Je.length(),Je)},Oe.prototype.bool=function(Ye){return this._push(Be,1,Ye?1:0)},Oe.prototype.fixed32=function(Ye){return this._push(He,4,Ye>>>0)},Oe.prototype.sfixed32=Oe.prototype.fixed32,Oe.prototype.fixed64=function(Ye){var Je=Te.from(Ye);return this._push(He,4,Je.lo)._push(He,4,Je.hi)},Oe.prototype.sfixed64=Oe.prototype.fixed64,Oe.prototype.float=function(Ye){return this._push(Ee.float.writeFloatLE,4,Ye)},Oe.prototype.double=function(Ye){return this._push(Ee.float.writeDoubleLE,8,Ye)};var Ge=Ee.Array.prototype.set?function(Ye,Je,Ze){Je.set(Ye,Ze)}:function(Ye,Je,Ze){for(var fn=0;fn<Ye.length;++fn)Je[Ze+fn]=Ye[fn]};Oe.prototype.bytes=function(Ye){var Je=Ye.length>>>0;if(!Je)return this._push(Be,1,0);if(Ee.isString(Ye)){var Ze=Oe.alloc(Je=Re.length(Ye));Re.decode(Ye,Ze,0),Ye=Ze}return this.uint32(Je)._push(Ge,Je,Ye)},Oe.prototype.string=function(Ye){var Je=Me.length(Ye);return Je?this.uint32(Je)._push(Me.write,Je,Ye):this._push(Be,1,0)},Oe.prototype.fork=function(){return this.states=new $e(this),this.head=this.tail=new Ve(De,0,0),this.len=0,this},Oe.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Ve(De,0,0),this.len=0),this},Oe.prototype.ldelim=function(){var Ye=this.head,Je=this.tail,Ze=this.len;return this.reset().uint32(Ze),Ze&&(this.tail.next=Ye.next,this.tail=Je,this.len+=Ze),this},Oe.prototype.finish=function(){for(var Ye=this.head.next,Je=this.constructor.alloc(this.len),Ze=0;Ye;)Ye.fn(Ye.val,Je,Ze),Ze+=Ye.len,Ye=Ye.next;return Je},Oe._configure=function(Ye){r=Ye,Oe.create=Ce(),r._configure()}},3155:(n,e,t)=>{n.exports=Te;var r=t(1173);(Te.prototype=Object.create(r.prototype)).constructor=Te;var Ee=t(9693);function Te(){r.call(this)}function Re(Me,Ve,De){Me.length<40?Ee.utf8.write(Me,Ve,De):Ve.utf8Write?Ve.utf8Write(Me,De):Ve.write(Me,De)}Te._configure=function(){Te.alloc=Ee._Buffer_allocUnsafe,Te.writeBytesBuffer=Ee.Buffer&&Ee.Buffer.prototype instanceof Uint8Array&&Ee.Buffer.prototype.set.name==="set"?function(Me,Ve,De){Ve.set(Me,De)}:function(Me,Ve,De){if(Me.copy)Me.copy(Ve,De,0,Me.length);else for(var $e=0;$e<Me.length;)Ve[De++]=Me[$e++]}},Te.prototype.bytes=function(Me){Ee.isString(Me)&&(Me=Ee._Buffer_from(Me,"base64"));var Ve=Me.length>>>0;return this.uint32(Ve),Ve&&this._push(Te.writeBytesBuffer,Ve,Me),this},Te.prototype.string=function(Me){var Ve=Ee.Buffer.byteLength(Me);return this.uint32(Ve),Ve&&this._push(Re,Ve,Me),this},Te._configure()},7714:(n,e,t)=>{e.R=void 0;const r=t(6919),Ee=t(7448);e.R=new class{async init(){}async createSessionHandler(Te,Re){const Me=new r.Session(Re);return await Me.loadModel(Te),new Ee.OnnxjsSessionHandler(Me)}}},4200:(n,e,t)=>{e.c8=e.rX=void 0;const r=t(1670),Ee=t(5381),Te=t(2157),Re=t(2306);e.rX=()=>{if((typeof r.env.wasm.initTimeout!="number"||r.env.wasm.initTimeout<0)&&(r.env.wasm.initTimeout=0),typeof r.env.wasm.simd!="boolean"&&(r.env.wasm.simd=!0),typeof r.env.wasm.proxy!="boolean"&&(r.env.wasm.proxy=!1),typeof r.env.wasm.numThreads!="number"||!Number.isInteger(r.env.wasm.numThreads)||r.env.wasm.numThreads<=0){const Me=typeof navigator>"u"?(0,Ee.cpus)().length:navigator.hardwareConcurrency;r.env.wasm.numThreads=Math.min(4,Math.ceil((Me||1)/2))}},e.c8=new class{async init(){(0,e.rX)(),await(0,Te.initWasm)()}async createSessionHandler(Me,Ve){const De=new Re.OnnxruntimeWebAssemblySessionHandler;return await De.loadModel(Me,Ve),Promise.resolve(De)}}},6018:function(n,e,t){var r=this&&this.__createBinding||(Object.create?function(Re,Me,Ve,De){De===void 0&&(De=Ve);var $e=Object.getOwnPropertyDescriptor(Me,Ve);$e&&!("get"in $e?!Me.__esModule:$e.writable||$e.configurable)||($e={enumerable:!0,get:function(){return Me[Ve]}}),Object.defineProperty(Re,De,$e)}:function(Re,Me,Ve,De){De===void 0&&(De=Ve),Re[De]=Me[Ve]}),Ee=this&&this.__exportStar||function(Re,Me){for(var Ve in Re)Ve==="default"||Object.prototype.hasOwnProperty.call(Me,Ve)||r(Me,Re,Ve)};Object.defineProperty(e,"__esModule",{value:!0}),Ee(t(1670),e);const Te=t(1670);{const Re=t(7714).R;(0,Te.registerBackend)("webgl",Re,-10)}{const Re=t(4200).c8;(0,Te.registerBackend)("cpu",Re,10),(0,Te.registerBackend)("wasm",Re,10),(0,Te.registerBackend)("xnnpack",Re,9)}},246:(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createAttributeWithCacheKey=void 0;class t{constructor(Ee){Object.assign(this,Ee)}get cacheKey(){return this._cacheKey||(this._cacheKey=Object.getOwnPropertyNames(this).sort().map(Ee=>`${this[Ee]}`).join(";")),this._cacheKey}}e.createAttributeWithCacheKey=r=>new t(r)},7778:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute=void 0;const r=t(1446),Ee=t(9395),Te=t(9162),Re=t(2517);var Me=Ee.onnxruntime.experimental.fbs;class Ve{constructor($e){if(this._attributes=new Map,$e!=null){for(const Oe of $e)Oe instanceof r.onnx.AttributeProto?this._attributes.set(Oe.name,[Ve.getValue(Oe),Ve.getType(Oe)]):Oe instanceof Me.Attribute&&this._attributes.set(Oe.name(),[Ve.getValue(Oe),Ve.getType(Oe)]);if(this._attributes.size<$e.length)throw new Error("duplicated attribute names")}}set($e,Oe,Ce){this._attributes.set($e,[Ce,Oe])}delete($e){this._attributes.delete($e)}getFloat($e,Oe){return this.get($e,"float",Oe)}getInt($e,Oe){return this.get($e,"int",Oe)}getString($e,Oe){return this.get($e,"string",Oe)}getTensor($e,Oe){return this.get($e,"tensor",Oe)}getFloats($e,Oe){return this.get($e,"floats",Oe)}getInts($e,Oe){return this.get($e,"ints",Oe)}getStrings($e,Oe){return this.get($e,"strings",Oe)}getTensors($e,Oe){return this.get($e,"tensors",Oe)}get($e,Oe,Ce){const Be=this._attributes.get($e);if(Be===void 0){if(Ce!==void 0)return Ce;throw new Error(`required attribute not found: ${$e}`)}if(Be[1]!==Oe)throw new Error(`type mismatch: expected ${Oe} but got ${Be[1]}`);return Be[0]}static getType($e){const Oe=$e instanceof r.onnx.AttributeProto?$e.type:$e.type();switch(Oe){case r.onnx.AttributeProto.AttributeType.FLOAT:return"float";case r.onnx.AttributeProto.AttributeType.INT:return"int";case r.onnx.AttributeProto.AttributeType.STRING:return"string";case r.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case r.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case r.onnx.AttributeProto.AttributeType.INTS:return"ints";case r.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case r.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${r.onnx.AttributeProto.AttributeType[Oe]}`)}}static getValue($e){const Oe=$e instanceof r.onnx.AttributeProto?$e.type:$e.type();if(Oe===r.onnx.AttributeProto.AttributeType.GRAPH||Oe===r.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");const Ce=this.getValueNoCheck($e);if(Oe===r.onnx.AttributeProto.AttributeType.INT&&Re.LongUtil.isLong(Ce))return Re.LongUtil.longToNumber(Ce);if(Oe===r.onnx.AttributeProto.AttributeType.INTS){const Be=Ce,Ue=new Array(Be.length);for(let We=0;We<Be.length;We++){const He=Be[We];Ue[We]=Re.LongUtil.longToNumber(He)}return Ue}if(Oe===r.onnx.AttributeProto.AttributeType.TENSOR)return $e instanceof r.onnx.AttributeProto?Te.Tensor.fromProto(Ce):Te.Tensor.fromOrtTensor(Ce);if(Oe===r.onnx.AttributeProto.AttributeType.TENSORS){if($e instanceof r.onnx.AttributeProto)return Ce.map(Be=>Te.Tensor.fromProto(Be));if($e instanceof Me.Attribute)return Ce.map(Be=>Te.Tensor.fromOrtTensor(Be))}if(Oe===r.onnx.AttributeProto.AttributeType.STRING&&$e instanceof r.onnx.AttributeProto){const Be=Ce;return(0,Re.decodeUtf8String)(Be)}return Oe===r.onnx.AttributeProto.AttributeType.STRINGS&&$e instanceof r.onnx.AttributeProto?Ce.map(Re.decodeUtf8String):Ce}static getValueNoCheck($e){return $e instanceof r.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat($e):this.getValueNoCheckFromOrtFormat($e)}static getValueNoCheckFromOnnxFormat($e){switch($e.type){case r.onnx.AttributeProto.AttributeType.FLOAT:return $e.f;case r.onnx.AttributeProto.AttributeType.INT:return $e.i;case r.onnx.AttributeProto.AttributeType.STRING:return $e.s;case r.onnx.AttributeProto.AttributeType.TENSOR:return $e.t;case r.onnx.AttributeProto.AttributeType.GRAPH:return $e.g;case r.onnx.AttributeProto.AttributeType.FLOATS:return $e.floats;case r.onnx.AttributeProto.AttributeType.INTS:return $e.ints;case r.onnx.AttributeProto.AttributeType.STRINGS:return $e.strings;case r.onnx.AttributeProto.AttributeType.TENSORS:return $e.tensors;case r.onnx.AttributeProto.AttributeType.GRAPHS:return $e.graphs;default:throw new Error(`unsupported attribute type: ${r.onnx.AttributeProto.AttributeType[$e.type]}`)}}static getValueNoCheckFromOrtFormat($e){switch($e.type()){case Me.AttributeType.FLOAT:return $e.f();case Me.AttributeType.INT:return $e.i();case Me.AttributeType.STRING:return $e.s();case Me.AttributeType.TENSOR:return $e.t();case Me.AttributeType.GRAPH:return $e.g();case Me.AttributeType.FLOATS:return $e.floatsArray();case Me.AttributeType.INTS:{const Oe=[];for(let Ce=0;Ce<$e.intsLength();Ce++)Oe.push($e.ints(Ce));return Oe}case Me.AttributeType.STRINGS:{const Oe=[];for(let Ce=0;Ce<$e.stringsLength();Ce++)Oe.push($e.strings(Ce));return Oe}case Me.AttributeType.TENSORS:{const Oe=[];for(let Ce=0;Ce<$e.tensorsLength();Ce++)Oe.push($e.tensors(Ce));return Oe}default:throw new Error(`unsupported attribute type: ${Me.AttributeType[$e.type()]}`)}}}e.Attribute=Ve},7091:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.resolveBackend=e.backend=void 0;const r=t(5038),Ee=new Map;async function Te(Re){const Me=e.backend;if(Me[Re]!==void 0&&function(Ve){const De=Ve;return"initialize"in De&&typeof De.initialize=="function"&&"createSessionHandler"in De&&typeof De.createSessionHandler=="function"&&"dispose"in De&&typeof De.dispose=="function"}(Me[Re])){const Ve=Me[Re];let De=Ve.initialize();if(typeof De=="object"&&"then"in De&&(De=await De),De)return Ee.set(Re,Ve),Ve}}e.backend={webgl:new r.WebGLBackend},e.resolveBackend=async function Re(Me){if(!Me)return Re(["webgl"]);{const Ve=typeof Me=="string"?[Me]:Me;for(const De of Ve){const $e=Ee.get(De);if($e)return $e;const Oe=await Te(De);if(Oe)return Oe}}throw new Error("no available backend to use")}},5038:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLBackend=void 0;const r=t(1670),Ee=t(6231),Te=t(6416),Re=t(7305);e.WebGLBackend=class{get contextId(){return r.env.webgl.contextId}set contextId(Me){r.env.webgl.contextId=Me}get matmulMaxBatchSize(){return r.env.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(Me){r.env.webgl.matmulMaxBatchSize=Me}get textureCacheMode(){return r.env.webgl.textureCacheMode}set textureCacheMode(Me){r.env.webgl.textureCacheMode=Me}get pack(){return r.env.webgl.pack}set pack(Me){r.env.webgl.pack=Me}get async(){return r.env.webgl.async}set async(Me){r.env.webgl.async=Me}initialize(){try{return this.glContext=(0,Re.createWebGLContext)(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),Ee.Logger.setWithEnv(r.env),Ee.Logger.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(Me){return Ee.Logger.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${Me}`),!1}}createSessionHandler(Me){return new Te.WebGLSessionHandler(this,Me)}dispose(){this.glContext.dispose()}}},5107:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CoordsGlslLib=void 0;const r=t(2517),Ee=t(8520),Te=t(5060),Re=t(7859),Me=t(9390);class Ve extends Ee.GlslLib{constructor($e){super($e)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){return{offsetToCoords:new Ee.GlslLibRoutine(`
      vec2 offsetToCoords(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){return{coordsToOffset:new Ee.GlslLibRoutine(`
      int coordsToOffset(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){const $e=this.context.outputTextureLayout;return $e.isPacked?this.getPackedOutputSamplingSnippet($e):this.getUnpackedOutputSamplingSnippet($e)}getPackedOutputSamplingSnippet($e){const Oe=$e.unpackedShape,Ce=[$e.width,$e.height],Be={},Ue="getOutputCoords";switch(Oe.length){case 0:Be[Ue]=this.getOutputScalarCoords();break;case 1:Be[Ue]=this.getOutputPacked1DCoords(Oe,Ce);break;case 2:Be[Ue]=this.getOutputPacked2DCoords(Oe,Ce);break;case 3:Be[Ue]=this.getOutputPacked3DCoords(Oe,Ce);break;default:Be[Ue]=this.getOutputPackedNDCoords(Oe,Ce)}const We=`
      void setOutput(vec4 val) {
        ${(0,Te.getGlsl)(this.context.glContext.version).output} = val;
      }
    `;return Be.floatTextureSetRGBA=new Ee.GlslLibRoutine(We),Be}getUnpackedOutputSamplingSnippet($e){const Oe=$e.unpackedShape,Ce=[$e.width,$e.height],Be={},Ue="getOutputCoords";switch(Oe.length){case 0:Be[Ue]=this.getOutputScalarCoords();break;case 1:Be[Ue]=this.getOutputUnpacked1DCoords(Oe,Ce);break;case 2:Be[Ue]=this.getOutputUnpacked2DCoords(Oe,Ce);break;case 3:Be[Ue]=this.getOutputUnpacked3DCoords(Oe,Ce);break;case 4:Be[Ue]=this.getOutputUnpacked4DCoords(Oe,Ce);break;case 5:Be[Ue]=this.getOutputUnpacked5DCoords(Oe,Ce);break;case 6:Be[Ue]=this.getOutputUnpacked6DCoords(Oe,Ce);break;default:throw new Error(`Unsupported output dimensionality: ${Oe.length}`)}const We=`
        void setOutput(float val) {
          ${(0,Te.getGlsl)(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `;return Be.floatTextureSetR=new Ee.GlslLibRoutine(We),Be}getOutputScalarCoords(){return new Ee.GlslLibRoutine(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords($e,Oe){const Ce=Oe;let Be="";return Ce[0]===1?(Be=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${Ce[1]}.0);
          }
        `,new Ee.GlslLibRoutine(Be)):Ce[1]===1?(Be=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${Ce[0]}.0);
          }
        `,new Ee.GlslLibRoutine(Be)):(Be=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${Ce[0]}, ${Ce[1]}));
          return 2 * (resTexRC.y * ${Ce[0]} + resTexRC.x);
        }
      `,new Ee.GlslLibRoutine(Be))}getOutputPacked2DCoords($e,Oe){let Ce="";if(r.ArrayUtil.arraysEqual($e,Oe))return Ce=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${Oe[0]}, ${Oe[1]}));
        }
      `,new Ee.GlslLibRoutine(Ce);const Be=Oe,Ue=Math.ceil($e[1]/2);return Ce=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Be[0]}, ${Be[1]}));

          int index = resTexRC.y * ${Be[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${Ue}) * 2;
          int c = 2 * (index / ${Ue});

          return ivec2(r, c);
        }
      `,new Ee.GlslLibRoutine(Ce)}getOutputPacked3DCoords($e,Oe){const Ce=[Oe[0],Oe[1]],Be=Math.ceil($e[2]/2),Ue=Be*Math.ceil($e[1]/2),We=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Ce[0]}, ${Ce[1]}));
          int index = resTexRC.y * ${Ce[0]} + resTexRC.x;

          int b = index / ${Ue};
          index -= b * ${Ue};

          // reverse r and c order for packed texture
          int r = imod(index, ${Be}) * 2;
          int c = 2 * (index / ${Be});

          return ivec3(b, r, c);
        }
      `;return new Ee.GlslLibRoutine(We)}getOutputPackedNDCoords($e,Oe){const Ce=[Oe[0],Oe[1]],Be=Math.ceil($e[$e.length-1]/2),Ue=Be*Math.ceil($e[$e.length-2]/2);let We=Ue,He="",Ge="b, r, c";for(let Je=2;Je<$e.length-1;Je++)We*=$e[$e.length-Je-1],He=`
      int b${Je} = index / ${We};
      index -= b${Je} * ${We};
    `+He,Ge=`b${Je}, `+Ge;const Ye=`
      ivec${$e.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${Ce[0]}, ${Ce[1]}));
        int index = resTexRC.y * ${Ce[0]} + resTexRC.x;

        ${He}

        int b = index / ${Ue};
        index -= b * ${Ue};

        // reverse r and c order for packed texture
        int r = imod(index, ${Be}) * 2;
        int c = 2 * (index / ${Be});

        return ivec${$e.length}(${Ge});
      }
    `;return new Ee.GlslLibRoutine(Ye)}getOutputUnpacked1DCoords($e,Oe){const Ce=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Oe[0]}, ${Oe[1]}));
          return resTexRC.y * ${Oe[0]} + resTexRC.x;
        }
      `;return new Ee.GlslLibRoutine(Ce)}getOutputUnpacked2DCoords($e,Oe){const Ce=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Oe[0]}, ${Oe[1]}));
          int index = resTexRC.y * ${Oe[0]} + resTexRC.x;
          int r = index / ${$e[1]};
          int c = index - r * ${$e[1]};
          return ivec2(r, c);
        }
      `;return new Ee.GlslLibRoutine(Ce)}getOutputUnpacked3DCoords($e,Oe){let Ce="";const Be=$e.length;let Ue=null;Be<2&&(Ue=[]),Ue=new Array(Be-1),Ue[Be-2]=$e[Be-1];for(let Ge=Be-3;Ge>=0;--Ge)Ue[Ge]=Ue[Ge+1]*$e[Ge+1];const We=["r","c","d"],He=Ue.map((Ge,Ye)=>`int ${We[Ye]} = index / ${Ge}; ${Ye===Ue.length-1?`int ${We[Ye+1]} = index - ${We[Ye]} * ${Ge}`:`index -= ${We[Ye]} * ${Ge}`};`).join("");return Ce=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Oe[0]}, ${Oe[1]}));
          int index = resTexRC.y * ${Oe[0]} + resTexRC.x;
          ${He}
          return ivec3(r, c, d);
        }
      `,new Ee.GlslLibRoutine(Ce)}getOutputUnpacked4DCoords($e,Oe){let Ce="";const Be=$e.length;let Ue=null;Be<2&&(Ue=[]),Ue=new Array(Be-1),Ue[Be-2]=$e[Be-1];for(let Ge=Be-3;Ge>=0;--Ge)Ue[Ge]=Ue[Ge+1]*$e[Ge+1];const We=["r","c","d","d2"],He=Ue.map((Ge,Ye)=>`int ${We[Ye]} = index / ${Ge}; ${Ye===Ue.length-1?`int ${We[Ye+1]} = index - ${We[Ye]} * ${Ge}`:`index -= ${We[Ye]} * ${Ge}`};`).join("");return Ce=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Oe[0]}, ${Oe[1]}));
          int index = resTexRC.y * ${Oe[0]} + resTexRC.x;
          ${He}
          return ivec4(r, c, d, d2);
        }
      `,new Ee.GlslLibRoutine(Ce)}getOutputUnpacked5DCoords($e,Oe){let Ce="";const Be=$e.length;let Ue=null;Be<2&&(Ue=[]),Ue=new Array(Be-1),Ue[Be-2]=$e[Be-1];for(let Ge=Be-3;Ge>=0;--Ge)Ue[Ge]=Ue[Ge+1]*$e[Ge+1];const We=["r","c","d","d2","d3"],He=Ue.map((Ge,Ye)=>`int ${We[Ye]} = index / ${Ge}; ${Ye===Ue.length-1?`int ${We[Ye+1]} = index - ${We[Ye]} * ${Ge}`:`index -= ${We[Ye]} * ${Ge}`};`).join("");return Ce=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${Oe[0]}, ${Oe[1]}));
          int index = resTexRC.y * ${Oe[0]} + resTexRC.x;
          ${He}
          return ivec5(r, c, d, d2, d3);
        }
      `,new Ee.GlslLibRoutine(Ce)}getOutputUnpacked6DCoords($e,Oe){let Ce="";const Be=$e.length;let Ue=null;Be<2&&(Ue=[]),Ue=new Array(Be-1),Ue[Be-2]=$e[Be-1];for(let Ge=Be-3;Ge>=0;--Ge)Ue[Ge]=Ue[Ge+1]*$e[Ge+1];const We=["r","c","d","d2","d3","d4"],He=Ue.map((Ge,Ye)=>`int ${We[Ye]} = index / ${Ge}; ${Ye===Ue.length-1?`int ${We[Ye+1]} = index - ${We[Ye]} * ${Ge}`:`index -= ${We[Ye]} * ${Ge}`};`).join("");return Ce=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${Oe[0]}, ${Oe[1]}));
         int index = resTexRC.y * ${Oe[0]} + resTexRC.x;
         ${He}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new Ee.GlslLibRoutine(Ce)}getCommonUtilFuncs(){const $e={};let Oe="uvFromFlat";$e[Oe]=new Ee.GlslLibRoutine(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),Oe="packedUVfrom1D",$e[Oe]=new Ee.GlslLibRoutine(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),Oe="packedUVfrom2D",$e[Oe]=new Ee.GlslLibRoutine(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),Oe="packedUVfrom3D",$e[Oe]=new Ee.GlslLibRoutine(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),Oe="sampleTexture";const Ce=(0,Te.getGlsl)(this.context.glContext.version);return $e[Oe]=new Ee.GlslLibRoutine(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${Ce.texture2D}(textureSampler, uv).r;
        }`),$e}getInputsSamplingSnippets(){const $e={},Oe=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((Ce,Be)=>{const Ue=this.context.inputTextureLayouts[Be],We=(0,Me.generateShaderFuncNameFromInputSamplerName)(Ce);Ue.isPacked?$e[We]=this.getPackedSamplerFromInput(We,Ce,Ue):$e[We]=this.getUnpackedSamplerFromInput(We,Ce,Ue);const He=(0,Me.generateShaderFuncNameFromInputSamplerNameAtOutCoords)(Ce);Ue.unpackedShape.length<=Oe.unpackedShape.length&&(Ue.isPacked?$e[He]=this.getPackedSamplerAtOutputCoords(He,Ue,Oe,Ce):$e[He]=this.getUnpackedSamplerAtOutputCoords(He,Ue,Oe,Ce))}),$e}getPackedSamplerAtOutputCoords($e,Oe,Ce,Be){const Ue=Oe.unpackedShape,We=Ce.unpackedShape,He=Be,Ge=(0,Me.generateShaderFuncNameFromInputSamplerName)(He),Ye=Ue.length,Je=We.length,Ze=r.BroadcastUtil.getBroadcastDims(Ue,We),fn=(0,Me.getCoordsDataType)(Je),yn=Je-Ye;let mn;const pn=(0,Me.getGlChannels)();mn=Ye===0?"":Je<2&&Ze.length>=1?"coords = 0;":Ze.map(Pn=>`coords.${pn[Pn+yn]} = 0;`).join(`
`);let un="";un=Je<2&&Ye>0?"coords":Ue.map((Pn,Ln)=>`coords.${pn[Ln+yn]}`).join(", ");let bn="return outputValue;";const gn=r.ShapeUtil.size(Ue)===1,xn=r.ShapeUtil.size(We)===1;if(Ye!==1||gn||xn){if(gn&&!xn)bn=Je===1?`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:`
          return vec4(outputValue.x);
        `;else if(Ze.length){const Pn=Ye-2,Ln=Ye-1;Ze.indexOf(Pn)>-1&&Ze.indexOf(Ln)>-1?bn="return vec4(outputValue.x);":Ze.indexOf(Pn)>-1?bn="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":Ze.indexOf(Ln)>-1&&(bn="return vec4(outputValue.xx, outputValue.zz);")}}else bn=`
        return vec4(outputValue.xy, outputValue.xy);
      `;const En=`
      vec4 ${$e}() {
        ${fn} coords = getOutputCoords();
        
        int lastDim = coords.${pn[Je-1]};
        coords.${pn[Je-1]} = coords.${pn[Je-2]};
        coords.${pn[Je-2]} = lastDim;
      
        ${mn}
        vec4 outputValue = ${Ge}(${un});
        ${bn}
      }
    `;return new Ee.GlslLibRoutine(En,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords($e,Oe,Ce,Be){const Ue=[Ce.width,Ce.height],We=[Oe.width,Oe.height],He=Oe.unpackedShape.length,Ge=Ce.unpackedShape.length,Ye=Oe.unpackedShape,Je=Ce.unpackedShape,Ze=(0,Me.generateShaderFuncNameFromInputSamplerName)(Be);if(He===Ge&&r.ArrayUtil.arraysEqual(We,Ue)){const xn=`
          float ${$e}() {
            return sampleTexture(${Be}, TexCoords);
          }
        `;return new Ee.GlslLibRoutine(xn,["coordinates.sampleTexture"])}const fn=(0,Me.getCoordsDataType)(Ge),yn=r.BroadcastUtil.getBroadcastDims(Ye,Je),mn=Ge-He;let pn;const un=(0,Me.getGlChannels)();pn=He===0?"":Ge<2&&yn.length>=1?"coords = 0;":yn.map(xn=>`coords.${un[xn+mn]} = 0;`).join(`
`);let bn="";bn=Ge<2&&He>0?"coords":Oe.unpackedShape.map((xn,En)=>`coords.${un[En+mn]}`).join(", ");const gn=`
        float ${$e}() {
          ${fn} coords = getOutputCoords();
          ${pn}
          return ${Ze}(${bn});
        }
      `;return new Ee.GlslLibRoutine(gn,["coordinates.getOutputCoords"])}getPackedSamplerFromInput($e,Oe,Ce){switch(Ce.unpackedShape.length){case 0:return this.getPackedSamplerScalar($e,Oe);case 1:return this.getPackedSampler1D($e,Oe,Ce);case 2:return this.getPackedSampler2D($e,Oe,Ce);case 3:return this.getPackedSampler3D($e,Oe,Ce);default:return this.getPackedSamplerND($e,Oe,Ce)}}getUnpackedSamplerFromInput($e,Oe,Ce){const Be=Ce.unpackedShape;switch(Be.length){case 0:return this.getUnpackedSamplerScalar($e,Oe,Ce);case 1:return this.getUnpackedSampler1D($e,Oe,Ce);case 2:return this.getUnpackedSampler2D($e,Oe,Ce);case 3:return this.getUnpackedSampler3D($e,Oe,Ce);case 4:return this.getUnpackedSampler4D($e,Oe,Ce);case 5:return this.getUnpackedSampler5D($e,Oe,Ce);case 6:return this.getUnpackedSampler6D($e,Oe,Ce);default:throw new Error(`Unsupported dimension ${Be.length}-D`)}}getPackedSamplerScalar($e,Oe){const Ce=`
          vec4 ${$e}() {
            return ${(0,Te.getGlsl)(this.context.glContext.version).texture2D}(${Oe}, halfCR);
          }
        `;return new Ee.GlslLibRoutine(Ce)}getPackedSampler1D($e,Oe,Ce){const Be=[Ce.width,Ce.height],Ue=[Be[1],Be[0]],We=(0,Te.getGlsl)(this.context.glContext.version),He=`vec4 ${$e}(int index) {
      vec2 uv = packedUVfrom1D(
      ${Ue[0]}, ${Ue[1]}, index);
      return ${We.texture2D}(${Oe}, uv);
    }`;return new Ee.GlslLibRoutine(He,["coordinates.packedUVfrom1D"])}getPackedSampler2D($e,Oe,Ce){const Be=Ce.unpackedShape,Ue=[Ce.width,Ce.height],We=(0,Te.getGlsl)(this.context.glContext.version),He=Ue[0],Ge=Ue[1];if(Ue!=null&&r.ArrayUtil.arraysEqual(Be,Ue)){const fn=`vec4 ${$e}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${Ge}.0, ${He}.0);
        return ${We.texture2D}(${Oe}, uv);
      }`;return new Ee.GlslLibRoutine(fn)}const Ye=Ue,Je=Math.ceil(Be[1]/2),Ze=`vec4 ${$e}(int row, int col) {
      vec2 uv = packedUVfrom2D(${Ye[1]}, ${Ye[0]}, ${Je}, row, col);
      return ${We.texture2D}(${Oe}, uv);
    }`;return new Ee.GlslLibRoutine(Ze,["coordinates.packedUVfrom2D"])}getPackedSampler3D($e,Oe,Ce){const Be=Ce.unpackedShape,Ue=[Ce.width,Ce.height],We=[Ue[0],Ue[1]],He=(0,Te.getGlsl)(this.context.glContext.version);if(Be[0]===1){const fn=Be.slice(1),yn=[1,2],mn=(0,Me.squeezeInputShape)(Be,fn),pn=["b","row","col"],un=JSON.parse(JSON.stringify(Ce));un.unpackedShape=mn;const bn=this.getPackedSamplerFromInput($e,Oe,un),gn=`${bn.routineBody}
      vec4 ${$e}(int b, int row, int col) {
        return ${$e}(${(0,Me.getSqueezedParams)(pn,yn)});
      } `;return new Ee.GlslLibRoutine(gn,bn.dependencies)}const Ge=We[0],Ye=We[1],Je=Math.ceil(Be[2]/2),Ze=`vec4 ${$e}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${Ye}, ${Ge}, ${Je*Math.ceil(Be[1]/2)}, ${Je}, b, row, col);
      return ${He.texture2D}(${Oe}, uv);}`;return new Ee.GlslLibRoutine(Ze,["coordinates.packedUVfrom3D"])}getPackedSamplerND($e,Oe,Ce){const Be=Ce.unpackedShape,Ue=Be.length,We=[Ce.width,Ce.height],He=(0,Te.getGlsl)(this.context.glContext.version),Ge=[We[0],We[1]],Ye=Ge[1],Je=Ge[0],Ze=Math.ceil(Be[Ue-1]/2);let fn=Ze*Math.ceil(Be[Ue-2]/2),yn="int b, int row, int col",mn=`b * ${fn} + (row / 2) * ${Ze} + (col / 2)`;for(let un=2;un<Ue-1;un++)yn=`int b${un}, `+yn,fn*=Be[Ue-un-1],mn=`b${un} * ${fn} + `+mn;const pn=`vec4 ${$e}(${yn}) {
      int index = ${mn};
      int texR = index / ${Je};
      int texC = index - texR * ${Je};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${Je}, ${Ye});
      return ${He.texture2D}(${Oe}, uv);
    }`;return new Ee.GlslLibRoutine(pn)}getUnpackedSamplerScalar($e,Oe,Ce){const[Be,Ue]=[Ce.width,Ce.height];if(Be===1&&Ue===1){const He=`
          float ${$e}() {
            return sampleTexture(${Oe}, halfCR);
          }
        `;return new Ee.GlslLibRoutine(He,["coordinates.sampleTexture"])}const We=`
        float ${$e}() {
          int offset_${Oe} = coordsToOffset(TexCoords, ${Be}, ${Ue});
          vec2 uv = uvFromFlat(${Be}, ${Ue}, offset_${Oe});
          return sampleTexture(${Oe}, uv);
        }
      `;return new Ee.GlslLibRoutine(We,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D($e,Oe,Ce){const Be=Ce.width,Ue=Ce.height;if(Ue===1&&Be===1){const He=`
        float ${$e}(int index) {
          return sampleTexture(${Oe}, halfCR);
        }
      `;return new Ee.GlslLibRoutine(He,["coordinates.sampleTexture"])}if(Ue===1){const He=`
          float ${$e}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${Be}.0, 0.5);
            return sampleTexture(${Oe}, uv);
          }
        `;return new Ee.GlslLibRoutine(He,["coordinates.sampleTexture"])}if(Be===1){const He=`
          float ${$e}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${Ue}.0);
            return sampleTexture(${Oe}, uv);
          }
        `;return new Ee.GlslLibRoutine(He,["coordinates.sampleTexture"])}const We=`
        float ${$e}(int index) {
          vec2 uv = uvFromFlat(${Be}, ${Ue}, index);
          return sampleTexture(${Oe}, uv);
        }
      `;return new Ee.GlslLibRoutine(We,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D($e,Oe,Ce){const Be=Ce.unpackedShape,Ue=[Ce.height,Ce.width];if(Ue!=null&&r.ArrayUtil.arraysEqual(Be,Ue)){const fn=`
          float ${$e}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${Ue[1]}.0, ${Ue[0]}.0);
            return sampleTexture(${Oe}, uv);
          }
        `;return new Ee.GlslLibRoutine(fn,["coordinates.sampleTexture"])}const{newShape:We,keptDims:He}=(0,Re.squeezeShape)(Be),Ge=We;if(Ge.length<Be.length){const fn=(0,Me.squeezeInputShape)(Be,Ge),yn=JSON.parse(JSON.stringify(Ce));yn.unpackedShape=fn;const mn=["col","row"],pn=`
          ${this.getUnpackedSamplerFromInput($e,Oe,yn).routineBody}
          float ${$e}(int row, int col) {
            return ${$e}(${(0,Me.getSqueezedParams)(mn,He)});
          }
        `;return new Ee.GlslLibRoutine(pn,["coordinates.sampleTexture"])}const Ye=Ue[1],Je=Ue[0];if(Je===1){const fn=`
          float ${$e}(int row, int col) {
            int offset_${Oe} = coordsToOffset(TexCoords, ${Ye}, ${Je});
            float index = dot(vec3(row, col, offset_${Oe}), vec3(${Be[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${Ye}.0);
            return sampleTexture(${Oe}, uv);
          }
        `;return new Ee.GlslLibRoutine(fn,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(Ye===1){const fn=`
          float ${$e}(int row, int col) {
            int offset_${Oe} = coordsToOffset(TexCoords, ${Ye}, ${Je});
            float index = dot(vec3(row, col, offset_${Oe}), vec3(${Be[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${Je}.0, 0.5);
            return sampleTexture(${Oe}, uv);
          }
        `;return new Ee.GlslLibRoutine(fn,["coordinates.sampleTexture","coordinates.coordsToOffset"])}const Ze=`
        float ${$e}(int row, int col) {
          int index = col * ${Be[1]} + row;
          vec2 uv = uvFromFlat(${Ye}, ${Je}, index);
          return sampleTexture(${Oe}, uv);
        }
      `;return new Ee.GlslLibRoutine(Ze,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D($e,Oe,Ce){const Be=Ce.unpackedShape,Ue=Be[1]*Be[2],We=Be[2],{newShape:He,keptDims:Ge}=(0,Re.squeezeShape)(Be),Ye=He;if(Ye.length<Be.length){const Ze=(0,Me.squeezeInputShape)(Be,Ye),fn=["batch","col","row"],yn=JSON.parse(JSON.stringify(Ce));yn.unpackedShape=Ze;const mn=this.getUnpackedSamplerFromInput($e,Oe,yn),pn=Ge.reverse(),un=`
          ${mn.routineBody}
          float ${$e}(int batch, int row, int col) {
            return ${$e}(${(0,Me.getSqueezedParams)(fn,pn)});
          }
        `;return new Ee.GlslLibRoutine(un,mn.dependencies)}const Je=`
          float ${$e}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${Ue} + col * ${We} + row;
            vec2 uv = uvFromFlat(${Ce.width}, ${Ce.height}, index);
            return sampleTexture(${Oe}, uv);
          }
      `;return new Ee.GlslLibRoutine(Je,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D($e,Oe,Ce){const Be=Ce.unpackedShape,Ue=Be[3],We=Be[2]*Ue,He=`
        float ${$e}(int row, int col, int depth, int depth2) {
          int index = row * ${Be[1]*We} + col * ${We} +
              depth2 * ${Ue} + depth;
          vec2 uv = uvFromFlat(${Ce.width}, ${Ce.height}, index);
          return sampleTexture(${Oe}, uv);
        }
      `;return new Ee.GlslLibRoutine(He,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D($e,Oe,Ce){const Be=Ce.unpackedShape,Ue=Be[4],We=Be[3]*Ue,He=Be[2]*We,Ge=Be[1]*He,{newShape:Ye,keptDims:Je}=(0,Re.squeezeShape)(Be);if(Ye.length<Be.length){const fn=(0,Me.squeezeInputShape)(Be,Ye),yn=["row","col","depth","depth2","depth3"],mn=JSON.parse(JSON.stringify(Ce));mn.unpackedShape=fn;const pn=`
          ${this.getUnpackedSamplerFromInput($e,Oe,mn).routineBody}
          float ${$e}(int row, int col, int depth, int depth2, int depth3) {
            return ${$e}(${(0,Me.getSqueezedParams)(yn,Je)});
          }
        `;return new Ee.GlslLibRoutine(pn,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const Ze=`
        float ${$e}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${Ge} + col * ${He} + depth * ${We} +
          depth3 * ${Ue} + depth2;
          vec2 uv = uvFromFlat(${Ce.width}, ${Ce.height}, index);
          return sampleTexture(${Oe}, uv);
        }
      `;return new Ee.GlslLibRoutine(Ze,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D($e,Oe,Ce){const Be=Ce.unpackedShape,Ue=Be[5],We=Be[4]*Ue,He=Be[3]*We,Ge=Be[2]*He,Ye=Be[1]*Ge,{newShape:Je,keptDims:Ze}=(0,Re.squeezeShape)(Be);if(Je.length<Be.length){const yn=(0,Me.squeezeInputShape)(Be,Je),mn=["row","col","depth","depth2","depth3","depth4"],pn=JSON.parse(JSON.stringify(Ce));pn.unpackedShape=yn;const un=`
            ${this.getUnpackedSamplerFromInput($e,Oe,pn).routineBody}
            float ${$e}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${$e}(${(0,Me.getSqueezedParams)(mn,Ze)});
            }
          `;return new Ee.GlslLibRoutine(un,["coordinates.sampleTexture","coordinates.uvFromFlat"])}const fn=`
          float ${$e}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${Ye} + col * ${Ge} + depth * ${He} +
            depth2 * ${We} + depth3 * ${Ue} + depth4;
            vec2 uv = uvFromFlat(${Ce.width}, ${Ce.height}, index);
            return sampleTexture(${Oe}, uv);
          }
        `;return new Ee.GlslLibRoutine(fn,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){const $e=this.context.outputTextureLayout,Oe=$e.shape.length,Ce=$e.strides,Be=$e.width,Ue=$e.height,We=[];for(let Ge=0;Ge<Oe-1;++Ge)We.push(`
        c[${Ge}] = offset / ${Ce[Ge]};`),We.push(`
        offset -= c[${Ge}] * ${Ce[Ge]};`);We.push(`
        c[${Oe-1}] = offset;`);const He=`
      void toVec(vec2 texCoords, out int c[${Oe}]) {
        int offset = coordsToOffset(texCoords, ${Be}, ${Ue});
        ${We.join("")}
      }
      void toVec(int offset, out int c[${Oe}]) {
        ${We.join("")}
      }
    `;return{toVec:new Ee.GlslLibRoutine(He,["coordinates.coordsToOffset"])}}valueFrom(){const $e={};return this.context.programInfo.inputNames.forEach((Oe,Ce)=>{const Be=this.context.inputTextureLayouts[Ce],Ue=(Be.unpackedShape.length>0?Be.unpackedShape:Be.shape).length;let We=`_${Oe}`;$e[We]=new Ee.GlslLibRoutine(this.getValueFromSingle(Oe,Ue,Be.width,Be.height,!1),[`shapeUtils.indicesToOffset${We}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),We+="_T",$e[We]=new Ee.GlslLibRoutine(this.getValueFromSingle(Oe,Ue,Be.width,Be.height,!0),[`shapeUtils.indicesToOffset${We}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),$e}getValueFromSingle($e,Oe,Ce,Be,Ue){let We=`_${$e}`;return Ue&&(We+="_T"),`
        float ${We}(int m[${Oe}]) {
          int offset = indicesToOffset${We}(m);
          vec2 coords = offsetToCoords(offset, ${Ce}, ${Be});
          float value = getColorAsFloat(${(0,Te.getGlsl)(this.context.glContext.version).texture2D}(${$e}, coords));
          return value;
        }
        `}getPackedValueFrom($e,Oe,Ce,Be,Ue){let We=`_${$e}_Pack`;return Ue&&(We+="_T"),`
        vec4 ${We}(int m[${Oe}]) {
          int offset = indicesToOffset_${$e}(m);
          vec2 coords = offsetToCoords(offset, ${Ce}, ${Be});
          return ${(0,Te.getGlsl)(this.context.glContext.version).texture2D}(${$e}, coords);
        }
        `}}e.CoordsGlslLib=Ve},8520:(n,e)=>{var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TopologicalSortGlslRoutines=e.GlslLibRoutineNode=e.GlslLibRoutine=e.GlslLib=e.GlslContext=e.FunctionType=void 0,(t=e.FunctionType||(e.FunctionType={}))[t.ValueBased=0]="ValueBased",t[t.Positional=1]="Positional",e.GlslContext=class{constructor(r,Ee,Te,Re){this.glContext=r,this.programInfo=Ee,this.inputTextureLayouts=Te,this.outputTextureLayout=Re}},e.GlslLib=class{constructor(r){this.context=r}},e.GlslLibRoutine=class{constructor(r,Ee){this.routineBody=r,this.dependencies=Ee}},e.GlslLibRoutineNode=class{constructor(r,Ee,Te){this.name=r,this.dependencies=Te||[],Ee&&(this.routineBody=Ee)}addDependency(r){r&&this.dependencies.push(r)}},e.TopologicalSortGlslRoutines=class{static returnOrderedNodes(r){if(!r||r.length===0)return[];if(r.length===1)return r;const Ee=new Set,Te=new Set,Re=new Array;return this.createOrderedNodes(r,Ee,Te,Re),Re}static createOrderedNodes(r,Ee,Te,Re){for(let Me=0;Me<r.length;++Me)this.dfsTraverse(r[Me],Ee,Te,Re)}static dfsTraverse(r,Ee,Te,Re){if(!r||Te.has(r.name))return;if(Ee.has(r.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");Ee.add(r.name);const Me=r.dependencies;if(Me&&Me.length>0)for(let Ve=0;Ve<Me.length;++Ve)this.dfsTraverse(Me[Ve],Ee,Te,Re);Re.push(r),Te.add(r.name),Ee.delete(r.name)}}},7341:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EncodingGlslLib=void 0;const r=t(8520);class Ee extends r.GlslLib{constructor(Re){super(Re)}getFunctions(){return Object.assign(Object.assign({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new r.GlslLibRoutine(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new r.GlslLibRoutine(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){const Re=Ee.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new r.GlslLibRoutine(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${Re}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){const Re=Ee.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new r.GlslLibRoutine(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${Re}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){const Re=new ArrayBuffer(4),Me=new Uint32Array(Re),Ve=new Uint8Array(Re);if(Me[0]=3735928559,Ve[0]===239)return!0;if(Ve[0]===222)return!1;throw new Error("unknown endianness")}}e.EncodingGlslLib=Ee},9894:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FragColorGlslLib=void 0;const r=t(8520),Ee=t(5060);class Te extends r.GlslLib{constructor(Me){super(Me)}getFunctions(){return Object.assign(Object.assign({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){const Me=(0,Ee.getGlsl)(this.context.glContext.version);return{setFragColor:new r.GlslLibRoutine(`
        void setFragColor(float value) {
            ${Me.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new r.GlslLibRoutine(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}e.FragColorGlslLib=Te},2848:(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.replaceInlines=void 0;const t=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm;e.replaceInlines=function(r){const Ee={};let Te;for(;(Te=t.exec(r))!==null;){const Re=Te[3].split(",").map(Me=>{const Ve=Me.trim().split(" ");return Ve&&Ve.length===2?{type:Ve[0],name:Ve[1]}:null}).filter(Me=>Me!==null);Ee[Te[2]]={params:Re,body:Te[4]}}for(const Re in Ee){const Me="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;".replace("__FUNC__",Re),Ve=new RegExp(Me,"gm");for(;(Te=Ve.exec(r))!==null;){const De=Te[1],$e=Te[2],Oe=Te[3].split(","),Ce=De?`${De} ${$e};`:"";let Be=Ee[Re].body,Ue="";Ee[Re].params.forEach((He,Ge)=>{He&&(Ue+=`${He.type} ${He.name} = ${Oe[Ge]};
`)}),Be=`${Ue}
 ${Be}`,Be=Be.replace("return",`${$e} = `);const We=`
      ${Ce}
      {
        ${Be}
      }
      `;r=r.replace(Te[0],We)}}return r.replace(t,"")}},8879:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlslPreprocessor=void 0;const r=t(8520),Ee=t(2848),Te=t(5483),Re=t(5060);e.GlslPreprocessor=class{constructor(Me,Ve,De,$e){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new r.GlslContext(Me,Ve,De,$e),Object.keys(Te.glslRegistry).forEach(Ce=>{const Be=new Te.glslRegistry[Ce](this.context);this.libs[Ce]=Be});const Oe=this.glslLibRoutineDependencyGraph;for(const Ce in this.libs){const Be=this.libs[Ce].getFunctions();for(const Ue in Be){const We=Ce+"."+Ue;let He;Oe[We]?(He=Oe[We],He.routineBody=Be[Ue].routineBody):(He=new r.GlslLibRoutineNode(We,Be[Ue].routineBody),Oe[We]=He);const Ge=Be[Ue].dependencies;if(Ge)for(let Ye=0;Ye<Ge.length;++Ye)if(Oe[Ge[Ye]])He.addDependency(Oe[Ge[Ye]]);else{const Je=new r.GlslLibRoutineNode(Ge[Ye]);Oe[Ge[Ye]]=Je,He.addDependency(Je)}}}}preprocess(){const Me=this.context.programInfo;let Ve=Me.shaderSource;return this.context.programInfo.hasMain||(Ve=`${Ve}
      ${(0,Re.getDefaultFragShaderMain)(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),Ve=(0,Ee.replaceInlines)(Ve),`${(0,Re.getFragShaderPreamble)(this.context.glContext.version)}
    ${this.getUniforms(Me.inputNames,Me.variables)}
    ${this.getImports(Ve)}
    ${Ve}`}getImports(Me){const Ve=this.selectGlslLibRoutinesToBeIncluded(Me);if(Ve.length===0)return"";let De="";for(let $e=0;$e<Ve.length;++$e){if(!Ve[$e].routineBody)throw new Error(`Missing body for the Glsl Library routine: ${Ve[$e].name}`);De+=Ve[$e].routineBody+`
`}return De}selectGlslLibRoutinesToBeIncluded(Me){const Ve=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(De=>{const $e=De.split(".")[1];Me.indexOf($e)!==-1&&Ve.push(this.glslLibRoutineDependencyGraph[De])}),r.TopologicalSortGlslRoutines.returnOrderedNodes(Ve)}getUniforms(Me,Ve){const De=[];if(Me)for(const $e of Me)De.push(`uniform sampler2D ${$e};`);if(Ve)for(const $e of Ve)De.push(`uniform ${$e.type} ${$e.name}${$e.arrayLength?`[${$e.arrayLength}]`:""};`);return De.join(`
`)}}},5483:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.glslRegistry=void 0;const r=t(5107),Ee=t(7341),Te=t(9894),Re=t(2655),Me=t(3891);e.glslRegistry={encoding:Ee.EncodingGlslLib,fragcolor:Te.FragColorGlslLib,vec:Me.VecGlslLib,shapeUtils:Re.ShapeUtilsGlslLib,coordinates:r.CoordsGlslLib}},2655:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeUtilsGlslLib=void 0;const r=t(8520);class Ee extends r.GlslLib{constructor(Re){super(Re)}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){const Re=this.context.outputTextureLayout.shape.length,Me={};return this.context.programInfo.inputNames.forEach((Ve,De)=>{const $e=this.context.inputTextureLayouts[De].unpackedShape;if($e.length<=Re){const Oe=$e.length,Ce=Re-Oe,Be=`bcastIndices_${Ve}`;let Ue="";for(let He=0;He<Oe;++He)Ue+=`
          realIndices[${He}] = int( mod(float(bcastedIndices[${Ce+He}]), ${$e[He]}.0) );
          `;const We=`
        void ${Be} (int bcastedIndices[${Re}], out int realIndices[${Oe}]) {
          ${Ue}
        }
        `;Me[Be]=new r.GlslLibRoutine(We)}}),Me}bcastMatmulIndex(){const Re=this.context.outputTextureLayout.shape.length,Me={};return this.context.programInfo.inputNames.forEach((Ve,De)=>{const $e=this.context.inputTextureLayouts[De].shape;if(!($e.length<2||$e.length>Re)){const Oe=$e.length,Ce=Re-Oe,Be=`bcastMatmulIndices_${Ve}`;let Ue="";for(let He=0;He<Oe-2;++He)Ue+=`
          realIndices[${He}] = int( mod(float(bcastedIndices[${Ce+He}]), ${$e[He]}.0) );
          `;const We=`
        void ${Be}(int bcastedIndices[${Re}], out int realIndices[${Oe}]) {
          ${Ue}
          realIndices[${Oe-1}] = bcastedIndices[${Re-1}];
          realIndices[${Oe-2}] = bcastedIndices[${Re-2}];
        }
        `;Me[Be]=new r.GlslLibRoutine(We)}}),Me}indicesToOffset(){const Re={};return this.context.programInfo.inputNames.forEach((Me,Ve)=>{const De=this.context.inputTextureLayouts[Ve].shape,$e=this.context.inputTextureLayouts[Ve].strides,Oe=De.length;let Ce=`indicesToOffset_${Me}`;Re[Ce]=new r.GlslLibRoutine(Ee.indexToOffsetSingle(Ce,Oe,$e)),Ce=`indicesToOffset_${Me}_T`,Re[Ce]=new r.GlslLibRoutine(Ee.indexToOffsetSingle(Ce,Oe,$e.slice().reverse()))}),Re}static indexToOffsetSingle(Re,Me,Ve){let De="";for(let $e=Me-1;$e>=0;--$e)De+=`
        offset += indices[${$e}] * ${Ve[$e]};
        `;return`
      int ${Re}(int indices[${Me}]) {
        int offset = 0;
        ${De}
        return offset;
      }
      `}offsetToIndices(){const Re={};return this.context.programInfo.inputNames.forEach((Me,Ve)=>{const De=this.context.inputTextureLayouts[Ve].shape,$e=this.context.inputTextureLayouts[Ve].strides,Oe=De.length;let Ce=`offsetToIndices_${Me}`;Re[Ce]=new r.GlslLibRoutine(Ee.offsetToIndicesSingle(Ce,Oe,$e)),Ce=`offsetToIndices_${Me}_T`,Re[Ce]=new r.GlslLibRoutine(Ee.offsetToIndicesSingle(Ce,Oe,$e.slice().reverse()))}),Re}static offsetToIndicesSingle(Re,Me,Ve){const De=[];for(let $e=0;$e<Me-1;++$e)De.push(`
      indices[${$e}] = offset / ${Ve[$e]};`),De.push(`
        offset -= indices[${$e}] * ${Ve[$e]};`);return De.push(`
      indices[${Me-1}] = offset;`),`
      void ${Re}(int offset, out int indices[${Me}]) {
        ${De.join("")}
      }
      `}incrementIndices(){const Re={};return this.context.programInfo.inputNames.forEach((Me,Ve)=>{const De=this.context.inputTextureLayouts[Ve].shape,$e=De.length,Oe=`incrementIndices_${Me}`;let Ce="";for(let Ue=0;Ue<$e;++Ue)Ce+=`
        shape[${Ue}] = ${De[Ue]};`;const Be=`
        void ${Oe}(int axis, out int indices[${$e}]) {
          int shape[${$e}];
          ${Ce};
          for(int i = ${$e} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;Re[Oe]=new r.GlslLibRoutine(Be)}),Re}}e.ShapeUtilsGlslLib=Ee},5060:(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultFragShaderMain=e.getFragShaderPreamble=e.getVertexShaderSource=e.getGlsl=void 0;const t={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},r={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"};function Ee(Te){return Te===1?t:r}e.getGlsl=Ee,e.getVertexShaderSource=function(Te){const Re=Ee(Te);return`${Re.version}
      precision highp float;
      ${Re.attribute} vec3 position;
      ${Re.attribute} vec2 textureCoord;

      ${Re.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`},e.getFragShaderPreamble=function(Te){const Re=Ee(Te);return`${Re.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${Re.varyingFrag} vec2 TexCoords;
    ${Re.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `},e.getDefaultFragShaderMain=function(Te,Re){return`
  void main() {
    int indices[${Re}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${Ee(Te).output} = result;
  }
  `}},3891:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VecGlslLib=void 0;const r=t(8520);class Ee extends r.GlslLib{constructor(Re){super(Re)}getCustomTypes(){return{}}getFunctions(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){const Re=this.context.outputTextureLayout.shape.length,Me={add:"+=",sub:"-=",mul:"*=",div:"/="},Ve={};for(const De in Me){const $e=`${De}Vec`;let Oe="";for(let Be=0;Be<Re;++Be)Oe+=`
          dest[${Be}] ${Me[De]} src[${Be}];
          `;const Ce=`
        void ${$e}(int src[${Re}], out int dest[${Re}]) {
          ${Oe}
        }
        `;Ve[$e]=new r.GlslLibRoutine(Ce)}return Ve}copyVec(){const Re=this.context.outputTextureLayout.shape.length;let Me="";for(let De=0;De<Re;++De)Me+=`
        dest[${De}] = src[${De}];
        `;const Ve=`
      void copyVec(int src[${Re}], out int dest[${Re}]) {
        ${Me}
      }
      `;return{copyVec:new r.GlslLibRoutine(Ve)}}setVecItem(){const Re=this.context.outputTextureLayout.shape.length;let Me=`
        if(index < 0)
            index =${Re} + index;
        if (index == 0)
            m[0] = value;
        `;for(let De=1;De<Re-1;++De)Me+=`
        else if (index == ${De})
            m[${De}] = value;
            `;Me+=`
        else
            m[${Re-1}] = value;
        `;const Ve=`
      void setVecItem(out int m[${Re}], int index, int value) {
        ${Me}
      }
        `;return{setVecItem:new r.GlslLibRoutine(Ve)}}getVecItem(){const Re=this.context.outputTextureLayout.shape.length;let Me=`
        if(index < 0)
            index = ${Re} + index;
        if (index == 0)
            return m[0];
      `;for(let De=1;De<Re-1;++De)Me+=`
        else if (index == ${De})
            return m[${De}];
      `;Me+=`
        else
            return m[${Re-1}];
        `;const Ve=`
      int getVecItem(int m[${Re}], int index) {
        ${Me}
      }
    `;return{getVecItem:new r.GlslLibRoutine(Ve)}}}e.VecGlslLib=Ee},8316:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLInferenceHandler=void 0;const r=t(6231),Ee=t(9162),Te=t(2517),Re=t(2403),Me=t(7019),Ve=t(8710),De=t(5611),$e=t(4057),Oe=t(2039);e.WebGLInferenceHandler=class{constructor(Ce){this.session=Ce,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(Ce,Be){return(0,$e.calculateTextureWidthAndHeight)(this.session.layoutStrategy,Ce,Be)}executeProgram(Ce,Be){if(Be.length<Ce.inputNames.length)throw new Error(`Input size mustn't be less than ${Ce.inputNames.length}.`);if(Ce.inputNames.length!==Ce.inputTypes.length)throw new Error("input names size does not match input types");const Ue=[];for(let Ze=0;Ze<Ce.inputNames.length;++Ze)Ue[Ze]=this.getOrCreateTextureData(Be[Ze],Ce.inputTypes[Ze]);const We=((Ze,fn)=>{const yn=fn.map(pn=>`${pn.unpackedShape.join(",")};${pn.width}x${pn.height}`).join("_");let mn=Ze.name;return Ze.cacheHint&&(mn+="["+Ze.cacheHint+"]"),mn+=":"+yn,mn})(Ce,Ue);let He=this.session.programManager.getArtifact(We);const Ge=He?He.programInfo:typeof Ce.get=="function"?Ce.get():Ce,Ye=(0,$e.createTextureLayoutFromTextureType)(this.session.layoutStrategy,Ge.output.dims,Ge.output.textureType),Je=this.createTextureData(Ye,Ge.output.type);return He||(He=this.session.programManager.build(Ge,Ue,Je),this.session.programManager.setArtifact(We,He)),this.runProgram(He,Ue,Je),Je}run(Ce,Be){return this.executeProgram(Ce,Be).tensor}runProgram(Ce,Be,Ue){for(let We=0;We<Be.length;++We)if(!!Be[We].isPacked!=(Ce.programInfo.inputTypes[We]===Oe.TextureType.packed))throw new Error(`input[${We}] property packed inconsistent`);if(!!Ue.isPacked!=(Ce.programInfo.output.textureType===Oe.TextureType.packed))throw new Error("output property packed inconsistent");this.session.programManager.run(Ce,Be,Ue)}getOrCreateTextureData(Ce,Be){let Ue=this.getTextureData(Ce.dataId,Be===Oe.TextureType.packed);if(!Ue&&(Ue=this.getTextureData(Ce.dataId,Be!==Oe.TextureType.packed),Ue))return Be===Oe.TextureType.packed?this.pack(Ue):this.unpack(Ue);if(!Ue){const We=(0,$e.createTextureLayoutFromTextureType)(this.session.layoutStrategy,Ce.dims,Be);if(Be===Oe.TextureType.packedLastDimension){const Ye=Ce.dims;if(Ye.length===4){const Je=[Ye[0],Math.ceil(Ye[1]*Ye[2]*Ye[3]/4)],Ze=(0,$e.createTextureLayoutFromTextureType)(this.session.layoutStrategy,Je,Be);let fn=Ce.numberData;if(Ye[1]*Ye[2]*Ye[3]%4!=0){const yn=Ye[0],mn=Ye[1]*Ye[2]*Ye[3],pn=Math.ceil(mn*1/4)*4;fn=new Float32Array(yn*pn);for(let un=0;un<yn;++un){const bn=un*mn,gn=un*pn+un%1*mn;fn.set(Ce.numberData.subarray(bn,bn+mn),gn)}}return this.createTextureData(Ze,Ce.type,fn,Ce,1)}}if(Be===Oe.TextureType.packed){const He=(0,$e.createTextureLayoutFromShape)(this.session.layoutStrategy,Ce.dims,1,[],{reverseWH:!0}),Ge=this.createTextureData(He,Ce.type,Ce.numberData,Ce,1);Ue=this.pack(Ge)}else Ue=this.createTextureData(We,Ce.type,Ce.numberData,Ce,1)}return Ue}createTextureDataFromLayoutBindTensor(Ce,Be,Ue,We){return this.createTextureData(Ce,Be,Ue,We,1)}createTextureData(Ce,Be,Ue,We,He){r.Logger.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(Ce)}]`);const Ge=this.session.textureManager.createTextureFromLayout(Be,Ce,Ue,He);return this.createTextureDataFromTexture(Ce,Be,Ge,We)}reshapeUnpacked(Ce,Be){const Ue=this.getOrCreateTextureData(Ce,Oe.TextureType.unpacked),We={channels:Ue.channels,height:Ue.height,width:Ue.width,shape:Be.length!==0?Be:[1],strides:Te.ShapeUtil.computeStrides(Be),unpackedShape:Be};return this.createTextureDataFromTexture(We,Ce.type,Ue.texture).tensor}reshapePacked(Ce,Be){const Ue=this.getOrCreateTextureData(Ce,Oe.TextureType.packed);if((0,Me.isReshapeCheap)(Ce.dims,Be)){const Je={channels:Ue.channels,height:Ue.height,width:Ue.width,shape:Be.length!==0?Be:[1],strides:Te.ShapeUtil.computeStrides(Be),unpackedShape:Be,isPacked:!0};return this.createTextureDataFromTexture(Je,Ce.type,Ue.texture).tensor}const We=(0,Me.processDims3D)(Ce.dims),He=(0,Me.processDims3D)(Be),Ge=this.reshapePacked(Ce,We),Ye=this.run((0,Me.createPackedReshape3DProgramInfoLoader)(this,Ge,He),[Ge]);return this.reshapePacked(Ye,Be)}cast(Ce,Be){const Ue=this.getOrCreateTextureData(Ce,Oe.TextureType.unpacked);return this.createTextureDataFromTexture(Ue,Be,Ue.texture).tensor}createTextureDataFromTexture(Ce,Be,Ue,We,He){const Ge=Object.assign(Object.assign({},Ce),{tensor:We||new Ee.Tensor(Ce.unpackedShape,Be,Ye=>this.readTexture(Ge),async Ye=>this.readTextureAsync(Ge),void 0,He),texture:Ue});return this.setTextureData(Ge.tensor.dataId,Ge,Ce.isPacked),Ge}getTextureData(Ce,Be=!1){return this.session.isInitializer(Ce)?this.session.getTextureData(Ce,Be):Be?this.packedTextureDataCache.get(Ce):this.unpackedTextureDataCache.get(Ce)}setTextureData(Ce,Be,Ue=!1){this.session.isInitializer(Ce)?this.session.setTextureData(Ce,Be,Ue):(Ue?this.packedTextureDataCache:this.unpackedTextureDataCache).set(Ce,Be)}isTextureLayoutCached(Ce,Be=!1){return!!this.getTextureData(Ce.dataId,Be)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(Ce=>this.session.textureManager.releaseTexture(Ce)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(Ce=>this.session.textureManager.releaseTexture(Ce)),this.unpackedTextureDataCache=new Map}readTexture(Ce){return Ce.isPacked?this.readTexture(this.unpack(Ce)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(Ce,Ce.tensor.type,Ce.channels):this.session.textureManager.readUint8TextureAsFloat((0,Ve.encodeAsUint8)(this,Ce))}async readTextureAsync(Ce){return Ce.isPacked?this.readTextureAsync(this.unpack(Ce)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(Ce,Ce.tensor.type,Ce.channels):this.session.textureManager.readUint8TextureAsFloat((0,Ve.encodeAsUint8)(this,Ce))}pack(Ce){return this.executeProgram((0,Re.createPackProgramInfoLoader)(this,Ce.tensor),[Ce.tensor])}unpack(Ce){return this.executeProgram((0,De.createUnpackProgramInfoLoader)(this,Ce.tensor),[Ce.tensor])}}},1640:function(n,e,t){var r=this&&this.__createBinding||(Object.create?function(Wn,On,$n,kn){kn===void 0&&(kn=$n);var In=Object.getOwnPropertyDescriptor(On,$n);In&&!("get"in In?!On.__esModule:In.writable||In.configurable)||(In={enumerable:!0,get:function(){return On[$n]}}),Object.defineProperty(Wn,kn,In)}:function(Wn,On,$n,kn){kn===void 0&&(kn=$n),Wn[kn]=On[$n]}),Ee=this&&this.__setModuleDefault||(Object.create?function(Wn,On){Object.defineProperty(Wn,"default",{enumerable:!0,value:On})}:function(Wn,On){Wn.default=On}),Te=this&&this.__importStar||function(Wn){if(Wn&&Wn.__esModule)return Wn;var On={};if(Wn!=null)for(var $n in Wn)$n!=="default"&&Object.prototype.hasOwnProperty.call(Wn,$n)&&r(On,Wn,$n);return Ee(On,Wn),On};Object.defineProperty(e,"__esModule",{value:!0}),e.WEBGL_OP_RESOLVE_RULES=void 0;const Re=t(2898),Me=Te(t(7839)),Ve=t(4196),De=t(2069),$e=t(8138),Oe=t(9663),Ce=t(5193),Be=t(7992),Ue=t(1253),We=t(4776),He=t(6572),Ge=t(3346),Ye=t(5623),Je=t(2870),Ze=t(2143),fn=t(4939),yn=t(718),mn=t(2268),pn=t(8117),un=t(2278),bn=t(5524),gn=t(5975),xn=t(3933),En=t(6558),Pn=t(5723),Ln=t(3738),Cn=Te(t(4909)),Dn=t(8428),Un=t(9793);e.WEBGL_OP_RESOLVE_RULES=[["Abs","","6+",Cn.abs],["Acos","","7+",Cn.acos],["Add","","7+",Me.add],["And","","7+",Me.and],["Asin","","7+",Cn.asin],["Atan","","7+",Cn.atan],["AveragePool","","7+",Ze.averagePool,Ze.parseAveragePoolAttributes],["BatchNormalization","","7+",Re.batchNormalization,Re.parseBatchNormalizationAttributes],["Cast","","6+",Ve.cast,Ve.parseCastAttributes],["Ceil","","6+",Cn.ceil],["Clip","","6-10",Cn.clip,Cn.parseClipAttributes],["Clip","","11+",Cn.clipV11],["Concat","","4+",De.concat,De.parseConcatAttributes],["Conv","","1+",$e.conv,$e.parseConvAttributes],["ConvTranspose","","1+",Oe.convTranspose,Oe.parseConvTransposeAttributes],["Cos","","7+",Cn.cos],["Div","","7+",Me.div],["Dropout","","7+",Cn.identity],["DepthToSpace","","1+",Ce.depthToSpace,Ce.parseDepthToSpaceAttributes],["Equal","","7+",Me.equal],["Elu","","6+",Cn.elu,Cn.parseEluAttributes],["Exp","","6+",Cn.exp],["Flatten","","1+",Be.flatten,Be.parseFlattenAttributes],["Floor","","6+",Cn.floor],["FusedConv","com.microsoft","1+",$e.conv,$e.parseConvAttributes],["Gather","","1+",Ue.gather,Ue.parseGatherAttributes],["Gemm","","7-10",We.gemm,We.parseGemmAttributesV7],["Gemm","","11+",We.gemm,We.parseGemmAttributesV11],["GlobalAveragePool","","1+",Ze.globalAveragePool,Ze.parseGlobalAveragePoolAttributes],["GlobalMaxPool","","1+",Ze.globalMaxPool],["Greater","","7+",Me.greater],["Identity","","1+",Cn.identity],["ImageScaler","","1+",He.imageScaler,He.parseImageScalerAttributes],["InstanceNormalization","","6+",Ge.instanceNormalization,Ge.parseInstanceNormalizationAttributes],["LeakyRelu","","6+",Cn.leakyRelu,Cn.parseLeakyReluAttributes],["Less","","7+",Me.less],["Log","","6+",Cn.log],["MatMul","","1+",Ye.matMul,Ye.parseMatMulAttributes],["MaxPool","","1+",Ze.maxPool,Ze.parseMaxPoolAttributes],["Mul","","7+",Me.mul],["Neg","","6+",Cn.neg],["Not","","1+",Cn.not],["Or","","7+",Me.or],["Pad","","2-10",Je.padV2,Je.parsePadAttributesV2],["Pad","","11+",Je.padV11,Je.parsePadAttributesV11],["Pow","","7+",Me.pow],["PRelu","","7+",Me.pRelu],["ReduceLogSum","","1+",fn.reduceLogSum,fn.parseReduceAttributes],["ReduceMax","","1+",fn.reduceMax,fn.parseReduceAttributes],["ReduceMean","","1+",fn.reduceMean,fn.parseReduceAttributes],["ReduceMin","","1+",fn.reduceMin,fn.parseReduceAttributes],["ReduceProd","","1+",fn.reduceProd,fn.parseReduceAttributes],["ReduceSum","","1-12",fn.reduceSum,fn.parseReduceAttributes],["ReduceSumSquare","","1+",fn.reduceLogSumSquare,fn.parseReduceAttributes],["Relu","","6+",Cn.relu],["Reshape","","5+",yn.reshape],["Resize","","10",mn.resize,mn.parseResizeAttributesV10],["Resize","","11+",mn.resize,mn.parseResizeAttributesV11],["Shape","","1+",pn.shape],["Sigmoid","","6+",Cn.sigmoid],["Sin","","7+",Cn.sin],["Slice","","10+",un.sliceV10],["Slice","","1-9",un.slice,un.parseSliceAttributes],["Softmax","","1-12",bn.softmax,bn.parseSoftmaxAttributes],["Softmax","","13+",bn.softmaxV13,bn.parseSoftmaxAttributesV13],["Split","","2-12",gn.split,gn.parseSplitAttributes],["Sqrt","","6+",Cn.sqrt],["Squeeze","","1-12",xn.squeeze,xn.parseSqueezeAttributes],["Squeeze","","13+",xn.squeezeV13],["Sub","","7+",Me.sub],["Sum","","6+",En.sum],["Tan","","7+",Cn.tan],["Tanh","","6+",Cn.tanh],["Tile","","6+",Pn.tile],["Transpose","","1+",Ln.transpose,Ln.parseTransposeAttributes],["Upsample","","7-8",Un.upsample,Un.parseUpsampleAttributesV7],["Upsample","","9",Un.upsample,Un.parseUpsampleAttributesV9],["Unsqueeze","","1-12",Dn.unsqueeze,Dn.parseUnsqueezeAttributes],["Unsqueeze","","13+",Dn.unsqueezeV13],["Xor","","7+",Me.xor]]},2898:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseBatchNormalizationAttributes=e.batchNormalization=void 0;const r=t(246),Ee=t(5060),Te=t(2039),Re={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[Te.TextureType.unpacked,Te.TextureType.unpacked,Te.TextureType.unpacked,Te.TextureType.unpacked,Te.TextureType.unpacked]};e.batchNormalization=(De,$e,Oe)=>(Ve($e),[De.run(Object.assign(Object.assign({},Re),{cacheHint:Oe.cacheKey,get:()=>Me(De,$e,Oe)}),$e)]),e.parseBatchNormalizationAttributes=De=>{const $e=De.attributes.getFloat("epsilon",1e-5),Oe=De.attributes.getFloat("momentum",.9),Ce=De.attributes.getInt("spatial",1);return(0,r.createAttributeWithCacheKey)({epsilon:$e,momentum:Oe,spatial:Ce})};const Me=(De,$e,Oe)=>{const Ce=(0,Ee.getGlsl)(De.session.backend.glContext.version),Be=$e[0].dims.length,[Ue,We]=De.calculateTextureWidthAndHeight($e[1].dims,Te.TextureType.unpacked),He=`
  float process(int[${Be}] indices) {
    vec2 position = offsetToCoords(indices[1], ${Ue}, ${We});
    float scale = getColorAsFloat(${Ce.texture2D}(Scale, position));
    float mean = getColorAsFloat(${Ce.texture2D}(Mean, position));
    float variance = getColorAsFloat(${Ce.texture2D}(Variance, position));
    float b = getColorAsFloat(${Ce.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${Oe.epsilon})) ) + b;
  }`;return Object.assign(Object.assign({},Re),{output:{dims:$e[0].dims,type:$e[0].type,textureType:Te.TextureType.unpacked},shaderSource:He})},Ve=De=>{if(!De||De.length!==5)throw new Error("BatchNormalization requires 5 inputs.");const $e=De[0],Oe=De[1],Ce=De[2],Be=De[3],Ue=De[4];if($e.dims.length<3||Oe.dims.length!==1||Ce.dims.length!==1||Be.dims.length!==1||Ue.dims.length!==1)throw new Error("invalid input shape.");if(Oe.dims[0]!==$e.dims[1]||Ce.dims[0]!==$e.dims[1]||Be.dims[0]!==$e.dims[1]||Ue.dims[0]!==$e.dims[1])throw new Error("invalid input shape.");if($e.type!=="float32"&&$e.type!=="float64"||Oe.type!=="float32"&&Oe.type!=="float64"||Ce.type!=="float32"&&Ce.type!=="float64"||Be.type!=="float32"&&Be.type!=="float64"||Ue.type!=="float32"&&Ue.type!=="float64")throw new Error("invalid input tensor types.")}},7839:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.xor=e.sub=e.pRelu=e.pow=e.or=e.mul=e.less=e.greater=e.equal=e.div=e.and=e.add=e.glslPRelu=e.glslPow=e.glslXor=e.glslOr=e.glslAnd=e.glslLess=e.glslGreater=e.glslEqual=e.glslSub=e.glslMul=e.glslDiv=e.glslAdd=void 0;const r=t(2517),Ee=t(8520),Te=t(5060),Re=t(2039);function Me(){const fn="add_";return{body:`
  float ${fn}(float a, float b) {
    return a + b;
  }
  vec4 ${fn}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:fn,type:Ee.FunctionType.ValueBased}}function Ve(){const fn="div_";return{body:`
  float ${fn}(float a, float b) {
    return a / b;
  }
  vec4 ${fn}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:fn,type:Ee.FunctionType.ValueBased}}function De(){const fn="mul_";return{body:`
  float ${fn}(float a, float b) {
    return a * b;
  }
  vec4 ${fn}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:fn,type:Ee.FunctionType.ValueBased}}function $e(){const fn="sub_";return{body:`
  float ${fn}(float a, float b) {
    return a - b;
  }
  vec4 ${fn}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:fn,type:Ee.FunctionType.ValueBased}}function Oe(){const fn="equal_";return{body:`
  float ${fn}(float a, float b) {
    return float(a == b);
  }
  vec4 ${fn}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:fn,type:Ee.FunctionType.ValueBased}}function Ce(){const fn="greater_";return{body:`
  float ${fn}(float a, float b) {
    return float(a > b);
  }
  vec4 ${fn}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:fn,type:Ee.FunctionType.ValueBased}}function Be(){const fn="less_";return{body:`
  float ${fn}(float a, float b) {
    return float(a < b);
  }
  vec4 ${fn}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:fn,type:Ee.FunctionType.ValueBased}}function Ue(){const fn="and_";return{body:`
  float ${fn}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${fn}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:fn,type:Ee.FunctionType.ValueBased}}function We(){return{body:`
  float or_(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 or_(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:"or_",type:Ee.FunctionType.ValueBased}}function He(){const fn="xor_";return{body:`
  float ${fn}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${fn}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:fn,type:Ee.FunctionType.ValueBased}}function Ge(){return function(fn){const yn=`${fn}_`;return{body:`
  float ${yn}(float a, float b) {
    return ${fn}(a, b);
  }
  vec4 ${yn}(vec4 v1, vec4 v2) {
    return ${fn}(v1, v2);
  }
  `,name:yn,type:Ee.FunctionType.ValueBased}}("pow")}function Ye(){const fn="prelu_";return{body:`
  float ${fn}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${fn}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:fn,type:Ee.FunctionType.ValueBased}}e.glslAdd=Me,e.glslDiv=Ve,e.glslMul=De,e.glslSub=$e,e.glslEqual=Oe,e.glslGreater=Ce,e.glslLess=Be,e.glslAnd=Ue,e.glslOr=We,e.glslXor=He,e.glslPow=Ge,e.glslPRelu=Ye;const Je=(fn,yn,mn,pn=yn[0].type,un)=>{const bn=fn.session.pack?Re.TextureType.packed:Re.TextureType.unpacked;return{name:mn.name,inputNames:["A","B"],inputTypes:[bn,bn],cacheHint:un,get:()=>Ze(fn,yn,mn,pn)}},Ze=(fn,yn,mn,pn=yn[0].type)=>{const un=fn.session.pack?Re.TextureType.packed:Re.TextureType.unpacked,bn=!r.ShapeUtil.areEqual(yn[0].dims,yn[1].dims);let gn=yn[0].dims;const xn=fn.session.pack;if(bn){const Ln=r.BroadcastUtil.calcShape(yn[0].dims,yn[1].dims,!1);if(!Ln)throw new Error("Can't perform binary op on the given tensors");gn=Ln;const Cn=gn.length,Dn=yn[0].dims.length!==0?yn[0].dims.length:1,Un=yn[1].dims.length!==0?yn[1].dims.length:1,Wn=yn[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",On=yn[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",$n=(0,Te.getGlsl)(fn.session.backend.glContext.version),kn=xn?`
      ${mn.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${mn.name}(a, b);
        ${$n.output} = result;
      }`:`
      ${mn.body}
      float process(int indices[${Cn}]) {
        int aindices[${Dn}];
        int bindices[${Un}];
        ${Wn}
        ${On}
        return ${mn.name}(_A(aindices), _B(bindices));
      }`;return{name:mn.name,inputNames:["A","B"],inputTypes:[un,un],output:{dims:gn,type:pn,textureType:un},shaderSource:kn,hasMain:xn}}const En=(0,Te.getGlsl)(fn.session.backend.glContext.version),Pn=`
    ${mn.body}
    void main() {
      vec4 v1 = ${En.texture2D}(A, TexCoords);
      vec4 v2 = ${En.texture2D}(B, TexCoords);
      vec4 result = ${mn.name}(v1, v2);
      ${En.output} = result;
    }
    `;return{name:mn.name,inputNames:["A","B"],inputTypes:[un,un],output:{dims:yn[0].dims,type:pn,textureType:un},shaderSource:Pn,hasMain:!0}};e.add=(fn,yn)=>[fn.run(Je(fn,yn,Me()),yn)],e.and=(fn,yn)=>[fn.run(Je(fn,yn,Ue(),"bool"),yn)],e.div=(fn,yn)=>[fn.run(Je(fn,yn,Ve()),yn)],e.equal=(fn,yn)=>[fn.run(Je(fn,yn,Oe(),"bool"),yn)],e.greater=(fn,yn)=>[fn.run(Je(fn,yn,Ce(),"bool"),yn)],e.less=(fn,yn)=>[fn.run(Je(fn,yn,Be(),"bool"),yn)],e.mul=(fn,yn)=>[fn.run(Je(fn,yn,De()),yn)],e.or=(fn,yn)=>[fn.run(Je(fn,yn,We(),"bool"),yn)],e.pow=(fn,yn)=>[fn.run(Je(fn,yn,Ge()),yn)],e.pRelu=(fn,yn)=>[fn.run(Je(fn,yn,Ye()),yn)],e.sub=(fn,yn)=>[fn.run(Je(fn,yn,$e()),yn)],e.xor=(fn,yn)=>[fn.run(Je(fn,yn,He(),"bool"),yn)]},4196:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseCastAttributes=e.cast=void 0;const r=t(2517);e.cast=(Te,Re,Me)=>(Ee(Re),[Te.cast(Re[0],Me)]),e.parseCastAttributes=Te=>r.ProtoUtil.tensorDataTypeFromProto(Te.attributes.getInt("to"));const Ee=Te=>{if(!Te||Te.length!==1)throw new Error("Cast requires 1 input.");if(Te[0].type==="string")throw new Error("Invalid input type.")}},1163:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedConcatProgramInfoLoader=void 0;const r=t(5060),Ee=t(2039),Te=t(9390),Re=t(2827);e.createPackedConcatProgramInfoLoader=(Ve,De,$e)=>{const Oe=(Ce=De.length,Be=$e.cacheKey,{name:"Concat (packed)",inputNames:Array.from({length:Ce},(Ue,We)=>`X${We}`),inputTypes:Array(Ce).fill(Ee.TextureType.packed),cacheHint:Be});var Ce,Be;return Object.assign(Object.assign({},Oe),{get:()=>((Ue,We,He,Ge)=>{const Ye=He[0].dims.slice();if(Ge>=Ye.length||Ge<-1*Ye.length)throw new Error("axis specified for concat doesn't match input dimensionality");Ge<0&&(Ge=Ye.length+Ge);const Je=Ye.slice(0);for(let Wn=1;Wn<He.length;Wn++){const On=He[Wn].dims.slice();for(let $n=0;$n<Ye.length;$n++)if($n===Ge)Je[Ge]+=On[$n];else if(Ye[$n]!==On[$n])throw new Error("non concat dimensions must match")}const Ze=Je.length,fn=(0,Re.getChannels)("coords",Ze),yn=(0,Te.getCoordsDataType)(Ze),mn=(0,Re.unpackFromChannel)(),pn=He.map(Wn=>Wn.dims),un=(0,Te.getGlChannels)(Ze),bn=new Array(pn.length-1);bn[0]=pn[0][Ge];for(let Wn=1;Wn<bn.length;Wn++)bn[Wn]=bn[Wn-1]+pn[Wn][Ge];const gn=un[Ge],xn=un.slice(-2),En=un.join();let Pn=`if (${gn} < ${bn[0]}) {
        return getChannel(
            getX0(${En}), vec2(${xn.join()}));
        }`;for(let Wn=1;Wn<bn.length;Wn++){const On=bn[Wn-1];Pn+=`
            if (${gn} < ${bn[Wn]}  && ${gn} >= ${bn[Wn-1]}) {
              return getChannel(
                getX${Wn}(${Me(un,gn,On)}),
                vec2(${Me(xn,gn,On)}));
            }`}const Ln=bn.length,Cn=bn[bn.length-1];Pn+=`
            return getChannel(
              getX${Ln}(${Me(un,gn,Cn)}),
              vec2(${Me(xn,gn,Cn)}));`;const Dn=(0,r.getGlsl)(Ue.session.backend.glContext.version),Un=`
          ${mn}
          float getValue(${un.map(Wn=>"int "+Wn)}) {
            ${Pn}
          }

          void main() {
            ${yn} coords = getOutputCoords();
            int lastDim = coords.${un[Ze-1]};
            coords.${un[Ze-1]} = coords.${un[Ze-2]};
            coords.${un[Ze-2]} = lastDim;

            vec4 result = vec4(getValue(${fn}), 0., 0., 0.);

            ${fn[Ze-1]} = ${fn[Ze-1]} + 1;
            if (${fn[Ze-1]} < ${Je[Ze-1]}) {
              result.g = getValue(${fn});
            }

            ${fn[Ze-2]} = ${fn[Ze-2]} + 1;
            if (${fn[Ze-2]} < ${Je[Ze-2]}) {
              result.a = getValue(${fn});
            }

            ${fn[Ze-1]} = ${fn[Ze-1]} - 1;
            if (${fn[Ze-2]} < ${Je[Ze-2]} &&
                ${fn[Ze-1]} < ${Je[Ze-1]}) {
              result.b = getValue(${fn});
            }
            ${Dn.output} = result;
          }
        `;return Object.assign(Object.assign({},We),{output:{dims:Je,type:He[0].type,textureType:Ee.TextureType.packed},shaderSource:Un,hasMain:!0})})(Ve,Oe,De,$e.axis)})};const Me=(Ve,De,$e)=>{const Oe=Ve.indexOf(De);return Ve.map((Ce,Be)=>Be===Oe?`${Ce} - ${$e}`:Ce).join()}},2069:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConcatAttributes=e.concat=void 0;const r=t(246),Ee=t(2039),Te=t(1163);e.concat=(Ce,Be,Ue)=>(Oe(Be),Ce.session.pack&&Be[0].dims.length>1?[Ce.run((0,Te.createPackedConcatProgramInfoLoader)(Ce,Be,Ue),Be)]:[Ce.run(Re(Ce,Be,Ue),Be)]);const Re=(Ce,Be,Ue)=>{const We=(He=Be.length,Ge=Ue.cacheKey,{name:"Concat",inputNames:Array.from({length:He},(Ye,Je)=>`X${Je}`),inputTypes:Array(He).fill(Ee.TextureType.unpacked),cacheHint:Ge});var He,Ge;return Object.assign(Object.assign({},We),{get:()=>((Ye,Je,Ze,fn)=>{const yn=Ze[0].dims.slice();if(fn>=yn.length||fn<-1*yn.length)throw new Error("axis specified for concat doesn't match input dimensionality");fn<0&&(fn=yn.length+fn);const mn=yn.slice(0);for(let En=1;En<Ze.length;En++){const Pn=Ze[En].dims.slice();for(let Ln=0;Ln<yn.length;Ln++)if(Ln===fn)mn[fn]+=Pn[Ln];else if(yn[Ln]!==Pn[Ln])throw new Error("non concat dimensions must match")}const pn=mn.length,un=new Array(Ze.length);let bn=0;for(let En=0;En<un.length;++En)bn+=Ze[En].dims[fn],un[En]=bn;let gn="";gn=Ze.length<5?Me(un):Ve(un);const xn=`
        ${De(Ze.length,pn)}
        ${$e(un)}
        ${gn}
        float process(int indices[${pn}]) {
          int textureIndex = getTextureWhereDataResides (indices[${fn}]);

          if(textureIndex != 0) {
            indices[${fn}] = indices[${fn}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return Object.assign(Object.assign({},Je),{output:{dims:mn,type:Ze[0].type,textureType:Ee.TextureType.unpacked},shaderSource:xn})})(0,We,Be,Ue.axis)})},Me=Ce=>`int getTextureWhereDataResides(int index) {
      ${Ce.map((Be,Ue)=>`if(index<${Be}) {return ${Ue};}
`).join("")}
    }`,Ve=Ce=>Me(Ce),De=(Ce,Be)=>{const Ue=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${Be}]) {`];for(let We=0;We<Ce;++We)We===0?Ue.push(`	if (textureIndex == ${We}) { return _X${We}(indices); }`):We===Ce-1?Ue.push(`	else { return _X${We}(indices); }`):Ue.push(`	else if (textureIndex == ${We}) { return _X${We}(indices); }`);return Ue.push("	}"),Ue.join(`
`)},$e=Ce=>{const Be=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let Ue=0;Ue<Ce.length;++Ue)Ue===0?Be.push(`	if (index == ${Ue}) { return ${Ce[Ue]}; }`):Ue===Ce.length-1?Be.push(`	else { return ${Ce[Ue]}; }`):Be.push(`	else if (index == ${Ue}) { return ${Ce[Ue]}; }`);return Be.push("	}"),Be.join(`
`)};e.parseConcatAttributes=Ce=>(0,r.createAttributeWithCacheKey)({axis:Ce.attributes.getInt("axis")});const Oe=Ce=>{if(!Ce||Ce.length<1)throw new Error("too few inputs");const Be=Ce[0].type,Ue=Ce[0].dims.length;if(Be==="string")throw new Error("string tensor is not supported yet");for(const We of Ce){if(We.type!==Be)throw new Error("input tensors should be one type");if(We.dims.length!==Ue)throw new Error("input tensors should have the same shape")}}},4770:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackedGroupedConvProgramInfoLoader=void 0;const r=t(6231),Ee=t(5060),Te=t(2039),Re=t(8138),Me=t(2823);e.createUnpackedGroupedConvProgramInfoLoader=(Ve,De,$e)=>{const Oe=(Ce=De.length>2,Be=$e.cacheKey,{name:"GroupedConv",inputNames:Ce?["X","W","Bias"]:["X","W"],inputTypes:Ce?[Te.TextureType.unpacked,Te.TextureType.unpacked,Te.TextureType.unpacked]:[Te.TextureType.unpacked,Te.TextureType.unpacked],cacheHint:Be});var Ce,Be;return Object.assign(Object.assign({},Oe),{get:()=>((Ue,We,He,Ge)=>{const Ye=We.length>2?"value += getBias(output_channel);":"",Je=We[0].dims.slice(),Ze=We[1].dims.slice(),fn=Ze[0]/Ge.group;r.Logger.verbose("GroupedConv",`autpPad:${Ge.autoPad}, dilations:${Ge.dilations}, group:${Ge.group}, kernelShape:${Ge.kernelShape}, pads:${Ge.pads}, strides:${Ge.strides}`);const yn=(0,Re.calculateOutputShape)(Je,Ze,Ge.dilations,Ge.pads,Ge.strides),mn=(0,Ee.getGlsl)(Ue.session.backend.glContext.version),{activationFunction:pn,applyActivation:un}=(0,Me.getActivationSnippet)(Ge),bn=`
  const ivec2 strides = ivec2(${Ge.strides[0]}, ${Ge.strides[1]});
  const ivec2 pads = ivec2(${Ge.pads[0]}, ${Ge.pads[1]});
  ${pn}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${fn};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${Ze[1]}; wInChannel++) {
      int input_channel = group_id * ${Ze[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${Ze[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${Ge.dilations[0]};

        if (xHeight < 0 || xHeight >= ${Je[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${Ze[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${Ge.dilations[1]};
          if (xWidth < 0 || xWidth >= ${Je[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${Ye}
    ${un}
    ${mn.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},He),{output:{dims:yn,type:We[0].type,textureType:Te.TextureType.unpacked},shaderSource:bn,hasMain:!0})})(Ve,De,Oe,$e)})}},1386:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.conv2DPacked=e.conv2DPackedPointwise=void 0;const r=t(8138),Ee=t(8555),Te=t(708);e.conv2DPackedPointwise=(Re,Me,Ve)=>{const De=Me[0].dims,$e=Me[1].dims,Oe=(0,r.calculateOutputShape)(De,$e,Ve.dilations,Ve.pads,Ve.strides),Ce=Re.reshapePacked(Me[0],[De[1],De[2]*De[3]]),Be=Re.reshapePacked(Me[1],[$e[0],$e[1]]),Ue=Me.length>2?[Be,Ce,Me[2]]:[Be,Ce],We=Re.run((0,Te.createPackedMatmulProgramInfoLoader)(Re,Ue,Ve),Ue);return Re.reshapePacked(We,Oe)},e.conv2DPacked=(Re,Me,Ve)=>{const De=Me[0].dims,$e=Me[1].dims,Oe=(0,r.calculateOutputShape)(De,$e,Ve.dilations,Ve.pads,Ve.strides),Ce=Re.run((0,Ee.createPackedIm2ColProgramInfoLoader)(Re,Me[0],Me[1],Oe,Ve),[Me[0]]),Be=Re.reshapePacked(Me[1],[$e[0],$e[1]*$e[2]*$e[3]]),Ue=Me.length===3?[Be,Ce,Me[2]]:[Be,Ce],We=Re.run((0,Te.createPackedMatmulProgramInfoLoader)(Re,Ue,Ve),Ue);return Re.reshapePacked(We,Oe)}},9663:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvTransposeAttributes=e.convTranspose=void 0;const r=t(246),Ee=t(5060),Te=t(2039),Re=t(2823),Me=(Be,Ue,We,He,Ge,Ye)=>(Be-1)*Ue+We+(He-1)*Ge+1-Ye,Ve=(Be,Ue,We,He,Ge)=>{const Ye=Math.floor(Be/2);Ue==="SAME_UPPER"?(We[He]=Ye,We[Ge]=Be-Ye):Ue==="SAME_LOWER"&&(We[He]=Be-Ye,We[Ge]=Ye)};e.convTranspose=(Be,Ue,We)=>(Ce(Ue,We),De(Be,Ue,We));const De=(Be,Ue,We)=>{const He=Oe(We,Ue);return[$e(Be,Ue,He)]},$e=(Be,Ue,We)=>Be.run(((He,Ge,Ye)=>{const Je=(Ze=Ge.length>2,fn=Ye.cacheKey,{name:"ConvTranspose",inputNames:Ze?["X","W","B"]:["X","W"],inputTypes:Ze?[Te.TextureType.unpacked,Te.TextureType.unpacked,Te.TextureType.unpacked]:[Te.TextureType.unpacked,Te.TextureType.unpacked],cacheHint:fn});var Ze,fn;return Object.assign(Object.assign({},Je),{get:()=>((yn,mn,pn,un)=>{const bn=mn.length>2?"getB(output_channel)":"0.0",gn=mn[0].dims,xn=mn[1].dims,En=xn[1],Pn=xn[0]/un.group,Ln=[mn[0].dims[0],mn[1].dims[1]*un.group,...un.outputShape],Cn=(0,Ee.getGlsl)(yn.session.backend.glContext.version),{activationFunction:Dn,applyActivation:Un}=(0,Re.getActivationSnippet)(un),Wn=`
  const ivec2 strides = ivec2(${un.strides[0]}, ${un.strides[1]});
  const ivec2 pads = ivec2(${un.pads[0]}, ${un.pads[1]});
  ${Dn}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${En};
    int wOutChannel = output_channel - group_id * ${En};

    float value = ${bn};
    for (int inChannelOffset = 0; inChannelOffset < ${Pn}; inChannelOffset++) {
      int input_channel = group_id * ${Pn} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${xn[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${xn[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${un.dilations[0]}, wHOff * ${un.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${gn[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${gn[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${Un}
    ${Cn.output} = vec4(value, .0, .0, .0);
  }
`;return Object.assign(Object.assign({},pn),{output:{dims:Ln,type:mn[0].type,textureType:Te.TextureType.unpacked},shaderSource:Wn,hasMain:!0})})(He,Ge,Je,Ye)})})(Be,Ue,We),Ue),Oe=(Be,Ue)=>{const We=Be.kernelShape.slice();if(Be.kernelShape.length===0)for(let Je=2;Je<Ue[1].dims.length;++Je)We.push(Ue[1].dims[Je]);const He=Be.pads.slice(),Ge=Be.outputShape.slice();((Je,Ze,fn,yn,mn,pn,un,bn)=>{const gn=Je.length-2,xn=bn.length===0;for(let En=0;En<gn;++En){const Pn=xn?Je[En+2]*pn[En]:bn[En],Ln=Me(Je[En+2],pn[En],mn[En],Ze[En],fn[En],Pn);Ve(Ln,yn,mn,En,En+gn),xn&&bn.push(pn[En]*(Je[En+2]-1)+un[En]+(Ze[En]-1)*fn[En]+1-mn[En]-mn[En+gn])}})(Ue[0].dims,We,Be.dilations,Be.autoPad,He,Be.strides,Be.outputPadding,Ge);const Ye=Object.assign({},Be);return Object.assign(Ye,{kernelShape:We,pads:He,outputShape:Ge,cacheKey:Be.cacheKey}),Ye};e.parseConvTransposeAttributes=Be=>{const Ue=Be.attributes,We=(0,Re.parseInternalActivationAttributes)(Ue),He=Ue.getString("auto_pad","NOTSET"),Ge=Ue.getInts("dilations",[1,1]),Ye=Ue.getInt("group",1),Je=Ue.getInts("kernel_shape",[]),Ze=Ue.getInts("output_padding",[0,0]),fn=Ue.getInts("output_shape",[]),yn=Ue.getInts("pads",[0,0,0,0]),mn=Ue.getInts("strides",[1,1]);return(0,r.createAttributeWithCacheKey)(Object.assign({autoPad:He,dilations:Ge,group:Ye,kernelShape:Je,outputPadding:Ze,outputShape:fn,pads:yn,strides:mn},We))};const Ce=(Be,Ue)=>{if(!Be||Be.length!==2&&Be.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(Be[0].dims.length!==4||Be[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(Be[0].dims[1]!==Be[1].dims[0])throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");const We=Be[1].dims[1]*Ue.group;if(Be.length===3&&(Be[2].dims.length!==1||Be[2].dims[0]!==We))throw new Error("invalid bias");const He=Be[0].dims.length-2;if(Ue.dilations.length!==He)throw new Error(`dilations should be ${He}D`);if(Ue.strides.length!==He)throw new Error(`strides should be ${He}D`);if(Ue.pads.length!==2*He)throw new Error(`pads should be ${2*He}D`);if(Ue.outputPadding.length!==He)throw new Error(`output_padding should be ${He}D`);if(Ue.kernelShape.length!==0&&Ue.kernelShape.length!==Be[1].dims.length-2)throw new Error("invalid kernel shape");if(Ue.outputShape.length!==0&&Ue.outputShape.length!==Be[0].dims.length-2)throw new Error("invalid output shape");if(Be[0].type!=="float32"||Be[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(Be.length===3&&Be[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}},8138:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseConvAttributes=e.conv=e.calculateOutputShape=void 0;const r=t(246),Ee=t(2517),Te=t(4770),Re=t(1386),Me=t(9828),Ve=t(2823),De=t(3248),$e=t(5623);e.calculateOutputShape=(He,Ge,Ye,Je,Ze)=>{const fn=He[0],yn=He.slice(2),mn=yn.length,pn=Ge[0],un=Ge.slice(2).map((gn,xn)=>gn+(gn-1)*(Ye[xn]-1)),bn=yn.map((gn,xn)=>gn+Je[xn]+Je[xn+mn]).map((gn,xn)=>Math.floor((gn-un[xn]+Ze[xn])/Ze[xn]));return[fn,pn].concat(...bn)},e.conv=(He,Ge,Ye)=>(We(Ge,Ye),Oe(He,Ge,Ye));const Oe=(He,Ge,Ye)=>{const Je=Ue(Ye,Ge),Ze=He.session.pack,fn=Je.kernelShape[0]===1&&Je.kernelShape[1]===1;return Je.group>1?[He.run((0,Te.createUnpackedGroupedConvProgramInfoLoader)(He,Ge,Je),Ge)]:fn&&Ze?[Ce(He,Ge,Je)]:Ze&&Ge[0].dims.length===4&&Ge[0].dims[0]===1&&!fn?[(0,Re.conv2DPacked)(He,Ge,Je)]:[Be(He,Ge,Je)]},Ce=(He,Ge,Ye)=>{const Je=Ge[0].dims,Ze=Ge[1].dims,fn=(0,e.calculateOutputShape)(Je,Ze,Ye.dilations,Ye.pads,Ye.strides),yn=He.reshapeUnpacked(Ge[0],[Je[1],Je[2]*Je[3]]),mn=He.reshapeUnpacked(Ge[1],[Ze[0],Ze[1]]),pn=Ge.length>2?[mn,yn,Ge[2]]:[mn,yn],un=He.run((0,$e.createMatmulProgramInfoLoader)(pn,Ye),pn);return He.reshapeUnpacked(un,fn)},Be=(He,Ge,Ye)=>{const Je=Ge[0].dims,Ze=Ge[1].dims,fn=(0,e.calculateOutputShape)(Je,Ze,Ye.dilations,Ye.pads,Ye.strides),yn=He.run((0,De.createIm2ColProgramInfoLoader)(He,Ge[0],Ge[1],fn,Ye),[Ge[0]]),mn=Ge.length===3?[yn,Ge[1],Ge[2]]:[yn,Ge[1]];return He.run((0,Me.createDotProductProgramInfoLoader)(He,Ge,fn,Ye),mn)},Ue=(He,Ge)=>{const Ye=He.kernelShape.slice();if(He.kernelShape.length===0)for(let fn=2;fn<Ge[1].dims.length;++fn)Ye.push(Ge[1].dims[fn]);const Je=He.pads.slice();Ee.PoolConvUtil.adjustPadsBasedOnAutoPad(Ge[0].dims,He.strides,He.dilations,Ye,Je,He.autoPad);const Ze=Object.assign({},He);return Object.assign(Ze,{kernelShape:Ye,pads:Je,cacheKey:He.cacheKey}),Ze};e.parseConvAttributes=He=>{const Ge=He.attributes,Ye=(0,Ve.parseInternalActivationAttributes)(Ge),Je=Ge.getString("auto_pad","NOTSET"),Ze=Ge.getInts("dilations",[1,1]),fn=Ge.getInt("group",1),yn=Ge.getInts("kernel_shape",[]),mn=Ge.getInts("pads",[0,0,0,0]),pn=Ge.getInts("strides",[1,1]);return(0,r.createAttributeWithCacheKey)(Object.assign({autoPad:Je,dilations:Ze,group:fn,kernelShape:yn,pads:mn,strides:pn},Ye))};const We=(He,Ge)=>{if(!He||He.length!==2&&He.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(He[0].dims.length!==4||He[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");if(He[0].dims[1]!==He[1].dims[1]*Ge.group)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(He.length===3&&(He[2].dims.length!==1||He[1].dims[0]!==He[2].dims[0]))throw new Error("invalid bias");const Ye=He[0].dims.length-2;if(Ge.dilations.length!==Ye)throw new Error(`dilations should be ${Ye}D`);if(Ge.strides.length!==Ye)throw new Error(`strides should be ${Ye}D`);if(Ge.pads.length!==2*Ye)throw new Error(`pads should be ${2*Ye}D`);if(Ge.kernelShape.length!==0&&Ge.kernelShape.length!==He[1].dims.length-2)throw new Error("invalid kernel shape");if(He[0].type!=="float32"||He[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(He.length===3&&He[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}},5193:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseDepthToSpaceAttributes=e.depthToSpace=void 0;const r=t(3738);e.depthToSpace=(Te,Re,Me)=>{Ee(Re);const Ve=Me.blocksize,De=Ve*Ve,$e=Me.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],Oe=Me.mode==="DCR"?[Re[0].dims[0],Ve,Ve,Re[0].dims[1]/De,Re[0].dims[2],Re[0].dims[3]]:[Re[0].dims[0],Re[0].dims[1]/De,Ve,Ve,Re[0].dims[2],Re[0].dims[3]],Ce=Te.reshapeUnpacked(Re[0],Oe),Be={perm:$e,cacheKey:`${$e}`},[Ue]=(0,r.transpose)(Te,[Ce],Be),We=[Re[0].dims[0],Re[0].dims[1]/De,Re[0].dims[2]*Ve,Re[0].dims[3]*Ve];return[Te.reshapeUnpacked(Ue,We)]},e.parseDepthToSpaceAttributes=Te=>{const Re=Te.attributes.getInt("blocksize");if(Re<1)throw new Error(`blocksize must be >= 1, but got : ${Re} for DepthToSpace`);const Me=Te.attributes.getString("mode","DCR");if(Me!=="DCR"&&Me!=="CRD")throw new Error(`unrecognized mode: ${Me} for DepthToSpace`);return{mode:Me,blocksize:Re}};const Ee=Te=>{if(Te.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${Te.length}`);if(Te[0].type==="string"||Te[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}},9828:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createDotProductProgramInfoLoader=void 0;const r=t(2517),Ee=t(5060),Te=t(2039),Re=t(2823),Me=t(3248);e.createDotProductProgramInfoLoader=(Ve,De,$e,Oe)=>{const Ce=((Be,Ue)=>({name:"ConvDotProduct",inputNames:Be?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:Be?[Te.TextureType.unpacked,Te.TextureType.packedLastDimension,Te.TextureType.unpacked]:[Te.TextureType.unpacked,Te.TextureType.packedLastDimension],cacheKey:Ue.activationCacheKey}))(De.length>2,Oe);return Object.assign(Object.assign({},Ce),{get:()=>((Be,Ue,We,He,Ge)=>{const Ye=We[0].dims,Je=We[1].dims,Ze=[Je[0],Math.ceil(Ye[1]*Je[2]*Je[3]/4)],fn=(0,Me.calculateIm2ColDims)(Ye,Je,He),[yn,mn]=Be.calculateTextureWidthAndHeight(Ze,Te.TextureType.packedLastDimension),pn=r.ShapeUtil.computeStrides(fn),[un,bn]=Be.calculateTextureWidthAndHeight(fn,Te.TextureType.packedLastDimension),gn=He.length,xn=We.length<3?"0.0":"_B(b)",En=Math.ceil(Ye[1]*Je[2]*Je[3]/4),{activationFunction:Pn,applyActivation:Ln}=(0,Re.getActivationSnippet)(Ge),Cn=(0,Ee.getGlsl)(Be.session.backend.glContext.version),Dn=`
${Pn}
float process(int indices[${gn}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${pn[0]} + im2col[1] * ${pn[1]} + im2col[2] * ${pn[2]};
  int kernelOffset = indices[1] * ${Ze[1]};
  float value = ${xn};
  for (int i = 0; i < ${En}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${un}, ${bn});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${yn}, ${mn});
    value += dot(${Cn.texture2D}(Im2Col, im2colCoords), ${Cn.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${Ln}
  return value;
}`;return Object.assign(Object.assign({},Ue),{output:{dims:He,type:We[0].type,textureType:Te.TextureType.unpacked},shaderSource:Dn})})(Ve,Ce,De,$e,Oe)})}},7992:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseFlattenAttributes=e.flatten=void 0;const r=t(2517);e.flatten=(Te,Re,Me)=>{Ee(Re,Me);const Ve=r.ShapeUtil.flattenShape(Re[0].dims,Me);return[Te.reshapeUnpacked(Re[0],Ve)]},e.parseFlattenAttributes=Te=>Te.attributes.getInt("axis",1);const Ee=(Te,Re)=>{if(!Te||Te.length!==1)throw new Error("Flatten requires 1 input.");const Me=Te[0].dims.length;if(Me===0)throw new Error("scalar tensor is not supported.");if(Re<-Me||Re>Me)throw new Error("Invalid axis");if(Te[0].type==="string")throw new Error("string tensor is not supported.")}},2823:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseInternalActivationAttributes=e.getActivationSnippet=void 0;const r=t(2517),Ee=t(4909);e.getActivationSnippet=function(Te){let Re;switch(Te.activation){case"Relu":Re=(0,Ee.glslRelu)();break;case"Sigmoid":Re=(0,Ee.glslSigmoid)();break;case"Clip":Re=(0,Ee.glslClip)(Te.clipMin,Te.clipMax);break;default:return{activationFunction:"",applyActivation:""}}const Me=Re.name;return{activationFunction:Re.body,applyActivation:`value = ${Me}_(value);`}},e.parseInternalActivationAttributes=Te=>{const Re=Te.getString("activation","");if(Re==="Clip"){const[Me,Ve]=Te.getFloats("activation_params",[r.MIN_CLIP,r.MAX_CLIP]);return{activation:Re,clipMax:Ve,clipMin:Me,activationCacheKey:`${Re}:${Me},${Ve}`}}return{activation:Re,activationCacheKey:Re}}},1253:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseGatherAttributes=e.gather=void 0;const r=t(246),Ee=t(782),Te=t(2517),Re=t(2039);e.gather=($e,Oe,Ce)=>(De(Oe,Ce.axis),[$e.run(Ve($e,Oe,Ce),Oe)]),e.parseGatherAttributes=$e=>(0,r.createAttributeWithCacheKey)({axis:$e.attributes.getInt("axis",0)});const Me={name:"Gather",inputNames:["A","B"],inputTypes:[Re.TextureType.unpacked,Re.TextureType.unpacked]},Ve=($e,Oe,Ce)=>{const Be=Object.assign(Object.assign({},Me),{cacheHint:Ce.cacheKey});return Object.assign(Object.assign({},Be),{get:()=>((Ue,We,He,Ge)=>{const Ye=He[0].dims.slice(),Je=He[1].dims.slice(),Ze=new Array(Ye.length+Je.length-1);Ge=Te.ShapeUtil.normalizeAxis(Ge,Ye.length);const fn=[];for(let mn=0;mn<Ze.length;mn++)mn<Ge?(Ze[mn]=Ye[mn],fn.push(`inputIdx[${mn}] = outputIdx[${mn}];`)):mn<Ge+Je.length?(Ze[mn]=Je[mn-Ge],fn.push(`indexDataIdx[${mn-Ge}] = outputIdx[${mn}];`)):(Ze[mn]=Ye[mn-Je.length+1],fn.push(`inputIdx[${mn-Je.length+1}] = outputIdx[${mn}];`));const yn=`
      float process(int outputIdx[${Ze.length||1}]) {
        int inputIdx[${Ye.length}];
        int indexDataIdx[${Je.length||1}];
        indexDataIdx[0] = 0;
        ${fn.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${Ge}] = idx < 0 ? idx + ${Ye[Ge]} : idx;
        return _A(inputIdx);
      }`;return Object.assign(Object.assign({},We),{output:{dims:Ze,type:He[0].type,textureType:Re.TextureType.unpacked},shaderSource:yn})})(0,Be,Oe,Ce.axis)})},De=($e,Oe)=>{if(!$e||$e.length!==2)throw new Error("Gather requires 2 inputs.");const Ce=$e[0].dims.length;if(Ce<1)throw new Error("Invalid input shape.");if(Oe<-Ce||Oe>Ce-1)throw new Error("Invalid axis.");if(Ee.NUMBER_TYPES.indexOf($e[0].type)===-1)throw new Error("Invaid input type.");if($e[1].type!=="int32"&&$e[1].type!=="int16")throw new Error("Invaid input type.")}},4776:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseGemmAttributesV11=e.parseGemmAttributesV7=e.gemm=void 0;const r=t(246),Ee=t(2517),Te=t(2039);e.gemm=($e,Oe,Ce)=>(De(Oe,Ce),[$e.run(Me(Oe,Ce),Oe)]);const Re=($e,Oe)=>{const Ce=$e.attributes.getInt("transA",0)!==0,Be=$e.attributes.getInt("transB",0)!==0,Ue=$e.attributes.getFloat("alpha",1),We=$e.attributes.getFloat("beta",1);return(0,r.createAttributeWithCacheKey)({transA:Ce,transB:Be,alpha:Ue,beta:We,isOptionalC:Oe})};e.parseGemmAttributesV7=$e=>Re($e,!1),e.parseGemmAttributesV11=$e=>Re($e,!0);const Me=($e,Oe)=>{const Ce={name:"Gemm",inputNames:$e.length===3?["A","B","C"]:["A","B"],inputTypes:$e.length===3?[Te.TextureType.unpacked,Te.TextureType.unpacked,Te.TextureType.unpacked]:[Te.TextureType.unpacked,Te.TextureType.unpacked],key:Oe.cacheKey};return Object.assign(Object.assign({},Ce),{get:()=>Ve(Ce,$e,Oe)})},Ve=($e,Oe,Ce)=>{const Be=Oe[0].dims.slice(),Ue=Oe[1].dims.slice(),[We,He]=Ee.GemmUtil.getShapeOfGemmResult(Be,Ce.transA,Ue,Ce.transB,Oe.length===3?Oe[2].dims:void 0),Ge=[We,He];if(!Ge)throw new Error("Can't use gemm on the given tensors");let Ye=Be[Be.length-1],Je="";Ce.transA&&(Ye=Be[0]),Ce.transA&&Ce.transB?Je="value += _A_T(a) * _B_T(b);":Ce.transA&&!Ce.transB?Je="value += _A_T(a) * _B(b);":!Ce.transA&&Ce.transB?Je="value += _A(a) * _B_T(b);":Ce.transA||Ce.transB||(Je="value += _A(a) * _B(b);");const Ze=Ge.length,fn=`
      float process(int indices[${Ze}]) {
          int a[${Ze}];
          int b[${Ze}];
          ${Oe.length===3?`int c[${Oe[2].dims.length}];`:""}

          copyVec(indices, a);
          copyVec(indices, b);
          ${Oe.length===3?"bcastIndices_C(indices, c);":""}

          float value = 0.0;
          for (int k=0; k<${Ye}; ++k) {
              a[${Ze-1}] = k;
              b[${Ze-2}] = k;
              ${Je}
          }

          value = value * alpha;
          ${Oe.length===3?"value += beta * _C(c);":""}
          return value;
      }`;return Object.assign(Object.assign({},$e),{output:{dims:Ge,type:Oe[0].type,textureType:Te.TextureType.unpacked},variables:[{name:"alpha",type:"float",data:Ce.alpha},{name:"beta",type:"float",data:Ce.beta}],shaderSource:fn})},De=($e,Oe)=>{if(!$e)throw new Error("Input is missing");if(Oe.isOptionalC&&($e.length<2||$e.length>3))throw new Error("Invaid input shape.");if(!Oe.isOptionalC&&$e.length!==3)throw new Error("Gemm requires 3 inputs");if($e.length===3&&$e[2].dims.length!==1&&$e[2].dims.length!==2)throw new Error("Invalid input shape of C");if($e[0].type!=="float32"&&$e[0].type!=="float64"||$e[1].type!=="float32"&&$e[1].type!=="float64"||$e.length===3&&$e[2].type!=="float32"&&$e[2].type!=="float64")throw new Error("Invalid input type.");if($e[0].type!==$e[1].type||$e.length===3&&$e[0].type!==$e[2].type)throw new Error("Input types are mismatched")}},8555:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedIm2ColProgramInfoLoader=void 0;const r=t(5060),Ee=t(2039),Te=t(2827);e.createPackedIm2ColProgramInfoLoader=(Re,Me,Ve,De,$e)=>{const Oe=(Ce=$e.cacheKey,{name:"Im2Col (packed)",inputNames:["A"],inputTypes:[Ee.TextureType.packed],cacheHint:Ce});var Ce;return Object.assign(Object.assign({},Oe),{get:()=>((Be,Ue,We,He,Ge,Ye)=>{const Je=We.dims,Ze=He.dims,fn=Ge.length,yn=[Ze[1]*Ze[2]*Ze[3],Ge[2]*Ge[3]],mn=Ze[2]*Ze[3],pn=(0,Te.unpackFromChannel)(),un=(0,r.getGlsl)(Be.session.backend.glContext.version);let bn="";for(let xn=0;xn<=1;xn++)for(let En=0;En<=1;En++)bn+=`
            blockIndex = rc.x + ${En};
            pos = rc.y + ${xn};

            if(blockIndex < ${yn[1]} && pos < ${yn[0]}) {
              offsetY = int(blockIndex / (${Ge[fn-1]})) * ${Ye.strides[0]} -
                ${Ye.pads[0]};
              d0 = offsetY + ${Ye.dilations[0]} * (imod(pos, ${mn}) / ${Ze[2]});

              if(d0 < ${Je[2]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${Ge[fn-1]}) * ${Ye.strides[1]} -
                  ${Ye.pads[1]};
                d1 = offsetX + ${Ye.dilations[1]} * imod(imod(pos, ${mn}), ${Ze[2]});

                if(d1 < ${Je[3]} && d1 >= 0) {

                  ch = int(float(pos)/ ${mn}.);
                    innerDims = vec2(d0, d1);
                    result[${2*xn+En}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;const gn=`
      ${pn}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${bn}
          ${un.output} = result;
      }
            `;return Object.assign(Object.assign({},Ue),{output:{dims:yn,type:We.type,textureType:Ee.TextureType.packed},shaderSource:gn,hasMain:!0})})(Re,Oe,Me,Ve,De,$e)})}},3248:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.calculateIm2ColDims=e.createIm2ColProgramInfoLoader=void 0;const r=t(2039);e.createIm2ColProgramInfoLoader=(Ee,Te,Re,Me,Ve)=>{const De=($e=Ve.cacheKey,{name:"Im2Col",inputNames:["X"],inputTypes:[r.TextureType.unpacked],cacheHint:$e});var $e;return Object.assign(Object.assign({},De),{get:()=>((Oe,Ce,Be,Ue,We,He)=>{const Ge=Be.dims,Ye=Ue.dims,Je=We.length,Ze=(0,e.calculateIm2ColDims)(Ge,Ye,We,4),fn=`
        const int XC = ${Ge[1]};
        const int XH = ${Ge[2]};
        const int XW = ${Ge[3]};
        const int KH = ${He.kernelShape[0]};
        const int KW = ${He.kernelShape[1]};
        const int dilationH = ${He.dilations[0]};
        const int dilationW = ${He.dilations[1]};
        const int strideH = ${He.strides[0]};
        const int strideW = ${He.strides[1]};
        const int padH = ${He.pads[0]};
        const int padW = ${He.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${Je}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${Ge.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return Object.assign(Object.assign({},Ce),{output:{dims:Ze,type:Be.type,textureType:r.TextureType.packedLastDimension},shaderSource:fn})})(0,De,Te,Re,Me,Ve)})},e.calculateIm2ColDims=(Ee,Te,Re,Me=4)=>[Re[0],Re[2],Re[3],Math.ceil(Ee[1]*Te[2]*Te[3]/Me)]},6572:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseImageScalerAttributes=e.imageScaler=void 0;const r=t(246),Ee=t(2039);e.imageScaler=(De,$e,Oe)=>(Ve($e),[De.run(Re(De,$e,Oe),$e)]),e.parseImageScalerAttributes=De=>{const $e=De.attributes.getFloat("scale"),Oe=De.attributes.getFloats("bias");return(0,r.createAttributeWithCacheKey)({scale:$e,bias:Oe})};const Te={name:"ImageScaler",inputNames:["X"],inputTypes:[Ee.TextureType.unpacked]},Re=(De,$e,Oe)=>{const Ce=Object.assign(Object.assign({},Te),{cacheHint:Oe.cacheKey});return Object.assign(Object.assign({},Ce),{get:()=>((Be,Ue,We,He)=>{const Ge=We[0].dims.slice(),Ye=Ge.length,Je=`
      ${Me(He.bias.length)}
      float process(int indices[${Ye}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return Object.assign(Object.assign({},Ue),{output:{dims:Ge,type:We[0].type,textureType:Ee.TextureType.unpacked},variables:[{name:"bias",type:"float",arrayLength:He.bias.length,data:He.bias},{name:"scale",type:"float",data:He.scale}],shaderSource:Je})})(0,Ce,$e,Oe)})},Me=De=>{const $e=[`float getBias(float bias[${De}], int channel) {`];for(let Oe=0;Oe<De;++Oe)Oe===0?$e.push(`	if (channel == ${Oe}) { return bias[${Oe}]; }`):Oe===De-1?$e.push(`	else { return bias[${Oe}]; }`):$e.push(`	else if (channel == ${Oe}) { return bias[${Oe}]; }`);return $e.push("	}"),$e.join(`
`)},Ve=De=>{if(!De||De.length!==1)throw new Error("ImageScaler requires 1 input.");if(De[0].dims.length!==4)throw new Error("Invalid input shape.");if(De[0].type!=="float32"&&De[0].type!=="float64")throw new Error("Invalid input type.")}},3346:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseInstanceNormalizationAttributes=e.instanceNormalization=void 0;const r=t(5060),Ee=t(2039);e.instanceNormalization=($e,Oe,Ce)=>{De(Oe);const Be=$e.run(Re(Oe[0]),Oe);return[$e.run(Ve($e,Oe[0],Ce,Be.dims),[Oe[0],Be,Oe[1],Oe[2]])]},e.parseInstanceNormalizationAttributes=$e=>$e.attributes.getFloat("epsilon",1e-5);const Te={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[Ee.TextureType.unpacked]},Re=$e=>Object.assign(Object.assign({},Te),{get:()=>((Oe,Ce)=>{const Be=Ce.dims.slice(),Ue=Be[1],We=Be[2]*Be[3],He=[Be[0],Ue],Ge=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${Be[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${Be[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${We});
        temp = 0.0;
        for(int a2=0; a2<${Be[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${Be[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${We});

        return v;
      }`;return Object.assign(Object.assign({},Oe),{output:{dims:He,type:Ce.type,textureType:Ee.TextureType.packedLastDimension},shaderSource:Ge})})(Te,$e)}),Me={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[Ee.TextureType.unpacked,Ee.TextureType.packedLastDimension,Ee.TextureType.unpacked,Ee.TextureType.unpacked]},Ve=($e,Oe,Ce,Be)=>{const Ue=Object.assign(Object.assign({},Me),{cacheHint:`${Ce}`});return Object.assign(Object.assign({},Ue),{get:()=>((We,He,Ge,Ye,Je)=>{const Ze=(0,r.getGlsl)(We.session.backend.glContext.version),[fn,yn]=We.calculateTextureWidthAndHeight(Je,Ee.TextureType.packedLastDimension),[mn,pn]=[fn/4,yn],un=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${mn}, ${pn});
        return ${Ze.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return Object.assign(Object.assign({},He),{output:{dims:Ge.dims,type:Ge.type,textureType:Ee.TextureType.unpacked},variables:[{name:"epsilon",type:"float",data:Ye}],shaderSource:un})})($e,Ue,Oe,Ce,Be)})},De=$e=>{if(!$e||$e.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");const Oe=$e[0],Ce=$e[1],Be=$e[2];if(Oe.dims.length<3||Ce.dims.length!==1||Be.dims.length!==1)throw new Error("Invalid input shape.");if(Ce.dims[0]!==Oe.dims[1]||Be.dims[0]!==Oe.dims[1])throw new Error("Input shapes are mismatched.");if(Oe.type!=="float32"&&Oe.type!=="float64"||Ce.type!=="float32"&&Ce.type!=="float64"||Be.type!=="float32"&&Be.type!=="float64")throw new Error("Invalid input type.");if($e[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}},708:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackedMatmulProgramInfoLoader=void 0;const r=t(2517),Ee=t(5060),Te=t(2039),Re=t(9390),Me=t(2823),Ve=t(5623);e.createPackedMatmulProgramInfoLoader=(De,$e,Oe)=>{const Ce=(Be=$e.length>2,Ue=Oe.activationCacheKey,{name:"MatMul (packed)",inputNames:Be?["A","B","Bias"]:["A","B"],inputTypes:Be?[Te.TextureType.packed,Te.TextureType.packed,Te.TextureType.packed]:[Te.TextureType.packed,Te.TextureType.packed],cacheHint:Ue});var Be,Ue;return Object.assign(Object.assign({},Ce),{get:()=>((We,He,Ge,Ye)=>{const Je=Ge.length>2,Ze=Je?"value += getBiasForMatmul();":"",fn=Ge[0].dims,yn=Ge[1].dims,mn=r.BroadcastUtil.calcShape(fn,yn,!0),pn=!r.ShapeUtil.areEqual(Ge[0].dims,Ge[1].dims);if(!mn)throw new Error("Can't use matmul on the given tensors");const un=fn[fn.length-1],bn=Math.ceil(un/2),gn=fn.length,xn=yn.length,En=(0,Ee.getGlsl)(We.session.backend.glContext.version),Pn=(0,Re.getCoordsDataType)(mn.length),Ln=mn.length,Cn=(0,Re.getGlChannels)(),{activationFunction:Dn,applyActivation:Un}=(0,Me.getActivationSnippet)(Ye),Wn=Je?`${(0,Ve.getBiasForMatmul)(Pn,Cn,Ge[2].dims,mn,!0)}`:"",On=pn?`${function(Kn,Qn,rr,or){let pr=[],mr=[];const Er=rr[0].dims,jr=rr[1].dims,Kr=Er.length,Hr=jr.length,xr=or.length,nr=xr-Kr,Oi=xr-Hr;pr=Er.map((mi,pi)=>`coords.${Qn[pi+nr]}`),pr[Kr-1]="i*2",pr.join(", "),mr=jr.map((mi,pi)=>`coords.${Qn[pi+Oi]}`),mr[Hr-2]="i*2",mr.join(", ");const Ti=r.BroadcastUtil.getBroadcastDims(Er,or),yi=r.BroadcastUtil.getBroadcastDims(jr,or),qr=Ti.map(mi=>`coords.${Qn[mi+nr]} = 0;`).join(`
`),di=yi.map(mi=>`coords.${Qn[mi+Oi]} = 0;`).join(`
`),Zr=`int lastDim = coords.${Qn[xr-1]};
  coords.${Qn[xr-1]} = coords.${Qn[xr-2]};
  coords.${Qn[xr-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${Kn} coords = getOutputCoords();
  ${Zr}
  ${qr}
  vec4 outputValue = getA(${pr});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${Kn} coords = getOutputCoords();
  ${Zr}
  ${di}
  vec4 outputValue = getB(${mr});
  return outputValue;
}`}(Pn,Cn,Ge,mn)}`:"",$n=pn?"getAAtOutCoordsMatmul(i)":`getA(${function(Kn,Qn){let rr="";for(let or=0;or<Qn-2;or++)rr+=`rc.${Kn[or]}, `;return rr+=`rc.${Kn[Qn-2]}, i*2`,rr}(Cn,gn)})`,kn=pn?"getBAtOutCoordsMatmul(i)":`getB(${function(Kn,Qn){let rr="";for(let or=0;or<Qn-2;or++)rr+=`rc.${Kn[or]}, `;return rr+=`i*2, rc.${Kn[Qn-1]}`,rr}(Cn,xn)})`,In=`
            ${On}
            ${Wn}
            ${Dn}
            void main() {
              ${pn?"":`${Pn} rc =
          getOutputCoords(); int lastDim = rc.${Cn[Ln-1]}; rc.${Cn[Ln-1]} =
          rc.${Cn[Ln-2]}; rc.${Cn[Ln-2]} = lastDim;
      `}

              vec4 value = vec4(0);
              for (int i = 0; i < ${bn}; i++) {
                vec4 a = ${$n};
                vec4 b = ${kn};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${Ze}
              ${Un}
              ${En.output} = value;
            }`;return Object.assign(Object.assign({},He),{output:{dims:mn,type:Ge[0].type,textureType:Te.TextureType.packed},shaderSource:In,hasMain:!0})})(De,Ce,$e,Oe)})}},5623:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBiasForMatmul=e.createMatmulProgramInfoLoader=e.parseMatMulAttributes=e.matMul=void 0;const r=t(2517),Ee=t(2039),Te=t(9390),Re=t(2823),Me=t(708);function Ve(Oe,Ce){const Be=(Ue=Oe.length>2,We=Ce.activationCacheKey,{name:"MatMul",inputNames:Ue?["A","B","Bias"]:["A","B"],inputTypes:Ue?[Ee.TextureType.unpacked,Ee.TextureType.unpacked,Ee.TextureType.unpacked]:[Ee.TextureType.unpacked,Ee.TextureType.unpacked],cacheHint:We});var Ue,We;return Object.assign(Object.assign({},Be),{get:()=>function(He,Ge,Ye){const Je=Ge[0].dims,Ze=Ge[1].dims,fn=r.BroadcastUtil.calcShape(Je,Ze,!0);if(!fn)throw new Error("Can't use matmul on the given tensors");const yn=(0,Te.getCoordsDataType)(fn.length),mn=(0,Te.getGlChannels)(),{activationFunction:pn,applyActivation:un}=(0,Re.getActivationSnippet)(Ye),bn=Ge.length>2,gn=bn?"value += getBiasForMatmul();":"",xn=bn?`${$e(yn,mn,Ge[2].dims,fn,!1)}`:"",En=fn.length,Pn=Je.length,Ln=Ze.length,Cn=`
    ${pn}
    ${xn}
    float process(int indices[${En}]) {
        int a[${Pn}];
        int b[${Ln}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${Je[Je.length-1]}; ++k) {
            a[${Pn-1}] = k;
            b[${Ln-2}] = k;
            value += _A(a) * _B(b);
        }
        ${gn}
        ${un}
        return value;
    }`;return Object.assign(Object.assign({},He),{output:{dims:fn,type:Ge[0].type,textureType:Ee.TextureType.unpacked},shaderSource:Cn})}(Be,Oe,Ce)})}e.matMul=(Oe,Ce,Be)=>(De(Ce),Oe.session.pack?[Oe.run((0,Me.createPackedMatmulProgramInfoLoader)(Oe,Ce,Be),Ce)]:[Oe.run(Ve(Ce,Be),Ce)]),e.parseMatMulAttributes=Oe=>(0,Re.parseInternalActivationAttributes)(Oe.attributes),e.createMatmulProgramInfoLoader=Ve;const De=Oe=>{if(!Oe||Oe.length!==2)throw new Error("MatMul requires 2 inputs.");if(Oe[0].dims[Oe[0].dims.length-1]!==Oe[1].dims[Oe[1].dims.length-2])throw new Error("shared dimension does not match.");if(Oe[0].type!=="float32"&&Oe[0].type!=="float64"||Oe[1].type!=="float32"&&Oe[1].type!=="float64")throw new Error("inputs should be float type");if(Oe[0].type!==Oe[1].type)throw new Error("inputs types should match")};function $e(Oe,Ce,Be,Ue,We){let He="";const Ge=Be.length,Ye=Ue.length,Je=Ye-Ge;He=Ye<2&&Ge>0?"coords":Be.map((yn,mn)=>`coords.${Ce[mn+Je]}`).join(", ");const Ze=r.BroadcastUtil.getBroadcastDims(Be,Ue).map(yn=>`coords.${Ce[yn+Je]} = 0;`).join(`
`);let fn="vec4(outputValue.xx, outputValue.yy)";return r.ShapeUtil.size(Be)===1&&(fn="vec4(outputValue.x)"),We?`
vec4 getBiasForMatmul() {
  ${Oe} coords = getOutputCoords();
  ${Ze}
  vec4 outputValue = getBias(${He});
  return ${fn};
}`:`
float getBiasForMatmul() {
  ${Oe} coords = getOutputCoords();
  ${Ze}
  return getBias(coords.x);
}`}e.getBiasForMatmul=$e},2403:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createPackProgramInfoLoader=void 0;const r=t(5060),Ee=t(2039),Te=t(9390),Re=t(2827),Me={name:"pack",inputNames:["A"],inputTypes:[Ee.TextureType.unpackedReversed]};e.createPackProgramInfoLoader=(Ve,De)=>Object.assign(Object.assign({},Me),{get:()=>(($e,Oe)=>{const Ce=(0,r.getGlsl)($e.session.backend.glContext.version),Be=Oe.dims,Ue=Be.length,We=Oe.dims.length,He=(0,Te.getCoordsDataType)(We),Ge=(0,Re.getChannels)("rc",We),Ye=(Je=We,Ze=Ge,fn=Be[Be.length-2],yn=Be[Be.length-1],Je===0||Je===1?"":`
    int r = ${Ze[Je-2]};
    int c = ${Ze[Je-1]};
    int rp1 = ${Ze[Je-2]} + 1;
    int cp1 = ${Ze[Je-1]} + 1;
    bool rEdge = rp1 >= ${yn};
    bool cEdge = cp1 >= ${fn};
    `);var Je,Ze,fn,yn;let mn;mn=Ue===0?[1,1]:Ue===1?[Be[0],1]:[Be[We-1],Be[We-2]];const pn=function(gn,xn,En){if(gn===0)return"false";if(gn===1)return`rc > ${xn[0]}`;let Pn="";for(let Ln=gn-2;Ln<gn;Ln++)Pn+=`${En[Ln]} >= ${xn[Ln-gn+2]}`,Ln<gn-1&&(Pn+="||");return Pn}(We,mn,Ge),un=function(gn,xn){const En=gn.length;if(En===0)return"getA(), 0, 0, 0";if(En===1)return`getA(rc),
            rc + 1 >= ${gn[0]} ? 0. : getA(rc + 1),
            0, 0`;let Pn="";if(En>2)for(let Ln=0;Ln<En-2;++Ln)Pn+=`${xn[Ln]},`;return`getA(${Pn}r, c),
          rEdge ? 0. : getA(${Pn}rp1, c),
          cEdge ? 0. : getA(${Pn}r, cp1),
          rEdge || cEdge ? 0. : getA(${Pn}rp1, cp1)`}(Be,Ge),bn=`
        void main() {
          ${He} rc = getOutputCoords();

          if(${pn}) {
            ${Ce.output} = vec4(0);
          } else {
            ${Ye}

            ${Ce.output} = vec4(${un});
          }
        }
      `;return Object.assign(Object.assign({},Me),{hasMain:!0,output:{dims:Oe.dims,type:Oe.type,textureType:Ee.TextureType.packed},shaderSource:bn})})(Ve,De)})},2827:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.unpackFromChannel=e.getChannels=e.getVecChannels=void 0;const r=t(9390);function Ee(Te,Re){return(0,r.getGlChannels)(Re).map(Me=>`${Te}.${Me}`)}e.getVecChannels=Ee,e.getChannels=function(Te,Re){return Re===1?[Te]:Ee(Te,Re)},e.unpackFromChannel=function(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}},2870:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parsePadAttributesV11=e.padV11=e.parsePadAttributesV2=e.padV2=void 0;const r=t(246),Ee=t(2517),Te=t(5060),Re=t(2039),Me={name:"Pad",inputNames:["A"],inputTypes:[Re.TextureType.unpacked]};e.padV2=(He,Ge,Ye)=>($e(Ge),[He.run(Object.assign(Object.assign({},Me),{cacheHint:Ye.cacheKey,get:()=>De(He,Ge[0],Ye)}),Ge)]),e.parsePadAttributesV2=He=>{const Ge=He.attributes.getString("mode","constant"),Ye=He.attributes.getFloat("value",0),Je=He.attributes.getInts("pads");return(0,r.createAttributeWithCacheKey)({mode:Ge,value:Ye,pads:Je})},e.padV11=(He,Ge,Ye)=>{Oe(Ge);const Je=Ve(He,Ge,Ye);return(0,e.padV2)(He,[Ge[0]],Je)},e.parsePadAttributesV11=He=>He.attributes.getString("mode","constant");const Ve=(He,Ge,Ye)=>{if(!He.session.isInitializer(Ge[1].dataId)||Ge.length>=3&&!He.session.isInitializer(Ge[2].dataId))throw new Error("dynamic pad attributes are not allowed");const Je=Array.from(Ge[1].integerData),Ze=Ge.length>=3?Ge[2].floatData[0]:0;return(0,r.createAttributeWithCacheKey)({mode:Ye,pads:Je,value:Ze})},De=(He,Ge,Ye)=>{const Je=Ee.ShapeUtil.padShape(Ge.dims.slice(),Ye.pads),Ze=Je.length,fn=`
      ${Ce(He,Ge,Ye)}
      float process(int[${Ze}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[Re.TextureType.unpacked],output:{dims:Je,type:Ge.type,textureType:Re.TextureType.unpacked},shaderSource:fn}},$e=He=>{if(!He||He.length!==1)throw new Error("Pad requires 1 input");if(He[0].type!=="float32"&&He[0].type!=="float64")throw new Error("Invalid input type.")},Oe=He=>{if(!He||He.length!==2&&He.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(He[1].type!=="int32")throw new Error("Invalid input type.");if(He.length>=3&&He[2].type==="string")throw new Error("Invalid input type.")},Ce=(He,Ge,Ye)=>{const Je=(0,Te.getGlsl)(He.session.backend.glContext.version),[Ze,fn]=He.calculateTextureWidthAndHeight(Ge.dims,Re.TextureType.unpacked),yn=Ee.ShapeUtil.computeStrides(Ge.dims);switch(Ye.mode){case"constant":return Be(Je,Ge.dims,yn,Ze,fn,Ye.pads,Ye.value);case"reflect":return Ue(Je,Ge.dims,yn,Ze,fn,Ye.pads);case"edge":return We(Je,Ge.dims,yn,Ze,fn,Ye.pads);default:throw new Error("Invalid mode")}},Be=(He,Ge,Ye,Je,Ze,fn,yn)=>{const mn=Ge.length;let pn="";for(let un=mn-1;un>=0;--un)pn+=`
        k = m[${un}] - ${fn[un]};
        if (k < 0)  return constant;
        if (k >= ${Ge[un]}) return constant;
        offset += k * ${Ye[un]};
        `;return`
      float padA(int m[${mn}]) {
        const float constant = float(${yn});
        int offset = 0;
        int k = 0;
        ${pn}
        vec2 coords = offsetToCoords(offset, ${Je}, ${Ze});
        float value = getColorAsFloat(${He.texture2D}(A, coords));
        return value;
      }
      `},Ue=(He,Ge,Ye,Je,Ze,fn)=>{const yn=Ge.length;let mn="";for(let pn=yn-1;pn>=0;--pn)mn+=`
        k = m[${pn}] - ${fn[pn]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(Ge[pn]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${Ge[pn]}) { k = _2n_1 - k; }
        }
        offset += k * ${Ye[pn]};
        `;return`
      float padA(int m[${yn}]) {
        int offset = 0;
        int k = 0;
        ${mn}
        vec2 coords = offsetToCoords(offset, ${Je}, ${Ze});
        float value = getColorAsFloat(${He.texture2D}(A, coords));
        return value;
      }
      `},We=(He,Ge,Ye,Je,Ze,fn)=>{const yn=Ge.length;let mn="";for(let pn=yn-1;pn>=0;--pn)mn+=`
        k = m[${pn}] - ${fn[pn]};
        if (k < 0)  k = 0;
        if (k >= ${Ge[pn]}) k = ${Ge[pn]-1};
        offset += k * ${Ye[pn]};
      `;return`
      float padA(int m[${yn}]) {
        int offset = 0;
        int k = 0;
        ${mn}
        vec2 coords = offsetToCoords(offset, ${Je}, ${Ze});
        float value = getColorAsFloat(${He.texture2D}(A, coords));
        return value;
      }
      `}},2143:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.globalMaxPool=e.parseMaxPoolAttributes=e.maxPool=e.parseGlobalAveragePoolAttributes=e.globalAveragePool=e.parseAveragePoolAttributes=e.averagePool=void 0;const r=t(246),Ee=t(2517),Te=t(2039);e.averagePool=(We,He,Ge)=>{Oe(He);const Ye={name:"AveragePool",inputNames:["X"],inputTypes:[Te.TextureType.unpacked],cacheHint:Ge.cacheKey};return[We.run(Object.assign(Object.assign({},Ye),{get:()=>Re(He,Ye,!1,Ge)}),He)]},e.parseAveragePoolAttributes=We=>{const He=We.attributes.getString("auto_pad","NOTSET"),Ge=We.attributes.getInt("ceil_mode",0),Ye=We.attributes.getInt("count_include_pad",0)!==0,Je=We.attributes.getInts("kernel_shape"),Ze=We.attributes.getInts("strides",[]),fn=We.attributes.getInts("pads",[]);if(Ge!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return(0,r.createAttributeWithCacheKey)({autoPad:He,ceilMode:Ge,countIncludePad:Ye,kernelShape:Je,strides:Ze,pads:fn})};const Re=(We,He,Ge,Ye)=>{const[Je,Ze]=Ve(We,Ye,Ge),fn=Ee.ShapeUtil.size(Je.kernelShape);let yn="";Je.countIncludePad?yn+=`value /= float(${fn});`:yn+=`value /= float(${fn} - pad);`;const mn=`
        ${Ce(We[0].dims,Je,"value += _X(x);",yn,"0.0")}
      `;return Object.assign(Object.assign({},He),{output:{dims:Ze,type:We[0].type,textureType:Te.TextureType.unpacked},shaderSource:mn})};e.globalAveragePool=(We,He,Ge)=>{Oe(He);const Ye={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[Te.TextureType.unpacked],cacheHint:`${Ge.countIncludePad}`};return[We.run(Object.assign(Object.assign({},Ye),{get:()=>Re(He,Ye,!0,Ge)}),He)]},e.parseGlobalAveragePoolAttributes=We=>{const He=We.attributes.getInt("count_include_pad",0)!==0;return(0,r.createAttributeWithCacheKey)({autoPad:"",ceilMode:0,countIncludePad:He,kernelShape:[],strides:[],pads:[]})},e.maxPool=(We,He,Ge)=>{Oe(He);const Ye={name:"MaxPool",inputNames:["X"],inputTypes:[Te.TextureType.unpacked],cacheHint:Ge.cacheKey};return[We.run(Object.assign(Object.assign({},Ye),{get:()=>Me(He,Ye,!1,Ge)}),He)]},e.parseMaxPoolAttributes=We=>{const He=We.attributes.getString("auto_pad","NOTSET"),Ge=We.attributes.getInt("ceil_mode",0),Ye=We.attributes.getInts("kernel_shape"),Je=We.attributes.getInts("strides",[]),Ze=We.attributes.getInts("pads",[]),fn=We.attributes.getInt("storage_order",0),yn=We.attributes.getInts("dilations",[]);if(fn!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(Ge!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return(0,r.createAttributeWithCacheKey)({autoPad:He,ceilMode:Ge,countIncludePad:!1,kernelShape:Ye,strides:Je,pads:Ze,storageOrder:fn,dilations:yn})};const Me=(We,He,Ge,Ye)=>{const[Je,Ze]=Ve(We,Ye,Ge),fn=`
      ${Ce(We[0].dims,Je,`
      value = max(_X(x), value);
    `,"","-1e5")}
    `;return Object.assign(Object.assign({},He),{output:{dims:Ze,type:We[0].type,textureType:Te.TextureType.unpacked},shaderSource:fn})},Ve=(We,He,Ge)=>{const Ye=We[0].dims.slice(),Je=Object.hasOwnProperty.call(He,"dilations"),Ze=He.kernelShape.slice(),fn=He.strides.slice(),yn=Je?He.dilations.slice():[],mn=He.pads.slice();Ee.PoolConvUtil.adjustPoolAttributes(Ge,Ye,Ze,fn,yn,mn);const pn=Ee.PoolConvUtil.computePoolOutputShape(Ge,Ye,fn,yn,Ze,mn,He.autoPad),un=Object.assign({},He);return Je?Object.assign(un,{kernelShape:Ze,strides:fn,pads:mn,dilations:yn,cacheKey:He.cacheKey}):Object.assign(un,{kernelShape:Ze,strides:fn,pads:mn,cacheKey:He.cacheKey}),[un,pn]},De={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},$e={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[Te.TextureType.unpacked]};e.globalMaxPool=(We,He)=>(Oe(He),[We.run(Object.assign(Object.assign({},$e),{get:()=>Me(He,$e,!0,De)}),He)]);const Oe=We=>{if(!We||We.length!==1)throw new Error("Pool ops requires 1 input.");if(We[0].type!=="float32"&&We[0].type!=="float64")throw new Error("Invalid input type.")},Ce=(We,He,Ge,Ye,Je)=>{const Ze=We.length;if(He.kernelShape.length<=2){const fn=He.kernelShape[He.kernelShape.length-1],yn=He.strides[He.strides.length-1],mn=He.pads[He.pads.length/2-1],pn=He.pads[He.pads.length-1],un=We[Ze-1];let bn="",gn="",xn="";if(bn=mn+pn!==0?`
          for (int i = 0; i < ${fn}; i++) {
            x[${Ze} - 1] = indices[${Ze} - 1] * ${yn} - ${mn} + i;
            if (x[${Ze} - 1] < 0 || x[${Ze} - 1] >= ${un}) {
              pad++;
              continue;
            }
            ${Ge}
          }`:`
          for (int i = 0; i < ${fn}; i++) {
            x[${Ze} - 1] = indices[${Ze} - 1] * ${yn} - ${mn} + i;
            ${Ge}
          }`,He.kernelShape.length===2){const En=He.kernelShape[He.kernelShape.length-2],Pn=He.strides[He.strides.length-2],Ln=He.pads[He.pads.length/2-2],Cn=He.pads[He.pads.length-2],Dn=We[Ze-2];gn=Ln+Cn!==0?`
            for (int j = 0; j < ${En}; j++) {
              x[${Ze} - 2] = indices[${Ze} - 2] * ${Pn} - ${Ln} + j;
              if (x[${Ze} - 2] < 0 || x[${Ze} - 2] >= ${Dn}) {
                pad+= ${fn};
                continue;
              }
          `:`
            for (int j = 0; j < ${En}; j++) {
              x[${Ze} - 2] = indices[${Ze} - 2] * ${Pn} - ${Ln} + j;
            `,xn=`
          }
        `}return`
        float process(int indices[${Ze}]) {
          int x[${Ze}];
          copyVec(indices, x);

          float value = ${Je};
          int pad = 0;
          ${gn}
          ${bn}
          ${xn}
          ${Ye}
          return value;
        }
      `}{const fn=Ee.ShapeUtil.size(He.kernelShape),yn=Ee.ShapeUtil.computeStrides(He.kernelShape),mn=yn.length,pn=He.pads.length,un=Ue(mn),bn=Be(We,"inputDims"),gn=Be(He.pads,"pads"),xn=Be(yn,"kernelStrides"),En=Be(He.strides,"strides");let Pn="";return Pn=He.pads.reduce((Ln,Cn)=>Ln+Cn)?`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${Ge}
          }`:`
          }
          ${Ge}
        `,`
        ${un}
        float process(int indices[${Ze}]) {
          int x[${Ze}];
          copyVec(indices, x);
          int offset[${mn}];
          int pads[${pn}];
          int inputDims[${Ze}];
          int kernelStrides[${mn}];
          int strides[${mn}];
          ${gn}
          ${bn}
          ${En}
          ${xn}

          float value = ${Je};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${fn}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${Ze} - ${mn}; j < ${Ze}; j++) {
              x[j] = indices[j] * strides[j - ${Ze} + ${mn}]
                + offset[j - ${Ze} + ${mn}] - pads[j - 2];
              ${Pn}
          }
          ${Ye}

          return value;
        }
      `}},Be=(We,He)=>{let Ge="";for(let Ye=0;Ye<We.length;Ye++)Ge+=`
      ${He}[${Ye}] = ${We[Ye]};
    `;return Ge},Ue=We=>`
  void offsetToIndices(int offset, int[${We}] strides, out int[${We}] indices) {
    if (${We} == 0) {
      return;
    }
    for (int i = 0; i < ${We} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${We} - 1] = offset;
  }`},4939:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reduceLogSumSquare=e.reduceLogSum=e.reduceProd=e.reduceMin=e.reduceMax=e.reduceMean=e.reduceSum=e.parseReduceAttributes=void 0;const r=t(246),Ee=t(782),Te=t(2517),Re=t(2039),Me=($e,Oe,Ce,Be,Ue)=>{De(Oe);const We={name:Be,inputNames:["A"],inputTypes:[Re.TextureType.unpacked]};return[$e.run(Object.assign(Object.assign({},We),{cacheHint:Ce.cacheKey,get:()=>Ve($e,Oe,Ce,Be,Ue,We)}),Oe)]};e.parseReduceAttributes=$e=>{const Oe=$e.attributes.getInts("axes",[]),Ce=$e.attributes.getInt("keepdims",1)===1;return(0,r.createAttributeWithCacheKey)({axes:Oe,keepDims:Ce})};const Ve=($e,Oe,Ce,Be,Ue,We)=>{const He=[],Ge=Oe[0].dims.length||1,Ye=[],Je=Te.ShapeUtil.normalizeAxes(Ce.axes,Oe[0].dims.length),Ze=Ue(Oe,Je);let fn=Ze[1];for(let mn=0;mn<Oe[0].dims.length;mn++)Je.indexOf(mn)>=0||Je.length===0?(Ce.keepDims&&He.push(1),fn=`
          for(int j${mn} = 0; j${mn} < ${Oe[0].dims[mn]}; j${mn}++) {
            inputIdx[${mn}] = j${mn};
            ${fn}
          }`):(Ye.push(`inputIdx[${mn}] = outputIdx[${He.length}];`),He.push(Oe[0].dims[mn]));const yn=`
      float process(int outputIdx[${He.length||1}]) {
        float value;                 // final result
        int inputIdx[${Ge}];      // addressing input data
        ${Ye.join(`
`)}
        ${Ze[0]}       // init ops for reduce max/min
        ${fn}
        ${Ze[2]}       // final computation for reduce mean
        return value;
      }`;return Object.assign(Object.assign({},We),{output:{dims:He,type:Oe[0].type,textureType:Re.TextureType.unpacked},shaderSource:yn})},De=$e=>{if(!$e||$e.length!==1)throw new Error("Reduce op requires 1 input.");if(Ee.NUMBER_TYPES.indexOf($e[0].type)===-1)throw new Error("Invalid input type.")};e.reduceSum=($e,Oe,Ce)=>Me($e,Oe,Ce,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),e.reduceMean=($e,Oe,Ce)=>Me($e,Oe,Ce,"ReduceMean",(Be,Ue)=>{let We=1;for(let He=0;He<Be[0].dims.length;He++)(Ue.indexOf(He)>=0||Ue.length===0)&&(We*=Be[0].dims[He]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${We}.;`]}),e.reduceMax=($e,Oe,Ce)=>Me($e,Oe,Ce,"ReduceMax",(Be,Ue)=>{const We=[];for(let He=0;He<Be[0].dims.length;He++)(Ue.indexOf(He)>=0||Ue.length===0)&&We.push(`inputIdx[${He}] = 0;`);return[`${We.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),e.reduceMin=($e,Oe,Ce)=>Me($e,Oe,Ce,"ReduceMin",(Be,Ue)=>{const We=[];for(let He=0;He<Be[0].dims.length;He++)(Ue.indexOf(He)>=0||Ue.length===0)&&We.push(`inputIdx[${He}] = 0;`);return[`${We.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),e.reduceProd=($e,Oe,Ce)=>Me($e,Oe,Ce,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),e.reduceLogSum=($e,Oe,Ce)=>Me($e,Oe,Ce,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),e.reduceLogSumSquare=($e,Oe,Ce)=>Me($e,Oe,Ce,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])},7019:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isReshapeCheap=e.processDims3D=e.createPackedReshape3DProgramInfoLoader=void 0;const r=t(2517),Ee=t(5060),Te=t(2039),Re=t(2827);e.createPackedReshape3DProgramInfoLoader=(Me,Ve,De)=>{const $e=(Oe=>({name:"Reshape (packed)",inputTypes:[Te.TextureType.packed],inputNames:["A"],cacheHint:`${Oe}`}))(De);return Object.assign(Object.assign({},$e),{get:()=>((Oe,Ce,Be,Ue)=>{const We=Ce.dims,He=Ue;let Ge="";for(let Ze=0;Ze<4;Ze++){let fn="";switch(Ze){case 0:fn="outputCoords = rc;";break;case 1:fn="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:fn="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:fn="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}Ge+=`
        ${fn}
        ${Ze>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${Ze}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${Ze>0?"}":""}
      `}const Ye=(0,Ee.getGlsl)(Oe.session.backend.glContext.version),Je=`
      ${function(Ze){const fn=r.ShapeUtil.computeStrides(Ze),yn=["b","r","c"],mn="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${fn.map((pn,un)=>`int ${yn[un]} = ${mn} / ${pn}; ${un===fn.length-1?`int ${yn[un+1]} = ${mn} - ${yn[un]} * ${pn}`:`index -= ${yn[un]} * ${pn}`};`).join("")}
      return ivec3(b, r, c);
    }
  `}(We)}
      ${function(Ze){const fn=r.ShapeUtil.computeStrides(Ze);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${fn[0]} + coords.z * ${fn[1]} + coords.y;
  }
`}(He)}
      ${(0,Re.unpackFromChannel)()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${He[2]};
        int cols = ${He[1]};

        ${Ge}
        ${Ye.output} = result;
      }
    `;return Object.assign(Object.assign({},Be),{output:{dims:He,type:Ce.type,textureType:Te.TextureType.packed},shaderSource:Je,hasMain:!0})})(Me,Ve,$e,De)})},e.processDims3D=function(Me){if(Me.length===0)return[1,1,1];let Ve=1;for(let De=0;De<Me.length-2;++De)Ve*=Me[De];return[Ve,Me.length>1?Me[Me.length-2]:1,Me[Me.length-1]]},e.isReshapeCheap=function(Me,Ve){let De=!1;return De=Me.length===0||Ve.length===0||(Me.length<2||Ve.length<2?Me[Me.length-1]===Ve[Ve.length-1]:Me[Me.length-1]===Ve[Ve.length-1]&&Me[Me.length-2]===Ve[Ve.length-2]),De}},718:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reshape=void 0;const r=t(2517);e.reshape=(Ee,Te)=>{const Re=r.ShapeUtil.calculateReshapedDims(Te[0].dims,Te[1].integerData);return Ee.session.pack?[Ee.reshapePacked(Te[0],Re)]:[Ee.reshapeUnpacked(Te[0],Re)]}},2268:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseResizeAttributesV11=e.parseResizeAttributesV10=e.resize=void 0;const r=t(5060),Ee=t(2039),Te=t(9390),Re=t(2827),Me=t(9793),Ve={name:"Resize",inputNames:["A"],inputTypes:[Ee.TextureType.packed]};e.resize=(Be,Ue,We)=>((0,Me.validateInputs)(Ue,We),[Be.run(Object.assign(Object.assign({},Ve),{cacheHint:We.cacheKey,get:()=>De(Be,Ue,We)}),Ue)]),e.parseResizeAttributesV10=Be=>(0,Me.parseUpsampleAttributes)(Be,10),e.parseResizeAttributesV11=Be=>(0,Me.parseUpsampleAttributes)(Be,11);const De=(Be,Ue,We)=>{const He=(0,r.getGlsl)(Be.session.backend.glContext.version),[Ge,Ye]=$e(Ue,We);if(Ge.every(Pn=>Pn===1)&&We.coordinateTransformMode!=="tf_crop_and_resize")return Object.assign(Object.assign({},Ve),{output:{dims:Ye,type:Ue[0].type,textureType:Ee.TextureType.packed},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${He.texture2D}(X, TexCoords);
                    ${He.output} = v;
                }`});const Je=Ye.length;if(Je<2)throw new Error(`output dimension should be at least 2, but got ${Je}`);const Ze=Ye[Je-2],fn=Ye[Je-1],yn=Ue[0].dims;if(Je!==yn.length)throw new Error(`output dimension should match input ${yn.length}, but got ${Je}`);const mn=yn[Je-2],pn=yn[Je-1],un=Ge[Je-2],bn=Ge[Je-1];let gn="";if(We.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${We.mode}'`);switch(We.coordinateTransformMode){case"asymmetric":gn=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":gn=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":gn=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${fn}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${Ze}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${fn}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${Ze}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":gn=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${fn}.0 - 1.0, ${Ze}.0 - 1.0, ${fn}.0 - 1.0,
                            ${Ze}.0 - 1.0);
                        vec4 original = vec4(${pn}.0 - 1.0, ${mn}.0 - 1.0, ${pn}.0 - 1.0,
                            ${mn}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${We.coordinateTransformMode}'`)}const xn=(0,Te.getCoordsDataType)(Je),En=`
            const vec2 inputWH = vec2(${mn}.0, ${pn}.0);
            const vec4 scaleWHWH = vec4(float(${un}), float(${bn}), float(${un}), float(${bn}));
            ${(0,Re.unpackFromChannel)()}
            ${gn}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${xn} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${Ze-1};
                bool hasNextCol = rc.z < ${fn-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${He.output} = vec4(newValue);
            }
        `;return Object.assign(Object.assign({},Ve),{output:{dims:Ye,type:Ue[0].type,textureType:Ee.TextureType.packed},hasMain:!0,shaderSource:En})},$e=(Be,Ue)=>{const We=Be[0].dims;let He,Ge=Ue.scales;if(Ge.length===0){const Je=Be[Ue.scalesInputIdx];if(Je&&Je.size!==0){if(Be[Ue.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");Ge=Oe(Je,Ue.mode,Ue.isResize)}else{const Ze=Be[Ue.sizesInputIdx];if(!Ze||Ze.size===0)throw new Error("Either scales or sizes MUST be provided as input.");He=Array.from(Ze.integerData),Ge=Ce(He,We,Ue.mode,Ue.isResize)}}else if(Be[Ue.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");const Ye=He||We.map((Je,Ze)=>Math.floor(Je*Ge[Ze]));return[Ge,Ye]},Oe=(Be,Ue,We)=>{const He=Array.from(Be.floatData);return(0,Me.scalesValidation)(He,Ue,We),He},Ce=(Be,Ue,We,He)=>{const Ge=Ue.length,Ye=new Array(Ge);for(let Je=0,Ze=Ge;Je<Ze;Je++)if(Ue[Je]===0){if(Be[Je]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");Ye[Je]=1}else Ye[Je]=Be[Je]/Ue[Je];return(0,Me.scalesValidation)(Ye,We,He),Ye}},8117:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.shape=void 0;const r=t(9162);e.shape=(Te,Re)=>(Ee(Re),[new r.Tensor([Re[0].dims.length],"int32",void 0,void 0,new Int32Array(Re[0].dims))]);const Ee=Te=>{if(!Te||Te.length!==1)throw new Error("Shape requires 1 input.")}},2278:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sliceV10=e.parseSliceAttributes=e.slice=void 0;const r=t(246),Ee=t(782),Te=t(2517),Re=t(2039),Me={name:"Slice",inputNames:["A"],inputTypes:[Re.TextureType.unpacked]};e.slice=(Ce,Be,Ue)=>(De(Be),[Ce.run(Object.assign(Object.assign({},Me),{cacheHint:Ue.cacheKey,get:()=>Ve(Ce,Be[0],Ue)}),Be)]),e.parseSliceAttributes=Ce=>{const Be=Ce.attributes.getInts("starts"),Ue=Ce.attributes.getInts("ends"),We=Ce.attributes.getInts("axes",[]);return(0,r.createAttributeWithCacheKey)({starts:Be,ends:Ue,axes:We})};const Ve=(Ce,Be,Ue)=>{const We=Ue.axes.length===0?Be.dims.slice(0).map((yn,mn)=>mn):Ue.axes,He=Te.ShapeUtil.normalizeAxes(We,Be.dims.length),Ge=Ue.starts.map((yn,mn)=>yn>Be.dims[He[mn]]-1?Be.dims[He[mn]]:Te.ShapeUtil.normalizeAxis(yn,Be.dims[He[mn]])),Ye=Ue.ends.map((yn,mn)=>yn>Be.dims[He[mn]]-1?Be.dims[He[mn]]:Te.ShapeUtil.normalizeAxis(yn,Be.dims[He[mn]])),Je=Be.dims.slice(),Ze=[];for(let yn=0;yn<He.length;yn++)Je[He[yn]]=Ye[yn]-Ge[yn],Ge[yn]>0&&Ze.push(`outputIdx[${He[yn]}] += ${Ge[yn]};`);const fn=`
      float process(int outputIdx[${Je.length}]) {
        ${Ze.join(`
      `)}
        return _A(outputIdx);
      }`;return Object.assign(Object.assign({},Me),{output:{dims:Je,type:Be.type,textureType:Re.TextureType.unpacked},shaderSource:fn})},De=Ce=>{if(!Ce||Ce.length!==1)throw new Error("Slice requires 1 input.");if(Ee.NUMBER_TYPES.indexOf(Ce[0].type)===-1)throw new Error("Invalid input type.")};e.sliceV10=(Ce,Be)=>{Oe(Be);const Ue=$e(Ce,Be);return[Ce.run(Object.assign(Object.assign({},Me),{cacheHint:Ue.cacheKey,get:()=>Ve(Ce,Be[0],Ue)}),[Be[0]])]};const $e=(Ce,Be)=>{if(!Ce.session.isInitializer(Be[1].dataId)||!Ce.session.isInitializer(Be[2].dataId)||Be.length>=4&&!Ce.session.isInitializer(Be[3].dataId)||Be.length>=5&&!Ce.session.isInitializer(Be[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(Be.length>=5&&Be[4].integerData.some(Ge=>Ge!==1))throw new Error("currently non-1 steps is not supported for Slice");const Ue=Array.from(Be[1].integerData),We=Array.from(Be[2].integerData),He=Be.length>=4?Array.from(Be[3].integerData):[];return{starts:Ue,ends:We,axes:He,cacheKey:`${He};${Ue};${We}`}},Oe=Ce=>{if(!Ce||Ce.length<3||Ce.length>5)throw new Error("Invalid input number.");if(Ce[1].type!=="int32"||Ce[1].dims.length!==1)throw new Error("Invalid input type.");if(Ce[2].type!=="int32"||Ce[2].dims.length!==1)throw new Error("Invalid input type.");if(Ce.length>=4&&(Ce[3].type!=="int32"||Ce[3].dims.length!==1))throw new Error("Invalid input type.");if(Ce.length>=5&&(Ce[4].type!=="int32"||Ce[4].dims.length!==1))throw new Error("Invalid input type.")}},5524:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.softmaxV13=e.parseSoftmaxAttributesV13=e.parseSoftmaxAttributes=e.softmax=void 0;const r=t(246),Ee=t(2517),Te=t(5060),Re=t(2039),Me=t(3738),Ve={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[Re.TextureType.unpacked]},De={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[Re.TextureType.unpacked,Re.TextureType.unpacked]},$e={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[Re.TextureType.unpacked,Re.TextureType.unpacked,Re.TextureType.unpacked]};e.softmax=(He,Ge,Ye)=>{We(Ge);const Je=Ge[0].dims.slice(),Ze=Ee.ShapeUtil.normalizeAxis(Ye.axis,Je.length),fn=Ee.ShapeUtil.sizeToDimension(Je,Ze),yn=Ee.ShapeUtil.sizeFromDimension(Je,Ze);return Oe(He,Ge,Ye,fn,yn)},e.parseSoftmaxAttributes=He=>(0,r.createAttributeWithCacheKey)({axis:He.attributes.getInt("axis",1)}),e.parseSoftmaxAttributesV13=He=>(0,r.createAttributeWithCacheKey)({axis:He.attributes.getInt("axis",-1)}),e.softmaxV13=(He,Ge,Ye)=>{We(Ge);const Je=Ge[0].dims.slice(),Ze=Ee.ShapeUtil.normalizeAxis(Ye.axis,Je.length),fn=Je.length,yn=Ze!==fn-1,mn=[];let pn,un=[],bn=[];yn&&(un=Array.from({length:fn}).map((Pn,Ln)=>Ln),un[Ze]=fn-1,un[fn-1]=Ze,un.map(Pn=>mn.push(Je[Pn])),pn=(0,r.createAttributeWithCacheKey)({perm:un}),bn=(0,Me.transpose)(He,Ge,pn));const gn=yn?Ee.ShapeUtil.sizeToDimension(mn,fn-1):Ee.ShapeUtil.sizeToDimension(Je,fn-1),xn=yn?Ee.ShapeUtil.sizeFromDimension(mn,fn-1):Ee.ShapeUtil.sizeFromDimension(Je,fn-1),En=Oe(He,yn?bn:Ge,Ye,gn,xn);return yn?(0,Me.transpose)(He,En,pn):En};const Oe=(He,Ge,Ye,Je,Ze)=>{const fn=Ce(He,Ge[0],Je,Ze,[Je]),yn=He.run(Object.assign(Object.assign({},Ve),{cacheHint:Ye.cacheKey,get:()=>fn}),Ge),mn=Be(He,Ge[0],Je,Ze,fn.output.dims,[Je]),pn=He.run(Object.assign(Object.assign({},De),{cacheHint:Ye.cacheKey,get:()=>mn}),[Ge[0],yn]),un=Ue(He,Ge[0],Je,Ze,fn.output.dims,mn.output.dims);return[He.run(Object.assign(Object.assign({},$e),{cacheHint:Ye.cacheKey,get:()=>un}),[Ge[0],yn,pn])]},Ce=(He,Ge,Ye,Je,Ze)=>{const[fn,yn]=He.calculateTextureWidthAndHeight(Ge.dims,Re.TextureType.unpacked),mn=Ze.length;if(Ye<1||Je<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(Ze.length!==1)throw new Error("Dimensionality of the output should be 1");if(Ze[0]!==Ye)throw new Error("Shape of the output should be equal to logical row count");const pn=(0,Te.getGlsl)(He.session.backend.glContext.version),un=`
      float process(int[${mn}] indices) {
        int logical_row_start_offset = indices[0] * ${Je};

        float max = getColorAsFloat(${pn.texture2D}(A, offsetToCoords(logical_row_start_offset, ${fn},
        ${yn} )));
        for(int i=1; i<${Je}; ++i)
        {
          float current = getColorAsFloat(${pn.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${fn}, ${yn})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return Object.assign(Object.assign({},Ve),{output:{dims:Ze,type:Ge.type,textureType:Re.TextureType.unpacked},shaderSource:un})},Be=(He,Ge,Ye,Je,Ze,fn)=>{const[yn,mn]=He.calculateTextureWidthAndHeight(Ge.dims,Re.TextureType.unpacked),pn=fn.length;if(Ye<1||Je<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(fn.length!==1)throw new Error("Dimensionality of the output should be 1");if(fn[0]!==Ye)throw new Error("Shape of the output should be equal to logical row count");if(Ze.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(Ze[0]!==Ye)throw new Error("Shape of the intermediate results should be equal to logical row count");const un=`
      float process(int[${pn}] indices) {
        int logical_row_start_offset = indices[0] * ${Je};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${Je}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${(0,Te.getGlsl)(He.session.backend.glContext.version).texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${yn}, ${mn}))) - max);
        }

        return norm_factor;
      }`;return Object.assign(Object.assign({},De),{output:{dims:fn,type:Ge.type,textureType:Re.TextureType.unpacked},shaderSource:un})},Ue=(He,Ge,Ye,Je,Ze,fn)=>{const[yn,mn]=He.calculateTextureWidthAndHeight(Ge.dims,Re.TextureType.unpacked),pn=Ge.dims.length;if(Ye<1||Je<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(Ze.length!==1||fn.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(Ze[0]!==Ye||fn[0]!==Ye)throw new Error("Shape of the intermediate results should be equal to logical row count");const un=`
      float process(int[${pn}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${yn}, ${mn});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${Je};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return Object.assign(Object.assign({},$e),{output:{dims:Ge.dims,type:Ge.type,textureType:Re.TextureType.unpacked},shaderSource:un})},We=He=>{if(!He||He.length!==1)throw new Error("Softmax requires 1 input.");if(He[0].type!=="float32"&&He[0].type!=="float64")throw new Error("Invalid input type")}},5975:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseSplitAttributes=e.split=void 0;const r=t(246),Ee=t(2517),Te=t(2039),Re={name:"Split",inputNames:["A"],inputTypes:[Te.TextureType.unpacked]};e.split=($e,Oe,Ce)=>{De(Oe);const Be=Ee.ShapeUtil.normalizeAxis(Ce.axis,Oe[0].dims.length),Ue=Me($e,Oe,Be,Ce),We=[];for(let He=0;He<Ue;++He)We.push($e.run(Object.assign(Object.assign({},Re),{cacheHint:`${Ce.cacheKey};${He}`,get:()=>Ve($e,Oe[0],Ce,Be,He)}),Oe));return We},e.parseSplitAttributes=$e=>{const Oe=$e.attributes.getInt("axis",0),Ce=$e.attributes.getInts("split",[]),Be=$e.outputs.length;return(0,r.createAttributeWithCacheKey)({axis:Oe,split:Ce,numOutputs:Be})};const Me=($e,Oe,Ce,Be)=>{const[,Ue]=Ee.SplitUtil.splitShape(Oe[0].dims,Ce,Be.split,Be.numOutputs);return Ue.length},Ve=($e,Oe,Ce,Be,Ue)=>{const[We,He]=Ee.SplitUtil.splitShape(Oe.dims,Be,Ce.split,Ce.numOutputs),Ge=He[Ue],Ye=We[Ue],Je=`
      float process(int indices[${Ye.length}]) {
        indices[${Be}] += ${Ge};
        return _A(indices);
      }
    `;return Object.assign(Object.assign({},Re),{cacheHint:`${Ce.cacheKey}:${Ue}`,output:{dims:Ye,type:Oe.type,textureType:Te.TextureType.unpacked},shaderSource:Je})},De=$e=>{if(!$e||$e.length!==1)throw new Error("Split requires one input.");if($e[0].type!=="int8"&&$e[0].type!=="uint8"&&$e[0].type!=="int16"&&$e[0].type!=="uint16"&&$e[0].type!=="int32"&&$e[0].type!=="uint32"&&$e[0].type!=="float32"&&$e[0].type!=="float64"&&$e[0].type!=="bool")throw new Error("Invalid input type.")}},3933:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseSqueezeAttributes=e.squeezeV13=e.squeeze=void 0;const r=t(2517);e.squeeze=(Re,Me,Ve)=>{Ee(Me);const De=r.ShapeUtil.squeezeShape(Me[0].dims,Ve);return[Re.reshapeUnpacked(Me[0],De)]},e.squeezeV13=(Re,Me)=>(Te(Me),(0,e.squeeze)(Re,[Me[0]],Array.from(Me[1].integerData))),e.parseSqueezeAttributes=Re=>Re.attributes.getInts("axes");const Ee=Re=>{if(!Re||Re.length!==1)throw new Error("Squeeze requires 1 input.");if(Re[0].type==="string")throw new Error("invalid input tensor types.")},Te=Re=>{if(!Re||Re.length!==2)throw new Error("Squeeze requires 2 inputs.");if(Re[1].type!=="int32")throw new Error("Invalid input type.")}},6558:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.sum=void 0;const r=t(5060),Ee=t(2039);e.sum=(Me,Ve)=>{Re(Ve);const De={name:"Sum",inputNames:Ve.map(($e,Oe)=>`X${Oe}`),inputTypes:new Array(Ve.length).fill(Ee.TextureType.unpacked)};return[Me.run(Object.assign(Object.assign({},De),{get:()=>Te(Me,Ve,De)}),Ve)]};const Te=(Me,Ve,De)=>{const $e=(0,r.getGlsl)(Me.session.backend.glContext.version),Oe=Ve[0].dims.slice(),Ce=`
      void main() {
        vec4 result = ${Ve.map((Be,Ue)=>`${$e.texture2D}(X${Ue},TexCoords)`).join(" + ")};
        ${$e.output} = result;
      }
    `;return Object.assign(Object.assign({},De),{output:{dims:Oe,type:Ve[0].type,textureType:Ee.TextureType.unpacked},hasMain:!0,shaderSource:Ce})},Re=Me=>{if(!Me||Me.length===0)throw new Error("Sum requires inputs.");const Ve=Me[0].dims.length;for(let De=1;De<Me.length;De++){if(Ve!==Me[De].dims.length)throw new Error("Input shapes are mismatched.");for(let $e=0;$e<Ve;$e++)if(Me[0].dims[$e]!==Me[De].dims[$e])throw new Error("Input shapes are not matched.")}if(Me[0].type!=="float32"&&Me[0].type!=="float64")throw new Error("Invalid input type.");for(let De=1;De<Me.length;De++)if(Me[0].type!==Me[De].type)throw new Error("Input types are not matched.")}},5723:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tile=void 0;const r=t(782),Ee=t(2039);e.tile=(Me,Ve)=>{Re(Ve);const De={name:"Tile",inputNames:["A"],inputTypes:[Ee.TextureType.unpacked]};return[Me.run(Object.assign(Object.assign({},De),{get:()=>Te(Me,Ve,De)}),Ve)]};const Te=(Me,Ve,De)=>{const $e=Ve[0].dims.slice(),Oe=new Array($e.length),Ce=[];for(let We=0;We<$e.length;We++)Oe[We]=$e[We]*Ve[1].numberData[We],Ce.push(`inputIdx[${We}] = int(mod(float(outputIdx[${We}]), ${$e[We]}.));`);const Be=Oe.length,Ue=`
      float process(int outputIdx[${Be}]) {
        int inputIdx[${Be}];
        ${Ce.join(`
`)}
        return _A(inputIdx);
      }
    `;return Object.assign(Object.assign({},De),{output:{dims:Oe,type:Ve[0].type,textureType:Ee.TextureType.unpacked},shaderSource:Ue})},Re=Me=>{if(!Me||Me.length!==2)throw new Error("Tile requires 2 input.");if(Me[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(Me[1].dims[0]!==Me[0].dims.length)throw new Error("Invalid input shape.");if(r.NUMBER_TYPES.indexOf(Me[0].type)===-1)throw new Error("Invalid input type.");if(Me[1].type!=="int32"&&Me[1].type!=="int16")throw new Error("Invalid repeat type.")}},3738:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseTransposeAttributes=e.transpose=void 0;const r=t(246),Ee=t(2517),Te=t(2039),Re={name:"Transpose",inputNames:["A"],inputTypes:[Te.TextureType.unpacked]};e.transpose=(Ce,Be,Ue)=>(Oe(Be),[Ce.run(Object.assign(Object.assign({},Re),{cacheHint:Ue.cacheKey,get:()=>Me(Ce,Be[0],Ue.perm)}),Be)]),e.parseTransposeAttributes=Ce=>(0,r.createAttributeWithCacheKey)({perm:Ce.attributes.getInts("perm",[])});const Me=(Ce,Be,Ue)=>{const We=Be.dims;Ue=Ve(We,Ue);const He=De(We,Ue),Ge=We.length,Ye=`
      ${$e("perm",Ue,Ge)}
      float process(int indices[${Ge}]) {
        int a[${Ge}];
        perm(a, indices);
        return _A(a);
      }`;return Object.assign(Object.assign({},Re),{output:{dims:He,type:Be.type,textureType:Te.TextureType.unpacked},shaderSource:Ye})},Ve=(Ce,Be)=>(Be&&Be.length!==Ce.length&&(Be=[...Ce.keys()].reverse()),Be),De=(Ce,Be)=>(Be=Ve(Ce,Be),Ee.ShapeUtil.sortBasedOnPerm(Ce,Be)),$e=(Ce,Be,Ue)=>{const We=[];We.push(`void ${Ce}(out int a[${Ue}], int src[${Ue}]) {`);for(let He=0;He<Ue;++He)We.push(`	a[${Be[He]}]=src[${He}];`);return We.push("	}"),We.join(`
`)},Oe=Ce=>{if(!Ce||Ce.length!==1)throw new Error("Transpose requires 1 input.");if(Ce[0].type!=="float32"&&Ce[0].type!=="float64")throw new Error("input should be float tensor")}},8710:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.encodeAsUint8=void 0;const r=t(5060),Ee=t(2039);e.encodeAsUint8=(Te,Re)=>{const Me=Re.shape,Ve=(0,r.getGlsl)(Te.session.backend.glContext.version),De=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${Ve.texture2D}(X,TexCoords).r;
      ${Ve.output} = encodeAsUint8(value);
    }`,$e={name:"Uint8Encode",inputTypes:[Ee.TextureType.unpacked],inputNames:["X"],output:{dims:Me,type:Re.tensor.type,textureType:Ee.TextureType.downloadUint8AsFloat},shaderSource:De,hasMain:!0};return Te.executeProgram($e,[Re.tensor])}},4909:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tanh=e.tan=e.sqrt=e.sin=e.sigmoid=e.relu=e.not=e.neg=e.log=e.parseLeakyReluAttributes=e.leakyRelu=e.identity=e.floor=e.exp=e.parseEluAttributes=e.elu=e.cos=e.ceil=e.clipV11=e.parseClipAttributes=e.clip=e.atan=e.asin=e.acos=e.abs=e.glslTanh=e.glslTan=e.glslSqrt=e.glslSigmoid=e.glslRelu=e.glslSin=e.glslNot=e.glslNeg=e.glslLog=e.glslLeakyRelu=e.glslIdentity=e.glslClip=e.glslFloor=e.glslExp=e.glslElu=e.glslCos=e.glslCeil=e.glslAtan=e.glslAsin=e.glslAcos=e.glslAbs=void 0;const r=t(246),Ee=t(2517),Te=t(8520),Re=t(5060),Me=t(2039);function Ve(){return En("abs")}function De(){return En("acos")}function $e(){return En("asin")}function Oe(){return En("atan")}function Ce(){return En("ceil")}function Be(){return En("cos")}function Ue(Cn){return{body:`
  const float alpha = float(${Cn});

  float elu_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 elu_(vec4 v) {
    return vec4(elu_(v.x), elu_(v.y), elu_(v.z), elu_(v.w));
  }
  `,name:"elu",type:Te.FunctionType.ValueBased}}function We(){return En("exp")}function He(){return En("floor")}function Ge(Cn,Dn){const Un="clip";return{body:`
  const float min = float(${Cn});
  const float max = float(${Dn});

  float ${Un}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${Un}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:Un,type:Te.FunctionType.ValueBased}}function Ye(){const Cn="indentity";return{body:`
  float ${Cn}_(float a) {
    return a;
  }
  vec4 ${Cn}_(vec4 v) {
    return v;
  }
  `,name:Cn,type:Te.FunctionType.ValueBased}}function Je(Cn){const Dn="leakyRelu";return{body:`
  const float alpha = float(${Cn});

  float ${Dn}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${Dn}_(vec4 v) {
    return vec4(${Dn}_(v.x), ${Dn}_(v.y), ${Dn}_(v.z), ${Dn}_(v.w));
  }
  `,name:Dn,type:Te.FunctionType.ValueBased}}function Ze(){return En("log")}function fn(){return{body:`
  float neg_(float a) {
    return -a;
  }
  vec4 neg_(vec4 v) {
    return -v;
  }
  `,name:"neg",type:Te.FunctionType.ValueBased}}function yn(){return{body:`
  float not_(float a) {
    return float( ! bool(a) );
  }
  bool not_(bool a) {
    return !a;
  }
  vec4 not_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 not_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:"not",type:Te.FunctionType.ValueBased}}function mn(){return En("sin")}function pn(){const Cn="relu";return{body:`
  float ${Cn}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${Cn}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:Cn,type:Te.FunctionType.ValueBased}}function un(){const Cn="sigmoid";return{body:`
  float ${Cn}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${Cn}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:Cn,type:Te.FunctionType.ValueBased}}function bn(){return En("sqrt")}function gn(){return En("tan")}function xn(){const Cn="tanh";return{body:`
  float ${Cn}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${Cn}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:Cn,type:Te.FunctionType.ValueBased}}function En(Cn){return{body:`
  float ${Cn}_(float a) {
    return ${Cn}(a);
  }
  vec4 ${Cn}_(vec4 v) {
    return ${Cn}(v);
  }
  `,name:Cn,type:Te.FunctionType.ValueBased}}e.glslAbs=Ve,e.glslAcos=De,e.glslAsin=$e,e.glslAtan=Oe,e.glslCeil=Ce,e.glslCos=Be,e.glslElu=Ue,e.glslExp=We,e.glslFloor=He,e.glslClip=Ge,e.glslIdentity=Ye,e.glslLeakyRelu=Je,e.glslLog=Ze,e.glslNeg=fn,e.glslNot=yn,e.glslSin=mn,e.glslRelu=pn,e.glslSigmoid=un,e.glslSqrt=bn,e.glslTan=gn,e.glslTanh=xn;const Pn=(Cn,Dn,Un,Wn)=>{const On=Cn.session.pack?Me.TextureType.packed:Me.TextureType.unpacked,$n={name:Un.name,inputTypes:[On],inputNames:["A"],cacheHint:Wn};return Object.assign(Object.assign({},$n),{get:()=>((kn,In,Kn,Qn)=>{const rr=kn.session.pack?Me.TextureType.packed:Me.TextureType.unpacked,or=(0,Re.getGlsl)(kn.session.backend.glContext.version);return Object.assign(Object.assign({},In),{output:{dims:Kn.dims,type:Kn.type,textureType:rr},shaderSource:`
     ${Qn.body}
     void main() {
       vec4 v = ${or.texture2D}(A, TexCoords);
       v = ${Qn.name}_(v);
       ${or.output} = v;
     }
     `,hasMain:!0})})(Cn,$n,Dn,Un)})};e.abs=(Cn,Dn)=>[Cn.run(Pn(Cn,Dn[0],Ve()),Dn)],e.acos=(Cn,Dn)=>[Cn.run(Pn(Cn,Dn[0],De()),Dn)],e.asin=(Cn,Dn)=>[Cn.run(Pn(Cn,Dn[0],$e()),Dn)],e.atan=(Cn,Dn)=>[Cn.run(Pn(Cn,Dn[0],Oe()),Dn)],e.clip=(Cn,Dn,Un)=>[Cn.run(Pn(Cn,Dn[0],Ge(Un.min,Un.max),Un.cacheKey),Dn)],e.parseClipAttributes=Cn=>(0,r.createAttributeWithCacheKey)({min:Cn.attributes.getFloat("min",Ee.MIN_CLIP),max:Cn.attributes.getFloat("max",Ee.MAX_CLIP)}),e.clipV11=(Cn,Dn)=>{const Un=Ln(Cn,Dn);return(0,e.clip)(Cn,[Dn[0]],Un)};const Ln=(Cn,Dn)=>{if(Dn.length>=3&&(!Cn.session.isInitializer(Dn[1].dataId)||!Cn.session.isInitializer(Dn[2].dataId)))throw new Error("dynamic clip attributes are not allowed");const Un=Dn.length>=3?Dn[1].numberData[0]:Ee.MIN_CLIP,Wn=Dn.length>=3?Dn[2].numberData[0]:Ee.MAX_CLIP;return(0,r.createAttributeWithCacheKey)({min:Un,max:Wn})};e.ceil=(Cn,Dn)=>[Cn.run(Pn(Cn,Dn[0],Ce()),Dn)],e.cos=(Cn,Dn)=>[Cn.run(Pn(Cn,Dn[0],Be()),Dn)],e.elu=(Cn,Dn,Un)=>[Cn.run(Pn(Cn,Dn[0],Ue(Un.alpha),Un.cacheKey),Dn)],e.parseEluAttributes=Cn=>(0,r.createAttributeWithCacheKey)({alpha:Cn.attributes.getFloat("alpha",1)}),e.exp=(Cn,Dn)=>[Cn.run(Pn(Cn,Dn[0],We()),Dn)],e.floor=(Cn,Dn)=>[Cn.run(Pn(Cn,Dn[0],He()),Dn)],e.identity=(Cn,Dn)=>[Cn.run(Pn(Cn,Dn[0],Ye()),Dn)],e.leakyRelu=(Cn,Dn,Un)=>[Cn.run(Pn(Cn,Dn[0],Je(Un.alpha),Un.cacheKey),Dn)],e.parseLeakyReluAttributes=Cn=>(0,r.createAttributeWithCacheKey)({alpha:Cn.attributes.getFloat("alpha",.01)}),e.log=(Cn,Dn)=>[Cn.run(Pn(Cn,Dn[0],Ze()),Dn)],e.neg=(Cn,Dn)=>[Cn.run(Pn(Cn,Dn[0],fn()),Dn)],e.not=(Cn,Dn)=>[Cn.run(Pn(Cn,Dn[0],yn()),Dn)],e.relu=(Cn,Dn)=>[Cn.run(Pn(Cn,Dn[0],pn()),Dn)],e.sigmoid=(Cn,Dn)=>[Cn.run(Pn(Cn,Dn[0],un()),Dn)],e.sin=(Cn,Dn)=>[Cn.run(Pn(Cn,Dn[0],mn()),Dn)],e.sqrt=(Cn,Dn)=>[Cn.run(Pn(Cn,Dn[0],bn()),Dn)],e.tan=(Cn,Dn)=>[Cn.run(Pn(Cn,Dn[0],gn()),Dn)],e.tanh=(Cn,Dn)=>[Cn.run(Pn(Cn,Dn[0],xn()),Dn)]},5611:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createUnpackProgramInfoLoader=e.createUnpackProgramInfo=void 0;const r=t(5060),Ee=t(2039),Te=t(9390),Re=t(2827),Me={name:"unpack",inputNames:["A"],inputTypes:[Ee.TextureType.packed]};e.createUnpackProgramInfo=(Ve,De)=>{const $e=De.dims.length,Oe=(0,Re.getChannels)("rc",$e),Ce=Oe.slice(-2),Be=(0,Te.getCoordsDataType)($e),Ue=(0,Re.unpackFromChannel)(),We=De.dims.length===0?"":function(Ye,Je){if(Ye===1)return"rc";let Ze="";for(let fn=0;fn<Ye;fn++)Ze+=Je[fn],fn<Ye-1&&(Ze+=",");return Ze}($e,Oe),He=$e<=1?"rc":`vec2(${Ce.join(",")})`,Ge=`
    ${Ue}
    void main() {
      ${Be} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${We});

       ${(0,r.getGlsl)(Ve.session.backend.glContext.version).output} = vec4(getChannel(packedInput, ${He}), 0, 0, 0);
     }
   `;return Object.assign(Object.assign({},Me),{hasMain:!0,output:{dims:De.dims,type:De.type,textureType:Ee.TextureType.unpacked},shaderSource:Ge})},e.createUnpackProgramInfoLoader=(Ve,De)=>Object.assign(Object.assign({},Me),{get:()=>(0,e.createUnpackProgramInfo)(Ve,De)})},8428:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseUnsqueezeAttributes=e.unsqueezeV13=e.unsqueeze=void 0;const r=t(2517);e.unsqueeze=(Re,Me,Ve)=>{Ee(Me);const De=r.ShapeUtil.unsqueezeShape(Me[0].dims,Ve);return[Re.reshapeUnpacked(Me[0],De)]},e.unsqueezeV13=(Re,Me)=>(Te(Me),(0,e.unsqueeze)(Re,[Me[0]],Array.from(Me[1].integerData))),e.parseUnsqueezeAttributes=Re=>Re.attributes.getInts("axes");const Ee=Re=>{if(!Re||Re.length!==1)throw new Error("Unsqueeze requires 1 input.");if(Re[0].type==="string")throw new Error("invalid input tensor types.")},Te=Re=>{if(!Re||Re.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(Re[1].type!=="int32")throw new Error("Invalid input type.")}},9793:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.scalesValidation=e.validateInputs=e.parseUpsampleAttributes=e.parseUpsampleAttributesV9=e.parseUpsampleAttributesV7=e.upsample=void 0;const r=t(246),Ee=t(5060),Te=t(2039),Re={name:"Upsample",inputNames:["X"],inputTypes:[Te.TextureType.unpacked]};e.upsample=(Ve,De,$e)=>((0,e.validateInputs)(De,$e),[Ve.run(Object.assign(Object.assign({},Re),{cacheHint:$e.cacheKey,get:()=>Me(Ve,De,$e)}),De)]),e.parseUpsampleAttributesV7=Ve=>(0,e.parseUpsampleAttributes)(Ve,7),e.parseUpsampleAttributesV9=Ve=>(0,e.parseUpsampleAttributes)(Ve,9),e.parseUpsampleAttributes=(Ve,De)=>{const $e=De>=10,Oe=Ve.attributes.getString("mode","nearest");if(Oe!=="nearest"&&Oe!=="linear"&&(De<11||Oe!=="cubic"))throw new Error(`unrecognized mode: ${Oe}`);let Ce=[];De<9&&(Ce=Ve.attributes.getFloats("scales"),(0,e.scalesValidation)(Ce,Oe,$e));const Be=Ve.attributes.getFloat("extrapolation_value",0),Ue=De>10?Ve.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(Ue)===-1)throw new Error(`coordinate_transform_mode '${Ue}' is not supported`);const We=Ue==="tf_crop_and_resize",He=We,Ge=Oe==="nearest"&&De>=11?Ve.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(Ge)===-1)throw new Error(`nearest_mode '${Ge}' is not supported`);const Ye=Ve.attributes.getFloat("cubic_coeff_a",-.75),Je=Ve.attributes.getInt("exclude_outside",0)!==0;if(Je&&Oe!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");const Ze=De<11||Oe==="nearest"&&Ue==="asymmetric"&&Ge==="floor";let fn=0,yn=0,mn=0;return De>10?Ve.inputs.length>2?(fn=1,yn=2,mn=3):(yn=1,mn=2):De===9&&(yn=1),(0,r.createAttributeWithCacheKey)({opset:De,isResize:$e,mode:Oe,scales:Ce,extrapolationValue:Be,coordinateTransformMode:Ue,useExtrapolation:He,needRoiInput:We,nearestMode:Ge,cubicCoefficientA:Ye,excludeOutside:Je,useNearest2xOptimization:Ze,roiInputIdx:fn,scalesInputIdx:yn,sizesInputIdx:mn})};const Me=(Ve,De,$e)=>{const Oe=(0,Ee.getGlsl)(Ve.session.backend.glContext.version),[Ce,Be]=Ve.calculateTextureWidthAndHeight(De[0].dims,Te.TextureType.unpacked),Ue=De[0].dims.map((mn,pn)=>Math.floor(mn*$e.scales[pn])),[We,He]=Ve.calculateTextureWidthAndHeight(Ue,Te.TextureType.unpacked),Ge=Ue.length,Ye=new Array(Ge),Je=new Array(Ge);let Ze=`
      int output_pitches[${Ge}];
      int input_pitches[${Ge}];
      `;for(let mn=Ge-1;mn>=0;mn--)Ye[mn]=mn===Ge-1?1:Ye[mn+1]*Ue[mn+1],Je[mn]=mn===Ge-1?1:Je[mn+1]*De[0].dims[mn+1],Ze+=`
        output_pitches[${mn}] = ${Ye[mn]};
        input_pitches[${mn}] = ${Je[mn]};
        `;const fn=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${Ce}, ${Be});
        float value = getColorAsFloat(${Oe.texture2D}(X, coords));
        return value;
      }
      `,yn=$e.mode==="nearest"?`
    ${fn}
    float process(int indices[${Ge}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${We}, ${He});

      ${Ze}

      int d, m;
      for (int dim = 0; dim < ${Ge}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:Ge===4?`
    ${fn}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${We}, ${He});

      ${Ze}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${De[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${fn}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${We}, ${He});

      ${Ze}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${De[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return Object.assign(Object.assign({},Re),{output:{dims:Ue,type:De[0].type,textureType:Te.TextureType.unpacked},shaderSource:yn,variables:[{name:"scales",type:"int",arrayLength:$e.scales.length,data:$e.scales.map(mn=>Math.ceil(mn))}]})};e.validateInputs=(Ve,De)=>{if(!Ve||De.opset<9&&Ve.length!==1||De.opset>=9&&De.opset<11&&Ve.length!==2||De.opset>=11&&Ve.length<2)throw new Error("invalid inputs.");if(De.scales.length>0&&Ve[0].dims.length!==De.scales.length)throw new Error("Invalid input shape.");if(Ve[0].type==="string")throw new Error("Invalid input tensor types.")},e.scalesValidation=(Ve,De,$e)=>{if($e){for(const Oe of Ve)if(Oe<=0)throw new Error("Scale value should be greater than 0.")}else for(const Oe of Ve)if(Oe<1)throw new Error("Scale value should be greater than or equal to 1.");if(!(De!=="linear"&&De!=="cubic"||Ve.length===2||Ve.length===4&&Ve[0]===1&&Ve[1]===1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${$e?"Resize":"Upsample"} opeartor.`)}},1958:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ProgramManager=void 0;const r=t(1670),Ee=t(6231),Te=t(8879),Re=t(5060);e.ProgramManager=class{constructor(Me,Ve,De){this.profiler=Me,this.glContext=Ve,this.textureLayoutStrategy=De,this.repo=new Map,this.attributesBound=!1}getArtifact(Me){return this.repo.get(Me)}setArtifact(Me,Ve){this.repo.set(Me,Ve)}run(Me,Ve,De){var $e;this.profiler.event("op",`ProgramManager.run ${($e=Me.programInfo.name)!==null&&$e!==void 0?$e:"unknown kernel"}`,()=>{var Oe;const Ce=this.glContext.gl,Be=Me.program;Ce.useProgram(Be);try{this.bindOutput(De),this.attributesBound||this.bindAttributes(Me.attribLocations),this.bindUniforms(Me.uniformLocations,(Oe=Me.programInfo.variables)!==null&&Oe!==void 0?Oe:[],Ve)}catch(Ue){throw Ee.Logger.error("ProgramManager",Me.programInfo.shaderSource),Ue}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(Me=>this.glContext.deleteProgram(Me.program))}build(Me,Ve,De){return this.profiler.event("backend","ProgramManager.build",()=>{const $e=new Te.GlslPreprocessor(this.glContext,Me,Ve,De),Oe=$e.preprocess(),Ce=this.compile(Oe);return{programInfo:Me,program:Ce,uniformLocations:this.getUniformLocations(Ce,$e.context.programInfo.inputNames,$e.context.programInfo.variables),attribLocations:this.getAttribLocations(Ce)}})}compile(Me){if(!this.vertexShader){Ee.Logger.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");const $e=(0,Re.getVertexShaderSource)(this.glContext.version);this.vertexShader=this.glContext.compileShader($e,this.glContext.gl.VERTEX_SHADER)}r.env.debug&&Ee.Logger.verbose("ProrgramManager",`FragShader:
${Me}
`);const Ve=this.glContext.compileShader(Me,this.glContext.gl.FRAGMENT_SHADER),De=this.glContext.createProgram(this.vertexShader,Ve);return this.glContext.deleteShader(Ve),De}bindOutput(Me){const Ve=Me.width,De=Me.height;Ee.Logger.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${Ve}/${De}, shape=${Me.shape}, type=${Me.tensor.type}`),this.glContext.attachFramebuffer(Me.texture,Ve,De)}bindAttributes(Me){const Ve=Me.position,De=Me.textureCoord;this.glContext.setVertexAttributes(Ve,De),this.attributesBound=!0}bindUniforms(Me,Ve,De){var $e;const Oe=this.glContext.gl;let Ce=0;for(const{name:Be,type:Ue,location:We,arrayLength:He}of Me){const Ge=($e=Ve.find(Ye=>Ye.name===Be))===null||$e===void 0?void 0:$e.data;if(Ue!=="sampler2D"&&!Ge)throw new Error(`variable '${Be}' does not have data defined in program info`);switch(Ue){case"sampler2D":this.bindTexture(De[Ce],We,Ce),Ce++;break;case"float":He?Oe.uniform1fv(We,Ge):Oe.uniform1f(We,Ge);break;case"int":He?Oe.uniform1iv(We,Ge):Oe.uniform1i(We,Ge);break;default:throw new Error(`Uniform not implemented: ${Ue}`)}}}bindTexture(Me,Ve,De){this.glContext.bindTextureToUniform(Me.texture,De,Ve)}getAttribLocations(Me){return{position:this.getAttribLocation(Me,"position"),textureCoord:this.getAttribLocation(Me,"textureCoord")}}getUniformLocations(Me,Ve,De){const $e=[];if(Ve)for(const Oe of Ve)$e.push({name:Oe,type:"sampler2D",location:this.getUniformLocation(Me,Oe)});if(De)for(const Oe of De)$e.push(Object.assign(Object.assign({},Oe),{location:this.getUniformLocation(Me,Oe.name)}));return $e}getUniformLocation(Me,Ve){const De=this.glContext.gl.getUniformLocation(Me,Ve);if(De===null)throw new Error(`Uniform ${Ve} not found.`);return De}getAttribLocation(Me,Ve){return this.glContext.gl.getAttribLocation(Me,Ve)}}},6416:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLSessionHandler=void 0;const r=t(6231),Ee=t(1047),Te=t(8316),Re=t(1640),Me=t(1958),Ve=t(7859),De=t(5702);e.WebGLSessionHandler=class{constructor($e,Oe){this.backend=$e,this.context=Oe,this.layoutStrategy=new Ve.PreferLogicalStrategy($e.glContext.maxTextureSize),this.programManager=new Me.ProgramManager(this.context.profiler,$e.glContext,this.layoutStrategy),this.textureManager=new De.TextureManager($e.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:$e.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=$e.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new Te.WebGLInferenceHandler(this)}onGraphInitialized($e){const Oe=$e.getValues().filter(Ce=>Ce.from===-1&&Ce.tensor).map(Ce=>Ce.tensor.dataId);this.initializers=new Set(Oe)}isInitializer($e){return!!this.initializers&&this.initializers.has($e)}addInitializer($e){this.initializers.add($e)}getTextureData($e,Oe){return Oe?this.packedTextureDataCache.get($e):this.unpackedTextureDataCache.get($e)}setTextureData($e,Oe,Ce=!1){r.Logger.verbose("WebGLSessionHandler","Storing Texture data in cache"),Ce?this.packedTextureDataCache.set($e,Oe):this.unpackedTextureDataCache.set($e,Oe)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach($e=>this.textureManager.releaseTexture($e,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach($e=>this.textureManager.releaseTexture($e,!0)),this.unpackedTextureDataCache=new Map}resolve($e,Oe,Ce){const Be=(0,Ee.resolveOperator)($e,Oe,Re.WEBGL_OP_RESOLVE_RULES);return{impl:Be.opImpl,context:Be.opInit?Be.opInit($e,Ce):$e}}}},7769:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Uint8DataEncoder=e.RGBAFloatDataEncoder=e.RedFloat32DataEncoder=void 0;const r=t(6231);e.RedFloat32DataEncoder=class{constructor(Ee,Te=1){if(Te===1)this.internalFormat=Ee.R32F,this.format=Ee.RED,this.textureType=Ee.FLOAT,this.channelSize=Te;else{if(Te!==4)throw new Error(`Invalid number of channels: ${Te}`);this.internalFormat=Ee.RGBA32F,this.format=Ee.RGBA,this.textureType=Ee.FLOAT,this.channelSize=Te}}encode(Ee,Te){let Re,Me;return Ee.constructor!==Float32Array&&(r.Logger.warning("Encoder","data was not of type Float32; creating new Float32Array"),Me=new Float32Array(Ee)),Te*this.channelSize>Ee.length?(r.Logger.warning("Encoder","Source data too small. Allocating larger array"),Me=Ee,Re=this.allocate(Te*this.channelSize),Me.forEach((Ve,De)=>Re[De]=Ve)):(Me=Ee,Re=Me),Re}allocate(Ee){return new Float32Array(4*Ee)}decode(Ee,Te){return this.channelSize===1?Ee.filter((Re,Me)=>Me%4==0).subarray(0,Te):Ee.subarray(0,Te)}},e.RGBAFloatDataEncoder=class{constructor(Ee,Te=1,Re){if(Te!==1&&Te!==4)throw new Error(`Invalid number of channels: ${Te}`);this.internalFormat=Ee.RGBA,this.format=Ee.RGBA,this.channelSize=Te,this.textureType=Re||Ee.FLOAT}encode(Ee,Te){let Re=Ee;return this.channelSize===1&&(r.Logger.verbose("Encoder","Exploding into a larger array"),Re=this.allocate(Te),Ee.forEach((Me,Ve)=>Re[4*Ve]=Me)),Re}allocate(Ee){return new Float32Array(4*Ee)}decode(Ee,Te){return this.channelSize===1?Ee.filter((Re,Me)=>Me%4==0).subarray(0,Te):Ee.subarray(0,Te)}},e.Uint8DataEncoder=class{constructor(Ee,Te=1){if(this.channelSize=4,Te===1)this.internalFormat=Ee.ALPHA,this.format=Ee.ALPHA,this.textureType=Ee.UNSIGNED_BYTE,this.channelSize=Te;else{if(Te!==4)throw new Error(`Invalid number of channels: ${Te}`);this.internalFormat=Ee.RGBA,this.format=Ee.RGBA,this.textureType=Ee.UNSIGNED_BYTE,this.channelSize=Te}}encode(Ee,Te){return new Uint8Array(Ee.buffer,Ee.byteOffset,Ee.byteLength)}allocate(Ee){return new Uint8Array(Ee*this.channelSize)}decode(Ee,Te){if(Ee instanceof Uint8Array)return Ee.subarray(0,Te);throw new Error(`Invalid array type: ${Ee.constructor}`)}}},7859:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getBatchDim=e.sizeToSquarishShape=e.getRowsCols=e.sizeFromShape=e.isInt=e.parseAxisParam=e.squeezeShape=e.PreferLogicalStrategy=e.AlwaysKeepOriginalSizeStrategy=void 0;const r=t(6231),Ee=t(2517);function Te($e,Oe){const Ce=[],Be=[],Ue=Oe!=null&&Array.isArray(Oe)&&Oe.length===0,We=Oe==null||Ue?null:Re(Oe,$e).sort();let He=0;for(let Ge=0;Ge<$e.length;++Ge){if(We!=null){if(We[He]===Ge&&$e[Ge]!==1)throw new Error(`Can't squeeze axis ${Ge} since its dim '${$e[Ge]}' is not 1`);(We[He]==null||We[He]>Ge)&&$e[Ge]===1&&(Ce.push($e[Ge]),Be.push(Ge)),We[He]<=Ge&&He++}$e[Ge]!==1&&(Ce.push($e[Ge]),Be.push(Ge))}return{newShape:Ce,keptDims:Be}}function Re($e,Oe){const Ce=Oe.length;return $e=$e==null?Oe.map((Be,Ue)=>Ue):[].concat($e),(0,Ee.assert)($e.every(Be=>Be>=-Ce&&Be<Ce),()=>`All values in axis param must be in range [-${Ce}, ${Ce}) but got axis ${$e}`),(0,Ee.assert)($e.every(Me),()=>`All values in axis param must be integers but got axis ${$e}`),$e.map(Be=>Be<0?Ce+Be:Be)}function Me($e){return $e%1==0}function Ve($e){if($e.length===0)return 1;let Oe=$e[0];for(let Ce=1;Ce<$e.length;Ce++)Oe*=$e[Ce];return Oe}function De($e){const Oe=Math.ceil(Math.sqrt($e));return[Oe,Math.ceil($e/Oe)]}e.AlwaysKeepOriginalSizeStrategy=class{constructor($e){this.maxTextureSize=$e}computeTextureWH($e,Oe){if($e.length===0)return[1,1];const Ce=this.maxTextureSize;if(Oe&&Oe.breakAxis!==void 0){const We=Oe.breakAxis>=$e.length?1:$e.slice(Oe.breakAxis).reduce((Ge,Ye)=>Ge*Ye),He=Oe.breakAxis<=0?1:$e.slice(0,Oe.breakAxis).reduce((Ge,Ye)=>Ge*Ye);if(!(We>Ce||He>Ce))return[We,He];r.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${$e}, breakAxis:${Oe.breakAxis}`)}const Be=$e.reduce((We,He)=>We*He);let Ue=Math.floor(Math.sqrt(Be));for(;Ue<Ce&&Ue<Be&&Be%Ue!=0;Ue++);if(Ue>=Ce||Be%Ue!=0)throw new Error(`The given dimensions are outside this GPU's boundaries: ${$e}`);return[Ue,Be/Ue]}},e.PreferLogicalStrategy=class{constructor($e){this.maxTextureSize=$e}computeTextureWH($e,Oe){const Ce=this.computeTexture($e,Oe);return Oe&&Oe.isPacked&&(Ce[0]/=2,Ce[1]/=2),Oe&&Oe.reverseWH?[Ce[1],Ce[0]]:Ce}computeTexture($e,Oe){const Ce=Oe&&Oe.isPacked;if($e.length===0)return Ce?[2,2]:[1,1];let Be=this.maxTextureSize;if(Oe&&Oe.breakAxis!==void 0){const He=Oe.breakAxis>=$e.length?1:$e.slice(Oe.breakAxis).reduce((Ye,Je)=>Ye*Je),Ge=Oe.breakAxis<=0?1:$e.slice(0,Oe.breakAxis).reduce((Ye,Je)=>Ye*Je);if(!(He>Be||Ge>Be))return[He,Ge];r.Logger.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${$e}, breakAxis:${Oe.breakAxis}`)}let Ue=$e.slice(0);Ce&&(Be*=2,Ue=Ue.map((He,Ge)=>Ge>=Ue.length-2?Ue[Ge]%2==0?Ue[Ge]:Ue[Ge]+1:Ue[Ge]),Ue.length===1&&(Ue=[2,Ue[0]])),Ue.length!==2&&(Ue=Te(Ue).newShape);const We=Ve(Ue);return Ue.length<=1&&We<=Be?[1,We]:Ue.length===2&&Ue[0]<=Be&&Ue[1]<=Be?Ue:Ue.length===3&&Ue[0]*Ue[1]<=Be&&Ue[2]<=Be?[Ue[0]*Ue[1],Ue[2]]:Ue.length===3&&Ue[0]<=Be&&Ue[1]*Ue[2]<=Be?[Ue[0],Ue[1]*Ue[2]]:Ue.length===4&&Ue[0]*Ue[1]*Ue[2]<=Be&&Ue[3]<=Be?[Ue[0]*Ue[1]*Ue[2],Ue[3]]:Ue.length===4&&Ue[0]<=Be&&Ue[1]*Ue[2]*Ue[3]<=Be?[Ue[0],Ue[1]*Ue[2]*Ue[3]]:Ce?De(We/4).map(He=>2*He):De(We)}},e.squeezeShape=Te,e.parseAxisParam=Re,e.isInt=Me,e.sizeFromShape=Ve,e.getRowsCols=function($e){if($e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[$e.length>1?$e[$e.length-2]:1,$e[$e.length-1]]},e.sizeToSquarishShape=De,e.getBatchDim=function($e,Oe=2){return Ve($e.slice(0,$e.length-Oe))}},4057:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createTextureLayoutFromShape=e.calculateTextureWidthAndHeight=e.createTextureLayoutFromTextureType=void 0;const r=t(2517),Ee=t(2039);e.createTextureLayoutFromTextureType=(Te,Re,Me)=>{const Ve=Me===Ee.TextureType.unpacked||Me===Ee.TextureType.unpackedReversed?1:4,De=Me===Ee.TextureType.packed,$e=Me===Ee.TextureType.unpackedReversed||Me===Ee.TextureType.packed,Oe=Me===Ee.TextureType.packedLastDimension?Re.length-1:void 0,Ce=Me===Ee.TextureType.packedLastDimension?Re.map((Be,Ue)=>Ue===Re.length-1?4*Be:Be):void 0;return(0,e.createTextureLayoutFromShape)(Te,Re,Ve,Ce,{isPacked:De,reverseWH:$e,breakAxis:Oe})},e.calculateTextureWidthAndHeight=(Te,Re,Me)=>{const Ve=(0,e.createTextureLayoutFromTextureType)(Te,Re,Me);return[Ve.width,Ve.height]},e.createTextureLayoutFromShape=(Te,Re,Me=1,Ve,De)=>{const $e=!(!De||!De.isPacked),[Oe,Ce]=Te.computeTextureWH($e&&Ve||Re,De),Be=Re.length;let Ue=Re.slice(0);if(Be===0&&(Ue=[1]),Me===1)Ve=Re;else if($e){if(Me!==4)throw new Error("a packed texture must be 4-channel");Ve=Re,Be>0&&(Ue[Be-1]=Math.ceil(Ue[Be-1]/2)),Be>1&&(Ue[Be-2]=Math.ceil(Ue[Be-2]/2))}else if(!Ve)throw new Error("Unpacked shape is needed when using channels > 1");return{width:Oe,height:Ce,channels:Me,isPacked:$e,shape:Ue,strides:r.ShapeUtil.computeStrides(Ue),unpackedShape:Ve,reversedWH:De&&De.reverseWH}}},5702:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextureManager=void 0;const r=t(6231);e.TextureManager=class{constructor(Ee,Te,Re,Me){this.glContext=Ee,this.layoutStrategy=Te,this.profiler=Re,this.config=Me,this.pendingRead=new Map,Me.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(Ee,Te,Re,Me){const Ve=this.toEncoderType(Ee),De=this.glContext.getEncoder(Ve,Te.channels||1,Me);if(Te.isPacked&&Me===1)throw new Error("not implemented");const $e=Te.width,Oe=Te.height;let Ce,Be;if(this.config.reuseTextures){Ce=`${$e}x${Oe}_${De.format}_${De.internalFormat}_${De.textureType}`,Be=this.inUseTextures.get(Ce),Be||(Be=[],this.inUseTextures.set(Ce,Be));const We=this.idleTextures.get(Ce);if(We&&We.length>0){const He=We.pop();return Be.push(He),Me===1&&this.glContext.updateTexture(He,$e,Oe,De,this.toTextureData(Ee,Re)),He}}r.Logger.verbose("TextureManager",`Creating new texture of size ${Te.width}x${Te.height}`);const Ue=this.glContext.allocateTexture($e,Oe,De,this.toTextureData(Ee,Re));return this.config.reuseTextures&&(Be.push(Ue),this.textureLookup.set(Ue,Ce)),Ue}readTexture(Ee,Te,Re){return Re||(Re=1),this.profiler.event("backend","TextureManager.readTexture",()=>{const Me=Ee.shape.reduce((De,$e)=>De*$e)*Re,Ve=this.glContext.readTexture(Ee.texture,Ee.width,Ee.height,Me,this.toEncoderType(Te),Re);return this.toTensorData(Te,Ve)})}async readTextureAsync(Ee,Te,Re){const Me=Ee.tensor.dataId;if(Re||(Re=1),this.pendingRead.has(Me)){const Ve=this.pendingRead.get(Me);return new Promise(De=>Ve?.push(De))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(Me,[]);const Ve=Ee.shape.reduce((Ce,Be)=>Ce*Be)*Re;await this.glContext.createAndWaitForFence();const De=this.glContext.readTexture(Ee.texture,Ee.width,Ee.height,Ve,this.toEncoderType(Te),Re),$e=this.toTensorData(Te,De),Oe=this.pendingRead.get(Me);return this.pendingRead.delete(Me),Oe?.forEach(Ce=>Ce($e)),$e})}readUint8TextureAsFloat(Ee){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{const Te=Ee.shape.reduce((Me,Ve)=>Me*Ve),Re=this.glContext.readTexture(Ee.texture,Ee.width,Ee.height,4*Te,"byte",4);return new Float32Array(Re.buffer,Re.byteOffset,Te)})}releaseTexture(Ee,Te){let Re;if(this.config.reuseTextures&&(Re=this.textureLookup.get(Ee.texture),Re)){Te&&this.textureLookup.delete(Re);const Me=this.inUseTextures.get(Re);if(Me){const Ve=Me.indexOf(Ee.texture);if(Ve!==-1){Me.splice(Ve,1);let De=this.idleTextures.get(Re);De||(De=[],this.idleTextures.set(Re,De)),De.push(Ee.texture)}}}Re&&!Te||(r.Logger.verbose("TextureManager",`Deleting texture of size ${Ee.width}x${Ee.height}`),this.glContext.deleteTexture(Ee.texture))}toTensorData(Ee,Te){switch(Ee){case"int16":return Te instanceof Int16Array?Te:Int16Array.from(Te);case"int32":return Te instanceof Int32Array?Te:Int32Array.from(Te);case"int8":return Te instanceof Int8Array?Te:Int8Array.from(Te);case"uint16":return Te instanceof Uint16Array?Te:Uint16Array.from(Te);case"uint32":return Te instanceof Uint32Array?Te:Uint32Array.from(Te);case"uint8":case"bool":return Te instanceof Uint8Array?Te:Uint8Array.from(Te);case"float32":return Te instanceof Float32Array?Te:Float32Array.from(Te);case"float64":return Te instanceof Float64Array?Te:Float64Array.from(Te);default:throw new Error(`TensorData type ${Ee} is not supported`)}}toTextureData(Ee,Te){if(Te)return Te instanceof Float32Array?Te:new Float32Array(Te)}toEncoderType(Ee){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}},2039:(n,e)=>{var t;Object.defineProperty(e,"__esModule",{value:!0}),e.TextureType=void 0,(t=e.TextureType||(e.TextureType={}))[t.unpacked=0]="unpacked",t[t.unpackedReversed=1]="unpackedReversed",t[t.packed=2]="packed",t[t.downloadUint8AsFloat=3]="downloadUint8AsFloat",t[t.packedLastDimension=4]="packedLastDimension"},9390:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getGlChannels=e.getCoordsDataType=e.getSqueezedParams=e.squeezeInputShape=e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=e.generateShaderFuncNameFromInputSamplerName=e.repeatedTry=e.getPackedShape=void 0;const r=t(2517);e.getPackedShape=function(Ee){const Te=Ee.length;return Ee.slice(0,Te-1).concat(Ee[Te-1]/4)},e.repeatedTry=async function(Ee,Te=Me=>0,Re){return new Promise((Me,Ve)=>{let De=0;const $e=()=>{if(Ee())return void Me();De++;const Oe=Te(De);Re!=null&&De>=Re?Ve():setTimeout($e,Oe)};$e()})},e.generateShaderFuncNameFromInputSamplerName=function(Ee){return(0,r.assert)(Ee!==void 0&&Ee.length!==0,()=>"empty string found for sampler name"),"get"+Ee.charAt(0).toUpperCase()+Ee.slice(1)},e.generateShaderFuncNameFromInputSamplerNameAtOutCoords=function(Ee){return(0,r.assert)(Ee!==void 0&&Ee.length!==0,()=>"empty string found for sampler name"),"get"+Ee.charAt(0).toUpperCase()+Ee.slice(1)+"AtOutCoords"},e.squeezeInputShape=function(Ee,Te){let Re=JSON.parse(JSON.stringify(Ee));return Re=Te,Re},e.getSqueezedParams=function(Ee,Te){return Te.map(Re=>Ee[Re]).join(", ")},e.getCoordsDataType=function(Ee){if(Ee<=1)return"int";if(Ee===2)return"ivec2";if(Ee===3)return"ivec3";if(Ee===4)return"ivec4";if(Ee===5)return"ivec5";if(Ee===6)return"ivec6";throw Error(`GPU for rank ${Ee} is not yet supported`)},e.getGlChannels=function(Ee=6){return["x","y","z","w","u","v"].slice(0,Ee)}},7305:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createNewWebGLContext=e.createWebGLContext=void 0;const r=t(6231),Ee=t(1713),Te={};function Re(Me){const Ve=function(){if(typeof document>"u"){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}const Oe=document.createElement("canvas");return Oe.width=1,Oe.height=1,Oe}();let De;const $e={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1};if((!Me||Me==="webgl2")&&(De=Ve.getContext("webgl2",$e),De))try{return new Ee.WebGLContext(De,2)}catch(Oe){r.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${Oe}`)}if((!Me||Me==="webgl")&&(De=Ve.getContext("webgl",$e)||Ve.getContext("experimental-webgl",$e),De))try{return new Ee.WebGLContext(De,1)}catch(Oe){r.Logger.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${Oe}`)}throw new Error("WebGL is not supported")}e.createWebGLContext=function Me(Ve){let De;Ve&&Ve!=="webgl2"||!("webgl2"in Te)?Ve&&Ve!=="webgl"||!("webgl"in Te)||(De=Te.webgl):De=Te.webgl2,De=De||Re(Ve),Ve=Ve||De.version===1?"webgl":"webgl2";const $e=De.gl;return Te[Ve]=De,$e.isContextLost()?(delete Te[Ve],Me(Ve)):($e.disable($e.DEPTH_TEST),$e.disable($e.STENCIL_TEST),$e.disable($e.BLEND),$e.disable($e.DITHER),$e.disable($e.POLYGON_OFFSET_FILL),$e.disable($e.SAMPLE_COVERAGE),$e.enable($e.SCISSOR_TEST),$e.enable($e.CULL_FACE),$e.cullFace($e.BACK),De)},e.createNewWebGLContext=Re},1713:function(n,e,t){var r=this&&this.__createBinding||(Object.create?function($e,Oe,Ce,Be){Be===void 0&&(Be=Ce);var Ue=Object.getOwnPropertyDescriptor(Oe,Ce);Ue&&!("get"in Ue?!Oe.__esModule:Ue.writable||Ue.configurable)||(Ue={enumerable:!0,get:function(){return Oe[Ce]}}),Object.defineProperty($e,Be,Ue)}:function($e,Oe,Ce,Be){Be===void 0&&(Be=Ce),$e[Be]=Oe[Ce]}),Ee=this&&this.__setModuleDefault||(Object.create?function($e,Oe){Object.defineProperty($e,"default",{enumerable:!0,value:Oe})}:function($e,Oe){$e.default=Oe}),Te=this&&this.__importStar||function($e){if($e&&$e.__esModule)return $e;var Oe={};if($e!=null)for(var Ce in $e)Ce!=="default"&&Object.prototype.hasOwnProperty.call($e,Ce)&&r(Oe,$e,Ce);return Ee(Oe,$e),Oe};Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLContext=e.linearSearchLastTrue=void 0;const Re=t(1670),Me=Te(t(7769)),Ve=t(9390);function De($e){let Oe=0;for(;Oe<$e.length&&$e[Oe]();++Oe);return Oe-1}e.linearSearchLastTrue=De,e.WebGLContext=class{constructor($e,Oe){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=$e,this.version=Oe,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture($e,Oe,Ce,Be){const Ue=this.gl,We=Ue.createTexture();Ue.bindTexture(Ue.TEXTURE_2D,We),Ue.texParameteri(Ue.TEXTURE_2D,Ue.TEXTURE_MIN_FILTER,Ue.NEAREST),Ue.texParameteri(Ue.TEXTURE_2D,Ue.TEXTURE_MAG_FILTER,Ue.NEAREST),Ue.texParameteri(Ue.TEXTURE_2D,Ue.TEXTURE_WRAP_S,Ue.CLAMP_TO_EDGE),Ue.texParameteri(Ue.TEXTURE_2D,Ue.TEXTURE_WRAP_T,Ue.CLAMP_TO_EDGE);const He=Be?Ce.encode(Be,$e*Oe):null;return Ue.texImage2D(Ue.TEXTURE_2D,0,Ce.internalFormat,$e,Oe,0,Ce.format,Ce.textureType,He),this.checkError(),We}updateTexture($e,Oe,Ce,Be,Ue){const We=this.gl;We.bindTexture(We.TEXTURE_2D,$e);const He=Be.encode(Ue,Oe*Ce);We.texSubImage2D(We.TEXTURE_2D,0,0,0,Oe,Ce,Be.format,Be.textureType,He),this.checkError()}attachFramebuffer($e,Oe,Ce){const Be=this.gl;Be.bindTexture(Be.TEXTURE_2D,$e),Be.bindFramebuffer(Be.FRAMEBUFFER,this.framebuffer),Be.framebufferTexture2D(Be.FRAMEBUFFER,Be.COLOR_ATTACHMENT0,Be.TEXTURE_2D,$e,0),this.checkError(),Be.viewport(0,0,Oe,Ce),Be.scissor(0,0,Oe,Ce)}readTexture($e,Oe,Ce,Be,Ue,We){const He=this.gl;We||(We=1),this.frameBufferBound||this.attachFramebuffer($e,Oe,Ce);const Ge=this.getEncoder(Ue,We),Ye=Ge.allocate(Oe*Ce);return He.bindTexture(He.TEXTURE_2D,$e),He.framebufferTexture2D(He.FRAMEBUFFER,He.COLOR_ATTACHMENT0,He.TEXTURE_2D,$e,0),He.readPixels(0,0,Oe,Ce,He.RGBA,Ge.textureType,Ye),this.checkError(),Ge.decode(Ye,Be)}isFramebufferReady(){return!0}getActiveTexture(){const $e=this.gl;return"TEXTURE"+($e.getParameter(this.gl.ACTIVE_TEXTURE)-$e.TEXTURE0)}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes($e,Oe){const Ce=this.gl;Ce.vertexAttribPointer($e,3,Ce.FLOAT,!1,20,0),Ce.enableVertexAttribArray($e),Oe!==-1&&(Ce.vertexAttribPointer(Oe,2,Ce.FLOAT,!1,20,12),Ce.enableVertexAttribArray(Oe)),this.checkError()}createProgram($e,Oe){const Ce=this.gl,Be=Ce.createProgram();return Ce.attachShader(Be,$e),Ce.attachShader(Be,Oe),Ce.linkProgram(Be),Be}compileShader($e,Oe){const Ce=this.gl,Be=Ce.createShader(Oe);if(!Be)throw new Error(`createShader() returned null with type ${Oe}`);if(Ce.shaderSource(Be,$e),Ce.compileShader(Be),Ce.getShaderParameter(Be,Ce.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${Ce.getShaderInfoLog(Be)}
Shader source:
${$e}`);return Be}deleteShader($e){this.gl.deleteShader($e)}bindTextureToUniform($e,Oe,Ce){const Be=this.gl;Be.activeTexture(Be.TEXTURE0+Oe),this.checkError(),Be.bindTexture(Be.TEXTURE_2D,$e),this.checkError(),Be.uniform1i(Ce,Oe),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(Re.env.debug){const $e=this.gl,Oe=$e.getError();let Ce="";switch(Oe){case $e.NO_ERROR:return;case $e.INVALID_ENUM:Ce="INVALID_ENUM";break;case $e.INVALID_VALUE:Ce="INVALID_VALUE";break;case $e.INVALID_OPERATION:Ce="INVALID_OPERATION";break;case $e.INVALID_FRAMEBUFFER_OPERATION:Ce="INVALID_FRAMEBUFFER_OPERATION";break;case $e.OUT_OF_MEMORY:Ce="OUT_OF_MEMORY";break;case $e.CONTEXT_LOST_WEBGL:Ce="CONTEXT_LOST_WEBGL";break;default:Ce=`Unknown WebGL Error: ${Oe.toString(16)}`}throw new Error(Ce)}}deleteTexture($e){this.gl.deleteTexture($e)}deleteProgram($e){this.gl.deleteProgram($e)}getEncoder($e,Oe,Ce=0){if(this.version===2)return new Me.RedFloat32DataEncoder(this.gl,Oe);switch($e){case"float":return Ce===1||this.isRenderFloat32Supported?new Me.RGBAFloatDataEncoder(this.gl,Oe):new Me.RGBAFloatDataEncoder(this.gl,Oe,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new Me.Uint8DataEncoder(this.gl,Oe);default:throw new Error(`Invalid dataType: ${$e}`)}}clearActiveTextures(){const $e=this.gl;for(let Oe=0;Oe<this.maxTextureImageUnits;++Oe)$e.activeTexture($e.TEXTURE0+Oe),$e.bindTexture($e.TEXTURE_2D,null)}dispose(){if(this.disposed)return;const $e=this.gl;$e.bindFramebuffer($e.FRAMEBUFFER,null),$e.deleteFramebuffer(this.framebuffer),$e.bindBuffer($e.ARRAY_BUFFER,null),$e.deleteBuffer(this.vertexbuffer),$e.bindBuffer($e.ELEMENT_ARRAY_BUFFER,null),$e.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){const $e=this.gl,Oe=$e.createBuffer();if(!Oe)throw new Error("createBuffer() returned null");const Ce=this.createDefaultGeometry();return $e.bindBuffer($e.ARRAY_BUFFER,Oe),$e.bufferData($e.ARRAY_BUFFER,Ce,$e.STATIC_DRAW),this.checkError(),Oe}createFramebuffer(){const $e=this.gl.createFramebuffer();if(!$e)throw new Error("createFramebuffer returned null");return $e}queryVitalParameters(){const $e=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=$e.getParameter($e.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=$e.getParameter($e.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){const $e=this.gl,Oe=$e.createTexture();$e.bindTexture($e.TEXTURE_2D,Oe);const Ce=this.version===2?$e.RGBA32F:$e.RGBA;$e.texImage2D($e.TEXTURE_2D,0,Ce,1,1,0,$e.RGBA,$e.FLOAT,null);const Be=$e.createFramebuffer();$e.bindFramebuffer($e.FRAMEBUFFER,Be),$e.framebufferTexture2D($e.FRAMEBUFFER,$e.COLOR_ATTACHMENT0,$e.TEXTURE_2D,Oe,0);const Ue=$e.checkFramebufferStatus($e.FRAMEBUFFER)===$e.FRAMEBUFFER_COMPLETE;return $e.bindTexture($e.TEXTURE_2D,null),$e.bindFramebuffer($e.FRAMEBUFFER,null),$e.deleteTexture(Oe),$e.deleteFramebuffer(Be),Ue}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){const $e=this.gl;let Oe,Ce,Be,Ue,We;try{Oe=$e.createTexture(),Ce=$e.createFramebuffer(),$e.bindTexture($e.TEXTURE_2D,Oe);const He=this.version===2?$e.RGBA32F:$e.RGBA;return $e.texImage2D($e.TEXTURE_2D,0,He,1,1,0,$e.RGBA,$e.FLOAT,null),$e.bindFramebuffer($e.FRAMEBUFFER,Ce),$e.framebufferTexture2D($e.FRAMEBUFFER,$e.COLOR_ATTACHMENT0,$e.TEXTURE_2D,Oe,0),$e.enable($e.BLEND),Be=$e.createShader($e.VERTEX_SHADER),!!Be&&($e.shaderSource(Be,"void main(){}"),$e.compileShader(Be),Ue=$e.createShader($e.FRAGMENT_SHADER),!!Ue&&($e.shaderSource(Ue,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),$e.compileShader(Ue),We=$e.createProgram(),!!We&&($e.attachShader(We,Be),$e.attachShader(We,Ue),$e.linkProgram(We),$e.useProgram(We),$e.drawArrays($e.POINTS,0,1),$e.getError()===$e.NO_ERROR)))}finally{$e.disable($e.BLEND),We&&$e.deleteProgram(We),Be&&$e.deleteShader(Be),Ue&&$e.deleteShader(Ue),Ce&&($e.bindFramebuffer($e.FRAMEBUFFER,null),$e.deleteFramebuffer(Ce)),Oe&&($e.bindTexture($e.TEXTURE_2D,null),$e.deleteTexture(Oe))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){const $e=this.gl,Oe=this.disjointTimerQueryWebgl2Extension,Ce=$e.createQuery();return $e.beginQuery(Oe.TIME_ELAPSED_EXT,Ce),Ce}throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const $e=this.gl,Oe=this.disjointTimerQueryWebgl2Extension;$e.endQuery(Oe.TIME_ELAPSED_EXT)}}isTimerResultAvailable($e){let Oe=!1,Ce=!1;if(this.version!==2||!this.disjointTimerQueryWebgl2Extension)throw new Error("WebGL1 profiling currently not supported");{const Be=this.gl,Ue=this.disjointTimerQueryWebgl2Extension;Oe=Be.getQueryParameter($e,Be.QUERY_RESULT_AVAILABLE),Ce=Be.getParameter(Ue.GPU_DISJOINT_EXT)}return Oe&&!Ce}getTimerResult($e){let Oe=0;if(this.version!==2)throw new Error("WebGL1 profiling currently not supported");{const Ce=this.gl;Oe=Ce.getQueryParameter($e,Ce.QUERY_RESULT),Ce.deleteQuery($e)}return Oe/1e6}async waitForQueryAndGetTime($e){return await(0,Ve.repeatedTry)(()=>this.isTimerResultAvailable($e)),this.getTimerResult($e)}async createAndWaitForFence(){const $e=this.createFence(this.gl);return this.pollFence($e)}createFence($e){let Oe;const Ce=$e,Be=Ce.fenceSync(Ce.SYNC_GPU_COMMANDS_COMPLETE,0);return $e.flush(),Oe=Be===null?()=>!0:()=>{const Ue=Ce.clientWaitSync(Be,0,0);return Ue===Ce.ALREADY_SIGNALED||Ue===Ce.CONDITION_SATISFIED},{query:Be,isFencePassed:Oe}}async pollFence($e){return new Promise(Oe=>{this.addItemToPoll(()=>$e.isFencePassed(),()=>Oe())})}pollItems(){const $e=De(this.itemsToPoll.map(Oe=>Oe.isDoneFn));for(let Oe=0;Oe<=$e;++Oe){const{resolveFn:Ce}=this.itemsToPoll[Oe];Ce()}this.itemsToPoll=this.itemsToPoll.slice($e+1)}async addItemToPoll($e,Oe){this.itemsToPoll.push({isDoneFn:$e,resolveFn:Oe}),this.itemsToPoll.length>1||await(0,Ve.repeatedTry)(()=>(this.pollItems(),this.itemsToPoll.length===0))}}},1036:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ExecutionPlan=void 0;const r=t(6231);class Ee{constructor(Re,Me){this.op=Re,this.node=Me}}e.ExecutionPlan=class{constructor(Te,Re,Me){this.graph=Te,this.profiler=Me,this.initialize(Re)}initialize(Te){this.profiler.event("session","ExecutionPlan.initialize",()=>{const Re=this.graph.getNodes();if(Re.length!==Te.length)throw new Error("The size of nodes and OPs do not match.");this._ops=Te.map((Me,Ve)=>new Ee(Me,Re[Ve])),this.reset(),this._starter=[],this._ops.forEach((Me,Ve)=>{let De=!0;for(const $e of Me.node.inputs)if(!this._values[$e]&&this.graph.getInputIndices().indexOf($e)===-1){De=!1;break}De&&this._starter.push(Ve)})})}reset(){this._values=this.graph.getValues().map(Te=>Te.tensor)}async execute(Te,Re){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();const Me=Te.createInferenceHandler(),Ve=this.graph.getInputIndices();if(Re.length!==Ve.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${Re.length} expected: ${Ve.length}`);Re.forEach((Ue,We)=>{const He=Ve[We];this._values[He]=Ue});const De=this._starter.slice(0),$e=this.graph.getValues(),Oe=this.graph.getNodes();let Ce=0;for(;Ce<De.length;){const Ue=De[Ce++],We=this._ops[Ue],He=We.node.inputs.map(Ze=>this._values[Ze]);if(He.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${We.node}`);const Ge=He;r.Logger.verbose("ExecPlan",`Runing op:${We.node.name} (${Ge.map((Ze,fn)=>`'${We.node.inputs[fn]}': ${Ze.type}[${Ze.dims.join(",")}]`).join(", ")})`);const Ye=await this.profiler.event("node",We.node.name,async()=>We.op.impl(Me,Ge,We.op.context));if(Ye.length!==We.node.outputs.length)throw new Error("the size of output does not match model definition.");Ye.forEach((Ze,fn)=>{const yn=We.node.outputs[fn];if(this._values[yn])throw new Error(`output [${yn}] already has value: op:${We.node.name}`);this._values[yn]=Ze});const Je=new Set;Ye.forEach((Ze,fn)=>{const yn=We.node.outputs[fn];for(const mn of $e[yn].to){const pn=Oe[mn];let un=!0;for(const bn of pn.inputs)if(!this._values[bn]){un=!1;break}un&&Je.add(mn)}}),De.push(...Je)}const Be=[];for(let Ue=0;Ue<this.graph.getOutputIndices().length;Ue++){const We=this.graph.getOutputIndices()[Ue],He=this._values[We];if(He===void 0)throw new Error(`required output [${We}] does not have value`);We===0?await He.getData():He.data,Be.push(He)}return r.Logger.verbose("ExecPlan","disposing of inferenceHandler"),Me.dispose(),Be})}}},7070:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;const r=t(1446),Ee=t(7778),Te=t(9395),Re=t(9162),Me=t(2517);var Ve=Te.onnxruntime.experimental.fbs;e.Graph={from:(Ce,Be)=>new Oe(Ce,Be)};class De{constructor(Be){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,Be&&(this.type=Me.ProtoUtil.tensorValueTypeFromProto(Be.type.tensorType))}get from(){return this._from}get to(){return this._to}}class $e{constructor(Be,Ue){Be instanceof r.onnx.NodeProto?(this.name=Be.name,this.opType=Be.opType,this.attributes=new Ee.Attribute(Be.attribute)):Be instanceof Ve.Node&&(this.name=Ue??Be.name(),this.opType=Be.opType(),this.attributes=new Ee.Attribute(Me.ProtoUtil.tensorAttributesFromORTFormat(Be))),this.inputs=[],this.outputs=[],this.executeNode=!0}}class Oe{constructor(Be,Ue){if(!Be)throw new TypeError("graph is empty");this.buildGraph(Be),this.transformGraph(Ue),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(Be){if(Be instanceof r.onnx.GraphProto)this.buildGraphFromOnnxFormat(Be);else{if(!(Be instanceof Ve.Graph))throw new TypeError("Graph type is not supported.");this.buildGraphFromOrtFormat(Be)}}buildGraphFromOnnxFormat(Be){const Ue=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const We=new Map;if(!Be.input)throw new Error("missing information in graph: input");const He=[];for(const Ge of Be.input){if(Ue.has(Ge.name))throw new Error(`duplicated input name: ${Ge.name}`);const Ye=this._allData.push(new De(Ge))-1;Ue.set(Ge.name,Ye),He.push(Ge.name)}if(!Be.initializer)throw new Error("missing information in graph: initializer");for(const Ge of Be.initializer){let Ye=Ue.get(Ge.name);if(Ye===void 0){const Je=new De;Je.type={shape:{dims:Me.ProtoUtil.tensorDimsFromProto(Ge.dims)},tensorType:Me.ProtoUtil.tensorDataTypeFromProto(Ge.dataType)},Ye=this._allData.push(Je)-1,Ue.set(Ge.name,Ye)}this._allData[Ye]._from=-1,this._allData[Ye].tensor=Re.Tensor.fromProto(Ge)}for(let Ge=0;Ge<this._allData.length;Ge++)this._allData[Ge].tensor||(this._allInputIndices.push(Ge),this._allInputNames.push(He[Ge]));if(!Be.output)throw new Error("missing information in graph: output");for(const Ge of Be.output){if(Ue.has(Ge.name))throw new Error(`duplicated output name: ${Ge.name}`);const Ye=this._allData.push(new De(Ge))-1;Ue.set(Ge.name,Ye),this._allOutputIndices.push(Ye),this._allOutputNames.push(Ge.name)}if(!Be.node)throw new Error("missing information in graph: node");for(const Ge of Be.node){if(!Ge.name)for(let Je=0;;Je++){const Ze=`unnamed_${Ge.opType}_${Je}`;if(!We.has(Ze)){Ge.name=Ze;break}}if(We.has(Ge.name))throw new Error(`duplicated node name: ${Ge.name}`);const Ye=this._nodes.push(new $e(Ge))-1;We.set(Ge.name,Ye)}for(let Ge=0;Ge<this._nodes.length;Ge++){const Ye=this._nodes[Ge],Je=Be.node[Ge];if(!Je.output)throw new Error(`missing output for node: ${Je.name}`);for(const Ze of Je.output){let fn=Ue.get(Ze);if(fn===void 0&&(fn=this._allData.push(new De)-1,Ue.set(Ze,fn)),Ye.outputs.push(fn),this._allData[fn]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${fn}`);if(this._allData[fn]._from=Ge,Je.opType==="Constant"){if(!Je.attribute||Je.attribute.length!==1||!Je.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!Je.output||Je.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");Ye.outputs.pop(),Ye.executeNode=!1,this._allData[fn]._from=-1,this._allData[fn].tensor=Re.Tensor.fromProto(Je.attribute[0].t)}}}for(let Ge=0;Ge<this._nodes.length;Ge++){const Ye=this._nodes[Ge],Je=Be.node[Ge];if(!Je.input)throw new Error(`missing input for node: ${Je.name}`);for(const Ze of Je.input){const fn=Ue.get(Ze);if(fn===void 0){if(Ze===""&&Je.input.length===3&&Je.opType==="Resize")continue;throw new Error(`unrecognized input '${Ze}' for node: ${Je.name}`)}Ye.inputs.push(fn),this._allData[fn]._to.push(Ge)}}return!0}buildGraphFromOrtFormat(Be){var Ue,We,He;const Ge=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];const Ye=new Map,Je=[];for(let Ze=0;Ze<Be.inputsLength();Ze++){const fn=Be.inputs(Ze);if(Ge.has(fn))throw new Error(`duplicated input name: ${fn}`);for(let yn=0;yn<Be.nodeArgsLength();yn++)if(((Ue=Be.nodeArgs(yn))===null||Ue===void 0?void 0:Ue.name())===fn){const mn=new De;if(((He=(We=Be.nodeArgs(yn))===null||We===void 0?void 0:We.type())===null||He===void 0?void 0:He.valueType())!==Ve.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");const pn=Be.nodeArgs(yn).type().value(new Ve.TensorTypeAndShape),un=Me.ProtoUtil.tensorDataTypeFromProto(pn.elemType()),bn=pn.shape(),gn=[];for(let En=0;En<bn.dimLength();En++)gn.push(Me.LongUtil.longToNumber(bn.dim(En).value().dimValue()));mn.type={shape:{dims:gn},tensorType:un};const xn=this._allData.push(mn)-1;Ge.set(fn,xn),Je.push(fn)}}for(let Ze=0;Ze<Be.initializersLength();Ze++){const fn=Be.initializers(Ze);let yn=Ge.get(fn.name());if(yn===void 0){const mn=new De,pn=Me.ProtoUtil.tensorDimsFromORTFormat(fn),un=Me.ProtoUtil.tensorDataTypeFromProto(fn.dataType());mn.type={shape:{dims:pn},tensorType:un},yn=this._allData.push(mn)-1,Ge.set(fn.name(),yn)}this._allData[yn]._from=-1,this._allData[yn].tensor=Re.Tensor.fromOrtTensor(fn)}for(let Ze=0;Ze<this._allData.length;Ze++)this._allData[Ze].tensor||(this._allInputIndices.push(Ze),this._allInputNames.push(Je[Ze]));for(let Ze=0;Ze<Be.outputsLength();Ze++){const fn=Be.outputs(Ze);if(Ge.has(fn))throw new Error(`duplicated output name: ${fn}`);const yn=this._allData.push(new De)-1;Ge.set(fn,yn),this._allOutputIndices.push(yn),this._allOutputNames.push(fn)}if(!Be.nodes)throw new Error("missing information in graph: node");for(let Ze=0;Ze<Be.nodesLength();Ze++){const fn=Be.nodes(Ze);let yn=fn.name();if(!yn)for(let pn=0;yn=`unnamed_${fn.opType()}_${pn}`,Ye.has(yn);pn++);if(Ye.has(yn))throw new Error(`duplicated node name: ${yn}`);const mn=this._nodes.push(new $e(fn,yn))-1;Ye.set(yn,mn)}for(let Ze=0;Ze<this._nodes.length;Ze++){const fn=this._nodes[Ze],yn=Be.nodes(Ze);if(yn==null)throw new Error(`No node exists at index ${Ze}`);if(yn?.outputsLength()===0)throw new Error(`missing output for node: ${yn.name}`);for(let mn=0;mn<yn?.outputsLength();mn++){const pn=yn?.outputs(mn);let un=Ge.get(pn);if(un===void 0&&(un=this._allData.push(new De)-1,Ge.set(pn,un)),fn.outputs.push(un),this._allData[un]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${un}`);if(this._allData[un]._from=Ze,yn.opType()==="Constant"){if(yn.attributesLength()!==1||!yn.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(yn.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");fn.outputs.pop(),fn.executeNode=!1,this._allData[un]._from=-1,this._allData[un].tensor=Re.Tensor.fromOrtTensor(yn.attributes(0).t())}}}for(let Ze=0;Ze<this._nodes.length;Ze++){const fn=this._nodes[Ze],yn=Be.nodes(Ze);if(yn.inputsLength()===0)throw new Error(`missing input for node: ${yn.name}`);for(let mn=0;mn<yn.inputsLength();mn++){const pn=yn.inputs(mn),un=Ge.get(pn);if(un===void 0)throw new Error(`unrecognized input '${pn}' for node: ${yn.name()}`);fn.inputs.push(un),this._allData[un]._to.push(Ze)}}}checkIsAcyclic(){const Be=new Set;this._allInputIndices.forEach(He=>{this._allData[He]._to.forEach(Ge=>{Be.add(Ge)})});const Ue=Array.from(Be),We=new Array(this._nodes.length).fill("white");for(;Ue.length>0;){const He=Ue.pop();We[He]==="gray"?We[He]="black":(Ue.push(He),We[He]="gray",this._nodes[He].outputs.forEach(Ge=>{const Ye=this._allData[Ge];if(Ye.tensor!==void 0)throw new Error("node outputs should not be initialized");if(Ye._from!==He)throw new Error("from property of the Value object doesn't match index of Node being processed");Ye._to.forEach(Je=>{if(We[Je]==="gray")throw new Error("model graph is cyclic");We[Je]==="white"&&Ue.push(Je)})}))}}transformGraph(Be){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),Be&&Be.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let Be=0;for(let Ue=0;Ue<this._nodes.length;Ue++)this._nodes[Ue].executeNode?Be>0&&(this._nodes[Ue].inputs.forEach(We=>{const He=this._allData[We]._to.indexOf(Ue+Be);He!==-1&&(this._allData[We]._to[He]=Ue)}),this._nodes[Ue].outputs.forEach(We=>{this._allData[We]._from&&this._allData[We]._from===Ue+Be&&(this._allData[We]._from=Ue)})):(Be++,this._nodes[Ue].outputs.forEach(We=>{this._allData[We]._from=-2}),this._nodes.splice(Ue,1),Ue--);Be=0;for(let Ue=0;Ue<this._allData.length;Ue++)if(this._allData[Ue].from!==-2||this._allOutputIndices.indexOf(Ue+Be)!==-1){if(Be>0){let We=-1;this._allData[Ue].from!==void 0&&this._allData[Ue].from!==-1?(We=this._nodes[this._allData[Ue].from].outputs.indexOf(Ue+Be),We!==-1&&(this._nodes[this._allData[Ue].from].outputs[We]=Ue)):(We=this._allInputIndices.indexOf(Ue+Be),We!==-1&&(this._allInputIndices[We]=Ue)),this._allData[Ue].to.forEach(He=>{We=this._nodes[He].inputs.indexOf(Ue+Be),We!==-1&&(this._nodes[He].inputs[We]=Ue)}),this._allData[Ue].to.length===0&&(We=this._allOutputIndices.indexOf(Ue+Be),We!==-1&&(this._allOutputIndices[We]=Ue))}}else Be++,this._allData.splice(Ue,1),Ue--}deleteNode(Be){const Ue=this._nodes[Be];if(Ue.outputs.length>1){for(let Ze=1;Ze<Ue.outputs.length;Ze++)if(this._allData[Ue.outputs[Ze]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}Ue.executeNode=!1;const We=Ue.inputs[0],He=Ue.outputs[0],Ge=this._allData[He].to,Ye=this._allData[We].to.indexOf(Be);if(Ye===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[We].to.splice(Ye,1),this._allData[He]._to=[];const Je=this._allOutputIndices.indexOf(He);if(Je!==-1&&(this._allOutputIndices[Je]=We),Ge&&Ge.length>0)for(const Ze of Ge){const fn=this._nodes[Ze].inputs.indexOf(He);if(fn===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[Ze].inputs[fn]=We,this._allData[We].to.push(Ze)}}removeAllDropoutNodes(){let Be=0;for(const Ue of this._nodes){if(Ue.opType==="Dropout"){if(Ue.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(Ue.outputs.length!==1&&Ue.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(Ue.outputs.length===2&&this._allData[Ue.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(Be)}Be++}}removeAllIdentityNodes(){let Be=0;for(const Ue of this._nodes)Ue.opType==="Identity"&&this.deleteNode(Be),Be++}isActivation(Be){switch(Be.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(const Be of this._nodes)if(Be.opType==="Conv"){const Ue=this._allData[Be.outputs[0]]._to;if(Ue.length===1&&this.isActivation(this._nodes[Ue[0]])){const We=this._nodes[Ue[0]];if(We.opType==="Clip")if(We.inputs.length===1)try{Be.attributes.set("activation_params","floats",[We.attributes.getFloat("min"),We.attributes.getFloat("max")])}catch{Be.attributes.set("activation_params","floats",[Me.MIN_CLIP,Me.MAX_CLIP])}else{if(!(We.inputs.length>=3&&this._allData[We.inputs[1]].tensor!==void 0&&this._allData[We.inputs[2]].tensor!==void 0))continue;Be.attributes.set("activation_params","floats",[this._allData[We.inputs[1]].tensor.floatData[0],this._allData[We.inputs[2]].tensor.floatData[0]])}Be.attributes.set("activation","string",We.opType),this.deleteNode(Ue[0])}}}}},6231:(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.now=e.Profiler=e.Logger=void 0;const t={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},r={none:new class{log($e,Oe,Ce){}},console:new class{log($e,Oe,Ce){console.log(`${this.color($e)} ${Ce?"\x1B[35m"+Ce+"\x1B[0m ":""}${Oe}`)}color($e){switch($e){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${$e}`)}}}},Ee={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1};let Te={"":Ee};function Re($e,Oe,Ce,Be){if(Oe===void 0)return Ue=$e,{verbose:Re.verbose.bind(null,Ue),info:Re.info.bind(null,Ue),warning:Re.warning.bind(null,Ue),error:Re.error.bind(null,Ue),fatal:Re.fatal.bind(null,Ue)};if(Ce===void 0)Me($e,Oe);else if(typeof Ce=="number"&&Be===void 0)Me($e,Oe);else if(typeof Ce=="string"&&Be===void 0)Me($e,Ce,0,Oe);else{if(typeof Ce!="string"||typeof Be!="number")throw new TypeError("input is valid");Me($e,Ce,0,Oe)}var Ue}function Me($e,Oe,Ce,Be){const Ue=Te[Be||""]||Te[""];t[$e]<t[Ue.minimalSeverity]||(Ue.logDateTime&&(Oe=`${new Date().toISOString()}|${Oe}`),Ue.logSourceLocation,r[Ue.provider].log($e,Oe,Be))}(function($e){function Oe(Be){Te={},Ce("",Be||{})}function Ce(Be,Ue){if(Be==="*")Oe(Ue);else{const We=Te[Be]||Ee;Te[Be]={provider:Ue.provider||We.provider,minimalSeverity:Ue.minimalSeverity||We.minimalSeverity,logDateTime:Ue.logDateTime===void 0?We.logDateTime:Ue.logDateTime,logSourceLocation:Ue.logSourceLocation===void 0?We.logSourceLocation:Ue.logSourceLocation}}}$e.verbose=function(Be,Ue){$e("verbose",Be,Ue)},$e.info=function(Be,Ue){$e("info",Be,Ue)},$e.warning=function(Be,Ue){$e("warning",Be,Ue)},$e.error=function(Be,Ue){$e("error",Be,Ue)},$e.fatal=function(Be,Ue){$e("fatal",Be,Ue)},$e.reset=Oe,$e.set=Ce,$e.setWithEnv=function(Be){const Ue={};Be.logLevel&&(Ue.minimalSeverity=Be.logLevel),Ce("",Ue)}})(Re||(Re={})),e.Logger=Re;class Ve{constructor(Oe,Ce,Be,Ue,We,He){this.category=Oe,this.name=Ce,this.startTime=Be,this.endCallback=Ue,this.timer=We,this.ctx=He}end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}}class De{constructor(Oe,Ce,Be,Ue){this.category=Oe,this.name=Ce,this.startTime=Be,this.endTime=Ue}}e.Profiler=class{static create($e){return $e===void 0?new this:new this($e.maxNumberEvents,$e.flushBatchSize,$e.flushIntervalInMilliseconds)}constructor($e,Oe,Ce){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=$e===void 0?1e4:$e,this._flushBatchSize=Oe===void 0?10:Oe,this._flushIntervalInMilliseconds=Ce===void 0?5e3:Ce}start(){this._started=!0,this._timingEvents=[],this._flushTime=(0,e.now)(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event($e,Oe,Ce,Be){const Ue=this._started?this.begin($e,Oe,Be):void 0;let We=!1;const He=Ce();if(He&&typeof He.then=="function")return We=!0,new Promise((Ge,Ye)=>{He.then(async Je=>{Ue&&await Ue.end(),Ge(Je)},async Je=>{Ue&&await Ue.end(),Ye(Je)})});if(!We&&Ue){const Ge=Ue.end();if(Ge&&typeof Ge.then=="function")return new Promise((Ye,Je)=>{Ge.then(()=>{Ye(He)},Ze=>{Je(Ze)})})}return He}begin($e,Oe,Ce){if(!this._started)throw new Error("profiler is not started yet");if(Ce===void 0){const Be=(0,e.now)();return this.flush(Be),new Ve($e,Oe,Be,Ue=>this.endSync(Ue))}{const Be=Ce.beginTimer();return new Ve($e,Oe,0,async Ue=>this.end(Ue),Be,Ce)}}async end($e){const Oe=await $e.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new De($e.category,$e.name,$e.startTime,Oe)),this.flush(Oe))}endSync($e){const Oe=(0,e.now)();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new De($e.category,$e.name,$e.startTime,Oe)),this.flush(Oe))}logOneEvent($e){e.Logger.verbose(`Profiler.${$e.category}`,`${($e.endTime-$e.startTime).toFixed(2)}ms on event '${$e.name}' at ${$e.endTime.toFixed(2)}`)}flush($e){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||$e-this._flushTime>=this._flushIntervalInMilliseconds){for(const Oe=this._flushPointer;this._flushPointer<Oe+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=(0,e.now)()}}get started(){return this._started}},e.now=typeof performance<"u"&&performance.now?()=>performance.now():Date.now},2644:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;const r=t(5686),Ee=t(1446),Te=t(7070),Re=t(9395),Me=t(2517);var Ve=Re.onnxruntime.experimental.fbs;e.Model=class{constructor(){}load(De,$e,Oe){if(!Oe)try{return void this.loadFromOnnxFormat(De,$e)}catch(Ce){if(Oe!==void 0)throw Ce}this.loadFromOrtFormat(De,$e)}loadFromOnnxFormat(De,$e){const Oe=Ee.onnx.ModelProto.decode(De);if(Me.LongUtil.longToNumber(Oe.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=Oe.opsetImport.map(Ce=>({domain:Ce.domain,version:Me.LongUtil.longToNumber(Ce.version)})),this._graph=Te.Graph.from(Oe.graph,$e)}loadFromOrtFormat(De,$e){const Oe=new r.flatbuffers.ByteBuffer(De),Ce=Ve.InferenceSession.getRootAsInferenceSession(Oe).model();if(Me.LongUtil.longToNumber(Ce.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let Be=0;Be<Ce.opsetImportLength();Be++){const Ue=Ce.opsetImport(Be);this._opsets.push({domain:Ue?.domain(),version:Me.LongUtil.longToNumber(Ue.version())})}this._graph=Te.Graph.from(Ce.graph(),$e)}get graph(){return this._graph}get opsets(){return this._opsets}}},782:(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FLOAT_TYPES=e.INT_TYPES=e.NUMBER_TYPES=void 0,e.NUMBER_TYPES=["float32","float64","int32","int16","int8","uint16","uint32","uint8"],e.INT_TYPES=["int32","int16","int8","uint16","uint32","uint8"],e.FLOAT_TYPES=["float32","float64"]},1047:(n,e)=>{function t(r,Ee){if(Ee.endsWith("+")){const Te=Number.parseInt(Ee.substring(0,Ee.length-1),10);return!isNaN(Te)&&Te<=r}if(Ee.split("-").length===2){const Te=Ee.split("-"),Re=Number.parseInt(Te[0],10),Me=Number.parseInt(Te[1],10);return!isNaN(Re)&&!isNaN(Me)&&Re<=r&&r<=Me}return Number.parseInt(Ee,10)===r}Object.defineProperty(e,"__esModule",{value:!0}),e.resolveOperator=void 0,e.resolveOperator=function(r,Ee,Te){for(const Re of Te){const Me=Re[0],Ve=Re[1],De=Re[2],$e=Re[3],Oe=Re[4];if(r.opType===Me){for(const Ce of Ee)if((Ce.domain===Ve||Ce.domain==="ai.onnx"&&Ve==="")&&t(Ce.version,De))return{opImpl:$e,opInit:Oe}}}throw new TypeError(`cannot resolve operator '${r.opType}' with opsets: ${Ee.map(Re=>`${Re.domain||"ai.onnx"} v${Re.version}`).join(", ")}`)}},9395:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.onnxruntime=void 0;const r=t(5686);var Ee,Te;Ee=e.onnxruntime||(e.onnxruntime={}),function(Re){(function(Me){Me[Me.UNDEFINED=0]="UNDEFINED",Me[Me.FLOAT=1]="FLOAT",Me[Me.INT=2]="INT",Me[Me.STRING=3]="STRING",Me[Me.TENSOR=4]="TENSOR",Me[Me.GRAPH=5]="GRAPH",Me[Me.FLOATS=6]="FLOATS",Me[Me.INTS=7]="INTS",Me[Me.STRINGS=8]="STRINGS",Me[Me.TENSORS=9]="TENSORS",Me[Me.GRAPHS=10]="GRAPHS",Me[Me.SPARSE_TENSOR=11]="SPARSE_TENSOR",Me[Me.SPARSE_TENSORS=12]="SPARSE_TENSORS"})(Re.AttributeType||(Re.AttributeType={}))}((Te=Ee.experimental||(Ee.experimental={})).fbs||(Te.fbs={})),function(Re){(function(Me){(function(Ve){(function(De){De[De.UNKNOWN=0]="UNKNOWN",De[De.VALUE=1]="VALUE",De[De.PARAM=2]="PARAM"})(Ve.DimensionValueType||(Ve.DimensionValueType={}))})(Me.fbs||(Me.fbs={}))})(Re.experimental||(Re.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Re){(function(Me){(function(Ve){(function(De){De[De.UNDEFINED=0]="UNDEFINED",De[De.FLOAT=1]="FLOAT",De[De.UINT8=2]="UINT8",De[De.INT8=3]="INT8",De[De.UINT16=4]="UINT16",De[De.INT16=5]="INT16",De[De.INT32=6]="INT32",De[De.INT64=7]="INT64",De[De.STRING=8]="STRING",De[De.BOOL=9]="BOOL",De[De.FLOAT16=10]="FLOAT16",De[De.DOUBLE=11]="DOUBLE",De[De.UINT32=12]="UINT32",De[De.UINT64=13]="UINT64",De[De.COMPLEX64=14]="COMPLEX64",De[De.COMPLEX128=15]="COMPLEX128",De[De.BFLOAT16=16]="BFLOAT16"})(Ve.TensorDataType||(Ve.TensorDataType={}))})(Me.fbs||(Me.fbs={}))})(Re.experimental||(Re.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Re){(function(Me){(function(Ve){(function(De){De[De.Primitive=0]="Primitive",De[De.Fused=1]="Fused"})(Ve.NodeType||(Ve.NodeType={}))})(Me.fbs||(Me.fbs={}))})(Re.experimental||(Re.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Re){(function(Me){(function(Ve){(function(De){De[De.NONE=0]="NONE",De[De.tensor_type=1]="tensor_type",De[De.sequence_type=2]="sequence_type",De[De.map_type=3]="map_type"})(Ve.TypeInfoValue||(Ve.TypeInfoValue={}))})(Me.fbs||(Me.fbs={}))})(Re.experimental||(Re.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Re){(function(Me){(function(Ve){class De{constructor(){this.bb=null,this.bb_pos=0}__init(Oe,Ce){return this.bb_pos=Oe,this.bb=Ce,this}static getRootAsShape(Oe,Ce){return(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}static getSizePrefixedRootAsShape(Oe,Ce){return Oe.setPosition(Oe.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}dim(Oe,Ce){let Be=this.bb.__offset(this.bb_pos,4);return Be?(Ce||new Re.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Be)+4*Oe),this.bb):null}dimLength(){let Oe=this.bb.__offset(this.bb_pos,4);return Oe?this.bb.__vector_len(this.bb_pos+Oe):0}static startShape(Oe){Oe.startObject(1)}static addDim(Oe,Ce){Oe.addFieldOffset(0,Ce,0)}static createDimVector(Oe,Ce){Oe.startVector(4,Ce.length,4);for(let Be=Ce.length-1;Be>=0;Be--)Oe.addOffset(Ce[Be]);return Oe.endVector()}static startDimVector(Oe,Ce){Oe.startVector(4,Ce,4)}static endShape(Oe){return Oe.endObject()}static createShape(Oe,Ce){return De.startShape(Oe),De.addDim(Oe,Ce),De.endShape(Oe)}}Ve.Shape=De})(Me.fbs||(Me.fbs={}))})(Re.experimental||(Re.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Re){(function(Me){(function(Ve){class De{constructor(){this.bb=null,this.bb_pos=0}__init(Oe,Ce){return this.bb_pos=Oe,this.bb=Ce,this}static getRootAsDimension(Oe,Ce){return(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}static getSizePrefixedRootAsDimension(Oe,Ce){return Oe.setPosition(Oe.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}value(Oe){let Ce=this.bb.__offset(this.bb_pos,4);return Ce?(Oe||new Re.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+Ce),this.bb):null}denotation(Oe){let Ce=this.bb.__offset(this.bb_pos,6);return Ce?this.bb.__string(this.bb_pos+Ce,Oe):null}static startDimension(Oe){Oe.startObject(2)}static addValue(Oe,Ce){Oe.addFieldOffset(0,Ce,0)}static addDenotation(Oe,Ce){Oe.addFieldOffset(1,Ce,0)}static endDimension(Oe){return Oe.endObject()}static createDimension(Oe,Ce,Be){return De.startDimension(Oe),De.addValue(Oe,Ce),De.addDenotation(Oe,Be),De.endDimension(Oe)}}Ve.Dimension=De})(Me.fbs||(Me.fbs={}))})(Re.experimental||(Re.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Re){(function(Me){(function(Ve){class De{constructor(){this.bb=null,this.bb_pos=0}__init(Oe,Ce){return this.bb_pos=Oe,this.bb=Ce,this}static getRootAsDimensionValue(Oe,Ce){return(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}static getSizePrefixedRootAsDimensionValue(Oe,Ce){return Oe.setPosition(Oe.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}dimType(){let Oe=this.bb.__offset(this.bb_pos,4);return Oe?this.bb.readInt8(this.bb_pos+Oe):Re.experimental.fbs.DimensionValueType.UNKNOWN}dimValue(){let Oe=this.bb.__offset(this.bb_pos,6);return Oe?this.bb.readInt64(this.bb_pos+Oe):this.bb.createLong(0,0)}dimParam(Oe){let Ce=this.bb.__offset(this.bb_pos,8);return Ce?this.bb.__string(this.bb_pos+Ce,Oe):null}static startDimensionValue(Oe){Oe.startObject(3)}static addDimType(Oe,Ce){Oe.addFieldInt8(0,Ce,Re.experimental.fbs.DimensionValueType.UNKNOWN)}static addDimValue(Oe,Ce){Oe.addFieldInt64(1,Ce,Oe.createLong(0,0))}static addDimParam(Oe,Ce){Oe.addFieldOffset(2,Ce,0)}static endDimensionValue(Oe){return Oe.endObject()}static createDimensionValue(Oe,Ce,Be,Ue){return De.startDimensionValue(Oe),De.addDimType(Oe,Ce),De.addDimValue(Oe,Be),De.addDimParam(Oe,Ue),De.endDimensionValue(Oe)}}Ve.DimensionValue=De})(Me.fbs||(Me.fbs={}))})(Re.experimental||(Re.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Re){(function(Me){(function(Ve){class De{constructor(){this.bb=null,this.bb_pos=0}__init(Oe,Ce){return this.bb_pos=Oe,this.bb=Ce,this}static getRootAsTensorTypeAndShape(Oe,Ce){return(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}static getSizePrefixedRootAsTensorTypeAndShape(Oe,Ce){return Oe.setPosition(Oe.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}elemType(){let Oe=this.bb.__offset(this.bb_pos,4);return Oe?this.bb.readInt32(this.bb_pos+Oe):Re.experimental.fbs.TensorDataType.UNDEFINED}shape(Oe){let Ce=this.bb.__offset(this.bb_pos,6);return Ce?(Oe||new Re.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+Ce),this.bb):null}static startTensorTypeAndShape(Oe){Oe.startObject(2)}static addElemType(Oe,Ce){Oe.addFieldInt32(0,Ce,Re.experimental.fbs.TensorDataType.UNDEFINED)}static addShape(Oe,Ce){Oe.addFieldOffset(1,Ce,0)}static endTensorTypeAndShape(Oe){return Oe.endObject()}static createTensorTypeAndShape(Oe,Ce,Be){return De.startTensorTypeAndShape(Oe),De.addElemType(Oe,Ce),De.addShape(Oe,Be),De.endTensorTypeAndShape(Oe)}}Ve.TensorTypeAndShape=De})(Me.fbs||(Me.fbs={}))})(Re.experimental||(Re.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Re){(function(Me){(function(Ve){class De{constructor(){this.bb=null,this.bb_pos=0}__init(Oe,Ce){return this.bb_pos=Oe,this.bb=Ce,this}static getRootAsMapType(Oe,Ce){return(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}static getSizePrefixedRootAsMapType(Oe,Ce){return Oe.setPosition(Oe.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}keyType(){let Oe=this.bb.__offset(this.bb_pos,4);return Oe?this.bb.readInt32(this.bb_pos+Oe):Re.experimental.fbs.TensorDataType.UNDEFINED}valueType(Oe){let Ce=this.bb.__offset(this.bb_pos,6);return Ce?(Oe||new Re.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+Ce),this.bb):null}static startMapType(Oe){Oe.startObject(2)}static addKeyType(Oe,Ce){Oe.addFieldInt32(0,Ce,Re.experimental.fbs.TensorDataType.UNDEFINED)}static addValueType(Oe,Ce){Oe.addFieldOffset(1,Ce,0)}static endMapType(Oe){return Oe.endObject()}static createMapType(Oe,Ce,Be){return De.startMapType(Oe),De.addKeyType(Oe,Ce),De.addValueType(Oe,Be),De.endMapType(Oe)}}Ve.MapType=De})(Me.fbs||(Me.fbs={}))})(Re.experimental||(Re.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Re){(function(Me){(function(Ve){class De{constructor(){this.bb=null,this.bb_pos=0}__init(Oe,Ce){return this.bb_pos=Oe,this.bb=Ce,this}static getRootAsSequenceType(Oe,Ce){return(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}static getSizePrefixedRootAsSequenceType(Oe,Ce){return Oe.setPosition(Oe.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}elemType(Oe){let Ce=this.bb.__offset(this.bb_pos,4);return Ce?(Oe||new Re.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+Ce),this.bb):null}static startSequenceType(Oe){Oe.startObject(1)}static addElemType(Oe,Ce){Oe.addFieldOffset(0,Ce,0)}static endSequenceType(Oe){return Oe.endObject()}static createSequenceType(Oe,Ce){return De.startSequenceType(Oe),De.addElemType(Oe,Ce),De.endSequenceType(Oe)}}Ve.SequenceType=De})(Me.fbs||(Me.fbs={}))})(Re.experimental||(Re.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Re){(function(Me){(Me.fbs||(Me.fbs={})).EdgeEnd=class{constructor(){this.bb=null,this.bb_pos=0}__init(Ve,De){return this.bb_pos=Ve,this.bb=De,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(Ve,De,$e,Oe){return Ve.prep(4,12),Ve.writeInt32(Oe),Ve.writeInt32($e),Ve.writeInt32(De),Ve.offset()}}})(Re.experimental||(Re.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Re){(function(Me){(function(Ve){class De{constructor(){this.bb=null,this.bb_pos=0}__init(Oe,Ce){return this.bb_pos=Oe,this.bb=Ce,this}static getRootAsNodeEdge(Oe,Ce){return(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}static getSizePrefixedRootAsNodeEdge(Oe,Ce){return Oe.setPosition(Oe.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}nodeIndex(){let Oe=this.bb.__offset(this.bb_pos,4);return Oe?this.bb.readUint32(this.bb_pos+Oe):0}inputEdges(Oe,Ce){let Be=this.bb.__offset(this.bb_pos,6);return Be?(Ce||new Re.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+Be)+12*Oe,this.bb):null}inputEdgesLength(){let Oe=this.bb.__offset(this.bb_pos,6);return Oe?this.bb.__vector_len(this.bb_pos+Oe):0}outputEdges(Oe,Ce){let Be=this.bb.__offset(this.bb_pos,8);return Be?(Ce||new Re.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+Be)+12*Oe,this.bb):null}outputEdgesLength(){let Oe=this.bb.__offset(this.bb_pos,8);return Oe?this.bb.__vector_len(this.bb_pos+Oe):0}static startNodeEdge(Oe){Oe.startObject(3)}static addNodeIndex(Oe,Ce){Oe.addFieldInt32(0,Ce,0)}static addInputEdges(Oe,Ce){Oe.addFieldOffset(1,Ce,0)}static startInputEdgesVector(Oe,Ce){Oe.startVector(12,Ce,4)}static addOutputEdges(Oe,Ce){Oe.addFieldOffset(2,Ce,0)}static startOutputEdgesVector(Oe,Ce){Oe.startVector(12,Ce,4)}static endNodeEdge(Oe){return Oe.endObject()}static createNodeEdge(Oe,Ce,Be,Ue){return De.startNodeEdge(Oe),De.addNodeIndex(Oe,Ce),De.addInputEdges(Oe,Be),De.addOutputEdges(Oe,Ue),De.endNodeEdge(Oe)}}Ve.NodeEdge=De})(Me.fbs||(Me.fbs={}))})(Re.experimental||(Re.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Re){(function(Me){(function(Ve){class De{constructor(){this.bb=null,this.bb_pos=0}__init(Oe,Ce){return this.bb_pos=Oe,this.bb=Ce,this}static getRootAsNode(Oe,Ce){return(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}static getSizePrefixedRootAsNode(Oe,Ce){return Oe.setPosition(Oe.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}name(Oe){let Ce=this.bb.__offset(this.bb_pos,4);return Ce?this.bb.__string(this.bb_pos+Ce,Oe):null}docString(Oe){let Ce=this.bb.__offset(this.bb_pos,6);return Ce?this.bb.__string(this.bb_pos+Ce,Oe):null}domain(Oe){let Ce=this.bb.__offset(this.bb_pos,8);return Ce?this.bb.__string(this.bb_pos+Ce,Oe):null}sinceVersion(){let Oe=this.bb.__offset(this.bb_pos,10);return Oe?this.bb.readInt32(this.bb_pos+Oe):0}index(){let Oe=this.bb.__offset(this.bb_pos,12);return Oe?this.bb.readUint32(this.bb_pos+Oe):0}opType(Oe){let Ce=this.bb.__offset(this.bb_pos,14);return Ce?this.bb.__string(this.bb_pos+Ce,Oe):null}type(){let Oe=this.bb.__offset(this.bb_pos,16);return Oe?this.bb.readInt32(this.bb_pos+Oe):Re.experimental.fbs.NodeType.Primitive}executionProviderType(Oe){let Ce=this.bb.__offset(this.bb_pos,18);return Ce?this.bb.__string(this.bb_pos+Ce,Oe):null}inputs(Oe,Ce){let Be=this.bb.__offset(this.bb_pos,20);return Be?this.bb.__string(this.bb.__vector(this.bb_pos+Be)+4*Oe,Ce):null}inputsLength(){let Oe=this.bb.__offset(this.bb_pos,20);return Oe?this.bb.__vector_len(this.bb_pos+Oe):0}outputs(Oe,Ce){let Be=this.bb.__offset(this.bb_pos,22);return Be?this.bb.__string(this.bb.__vector(this.bb_pos+Be)+4*Oe,Ce):null}outputsLength(){let Oe=this.bb.__offset(this.bb_pos,22);return Oe?this.bb.__vector_len(this.bb_pos+Oe):0}attributes(Oe,Ce){let Be=this.bb.__offset(this.bb_pos,24);return Be?(Ce||new Re.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Be)+4*Oe),this.bb):null}attributesLength(){let Oe=this.bb.__offset(this.bb_pos,24);return Oe?this.bb.__vector_len(this.bb_pos+Oe):0}inputArgCounts(Oe){let Ce=this.bb.__offset(this.bb_pos,26);return Ce?this.bb.readInt32(this.bb.__vector(this.bb_pos+Ce)+4*Oe):0}inputArgCountsLength(){let Oe=this.bb.__offset(this.bb_pos,26);return Oe?this.bb.__vector_len(this.bb_pos+Oe):0}inputArgCountsArray(){let Oe=this.bb.__offset(this.bb_pos,26);return Oe?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+Oe),this.bb.__vector_len(this.bb_pos+Oe)):null}implicitInputs(Oe,Ce){let Be=this.bb.__offset(this.bb_pos,28);return Be?this.bb.__string(this.bb.__vector(this.bb_pos+Be)+4*Oe,Ce):null}implicitInputsLength(){let Oe=this.bb.__offset(this.bb_pos,28);return Oe?this.bb.__vector_len(this.bb_pos+Oe):0}static startNode(Oe){Oe.startObject(13)}static addName(Oe,Ce){Oe.addFieldOffset(0,Ce,0)}static addDocString(Oe,Ce){Oe.addFieldOffset(1,Ce,0)}static addDomain(Oe,Ce){Oe.addFieldOffset(2,Ce,0)}static addSinceVersion(Oe,Ce){Oe.addFieldInt32(3,Ce,0)}static addIndex(Oe,Ce){Oe.addFieldInt32(4,Ce,0)}static addOpType(Oe,Ce){Oe.addFieldOffset(5,Ce,0)}static addType(Oe,Ce){Oe.addFieldInt32(6,Ce,Re.experimental.fbs.NodeType.Primitive)}static addExecutionProviderType(Oe,Ce){Oe.addFieldOffset(7,Ce,0)}static addInputs(Oe,Ce){Oe.addFieldOffset(8,Ce,0)}static createInputsVector(Oe,Ce){Oe.startVector(4,Ce.length,4);for(let Be=Ce.length-1;Be>=0;Be--)Oe.addOffset(Ce[Be]);return Oe.endVector()}static startInputsVector(Oe,Ce){Oe.startVector(4,Ce,4)}static addOutputs(Oe,Ce){Oe.addFieldOffset(9,Ce,0)}static createOutputsVector(Oe,Ce){Oe.startVector(4,Ce.length,4);for(let Be=Ce.length-1;Be>=0;Be--)Oe.addOffset(Ce[Be]);return Oe.endVector()}static startOutputsVector(Oe,Ce){Oe.startVector(4,Ce,4)}static addAttributes(Oe,Ce){Oe.addFieldOffset(10,Ce,0)}static createAttributesVector(Oe,Ce){Oe.startVector(4,Ce.length,4);for(let Be=Ce.length-1;Be>=0;Be--)Oe.addOffset(Ce[Be]);return Oe.endVector()}static startAttributesVector(Oe,Ce){Oe.startVector(4,Ce,4)}static addInputArgCounts(Oe,Ce){Oe.addFieldOffset(11,Ce,0)}static createInputArgCountsVector(Oe,Ce){Oe.startVector(4,Ce.length,4);for(let Be=Ce.length-1;Be>=0;Be--)Oe.addInt32(Ce[Be]);return Oe.endVector()}static startInputArgCountsVector(Oe,Ce){Oe.startVector(4,Ce,4)}static addImplicitInputs(Oe,Ce){Oe.addFieldOffset(12,Ce,0)}static createImplicitInputsVector(Oe,Ce){Oe.startVector(4,Ce.length,4);for(let Be=Ce.length-1;Be>=0;Be--)Oe.addOffset(Ce[Be]);return Oe.endVector()}static startImplicitInputsVector(Oe,Ce){Oe.startVector(4,Ce,4)}static endNode(Oe){return Oe.endObject()}static createNode(Oe,Ce,Be,Ue,We,He,Ge,Ye,Je,Ze,fn,yn,mn,pn){return De.startNode(Oe),De.addName(Oe,Ce),De.addDocString(Oe,Be),De.addDomain(Oe,Ue),De.addSinceVersion(Oe,We),De.addIndex(Oe,He),De.addOpType(Oe,Ge),De.addType(Oe,Ye),De.addExecutionProviderType(Oe,Je),De.addInputs(Oe,Ze),De.addOutputs(Oe,fn),De.addAttributes(Oe,yn),De.addInputArgCounts(Oe,mn),De.addImplicitInputs(Oe,pn),De.endNode(Oe)}}Ve.Node=De})(Me.fbs||(Me.fbs={}))})(Re.experimental||(Re.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Re){(function(Me){(function(Ve){class De{constructor(){this.bb=null,this.bb_pos=0}__init(Oe,Ce){return this.bb_pos=Oe,this.bb=Ce,this}static getRootAsValueInfo(Oe,Ce){return(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}static getSizePrefixedRootAsValueInfo(Oe,Ce){return Oe.setPosition(Oe.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}name(Oe){let Ce=this.bb.__offset(this.bb_pos,4);return Ce?this.bb.__string(this.bb_pos+Ce,Oe):null}docString(Oe){let Ce=this.bb.__offset(this.bb_pos,6);return Ce?this.bb.__string(this.bb_pos+Ce,Oe):null}type(Oe){let Ce=this.bb.__offset(this.bb_pos,8);return Ce?(Oe||new Re.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+Ce),this.bb):null}static startValueInfo(Oe){Oe.startObject(3)}static addName(Oe,Ce){Oe.addFieldOffset(0,Ce,0)}static addDocString(Oe,Ce){Oe.addFieldOffset(1,Ce,0)}static addType(Oe,Ce){Oe.addFieldOffset(2,Ce,0)}static endValueInfo(Oe){return Oe.endObject()}static createValueInfo(Oe,Ce,Be,Ue){return De.startValueInfo(Oe),De.addName(Oe,Ce),De.addDocString(Oe,Be),De.addType(Oe,Ue),De.endValueInfo(Oe)}}Ve.ValueInfo=De})(Me.fbs||(Me.fbs={}))})(Re.experimental||(Re.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Re){(function(Me){(function(Ve){class De{constructor(){this.bb=null,this.bb_pos=0}__init(Oe,Ce){return this.bb_pos=Oe,this.bb=Ce,this}static getRootAsTypeInfo(Oe,Ce){return(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}static getSizePrefixedRootAsTypeInfo(Oe,Ce){return Oe.setPosition(Oe.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}denotation(Oe){let Ce=this.bb.__offset(this.bb_pos,4);return Ce?this.bb.__string(this.bb_pos+Ce,Oe):null}valueType(){let Oe=this.bb.__offset(this.bb_pos,6);return Oe?this.bb.readUint8(this.bb_pos+Oe):Re.experimental.fbs.TypeInfoValue.NONE}value(Oe){let Ce=this.bb.__offset(this.bb_pos,8);return Ce?this.bb.__union(Oe,this.bb_pos+Ce):null}static startTypeInfo(Oe){Oe.startObject(3)}static addDenotation(Oe,Ce){Oe.addFieldOffset(0,Ce,0)}static addValueType(Oe,Ce){Oe.addFieldInt8(1,Ce,Re.experimental.fbs.TypeInfoValue.NONE)}static addValue(Oe,Ce){Oe.addFieldOffset(2,Ce,0)}static endTypeInfo(Oe){return Oe.endObject()}static createTypeInfo(Oe,Ce,Be,Ue){return De.startTypeInfo(Oe),De.addDenotation(Oe,Ce),De.addValueType(Oe,Be),De.addValue(Oe,Ue),De.endTypeInfo(Oe)}}Ve.TypeInfo=De})(Me.fbs||(Me.fbs={}))})(Re.experimental||(Re.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Re){(function(Me){(function(Ve){class De{constructor(){this.bb=null,this.bb_pos=0}__init(Oe,Ce){return this.bb_pos=Oe,this.bb=Ce,this}static getRootAsOperatorSetId(Oe,Ce){return(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}static getSizePrefixedRootAsOperatorSetId(Oe,Ce){return Oe.setPosition(Oe.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}domain(Oe){let Ce=this.bb.__offset(this.bb_pos,4);return Ce?this.bb.__string(this.bb_pos+Ce,Oe):null}version(){let Oe=this.bb.__offset(this.bb_pos,6);return Oe?this.bb.readInt64(this.bb_pos+Oe):this.bb.createLong(0,0)}static startOperatorSetId(Oe){Oe.startObject(2)}static addDomain(Oe,Ce){Oe.addFieldOffset(0,Ce,0)}static addVersion(Oe,Ce){Oe.addFieldInt64(1,Ce,Oe.createLong(0,0))}static endOperatorSetId(Oe){return Oe.endObject()}static createOperatorSetId(Oe,Ce,Be){return De.startOperatorSetId(Oe),De.addDomain(Oe,Ce),De.addVersion(Oe,Be),De.endOperatorSetId(Oe)}}Ve.OperatorSetId=De})(Me.fbs||(Me.fbs={}))})(Re.experimental||(Re.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Re){(function(Me){(function(Ve){class De{constructor(){this.bb=null,this.bb_pos=0}__init(Oe,Ce){return this.bb_pos=Oe,this.bb=Ce,this}static getRootAsTensor(Oe,Ce){return(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}static getSizePrefixedRootAsTensor(Oe,Ce){return Oe.setPosition(Oe.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}name(Oe){let Ce=this.bb.__offset(this.bb_pos,4);return Ce?this.bb.__string(this.bb_pos+Ce,Oe):null}docString(Oe){let Ce=this.bb.__offset(this.bb_pos,6);return Ce?this.bb.__string(this.bb_pos+Ce,Oe):null}dims(Oe){let Ce=this.bb.__offset(this.bb_pos,8);return Ce?this.bb.readInt64(this.bb.__vector(this.bb_pos+Ce)+8*Oe):this.bb.createLong(0,0)}dimsLength(){let Oe=this.bb.__offset(this.bb_pos,8);return Oe?this.bb.__vector_len(this.bb_pos+Oe):0}dataType(){let Oe=this.bb.__offset(this.bb_pos,10);return Oe?this.bb.readInt32(this.bb_pos+Oe):Re.experimental.fbs.TensorDataType.UNDEFINED}rawData(Oe){let Ce=this.bb.__offset(this.bb_pos,12);return Ce?this.bb.readUint8(this.bb.__vector(this.bb_pos+Ce)+Oe):0}rawDataLength(){let Oe=this.bb.__offset(this.bb_pos,12);return Oe?this.bb.__vector_len(this.bb_pos+Oe):0}rawDataArray(){let Oe=this.bb.__offset(this.bb_pos,12);return Oe?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+Oe),this.bb.__vector_len(this.bb_pos+Oe)):null}stringData(Oe,Ce){let Be=this.bb.__offset(this.bb_pos,14);return Be?this.bb.__string(this.bb.__vector(this.bb_pos+Be)+4*Oe,Ce):null}stringDataLength(){let Oe=this.bb.__offset(this.bb_pos,14);return Oe?this.bb.__vector_len(this.bb_pos+Oe):0}static startTensor(Oe){Oe.startObject(6)}static addName(Oe,Ce){Oe.addFieldOffset(0,Ce,0)}static addDocString(Oe,Ce){Oe.addFieldOffset(1,Ce,0)}static addDims(Oe,Ce){Oe.addFieldOffset(2,Ce,0)}static createDimsVector(Oe,Ce){Oe.startVector(8,Ce.length,8);for(let Be=Ce.length-1;Be>=0;Be--)Oe.addInt64(Ce[Be]);return Oe.endVector()}static startDimsVector(Oe,Ce){Oe.startVector(8,Ce,8)}static addDataType(Oe,Ce){Oe.addFieldInt32(3,Ce,Re.experimental.fbs.TensorDataType.UNDEFINED)}static addRawData(Oe,Ce){Oe.addFieldOffset(4,Ce,0)}static createRawDataVector(Oe,Ce){Oe.startVector(1,Ce.length,1);for(let Be=Ce.length-1;Be>=0;Be--)Oe.addInt8(Ce[Be]);return Oe.endVector()}static startRawDataVector(Oe,Ce){Oe.startVector(1,Ce,1)}static addStringData(Oe,Ce){Oe.addFieldOffset(5,Ce,0)}static createStringDataVector(Oe,Ce){Oe.startVector(4,Ce.length,4);for(let Be=Ce.length-1;Be>=0;Be--)Oe.addOffset(Ce[Be]);return Oe.endVector()}static startStringDataVector(Oe,Ce){Oe.startVector(4,Ce,4)}static endTensor(Oe){return Oe.endObject()}static createTensor(Oe,Ce,Be,Ue,We,He,Ge){return De.startTensor(Oe),De.addName(Oe,Ce),De.addDocString(Oe,Be),De.addDims(Oe,Ue),De.addDataType(Oe,We),De.addRawData(Oe,He),De.addStringData(Oe,Ge),De.endTensor(Oe)}}Ve.Tensor=De})(Me.fbs||(Me.fbs={}))})(Re.experimental||(Re.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Re){(function(Me){(function(Ve){class De{constructor(){this.bb=null,this.bb_pos=0}__init(Oe,Ce){return this.bb_pos=Oe,this.bb=Ce,this}static getRootAsSparseTensor(Oe,Ce){return(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}static getSizePrefixedRootAsSparseTensor(Oe,Ce){return Oe.setPosition(Oe.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}values(Oe){let Ce=this.bb.__offset(this.bb_pos,4);return Ce?(Oe||new Re.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+Ce),this.bb):null}indices(Oe){let Ce=this.bb.__offset(this.bb_pos,6);return Ce?(Oe||new Re.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+Ce),this.bb):null}dims(Oe){let Ce=this.bb.__offset(this.bb_pos,8);return Ce?this.bb.readInt64(this.bb.__vector(this.bb_pos+Ce)+8*Oe):this.bb.createLong(0,0)}dimsLength(){let Oe=this.bb.__offset(this.bb_pos,8);return Oe?this.bb.__vector_len(this.bb_pos+Oe):0}static startSparseTensor(Oe){Oe.startObject(3)}static addValues(Oe,Ce){Oe.addFieldOffset(0,Ce,0)}static addIndices(Oe,Ce){Oe.addFieldOffset(1,Ce,0)}static addDims(Oe,Ce){Oe.addFieldOffset(2,Ce,0)}static createDimsVector(Oe,Ce){Oe.startVector(8,Ce.length,8);for(let Be=Ce.length-1;Be>=0;Be--)Oe.addInt64(Ce[Be]);return Oe.endVector()}static startDimsVector(Oe,Ce){Oe.startVector(8,Ce,8)}static endSparseTensor(Oe){return Oe.endObject()}static createSparseTensor(Oe,Ce,Be,Ue){return De.startSparseTensor(Oe),De.addValues(Oe,Ce),De.addIndices(Oe,Be),De.addDims(Oe,Ue),De.endSparseTensor(Oe)}}Ve.SparseTensor=De})(Me.fbs||(Me.fbs={}))})(Re.experimental||(Re.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Re){(function(Me){(function(Ve){class De{constructor(){this.bb=null,this.bb_pos=0}__init(Oe,Ce){return this.bb_pos=Oe,this.bb=Ce,this}static getRootAsAttribute(Oe,Ce){return(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}static getSizePrefixedRootAsAttribute(Oe,Ce){return Oe.setPosition(Oe.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}name(Oe){let Ce=this.bb.__offset(this.bb_pos,4);return Ce?this.bb.__string(this.bb_pos+Ce,Oe):null}docString(Oe){let Ce=this.bb.__offset(this.bb_pos,6);return Ce?this.bb.__string(this.bb_pos+Ce,Oe):null}type(){let Oe=this.bb.__offset(this.bb_pos,8);return Oe?this.bb.readInt32(this.bb_pos+Oe):Re.experimental.fbs.AttributeType.UNDEFINED}f(){let Oe=this.bb.__offset(this.bb_pos,10);return Oe?this.bb.readFloat32(this.bb_pos+Oe):0}i(){let Oe=this.bb.__offset(this.bb_pos,12);return Oe?this.bb.readInt64(this.bb_pos+Oe):this.bb.createLong(0,0)}s(Oe){let Ce=this.bb.__offset(this.bb_pos,14);return Ce?this.bb.__string(this.bb_pos+Ce,Oe):null}t(Oe){let Ce=this.bb.__offset(this.bb_pos,16);return Ce?(Oe||new Re.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+Ce),this.bb):null}g(Oe){let Ce=this.bb.__offset(this.bb_pos,18);return Ce?(Oe||new Re.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+Ce),this.bb):null}floats(Oe){let Ce=this.bb.__offset(this.bb_pos,20);return Ce?this.bb.readFloat32(this.bb.__vector(this.bb_pos+Ce)+4*Oe):0}floatsLength(){let Oe=this.bb.__offset(this.bb_pos,20);return Oe?this.bb.__vector_len(this.bb_pos+Oe):0}floatsArray(){let Oe=this.bb.__offset(this.bb_pos,20);return Oe?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+Oe),this.bb.__vector_len(this.bb_pos+Oe)):null}ints(Oe){let Ce=this.bb.__offset(this.bb_pos,22);return Ce?this.bb.readInt64(this.bb.__vector(this.bb_pos+Ce)+8*Oe):this.bb.createLong(0,0)}intsLength(){let Oe=this.bb.__offset(this.bb_pos,22);return Oe?this.bb.__vector_len(this.bb_pos+Oe):0}strings(Oe,Ce){let Be=this.bb.__offset(this.bb_pos,24);return Be?this.bb.__string(this.bb.__vector(this.bb_pos+Be)+4*Oe,Ce):null}stringsLength(){let Oe=this.bb.__offset(this.bb_pos,24);return Oe?this.bb.__vector_len(this.bb_pos+Oe):0}tensors(Oe,Ce){let Be=this.bb.__offset(this.bb_pos,26);return Be?(Ce||new Re.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Be)+4*Oe),this.bb):null}tensorsLength(){let Oe=this.bb.__offset(this.bb_pos,26);return Oe?this.bb.__vector_len(this.bb_pos+Oe):0}graphs(Oe,Ce){let Be=this.bb.__offset(this.bb_pos,28);return Be?(Ce||new Re.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Be)+4*Oe),this.bb):null}graphsLength(){let Oe=this.bb.__offset(this.bb_pos,28);return Oe?this.bb.__vector_len(this.bb_pos+Oe):0}static startAttribute(Oe){Oe.startObject(13)}static addName(Oe,Ce){Oe.addFieldOffset(0,Ce,0)}static addDocString(Oe,Ce){Oe.addFieldOffset(1,Ce,0)}static addType(Oe,Ce){Oe.addFieldInt32(2,Ce,Re.experimental.fbs.AttributeType.UNDEFINED)}static addF(Oe,Ce){Oe.addFieldFloat32(3,Ce,0)}static addI(Oe,Ce){Oe.addFieldInt64(4,Ce,Oe.createLong(0,0))}static addS(Oe,Ce){Oe.addFieldOffset(5,Ce,0)}static addT(Oe,Ce){Oe.addFieldOffset(6,Ce,0)}static addG(Oe,Ce){Oe.addFieldOffset(7,Ce,0)}static addFloats(Oe,Ce){Oe.addFieldOffset(8,Ce,0)}static createFloatsVector(Oe,Ce){Oe.startVector(4,Ce.length,4);for(let Be=Ce.length-1;Be>=0;Be--)Oe.addFloat32(Ce[Be]);return Oe.endVector()}static startFloatsVector(Oe,Ce){Oe.startVector(4,Ce,4)}static addInts(Oe,Ce){Oe.addFieldOffset(9,Ce,0)}static createIntsVector(Oe,Ce){Oe.startVector(8,Ce.length,8);for(let Be=Ce.length-1;Be>=0;Be--)Oe.addInt64(Ce[Be]);return Oe.endVector()}static startIntsVector(Oe,Ce){Oe.startVector(8,Ce,8)}static addStrings(Oe,Ce){Oe.addFieldOffset(10,Ce,0)}static createStringsVector(Oe,Ce){Oe.startVector(4,Ce.length,4);for(let Be=Ce.length-1;Be>=0;Be--)Oe.addOffset(Ce[Be]);return Oe.endVector()}static startStringsVector(Oe,Ce){Oe.startVector(4,Ce,4)}static addTensors(Oe,Ce){Oe.addFieldOffset(11,Ce,0)}static createTensorsVector(Oe,Ce){Oe.startVector(4,Ce.length,4);for(let Be=Ce.length-1;Be>=0;Be--)Oe.addOffset(Ce[Be]);return Oe.endVector()}static startTensorsVector(Oe,Ce){Oe.startVector(4,Ce,4)}static addGraphs(Oe,Ce){Oe.addFieldOffset(12,Ce,0)}static createGraphsVector(Oe,Ce){Oe.startVector(4,Ce.length,4);for(let Be=Ce.length-1;Be>=0;Be--)Oe.addOffset(Ce[Be]);return Oe.endVector()}static startGraphsVector(Oe,Ce){Oe.startVector(4,Ce,4)}static endAttribute(Oe){return Oe.endObject()}static createAttribute(Oe,Ce,Be,Ue,We,He,Ge,Ye,Je,Ze,fn,yn,mn,pn){return De.startAttribute(Oe),De.addName(Oe,Ce),De.addDocString(Oe,Be),De.addType(Oe,Ue),De.addF(Oe,We),De.addI(Oe,He),De.addS(Oe,Ge),De.addT(Oe,Ye),De.addG(Oe,Je),De.addFloats(Oe,Ze),De.addInts(Oe,fn),De.addStrings(Oe,yn),De.addTensors(Oe,mn),De.addGraphs(Oe,pn),De.endAttribute(Oe)}}Ve.Attribute=De})(Me.fbs||(Me.fbs={}))})(Re.experimental||(Re.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Re){(function(Me){(function(Ve){class De{constructor(){this.bb=null,this.bb_pos=0}__init(Oe,Ce){return this.bb_pos=Oe,this.bb=Ce,this}static getRootAsGraph(Oe,Ce){return(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}static getSizePrefixedRootAsGraph(Oe,Ce){return Oe.setPosition(Oe.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}initializers(Oe,Ce){let Be=this.bb.__offset(this.bb_pos,4);return Be?(Ce||new Re.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Be)+4*Oe),this.bb):null}initializersLength(){let Oe=this.bb.__offset(this.bb_pos,4);return Oe?this.bb.__vector_len(this.bb_pos+Oe):0}nodeArgs(Oe,Ce){let Be=this.bb.__offset(this.bb_pos,6);return Be?(Ce||new Re.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Be)+4*Oe),this.bb):null}nodeArgsLength(){let Oe=this.bb.__offset(this.bb_pos,6);return Oe?this.bb.__vector_len(this.bb_pos+Oe):0}nodes(Oe,Ce){let Be=this.bb.__offset(this.bb_pos,8);return Be?(Ce||new Re.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Be)+4*Oe),this.bb):null}nodesLength(){let Oe=this.bb.__offset(this.bb_pos,8);return Oe?this.bb.__vector_len(this.bb_pos+Oe):0}maxNodeIndex(){let Oe=this.bb.__offset(this.bb_pos,10);return Oe?this.bb.readUint32(this.bb_pos+Oe):0}nodeEdges(Oe,Ce){let Be=this.bb.__offset(this.bb_pos,12);return Be?(Ce||new Re.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Be)+4*Oe),this.bb):null}nodeEdgesLength(){let Oe=this.bb.__offset(this.bb_pos,12);return Oe?this.bb.__vector_len(this.bb_pos+Oe):0}inputs(Oe,Ce){let Be=this.bb.__offset(this.bb_pos,14);return Be?this.bb.__string(this.bb.__vector(this.bb_pos+Be)+4*Oe,Ce):null}inputsLength(){let Oe=this.bb.__offset(this.bb_pos,14);return Oe?this.bb.__vector_len(this.bb_pos+Oe):0}outputs(Oe,Ce){let Be=this.bb.__offset(this.bb_pos,16);return Be?this.bb.__string(this.bb.__vector(this.bb_pos+Be)+4*Oe,Ce):null}outputsLength(){let Oe=this.bb.__offset(this.bb_pos,16);return Oe?this.bb.__vector_len(this.bb_pos+Oe):0}sparseInitializers(Oe,Ce){let Be=this.bb.__offset(this.bb_pos,18);return Be?(Ce||new Re.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Be)+4*Oe),this.bb):null}sparseInitializersLength(){let Oe=this.bb.__offset(this.bb_pos,18);return Oe?this.bb.__vector_len(this.bb_pos+Oe):0}static startGraph(Oe){Oe.startObject(8)}static addInitializers(Oe,Ce){Oe.addFieldOffset(0,Ce,0)}static createInitializersVector(Oe,Ce){Oe.startVector(4,Ce.length,4);for(let Be=Ce.length-1;Be>=0;Be--)Oe.addOffset(Ce[Be]);return Oe.endVector()}static startInitializersVector(Oe,Ce){Oe.startVector(4,Ce,4)}static addNodeArgs(Oe,Ce){Oe.addFieldOffset(1,Ce,0)}static createNodeArgsVector(Oe,Ce){Oe.startVector(4,Ce.length,4);for(let Be=Ce.length-1;Be>=0;Be--)Oe.addOffset(Ce[Be]);return Oe.endVector()}static startNodeArgsVector(Oe,Ce){Oe.startVector(4,Ce,4)}static addNodes(Oe,Ce){Oe.addFieldOffset(2,Ce,0)}static createNodesVector(Oe,Ce){Oe.startVector(4,Ce.length,4);for(let Be=Ce.length-1;Be>=0;Be--)Oe.addOffset(Ce[Be]);return Oe.endVector()}static startNodesVector(Oe,Ce){Oe.startVector(4,Ce,4)}static addMaxNodeIndex(Oe,Ce){Oe.addFieldInt32(3,Ce,0)}static addNodeEdges(Oe,Ce){Oe.addFieldOffset(4,Ce,0)}static createNodeEdgesVector(Oe,Ce){Oe.startVector(4,Ce.length,4);for(let Be=Ce.length-1;Be>=0;Be--)Oe.addOffset(Ce[Be]);return Oe.endVector()}static startNodeEdgesVector(Oe,Ce){Oe.startVector(4,Ce,4)}static addInputs(Oe,Ce){Oe.addFieldOffset(5,Ce,0)}static createInputsVector(Oe,Ce){Oe.startVector(4,Ce.length,4);for(let Be=Ce.length-1;Be>=0;Be--)Oe.addOffset(Ce[Be]);return Oe.endVector()}static startInputsVector(Oe,Ce){Oe.startVector(4,Ce,4)}static addOutputs(Oe,Ce){Oe.addFieldOffset(6,Ce,0)}static createOutputsVector(Oe,Ce){Oe.startVector(4,Ce.length,4);for(let Be=Ce.length-1;Be>=0;Be--)Oe.addOffset(Ce[Be]);return Oe.endVector()}static startOutputsVector(Oe,Ce){Oe.startVector(4,Ce,4)}static addSparseInitializers(Oe,Ce){Oe.addFieldOffset(7,Ce,0)}static createSparseInitializersVector(Oe,Ce){Oe.startVector(4,Ce.length,4);for(let Be=Ce.length-1;Be>=0;Be--)Oe.addOffset(Ce[Be]);return Oe.endVector()}static startSparseInitializersVector(Oe,Ce){Oe.startVector(4,Ce,4)}static endGraph(Oe){return Oe.endObject()}static createGraph(Oe,Ce,Be,Ue,We,He,Ge,Ye,Je){return De.startGraph(Oe),De.addInitializers(Oe,Ce),De.addNodeArgs(Oe,Be),De.addNodes(Oe,Ue),De.addMaxNodeIndex(Oe,We),De.addNodeEdges(Oe,He),De.addInputs(Oe,Ge),De.addOutputs(Oe,Ye),De.addSparseInitializers(Oe,Je),De.endGraph(Oe)}}Ve.Graph=De})(Me.fbs||(Me.fbs={}))})(Re.experimental||(Re.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Re){(function(Me){(function(Ve){class De{constructor(){this.bb=null,this.bb_pos=0}__init(Oe,Ce){return this.bb_pos=Oe,this.bb=Ce,this}static getRootAsModel(Oe,Ce){return(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}static getSizePrefixedRootAsModel(Oe,Ce){return Oe.setPosition(Oe.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}irVersion(){let Oe=this.bb.__offset(this.bb_pos,4);return Oe?this.bb.readInt64(this.bb_pos+Oe):this.bb.createLong(0,0)}opsetImport(Oe,Ce){let Be=this.bb.__offset(this.bb_pos,6);return Be?(Ce||new Re.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Be)+4*Oe),this.bb):null}opsetImportLength(){let Oe=this.bb.__offset(this.bb_pos,6);return Oe?this.bb.__vector_len(this.bb_pos+Oe):0}producerName(Oe){let Ce=this.bb.__offset(this.bb_pos,8);return Ce?this.bb.__string(this.bb_pos+Ce,Oe):null}producerVersion(Oe){let Ce=this.bb.__offset(this.bb_pos,10);return Ce?this.bb.__string(this.bb_pos+Ce,Oe):null}domain(Oe){let Ce=this.bb.__offset(this.bb_pos,12);return Ce?this.bb.__string(this.bb_pos+Ce,Oe):null}modelVersion(){let Oe=this.bb.__offset(this.bb_pos,14);return Oe?this.bb.readInt64(this.bb_pos+Oe):this.bb.createLong(0,0)}docString(Oe){let Ce=this.bb.__offset(this.bb_pos,16);return Ce?this.bb.__string(this.bb_pos+Ce,Oe):null}graph(Oe){let Ce=this.bb.__offset(this.bb_pos,18);return Ce?(Oe||new Re.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+Ce),this.bb):null}graphDocString(Oe){let Ce=this.bb.__offset(this.bb_pos,20);return Ce?this.bb.__string(this.bb_pos+Ce,Oe):null}static startModel(Oe){Oe.startObject(9)}static addIrVersion(Oe,Ce){Oe.addFieldInt64(0,Ce,Oe.createLong(0,0))}static addOpsetImport(Oe,Ce){Oe.addFieldOffset(1,Ce,0)}static createOpsetImportVector(Oe,Ce){Oe.startVector(4,Ce.length,4);for(let Be=Ce.length-1;Be>=0;Be--)Oe.addOffset(Ce[Be]);return Oe.endVector()}static startOpsetImportVector(Oe,Ce){Oe.startVector(4,Ce,4)}static addProducerName(Oe,Ce){Oe.addFieldOffset(2,Ce,0)}static addProducerVersion(Oe,Ce){Oe.addFieldOffset(3,Ce,0)}static addDomain(Oe,Ce){Oe.addFieldOffset(4,Ce,0)}static addModelVersion(Oe,Ce){Oe.addFieldInt64(5,Ce,Oe.createLong(0,0))}static addDocString(Oe,Ce){Oe.addFieldOffset(6,Ce,0)}static addGraph(Oe,Ce){Oe.addFieldOffset(7,Ce,0)}static addGraphDocString(Oe,Ce){Oe.addFieldOffset(8,Ce,0)}static endModel(Oe){return Oe.endObject()}static createModel(Oe,Ce,Be,Ue,We,He,Ge,Ye,Je,Ze){return De.startModel(Oe),De.addIrVersion(Oe,Ce),De.addOpsetImport(Oe,Be),De.addProducerName(Oe,Ue),De.addProducerVersion(Oe,We),De.addDomain(Oe,He),De.addModelVersion(Oe,Ge),De.addDocString(Oe,Ye),De.addGraph(Oe,Je),De.addGraphDocString(Oe,Ze),De.endModel(Oe)}}Ve.Model=De})(Me.fbs||(Me.fbs={}))})(Re.experimental||(Re.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Re){(function(Me){(function(Ve){class De{constructor(){this.bb=null,this.bb_pos=0}__init(Oe,Ce){return this.bb_pos=Oe,this.bb=Ce,this}static getRootAsKernelCreateInfos(Oe,Ce){return(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}static getSizePrefixedRootAsKernelCreateInfos(Oe,Ce){return Oe.setPosition(Oe.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}nodeIndices(Oe){let Ce=this.bb.__offset(this.bb_pos,4);return Ce?this.bb.readUint32(this.bb.__vector(this.bb_pos+Ce)+4*Oe):0}nodeIndicesLength(){let Oe=this.bb.__offset(this.bb_pos,4);return Oe?this.bb.__vector_len(this.bb_pos+Oe):0}nodeIndicesArray(){let Oe=this.bb.__offset(this.bb_pos,4);return Oe?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+Oe),this.bb.__vector_len(this.bb_pos+Oe)):null}kernelDefHashes(Oe){let Ce=this.bb.__offset(this.bb_pos,6);return Ce?this.bb.readUint64(this.bb.__vector(this.bb_pos+Ce)+8*Oe):this.bb.createLong(0,0)}kernelDefHashesLength(){let Oe=this.bb.__offset(this.bb_pos,6);return Oe?this.bb.__vector_len(this.bb_pos+Oe):0}static startKernelCreateInfos(Oe){Oe.startObject(2)}static addNodeIndices(Oe,Ce){Oe.addFieldOffset(0,Ce,0)}static createNodeIndicesVector(Oe,Ce){Oe.startVector(4,Ce.length,4);for(let Be=Ce.length-1;Be>=0;Be--)Oe.addInt32(Ce[Be]);return Oe.endVector()}static startNodeIndicesVector(Oe,Ce){Oe.startVector(4,Ce,4)}static addKernelDefHashes(Oe,Ce){Oe.addFieldOffset(1,Ce,0)}static createKernelDefHashesVector(Oe,Ce){Oe.startVector(8,Ce.length,8);for(let Be=Ce.length-1;Be>=0;Be--)Oe.addInt64(Ce[Be]);return Oe.endVector()}static startKernelDefHashesVector(Oe,Ce){Oe.startVector(8,Ce,8)}static endKernelCreateInfos(Oe){return Oe.endObject()}static createKernelCreateInfos(Oe,Ce,Be){return De.startKernelCreateInfos(Oe),De.addNodeIndices(Oe,Ce),De.addKernelDefHashes(Oe,Be),De.endKernelCreateInfos(Oe)}}Ve.KernelCreateInfos=De})(Me.fbs||(Me.fbs={}))})(Re.experimental||(Re.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Re){(function(Me){(function(Ve){class De{constructor(){this.bb=null,this.bb_pos=0}__init(Oe,Ce){return this.bb_pos=Oe,this.bb=Ce,this}static getRootAsSubGraphSessionState(Oe,Ce){return(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}static getSizePrefixedRootAsSubGraphSessionState(Oe,Ce){return Oe.setPosition(Oe.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}graphId(Oe){let Ce=this.bb.__offset(this.bb_pos,4);return Ce?this.bb.__string(this.bb_pos+Ce,Oe):null}sessionState(Oe){let Ce=this.bb.__offset(this.bb_pos,6);return Ce?(Oe||new Re.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+Ce),this.bb):null}static startSubGraphSessionState(Oe){Oe.startObject(2)}static addGraphId(Oe,Ce){Oe.addFieldOffset(0,Ce,0)}static addSessionState(Oe,Ce){Oe.addFieldOffset(1,Ce,0)}static endSubGraphSessionState(Oe){let Ce=Oe.endObject();return Oe.requiredField(Ce,4),Ce}static createSubGraphSessionState(Oe,Ce,Be){return De.startSubGraphSessionState(Oe),De.addGraphId(Oe,Ce),De.addSessionState(Oe,Be),De.endSubGraphSessionState(Oe)}}Ve.SubGraphSessionState=De})(Me.fbs||(Me.fbs={}))})(Re.experimental||(Re.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Re){(function(Me){(function(Ve){class De{constructor(){this.bb=null,this.bb_pos=0}__init(Oe,Ce){return this.bb_pos=Oe,this.bb=Ce,this}static getRootAsSessionState(Oe,Ce){return(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}static getSizePrefixedRootAsSessionState(Oe,Ce){return Oe.setPosition(Oe.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}kernels(Oe){let Ce=this.bb.__offset(this.bb_pos,4);return Ce?(Oe||new Re.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+Ce),this.bb):null}subGraphSessionStates(Oe,Ce){let Be=this.bb.__offset(this.bb_pos,6);return Be?(Ce||new Re.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+Be)+4*Oe),this.bb):null}subGraphSessionStatesLength(){let Oe=this.bb.__offset(this.bb_pos,6);return Oe?this.bb.__vector_len(this.bb_pos+Oe):0}static startSessionState(Oe){Oe.startObject(2)}static addKernels(Oe,Ce){Oe.addFieldOffset(0,Ce,0)}static addSubGraphSessionStates(Oe,Ce){Oe.addFieldOffset(1,Ce,0)}static createSubGraphSessionStatesVector(Oe,Ce){Oe.startVector(4,Ce.length,4);for(let Be=Ce.length-1;Be>=0;Be--)Oe.addOffset(Ce[Be]);return Oe.endVector()}static startSubGraphSessionStatesVector(Oe,Ce){Oe.startVector(4,Ce,4)}static endSessionState(Oe){return Oe.endObject()}static createSessionState(Oe,Ce,Be){return De.startSessionState(Oe),De.addKernels(Oe,Ce),De.addSubGraphSessionStates(Oe,Be),De.endSessionState(Oe)}}Ve.SessionState=De})(Me.fbs||(Me.fbs={}))})(Re.experimental||(Re.experimental={}))}(e.onnxruntime||(e.onnxruntime={})),function(Re){(function(Me){(function(Ve){class De{constructor(){this.bb=null,this.bb_pos=0}__init(Oe,Ce){return this.bb_pos=Oe,this.bb=Ce,this}static getRootAsInferenceSession(Oe,Ce){return(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}static getSizePrefixedRootAsInferenceSession(Oe,Ce){return Oe.setPosition(Oe.position()+r.flatbuffers.SIZE_PREFIX_LENGTH),(Ce||new De).__init(Oe.readInt32(Oe.position())+Oe.position(),Oe)}static bufferHasIdentifier(Oe){return Oe.__has_identifier("ORTM")}ortVersion(Oe){let Ce=this.bb.__offset(this.bb_pos,4);return Ce?this.bb.__string(this.bb_pos+Ce,Oe):null}model(Oe){let Ce=this.bb.__offset(this.bb_pos,6);return Ce?(Oe||new Re.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+Ce),this.bb):null}sessionState(Oe){let Ce=this.bb.__offset(this.bb_pos,8);return Ce?(Oe||new Re.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+Ce),this.bb):null}static startInferenceSession(Oe){Oe.startObject(3)}static addOrtVersion(Oe,Ce){Oe.addFieldOffset(0,Ce,0)}static addModel(Oe,Ce){Oe.addFieldOffset(1,Ce,0)}static addSessionState(Oe,Ce){Oe.addFieldOffset(2,Ce,0)}static endInferenceSession(Oe){return Oe.endObject()}static finishInferenceSessionBuffer(Oe,Ce){Oe.finish(Ce,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(Oe,Ce){Oe.finish(Ce,"ORTM",!0)}static createInferenceSession(Oe,Ce,Be,Ue){return De.startInferenceSession(Oe),De.addOrtVersion(Oe,Ce),De.addModel(Oe,Be),De.addSessionState(Oe,Ue),De.endInferenceSession(Oe)}}Ve.InferenceSession=De})(Me.fbs||(Me.fbs={}))})(Re.experimental||(Re.experimental={}))}(e.onnxruntime||(e.onnxruntime={}))},7448:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxjsSessionHandler=void 0;const r=t(1670),Ee=t(9162);e.OnnxjsSessionHandler=class{constructor(Te){this.session=Te,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(Te,Re,Me){const Ve=new Map;for(const Oe in Te)if(Object.hasOwnProperty.call(Te,Oe)){const Ce=Te[Oe];Ve.set(Oe,new Ee.Tensor(Ce.dims,Ce.type,void 0,void 0,Ce.data))}const De=await this.session.run(Ve),$e={};return De.forEach((Oe,Ce)=>{$e[Ce]=new r.Tensor(Oe.type,Oe.data,Oe.dims)}),$e}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}},6919:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Session=void 0;const r=t(7067),Ee=t(1296),Te=t(7091),Re=t(1036),Me=t(6231),Ve=t(2644);e.Session=class{constructor(De={}){this._initialized=!1,this.backendHint=De.backendHint,this.profiler=Me.Profiler.create(De.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(De,$e,Oe){await this.profiler.event("session","Session.loadModel",async()=>{const Ce=await(0,Te.resolveBackend)(this.backendHint);if(this.sessionHandler=Ce.createSessionHandler(this.context),this._model=new Ve.Model,typeof De=="string"){const Be=De.endsWith(".ort");if(typeof fetch>"u"){const Ue=await(0,Ee.promisify)(r.readFile)(De);this.initialize(Ue,Be)}else{const Ue=await fetch(De),We=await Ue.arrayBuffer();this.initialize(new Uint8Array(We),Be)}}else if(ArrayBuffer.isView(De))this.initialize(De);else{const Be=new Uint8Array(De,$e||0,Oe||De.byteLength);this.initialize(Be)}})}initialize(De,$e){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{const Oe=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(De,Oe,$e),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new Re.ExecutionPlan(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(De){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{const $e=this.normalizeAndValidateInputs(De),Oe=await this._executionPlan.execute(this.sessionHandler,$e);return this.createOutput(Oe)})}normalizeAndValidateInputs(De){const $e=this._model.graph.getInputNames();if(Array.isArray(De)){if(De.length!==$e.length)throw new Error(`incorrect input array length: expected ${$e.length} but got ${De.length}`)}else{if(De.size!==$e.length)throw new Error(`incorrect input map size: expected ${$e.length} but got ${De.size}`);const Oe=new Array(De.size);let Ce=0;for(let Be=0;Be<$e.length;++Be){const Ue=De.get($e[Be]);if(!Ue)throw new Error(`missing input tensor for: '${name}'`);Oe[Ce++]=Ue}De=Oe}if(this.context.graphInputTypes&&this.context.graphInputTypes.length!==0&&this.context.graphInputDims&&this.context.graphInputDims.length!==0)this.validateInputTensorDims(this.context.graphInputDims,De,!1);else{const Oe=this._model.graph.getInputIndices(),Ce=this._model.graph.getValues(),Be=new Array(Oe.length);for(let Ue=0;Ue<Oe.length;++Ue){const We=Ce[Oe[Ue]];Be[Ue]=We.type.shape.dims,this.context.graphInputTypes.push(We.type.tensorType),this.context.graphInputDims.push(De[Ue].dims)}this.validateInputTensorDims(Be,De,!0)}return this.validateInputTensorTypes(this.context.graphInputTypes,De),De}validateInputTensorTypes(De,$e){for(let Oe=0;Oe<$e.length;Oe++){const Ce=De[Oe],Be=$e[Oe].type;if(Ce!==Be)throw new Error(`input tensor[${Oe}] check failed: expected type '${Ce}' but got ${Be}`)}}validateInputTensorDims(De,$e,Oe){for(let Ce=0;Ce<$e.length;Ce++){const Be=De[Ce],Ue=$e[Ce].dims;if(!this.compareTensorDims(Be,Ue,Oe))throw new Error(`input tensor[${Ce}] check failed: expected shape '[${Be.join(",")}]' but got [${Ue.join(",")}]`)}}compareTensorDims(De,$e,Oe){if(De.length!==$e.length)return!1;for(let Ce=0;Ce<De.length;++Ce)if(De[Ce]!==$e[Ce]&&(!Oe||De[Ce]!==0))return!1;return!0}createOutput(De){const $e=this._model.graph.getOutputNames();if(De.length!==$e.length)throw new Error("expected number of outputs do not match number of generated outputs");const Oe=new Map;for(let Ce=0;Ce<$e.length;++Ce)Oe.set($e[Ce],De[Ce]);return Oe}initializeOps(De){const $e=De.getNodes();this._ops=new Array($e.length);for(let Oe=0;Oe<$e.length;Oe++)this._ops[Oe]=this.sessionHandler.resolve($e[Oe],this._model.opsets,De)}}},9162:function(n,e,t){var r=this&&this.__importDefault||function(We){return We&&We.__esModule?We:{default:We}};Object.defineProperty(e,"__esModule",{value:!0}),e.Tensor=void 0;const Ee=t(3442),Te=r(t(3720)),Re=t(1446),Me=t(9395),Ve=t(2517);var De=Me.onnxruntime.experimental.fbs;class $e{get data(){if(this.cache===void 0){const He=this.dataProvider(this.dataId);if(He.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=He}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(He){return this.data[Ve.ShapeUtil.indicesToOffset(He,this.strides)]}set(He,Ge){this.data[Ve.ShapeUtil.indicesToOffset(He,this.strides)]=Ge}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=Ve.ShapeUtil.computeStrides(this.dims)),this._strides}constructor(He,Ge,Ye,Je,Ze,fn=Ee.Guid.create()){this.dims=He,this.type=Ge,this.dataProvider=Ye,this.asyncDataProvider=Je,this.cache=Ze,this.dataId=fn,this.size=Ve.ShapeUtil.validateDimsAndCalcSize(He);const yn=this.size,mn=Ye===void 0&&Je===void 0&&Ze===void 0;if(Ze!==void 0&&Ze.length!==yn)throw new RangeError("Input dims doesn't match data length.");if(Ge==="string"){if(!(Ze===void 0||Array.isArray(Ze)&&Ze.every(pn=>typeof pn=="string")))throw new TypeError("cache should be a string array");mn&&(this.cache=new Array(yn))}else{if(Ze!==void 0){const pn=Ce(Ge);if(!(Ze instanceof pn))throw new TypeError(`cache should be type ${pn.name}`)}if(mn){const pn=new ArrayBuffer(yn*function(un){switch(un){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${un}`)}}(Ge));this.cache=function(un,bn){return new(Ce(bn))(un)}(pn,Ge)}}}static fromProto(He){if(!He)throw new Error("cannot construct Value from an empty tensor");const Ge=Ve.ProtoUtil.tensorDataTypeFromProto(He.dataType),Ye=Ve.ProtoUtil.tensorDimsFromProto(He.dims),Je=new $e(Ye,Ge);if(Ge==="string")He.stringData.forEach((Ze,fn)=>{Je.data[fn]=(0,Ve.decodeUtf8String)(Ze)});else if(He.rawData&&typeof He.rawData.byteLength=="number"&&He.rawData.byteLength>0){const Ze=Je.data,fn=new DataView(He.rawData.buffer,He.rawData.byteOffset,He.rawData.byteLength),yn=Oe(He.dataType),mn=He.rawData.byteLength/yn;if(He.rawData.byteLength%yn!=0)throw new Error("invalid buffer length");if(Ze.length!==mn)throw new Error("buffer length mismatch");for(let pn=0;pn<mn;pn++){const un=Ue(fn,He.dataType,pn*yn);Ze[pn]=un}}else{let Ze;switch(He.dataType){case Re.onnx.TensorProto.DataType.FLOAT:Ze=He.floatData;break;case Re.onnx.TensorProto.DataType.INT32:case Re.onnx.TensorProto.DataType.INT16:case Re.onnx.TensorProto.DataType.UINT16:case Re.onnx.TensorProto.DataType.INT8:case Re.onnx.TensorProto.DataType.UINT8:case Re.onnx.TensorProto.DataType.BOOL:Ze=He.int32Data;break;case Re.onnx.TensorProto.DataType.INT64:Ze=He.int64Data;break;case Re.onnx.TensorProto.DataType.DOUBLE:Ze=He.doubleData;break;case Re.onnx.TensorProto.DataType.UINT32:case Re.onnx.TensorProto.DataType.UINT64:Ze=He.uint64Data;break;default:throw new Error("unspecific error")}if(Ze==null)throw new Error("failed to populate data from a tensorproto value");const fn=Je.data;if(fn.length!==Ze.length)throw new Error("array length mismatch");for(let yn=0;yn<Ze.length;yn++){const mn=Ze[yn];Te.default.isLong(mn)?fn[yn]=Be(mn,He.dataType):fn[yn]=mn}}return Je}static fromData(He,Ge,Ye){return new $e(Ge,Ye,void 0,void 0,He)}static fromOrtTensor(He){if(!He)throw new Error("cannot construct Value from an empty tensor");const Ge=Ve.ProtoUtil.tensorDimsFromORTFormat(He),Ye=Ve.ProtoUtil.tensorDataTypeFromProto(He.dataType()),Je=new $e(Ge,Ye);if(Ye==="string")for(let Ze=0;Ze<He.stringDataLength();Ze++)Je.data[Ze]=He.stringData(Ze);else if(He.rawDataArray()&&typeof He.rawDataLength()=="number"&&He.rawDataLength()>0){const Ze=Je.data,fn=new DataView(He.rawDataArray().buffer,He.rawDataArray().byteOffset,He.rawDataLength()),yn=Oe(He.dataType()),mn=He.rawDataLength()/yn;if(He.rawDataLength()%yn!=0)throw new Error("invalid buffer length");if(Ze.length!==mn)throw new Error("buffer length mismatch");for(let pn=0;pn<mn;pn++){const un=Ue(fn,He.dataType(),pn*yn);Ze[pn]=un}}return Je}}function Oe(We){switch(We){case Re.onnx.TensorProto.DataType.UINT8:case Re.onnx.TensorProto.DataType.INT8:case Re.onnx.TensorProto.DataType.BOOL:return 1;case Re.onnx.TensorProto.DataType.UINT16:case Re.onnx.TensorProto.DataType.INT16:return 2;case Re.onnx.TensorProto.DataType.FLOAT:case Re.onnx.TensorProto.DataType.INT32:case Re.onnx.TensorProto.DataType.UINT32:return 4;case Re.onnx.TensorProto.DataType.INT64:case Re.onnx.TensorProto.DataType.DOUBLE:case Re.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${Re.onnx.TensorProto.DataType[We]}`)}}function Ce(We){switch(We){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function Be(We,He){if(He===Re.onnx.TensorProto.DataType.INT64||He===De.TensorDataType.INT64){if(We.greaterThanOrEqual(2147483648)||We.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else{if(He!==Re.onnx.TensorProto.DataType.UINT32&&He!==De.TensorDataType.UINT32&&He!==Re.onnx.TensorProto.DataType.UINT64&&He!==De.TensorDataType.UINT64)throw new TypeError(`not a LONG type: ${Re.onnx.TensorProto.DataType[He]}`);if(We.greaterThanOrEqual(4294967296)||We.lessThan(0))throw new TypeError("uint64 is not supported")}return We.toNumber()}function Ue(We,He,Ge){switch(He){case Re.onnx.TensorProto.DataType.BOOL:case Re.onnx.TensorProto.DataType.UINT8:return We.getUint8(Ge);case Re.onnx.TensorProto.DataType.INT8:return We.getInt8(Ge);case Re.onnx.TensorProto.DataType.UINT16:return We.getUint16(Ge,!0);case Re.onnx.TensorProto.DataType.INT16:return We.getInt16(Ge,!0);case Re.onnx.TensorProto.DataType.FLOAT:return We.getFloat32(Ge,!0);case Re.onnx.TensorProto.DataType.INT32:return We.getInt32(Ge,!0);case Re.onnx.TensorProto.DataType.UINT32:return We.getUint32(Ge,!0);case Re.onnx.TensorProto.DataType.INT64:return Be(Te.default.fromBits(We.getUint32(Ge,!0),We.getUint32(Ge+4,!0),!1),He);case Re.onnx.TensorProto.DataType.DOUBLE:return We.getFloat64(Ge,!0);case Re.onnx.TensorProto.DataType.UINT64:return Be(Te.default.fromBits(We.getUint32(Ge,!0),We.getUint32(Ge+4,!0),!0),He);default:throw new Error(`cannot read from DataView for type ${Re.onnx.TensorProto.DataType[He]}`)}}e.Tensor=$e},2517:function(n,e,t){var r=this&&this.__importDefault||function(He){return He&&He.__esModule?He:{default:He}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeUtf8String=e.MAX_CLIP=e.MIN_CLIP=e.PoolConvUtil=e.ReduceUtil=e.SplitUtil=e.MathUtil=e.ShapeUtil=e.LongUtil=e.ProtoUtil=e.GemmUtil=e.arrayCopyHelper=e.BroadcastUtil=e.MatMulUtil=e.ArrayUtil=e.assert=e.checkInputsShape=void 0;const Ee=t(5686),Te=r(t(3720)),Re=t(1446),Me=t(9162);e.checkInputsShape=function(He,...Ge){if(!He||He.length!==Ge.length)return!1;for(let Ye=0;Ye<He.length;Ye++)if(!He[Ye].dims||He[Ye].dims.length!==Ge[Ye])return!1;return!0},e.assert=function(He,Ge){if(!He)throw new Error(typeof Ge=="string"?Ge:Ge())},e.ArrayUtil=class{static arraysEqual(He,Ge){if(He.length!==Ge.length)return!1;for(let Ye=0;Ye<He.length;Ye++)if(He[Ye]!==Ge[Ye])return!1;return!0}};class Ve{static preprocessInputShapes(Ge,Ye){return[Ge.length===1?[1,Ge[0]]:Ge,Ye.length===1?[Ye[0],1]:Ye]}static postprocessOutputShape(Ge,Ye,Je){Ye===1&&Ge.splice(Ge.length-2,1),Je===1&&Ge.pop()}static calcMatMulShape(Ge,Ye){return Ge[1]!==Ye[0]?void 0:[Ge[0],Ye[1]]}}e.MatMulUtil=Ve;class De{static calcShape(Ge,Ye,Je=!1){const Ze=Ge.length,fn=Ye.length;if(Ze===0)return Ye;if(fn===0)return Ge;const yn=Math.max(Ge.length,Ye.length),mn=new Array(yn);if(Je){if(Ze<2||fn<2)return;const pn=Ve.calcMatMulShape([Ge[Ze-2],Ge[Ze-1]],[Ye[fn-2],Ye[fn-1]]);if(pn===void 0)return;[mn[yn-2],mn[yn-1]]=pn}for(let pn=Je?3:1;pn<=yn;pn++){const un=Ze-pn<0?1:Ge[Ze-pn],bn=fn-pn<0?1:Ye[fn-pn];if(un!==bn&&un>1&&bn>1)return;mn[yn-pn]=Math.max(un,bn)}return mn}static index(Ge,Ye){const Je=new Array(Ye.length);return De.fillIndex(Ge,Ye,Je),Je}static fillIndex(Ge,Ye,Je){const Ze=Ge.length-Ye.length;for(let fn=0;fn<Ye.length;fn++)Je[fn]=Ge[Ze+fn]%Ye[fn]}static calc(Ge,Ye,Je,Ze,fn){const yn=De.calcShape(Ge.dims,Ye.dims);if(yn){if(Ze&&!Ce.areEqual(yn,Ge.dims))return;const mn=Ce.size(yn),pn=Ze?Ge:new Me.Tensor(yn,fn||Ge.type);if(yn.length===0)pn.set([],Je(Ge.get([]),Ye.get([])));else{const un=new Array(yn.length),bn=new Array(Ge.dims.length),gn=new Array(Ye.dims.length);let xn,En=0,Pn=0,Ln=!1,Cn=!1;Ge.dims.length===0&&(En=Ge.get([]),Ln=!0),Ye.dims.length===0&&(Pn=Ye.get([]),Cn=!0);for(let Dn=0;Dn<mn;Dn++){xn=Dn;for(let Un=yn.length-1;Un>=0;Un--)un[Un]=xn%yn[Un],xn=Math.floor(xn/yn[Un]);Ln||(De.fillIndex(un,Ge.dims,bn),En=Ge.get(bn)),Cn||(De.fillIndex(un,Ye.dims,gn),Pn=Ye.get(gn)),pn.set(un,Je(En,Pn))}}return pn}}static isValidBroadcast(Ge,Ye){const Je=Ge.length,Ze=Ye.length;if(Je>Ze)return!1;for(let fn=1;fn<=Je;fn++)if(Ge[Je-fn]!==1&&Ge[Je-fn]!==Ye[Ze-fn])return!1;return!0}static getBroadcastDims(Ge,Ye){const Je=Ge.length,Ze=[];for(let fn=0;fn<Je;fn++){const yn=Je-1-fn,mn=Ge[yn]||1;(Ye[Ye.length-1-fn]||1)>1&&mn===1&&Ze.unshift(yn)}return Ze}}e.BroadcastUtil=De,e.arrayCopyHelper=function(He,Ge,Ye,Je,Ze){if(Je<0||Je>=Ge.length)throw new Error("sourceIndex out of bounds");if(Ye<0||Ye>=He.length)throw new Error("targetIndex out of bounds");if(Je+Ze>Ge.length)throw new Error("source indices to be copied are outside bounds");if(Ye+Ze>He.length)throw new Error("target array is too small to hold result");for(let fn=0;fn<Ze;fn++)He[Ye+fn]=Ge[Je+fn]},e.GemmUtil=class{static getShapeOfGemmResult(He,Ge,Ye,Je,Ze){if(He.length!==2||Ye.length!==2)throw new Error("shape need to be of size 2");let fn,yn,mn;Ge?(fn=He[1],yn=He[0]):(fn=He[0],yn=He[1]);let pn=-1;if(Je?(mn=Ye[0],pn=1):(mn=Ye[1],pn=0),Ye[pn]!==yn)throw new Error("dimension mismatch");if(fn<=0||mn<=0||yn<=0)throw new Error("invalid shape specified");if(Ze&&!De.isValidBroadcast(Ze,[fn,mn]))throw new Error("gemm: invalid bias shape for broadcast");return[fn,mn,yn]}};class $e{static tensorDataTypeFromProto(Ge){switch(Ge){case Re.onnx.TensorProto.DataType.INT8:return"int8";case Re.onnx.TensorProto.DataType.UINT8:return"uint8";case Re.onnx.TensorProto.DataType.BOOL:return"bool";case Re.onnx.TensorProto.DataType.INT16:return"int16";case Re.onnx.TensorProto.DataType.UINT16:return"uint16";case Re.onnx.TensorProto.DataType.INT32:return"int32";case Re.onnx.TensorProto.DataType.UINT32:return"uint32";case Re.onnx.TensorProto.DataType.FLOAT:return"float32";case Re.onnx.TensorProto.DataType.DOUBLE:return"float64";case Re.onnx.TensorProto.DataType.STRING:return"string";case Re.onnx.TensorProto.DataType.INT64:return"int32";case Re.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${Re.onnx.TensorProto.DataType[Ge]}`)}}static tensorDataTypeStringToEnum(Ge){switch(Ge){case"int8":return Re.onnx.TensorProto.DataType.INT8;case"uint8":return Re.onnx.TensorProto.DataType.UINT8;case"bool":return Re.onnx.TensorProto.DataType.BOOL;case"int16":return Re.onnx.TensorProto.DataType.INT16;case"uint16":return Re.onnx.TensorProto.DataType.UINT16;case"int32":return Re.onnx.TensorProto.DataType.INT32;case"uint32":return Re.onnx.TensorProto.DataType.UINT32;case"float32":return Re.onnx.TensorProto.DataType.FLOAT;case"float64":return Re.onnx.TensorProto.DataType.DOUBLE;case"string":return Re.onnx.TensorProto.DataType.STRING;case"int64":return Re.onnx.TensorProto.DataType.INT64;case"uint64":return Re.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${Ge}`)}}static tensorDimsFromProto(Ge){return Ge.map(Ye=>Te.default.isLong(Ye)?Ye.toNumber():Ye)}static tensorValueTypeFromProto(Ge){return{tensorType:$e.tensorDataTypeFromProto(Ge.elemType),shape:{dims:$e.tensorDimsFromProto(Ge.shape.dim.map(Ye=>Ye.dimValue))}}}static tensorDimsFromORTFormat(Ge){const Ye=[];for(let Je=0;Je<Ge.dimsLength();Je++)Ye.push(Oe.longToNumber(Ge.dims(Je)));return Ye}static tensorAttributesFromORTFormat(Ge){const Ye=[];for(let Je=0;Je<Ge.attributesLength();Je++)Ye.push(Ge.attributes(Je));return Ye}}e.ProtoUtil=$e;class Oe{static longToNumber(Ge,Ye){return Te.default.isLong(Ge)?Ge.toNumber():Ge instanceof Ee.flatbuffers.Long?Te.default.fromValue({low:Ge.low,high:Ge.high,unsigned:Ye!=null&&Ye}).toNumber():Ge}static isLong(Ge){return Te.default.isLong(Ge)||Ge instanceof Ee.flatbuffers.Long}}e.LongUtil=Oe;class Ce{static size(Ge){return Ce.getSizeFromDimensionRange(Ge,0,Ge.length)}static sizeFromDimension(Ge,Ye){if(Ye<0||Ye>Ge.length)throw new Error(`invalid dimension of ${Ye} for sizeFromDimension as Tensor has ${Ge.length} dimensions.`);return Ce.getSizeFromDimensionRange(Ge,Ye,Ge.length)}static sizeToDimension(Ge,Ye){if(Ye<0||Ye>Ge.length)throw new Error(`invalid dimension of ${Ye} for sizeToDimension as Tensor has ${Ge.length} dimensions.`);return Ce.getSizeFromDimensionRange(Ge,0,Ye)}static getSizeFromDimensionRange(Ge,Ye,Je){let Ze=1;for(let fn=Ye;fn<Je;fn++){if(Ge[fn]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");Ze*=Ge[fn]}return Ze}static computeStrides(Ge){const Ye=Ge.length;if(Ye===0)return[];if(Ye===1)return[1];const Je=new Array(Ye);Je[Ye-1]=1,Je[Ye-2]=Ge[Ye-1];for(let Ze=Ye-3;Ze>=0;--Ze)Je[Ze]=Je[Ze+1]*Ge[Ze+1];return Je}static transpose(Ge){return Ge.slice().reverse()}static indicesToOffset(Ge,Ye,Je){Je===void 0&&(Je=Ge.length);let Ze=0;for(let fn=0;fn<Je;++fn)Ze+=Ye[fn]*Ge[fn];return Ze}static offsetToIndices(Ge,Ye){const Je=Ye.length;if(Je===0)return[];if(Je===1)return[Ge*Ye[0]];const Ze=new Array(Ye.length);for(let fn=0;fn<Ze.length-1;++fn)Ze[fn]=Math.floor(Ge/Ye[fn]),Ge-=Ze[fn]*Ye[fn];return Ze[Ze.length-1]=Ge,Ze}static normalizeAxis(Ge,Ye){if(Ge<-Ye&&Ge>=Ye)throw new Error("unsupported axis for this operation.");return Ge<0?Ge+Ye:Ge}static normalizeAxes(Ge,Ye){return Ge.map(Je=>this.normalizeAxis(Je,Ye))}static incrementIndex(Ge,Ye,Je){if(Ye.length===0||Ge.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(Je===void 0)Je=Ye.length;else if(Je<=0||Je>Ye.length)throw new Error("Incorrect axis to increment on");for(let Ze=Je-1;Ze>=0&&(Ge[Ze]++,!(Ge[Ze]<Ye[Ze]));--Ze)Ge[Ze]=0}static calculateReshapedDims(Ge,Ye){if(Ye.length===0){if(Ge.length===0||Ce.size(Ge)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}const Je=Ye.length,Ze=new Array(Je);let fn=-1,yn=1;for(let pn=0;pn<Je;pn++){if(Ye[pn]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(Ye[pn]===-1){if(fn!==-1)throw new Error("at most one dimension in shape hints can be -1");fn=pn}else{if(Ye[pn]===0){if(pn>=Ge.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");Ze[pn]=Ge[pn]}else Ze[pn]=Ye[pn];yn*=Ze[pn]}}const mn=Ce.size(Ge);if(fn!==-1){if(mn%yn!=0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${Ge}] Output shape: [${Ye}]`);Ze[fn]=mn/yn}else if(yn!==mn)throw new Error("reshapedDims and originalDims don't have matching sizes");return Ze}static sortBasedOnPerm(Ge,Ye){return Ye?Ye.map(Je=>Ge[Je]):Ge.slice().reverse()}static padShape(Ge,Ye){const Je=Ge.length;return Ge.map((Ze,fn)=>Ze+Ye[fn]+Ye[fn+Je])}static areEqual(Ge,Ye){return Ge.length===Ye.length&&Ge.every((Je,Ze)=>Je===Ye[Ze])}static validateDimsAndCalcSize(Ge){if(Ge.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let Ye=1;for(const Je of Ge){if(!Number.isInteger(Je))throw new TypeError(`Invalid shape: ${Je} is not an integer`);if(Je<0||Je>2147483647)throw new TypeError(`Invalid shape: length ${Je} is not allowed`);Ye*=Je}return Ye}static flattenShape(Ge,Ye){Ye<0&&(Ye+=Ge.length);const Je=Ge.reduce((fn,yn)=>fn*yn,1),Ze=Ge.slice(Ye).reduce((fn,yn)=>fn*yn,1);return[Je/Ze,Ze]}static squeezeShape(Ge,Ye){const Je=new Array;Ye=Ce.normalizeAxes(Ye,Ge.length);for(let Ze=0;Ze<Ge.length;Ze++){const fn=Ye.indexOf(Ze)>=0;if(fn&&Ge[Ze]!==1)throw new Error("squeeze an axis of size different than 1");(Ye.length===0&&Ge[Ze]>1||Ye.length>0&&!fn)&&Je.push(Ge[Ze])}return Je}static unsqueezeShape(Ge,Ye){const Je=new Array(Ge.length+Ye.length);Je.fill(0);for(let fn=0;fn<Ye.length;fn++){const yn=Ce.normalizeAxis(Ye[fn],Je.length);if(yn>=Je.length)throw new Error("'axes' has an out of range axis");if(Je[yn]!==0)throw new Error("'axes' has a duplicate axis");Je[yn]=1}let Ze=0;for(let fn=0;fn<Je.length;fn++)Je[fn]===0&&(Je[fn]=Ge[Ze++]);if(Ze!==Ge.length)throw new Error("the unsqueezed dimension could not be established");return Je}}e.ShapeUtil=Ce,e.MathUtil=class{static sqr(He,Ge,Ye,Je,Ze){if(Je<0||Je>=Ge.length)throw new Error("sourceIndex out of bounds");if(Ye<0||Ye>=He.length)throw new Error("targetIndex out of bounds");if(Je+Ze>Ge.length)throw new Error("source indices to be copied are outside bounds");if(Ye+Ze>He.length)throw new Error("target array is too small to hold result");for(let fn=0;fn<Ze;fn++)He[Ye+fn]+=Math.pow(Ge[Je+fn],2)}static axpy(He,Ge,Ye,Je,Ze,fn){if(Je<0||Je>=Ge.length)throw new Error("sourceIndex out of bounds");if(Ye<0||Ye>=He.length)throw new Error("targetIndex out of bounds");if(Je+Ze>Ge.length)throw new Error("source indices to be copied are outside bounds");if(Ye+Ze>He.length)throw new Error("target array is too small to hold result");for(let yn=0;yn<Ze;yn++)He[Ye+yn]+=fn*Ge[Je+yn]}static powx(He,Ge,Ye,Je,Ze,fn){if(Je<0||Je>=Ge.length)throw new Error("sourceIndex out of bounds");if(Ye<0||Ye>=He.length)throw new Error("targetIndex out of bounds");if(Je+Ze>Ge.length)throw new Error("source indices to be copied are outside bounds");if(Ye+Ze>He.length)throw new Error("target array is too small to hold result");for(let yn=0;yn<Ze;yn++)He[Ye+yn]=Math.pow(Ge[Je+yn],fn)}static mul(He,Ge,Ye,Je,Ze){if(Je<0||Je>=Ge.length)throw new Error("sourceIndex out of bounds");if(Ye<0||Ye>=He.length)throw new Error("targetIndex out of bounds");if(Je+Ze>Ge.length)throw new Error("source indices to be copied are outside bounds");if(Ye+Ze>He.length)throw new Error("target array is too small to hold result");for(let fn=0;fn<Ze;fn++)He[Ye+fn]=Ge[Je+fn]*He[Ye+fn]}};class Be{static splitShape(Ge,Ye,Je,Ze){if(Je.length===0){if(!Ze)throw new Error("need to know number of outputs when the 'split' attribute is not specified");Be.determineSplit(Ge[Ye],Ze,Je)}const fn=[],yn=[0];for(let mn=0;mn<Je.length;++mn){mn!==0&&yn.push(yn[mn-1]+Je[mn-1]);const pn=Ge.slice();pn[Ye]=Je[mn],fn.push(pn)}return[fn,yn]}static determineSplit(Ge,Ye,Je){if(Ge%Ye!=0)throw new Error("cannot split tensor to equal sized parts");for(let Ze=0;Ze<Ye;++Ze)Je.push(Ge/Ye)}}e.SplitUtil=Be;class Ue{static calcReduce(Ge,Ye,Je,Ze,fn){const yn=Ge.dims.slice(0);Ye.length===0&&yn.forEach((En,Pn)=>Ye.push(Pn));const mn=Ue.calcReduceShape(yn,Ye,!0),pn=Ce.size(mn),un=new Me.Tensor(mn,Ge.type),bn=Ce.computeStrides(mn),gn=Ce.computeStrides(yn),xn=new Array(yn.length);for(let En=0;En<pn;En++){const Pn=Ce.offsetToIndices(En,bn);De.fillIndex(Pn,yn,xn),un.set(Pn,Ue.calcReduceByAxis(Ge.numberData,Ye,yn,0,Ce.indicesToOffset(xn,gn),Ze,fn))}return Je?un:new Me.Tensor(Ue.calcReduceShape(yn,Ye,Je),un.type,void 0,void 0,un.data,un.dataId)}static calcReduceByAxis(Ge,Ye,Je,Ze,fn,yn,mn){let pn=0;if(Ze>=Ye.length)return yn(Ge[fn]);const un=Ye[Ze],bn=un>=Je.length?1:Ce.size(Je.slice(un+1));for(let gn=0;gn<Je[un];gn++)pn=gn===0?Ue.calcReduceByAxis(Ge,Ye,Je,Ze+1,fn,yn,mn):mn(pn,Ue.calcReduceByAxis(Ge,Ye,Je,Ze+1,fn,yn,mn)),fn+=bn;return pn}static calcReduceShape(Ge,Ye,Je){const Ze=Ge.slice();for(let fn=0;fn<Ye.length;fn++)Ze[Ye[fn]]=Je?1:0;return Ze.filter(fn=>fn!==0)}}e.ReduceUtil=Ue;class We{static adjustPoolAttributes(Ge,Ye,Je,Ze,fn,yn){if(!Ge&&Je.length!==Ye.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(Ge)for(let mn=0;mn<Ye.length-2;mn++)mn>=Je.length?Je.push(Ye[mn+2]):Je[mn]=Ye[mn+2];for(let mn=0;mn<Je.length;mn++)if(mn<Ze.length){if(Ze[mn]<0)throw new Error("strides should be greater than or equal to 1")}else Ze.push(1);for(let mn=0;mn<Je.length;mn++)if(mn<fn.length){if(fn[mn]<0)throw new Error("dilations should be greater than or equal to 1")}else fn.push(1);for(let mn=0;mn<2*Je.length;mn++)if(mn<yn.length){if(yn[mn]<0)throw new Error("pad should be greater than or equal to 1")}else yn.push(0);for(let mn=0;mn<Je.length;mn++){if(Je[mn]<=0)throw new Error("kernel shapes need to be greater than 0");if(yn[mn]>=Je[mn]||yn[mn+Je.length]>=Je[mn])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(Ge,Ye,Je,Ze,fn,yn){if(yn){if(fn.length!==2*(Ge.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(Ye.length!==Ge.length-2)throw new Error("length of strides should be the length of data dimensions");if(Ze.length!==Ge.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let mn=0;mn<Ge.length-2;mn++)We.adjustPadAndReturnShape(Ge[mn+2],Ye[mn],Je[mn],Ze[mn],fn,mn,mn+Ge.length-2,yn)}}static computePoolOutputShape(Ge,Ye,Je,Ze,fn,yn,mn){if(Ye.length<=0)throw new Error("input shape must be of size greater than 0");const pn=[Ye[0],Ye[1]];return We.computeShapeHelper(Ge,Ye,pn,Je,Ze,fn,yn,mn),pn}static computeConvOutputShape(Ge,Ye,Je,Ze,fn,yn,mn){if(Ge.length<=0||Ye.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");const pn=[Ge[0],Ye[0]];return We.computeShapeHelper(!1,Ge,pn,Je,Ze,fn,yn,mn),pn}static computeShapeHelper(Ge,Ye,Je,Ze,fn,yn,mn,pn){if(Ge)for(let un=0;un<Ye.length-2;un++)Je.push(1);else for(let un=0;un<Ye.length-2;un++)Je.push(We.adjustPadAndReturnShape(Ye[un+2],Ze[un],fn[un],yn[un],mn,un,un+Ye.length-2,pn))}static adjustPadAndReturnShape(Ge,Ye,Je,Ze,fn,yn,mn,pn){const un=Je*(Ze-1)+1;if(!pn||pn==="NOTSET")return Math.floor((Ge+fn[yn]+fn[mn]-un)/Ye+1);switch(pn){case"VALID":return fn[yn]=0,fn[mn]=0,Math.floor((Ge-un)/Ye+1);case"SAME_LOWER":case"SAME_UPPER":if(Je!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{const bn=((Ge+Ye-1)/Ye-1)*Ye+Ze-Ge;return fn[yn]=Math.floor(pn==="SAME_LOWER"?(bn+1)/2:bn/2),fn[mn]=bn-fn[yn],Math.floor((Ge+bn-Ze)/Ye+1)}default:throw new Error("Unsupported AutoPad type")}}}e.PoolConvUtil=We,e.MIN_CLIP=-34028234663852886e22,e.MAX_CLIP=34028234663852886e22,e.decodeUtf8String=function(He){return new TextDecoder().decode(He)}},7967:(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,r,Ee,Te)=>{if(typeof t=="object"&&t!==null){if(Ee.has(t))throw new Error("Circular reference in options");Ee.add(t)}Object.entries(t).forEach(([Re,Me])=>{const Ve=r?r+Re:Re;if(typeof Me=="object")(0,e.iterateExtraOptions)(Me,Ve+".",Ee,Te);else if(typeof Me=="string"||typeof Me=="number")Te(Ve,Me.toString());else{if(typeof Me!="boolean")throw new Error("Can't handle extra config type: "+typeof Me);Te(Ve,Me?"1":"0")}})}},2157:function(n,e,t){var r,Ee=this&&this.__createBinding||(Object.create?function(bn,gn,xn,En){En===void 0&&(En=xn);var Pn=Object.getOwnPropertyDescriptor(gn,xn);Pn&&!("get"in Pn?!gn.__esModule:Pn.writable||Pn.configurable)||(Pn={enumerable:!0,get:function(){return gn[xn]}}),Object.defineProperty(bn,En,Pn)}:function(bn,gn,xn,En){En===void 0&&(En=xn),bn[En]=gn[xn]}),Te=this&&this.__setModuleDefault||(Object.create?function(bn,gn){Object.defineProperty(bn,"default",{enumerable:!0,value:gn})}:function(bn,gn){bn.default=gn}),Re=this&&this.__importStar||function(bn){if(bn&&bn.__esModule)return bn;var gn={};if(bn!=null)for(var xn in bn)xn!=="default"&&Object.prototype.hasOwnProperty.call(bn,xn)&&Ee(gn,bn,xn);return Te(gn,bn),gn};Object.defineProperty(e,"__esModule",{value:!0}),e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=e.initWasm=void 0;const Me=t(1670),Ve=Re(t(349)),De=t(6361),$e=()=>!!Me.env.wasm.proxy&&typeof document<"u";let Oe,Ce,Be,Ue=!1,We=!1,He=!1;const Ge=[],Ye=[],Je=[],Ze=[],fn=[],yn=[],mn=()=>{if(Ue||!We||He||!Oe)throw new Error("worker not ready")},pn=bn=>{switch(bn.data.type){case"init-wasm":Ue=!1,bn.data.err?(He=!0,Ce[1](bn.data.err)):(We=!0,Ce[0]());break;case"init-ort":bn.data.err?Be[1](bn.data.err):Be[0]();break;case"create_allocate":bn.data.err?Ge.shift()[1](bn.data.err):Ge.shift()[0](bn.data.out);break;case"create_finalize":bn.data.err?Ye.shift()[1](bn.data.err):Ye.shift()[0](bn.data.out);break;case"create":bn.data.err?Je.shift()[1](bn.data.err):Je.shift()[0](bn.data.out);break;case"release":bn.data.err?Ze.shift()[1](bn.data.err):Ze.shift()[0]();break;case"run":bn.data.err?fn.shift()[1](bn.data.err):fn.shift()[0](bn.data.out);break;case"end-profiling":bn.data.err?yn.shift()[1](bn.data.err):yn.shift()[0]()}},un=typeof document<"u"?(r=document?.currentScript)===null||r===void 0?void 0:r.src:void 0;e.initWasm=async()=>{if($e()){if(We)return;if(Ue)throw new Error("multiple calls to 'initWasm()' detected.");if(He)throw new Error("previous call to 'initWasm()' failed.");return Ue=!0,Me.env.wasm.wasmPaths===void 0&&un&&un.indexOf("blob:")!==0&&(Me.env.wasm.wasmPaths=un.substr(0,+un.lastIndexOf("/")+1)),new Promise((bn,gn)=>{Oe?.terminate(),Oe=t(9710).Z(),Oe.onmessage=pn,Ce=[bn,gn];const xn={type:"init-wasm",in:Me.env.wasm};Oe.postMessage(xn)})}return(0,De.initializeWebAssembly)(Me.env.wasm)},e.initOrt=async(bn,gn)=>{if($e())return mn(),new Promise((xn,En)=>{Be=[xn,En];const Pn={type:"init-ort",in:{numThreads:bn,loggingLevel:gn}};Oe.postMessage(Pn)});Ve.initOrt(bn,gn)},e.createSessionAllocate=async bn=>$e()?(mn(),new Promise((gn,xn)=>{Ge.push([gn,xn]);const En={type:"create_allocate",in:{model:bn}};Oe.postMessage(En,[bn.buffer])})):Ve.createSessionAllocate(bn),e.createSessionFinalize=async(bn,gn)=>$e()?(mn(),new Promise((xn,En)=>{Ye.push([xn,En]);const Pn={type:"create_finalize",in:{modeldata:bn,options:gn}};Oe.postMessage(Pn)})):Ve.createSessionFinalize(bn,gn),e.createSession=async(bn,gn)=>$e()?(mn(),new Promise((xn,En)=>{Je.push([xn,En]);const Pn={type:"create",in:{model:bn,options:gn}};Oe.postMessage(Pn,[bn.buffer])})):Ve.createSession(bn,gn),e.releaseSession=async bn=>{if($e())return mn(),new Promise((gn,xn)=>{Ze.push([gn,xn]);const En={type:"release",in:bn};Oe.postMessage(En)});Ve.releaseSession(bn)},e.run=async(bn,gn,xn,En,Pn)=>$e()?(mn(),new Promise((Ln,Cn)=>{fn.push([Ln,Cn]);const Dn={type:"run",in:{sessionId:bn,inputIndices:gn,inputs:xn,outputIndices:En,options:Pn}};Oe.postMessage(Dn,Ve.extractTransferableBuffers(xn))})):Ve.run(bn,gn,xn,En,Pn),e.endProfiling=async bn=>{if($e())return mn(),new Promise((gn,xn)=>{yn.push([gn,xn]);const En={type:"end-profiling",in:bn};Oe.postMessage(En)});Ve.endProfiling(bn)}},586:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const r=t(7967),Ee=t(4983),Te=t(6361);e.setRunOptions=Re=>{const Me=(0,Te.getInstance)();let Ve=0;const De=[],$e=Re||{};try{if(Re?.logSeverityLevel===void 0)$e.logSeverityLevel=2;else if(typeof Re.logSeverityLevel!="number"||!Number.isInteger(Re.logSeverityLevel)||Re.logSeverityLevel<0||Re.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${Re.logSeverityLevel}`);if(Re?.logVerbosityLevel===void 0)$e.logVerbosityLevel=0;else if(typeof Re.logVerbosityLevel!="number"||!Number.isInteger(Re.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${Re.logVerbosityLevel}`);Re?.terminate===void 0&&($e.terminate=!1);let Oe=0;if(Re?.tag!==void 0&&(Oe=(0,Ee.allocWasmString)(Re.tag,De)),Ve=Me._OrtCreateRunOptions($e.logSeverityLevel,$e.logVerbosityLevel,!!$e.terminate,Oe),Ve===0)throw new Error("Can't create run options");return Re?.extra!==void 0&&(0,r.iterateExtraOptions)(Re.extra,"",new WeakSet,(Ce,Be)=>{const Ue=(0,Ee.allocWasmString)(Ce,De),We=(0,Ee.allocWasmString)(Be,De);if(Me._OrtAddRunConfigEntry(Ve,Ue,We)!==0)throw new Error(`Can't set a run config entry: ${Ce} - ${Be}`)}),[Ve,De]}catch(Oe){throw Ve!==0&&Me._OrtReleaseRunOptions(Ve),De.forEach(Me._free),Oe}}},2306:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OnnxruntimeWebAssemblySessionHandler=void 0;const r=t(2806),Ee=t(1670),Te=t(2850),Re=t(2157);let Me;e.OnnxruntimeWebAssemblySessionHandler=class{async createSessionAllocate(Ve){const De=await fetch(Ve),$e=await De.arrayBuffer();return(0,Re.createSessionAllocate)(new Uint8Array($e))}async loadModel(Ve,De){if(Me||(await(0,Re.initOrt)(Ee.env.wasm.numThreads,($e=>{switch($e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${$e}`)}})(Ee.env.logLevel)),Me=!0),typeof Ve=="string")if(typeof fetch>"u"){const $e=await(0,Te.promisify)(r.readFile)(Ve);[this.sessionId,this.inputNames,this.outputNames]=await(0,Re.createSession)($e,De)}else{const $e=await this.createSessionAllocate(Ve);[this.sessionId,this.inputNames,this.outputNames]=await(0,Re.createSessionFinalize)($e,De)}else[this.sessionId,this.inputNames,this.outputNames]=await(0,Re.createSession)(Ve,De)}async dispose(){return(0,Re.releaseSession)(this.sessionId)}async run(Ve,De,$e){const Oe=[],Ce=[];Object.entries(Ve).forEach(He=>{const Ge=He[0],Ye=He[1],Je=this.inputNames.indexOf(Ge);if(Je===-1)throw new Error(`invalid input '${Ge}'`);Oe.push(Ye),Ce.push(Je)});const Be=[];Object.entries(De).forEach(He=>{const Ge=He[0],Ye=this.outputNames.indexOf(Ge);if(Ye===-1)throw new Error(`invalid output '${Ge}'`);Be.push(Ye)});const Ue=await(0,Re.run)(this.sessionId,Ce,Oe.map(He=>[He.type,He.dims,He.data]),Be,$e),We={};for(let He=0;He<Ue.length;He++)We[this.outputNames[Be[He]]]=new Ee.Tensor(Ue[He][0],Ue[He][2],Ue[He][1]);return We}startProfiling(){}endProfiling(){(0,Re.endProfiling)(this.sessionId)}}},4919:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const r=t(7967),Ee=t(4983),Te=t(6361);e.setSessionOptions=Re=>{const Me=(0,Te.getInstance)();let Ve=0;const De=[],$e=Re||{};(Oe=>{Oe.extra||(Oe.extra={}),Oe.extra.session||(Oe.extra.session={});const Ce=Oe.extra.session;Ce.use_ort_model_bytes_directly||(Ce.use_ort_model_bytes_directly="1")})($e);try{Re?.graphOptimizationLevel===void 0&&($e.graphOptimizationLevel="all");const Oe=(Ue=>{switch(Ue){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${Ue}`)}})($e.graphOptimizationLevel);Re?.enableCpuMemArena===void 0&&($e.enableCpuMemArena=!0),Re?.enableMemPattern===void 0&&($e.enableMemPattern=!0),Re?.executionMode===void 0&&($e.executionMode="sequential");const Ce=(Ue=>{switch(Ue){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${Ue}`)}})($e.executionMode);let Be=0;if(Re?.logId!==void 0&&(Be=(0,Ee.allocWasmString)(Re.logId,De)),Re?.logSeverityLevel===void 0)$e.logSeverityLevel=2;else if(typeof Re.logSeverityLevel!="number"||!Number.isInteger(Re.logSeverityLevel)||Re.logSeverityLevel<0||Re.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${Re.logSeverityLevel}`);if(Re?.logVerbosityLevel===void 0)$e.logVerbosityLevel=0;else if(typeof Re.logVerbosityLevel!="number"||!Number.isInteger(Re.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${Re.logVerbosityLevel}`);if(Re?.enableProfiling===void 0&&($e.enableProfiling=!1),Ve=Me._OrtCreateSessionOptions(Oe,!!$e.enableCpuMemArena,!!$e.enableMemPattern,Ce,!!$e.enableProfiling,0,Be,$e.logSeverityLevel,$e.logVerbosityLevel),Ve===0)throw new Error("Can't create session options");return Re?.executionProviders&&((Ue,We,He)=>{for(const Ge of We){let Ye=typeof Ge=="string"?Ge:Ge.name;switch(Ye){case"xnnpack":Ye="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${Ye}`)}const Je=(0,Ee.allocWasmString)(Ye,He);if((0,Te.getInstance)()._OrtAppendExecutionProvider(Ue,Je)!==0)throw new Error(`Can't append execution provider: ${Ye}`)}})(Ve,Re.executionProviders,De),Re?.extra!==void 0&&(0,r.iterateExtraOptions)(Re.extra,"",new WeakSet,(Ue,We)=>{const He=(0,Ee.allocWasmString)(Ue,De),Ge=(0,Ee.allocWasmString)(We,De);if(Me._OrtAddSessionConfigEntry(Ve,He,Ge)!==0)throw new Error(`Can't set a session config entry: ${Ue} - ${We}`)}),[Ve,De]}catch(Oe){throw Ve!==0&&Me._OrtReleaseSessionOptions(Ve),De.forEach(Me._free),Oe}}},4983:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const r=t(6361);e.allocWasmString=(Ee,Te)=>{const Re=(0,r.getInstance)(),Me=Re.lengthBytesUTF8(Ee)+1,Ve=Re._malloc(Me);return Re.stringToUTF8(Ee,Ve,Me),Te.push(Ve),Ve}},349:(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const r=t(586),Ee=t(4919),Te=t(4983),Re=t(6361);e.initOrt=(Oe,Ce)=>{const Be=(0,Re.getInstance)()._OrtInit(Oe,Ce);if(Be!==0)throw new Error(`Can't initialize onnxruntime. error code = ${Be}`)};const Me=new Map;e.createSessionAllocate=Oe=>{const Ce=(0,Re.getInstance)(),Be=Ce._malloc(Oe.byteLength);return Ce.HEAPU8.set(Oe,Be),[Be,Oe.byteLength]},e.createSessionFinalize=(Oe,Ce)=>{const Be=(0,Re.getInstance)();let Ue=0,We=0,He=[];try{if([We,He]=(0,Ee.setSessionOptions)(Ce),Ue=Be._OrtCreateSession(Oe[0],Oe[1],We),Ue===0)throw new Error("Can't create a session")}finally{Be._free(Oe[0]),Be._OrtReleaseSessionOptions(We),He.forEach(Be._free)}const Ge=Be._OrtGetInputCount(Ue),Ye=Be._OrtGetOutputCount(Ue),Je=[],Ze=[],fn=[],yn=[];for(let mn=0;mn<Ge;mn++){const pn=Be._OrtGetInputName(Ue,mn);if(pn===0)throw new Error("Can't get an input name");Ze.push(pn),Je.push(Be.UTF8ToString(pn))}for(let mn=0;mn<Ye;mn++){const pn=Be._OrtGetOutputName(Ue,mn);if(pn===0)throw new Error("Can't get an output name");yn.push(pn),fn.push(Be.UTF8ToString(pn))}return Me.set(Ue,[Ue,Ze,yn]),[Ue,Je,fn]},e.createSession=(Oe,Ce)=>{const Be=(0,e.createSessionAllocate)(Oe);return(0,e.createSessionFinalize)(Be,Ce)},e.releaseSession=Oe=>{const Ce=(0,Re.getInstance)(),Be=Me.get(Oe);if(!Be)throw new Error("invalid session id");const Ue=Be[0],We=Be[1],He=Be[2];We.forEach(Ce._OrtFree),He.forEach(Ce._OrtFree),Ce._OrtReleaseSession(Ue),Me.delete(Oe)};const Ve=Oe=>{switch(Oe){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${Oe}`)}},De=Oe=>{switch(Oe){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${Oe}`)}},$e=Oe=>{switch(Oe){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${Oe}`)}};e.run=(Oe,Ce,Be,Ue,We)=>{const He=(0,Re.getInstance)(),Ge=Me.get(Oe);if(!Ge)throw new Error("invalid session id");const Ye=Ge[0],Je=Ge[1],Ze=Ge[2],fn=Ce.length,yn=Ue.length;let mn=0,pn=[];const un=[],bn=[];try{[mn,pn]=(0,r.setRunOptions)(We);for(let Cn=0;Cn<fn;Cn++){const Dn=Be[Cn][0],Un=Be[Cn][1],Wn=Be[Cn][2];let On,$n;if(Array.isArray(Wn)){$n=4*Wn.length,On=He._malloc($n),bn.push(On);let Kn=On/4;for(let Qn=0;Qn<Wn.length;Qn++){if(typeof Wn[Qn]!="string")throw new TypeError(`tensor data at index ${Qn} is not a string`);He.HEAPU32[Kn++]=(0,Te.allocWasmString)(Wn[Qn],bn)}}else $n=Wn.byteLength,On=He._malloc($n),bn.push(On),He.HEAPU8.set(new Uint8Array(Wn.buffer,Wn.byteOffset,$n),On);const kn=He.stackSave(),In=He.stackAlloc(4*Un.length);try{let Kn=In/4;Un.forEach(rr=>He.HEAP32[Kn++]=rr);const Qn=He._OrtCreateTensor(Ve(Dn),On,$n,In,Un.length);if(Qn===0)throw new Error("Can't create a tensor");un.push(Qn)}finally{He.stackRestore(kn)}}const gn=He.stackSave(),xn=He.stackAlloc(4*fn),En=He.stackAlloc(4*fn),Pn=He.stackAlloc(4*yn),Ln=He.stackAlloc(4*yn);try{let Cn=xn/4,Dn=En/4,Un=Pn/4,Wn=Ln/4;for(let kn=0;kn<fn;kn++)He.HEAPU32[Cn++]=un[kn],He.HEAPU32[Dn++]=Je[Ce[kn]];for(let kn=0;kn<yn;kn++)He.HEAPU32[Un++]=0,He.HEAPU32[Wn++]=Ze[Ue[kn]];let On=He._OrtRun(Ye,En,xn,fn,Ln,yn,Pn,mn);const $n=[];if(On===0)for(let kn=0;kn<yn;kn++){const In=He.HEAPU32[Pn/4+kn],Kn=He.stackSave(),Qn=He.stackAlloc(16);let rr,or=0;try{if(On=He._OrtGetTensorData(In,Qn,Qn+4,Qn+8,Qn+12),On!==0)throw new Error(`Can't access output tensor data. error code = ${On}`);let pr=Qn/4;const mr=He.HEAPU32[pr++];or=He.HEAPU32[pr++];const Er=He.HEAPU32[pr++],jr=He.HEAPU32[pr++],Kr=[];for(let xr=0;xr<jr;xr++)Kr.push(He.HEAPU32[Er/4+xr]);He._OrtFree(Er);const Hr=Kr.length===0?1:Kr.reduce((xr,nr)=>xr*nr);if(rr=De(mr),rr==="string"){const xr=[];let nr=or/4;for(let Oi=0;Oi<Hr;Oi++){const Ti=He.HEAPU32[nr++],yi=Oi===Hr-1?void 0:He.HEAPU32[nr]-Ti;xr.push(He.UTF8ToString(Ti,yi))}$n.push([rr,Kr,xr])}else{const xr=new($e(rr))(Hr);new Uint8Array(xr.buffer,xr.byteOffset,xr.byteLength).set(He.HEAPU8.subarray(or,or+xr.byteLength)),$n.push([rr,Kr,xr])}}finally{He.stackRestore(Kn),rr==="string"&&or&&He._free(or),He._OrtReleaseTensor(In)}}if(On===0)return $n;throw new Error(`failed to call OrtRun(). error code = ${On}.`)}finally{He.stackRestore(gn)}}finally{un.forEach(He._OrtReleaseTensor),bn.forEach(He._free),He._OrtReleaseRunOptions(mn),pn.forEach(He._free)}},e.endProfiling=Oe=>{const Ce=(0,Re.getInstance)(),Be=Me.get(Oe);if(!Be)throw new Error("invalid session id");const Ue=Be[0],We=Ce._OrtEndProfiling(Ue);if(We===0)throw new Error("Can't get an profile file name");Ce._OrtFree(We)},e.extractTransferableBuffers=Oe=>{const Ce=[];for(const Be of Oe){const Ue=Be[2];!Array.isArray(Ue)&&Ue.buffer&&Ce.push(Ue.buffer)}return Ce}},6361:function(n,e,t){var r=this&&this.__createBinding||(Object.create?function(We,He,Ge,Ye){Ye===void 0&&(Ye=Ge);var Je=Object.getOwnPropertyDescriptor(He,Ge);Je&&!("get"in Je?!He.__esModule:Je.writable||Je.configurable)||(Je={enumerable:!0,get:function(){return He[Ge]}}),Object.defineProperty(We,Ye,Je)}:function(We,He,Ge,Ye){Ye===void 0&&(Ye=Ge),We[Ye]=He[Ge]}),Ee=this&&this.__setModuleDefault||(Object.create?function(We,He){Object.defineProperty(We,"default",{enumerable:!0,value:He})}:function(We,He){We.default=He}),Te=this&&this.__importStar||function(We){if(We&&We.__esModule)return We;var He={};if(We!=null)for(var Ge in We)Ge!=="default"&&Object.prototype.hasOwnProperty.call(We,Ge)&&r(He,We,Ge);return Ee(He,We),He},Re=this&&this.__importDefault||function(We){return We&&We.__esModule?We:{default:We}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const Me=Te(t(6449)),Ve=Re(t(932)),De=t(3474);let $e,Oe=!1,Ce=!1,Be=!1;const Ue=(We,He)=>He?We?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":We?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async We=>{if(Oe)return Promise.resolve();if(Ce)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(Be)throw new Error("previous call to 'initializeWebAssembly()' failed.");Ce=!0;const He=We.initTimeout,Ge=We.numThreads,Ye=We.simd,Je=Ge>1&&(()=>{try{return typeof SharedArrayBuffer<"u"&&(typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch{return!1}})(),Ze=Ye&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}})(),fn=typeof We.wasmPaths=="string"?We.wasmPaths:void 0,yn=Ue(!1,Je),mn=Ue(Ze,Je),pn=typeof We.wasmPaths=="object"?We.wasmPaths[mn]:void 0;let un=!1;const bn=[];if(He>0&&bn.push(new Promise(gn=>{setTimeout(()=>{un=!0,gn()},He)})),bn.push(new Promise((gn,xn)=>{const En=Je?De:Ve.default,Pn={locateFile:(Ln,Cn)=>Je&&Ln.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([t(4154)],{type:"text/javascript"})):Ln===yn?pn??(fn??Cn)+mn:Cn+Ln};if(Je)if(typeof Blob>"u")Pn.mainScriptUrlOrBlob=Me.join("/","ort-wasm-threaded.js");else{const Ln=`var ortWasmThreaded=(function(){var _scriptDir;return ${En.toString()}})();`;Pn.mainScriptUrlOrBlob=new Blob([Ln],{type:"text/javascript"})}En(Pn).then(Ln=>{Ce=!1,Oe=!0,$e=Ln,gn()},Ln=>{Ce=!1,Be=!0,xn(Ln)})})),await Promise.race(bn),un)throw new Error(`WebAssembly backend initializing failed due to timeout: ${He}ms`)},e.getInstance=()=>{if(Oe&&$e)return $e;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var We;!Oe||Ce||Be||(Ce=!0,(We=$e.PThread)===null||We===void 0||We.terminateAllThreads(),$e=void 0,Ce=!1,Oe=!1,Be=!0)}},9710:(n,e,t)=>{t.d(e,{Z:()=>Te});var r=t(477),Ee=t.n(r);function Te(){return Ee()('/*!\n* ONNX Runtime Web v1.14.0\n* Copyright (c) Microsoft Corporation. All rights reserved.\n* Licensed under the MIT License.\n*/\n(()=>{var t={474:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){function e(){return j.buffer!=D&&N(j.buffer),P}function r(){return j.buffer!=D&&N(j.buffer),U}function a(){return j.buffer!=D&&N(j.buffer),F}function i(){return j.buffer!=D&&N(j.buffer),I}function o(){return j.buffer!=D&&N(j.buffer),W}var u,c,s;t=t||{},u||(u=void 0!==t?t:{}),u.ready=new Promise((function(t,e){c=t,s=e}));var l,f,p,h,d,y,b=Object.assign({},u),m="./this.program",g=(t,e)=>{throw e},v="object"==typeof window,w="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,O=u.ENVIRONMENT_IS_PTHREAD||!1,A="";function S(t){return u.locateFile?u.locateFile(t,A):A+t}if(_){let e;A=w?n(908).dirname(A)+"/":"//",y=()=>{d||(h=n(384),d=n(908))},l=function(t,e){return y(),t=d.normalize(t),h.readFileSync(t,e?void 0:"utf8")},p=t=>((t=l(t,!0)).buffer||(t=new Uint8Array(t)),t),f=(t,e,n)=>{y(),t=d.normalize(t),h.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(m=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof ct))throw t})),process.on("unhandledRejection",(function(t){throw t})),g=(t,e)=>{if(Q())throw process.exitCode=t,e;e instanceof ct||x("exiting due to exception: "+e),process.exit(t)},u.inspect=function(){return"[Emscripten Module object]"};try{e=n(925)}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}n.g.Worker=e.Worker}else(v||w)&&(w?A=self.location.href:"undefined"!=typeof document&&document.currentScript&&(A=document.currentScript.src),_scriptDir&&(A=_scriptDir),A=0!==A.indexOf("blob:")?A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1):"",_||(l=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},w&&(p=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),f=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)}));_&&"undefined"==typeof performance&&(n.g.performance=n(953).performance);var T=console.log.bind(console),E=console.warn.bind(console);_&&(y(),T=t=>h.writeSync(1,t+"\\n"),E=t=>h.writeSync(2,t+"\\n"));var M,C=u.print||T,x=u.printErr||E;Object.assign(u,b),b=null,u.thisProgram&&(m=u.thisProgram),u.quit&&(g=u.quit),u.wasmBinary&&(M=u.wasmBinary);var R=u.noExitRuntime||!1;"object"!=typeof WebAssembly&&at("no native wasm support detected");var j,k,D,P,U,F,I,W,H=!1,L="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function z(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&L)return L.decode(t.buffer instanceof SharedArrayBuffer?t.slice(e,n):t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function Y(t,e){return(t>>>=0)?z(r(),t,e):""}function B(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function G(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function N(t){D=t,u.HEAP8=P=new Int8Array(t),u.HEAP16=new Int16Array(t),u.HEAP32=F=new Int32Array(t),u.HEAPU8=U=new Uint8Array(t),u.HEAPU16=new Uint16Array(t),u.HEAPU32=I=new Uint32Array(t),u.HEAPF32=new Float32Array(t),u.HEAPF64=W=new Float64Array(t)}O&&(D=u.buffer);var V=u.INITIAL_MEMORY||16777216;if(O)j=u.wasmMemory,D=u.buffer;else if(u.wasmMemory)j=u.wasmMemory;else if(!((j=new WebAssembly.Memory({initial:V/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw x("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),_&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");j&&(D=j.buffer),V=D.byteLength,N(D);var $,q=[],X=[],J=[],Z=[];function Q(){return R||!1}function K(){var t=u.preRun.shift();q.unshift(t)}var tt,et=0,nt=null,rt=null;function at(t){throw O?postMessage({cmd:"onAbort",arg:t}):u.onAbort&&u.onAbort(t),x(t="Aborted("+t+")"),H=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),s(t),t}function it(){return tt.startsWith("data:application/octet-stream;base64,")}function ot(){var t=tt;try{if(t==tt&&M)return new Uint8Array(M);if(p)return p(t);throw"both async and sync fetching of the wasm failed"}catch(t){at(t)}}tt="ort-wasm-threaded.wasm",it()||(tt=S(tt));var ut={};function ct(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function st(t){(t=ht.Vb[t])||at(),ht.mc(t)}function lt(t){var e=ht.Cc();if(!e)return 6;ht.ac.push(e),ht.Vb[t.Ub]=e,e.Ub=t.Ub;var n={cmd:"run",start_routine:t.Ic,arg:t.zc,pthread_ptr:t.Ub};return e.$b=()=>{n.time=performance.now(),e.postMessage(n,t.Nc)},e.loaded&&(e.$b(),delete e.$b),0}function ft(t){if(O)return $t(1,1,t);Q()||(ht.oc(),u.onExit&&u.onExit(t),H=!0),g(t,new ct(t))}function pt(t,e){if(!e&&O)throw bt(t),"unwind";Q()||O||(me(),dt(J),be(0),re[1].length&&ae(1,10),re[2].length&&ae(2,10),ht.oc()),ft(t)}var ht={Yb:[],ac:[],qc:[],Vb:{},fc:function(){O&&ht.Ec()},Pc:function(){},Ec:function(){ht.receiveObjectTransfer=ht.Gc,ht.threadInitTLS=ht.pc,ht.setExitStatus=ht.nc,R=!1},nc:function(){},oc:function(){for(var t of Object.values(ht.Vb))ht.mc(t);for(t of ht.Yb)t.terminate();ht.Yb=[]},mc:function(t){var e=t.Ub;delete ht.Vb[e],ht.Yb.push(t),ht.ac.splice(ht.ac.indexOf(t),1),t.Ub=0,Oe(e)},Gc:function(){},pc:function(){ht.qc.forEach((t=>t()))},Fc:function(t,e){t.onmessage=n=>{var r=(n=n.data).cmd;if(t.Ub&&(ht.Bc=t.Ub),n.targetThread&&n.targetThread!=he()){var a=ht.Vb[n.Qc];a?a.postMessage(n,n.transferList):x(\'Internal error! Worker sent a message "\'+r+\'" to target pthread \'+n.targetThread+", but that thread no longer exists!")}else"processProxyingQueue"===r?zt(n.queue):"spawnThread"===r?lt(n):"cleanupThread"===r?st(n.thread):"killThread"===r?(n=n.thread,r=ht.Vb[n],delete ht.Vb[n],r.terminate(),Oe(n),ht.ac.splice(ht.ac.indexOf(r),1),r.Ub=0):"cancelThread"===r?ht.Vb[n.thread].postMessage({cmd:"cancel"}):"loaded"===r?(t.loaded=!0,e&&e(t),t.$b&&(t.$b(),delete t.$b)):"print"===r?C("Thread "+n.threadId+": "+n.text):"printErr"===r?x("Thread "+n.threadId+": "+n.text):"alert"===r?alert("Thread "+n.threadId+": "+n.text):"setimmediate"===n.target?t.postMessage(n):"onAbort"===r?u.onAbort&&u.onAbort(n.arg):r&&x("worker sent an unknown command "+r);ht.Bc=void 0},t.onerror=t=>{throw x("worker sent an error! "+t.filename+":"+t.lineno+": "+t.message),t},_&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:u.mainScriptUrlOrBlob||_scriptDir,wasmMemory:j,wasmModule:k})},yc:function(){var t=S("ort-wasm-threaded.worker.js");ht.Yb.push(new Worker(t))},Cc:function(){return 0==ht.Yb.length&&(ht.yc(),ht.Fc(ht.Yb[0])),ht.Yb.pop()}};function dt(t){for(;0<t.length;)t.shift()(u)}function yt(t){var e=Ee();return t=t(),Me(e),t}function bt(t){if(O)return $t(2,0,t);try{pt(t)}catch(t){t instanceof ct||"unwind"==t||g(1,t)}}u.PThread=ht,u.establishStackSpace=function(){var t=he(),e=a()[t+44>>2>>>0];t=a()[t+48>>2>>>0],Te(e,e-t),Me(e)};var mt=[];function gt(t){var e=mt[t];return e||(t>=mt.length&&(mt.length=t+1),mt[t]=e=$.get(t)),e}u.invokeEntryPoint=function(t,e){t=gt(t)(e),Q()?ht.nc(t):Ae(t)};var vt,wt,_t=[],Ot=0,At=0;function St(t){this.Zb=t,this.Sb=t-24,this.xc=function(t){i()[this.Sb+4>>2>>>0]=t},this.bc=function(){return i()[this.Sb+4>>2>>>0]},this.wc=function(t){i()[this.Sb+8>>2>>>0]=t},this.Dc=function(){return i()[this.Sb+8>>2>>>0]},this.rc=function(){a()[this.Sb>>2>>>0]=0},this.hc=function(t){t=t?1:0,e()[this.Sb+12>>0>>>0]=t},this.uc=function(){return 0!=e()[this.Sb+12>>0>>>0]},this.ic=function(t){t=t?1:0,e()[this.Sb+13>>0>>>0]=t},this.kc=function(){return 0!=e()[this.Sb+13>>0>>>0]},this.fc=function(t,e){this.cc(0),this.xc(t),this.wc(e),this.rc(),this.hc(!1),this.ic(!1)},this.sc=function(){Atomics.add(a(),this.Sb>>2,1)},this.Hc=function(){return 1===Atomics.sub(a(),this.Sb>>2,1)},this.cc=function(t){i()[this.Sb+16>>2>>>0]=t},this.tc=function(){return i()[this.Sb+16>>2>>>0]},this.vc=function(){if(Re(this.bc()))return i()[this.Zb>>2>>>0];var t=this.tc();return 0!==t?t:this.Zb}}function Tt(t){return ye(new St(t).Sb)}function Et(t,e,n,r){return O?$t(3,1,t,e,n,r):Mt(t,e,n,r)}function Mt(t,e,n,r){if("undefined"==typeof SharedArrayBuffer)return x("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];return O&&0===a.length?Et(t,e,n,r):(t={Ic:n,Ub:t,zc:r,Nc:a},O?(t.Oc="spawnThread",postMessage(t,a),0):lt(t))}function Ct(t,e,n){return O?$t(4,1,t,e,n):0}function xt(t,e){if(O)return $t(5,1,t,e)}function Rt(t,e){if(O)return $t(6,1,t,e)}function jt(t,e,n){if(O)return $t(7,1,t,e,n)}function kt(t,e,n){return O?$t(8,1,t,e,n):0}function Dt(t,e){if(O)return $t(9,1,t,e)}function Pt(t,e,n){if(O)return $t(10,1,t,e,n)}function Ut(t,e,n,r){if(O)return $t(11,1,t,e,n,r)}function Ft(t,e,n,r){if(O)return $t(12,1,t,e,n,r)}function It(t,e,n,r){if(O)return $t(13,1,t,e,n,r)}function Wt(t){if(O)return $t(14,1,t)}function Ht(t,e){if(O)return $t(15,1,t,e)}function Lt(t,e,n){if(O)return $t(16,1,t,e,n)}function zt(t){Atomics.store(a(),t>>2,1),he()&&_e(t),Atomics.compareExchange(a(),t>>2,1,0)}function Yt(t){return i()[t>>>2]+4294967296*a()[t+4>>>2]}function Bt(t,e,n,r,a,i){return O?$t(17,1,t,e,n,r,a,i):-52}function Gt(t,e,n,r,a,i){if(O)return $t(18,1,t,e,n,r,a,i)}function Nt(t){var n=G(t)+1,r=de(n);return r&&B(t,e(),r,n),r}function Vt(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}if(O)return $t(19,1,t,e,n);var o=(new Date).getFullYear(),u=new Date(o,0,1),c=new Date(o,6,1);o=u.getTimezoneOffset();var s=c.getTimezoneOffset(),l=Math.max(o,s);a()[t>>2>>>0]=60*l,a()[e>>2>>>0]=Number(o!=s),t=r(u),e=r(c),t=Nt(t),e=Nt(e),s<o?(i()[n>>2>>>0]=t,i()[n+4>>2>>>0]=e):(i()[n>>2>>>0]=e,i()[n+4>>2>>>0]=t)}function $t(t,e){var n=arguments.length-2,r=arguments;return yt((()=>{for(var a=Ce(8*n),i=a>>3,u=0;u<n;u++){var c=r[2+u];o()[i+u>>>0]=c}return we(t,n,a,e)}))}u.executeNotifiedProxyingQueue=zt,wt=_?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:O?()=>performance.now()-u.__performance_now_clock_drift:()=>performance.now();var qt,Xt=[],Jt={};function Zt(){if(!qt){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(t in Jt)void 0===Jt[t]?delete e[t]:e[t]=Jt[t];var n=[];for(t in e)n.push(t+"="+e[t]);qt=n}return qt}function Qt(t,n){if(O)return $t(20,1,t,n);var r=0;return Zt().forEach((function(a,o){var u=n+r;for(o=i()[t+4*o>>2>>>0]=u,u=0;u<a.length;++u)e()[o++>>0>>>0]=a.charCodeAt(u);e()[o>>0>>>0]=0,r+=a.length+1})),0}function Kt(t,e){if(O)return $t(21,1,t,e);var n=Zt();i()[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),i()[e>>2>>>0]=r,0}function te(t){return O?$t(22,1,t):52}function ee(t,e,n,r){return O?$t(23,1,t,e,n,r):52}function ne(t,e,n,r,a){return O?$t(24,1,t,e,n,r,a):70}var re=[null,[],[]];function ae(t,e){var n=re[t];0===e||10===e?((1===t?C:x)(z(n,0)),n.length=0):n.push(e)}function ie(t,e,n,a){if(O)return $t(25,1,t,e,n,a);for(var o=0,u=0;u<n;u++){var c=i()[e>>2>>>0],s=i()[e+4>>2>>>0];e+=8;for(var l=0;l<s;l++)ae(t,r()[c+l>>>0]);o+=s}return i()[a>>2>>>0]=o,0}var oe=0;function ue(t){return 0==t%4&&(0!=t%100||0==t%400)}var ce=[31,29,31,30,31,30,31,31,30,31,30,31],se=[31,28,31,30,31,30,31,31,30,31,30,31];function le(t,n,r,i){function o(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function u(t,e){return o(t,e,"0")}function c(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function s(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function l(t){var e=t.Wb;for(t=new Date(new Date(t.Xb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(ue(t.getFullYear())?ce:se)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=s(new Date(t.getFullYear(),0,4)),n=s(n),0>=c(e,t)?0>=c(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var f=a()[i+40>>2>>>0];for(var p in i={Lc:a()[i>>2>>>0],Kc:a()[i+4>>2>>>0],dc:a()[i+8>>2>>>0],jc:a()[i+12>>2>>>0],ec:a()[i+16>>2>>>0],Xb:a()[i+20>>2>>>0],Tb:a()[i+24>>2>>>0],Wb:a()[i+28>>2>>>0],Rc:a()[i+32>>2>>>0],Jc:a()[i+36>>2>>>0],Mc:f?Y(f):""},r=Y(r),f={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})r=r.replace(new RegExp(p,"g"),f[p]);var h="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),d="January February March April May June July August September October November December".split(" ");for(p in f={"%a":function(t){return h[t.Tb].substring(0,3)},"%A":function(t){return h[t.Tb]},"%b":function(t){return d[t.ec].substring(0,3)},"%B":function(t){return d[t.ec]},"%C":function(t){return u((t.Xb+1900)/100|0,2)},"%d":function(t){return u(t.jc,2)},"%e":function(t){return o(t.jc,2," ")},"%g":function(t){return l(t).toString().substring(2)},"%G":function(t){return l(t)},"%H":function(t){return u(t.dc,2)},"%I":function(t){return 0==(t=t.dc)?t=12:12<t&&(t-=12),u(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.ec-1;e+=(ue(t.Xb+1900)?ce:se)[n++]);return u(t.jc+e,3)},"%m":function(t){return u(t.ec+1,2)},"%M":function(t){return u(t.Kc,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.dc&&12>t.dc?"AM":"PM"},"%S":function(t){return u(t.Lc,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Tb||7},"%U":function(t){return u(Math.floor((t.Wb+7-t.Tb)/7),2)},"%V":function(t){var e=Math.floor((t.Wb+7-(t.Tb+6)%7)/7);if(2>=(t.Tb+371-t.Wb-2)%7&&e++,e)53==e&&(4==(n=(t.Tb+371-t.Wb)%7)||3==n&&ue(t.Xb)||(e=1));else{e=52;var n=(t.Tb+7-t.Wb-1)%7;(4==n||5==n&&ue(t.Xb%400-1))&&e++}return u(e,2)},"%w":function(t){return t.Tb},"%W":function(t){return u(Math.floor((t.Wb+7-(t.Tb+6)%7)/7),2)},"%y":function(t){return(t.Xb+1900).toString().substring(2)},"%Y":function(t){return t.Xb+1900},"%z":function(t){var e=0<=(t=t.Jc);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Mc},"%%":function(){return"%"}},r=r.replace(/%%/g,"\\0\\0"),f)r.includes(p)&&(r=r.replace(new RegExp(p,"g"),f[p](i)));return p=function(t){var e=Array(G(t)+1);return B(t,e,0,e.length),e}(r=r.replace(/\\0\\0/g,"%")),p.length>n?0:(function(t,n){e().set(t,n>>>0)}(p,t),p.length-1)}ht.fc();var fe=[null,ft,bt,Et,Ct,xt,Rt,jt,kt,Dt,Pt,Ut,Ft,It,Wt,Ht,Lt,Bt,Gt,Vt,Qt,Kt,te,ee,ne,ie],pe={b:function(t){return de(t+24)+24},n:function(t){return(t=new St(t)).uc()||(t.hc(!0),Ot--),t.ic(!1),_t.push(t),t.sc(),t.vc()},ma:function(t){throw x("Unexpected exception thrown, this is not properly supported - aborting"),H=!0,t},x:function(){Se(0);var t=_t.pop();if(t.Hc()&&!t.kc()){var e=t.Dc();e&&gt(e)(t.Zb),Tt(t.Zb)}At=0},e:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},l:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},h:function(){var t=At;if(!t)return oe=0;var e=new St(t);e.cc(t);var n=e.bc();if(!n)return oe=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(xe(i,n,e.Sb+16))return oe=i,t}return oe=n,t},t:Tt,M:function(){var t=_t.pop();t||at("no exception to throw");var e=t.Zb;throw t.kc()||(_t.push(t),t.ic(!0),t.hc(!1),Ot++),At=e,e},c:function(t,e,n){throw new St(t).fc(e,n),At=t,Ot++,t},pa:function(){return Ot},Fa:function(t){ge(t,!w,1,!v),ht.pc()},T:function(t){O?postMessage({cmd:"cleanupThread",thread:t}):st(t)},xa:Mt,j:function(t){throw At||(At=t),t},H:Ct,Ma:xt,ua:Rt,wa:jt,oa:kt,Ka:Dt,Ca:Pt,Ja:Ut,V:Ft,va:It,sa:Wt,La:Ht,ta:Lt,Ta:function(){},X:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ua:function(){at("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},W:function(){return Date.now()},ya:function(){return 2097152},Oa:function(){return!0},za:function(t,e,n,r){if(t==e)setTimeout((()=>zt(r)));else if(O)postMessage({targetThread:t,cmd:"processProxyingQueue",queue:r});else{if(!(t=ht.Vb[t]))return;t.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},Ea:function(){return-1},Pa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getUTCSeconds(),a()[e+4>>2>>>0]=t.getUTCMinutes(),a()[e+8>>2>>>0]=t.getUTCHours(),a()[e+12>>2>>>0]=t.getUTCDate(),a()[e+16>>2>>>0]=t.getUTCMonth(),a()[e+20>>2>>>0]=t.getUTCFullYear()-1900,a()[e+24>>2>>>0]=t.getUTCDay(),t=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[e+28>>2>>>0]=t},Qa:function(t,e){t=new Date(1e3*Yt(t)),a()[e>>2>>>0]=t.getSeconds(),a()[e+4>>2>>>0]=t.getMinutes(),a()[e+8>>2>>>0]=t.getHours(),a()[e+12>>2>>>0]=t.getDate(),a()[e+16>>2>>>0]=t.getMonth(),a()[e+20>>2>>>0]=t.getFullYear()-1900,a()[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1),r=(t.getTime()-n.getTime())/864e5|0;a()[e+28>>2>>>0]=r,a()[e+36>>2>>>0]=-60*t.getTimezoneOffset(),r=new Date(t.getFullYear(),6,1).getTimezoneOffset(),t=0|(r!=(n=n.getTimezoneOffset())&&t.getTimezoneOffset()==Math.min(n,r)),a()[e+32>>2>>>0]=t},Ra:function(t){var e=new Date(a()[t+20>>2>>>0]+1900,a()[t+16>>2>>>0],a()[t+12>>2>>>0],a()[t+8>>2>>>0],a()[t+4>>2>>>0],a()[t>>2>>>0],0),n=a()[t+32>>2>>>0],r=e.getTimezoneOffset(),i=new Date(e.getFullYear(),0,1),o=new Date(e.getFullYear(),6,1).getTimezoneOffset(),u=i.getTimezoneOffset(),c=Math.min(u,o);return 0>n?a()[t+32>>2>>>0]=Number(o!=u&&c==r):0<n!=(c==r)&&(o=Math.max(u,o),e.setTime(e.getTime()+6e4*((0<n?c:o)-r))),a()[t+24>>2>>>0]=e.getDay(),n=(e.getTime()-i.getTime())/864e5|0,a()[t+28>>2>>>0]=n,a()[t>>2>>>0]=e.getSeconds(),a()[t+4>>2>>>0]=e.getMinutes(),a()[t+8>>2>>>0]=e.getHours(),a()[t+12>>2>>>0]=e.getDate(),a()[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},Aa:Bt,Ba:Gt,Sa:function t(e,n,r){t.Ac||(t.Ac=!0,Vt(e,n,r))},y:function(){at("")},U:function(){if(!_&&!w){var t="Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread";vt||(vt={}),vt[t]||(vt[t]=1,_&&(t="warning: "+t),x(t))}},ra:function(){return 4294901760},B:wt,Ia:function(t,e,n){r().copyWithin(t>>>0,e>>>0,e+n>>>0)},F:function(){return _?n(993).cpus().length:navigator.hardwareConcurrency},Da:function(t,e,n){Xt.length=e,n>>=3;for(var r=0;r<e;r++)Xt[r]=o()[n+r>>>0];return(0>t?ut[-t-1]:fe[t]).apply(null,Xt)},qa:function(t){var e=r().length;if((t>>>=0)<=e||4294901760<t)return!1;for(var n=1;4>=n;n*=2){var a=e*(1+.2/n);a=Math.min(a,t+100663296);var i=Math;a=Math.max(t,a),i=i.min.call(i,4294901760,a+(65536-a%65536)%65536);t:{try{j.grow(i-D.byteLength+65535>>>16),N(j.buffer);var o=1;break t}catch(t){}o=void 0}if(o)return!0}return!1},Na:function(){throw"unwind"},Ga:Qt,Ha:Kt,J:pt,I:te,S:ee,ga:ne,R:ie,d:function(){return oe},na:function t(r,a){t.lc||(t.lc=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(_)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>at("randomDevice")}());for(var i=0;i<a;i++)e()[r+i>>0>>>0]=t.lc();return 0},ia:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ja:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},K:function(t){var e=Ee();try{return gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},f:function(t,e){var n=Ee();try{return gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},P:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},Q:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},k:function(t,e,n){var r=Ee();try{return gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},p:function(t,e,n,r){var a=Ee();try{return gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},q:function(t,e,n,r,a){var i=Ee();try{return gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},N:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},s:function(t,e,n,r,a,i){var o=Ee();try{return gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},w:function(t,e,n,r,a,i,o){var u=Ee();try{return gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},L:function(t,e,n,r,a,i,o,u){var c=Ee();try{return gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},E:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{return gt(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=Ee();try{return He(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},_:function(t,e,n,r,a,i,o){var u=Ee();try{return ke(t,e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},Z:function(t,e,n,r,a){var i=Ee();try{return Le(t,e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},ca:function(t,e,n,r){var a=Ee();try{return Ie(t,e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},$:function(t){var e=Ee();try{return je(t)}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},ba:function(t,e){var n=Ee();try{return We(t,e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},Y:function(t,e,n){var r=Ee();try{return De(t,e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},g:function(t){var e=Ee();try{gt(t)()}catch(t){if(Me(e),t!==t+0)throw t;Se(1,0)}},r:function(t,e){var n=Ee();try{gt(t)(e)}catch(t){if(Me(n),t!==t+0)throw t;Se(1,0)}},i:function(t,e,n){var r=Ee();try{gt(t)(e,n)}catch(t){if(Me(r),t!==t+0)throw t;Se(1,0)}},ha:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},m:function(t,e,n,r){var a=Ee();try{gt(t)(e,n,r)}catch(t){if(Me(a),t!==t+0)throw t;Se(1,0)}},v:function(t,e,n,r,a){var i=Ee();try{gt(t)(e,n,r,a)}catch(t){if(Me(i),t!==t+0)throw t;Se(1,0)}},u:function(t,e,n,r,a,i){var o=Ee();try{gt(t)(e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},O:function(t,e,n,r,a,i,o){var u=Ee();try{gt(t)(e,n,r,a,i,o)}catch(t){if(Me(u),t!==t+0)throw t;Se(1,0)}},A:function(t,e,n,r,a,i,o,u){var c=Ee();try{gt(t)(e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},ka:function(t,e,n,r,a,i,o,u,c){var s=Ee();try{gt(t)(e,n,r,a,i,o,u,c)}catch(t){if(Me(s),t!==t+0)throw t;Se(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l){var f=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(Me(f),t!==t+0)throw t;Se(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=Ee();try{gt(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(Me(b),t!==t+0)throw t;Se(1,0)}},fa:function(t,e,n,r,a,i,o,u){var c=Ee();try{Pe(t,e,n,r,a,i,o,u)}catch(t){if(Me(c),t!==t+0)throw t;Se(1,0)}},da:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=Ee();try{Fe(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(Me(p),t!==t+0)throw t;Se(1,0)}},ea:function(t,e,n,r,a,i){var o=Ee();try{Ue(t,e,n,r,a,i)}catch(t){if(Me(o),t!==t+0)throw t;Se(1,0)}},o:function(t){return t},a:j||u.wasmMemory,G:function(t){oe=t},la:le,z:function(t,e,n,r){return le(t,e,n,r)}};!function(){function t(t,e){u.asm=t.exports,ht.qc.push(u.asm.sb),$=u.asm.ub,X.unshift(u.asm.Va),k=e,O||(et--,u.monitorRunDependencies&&u.monitorRunDependencies(et),0==et&&(null!==nt&&(clearInterval(nt),nt=null),rt&&(t=rt,rt=null,t())))}function e(e){t(e.instance,e.module)}function n(t){return function(){if(!M&&(v||w)){if("function"==typeof fetch&&!tt.startsWith("file://"))return fetch(tt,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+tt+"\'";return t.arrayBuffer()})).catch((function(){return ot()}));if(f)return new Promise((function(t,e){f(tt,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return ot()}))}().then((function(t){return WebAssembly.instantiate(t,r)})).then((function(t){return t})).then(t,(function(t){x("failed to asynchronously prepare wasm: "+t),at(t)}))}var r={a:pe};if(O||(et++,u.monitorRunDependencies&&u.monitorRunDependencies(et)),u.instantiateWasm)try{return u.instantiateWasm(r,t)}catch(t){return x("Module.instantiateWasm callback failed with error: "+t),!1}(M||"function"!=typeof WebAssembly.instantiateStreaming||it()||tt.startsWith("file://")||_||"function"!=typeof fetch?n(e):fetch(tt,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,r).then(e,(function(t){return x("wasm streaming compile failed: "+t),x("falling back to ArrayBuffer instantiation"),n(e)}))}))).catch(s)}(),u.___wasm_call_ctors=function(){return(u.___wasm_call_ctors=u.asm.Va).apply(null,arguments)},u._OrtInit=function(){return(u._OrtInit=u.asm.Wa).apply(null,arguments)},u._OrtCreateSessionOptions=function(){return(u._OrtCreateSessionOptions=u.asm.Xa).apply(null,arguments)},u._OrtAppendExecutionProvider=function(){return(u._OrtAppendExecutionProvider=u.asm.Ya).apply(null,arguments)},u._OrtAddSessionConfigEntry=function(){return(u._OrtAddSessionConfigEntry=u.asm.Za).apply(null,arguments)},u._OrtReleaseSessionOptions=function(){return(u._OrtReleaseSessionOptions=u.asm._a).apply(null,arguments)},u._OrtCreateSession=function(){return(u._OrtCreateSession=u.asm.$a).apply(null,arguments)},u._OrtReleaseSession=function(){return(u._OrtReleaseSession=u.asm.ab).apply(null,arguments)},u._OrtGetInputCount=function(){return(u._OrtGetInputCount=u.asm.bb).apply(null,arguments)},u._OrtGetOutputCount=function(){return(u._OrtGetOutputCount=u.asm.cb).apply(null,arguments)},u._OrtGetInputName=function(){return(u._OrtGetInputName=u.asm.db).apply(null,arguments)},u._OrtGetOutputName=function(){return(u._OrtGetOutputName=u.asm.eb).apply(null,arguments)},u._OrtFree=function(){return(u._OrtFree=u.asm.fb).apply(null,arguments)},u._OrtCreateTensor=function(){return(u._OrtCreateTensor=u.asm.gb).apply(null,arguments)},u._OrtGetTensorData=function(){return(u._OrtGetTensorData=u.asm.hb).apply(null,arguments)},u._OrtReleaseTensor=function(){return(u._OrtReleaseTensor=u.asm.ib).apply(null,arguments)},u._OrtCreateRunOptions=function(){return(u._OrtCreateRunOptions=u.asm.jb).apply(null,arguments)},u._OrtAddRunConfigEntry=function(){return(u._OrtAddRunConfigEntry=u.asm.kb).apply(null,arguments)},u._OrtReleaseRunOptions=function(){return(u._OrtReleaseRunOptions=u.asm.lb).apply(null,arguments)},u._OrtRun=function(){return(u._OrtRun=u.asm.mb).apply(null,arguments)},u._OrtEndProfiling=function(){return(u._OrtEndProfiling=u.asm.nb).apply(null,arguments)};var he=u._pthread_self=function(){return(he=u._pthread_self=u.asm.ob).apply(null,arguments)},de=u._malloc=function(){return(de=u._malloc=u.asm.pb).apply(null,arguments)},ye=u._free=function(){return(ye=u._free=u.asm.qb).apply(null,arguments)},be=u._fflush=function(){return(be=u._fflush=u.asm.rb).apply(null,arguments)};u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm.sb).apply(null,arguments)};var me=u.___funcs_on_exit=function(){return(me=u.___funcs_on_exit=u.asm.tb).apply(null,arguments)},ge=u.__emscripten_thread_init=function(){return(ge=u.__emscripten_thread_init=u.asm.vb).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm.wb).apply(null,arguments)};var ve,we=u._emscripten_run_in_main_runtime_thread_js=function(){return(we=u._emscripten_run_in_main_runtime_thread_js=u.asm.xb).apply(null,arguments)},_e=u.__emscripten_proxy_execute_task_queue=function(){return(_e=u.__emscripten_proxy_execute_task_queue=u.asm.yb).apply(null,arguments)},Oe=u.__emscripten_thread_free_data=function(){return(Oe=u.__emscripten_thread_free_data=u.asm.zb).apply(null,arguments)},Ae=u.__emscripten_thread_exit=function(){return(Ae=u.__emscripten_thread_exit=u.asm.Ab).apply(null,arguments)},Se=u._setThrew=function(){return(Se=u._setThrew=u.asm.Bb).apply(null,arguments)},Te=u._emscripten_stack_set_limits=function(){return(Te=u._emscripten_stack_set_limits=u.asm.Cb).apply(null,arguments)},Ee=u.stackSave=function(){return(Ee=u.stackSave=u.asm.Db).apply(null,arguments)},Me=u.stackRestore=function(){return(Me=u.stackRestore=u.asm.Eb).apply(null,arguments)},Ce=u.stackAlloc=function(){return(Ce=u.stackAlloc=u.asm.Fb).apply(null,arguments)},xe=u.___cxa_can_catch=function(){return(xe=u.___cxa_can_catch=u.asm.Gb).apply(null,arguments)},Re=u.___cxa_is_pointer_type=function(){return(Re=u.___cxa_is_pointer_type=u.asm.Hb).apply(null,arguments)},je=u.dynCall_j=function(){return(je=u.dynCall_j=u.asm.Ib).apply(null,arguments)},ke=u.dynCall_iiiiij=function(){return(ke=u.dynCall_iiiiij=u.asm.Jb).apply(null,arguments)},De=u.dynCall_jii=function(){return(De=u.dynCall_jii=u.asm.Kb).apply(null,arguments)},Pe=u.dynCall_viiiiij=function(){return(Pe=u.dynCall_viiiiij=u.asm.Lb).apply(null,arguments)},Ue=u.dynCall_vjji=function(){return(Ue=u.dynCall_vjji=u.asm.Mb).apply(null,arguments)},Fe=u.dynCall_viiijjjii=function(){return(Fe=u.dynCall_viiijjjii=u.asm.Nb).apply(null,arguments)},Ie=u.dynCall_iij=function(){return(Ie=u.dynCall_iij=u.asm.Ob).apply(null,arguments)},We=u.dynCall_ji=function(){return(We=u.dynCall_ji=u.asm.Pb).apply(null,arguments)},He=u.dynCall_iiiiiij=function(){return(He=u.dynCall_iiiiiij=u.asm.Qb).apply(null,arguments)},Le=u.dynCall_iiij=function(){return(Le=u.dynCall_iiij=u.asm.Rb).apply(null,arguments)};function ze(){function t(){if(!ve&&(ve=!0,u.calledRun=!0,!H)&&(O||dt(X),c(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),!O)){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;){var t=u.postRun.shift();Z.unshift(t)}dt(Z)}}if(!(0<et))if(O)c(u),O||dt(X),postMessage({cmd:"loaded"});else{if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)K();dt(q),0<et||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),t()}),1)):t())}}if(u.UTF8ToString=Y,u.stringToUTF8=function(t,e,n){return B(t,r(),e,n)},u.lengthBytesUTF8=G,u.keepRuntimeAlive=Q,u.wasmMemory=j,u.stackSave=Ee,u.stackRestore=Me,u.stackAlloc=Ce,u.ExitStatus=ct,u.PThread=ht,rt=function t(){ve||ze(),ve||(rt=t)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return ze(),t.ready});t.exports=r},932:(t,e,n)=>{var _scriptDir,r=(_scriptDir=(_scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(t){var e,r,a;t=t||{},e||(e=void 0!==t?t:{}),e.ready=new Promise((function(t,e){r=t,a=e}));var i,o,u,c,s,l,f=Object.assign({},e),p="./this.program",h=(t,e)=>{throw e},d="object"==typeof window,y="function"==typeof importScripts,b="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";b?(m=y?n(908).dirname(m)+"/":"//",l=()=>{s||(c=n(384),s=n(908))},i=function(t,e){return l(),t=s.normalize(t),c.readFileSync(t,e?void 0:"utf8")},u=t=>((t=i(t,!0)).buffer||(t=new Uint8Array(t)),t),o=(t,e,n)=>{l(),t=s.normalize(t),c.readFile(t,(function(t,r){t?n(t):e(r.buffer)}))},1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){if(!(t instanceof J))throw t})),process.on("unhandledRejection",(function(t){throw t})),h=(t,e)=>{if(_||0<L)throw process.exitCode=t,e;e instanceof J||w("exiting due to exception: "+e),process.exit(t)},e.inspect=function(){return"[Emscripten Module object]"}):(d||y)&&(y?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),_scriptDir&&(m=_scriptDir),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",i=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},y&&(u=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),o=(t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var g,v=e.print||console.log.bind(console),w=e.printErr||console.warn.bind(console);Object.assign(e,f),f=null,e.thisProgram&&(p=e.thisProgram),e.quit&&(h=e.quit),e.wasmBinary&&(g=e.wasmBinary);var _=e.noExitRuntime||!1;"object"!=typeof WebAssembly&&V("no native wasm support detected");var O,A,S,T,E,M,C=!1,x="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function R(t,e,n){var r=(e>>>=0)+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.buffer&&x)return x.decode(t.subarray(e,n));for(r="";e<n;){var a=t[e++];if(128&a){var i=63&t[e++];if(192==(224&a))r+=String.fromCharCode((31&a)<<6|i);else{var o=63&t[e++];65536>(a=224==(240&a)?(15&a)<<12|i<<6|o:(7&a)<<18|i<<12|o<<6|63&t[e++])?r+=String.fromCharCode(a):(a-=65536,r+=String.fromCharCode(55296|a>>10,56320|1023&a))}}else r+=String.fromCharCode(a)}return r}function j(t,e){return(t>>>=0)?R(T,t,e):""}function k(t,e,n,r){if(!(0<r))return 0;var a=n>>>=0;r=n+r-1;for(var i=0;i<t.length;++i){var o=t.charCodeAt(i);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++i)),127>=o){if(n>=r)break;e[n++>>>0]=o}else{if(2047>=o){if(n+1>=r)break;e[n++>>>0]=192|o>>6}else{if(65535>=o){if(n+2>=r)break;e[n++>>>0]=224|o>>12}else{if(n+3>=r)break;e[n++>>>0]=240|o>>18,e[n++>>>0]=128|o>>12&63}e[n++>>>0]=128|o>>6&63}e[n++>>>0]=128|63&o}}return e[n>>>0]=0,n-a}function D(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);127>=r?e++:2047>=r?e+=2:55296<=r&&57343>=r?(e+=4,++n):e+=3}return e}function P(){var t=O.buffer;A=t,e.HEAP8=S=new Int8Array(t),e.HEAP16=new Int16Array(t),e.HEAP32=E=new Int32Array(t),e.HEAPU8=T=new Uint8Array(t),e.HEAPU16=new Uint16Array(t),e.HEAPU32=M=new Uint32Array(t),e.HEAPF32=new Float32Array(t),e.HEAPF64=new Float64Array(t)}var U,F=[],I=[],W=[],H=[],L=0;function z(){var t=e.preRun.shift();F.unshift(t)}var Y,B=0,G=null,N=null;function V(t){throw e.onAbort&&e.onAbort(t),w(t="Aborted("+t+")"),C=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),a(t),t}function $(){return Y.startsWith("data:application/octet-stream;base64,")}if(Y="ort-wasm.wasm",!$()){var q=Y;Y=e.locateFile?e.locateFile(q,m):m+q}function X(){var t=Y;try{if(t==Y&&g)return new Uint8Array(g);if(u)return u(t);throw"both async and sync fetching of the wasm failed"}catch(t){V(t)}}function J(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Z(t){for(;0<t.length;)t.shift()(e)}var Q=[],K=0,tt=0;function et(t){this.Db=t,this.zb=t-24,this.Ub=function(t){M[this.zb+4>>2>>>0]=t},this.Eb=function(){return M[this.zb+4>>2>>>0]},this.Sb=function(t){M[this.zb+8>>2>>>0]=t},this.Wb=function(){return M[this.zb+8>>2>>>0]},this.Tb=function(){E[this.zb>>2>>>0]=0},this.Ib=function(t){S[this.zb+12>>0>>>0]=t?1:0},this.Pb=function(){return 0!=S[this.zb+12>>0>>>0]},this.Jb=function(t){S[this.zb+13>>0>>>0]=t?1:0},this.Lb=function(){return 0!=S[this.zb+13>>0>>>0]},this.Rb=function(t,e){this.Fb(0),this.Ub(t),this.Sb(e),this.Tb(),this.Ib(!1),this.Jb(!1)},this.Nb=function(){E[this.zb>>2>>>0]+=1},this.Xb=function(){var t=E[this.zb>>2>>>0];return E[this.zb>>2>>>0]=t-1,1===t},this.Fb=function(t){M[this.zb+16>>2>>>0]=t},this.Ob=function(){return M[this.zb+16>>2>>>0]},this.Qb=function(){if(Mt(this.Eb()))return M[this.Db>>2>>>0];var t=this.Ob();return 0!==t?t:this.Db}}function nt(t){return vt(new et(t).zb)}var rt=[];function at(t){var e=rt[t];return e||(t>=rt.length&&(rt.length=t+1),rt[t]=e=U.get(t)),e}function it(t){var e=D(t)+1,n=gt(e);return n&&k(t,S,n,e),n}var ot={};function ut(){if(!ct){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(t in ot)void 0===ot[t]?delete e[t]:e[t]=ot[t];var n=[];for(t in e)n.push(t+"="+e[t]);ct=n}return ct}var ct,st=[null,[],[]];function lt(t,e){var n=st[t];0===e||10===e?((1===t?v:w)(R(n,0)),n.length=0):n.push(e)}var ft=0;function pt(t){return 0==t%4&&(0!=t%100||0==t%400)}var ht=[31,29,31,30,31,30,31,31,30,31,30,31],dt=[31,28,31,30,31,30,31,31,30,31,30,31];function yt(t,e,n,r){function a(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function i(t,e){return a(t,e,"0")}function o(t,e){function n(t){return 0>t?-1:0<t?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function u(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function c(t){var e=t.Bb;for(t=new Date(new Date(t.Cb+1900,0,1).getTime());0<e;){var n=t.getMonth(),r=(pt(t.getFullYear())?ht:dt)[n];if(!(e>r-t.getDate())){t.setDate(t.getDate()+e);break}e-=r-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return n=new Date(t.getFullYear()+1,0,4),e=u(new Date(t.getFullYear(),0,4)),n=u(n),0>=o(e,t)?0>=o(n,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var s=E[r+40>>2>>>0];for(var l in r={$b:E[r>>2>>>0],Zb:E[r+4>>2>>>0],Gb:E[r+8>>2>>>0],Kb:E[r+12>>2>>>0],Hb:E[r+16>>2>>>0],Cb:E[r+20>>2>>>0],Ab:E[r+24>>2>>>0],Bb:E[r+28>>2>>>0],bc:E[r+32>>2>>>0],Yb:E[r+36>>2>>>0],ac:s?j(s):""},n=j(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(l,"g"),s[l]);var f="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(l in s={"%a":function(t){return f[t.Ab].substring(0,3)},"%A":function(t){return f[t.Ab]},"%b":function(t){return p[t.Hb].substring(0,3)},"%B":function(t){return p[t.Hb]},"%C":function(t){return i((t.Cb+1900)/100|0,2)},"%d":function(t){return i(t.Kb,2)},"%e":function(t){return a(t.Kb,2," ")},"%g":function(t){return c(t).toString().substring(2)},"%G":function(t){return c(t)},"%H":function(t){return i(t.Gb,2)},"%I":function(t){return 0==(t=t.Gb)?t=12:12<t&&(t-=12),i(t,2)},"%j":function(t){for(var e=0,n=0;n<=t.Hb-1;e+=(pt(t.Cb+1900)?ht:dt)[n++]);return i(t.Kb+e,3)},"%m":function(t){return i(t.Hb+1,2)},"%M":function(t){return i(t.Zb,2)},"%n":function(){return"\\n"},"%p":function(t){return 0<=t.Gb&&12>t.Gb?"AM":"PM"},"%S":function(t){return i(t.$b,2)},"%t":function(){return"\\t"},"%u":function(t){return t.Ab||7},"%U":function(t){return i(Math.floor((t.Bb+7-t.Ab)/7),2)},"%V":function(t){var e=Math.floor((t.Bb+7-(t.Ab+6)%7)/7);if(2>=(t.Ab+371-t.Bb-2)%7&&e++,e)53==e&&(4==(n=(t.Ab+371-t.Bb)%7)||3==n&&pt(t.Cb)||(e=1));else{e=52;var n=(t.Ab+7-t.Bb-1)%7;(4==n||5==n&&pt(t.Cb%400-1))&&e++}return i(e,2)},"%w":function(t){return t.Ab},"%W":function(t){return i(Math.floor((t.Bb+7-(t.Ab+6)%7)/7),2)},"%y":function(t){return(t.Cb+1900).toString().substring(2)},"%Y":function(t){return t.Cb+1900},"%z":function(t){var e=0<=(t=t.Yb);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.ac},"%%":function(){return"%"}},n=n.replace(/%%/g,"\\0\\0"),s)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),s[l](r)));return l=function(t){var e=Array(D(t)+1);return k(t,e,0,e.length),e}(n=n.replace(/\\0\\0/g,"%")),l.length>e?0:(S.set(l,t>>>0),l.length-1)}var bt={a:function(t){return gt(t+24)+24},m:function(t){return(t=new et(t)).Pb()||(t.Ib(!0),K--),t.Jb(!1),Q.push(t),t.Nb(),t.Qb()},ia:function(t){throw w("Unexpected exception thrown, this is not properly supported - aborting"),C=!0,t},w:function(){Ot(0);var t=Q.pop();if(t.Xb()&&!t.Lb()){var e=t.Wb();e&&at(e)(t.Db),nt(t.Db)}tt=0},d:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},k:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},g:function(){var t=tt;if(!t)return ft=0;var e=new et(t);e.Fb(t);var n=e.Eb();if(!n)return ft=0,t;for(var r=Array.prototype.slice.call(arguments),a=0;a<r.length;a++){var i=r[a];if(0===i||i===n)break;if(Et(i,n,e.zb+16))return ft=i,t}return ft=n,t},s:nt,L:function(){var t=Q.pop();t||V("no exception to throw");var e=t.Db;throw t.Lb()||(Q.push(t),t.Jb(!0),t.Ib(!1),K++),tt=e,e},b:function(t,e,n){throw new et(t).Rb(e,n),tt=t,K++,t},la:function(){return K},i:function(t){throw tt||(tt=t),t},H:function(){return 0},Ba:function(){},pa:function(){},ra:function(){},ka:function(){return 0},za:function(){},ua:function(){},ya:function(){},R:function(){},qa:function(){},na:function(){},Aa:function(){},oa:function(){},Ha:function(){},Ja:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},Ia:function(){V("To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking")},S:function(){return Date.now()},Ca:function(){return!0},Da:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getUTCSeconds(),E[e+4>>2>>>0]=t.getUTCMinutes(),E[e+8>>2>>>0]=t.getUTCHours(),E[e+12>>2>>>0]=t.getUTCDate(),E[e+16>>2>>>0]=t.getUTCMonth(),E[e+20>>2>>>0]=t.getUTCFullYear()-1900,E[e+24>>2>>>0]=t.getUTCDay(),E[e+28>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},Ea:function(t,e){t=new Date(1e3*(M[t>>>2]+4294967296*E[t+4>>>2])),E[e>>2>>>0]=t.getSeconds(),E[e+4>>2>>>0]=t.getMinutes(),E[e+8>>2>>>0]=t.getHours(),E[e+12>>2>>>0]=t.getDate(),E[e+16>>2>>>0]=t.getMonth(),E[e+20>>2>>>0]=t.getFullYear()-1900,E[e+24>>2>>>0]=t.getDay();var n=new Date(t.getFullYear(),0,1);E[e+28>>2>>>0]=(t.getTime()-n.getTime())/864e5|0,E[e+36>>2>>>0]=-60*t.getTimezoneOffset();var r=new Date(t.getFullYear(),6,1).getTimezoneOffset();n=n.getTimezoneOffset(),E[e+32>>2>>>0]=0|(r!=n&&t.getTimezoneOffset()==Math.min(n,r))},Fa:function(t){var e=new Date(E[t+20>>2>>>0]+1900,E[t+16>>2>>>0],E[t+12>>2>>>0],E[t+8>>2>>>0],E[t+4>>2>>>0],E[t>>2>>>0],0),n=E[t+32>>2>>>0],r=e.getTimezoneOffset(),a=new Date(e.getFullYear(),0,1),i=new Date(e.getFullYear(),6,1).getTimezoneOffset(),o=a.getTimezoneOffset(),u=Math.min(o,i);return 0>n?E[t+32>>2>>>0]=Number(i!=o&&u==r):0<n!=(u==r)&&(i=Math.max(o,i),e.setTime(e.getTime()+6e4*((0<n?u:i)-r))),E[t+24>>2>>>0]=e.getDay(),E[t+28>>2>>>0]=(e.getTime()-a.getTime())/864e5|0,E[t>>2>>>0]=e.getSeconds(),E[t+4>>2>>>0]=e.getMinutes(),E[t+8>>2>>>0]=e.getHours(),E[t+12>>2>>>0]=e.getDate(),E[t+16>>2>>>0]=e.getMonth(),e.getTime()/1e3|0},sa:function(){return-52},ta:function(){},Ga:function t(e,n,r){t.Vb||(t.Vb=!0,function(t,e,n){function r(t){return(t=t.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?t[1]:"GMT"}var a=(new Date).getFullYear(),i=new Date(a,0,1),o=new Date(a,6,1);a=i.getTimezoneOffset();var u=o.getTimezoneOffset();E[t>>2>>>0]=60*Math.max(a,u),E[e>>2>>>0]=Number(a!=u),t=r(i),e=r(o),t=it(t),e=it(e),u<a?(M[n>>2>>>0]=t,M[n+4>>2>>>0]=e):(M[n>>2>>>0]=e,M[n+4>>2>>>0]=t)}(e,n,r))},B:function(){V("")},ma:function(){return 4294901760},I:b?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),xa:function(t,e,n){T.copyWithin(t>>>0,e>>>0,e+n>>>0)},G:function(t){var e=T.length;if(4294901760<(t>>>=0))return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296);var a=Math;r=Math.max(t,r),a=a.min.call(a,4294901760,r+(65536-r%65536)%65536);t:{try{O.grow(a-A.byteLength+65535>>>16),P();var i=1;break t}catch(t){}i=void 0}if(i)return!0}return!1},va:function(t,e){var n=0;return ut().forEach((function(r,a){var i=e+n;for(a=M[t+4*a>>2>>>0]=i,i=0;i<r.length;++i)S[a++>>0>>>0]=r.charCodeAt(i);S[a>>0>>>0]=0,n+=r.length+1})),0},wa:function(t,e){var n=ut();M[t>>2>>>0]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),M[e>>2>>>0]=r,0},ba:function(t){_||0<L||(_t(),Z(W),wt(0),st[1].length&&lt(1,10),st[2].length&&lt(2,10)),_||0<L||(e.onExit&&e.onExit(t),C=!0),h(t,new J(t))},E:function(){return 52},Q:function(){return 52},ca:function(){return 70},P:function(t,e,n,r){for(var a=0,i=0;i<n;i++){var o=M[e>>2>>>0],u=M[e+4>>2>>>0];e+=8;for(var c=0;c<u;c++)lt(t,T[o+c>>>0]);a+=u}return M[r>>2>>>0]=a,0},c:function(){return ft},ja:function t(e,r){t.Mb||(t.Mb=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var t=new Uint8Array(1);return()=>(crypto.getRandomValues(t),t[0])}if(b)try{var e=n(Object(function(){var t=new Error("Cannot find module \'crypto\'");throw t.code="MODULE_NOT_FOUND",t}()));return()=>e.randomBytes(1)[0]}catch(t){}return()=>V("randomDevice")}());for(var a=0;a<r;a++)S[e+a>>0>>>0]=t.Mb();return 0},ea:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},fa:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},J:function(t){var e=At();try{return at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},e:function(t,e){var n=At();try{return at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},N:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},O:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},j:function(t,e,n){var r=At();try{return at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},o:function(t,e,n,r){var a=At();try{return at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},p:function(t,e,n,r,a){var i=At();try{return at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},M:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},r:function(t,e,n,r,a,i){var o=At();try{return at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},v:function(t,e,n,r,a,i,o){var u=At();try{return at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},K:function(t,e,n,r,a,i,o,u){var c=At();try{return at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},D:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{return at(t)(e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},X:function(t,e,n,r,a,i,o,u){var c=At();try{return Ft(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},V:function(t,e,n,r,a,i,o){var u=At();try{return xt(t,e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},U:function(t,e,n,r,a){var i=At();try{return It(t,e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},Z:function(t,e,n,r){var a=At();try{return Pt(t,e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},W:function(t){var e=At();try{return Ct(t)}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},Y:function(t,e){var n=At();try{return Ut(t,e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},T:function(t,e,n){var r=At();try{return Rt(t,e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},f:function(t){var e=At();try{at(t)()}catch(t){if(St(e),t!==t+0)throw t;Ot(1,0)}},q:function(t,e){var n=At();try{at(t)(e)}catch(t){if(St(n),t!==t+0)throw t;Ot(1,0)}},h:function(t,e,n){var r=At();try{at(t)(e,n)}catch(t){if(St(r),t!==t+0)throw t;Ot(1,0)}},da:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},l:function(t,e,n,r){var a=At();try{at(t)(e,n,r)}catch(t){if(St(a),t!==t+0)throw t;Ot(1,0)}},t:function(t,e,n,r,a){var i=At();try{at(t)(e,n,r,a)}catch(t){if(St(i),t!==t+0)throw t;Ot(1,0)}},u:function(t,e,n,r,a,i){var o=At();try{at(t)(e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},x:function(t,e,n,r,a,i,o){var u=At();try{at(t)(e,n,r,a,i,o)}catch(t){if(St(u),t!==t+0)throw t;Ot(1,0)}},z:function(t,e,n,r,a,i,o,u){var c=At();try{at(t)(e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},ga:function(t,e,n,r,a,i,o,u,c){var s=At();try{at(t)(e,n,r,a,i,o,u,c)}catch(t){if(St(s),t!==t+0)throw t;Ot(1,0)}},A:function(t,e,n,r,a,i,o,u,c,s,l){var f=At();try{at(t)(e,n,r,a,i,o,u,c,s,l)}catch(t){if(St(f),t!==t+0)throw t;Ot(1,0)}},C:function(t,e,n,r,a,i,o,u,c,s,l,f,p,h,d,y){var b=At();try{at(t)(e,n,r,a,i,o,u,c,s,l,f,p,h,d,y)}catch(t){if(St(b),t!==t+0)throw t;Ot(1,0)}},aa:function(t,e,n,r,a,i,o,u){var c=At();try{jt(t,e,n,r,a,i,o,u)}catch(t){if(St(c),t!==t+0)throw t;Ot(1,0)}},_:function(t,e,n,r,a,i,o,u,c,s,l,f){var p=At();try{Dt(t,e,n,r,a,i,o,u,c,s,l,f)}catch(t){if(St(p),t!==t+0)throw t;Ot(1,0)}},$:function(t,e,n,r,a,i){var o=At();try{kt(t,e,n,r,a,i)}catch(t){if(St(o),t!==t+0)throw t;Ot(1,0)}},n:function(t){return t},F:function(t){ft=t},ha:yt,y:function(t,e,n,r){return yt(t,e,n,r)}};!function(){function t(t){e.asm=t.exports,O=e.asm.Ka,P(),U=e.asm.ib,I.unshift(e.asm.La),B--,e.monitorRunDependencies&&e.monitorRunDependencies(B),0==B&&(null!==G&&(clearInterval(G),G=null),N&&(t=N,N=null,t()))}function n(e){t(e.instance)}function r(t){return function(){if(!g&&(d||y)){if("function"==typeof fetch&&!Y.startsWith("file://"))return fetch(Y,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at \'"+Y+"\'";return t.arrayBuffer()})).catch((function(){return X()}));if(o)return new Promise((function(t,e){o(Y,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return X()}))}().then((function(t){return WebAssembly.instantiate(t,i)})).then((function(t){return t})).then(t,(function(t){w("failed to asynchronously prepare wasm: "+t),V(t)}))}var i={a:bt};if(B++,e.monitorRunDependencies&&e.monitorRunDependencies(B),e.instantiateWasm)try{return e.instantiateWasm(i,t)}catch(t){return w("Module.instantiateWasm callback failed with error: "+t),!1}(g||"function"!=typeof WebAssembly.instantiateStreaming||$()||Y.startsWith("file://")||b||"function"!=typeof fetch?r(n):fetch(Y,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(n,(function(t){return w("wasm streaming compile failed: "+t),w("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),e.___wasm_call_ctors=function(){return(e.___wasm_call_ctors=e.asm.La).apply(null,arguments)},e._OrtInit=function(){return(e._OrtInit=e.asm.Ma).apply(null,arguments)},e._OrtCreateSessionOptions=function(){return(e._OrtCreateSessionOptions=e.asm.Na).apply(null,arguments)},e._OrtAppendExecutionProvider=function(){return(e._OrtAppendExecutionProvider=e.asm.Oa).apply(null,arguments)},e._OrtAddSessionConfigEntry=function(){return(e._OrtAddSessionConfigEntry=e.asm.Pa).apply(null,arguments)},e._OrtReleaseSessionOptions=function(){return(e._OrtReleaseSessionOptions=e.asm.Qa).apply(null,arguments)},e._OrtCreateSession=function(){return(e._OrtCreateSession=e.asm.Ra).apply(null,arguments)},e._OrtReleaseSession=function(){return(e._OrtReleaseSession=e.asm.Sa).apply(null,arguments)},e._OrtGetInputCount=function(){return(e._OrtGetInputCount=e.asm.Ta).apply(null,arguments)},e._OrtGetOutputCount=function(){return(e._OrtGetOutputCount=e.asm.Ua).apply(null,arguments)},e._OrtGetInputName=function(){return(e._OrtGetInputName=e.asm.Va).apply(null,arguments)},e._OrtGetOutputName=function(){return(e._OrtGetOutputName=e.asm.Wa).apply(null,arguments)},e._OrtFree=function(){return(e._OrtFree=e.asm.Xa).apply(null,arguments)},e._OrtCreateTensor=function(){return(e._OrtCreateTensor=e.asm.Ya).apply(null,arguments)},e._OrtGetTensorData=function(){return(e._OrtGetTensorData=e.asm.Za).apply(null,arguments)},e._OrtReleaseTensor=function(){return(e._OrtReleaseTensor=e.asm._a).apply(null,arguments)},e._OrtCreateRunOptions=function(){return(e._OrtCreateRunOptions=e.asm.$a).apply(null,arguments)},e._OrtAddRunConfigEntry=function(){return(e._OrtAddRunConfigEntry=e.asm.ab).apply(null,arguments)},e._OrtReleaseRunOptions=function(){return(e._OrtReleaseRunOptions=e.asm.bb).apply(null,arguments)},e._OrtRun=function(){return(e._OrtRun=e.asm.cb).apply(null,arguments)},e._OrtEndProfiling=function(){return(e._OrtEndProfiling=e.asm.db).apply(null,arguments)};var mt,gt=e._malloc=function(){return(gt=e._malloc=e.asm.eb).apply(null,arguments)},vt=e._free=function(){return(vt=e._free=e.asm.fb).apply(null,arguments)},wt=e._fflush=function(){return(wt=e._fflush=e.asm.gb).apply(null,arguments)},_t=e.___funcs_on_exit=function(){return(_t=e.___funcs_on_exit=e.asm.hb).apply(null,arguments)},Ot=e._setThrew=function(){return(Ot=e._setThrew=e.asm.jb).apply(null,arguments)},At=e.stackSave=function(){return(At=e.stackSave=e.asm.kb).apply(null,arguments)},St=e.stackRestore=function(){return(St=e.stackRestore=e.asm.lb).apply(null,arguments)},Tt=e.stackAlloc=function(){return(Tt=e.stackAlloc=e.asm.mb).apply(null,arguments)},Et=e.___cxa_can_catch=function(){return(Et=e.___cxa_can_catch=e.asm.nb).apply(null,arguments)},Mt=e.___cxa_is_pointer_type=function(){return(Mt=e.___cxa_is_pointer_type=e.asm.ob).apply(null,arguments)},Ct=e.dynCall_j=function(){return(Ct=e.dynCall_j=e.asm.pb).apply(null,arguments)},xt=e.dynCall_iiiiij=function(){return(xt=e.dynCall_iiiiij=e.asm.qb).apply(null,arguments)},Rt=e.dynCall_jii=function(){return(Rt=e.dynCall_jii=e.asm.rb).apply(null,arguments)},jt=e.dynCall_viiiiij=function(){return(jt=e.dynCall_viiiiij=e.asm.sb).apply(null,arguments)},kt=e.dynCall_vjji=function(){return(kt=e.dynCall_vjji=e.asm.tb).apply(null,arguments)},Dt=e.dynCall_viiijjjii=function(){return(Dt=e.dynCall_viiijjjii=e.asm.ub).apply(null,arguments)},Pt=e.dynCall_iij=function(){return(Pt=e.dynCall_iij=e.asm.vb).apply(null,arguments)},Ut=e.dynCall_ji=function(){return(Ut=e.dynCall_ji=e.asm.wb).apply(null,arguments)},Ft=e.dynCall_iiiiiij=function(){return(Ft=e.dynCall_iiiiiij=e.asm.xb).apply(null,arguments)},It=e.dynCall_iiij=function(){return(It=e.dynCall_iiij=e.asm.yb).apply(null,arguments)};function Wt(){function t(){if(!mt&&(mt=!0,e.calledRun=!0,!C)){if(Z(I),r(e),e.onRuntimeInitialized&&e.onRuntimeInitialized(),e.postRun)for("function"==typeof e.postRun&&(e.postRun=[e.postRun]);e.postRun.length;){var t=e.postRun.shift();H.unshift(t)}Z(H)}}if(!(0<B)){if(e.preRun)for("function"==typeof e.preRun&&(e.preRun=[e.preRun]);e.preRun.length;)z();Z(F),0<B||(e.setStatus?(e.setStatus("Running..."),setTimeout((function(){setTimeout((function(){e.setStatus("")}),1),t()}),1)):t())}}if(e.UTF8ToString=j,e.stringToUTF8=function(t,e,n){return k(t,T,e,n)},e.lengthBytesUTF8=D,e.stackSave=At,e.stackRestore=St,e.stackAlloc=Tt,N=function t(){mt||Wt(),mt||(N=t)},e.preInit)for("function"==typeof e.preInit&&(e.preInit=[e.preInit]);0<e.preInit.length;)e.preInit.pop()();return Wt(),t.ready});t.exports=r},967:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.iterateExtraOptions=void 0,e.iterateExtraOptions=(t,n,r,a)=>{if("object"==typeof t&&null!==t){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach((([t,i])=>{const o=n?n+t:t;if("object"==typeof i)(0,e.iterateExtraOptions)(i,o+".",r,a);else if("string"==typeof i||"number"==typeof i)a(o,i.toString());else{if("boolean"!=typeof i)throw new Error("Can\'t handle extra config type: "+typeof i);a(o,i?"1":"0")}}))}},586:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRunOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setRunOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};try{if(void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);void 0===(null==t?void 0:t.terminate)&&(u.terminate=!1);let i=0;if(void 0!==(null==t?void 0:t.tag)&&(i=(0,a.allocWasmString)(t.tag,o)),n=e._OrtCreateRunOptions(u.logSeverityLevel,u.logVerbosityLevel,!!u.terminate,i),0===n)throw new Error("Can\'t create run options");return void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddRunConfigEntry(n,i,u))throw new Error(`Can\'t set a run config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseRunOptions(n),o.forEach(e._free),t}}},919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setSessionOptions=void 0;const r=n(967),a=n(983),i=n(361);e.setSessionOptions=t=>{const e=(0,i.getInstance)();let n=0;const o=[],u=t||{};(t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});const e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1")})(u);try{void 0===(null==t?void 0:t.graphOptimizationLevel)&&(u.graphOptimizationLevel="all");const c=(t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}})(u.graphOptimizationLevel);void 0===(null==t?void 0:t.enableCpuMemArena)&&(u.enableCpuMemArena=!0),void 0===(null==t?void 0:t.enableMemPattern)&&(u.enableMemPattern=!0),void 0===(null==t?void 0:t.executionMode)&&(u.executionMode="sequential");const s=(t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}})(u.executionMode);let l=0;if(void 0!==(null==t?void 0:t.logId)&&(l=(0,a.allocWasmString)(t.logId,o)),void 0===(null==t?void 0:t.logSeverityLevel))u.logSeverityLevel=2;else if("number"!=typeof t.logSeverityLevel||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(void 0===(null==t?void 0:t.logVerbosityLevel))u.logVerbosityLevel=0;else if("number"!=typeof t.logVerbosityLevel||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);if(void 0===(null==t?void 0:t.enableProfiling)&&(u.enableProfiling=!1),n=e._OrtCreateSessionOptions(c,!!u.enableCpuMemArena,!!u.enableMemPattern,s,!!u.enableProfiling,0,l,u.logSeverityLevel,u.logVerbosityLevel),0===n)throw new Error("Can\'t create session options");return(null==t?void 0:t.executionProviders)&&((t,e,n)=>{for(const r of e){let e="string"==typeof r?r:r.name;switch(e){case"xnnpack":e="XNNPACK";break;case"wasm":case"cpu":continue;default:throw new Error(`not supported EP: ${e}`)}const o=(0,a.allocWasmString)(e,n);if(0!==(0,i.getInstance)()._OrtAppendExecutionProvider(t,o))throw new Error(`Can\'t append execution provider: ${e}`)}})(n,t.executionProviders,o),void 0!==(null==t?void 0:t.extra)&&(0,r.iterateExtraOptions)(t.extra,"",new WeakSet,((t,r)=>{const i=(0,a.allocWasmString)(t,o),u=(0,a.allocWasmString)(r,o);if(0!==e._OrtAddSessionConfigEntry(n,i,u))throw new Error(`Can\'t set a session config entry: ${t} - ${r}`)})),[n,o]}catch(t){throw 0!==n&&e._OrtReleaseSessionOptions(n),o.forEach(e._free),t}}},983:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allocWasmString=void 0;const r=n(361);e.allocWasmString=(t,e)=>{const n=(0,r.getInstance)(),a=n.lengthBytesUTF8(t)+1,i=n._malloc(a);return n.stringToUTF8(t,i,a),e.push(i),i}},349:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.extractTransferableBuffers=e.endProfiling=e.run=e.releaseSession=e.createSession=e.createSessionFinalize=e.createSessionAllocate=e.initOrt=void 0;const r=n(586),a=n(919),i=n(983),o=n(361);e.initOrt=(t,e)=>{const n=(0,o.getInstance)()._OrtInit(t,e);if(0!==n)throw new Error(`Can\'t initialize onnxruntime. error code = ${n}`)};const u=new Map;e.createSessionAllocate=t=>{const e=(0,o.getInstance)(),n=e._malloc(t.byteLength);return e.HEAPU8.set(t,n),[n,t.byteLength]},e.createSessionFinalize=(t,e)=>{const n=(0,o.getInstance)();let r=0,i=0,c=[];try{if([i,c]=(0,a.setSessionOptions)(e),r=n._OrtCreateSession(t[0],t[1],i),0===r)throw new Error("Can\'t create a session")}finally{n._free(t[0]),n._OrtReleaseSessionOptions(i),c.forEach(n._free)}const s=n._OrtGetInputCount(r),l=n._OrtGetOutputCount(r),f=[],p=[],h=[],d=[];for(let t=0;t<s;t++){const e=n._OrtGetInputName(r,t);if(0===e)throw new Error("Can\'t get an input name");p.push(e),f.push(n.UTF8ToString(e))}for(let t=0;t<l;t++){const e=n._OrtGetOutputName(r,t);if(0===e)throw new Error("Can\'t get an output name");d.push(e),h.push(n.UTF8ToString(e))}return u.set(r,[r,p,d]),[r,f,h]},e.createSession=(t,n)=>{const r=(0,e.createSessionAllocate)(t);return(0,e.createSessionFinalize)(r,n)},e.releaseSession=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=n[1],i=n[2];a.forEach(e._OrtFree),i.forEach(e._OrtFree),e._OrtReleaseSession(r),u.delete(t)};const c=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},s=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},l=t=>{switch(t){case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}};e.run=(t,e,n,a,f)=>{const p=(0,o.getInstance)(),h=u.get(t);if(!h)throw new Error("invalid session id");const d=h[0],y=h[1],b=h[2],m=e.length,g=a.length;let v=0,w=[];const _=[],O=[];try{[v,w]=(0,r.setRunOptions)(f);for(let t=0;t<m;t++){const e=n[t][0],r=n[t][1],a=n[t][2];let o,u;if(Array.isArray(a)){u=4*a.length,o=p._malloc(u),O.push(o);let t=o/4;for(let e=0;e<a.length;e++){if("string"!=typeof a[e])throw new TypeError(`tensor data at index ${e} is not a string`);p.HEAPU32[t++]=(0,i.allocWasmString)(a[e],O)}}else u=a.byteLength,o=p._malloc(u),O.push(o),p.HEAPU8.set(new Uint8Array(a.buffer,a.byteOffset,u),o);const s=p.stackSave(),l=p.stackAlloc(4*r.length);try{let t=l/4;r.forEach((e=>p.HEAP32[t++]=e));const n=p._OrtCreateTensor(c(e),o,u,l,r.length);if(0===n)throw new Error("Can\'t create a tensor");_.push(n)}finally{p.stackRestore(s)}}const t=p.stackSave(),o=p.stackAlloc(4*m),u=p.stackAlloc(4*m),h=p.stackAlloc(4*g),A=p.stackAlloc(4*g);try{let n=o/4,r=u/4,i=h/4,c=A/4;for(let t=0;t<m;t++)p.HEAPU32[n++]=_[t],p.HEAPU32[r++]=y[e[t]];for(let t=0;t<g;t++)p.HEAPU32[i++]=0,p.HEAPU32[c++]=b[a[t]];let f=p._OrtRun(d,u,o,m,A,g,h,v);const w=[];if(0===f)for(let t=0;t<g;t++){const e=p.HEAPU32[h/4+t],n=p.stackSave(),r=p.stackAlloc(16);let a,i=0;try{if(f=p._OrtGetTensorData(e,r,r+4,r+8,r+12),0!==f)throw new Error(`Can\'t access output tensor data. error code = ${f}`);let t=r/4;const o=p.HEAPU32[t++];i=p.HEAPU32[t++];const u=p.HEAPU32[t++],c=p.HEAPU32[t++],h=[];for(let t=0;t<c;t++)h.push(p.HEAPU32[u/4+t]);p._OrtFree(u);const d=0===h.length?1:h.reduce(((t,e)=>t*e));if(a=s(o),"string"===a){const t=[];let e=i/4;for(let n=0;n<d;n++){const r=p.HEAPU32[e++],a=n===d-1?void 0:p.HEAPU32[e]-r;t.push(p.UTF8ToString(r,a))}w.push([a,h,t])}else{const t=new(l(a))(d);new Uint8Array(t.buffer,t.byteOffset,t.byteLength).set(p.HEAPU8.subarray(i,i+t.byteLength)),w.push([a,h,t])}}finally{p.stackRestore(n),"string"===a&&i&&p._free(i),p._OrtReleaseTensor(e)}}if(0===f)return w;throw new Error(`failed to call OrtRun(). error code = ${f}.`)}finally{p.stackRestore(t)}}finally{_.forEach(p._OrtReleaseTensor),O.forEach(p._free),p._OrtReleaseRunOptions(v),w.forEach(p._free)}},e.endProfiling=t=>{const e=(0,o.getInstance)(),n=u.get(t);if(!n)throw new Error("invalid session id");const r=n[0],a=e._OrtEndProfiling(r);if(0===a)throw new Error("Can\'t get an profile file name");e._OrtFree(a)},e.extractTransferableBuffers=t=>{const e=[];for(const n of t){const t=n[2];!Array.isArray(t)&&t.buffer&&e.push(t.buffer)}return e}},361:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);a&&!("get"in a?!e.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return a(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.dispose=e.getInstance=e.initializeWebAssembly=void 0;const u=i(n(449)),c=o(n(932)),s=n(474);let l,f=!1,p=!1,h=!1;const d=(t,e)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-threaded.wasm":t?"ort-wasm-simd.wasm":"ort-wasm.wasm";e.initializeWebAssembly=async t=>{if(f)return Promise.resolve();if(p)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(h)throw new Error("previous call to \'initializeWebAssembly()\' failed.");p=!0;const e=t.initTimeout,r=t.numThreads,a=t.simd,i=r>1&&(()=>{try{return"undefined"!=typeof SharedArrayBuffer&&("undefined"!=typeof MessageChannel&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])))}catch(t){return!1}})(),o=a&&(()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch(t){return!1}})(),y="string"==typeof t.wasmPaths?t.wasmPaths:void 0,b=d(!1,i),m=d(o,i),g="object"==typeof t.wasmPaths?t.wasmPaths[m]:void 0;let v=!1;const w=[];if(e>0&&w.push(new Promise((t=>{setTimeout((()=>{v=!0,t()}),e)}))),w.push(new Promise(((t,e)=>{const r=i?s:c.default,a={locateFile:(t,e)=>i&&t.endsWith(".worker.js")&&"undefined"!=typeof Blob?URL.createObjectURL(new Blob([n(154)],{type:"text/javascript"})):t===b?null!=g?g:(null!=y?y:e)+m:e+t};if(i)if("undefined"==typeof Blob)a.mainScriptUrlOrBlob=u.join("/","ort-wasm-threaded.js");else{const t=`var ortWasmThreaded=(function(){var _scriptDir;return ${r.toString()}})();`;a.mainScriptUrlOrBlob=new Blob([t],{type:"text/javascript"})}r(a).then((e=>{p=!1,f=!0,l=e,t()}),(t=>{p=!1,h=!0,e(t)}))}))),await Promise.race(w),v)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)},e.getInstance=()=>{if(f&&l)return l;throw new Error("WebAssembly is not initialized yet.")},e.dispose=()=>{var t;!f||p||h||(p=!0,null===(t=l.PThread)||void 0===t||t.terminateAllThreads(),l=void 0,p=!1,f=!1,h=!0)}},154:t=>{"use strict";t.exports=\'"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};\\n\'},384:()=>{},993:()=>{},908:()=>{},953:()=>{},925:()=>{},449:()=>{}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";const t=n(349),e=n(361);self.onmessage=n=>{switch(n.data.type){case"init-wasm":(0,e.initializeWebAssembly)(n.data.in).then((()=>postMessage({type:"init-wasm"})),(t=>postMessage({type:"init-wasm",err:t})));break;case"init-ort":try{const{numThreads:e,loggingLevel:r}=n.data.in;(0,t.initOrt)(e,r),postMessage({type:"init-ort"})}catch(t){postMessage({type:"init-ort",err:t})}break;case"create_allocate":try{const{model:e}=n.data.in,r=(0,t.createSessionAllocate)(e);postMessage({type:"create_allocate",out:r})}catch(t){postMessage({type:"create_allocate",err:t})}break;case"create_finalize":try{const{modeldata:e,options:r}=n.data.in,a=(0,t.createSessionFinalize)(e,r);postMessage({type:"create_finalize",out:a})}catch(t){postMessage({type:"create_finalize",err:t})}break;case"create":try{const{model:e,options:r}=n.data.in,a=(0,t.createSession)(e,r);postMessage({type:"create",out:a})}catch(t){postMessage({type:"create",err:t})}break;case"release":try{const e=n.data.in;(0,t.releaseSession)(e),postMessage({type:"release"})}catch(t){postMessage({type:"release",err:t})}break;case"run":try{const{sessionId:e,inputIndices:r,inputs:a,outputIndices:i,options:o}=n.data.in,u=(0,t.run)(e,r,a,i,o);postMessage({type:"run",out:u},(0,t.extractTransferableBuffers)(u))}catch(t){postMessage({type:"run",err:t})}break;case"end-profiling":try{const e=n.data.in;(0,t.endProfiling)(e),postMessage({type:"end-profiling"})}catch(t){postMessage({type:"end-profiling",err:t})}}}})()})();\n',"Worker",void 0,void 0)}},477:n=>{n.exports=function(e,t,r,Ee){var Te=self||window;try{try{var Re;try{Re=new Te.Blob([e])}catch{(Re=new(Te.BlobBuilder||Te.WebKitBlobBuilder||Te.MozBlobBuilder||Te.MSBlobBuilder)).append(e),Re=Re.getBlob()}var Me=Te.URL||Te.webkitURL,Ve=Me.createObjectURL(Re),De=new Te[t](Ve,r);return Me.revokeObjectURL(Ve),De}catch{return new Te[t]("data:application/javascript,".concat(encodeURIComponent(e)),r)}}catch{if(!Ee)throw Error("Inline worker is not supported");return new Te[t](Ee,r)}}},4154:n=>{n.exports=`"use strict";var e={},t="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node;if(t){var r=require("worker_threads"),a=r.parentPort;a.on("message",(e=>onmessage({data:e})));var o=require("fs");Object.assign(global,{self:global,require:require,Module:e,location:{href:__filename},Worker:r.Worker,importScripts:function(e){(0,eval)(o.readFileSync(e,"utf8"))},postMessage:function(e){a.postMessage(e)},performance:global.performance||{now:function(){return Date.now()}}})}var s=!1,n=[],i=function(){var e=Array.prototype.slice.call(arguments).join(" ");t?o.writeSync(2,e+"\\n"):console.error(e)};self.alert=function(){var t=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:t,threadId:e._pthread_self()})},e.instantiateWasm=(t,r)=>{var a=new WebAssembly.Instance(e.wasmModule,t);return r(a),e.wasmModule=null,a.exports},self.onunhandledrejection=e=>{throw e.reason??e},self.onmessage=t=>{try{if("load"===t.data.cmd){if(e.wasmModule=t.data.wasmModule,e.wasmMemory=t.data.wasmMemory,e.buffer=e.wasmMemory.buffer,e.ENVIRONMENT_IS_PTHREAD=!0,"string"==typeof t.data.urlOrBlob)importScripts(t.data.urlOrBlob);else{var r=URL.createObjectURL(t.data.urlOrBlob);importScripts(r),URL.revokeObjectURL(r)}ortWasmThreaded(e).then((function(t){e=t}))}else if("run"===t.data.cmd){e.__performance_now_clock_drift=performance.now()-t.data.time,e.__emscripten_thread_init(t.data.pthread_ptr,0,0,1),e.establishStackSpace(),e.PThread.receiveObjectTransfer(t.data),e.PThread.threadInitTLS(),s||(n.forEach((t=>{e.executeNotifiedProxyingQueue(t)})),n=[],s=!0);try{e.invokeEntryPoint(t.data.start_routine,t.data.arg)}catch(t){if("unwind"!=t){if(!(t instanceof e.ExitStatus))throw t;e.keepRuntimeAlive()||e.__emscripten_thread_exit(t.status)}}}else"cancel"===t.data.cmd?e._pthread_self()&&e.__emscripten_thread_exit(-1):"setimmediate"===t.data.target||("processProxyingQueue"===t.data.cmd?s?e.executeNotifiedProxyingQueue(t.data.queue):n.push(t.data.queue):(i("worker.js received unknown command "+t.data.cmd),i(t.data)))}catch(t){throw i("worker.js onmessage() captured an uncaught exception: "+t),t&&t.stack&&i(t.stack),e.__emscripten_thread_crashed&&e.__emscripten_thread_crashed(),t}};
`},1670:n=>{n.exports=__WEBPACK_EXTERNAL_MODULE__1670__},7067:()=>{},1296:()=>{},1384:()=>{},3993:()=>{},908:()=>{},6953:()=>{},9925:()=>{},2806:()=>{},6449:()=>{},2850:()=>{},5381:()=>{},5686:(n,e,t)=>{t.r(e),t.d(e,{flatbuffers:()=>r});var r={};r.Offset,r.Table,r.SIZEOF_SHORT=2,r.SIZEOF_INT=4,r.FILE_IDENTIFIER_LENGTH=4,r.SIZE_PREFIX_LENGTH=4,r.Encoding={UTF8_BYTES:1,UTF16_STRING:2},r.int32=new Int32Array(2),r.float32=new Float32Array(r.int32.buffer),r.float64=new Float64Array(r.int32.buffer),r.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,r.Long=function(Ee,Te){this.low=0|Ee,this.high=0|Te},r.Long.create=function(Ee,Te){return Ee==0&&Te==0?r.Long.ZERO:new r.Long(Ee,Te)},r.Long.prototype.toFloat64=function(){return(this.low>>>0)+4294967296*this.high},r.Long.prototype.equals=function(Ee){return this.low==Ee.low&&this.high==Ee.high},r.Long.ZERO=new r.Long(0,0),r.Builder=function(Ee){if(Ee)Te=Ee;else var Te=1024;this.bb=r.ByteBuffer.allocate(Te),this.space=Te,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},r.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},r.Builder.prototype.forceDefaults=function(Ee){this.force_defaults=Ee},r.Builder.prototype.dataBuffer=function(){return this.bb},r.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},r.Builder.prototype.prep=function(Ee,Te){Ee>this.minalign&&(this.minalign=Ee);for(var Re=1+~(this.bb.capacity()-this.space+Te)&Ee-1;this.space<Re+Ee+Te;){var Me=this.bb.capacity();this.bb=r.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-Me}this.pad(Re)},r.Builder.prototype.pad=function(Ee){for(var Te=0;Te<Ee;Te++)this.bb.writeInt8(--this.space,0)},r.Builder.prototype.writeInt8=function(Ee){this.bb.writeInt8(this.space-=1,Ee)},r.Builder.prototype.writeInt16=function(Ee){this.bb.writeInt16(this.space-=2,Ee)},r.Builder.prototype.writeInt32=function(Ee){this.bb.writeInt32(this.space-=4,Ee)},r.Builder.prototype.writeInt64=function(Ee){this.bb.writeInt64(this.space-=8,Ee)},r.Builder.prototype.writeFloat32=function(Ee){this.bb.writeFloat32(this.space-=4,Ee)},r.Builder.prototype.writeFloat64=function(Ee){this.bb.writeFloat64(this.space-=8,Ee)},r.Builder.prototype.addInt8=function(Ee){this.prep(1,0),this.writeInt8(Ee)},r.Builder.prototype.addInt16=function(Ee){this.prep(2,0),this.writeInt16(Ee)},r.Builder.prototype.addInt32=function(Ee){this.prep(4,0),this.writeInt32(Ee)},r.Builder.prototype.addInt64=function(Ee){this.prep(8,0),this.writeInt64(Ee)},r.Builder.prototype.addFloat32=function(Ee){this.prep(4,0),this.writeFloat32(Ee)},r.Builder.prototype.addFloat64=function(Ee){this.prep(8,0),this.writeFloat64(Ee)},r.Builder.prototype.addFieldInt8=function(Ee,Te,Re){(this.force_defaults||Te!=Re)&&(this.addInt8(Te),this.slot(Ee))},r.Builder.prototype.addFieldInt16=function(Ee,Te,Re){(this.force_defaults||Te!=Re)&&(this.addInt16(Te),this.slot(Ee))},r.Builder.prototype.addFieldInt32=function(Ee,Te,Re){(this.force_defaults||Te!=Re)&&(this.addInt32(Te),this.slot(Ee))},r.Builder.prototype.addFieldInt64=function(Ee,Te,Re){!this.force_defaults&&Te.equals(Re)||(this.addInt64(Te),this.slot(Ee))},r.Builder.prototype.addFieldFloat32=function(Ee,Te,Re){(this.force_defaults||Te!=Re)&&(this.addFloat32(Te),this.slot(Ee))},r.Builder.prototype.addFieldFloat64=function(Ee,Te,Re){(this.force_defaults||Te!=Re)&&(this.addFloat64(Te),this.slot(Ee))},r.Builder.prototype.addFieldOffset=function(Ee,Te,Re){(this.force_defaults||Te!=Re)&&(this.addOffset(Te),this.slot(Ee))},r.Builder.prototype.addFieldStruct=function(Ee,Te,Re){Te!=Re&&(this.nested(Te),this.slot(Ee))},r.Builder.prototype.nested=function(Ee){if(Ee!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},r.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},r.Builder.prototype.slot=function(Ee){this.vtable[Ee]=this.offset()},r.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},r.Builder.growByteBuffer=function(Ee){var Te=Ee.capacity();if(3221225472&Te)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var Re=Te<<1,Me=r.ByteBuffer.allocate(Re);return Me.setPosition(Re-Te),Me.bytes().set(Ee.bytes(),Re-Te),Me},r.Builder.prototype.addOffset=function(Ee){this.prep(r.SIZEOF_INT,0),this.writeInt32(this.offset()-Ee+r.SIZEOF_INT)},r.Builder.prototype.startObject=function(Ee){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=Ee;for(var Te=0;Te<Ee;Te++)this.vtable[Te]=0;this.isNested=!0,this.object_start=this.offset()},r.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var Ee=this.offset(),Te=this.vtable_in_use-1;Te>=0&&this.vtable[Te]==0;Te--);for(var Re=Te+1;Te>=0;Te--)this.addInt16(this.vtable[Te]!=0?Ee-this.vtable[Te]:0);this.addInt16(Ee-this.object_start);var Me=(Re+2)*r.SIZEOF_SHORT;this.addInt16(Me);var Ve=0,De=this.space;e:for(Te=0;Te<this.vtables.length;Te++){var $e=this.bb.capacity()-this.vtables[Te];if(Me==this.bb.readInt16($e)){for(var Oe=r.SIZEOF_SHORT;Oe<Me;Oe+=r.SIZEOF_SHORT)if(this.bb.readInt16(De+Oe)!=this.bb.readInt16($e+Oe))continue e;Ve=this.vtables[Te];break}}return Ve?(this.space=this.bb.capacity()-Ee,this.bb.writeInt32(this.space,Ve-Ee)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-Ee,this.offset()-Ee)),this.isNested=!1,Ee},r.Builder.prototype.finish=function(Ee,Te,Re){var Me=Re?r.SIZE_PREFIX_LENGTH:0;if(Te){var Ve=Te;if(this.prep(this.minalign,r.SIZEOF_INT+r.FILE_IDENTIFIER_LENGTH+Me),Ve.length!=r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+r.FILE_IDENTIFIER_LENGTH);for(var De=r.FILE_IDENTIFIER_LENGTH-1;De>=0;De--)this.writeInt8(Ve.charCodeAt(De))}this.prep(this.minalign,r.SIZEOF_INT+Me),this.addOffset(Ee),Me&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},r.Builder.prototype.finishSizePrefixed=function(Ee,Te){this.finish(Ee,Te,!0)},r.Builder.prototype.requiredField=function(Ee,Te){var Re=this.bb.capacity()-Ee,Me=Re-this.bb.readInt32(Re);if(this.bb.readInt16(Me+Te)==0)throw new Error("FlatBuffers: field "+Te+" must be set")},r.Builder.prototype.startVector=function(Ee,Te,Re){this.notNested(),this.vector_num_elems=Te,this.prep(r.SIZEOF_INT,Ee*Te),this.prep(Re,Ee*Te)},r.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},r.Builder.prototype.createString=function(Ee){if(Ee instanceof Uint8Array)var Te=Ee;else{Te=[];for(var Re=0;Re<Ee.length;){var Me,Ve=Ee.charCodeAt(Re++);(Me=Ve<55296||Ve>=56320?Ve:(Ve<<10)+Ee.charCodeAt(Re++)+-56613888)<128?Te.push(Me):(Me<2048?Te.push(Me>>6&31|192):(Me<65536?Te.push(Me>>12&15|224):Te.push(Me>>18&7|240,Me>>12&63|128),Te.push(Me>>6&63|128)),Te.push(63&Me|128))}}this.addInt8(0),this.startVector(1,Te.length,1),this.bb.setPosition(this.space-=Te.length),Re=0;for(var De=this.space,$e=this.bb.bytes();Re<Te.length;Re++)$e[De++]=Te[Re];return this.endVector()},r.Builder.prototype.createLong=function(Ee,Te){return r.Long.create(Ee,Te)},r.ByteBuffer=function(Ee){this.bytes_=Ee,this.position_=0},r.ByteBuffer.allocate=function(Ee){return new r.ByteBuffer(new Uint8Array(Ee))},r.ByteBuffer.prototype.clear=function(){this.position_=0},r.ByteBuffer.prototype.bytes=function(){return this.bytes_},r.ByteBuffer.prototype.position=function(){return this.position_},r.ByteBuffer.prototype.setPosition=function(Ee){this.position_=Ee},r.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},r.ByteBuffer.prototype.readInt8=function(Ee){return this.readUint8(Ee)<<24>>24},r.ByteBuffer.prototype.readUint8=function(Ee){return this.bytes_[Ee]},r.ByteBuffer.prototype.readInt16=function(Ee){return this.readUint16(Ee)<<16>>16},r.ByteBuffer.prototype.readUint16=function(Ee){return this.bytes_[Ee]|this.bytes_[Ee+1]<<8},r.ByteBuffer.prototype.readInt32=function(Ee){return this.bytes_[Ee]|this.bytes_[Ee+1]<<8|this.bytes_[Ee+2]<<16|this.bytes_[Ee+3]<<24},r.ByteBuffer.prototype.readUint32=function(Ee){return this.readInt32(Ee)>>>0},r.ByteBuffer.prototype.readInt64=function(Ee){return new r.Long(this.readInt32(Ee),this.readInt32(Ee+4))},r.ByteBuffer.prototype.readUint64=function(Ee){return new r.Long(this.readUint32(Ee),this.readUint32(Ee+4))},r.ByteBuffer.prototype.readFloat32=function(Ee){return r.int32[0]=this.readInt32(Ee),r.float32[0]},r.ByteBuffer.prototype.readFloat64=function(Ee){return r.int32[r.isLittleEndian?0:1]=this.readInt32(Ee),r.int32[r.isLittleEndian?1:0]=this.readInt32(Ee+4),r.float64[0]},r.ByteBuffer.prototype.writeInt8=function(Ee,Te){this.bytes_[Ee]=Te},r.ByteBuffer.prototype.writeUint8=function(Ee,Te){this.bytes_[Ee]=Te},r.ByteBuffer.prototype.writeInt16=function(Ee,Te){this.bytes_[Ee]=Te,this.bytes_[Ee+1]=Te>>8},r.ByteBuffer.prototype.writeUint16=function(Ee,Te){this.bytes_[Ee]=Te,this.bytes_[Ee+1]=Te>>8},r.ByteBuffer.prototype.writeInt32=function(Ee,Te){this.bytes_[Ee]=Te,this.bytes_[Ee+1]=Te>>8,this.bytes_[Ee+2]=Te>>16,this.bytes_[Ee+3]=Te>>24},r.ByteBuffer.prototype.writeUint32=function(Ee,Te){this.bytes_[Ee]=Te,this.bytes_[Ee+1]=Te>>8,this.bytes_[Ee+2]=Te>>16,this.bytes_[Ee+3]=Te>>24},r.ByteBuffer.prototype.writeInt64=function(Ee,Te){this.writeInt32(Ee,Te.low),this.writeInt32(Ee+4,Te.high)},r.ByteBuffer.prototype.writeUint64=function(Ee,Te){this.writeUint32(Ee,Te.low),this.writeUint32(Ee+4,Te.high)},r.ByteBuffer.prototype.writeFloat32=function(Ee,Te){r.float32[0]=Te,this.writeInt32(Ee,r.int32[0])},r.ByteBuffer.prototype.writeFloat64=function(Ee,Te){r.float64[0]=Te,this.writeInt32(Ee,r.int32[r.isLittleEndian?0:1]),this.writeInt32(Ee+4,r.int32[r.isLittleEndian?1:0])},r.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+r.SIZEOF_INT+r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var Ee="",Te=0;Te<r.FILE_IDENTIFIER_LENGTH;Te++)Ee+=String.fromCharCode(this.readInt8(this.position_+r.SIZEOF_INT+Te));return Ee},r.ByteBuffer.prototype.__offset=function(Ee,Te){var Re=Ee-this.readInt32(Ee);return Te<this.readInt16(Re)?this.readInt16(Re+Te):0},r.ByteBuffer.prototype.__union=function(Ee,Te){return Ee.bb_pos=Te+this.readInt32(Te),Ee.bb=this,Ee},r.ByteBuffer.prototype.__string=function(Ee,Te){Ee+=this.readInt32(Ee);var Re=this.readInt32(Ee),Me="",Ve=0;if(Ee+=r.SIZEOF_INT,Te===r.Encoding.UTF8_BYTES)return this.bytes_.subarray(Ee,Ee+Re);for(;Ve<Re;){var De,$e=this.readUint8(Ee+Ve++);if($e<192)De=$e;else{var Oe=this.readUint8(Ee+Ve++);if($e<224)De=(31&$e)<<6|63&Oe;else{var Ce=this.readUint8(Ee+Ve++);De=$e<240?(15&$e)<<12|(63&Oe)<<6|63&Ce:(7&$e)<<18|(63&Oe)<<12|(63&Ce)<<6|63&this.readUint8(Ee+Ve++)}}De<65536?Me+=String.fromCharCode(De):(De-=65536,Me+=String.fromCharCode(55296+(De>>10),56320+(1023&De)))}return Me},r.ByteBuffer.prototype.__indirect=function(Ee){return Ee+this.readInt32(Ee)},r.ByteBuffer.prototype.__vector=function(Ee){return Ee+this.readInt32(Ee)+r.SIZEOF_INT},r.ByteBuffer.prototype.__vector_len=function(Ee){return this.readInt32(Ee+this.readInt32(Ee))},r.ByteBuffer.prototype.__has_identifier=function(Ee){if(Ee.length!=r.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+r.FILE_IDENTIFIER_LENGTH);for(var Te=0;Te<r.FILE_IDENTIFIER_LENGTH;Te++)if(Ee.charCodeAt(Te)!=this.readInt8(this.position_+r.SIZEOF_INT+Te))return!1;return!0},r.ByteBuffer.prototype.createLong=function(Ee,Te){return r.Long.create(Ee,Te)}}},__webpack_module_cache__={};function __webpack_require__(n){var e=__webpack_module_cache__[n];if(e!==void 0)return e.exports;var t=__webpack_module_cache__[n]={exports:{}};return __webpack_modules__[n].call(t.exports,t,t.exports,__webpack_require__),t.exports}__webpack_require__.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(n,e)=>{for(var t in e)__webpack_require__.o(e,t)&&!__webpack_require__.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},__webpack_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),__webpack_require__.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),__webpack_require__.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(6018);return __webpack_exports__})())}(ortWeb_min$1)),ortWeb_min$1.exports}var ortWeb_minExports=requireOrtWeb_min();const ortWeb_min=getDefaultExportFromCjs(ortWeb_minExports),ONNX_WEB=_mergeNamespaces({__proto__:null,default:ortWeb_min},[ortWeb_minExports]);let ONNX;const executionProviders=["wasm"];typeof process<"u"&&process?.release?.name==="node"?(ONNX=sharp??ONNX_NODE,executionProviders.unshift("cpu")):(ONNX=ortWeb_min??ONNX_WEB,typeof navigator<"u"&&/iP(hone|od|ad).+16_4.+AppleWebKit/.test(navigator.userAgent)&&(ONNX.env.wasm.simd=!1));const{env:onnx_env}=ONNX,VERSION="2.17.2",WEB_CACHE_AVAILABLE=typeof self<"u"&&"caches"in self,FS_AVAILABLE=!isEmpty(sharp),PATH_AVAILABLE=!isEmpty(sharp),RUNNING_LOCALLY=FS_AVAILABLE&&PATH_AVAILABLE,__dirname=RUNNING_LOCALLY?sharp.dirname(sharp.dirname(sharp.fileURLToPath(import.meta.url))):"./",DEFAULT_CACHE_DIR=RUNNING_LOCALLY?sharp.join(__dirname,"/.cache/"):null,DEFAULT_LOCAL_MODEL_PATH="/models/",localModelPath=RUNNING_LOCALLY?sharp.join(__dirname,DEFAULT_LOCAL_MODEL_PATH):DEFAULT_LOCAL_MODEL_PATH;onnx_env?.wasm&&(onnx_env.wasm.wasmPaths=RUNNING_LOCALLY?sharp.join(__dirname,"/dist/"):`https://cdn.jsdelivr.net/npm/@xenova/transformers@${VERSION}/dist/`);const env$1={version:VERSION,remoteHost:"https://huggingface.co/",remotePathTemplate:"{model}/resolve/{revision}/",localModelPath,useFS:FS_AVAILABLE,useBrowserCache:WEB_CACHE_AVAILABLE,useFSCache:FS_AVAILABLE,cacheDir:DEFAULT_CACHE_DIR};function isEmpty(n){return Object.keys(n).length===0}var define_process_env_default={};class FileResponse{_CONTENT_TYPE_MAP={txt:"text/plain",html:"text/html",css:"text/css",js:"text/javascript",json:"application/json",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif"};constructor(e){if(this.filePath=e,this.headers=new Headers,this.exists=sharp.existsSync(e),this.exists){this.status=200,this.statusText="OK";let t=sharp.statSync(e);this.headers.set("content-length",t.size.toString()),this.updateContentType();let r=this;this.body=new ReadableStream({start(Ee){r.arrayBuffer().then(Te=>{Ee.enqueue(new Uint8Array(Te)),Ee.close()})}})}else this.status=404,this.statusText="Not Found",this.body=null}updateContentType(){const e=this.filePath.toString().split(".").pop().toLowerCase();this.headers.set("content-type",this._CONTENT_TYPE_MAP[e]??"application/octet-stream")}clone(){let e=new FileResponse(this.filePath);return e.exists=this.exists,e.status=this.status,e.statusText=this.statusText,e.headers=new Headers(this.headers),e}async arrayBuffer(){return(await sharp.promises.readFile(this.filePath)).buffer}async blob(){const e=await sharp.promises.readFile(this.filePath);return new Blob([e],{type:this.headers.get("content-type")})}async text(){return await sharp.promises.readFile(this.filePath,"utf8")}async json(){return JSON.parse(await this.text())}}function isValidUrl(n,e=null,t=null){let r;try{r=new URL(n)}catch{return!1}return!(e&&!e.includes(r.protocol)||t&&!t.includes(r.hostname))}async function getFile(n){if(env$1.useFS&&!isValidUrl(n,["http:","https:","blob:"]))return new FileResponse(n);if(typeof process<"u"&&process?.release?.name==="node"){const e=!!define_process_env_default?.TESTING_REMOTELY,t=env$1.version,r=new Headers;if(r.set("User-Agent",`transformers.js/${t}; is_ci/${e};`),isValidUrl(n,["http:","https:"],["huggingface.co","hf.co"])){const Te=define_process_env_default?.HF_TOKEN??define_process_env_default?.HF_ACCESS_TOKEN;Te&&r.set("Authorization",`Bearer ${Te}`)}return fetch(n,{headers:r})}else return fetch(n)}const ERROR_MAPPING={400:"Bad request error occurred while trying to load file",401:"Unauthorized access to file",403:"Forbidden access to file",404:"Could not locate file",408:"Request timeout error occurred while trying to load file",500:"Internal server error error occurred while trying to load file",502:"Bad gateway error occurred while trying to load file",503:"Service unavailable error occurred while trying to load file",504:"Gateway timeout error occurred while trying to load file"};function handleError(n,e,t){if(!t)return null;const r=ERROR_MAPPING[n]??`Error (${n}) occurred while trying to load file`;throw Error(`${r}: "${e}".`)}class FileCache{constructor(e){this.path=e}async match(e){let t=sharp.join(this.path,e),r=new FileResponse(t);if(r.exists)return r}async put(e,t){const r=Buffer.from(await t.arrayBuffer());let Ee=sharp.join(this.path,e);try{await sharp.promises.mkdir(sharp.dirname(Ee),{recursive:!0}),await sharp.promises.writeFile(Ee,r)}catch(Te){console.warn("An error occurred while writing the file to cache:",Te)}}}async function tryCache(n,...e){for(let t of e)try{let r=await n.match(t);if(r)return r}catch{continue}}async function getModelFile(n,e,t=!0,r={}){dispatchCallback(r.progress_callback,{status:"initiate",name:n,file:e});let Ee;if(!Ee&&env$1.useBrowserCache){if(typeof caches>"u")throw Error("Browser cache is not available in this environment.");try{Ee=await caches.open("transformers-cache")}catch(Ge){console.warn("An error occurred while opening the browser cache:",Ge)}}!Ee&&env$1.useFSCache&&(Ee=new FileCache(r.cache_dir??env$1.cacheDir));const Te=r.revision??"main";let Re=pathJoin(n,e),Me=pathJoin(env$1.localModelPath,Re),Ve=pathJoin(env$1.remoteHost,env$1.remotePathTemplate.replaceAll("{model}",n).replaceAll("{revision}",encodeURIComponent(Te)),e),De=Te==="main"?Re:pathJoin(n,Te,e),$e,Oe=Ee instanceof FileCache?De:Ve,Ce=!1,Be;Ee&&(Be=await tryCache(Ee,Me,Oe));const Ue=Be!==void 0;if(Be===void 0){if(isValidUrl(Re,["http:","https:"])){if(r.local_files_only)throw new Error(`\`local_files_only=true\`, but attempted to load a remote file from: ${Re}.`)}else try{Be=await getFile(Me),$e=Me}catch(Ye){console.warn(`Unable to load from local path "${Me}": "${Ye}"`)}if(Be===void 0||Be.status===404){if(r.local_files_only){if(t)throw Error(`\`local_files_only=true\` or \`env.allowRemoteModels=false\` and file was not found locally at "${Me}".`);return null}if(Be=await getFile(Ve),Be.status!==200)return handleError(Be.status,Ve,t);$e=Oe}Ce=Ee&&typeof Response<"u"&&Be instanceof Response&&Be.status===200}dispatchCallback(r.progress_callback,{status:"download",name:n,file:e});const We={status:"progress",name:n,file:e};let He;return r.progress_callback?Ue&&typeof navigator<"u"&&/firefox/i.test(navigator.userAgent)?(He=new Uint8Array(await Be.arrayBuffer()),dispatchCallback(r.progress_callback,{...We,progress:100,loaded:He.length,total:He.length})):He=await readResponse(Be,Ge=>{dispatchCallback(r.progress_callback,{...We,...Ge})}):He=new Uint8Array(await Be.arrayBuffer()),Ce&&$e&&await Ee.match($e)===void 0&&await Ee.put($e,new Response(He,{headers:Be.headers})).catch(Ge=>{console.warn(`Unable to add response to browser cache: ${Ge}.`)}),dispatchCallback(r.progress_callback,{status:"done",name:n,file:e}),He}async function getModelJSON(n,e,t=!0,r={}){let Ee=await getModelFile(n,e,t,r);if(Ee===null)return{};let Re=new TextDecoder("utf-8").decode(Ee);return JSON.parse(Re)}async function readResponse(n,e){const t=n.headers.get("Content-Length");t===null&&console.warn("Unable to determine content-length from response headers. Will expand buffer when needed.");let r=parseInt(t??"0"),Ee=new Uint8Array(r),Te=0;const Re=n.body.getReader();async function Me(){const{done:Ve,value:De}=await Re.read();if(Ve)return;let $e=Te+De.length;if($e>r){r=$e;let Ce=new Uint8Array(r);Ce.set(Ee),Ee=Ce}Ee.set(De,Te),Te=$e;const Oe=Te/r*100;return e({progress:Oe,loaded:Te,total:r}),Me()}return await Me(),Ee}function pathJoin(...n){return n=n.map((e,t)=>(t&&(e=e.replace(new RegExp("^/"),"")),t!==n.length-1&&(e=e.replace(new RegExp("/$"),"")),e)),n.join("/")}function interpolate_data(n,[e,t,r],[Ee,Te],Re="bilinear",Me=!1){const Ve=Te/r,De=Ee/t,$e=new n.constructor(Ee*Te*e),Oe=t*r,Ce=Ee*Te;for(let Be=0;Be<Ee;++Be)for(let Ue=0;Ue<Te;++Ue){const We=Be*Te+Ue,He=(Ue+.5)/Ve-.5,Ge=(Be+.5)/De-.5;let Ye=Math.floor(He),Je=Math.floor(Ge);const Ze=Math.min(Ye+1,r-1),fn=Math.min(Je+1,t-1);Ye=Math.max(Ye,0),Je=Math.max(Je,0);const yn=He-Ye,mn=Ge-Je,pn=(1-yn)*(1-mn),un=yn*(1-mn),bn=(1-yn)*mn,gn=yn*mn,xn=Je*r,En=fn*r,Pn=xn+Ye,Ln=xn+Ze,Cn=En+Ye,Dn=En+Ze;for(let Un=0;Un<e;++Un){const Wn=Un*Oe;$e[Un*Ce+We]=pn*n[Wn+Pn]+un*n[Wn+Ln]+bn*n[Wn+Cn]+gn*n[Wn+Dn]}}return $e}function permute_data(n,e,t){const r=new Array(t.length),Ee=new Array(t.length);for(let Me=t.length-1,Ve=1;Me>=0;--Me)Ee[Me]=Ve,r[Me]=e[t[Me]],Ve*=r[Me];const Te=t.map((Me,Ve)=>Ee[t.indexOf(Ve)]),Re=new n.constructor(n.length);for(let Me=0;Me<n.length;++Me){let Ve=0;for(let De=e.length-1,$e=Me;De>=0;--De)Ve+=$e%e[De]*Te[De],$e=Math.floor($e/e[De]);Re[Ve]=n[Me]}return[Re,r]}function softmax(n){const e=max(n)[0],t=n.map(Te=>Math.exp(Te-e)),r=t.reduce((Te,Re)=>Te+Re,0);return t.map(Te=>Te/r)}function log_softmax(n){return softmax(n).map(r=>Math.log(r))}function getTopItems(n,e=0){return n=Array.from(n).map((t,r)=>[r,t]).sort((t,r)=>r[1]-t[1]),e!==null&&e>0&&(n=n.slice(0,e)),n}function min(n){if(n.length===0)throw Error("Array must not be empty");let e=n[0],t=0;for(let r=1;r<n.length;++r)n[r]<e&&(e=n[r],t=r);return[e,t]}function max(n){if(n.length===0)throw Error("Array must not be empty");let e=n[0],t=0;for(let r=1;r<n.length;++r)n[r]>e&&(e=n[r],t=r);return[Number(e),t]}function isPowerOfTwo(n){return n>0&&(n&n-1)===0}class P2FFT{constructor(e){if(this.size=e|0,this.size<=1||!isPowerOfTwo(this.size))throw new Error("FFT size must be a power of two larger than 1");this._csize=e<<1,this.table=new Float64Array(this.size*2);for(let r=0;r<this.table.length;r+=2){const Ee=Math.PI*r/this.size;this.table[r]=Math.cos(Ee),this.table[r+1]=-Math.sin(Ee)}let t=0;for(let r=1;this.size>r;r<<=1)++t;this._width=t%2===0?t-1:t,this._bitrev=new Int32Array(1<<this._width);for(let r=0;r<this._bitrev.length;++r){this._bitrev[r]=0;for(let Ee=0;Ee<this._width;Ee+=2){const Te=this._width-Ee-2;this._bitrev[r]|=(r>>>Ee&3)<<Te}}}createComplexArray(){return new Float64Array(this._csize)}fromComplexArray(e,t){const r=t||new Array(e.length>>>1);for(let Ee=0;Ee<e.length;Ee+=2)r[Ee>>>1]=e[Ee];return r}toComplexArray(e,t){const r=t||this.createComplexArray();for(let Ee=0;Ee<r.length;Ee+=2)r[Ee]=e[Ee>>>1],r[Ee+1]=0;return r}transform(e,t){if(e===t)throw new Error("Input and output buffers must be different");this._transform4(e,t,1)}realTransform(e,t){if(e===t)throw new Error("Input and output buffers must be different");this._realTransform4(e,t,1)}inverseTransform(e,t){if(e===t)throw new Error("Input and output buffers must be different");this._transform4(e,t,-1);for(let r=0;r<e.length;++r)e[r]/=this.size}_transform4(e,t,r){const Ee=this._csize;let Re=1<<this._width,Me=Ee/Re<<1,Ve,De;const $e=this._bitrev;if(Me===4)for(Ve=0,De=0;Ve<Ee;Ve+=Me,++De){const Ce=$e[De];this._singleTransform2(t,e,Ve,Ce,Re)}else for(Ve=0,De=0;Ve<Ee;Ve+=Me,++De){const Ce=$e[De];this._singleTransform4(t,e,Ve,Ce,Re,r)}const Oe=this.table;for(Re>>=2;Re>=2;Re>>=2){Me=Ee/Re<<1;const Ce=Me>>>2;for(Ve=0;Ve<Ee;Ve+=Me){const Be=Ve+Ce-1;for(let Ue=Ve,We=0;Ue<Be;Ue+=2,We+=Re){const He=Ue,Ge=He+Ce,Ye=Ge+Ce,Je=Ye+Ce,Ze=e[He],fn=e[He+1],yn=e[Ge],mn=e[Ge+1],pn=e[Ye],un=e[Ye+1],bn=e[Je],gn=e[Je+1],xn=Oe[We],En=r*Oe[We+1],Pn=yn*xn-mn*En,Ln=yn*En+mn*xn,Cn=Oe[2*We],Dn=r*Oe[2*We+1],Un=pn*Cn-un*Dn,Wn=pn*Dn+un*Cn,On=Oe[3*We],$n=r*Oe[3*We+1],kn=bn*On-gn*$n,In=bn*$n+gn*On,Kn=Ze+Un,Qn=fn+Wn,rr=Ze-Un,or=fn-Wn,pr=Pn+kn,mr=Ln+In,Er=r*(Pn-kn),jr=r*(Ln-In);e[He]=Kn+pr,e[He+1]=Qn+mr,e[Ge]=rr+jr,e[Ge+1]=or-Er,e[Ye]=Kn-pr,e[Ye+1]=Qn-mr,e[Je]=rr-jr,e[Je+1]=or+Er}}}}_singleTransform2(e,t,r,Ee,Te){const Re=e[Ee],Me=e[Ee+1],Ve=e[Ee+Te],De=e[Ee+Te+1];t[r]=Re+Ve,t[r+1]=Me+De,t[r+2]=Re-Ve,t[r+3]=Me-De}_singleTransform4(e,t,r,Ee,Te,Re){const Me=Te*2,Ve=Te*3,De=e[Ee],$e=e[Ee+1],Oe=e[Ee+Te],Ce=e[Ee+Te+1],Be=e[Ee+Me],Ue=e[Ee+Me+1],We=e[Ee+Ve],He=e[Ee+Ve+1],Ge=De+Be,Ye=$e+Ue,Je=De-Be,Ze=$e-Ue,fn=Oe+We,yn=Ce+He,mn=Re*(Oe-We),pn=Re*(Ce-He);t[r]=Ge+fn,t[r+1]=Ye+yn,t[r+2]=Je+pn,t[r+3]=Ze-mn,t[r+4]=Ge-fn,t[r+5]=Ye-yn,t[r+6]=Je-pn,t[r+7]=Ze+mn}_realTransform4(e,t,r){const Ee=this._csize;let Re=1<<this._width,Me=Ee/Re<<1,Ve,De;const $e=this._bitrev;if(Me===4)for(Ve=0,De=0;Ve<Ee;Ve+=Me,++De){const Be=$e[De];this._singleRealTransform2(t,e,Ve,Be>>>1,Re>>>1)}else for(Ve=0,De=0;Ve<Ee;Ve+=Me,++De){const Be=$e[De];this._singleRealTransform4(t,e,Ve,Be>>>1,Re>>>1,r)}const Oe=this.table;for(Re>>=2;Re>=2;Re>>=2){Me=Ee/Re<<1;const Be=Me>>>1,Ue=Be>>>1,We=Ue>>>1;for(Ve=0;Ve<Ee;Ve+=Me)for(let He=0,Ge=0;He<=We;He+=2,Ge+=Re){const Ye=Ve+He,Je=Ye+Ue,Ze=Je+Ue,fn=Ze+Ue,yn=e[Ye],mn=e[Ye+1],pn=e[Je],un=e[Je+1],bn=e[Ze],gn=e[Ze+1],xn=e[fn],En=e[fn+1],Pn=yn,Ln=mn,Cn=Oe[Ge],Dn=r*Oe[Ge+1],Un=pn*Cn-un*Dn,Wn=pn*Dn+un*Cn,On=Oe[2*Ge],$n=r*Oe[2*Ge+1],kn=bn*On-gn*$n,In=bn*$n+gn*On,Kn=Oe[3*Ge],Qn=r*Oe[3*Ge+1],rr=xn*Kn-En*Qn,or=xn*Qn+En*Kn,pr=Pn+kn,mr=Ln+In,Er=Pn-kn,jr=Ln-In,Kr=Un+rr,Hr=Wn+or,xr=r*(Un-rr),nr=r*(Wn-or);if(e[Ye]=pr+Kr,e[Ye+1]=mr+Hr,e[Je]=Er+nr,e[Je+1]=jr-xr,He===0){e[Ze]=pr-Kr,e[Ze+1]=mr-Hr;continue}if(He===We)continue;const Oi=Ve+Ue-He,Ti=Ve+Be-He;e[Oi]=Er-r*nr,e[Oi+1]=-jr-r*xr,e[Ti]=pr-r*Kr,e[Ti+1]=-mr+r*Hr}}const Ce=Ee>>>1;for(let Be=2;Be<Ce;Be+=2)e[Ee-Be]=e[Be],e[Ee-Be+1]=-e[Be+1]}_singleRealTransform2(e,t,r,Ee,Te){const Re=e[Ee],Me=e[Ee+Te];t[r]=Re+Me,t[r+1]=0,t[r+2]=Re-Me,t[r+3]=0}_singleRealTransform4(e,t,r,Ee,Te,Re){const Me=Te*2,Ve=Te*3,De=e[Ee],$e=e[Ee+Te],Oe=e[Ee+Me],Ce=e[Ee+Ve],Be=De+Oe,Ue=De-Oe,We=$e+Ce,He=Re*($e-Ce);t[r]=Be+We,t[r+1]=0,t[r+2]=Ue,t[r+3]=-He,t[r+4]=Be-We,t[r+5]=0,t[r+6]=Ue,t[r+7]=He}}class NP2FFT{constructor(e){const t=2*(e-1),r=2*(2*e-1),Ee=2**Math.ceil(Math.log2(r));this.bufferSize=Ee,this._a=t;const Te=new Float64Array(r),Re=new Float64Array(Ee);this._chirpBuffer=new Float64Array(Ee),this._buffer1=new Float64Array(Ee),this._buffer2=new Float64Array(Ee),this._outBuffer1=new Float64Array(Ee),this._outBuffer2=new Float64Array(Ee);const Me=-2*Math.PI/e,Ve=Math.cos(Me),De=Math.sin(Me);for(let $e=0;$e<r>>1;++$e){const Oe=($e+1-e)**2/2,Ce=Math.sqrt(Ve**2+De**2)**Oe,Be=Oe*Math.atan2(De,Ve),Ue=2*$e;Te[Ue]=Ce*Math.cos(Be),Te[Ue+1]=Ce*Math.sin(Be),Re[Ue]=Te[Ue],Re[Ue+1]=-Te[Ue+1]}this._slicedChirpBuffer=Te.subarray(t,r),this._f=new P2FFT(Ee>>1),this._f.transform(this._chirpBuffer,Re)}_transform(e,t,r){const Ee=this._buffer1,Te=this._buffer2,Re=this._outBuffer1,Me=this._outBuffer2,Ve=this._chirpBuffer,De=this._slicedChirpBuffer,$e=this._a;if(r)for(let Oe=0;Oe<De.length;Oe+=2){const Ce=Oe+1,Be=Oe>>1,Ue=t[Be];Ee[Oe]=Ue*De[Oe],Ee[Ce]=Ue*De[Ce]}else for(let Oe=0;Oe<De.length;Oe+=2){const Ce=Oe+1;Ee[Oe]=t[Oe]*De[Oe]-t[Ce]*De[Ce],Ee[Ce]=t[Oe]*De[Ce]+t[Ce]*De[Oe]}this._f.transform(Re,Ee);for(let Oe=0;Oe<Ve.length;Oe+=2){const Ce=Oe+1;Te[Oe]=Re[Oe]*Ve[Oe]-Re[Ce]*Ve[Ce],Te[Ce]=Re[Oe]*Ve[Ce]+Re[Ce]*Ve[Oe]}this._f.inverseTransform(Me,Te);for(let Oe=0;Oe<Me.length;Oe+=2){const Ce=Me[Oe+$e],Be=Me[Oe+$e+1],Ue=De[Oe],We=De[Oe+1];e[Oe]=Ce*Ue-Be*We,e[Oe+1]=Ce*We+Be*Ue}}transform(e,t){this._transform(e,t,!1)}realTransform(e,t){this._transform(e,t,!0)}}class FFT{constructor(e){this.fft_length=e,this.isPowerOfTwo=isPowerOfTwo(e),this.isPowerOfTwo?(this.fft=new P2FFT(e),this.outputBufferSize=2*e):(this.fft=new NP2FFT(e),this.outputBufferSize=this.fft.bufferSize)}realTransform(e,t){this.fft.realTransform(e,t)}transform(e,t){this.fft.transform(e,t)}}function medianFilter(n,e){if(e%2===0||e<=0)throw new Error("Window size must be a positive odd number");const t=new n.constructor(n.length),r=new n.constructor(e),Ee=Math.floor(e/2);for(let Te=0;Te<n.length;++Te){let Re=0;for(let Me=-Ee;Me<=Ee;++Me){let Ve=Te+Me;Ve<0?Ve=Math.abs(Ve):Ve>=n.length&&(Ve=2*(n.length-1)-Ve),r[Re++]=n[Ve]}r.sort(),t[Te]=r[Ee]}return t}function round(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function bankers_round(n){const e=Math.round(n);return Math.abs(n)%1===.5?e%2===0?e:e-1:e}const DataTypeMap=Object.freeze({float32:Float32Array,float64:Float64Array,string:Array,int8:Int8Array,uint8:Uint8Array,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,int64:BigInt64Array,uint64:BigUint64Array,bool:Uint8Array}),ONNXTensor$1=ONNX.Tensor;class Tensor{dims;type;data;size;constructor(...e){return e[0]instanceof ONNXTensor$1?Object.assign(this,e[0]):Object.assign(this,new ONNXTensor$1(e[0],e[1],e[2])),new Proxy(this,{get:(t,r)=>{if(typeof r=="string"){let Ee=Number(r);if(Number.isInteger(Ee))return t._getitem(Ee)}return t[r]},set:(t,r,Ee)=>t[r]=Ee})}*[Symbol.iterator](){const[e,...t]=this.dims;if(t.length>0){const r=t.reduce((Ee,Te)=>Ee*Te);for(let Ee=0;Ee<e;++Ee)yield this._subarray(Ee,r,t)}else yield*this.data}_getitem(e){const[t,...r]=this.dims;if(e=safeIndex(e,t),r.length>0){const Ee=r.reduce((Te,Re)=>Te*Re);return this._subarray(e,Ee,r)}else return new Tensor(this.type,[this.data[e]],r)}indexOf(e){for(let t=0;t<this.data.length;++t)if(this.data[t]==e)return t;return-1}_subarray(e,t,r){const Ee=e*t,Te=(e+1)*t,Re="subarray"in this.data?this.data.subarray(Ee,Te):this.data.slice(Ee,Te);return new Tensor(this.type,Re,r)}item(){if(this.data.length!==1)throw new Error(`a Tensor with ${this.data.length} elements cannot be converted to Scalar`);return this.data[0]}tolist(){return reshape(this.data,this.dims)}sigmoid(){return this.clone().sigmoid_()}sigmoid_(){for(let e=0;e<this.data.length;++e)this.data[e]=1/(1+Math.exp(-this.data[e]));return this}mul(e){return this.clone().mul_(e)}mul_(e){for(let t=0;t<this.data.length;++t)this.data[t]*=e;return this}add(e){return this.clone().add_(e)}add_(e){for(let t=0;t<this.data.length;++t)this.data[t]+=e;return this}clone(){return new Tensor(this.type,this.data.slice(),this.dims.slice())}slice(...e){let t=[],r=[];for(let Ve=0;Ve<this.dims.length;++Ve){let De=e[Ve];if(De==null)r.push([0,this.dims[Ve]]),t.push(this.dims[Ve]);else if(typeof De=="number")De=safeIndex(De,this.dims[Ve],Ve),r.push([De,De+1]);else if(Array.isArray(De)&&De.length===2){if(De[0]>De[1])throw new Error(`Invalid slice: ${De}`);let $e=[Math.max(De[0],0),Math.min(De[1],this.dims[Ve])];r.push($e),t.push($e[1]-$e[0])}else throw new Error(`Invalid slice: ${De}`)}let Ee=r.map(([Ve,De])=>De-Ve),Te=Ee.reduce((Ve,De)=>Ve*De),Re=new this.data.constructor(Te);const Me=this.stride();for(let Ve=0;Ve<Te;++Ve){let De=0;for(let $e=Ee.length-1,Oe=Ve;$e>=0;--$e){const Ce=Ee[$e];De+=(Oe%Ce+r[$e][0])*Me[$e],Oe=Math.floor(Oe/Ce)}Re[Ve]=this.data[De]}return new Tensor(this.type,Re,t)}permute(...e){return permute(this,e)}transpose(...e){return this.permute(...e)}sum(e=null,t=!1){return this.norm(1,e,t)}norm(e="fro",t=null,r=!1){if(e==="fro")e=2;else if(typeof e=="string")throw Error(`Unsupported norm: ${e}`);if(t===null){let Re=this.data.reduce((Me,Ve)=>Me+Ve**e,0)**(1/e);return new Tensor(this.type,[Re],[])}t=safeIndex(t,this.dims.length);const Ee=this.dims.slice();Ee[t]=1;const Te=new this.data.constructor(this.data.length/this.dims[t]);for(let Re=0;Re<this.data.length;++Re){let Me=0;for(let Ve=this.dims.length-1,De=Re,$e=1;Ve>=0;--Ve){const Oe=this.dims[Ve];if(Ve!==t){const Ce=De%Oe;Me+=Ce*$e,$e*=Ee[Ve]}De=Math.floor(De/Oe)}Te[Me]+=this.data[Re]**e}if(e!==1)for(let Re=0;Re<Te.length;++Re)Te[Re]=Te[Re]**(1/e);return r||Ee.splice(t,1),new Tensor(this.type,Te,Ee)}normalize_(e=2,t=1){t=safeIndex(t,this.dims.length);const r=this.norm(e,t,!0);for(let Ee=0;Ee<this.data.length;++Ee){let Te=0;for(let Re=this.dims.length-1,Me=Ee,Ve=1;Re>=0;--Re){const De=this.dims[Re];if(Re!==t){const $e=Me%De;Te+=$e*Ve,Ve*=this.dims[Re]}Me=Math.floor(Me/De)}this.data[Ee]/=r.data[Te]}return this}normalize(e=2,t=1){return this.clone().normalize_(e,t)}stride(){return dimsToStride(this.dims)}squeeze(e=null){return new Tensor(this.type,this.data,calc_squeeze_dims(this.dims,e))}squeeze_(e=null){return this.dims=calc_squeeze_dims(this.dims,e),this}unsqueeze(e=null){return new Tensor(this.type,this.data,calc_unsqueeze_dims(this.dims,e))}unsqueeze_(e=null){return this.dims=calc_unsqueeze_dims(this.dims,e),this}flatten_(e=0,t=-1){t=(t+this.dims.length)%this.dims.length;let r=this.dims.slice(0,e),Ee=this.dims.slice(e,t+1),Te=this.dims.slice(t+1);return this.dims=[...r,Ee.reduce((Re,Me)=>Re*Me,1),...Te],this}flatten(e=0,t=-1){return this.clone().flatten_(e,t)}view(...e){let t=-1;for(let r=0;r<e.length;++r)if(e[r]===-1){if(t!==-1)throw new Error("Only one dimension can be inferred");t=r}if(t!==-1){const r=e.reduce((Ee,Te,Re)=>Re!==t?Ee*Te:Ee,1);e[t]=this.data.length/r}return new Tensor(this.type,this.data,e)}neg_(){for(let e=0;e<this.data.length;++e)this.data[e]=-this.data[e];return this}neg(){return this.clone().neg_()}clamp_(e,t){for(let r=0;r<this.data.length;++r)this.data[r]=Math.min(Math.max(this.data[r],e),t);return this}clamp(e,t){return this.clone().clamp_(e,t)}round_(){for(let e=0;e<this.data.length;++e)this.data[e]=Math.round(this.data[e]);return this}round(){return this.clone().round_()}to(e){if(this.type===e)return this;if(!DataTypeMap.hasOwnProperty(e))throw new Error(`Unsupported type: ${e}`);return new Tensor(e,DataTypeMap[e].from(this.data),this.dims)}}function reshape(n,e){const t=n.length,r=e.reduce((Te,Re)=>Te*Re);if(t!==r)throw Error(`cannot reshape array of size ${t} into shape (${e})`);let Ee=n;for(let Te=e.length-1;Te>=0;Te--)Ee=Ee.reduce((Re,Me)=>{let Ve=Re[Re.length-1];return Ve.length<e[Te]?Ve.push(Me):Re.push([Me]),Re},[[]]);return Ee[0]}function permute(n,e){const[t,r]=permute_data(n.data,n.dims,e);return new Tensor(n.type,t,r)}function interpolate(n,[e,t],r="bilinear",Ee=!1){const Te=n.dims.at(-3)??1,Re=n.dims.at(-2),Me=n.dims.at(-1);let Ve=interpolate_data(n.data,[Te,Re,Me],[e,t],r,Ee);return new Tensor(n.type,Ve,[Te,e,t])}function mean_pooling(n,e){let t=[n.dims[0],n.dims[2]],r=new n.data.constructor(t[0]*t[1]),[Ee,Te,Re]=n.dims,Me=0;for(let Ve=0;Ve<Ee;++Ve){let De=Ve*Re*Te;for(let $e=0;$e<Re;++$e){let Oe=0,Ce=0,Be=Ve*Te,Ue=De+$e;for(let He=0;He<Te;++He){let Ge=Number(e.data[Be+He]);Ce+=Ge,Oe+=n.data[Ue+He*Re]*Ge}let We=Oe/Ce;r[Me++]=We}}return new Tensor(n.type,r,t)}function calc_squeeze_dims(n,e){return n=n.slice(),e===null?n=n.filter(t=>t!==1):typeof e=="number"?n[e]===1&&n.splice(e,1):Array.isArray(e)&&(n=n.filter((t,r)=>t!==1||!e.includes(r))),n}function calc_unsqueeze_dims(n,e){return e=safeIndex(e,n.length+1),n=n.slice(),n.splice(e,0,1),n}function safeIndex(n,e,t=null){if(n<-e||n>=e)throw new Error(`IndexError: index ${n} is out of bounds for dimension${t===null?"":" "+t} with size ${e}`);return n<0&&(n=(n%e+e)%e),n}function cat(n,e=0){e=safeIndex(e,n[0].dims.length);const t=n[0].dims.slice();t[e]=n.reduce((Re,Me)=>Re+Me.dims[e],0);const r=t.reduce((Re,Me)=>Re*Me,1),Ee=new n[0].data.constructor(r),Te=n[0].type;if(e===0){let Re=0;for(let Me of n)Ee.set(Me.data,Re),Re+=Me.data.length}else{let Re=0;for(let Me=0;Me<n.length;++Me){let Ve=n[Me];for(let De=0;De<Ve.data.length;++De){let $e=0;for(let Oe=Ve.dims.length-1,Ce=De,Be=1;Oe>=0;--Oe){const Ue=Ve.dims[Oe];let We=Ce%Ue;Oe===e&&(We+=Re),$e+=We*Be,Be*=t[Oe],Ce=Math.floor(Ce/Ue)}Ee[$e]=Ve.data[De]}Re+=Ve.dims[e]}}return new Tensor(Te,Ee,t)}function stack(n,e=0){return cat(n.map(t=>t.unsqueeze(e)),e)}function std_mean(n,e=null,t=1,r=!1){if(e===null){const De=n.data.reduce((Be,Ue)=>Be+Ue,0)/n.data.length,$e=Math.sqrt(n.data.reduce((Be,Ue)=>Be+(Ue-De)**2,0)/(n.data.length-t)),Oe=new Tensor(n.type,[De],[]);return[new Tensor(n.type,[$e],[]),Oe]}e=safeIndex(e,n.dims.length);const Ee=mean(n,e,r),Te=n.dims.slice();Te[e]=1;const Re=new n.data.constructor(n.data.length/n.dims[e]);for(let Ve=0;Ve<n.data.length;++Ve){let De=0;for(let $e=n.dims.length-1,Oe=Ve,Ce=1;$e>=0;--$e){const Be=n.dims[$e];if($e!==e){const Ue=Oe%Be;De+=Ue*Ce,Ce*=Te[$e]}Oe=Math.floor(Oe/Be)}Re[De]+=(n.data[Ve]-Ee.data[De])**2}for(let Ve=0;Ve<Re.length;++Ve)Re[Ve]=Math.sqrt(Re[Ve]/(n.dims[e]-t));return r||Te.splice(e,1),[new Tensor(n.type,Re,Te),Ee]}function mean(n,e=null,t=!1){if(e===null){let Te=n.data.reduce((Re,Me)=>Re+Me,0);return new Tensor(n.type,[Te/n.data.length],[])}e=safeIndex(e,n.dims.length);const r=n.dims.slice();r[e]=1;const Ee=new n.data.constructor(n.data.length/n.dims[e]);for(let Te=0;Te<n.data.length;++Te){let Re=0;for(let Me=n.dims.length-1,Ve=Te,De=1;Me>=0;--Me){const $e=n.dims[Me];if(Me!==e){const Oe=Ve%$e;Re+=Oe*De,De*=r[Me]}Ve=Math.floor(Ve/$e)}Ee[Re]+=n.data[Te]}if(n.dims[e]!==1)for(let Te=0;Te<Ee.length;++Te)Ee[Te]=Ee[Te]/n.dims[e];return t||r.splice(e,1),new Tensor(n.type,Ee,r)}function dynamicTimeWarping(n){const[e,t]=n.dims,r=[e+1,t+1],Ee=new Tensor("float32",new Float32Array(r[0]*r[1]).fill(1/0),r),Te=new Tensor("float32",new Float32Array(r[0]*r[1]).fill(-1),r);Ee[0].data[0]=0;for(let $e=1;$e<t+1;++$e)for(let Oe=1;Oe<e+1;++Oe){const Ce=Ee[Oe-1][$e-1].item(),Be=Ee[Oe-1][$e].item(),Ue=Ee[Oe][$e-1].item();let We,He;Ce<Be&&Ce<Ue?(We=Ce,He=0):Be<Ce&&Be<Ue?(We=Be,He=1):(We=Ue,He=2),Ee[Oe].data[$e]=n[Oe-1][$e-1].item()+We,Te[Oe].data[$e]=He}let Re=e,Me=t;Te.data.fill(2,0,r[1]);for(let $e=0;$e<r[0];++$e)Te[$e].data[0]=1;let Ve=[],De=[];for(;Re>0||Me>0;)switch(Ve.push(Re-1),De.push(Me-1),Te[Re][Me].item()){case 0:--Re,--Me;break;case 1:--Re;break;case 2:--Me;break;default:throw new Error(`Internal error in dynamic time warping. Unexpected trace[${Re}, ${Me}]. Please file a bug report.`)}return Ve.reverse(),De.reverse(),[Ve,De]}function dimsToStride(n){const e=new Array(n.length);for(let t=n.length-1,r=1;t>=0;--t)e[t]=r,r*=n[t];return e}function ones(n){const e=n.reduce((t,r)=>t*r,1);return new Tensor("int64",new BigInt64Array(e).fill(1n),n)}function ones_like(n){return ones(n.dims)}function quantize_embeddings(n,e){if(n.dims.length!==2)throw new Error("The tensor must have 2 dimensions");if(n.dims.at(-1)%8!==0)throw new Error("The last dimension of the tensor must be a multiple of 8");if(!["binary","ubinary"].includes(e))throw new Error("The precision must be either 'binary' or 'ubinary'");const t=e==="binary",r=t?"int8":"uint8",Ee=t?Int8Array:Uint8Array,Te=n.data,Re=new Ee(Te.length/8);for(let Me=0;Me<Te.length;++Me){const Ve=Te[Me]>0?1:0,De=Math.floor(Me/8),$e=Me%8;Re[De]|=Ve<<7-$e,t&&$e===0&&(Re[De]-=128)}return new Tensor(r,Re,[n.dims[0],n.dims[1]/8])}class PriorityQueue{constructor(e=(t,r)=>t>r){this._heap=[],this._comparator=e}get size(){return this._heap.length}isEmpty(){return this.size===0}peek(){return this._heap[0]}push(...e){return this.extend(e)}extend(e){for(const t of e)this._heap.push(t),this._siftUp();return this.size}pop(){const e=this.peek(),t=this.size-1;return t>0&&this._swap(0,t),this._heap.pop(),this._siftDown(),e}replace(e){const t=this.peek();return this._heap[0]=e,this._siftDown(),t}_parent(e){return(e+1>>>1)-1}_left(e){return(e<<1)+1}_right(e){return e+1<<1}_greater(e,t){return this._comparator(this._heap[e],this._heap[t])}_swap(e,t){const r=this._heap[e];this._heap[e]=this._heap[t],this._heap[t]=r}_siftUp(){let e=this.size-1;for(;e>0&&this._greater(e,this._parent(e));)this._swap(e,this._parent(e)),e=this._parent(e)}_siftDown(){let e=0;for(;this._left(e)<this.size&&this._greater(this._left(e),e)||this._right(e)<this.size&&this._greater(this._right(e),e);){const t=this._right(e)<this.size&&this._greater(this._right(e),this._left(e))?this._right(e):this._left(e);this._swap(e,t),e=t}}}class CharTrie{constructor(){this.root=CharTrieNode.default()}extend(e){for(let t of e)this.push(t)}push(e){let t=this.root;for(let r of e){let Ee=t.children.get(r);Ee===void 0&&(Ee=CharTrieNode.default(),t.children.set(r,Ee)),t=Ee}t.isLeaf=!0}*commonPrefixSearch(e){let t=this.root,r="";for(let Ee=0;Ee<e.length&&t!==void 0;++Ee){const Te=e[Ee];r+=Te,t=t.children.get(Te),t!==void 0&&t.isLeaf&&(yield r)}}}class CharTrieNode{constructor(e,t){this.isLeaf=e,this.children=t}static default(){return new CharTrieNode(!1,new Map)}}class TokenLattice{constructor(e,t,r){this.sentence=e,this.len=e.length,this.bosTokenId=t,this.eosTokenId=r,this.nodes=[],this.beginNodes=Array.from({length:this.len+1},()=>[]),this.endNodes=Array.from({length:this.len+1},()=>[]);const Ee=new TokenLatticeNode(this.bosTokenId,0,0,0,0),Te=new TokenLatticeNode(this.eosTokenId,1,this.len,0,0);this.nodes.push(Ee.clone()),this.nodes.push(Te.clone()),this.beginNodes[this.len].push(Te),this.endNodes[0].push(Ee)}insert(e,t,r,Ee){const Te=this.nodes.length,Re=new TokenLatticeNode(Ee,Te,e,t,r);this.beginNodes[e].push(Re),this.endNodes[e+t].push(Re),this.nodes.push(Re)}viterbi(){const e=this.len;let t=0;for(;t<=e;){if(this.beginNodes[t].length==0)return[];for(let Me of this.beginNodes[t]){Me.prev=null;let Ve=0,De=null;for(let $e of this.endNodes[t]){const Oe=$e.backtraceScore+Me.score;(De===null||Oe>Ve)&&(De=$e.clone(),Ve=Oe)}if(De!==null)Me.prev=De,Me.backtraceScore=Ve;else return[]}++t}const r=[],Te=this.beginNodes[e][0].prev;if(Te===null)return[];let Re=Te.clone();for(;Re.prev!==null;)r.push(Re.clone()),Re=Re.clone().prev.clone();return r.reverse(),r}piece(e){return this.sentence.slice(e.pos,e.pos+e.length)}tokens(){return this.viterbi().map(t=>this.piece(t))}tokenIds(){return this.viterbi().map(t=>t.tokenId)}}class TokenLatticeNode{constructor(e,t,r,Ee,Te){this.tokenId=e,this.nodeId=t,this.pos=r,this.length=Ee,this.score=Te,this.prev=null,this.backtraceScore=0}clone(){const e=new TokenLatticeNode(this.tokenId,this.nodeId,this.pos,this.length,this.score);return e.prev=this.prev,e.backtraceScore=this.backtraceScore,e}}var TOKEN_TYPES=Object.freeze({Text:"Text",NumericLiteral:"NumericLiteral",BooleanLiteral:"BooleanLiteral",StringLiteral:"StringLiteral",Identifier:"Identifier",Equals:"Equals",OpenParen:"OpenParen",CloseParen:"CloseParen",OpenStatement:"OpenStatement",CloseStatement:"CloseStatement",OpenExpression:"OpenExpression",CloseExpression:"CloseExpression",OpenSquareBracket:"OpenSquareBracket",CloseSquareBracket:"CloseSquareBracket",OpenCurlyBracket:"OpenCurlyBracket",CloseCurlyBracket:"CloseCurlyBracket",Comma:"Comma",Dot:"Dot",Colon:"Colon",Pipe:"Pipe",CallOperator:"CallOperator",AdditiveBinaryOperator:"AdditiveBinaryOperator",MultiplicativeBinaryOperator:"MultiplicativeBinaryOperator",ComparisonBinaryOperator:"ComparisonBinaryOperator",UnaryOperator:"UnaryOperator",Set:"Set",If:"If",For:"For",In:"In",Is:"Is",NotIn:"NotIn",Else:"Else",EndIf:"EndIf",ElseIf:"ElseIf",EndFor:"EndFor",And:"And",Or:"Or",Not:"UnaryOperator"}),KEYWORDS=Object.freeze({set:TOKEN_TYPES.Set,for:TOKEN_TYPES.For,in:TOKEN_TYPES.In,is:TOKEN_TYPES.Is,if:TOKEN_TYPES.If,else:TOKEN_TYPES.Else,endif:TOKEN_TYPES.EndIf,elif:TOKEN_TYPES.ElseIf,endfor:TOKEN_TYPES.EndFor,and:TOKEN_TYPES.And,or:TOKEN_TYPES.Or,not:TOKEN_TYPES.Not,"not in":TOKEN_TYPES.NotIn,true:TOKEN_TYPES.BooleanLiteral,false:TOKEN_TYPES.BooleanLiteral}),Token=class{constructor(n,e){this.value=n,this.type=e}};function isWord(n){return/\w/.test(n)}function isInteger(n){return/[0-9]/.test(n)}var ORDERED_MAPPING_TABLE=[["{%",TOKEN_TYPES.OpenStatement],["%}",TOKEN_TYPES.CloseStatement],["{{",TOKEN_TYPES.OpenExpression],["}}",TOKEN_TYPES.CloseExpression],["(",TOKEN_TYPES.OpenParen],[")",TOKEN_TYPES.CloseParen],["{",TOKEN_TYPES.OpenCurlyBracket],["}",TOKEN_TYPES.CloseCurlyBracket],["[",TOKEN_TYPES.OpenSquareBracket],["]",TOKEN_TYPES.CloseSquareBracket],[",",TOKEN_TYPES.Comma],[".",TOKEN_TYPES.Dot],[":",TOKEN_TYPES.Colon],["|",TOKEN_TYPES.Pipe],["<=",TOKEN_TYPES.ComparisonBinaryOperator],[">=",TOKEN_TYPES.ComparisonBinaryOperator],["==",TOKEN_TYPES.ComparisonBinaryOperator],["!=",TOKEN_TYPES.ComparisonBinaryOperator],["<",TOKEN_TYPES.ComparisonBinaryOperator],[">",TOKEN_TYPES.ComparisonBinaryOperator],["+",TOKEN_TYPES.AdditiveBinaryOperator],["-",TOKEN_TYPES.AdditiveBinaryOperator],["*",TOKEN_TYPES.MultiplicativeBinaryOperator],["/",TOKEN_TYPES.MultiplicativeBinaryOperator],["%",TOKEN_TYPES.MultiplicativeBinaryOperator],["=",TOKEN_TYPES.Equals]],ESCAPE_CHARACTERS=new Map([["n",`
`],["t","	"],["r","\r"],["b","\b"],["f","\f"],["v","\v"],["'","'"],['"','"'],["\\","\\"]]);function preprocess(n,e={}){return n.endsWith(`
`)&&(n=n.slice(0,-1)),n=n.replace(/{#.*?#}/gs,"{##}"),e.lstrip_blocks&&(n=n.replace(/^[ \t]*({[#%])/gm,"$1")),e.trim_blocks&&(n=n.replace(/([#%]})\n/g,"$1")),n.replace(/{##}/g,"").replace(/-%}\s*/g,"%}").replace(/\s*{%-/g,"{%").replace(/-}}\s*/g,"}}").replace(/\s*{{-/g,"{{")}function tokenize(n,e={}){const t=[],r=preprocess(n,e);let Ee=0;const Te=Re=>{let Me="";for(;Re(r[Ee]);){if(r[Ee]==="\\"){if(++Ee,Ee>=r.length)throw new SyntaxError("Unexpected end of input");const Ve=r[Ee++],De=ESCAPE_CHARACTERS.get(Ve);if(De===void 0)throw new SyntaxError(`Unexpected escaped character: ${Ve}`);Me+=De;continue}if(Me+=r[Ee++],Ee>=r.length)throw new SyntaxError("Unexpected end of input")}return Me};e:for(;Ee<r.length;){const Re=t.at(-1)?.type;if(Re===void 0||Re===TOKEN_TYPES.CloseStatement||Re===TOKEN_TYPES.CloseExpression){let Ve="";for(;Ee<r.length&&!(r[Ee]==="{"&&(r[Ee+1]==="%"||r[Ee+1]==="{"));)Ve+=r[Ee++];if(Ve.length>0){t.push(new Token(Ve,TOKEN_TYPES.Text));continue}}Te(Ve=>/\s/.test(Ve));const Me=r[Ee];if(Me==="-"||Me==="+"){const Ve=t.at(-1)?.type;if(Ve===TOKEN_TYPES.Text||Ve===void 0)throw new SyntaxError(`Unexpected character: ${Me}`);switch(Ve){case TOKEN_TYPES.Identifier:case TOKEN_TYPES.NumericLiteral:case TOKEN_TYPES.BooleanLiteral:case TOKEN_TYPES.StringLiteral:case TOKEN_TYPES.CloseParen:case TOKEN_TYPES.CloseSquareBracket:break;default:{++Ee;const De=Te(isInteger);t.push(new Token(`${Me}${De}`,De.length>0?TOKEN_TYPES.NumericLiteral:TOKEN_TYPES.UnaryOperator));continue}}}for(const[Ve,De]of ORDERED_MAPPING_TABLE)if(r.slice(Ee,Ee+Ve.length)===Ve){t.push(new Token(Ve,De)),Ee+=Ve.length;continue e}if(Me==="'"||Me==='"'){++Ee;const Ve=Te(De=>De!==Me);t.push(new Token(Ve,TOKEN_TYPES.StringLiteral)),++Ee;continue}if(isInteger(Me)){const Ve=Te(isInteger);t.push(new Token(Ve,TOKEN_TYPES.NumericLiteral));continue}if(isWord(Me)){const Ve=Te(isWord),De=Object.hasOwn(KEYWORDS,Ve)?KEYWORDS[Ve]:TOKEN_TYPES.Identifier;De===TOKEN_TYPES.In&&t.at(-1)?.type===TOKEN_TYPES.Not?(t.pop(),t.push(new Token("not in",TOKEN_TYPES.NotIn))):t.push(new Token(Ve,De));continue}throw new SyntaxError(`Unexpected character: ${Me}`)}return t}var Statement=class{type="Statement"},Program=class extends Statement{constructor(n){super(),this.body=n}type="Program"},If=class extends Statement{constructor(n,e,t){super(),this.test=n,this.body=e,this.alternate=t}type="If"},For=class extends Statement{constructor(n,e,t){super(),this.loopvar=n,this.iterable=e,this.body=t}type="For"},SetStatement=class extends Statement{constructor(n,e){super(),this.assignee=n,this.value=e}type="Set"},Expression=class extends Statement{type="Expression"},MemberExpression=class extends Expression{constructor(n,e,t){super(),this.object=n,this.property=e,this.computed=t}type="MemberExpression"},CallExpression=class extends Expression{constructor(n,e){super(),this.callee=n,this.args=e}type="CallExpression"},Identifier=class extends Expression{constructor(n){super(),this.value=n}type="Identifier"},Literal=class extends Expression{constructor(n){super(),this.value=n}type="Literal"},NumericLiteral=class extends Literal{type="NumericLiteral"},StringLiteral=class extends Literal{type="StringLiteral"},BooleanLiteral=class extends Literal{type="BooleanLiteral"},ArrayLiteral=class extends Literal{type="ArrayLiteral"},TupleLiteral=class extends Literal{type="TupleLiteral"},ObjectLiteral=class extends Literal{type="ObjectLiteral"},BinaryExpression=class extends Expression{constructor(n,e,t){super(),this.operator=n,this.left=e,this.right=t}type="BinaryExpression"},FilterExpression=class extends Expression{constructor(n,e){super(),this.operand=n,this.filter=e}type="FilterExpression"},TestExpression=class extends Expression{constructor(n,e,t){super(),this.operand=n,this.negate=e,this.test=t}type="TestExpression"},UnaryExpression=class extends Expression{constructor(n,e){super(),this.operator=n,this.argument=e}type="UnaryExpression"},SliceExpression=class extends Expression{constructor(n=void 0,e=void 0,t=void 0){super(),this.start=n,this.stop=e,this.step=t}type="SliceExpression"},KeywordArgumentExpression=class extends Expression{constructor(n,e){super(),this.key=n,this.value=e}type="KeywordArgumentExpression"};function parse(n){const e=new Program([]);let t=0;function r(Ln,Cn){const Dn=n[t++];if(!Dn||Dn.type!==Ln)throw new Error(`Parser Error: ${Cn}. ${Dn.type} !== ${Ln}.`);return Dn}function Ee(){switch(n[t].type){case TOKEN_TYPES.Text:return Me();case TOKEN_TYPES.OpenStatement:return Ve();case TOKEN_TYPES.OpenExpression:return De();default:throw new SyntaxError(`Unexpected token type: ${n[t].type}`)}}function Te(...Ln){return t+Ln.length<=n.length&&Ln.some((Cn,Dn)=>Cn!==n[t+Dn].type)}function Re(...Ln){return t+Ln.length<=n.length&&Ln.every((Cn,Dn)=>Cn===n[t+Dn].type)}function Me(){return new StringLiteral(r(TOKEN_TYPES.Text,"Expected text token").value)}function Ve(){r(TOKEN_TYPES.OpenStatement,"Expected opening statement token");let Ln;switch(n[t].type){case TOKEN_TYPES.Set:++t,Ln=$e(),r(TOKEN_TYPES.CloseStatement,"Expected closing statement token");break;case TOKEN_TYPES.If:++t,Ln=Oe(),r(TOKEN_TYPES.OpenStatement,"Expected {% token"),r(TOKEN_TYPES.EndIf,"Expected endif token"),r(TOKEN_TYPES.CloseStatement,"Expected %} token");break;case TOKEN_TYPES.For:++t,Ln=Be(),r(TOKEN_TYPES.OpenStatement,"Expected {% token"),r(TOKEN_TYPES.EndFor,"Expected endfor token"),r(TOKEN_TYPES.CloseStatement,"Expected %} token");break;default:throw new SyntaxError(`Unknown statement type: ${n[t].type}`)}return Ln}function De(){r(TOKEN_TYPES.OpenExpression,"Expected opening expression token");const Ln=Ue();return r(TOKEN_TYPES.CloseExpression,"Expected closing expression token"),Ln}function $e(){const Ln=Ue();if(Re(TOKEN_TYPES.Equals)){++t;const Cn=$e();return new SetStatement(Ln,Cn)}return Ln}function Oe(){const Ln=Ue();r(TOKEN_TYPES.CloseStatement,"Expected closing statement token");const Cn=[],Dn=[];for(;!(n[t]?.type===TOKEN_TYPES.OpenStatement&&(n[t+1]?.type===TOKEN_TYPES.ElseIf||n[t+1]?.type===TOKEN_TYPES.Else||n[t+1]?.type===TOKEN_TYPES.EndIf));)Cn.push(Ee());if(n[t]?.type===TOKEN_TYPES.OpenStatement&&n[t+1]?.type!==TOKEN_TYPES.EndIf)if(++t,Re(TOKEN_TYPES.ElseIf))r(TOKEN_TYPES.ElseIf,"Expected elseif token"),Dn.push(Oe());else for(r(TOKEN_TYPES.Else,"Expected else token"),r(TOKEN_TYPES.CloseStatement,"Expected closing statement token");!(n[t]?.type===TOKEN_TYPES.OpenStatement&&n[t+1]?.type===TOKEN_TYPES.EndIf);)Dn.push(Ee());return new If(Ln,Cn,Dn)}function Ce(Ln=!1){const Cn=Ln?Pn:Ue,Dn=[Cn()],Un=Re(TOKEN_TYPES.Comma);for(;Un&&(++t,Dn.push(Cn()),!!Re(TOKEN_TYPES.Comma)););return Un?new TupleLiteral(Dn):Dn[0]}function Be(){const Ln=Ce(!0);if(!(Ln instanceof Identifier||Ln instanceof TupleLiteral))throw new SyntaxError(`Expected identifier/tuple for the loop variable, got ${Ln.type} instead`);r(TOKEN_TYPES.In,"Expected `in` keyword following loop variable");const Cn=Ue();r(TOKEN_TYPES.CloseStatement,"Expected closing statement token");const Dn=[];for(;Te(TOKEN_TYPES.OpenStatement,TOKEN_TYPES.EndFor);)Dn.push(Ee());return new For(Ln,Cn,Dn)}function Ue(){return We()}function We(){const Ln=He();if(Re(TOKEN_TYPES.If)){++t;const Cn=He();r(TOKEN_TYPES.Else,"Expected else token");const Dn=He();return new If(Cn,[Ln],[Dn])}return Ln}function He(){let Ln=Ge();for(;Re(TOKEN_TYPES.Or);){const Cn=n[t];++t;const Dn=Ge();Ln=new BinaryExpression(Cn,Ln,Dn)}return Ln}function Ge(){let Ln=Ye();for(;Re(TOKEN_TYPES.And);){const Cn=n[t];++t;const Dn=Ye();Ln=new BinaryExpression(Cn,Ln,Dn)}return Ln}function Ye(){let Ln;for(;Re(TOKEN_TYPES.Not);){const Cn=n[t];++t;const Dn=Ye();Ln=new UnaryExpression(Cn,Dn)}return Ln??Je()}function Je(){let Ln=Ze();for(;Re(TOKEN_TYPES.ComparisonBinaryOperator)||Re(TOKEN_TYPES.In)||Re(TOKEN_TYPES.NotIn);){const Cn=n[t];++t;const Dn=Ze();Ln=new BinaryExpression(Cn,Ln,Dn)}return Ln}function Ze(){let Ln=gn();for(;Re(TOKEN_TYPES.AdditiveBinaryOperator);){const Cn=n[t];++t;const Dn=gn();Ln=new BinaryExpression(Cn,Ln,Dn)}return Ln}function fn(){const Ln=bn();return Re(TOKEN_TYPES.OpenParen)?yn(Ln):Ln}function yn(Ln){let Cn=new CallExpression(Ln,mn());return Re(TOKEN_TYPES.OpenParen)&&(Cn=yn(Cn)),Cn}function mn(){r(TOKEN_TYPES.OpenParen,"Expected opening parenthesis for arguments list");const Ln=pn();return r(TOKEN_TYPES.CloseParen,"Expected closing parenthesis for arguments list"),Ln}function pn(){const Ln=[];for(;!Re(TOKEN_TYPES.CloseParen);){let Cn=Ue();if(Re(TOKEN_TYPES.Equals)){if(++t,!(Cn instanceof Identifier))throw new SyntaxError("Expected identifier for keyword argument");const Dn=Ue();Cn=new KeywordArgumentExpression(Cn,Dn)}Ln.push(Cn),Re(TOKEN_TYPES.Comma)&&++t}return Ln}function un(){const Ln=[];let Cn=!1;for(;!Re(TOKEN_TYPES.CloseSquareBracket);)Re(TOKEN_TYPES.Colon)?(Ln.push(void 0),++t,Cn=!0):(Ln.push(Ue()),Re(TOKEN_TYPES.Colon)&&(++t,Cn=!0));if(Ln.length===0)throw new SyntaxError("Expected at least one argument for member/slice expression");if(Cn){if(Ln.length>3)throw new SyntaxError("Expected 0-3 arguments for slice expression");return new SliceExpression(...Ln)}return Ln[0]}function bn(){let Ln=Pn();for(;Re(TOKEN_TYPES.Dot)||Re(TOKEN_TYPES.OpenSquareBracket);){const Cn=n[t];++t;let Dn;const Un=Cn.type!==TOKEN_TYPES.Dot;if(Un)Dn=un(),r(TOKEN_TYPES.CloseSquareBracket,"Expected closing square bracket");else if(Dn=Pn(),Dn.type!=="Identifier")throw new SyntaxError("Expected identifier following dot operator");Ln=new MemberExpression(Ln,Dn,Un)}return Ln}function gn(){let Ln=xn();for(;Re(TOKEN_TYPES.MultiplicativeBinaryOperator);){const Cn=n[t];++t;const Dn=xn();Ln=new BinaryExpression(Cn,Ln,Dn)}return Ln}function xn(){let Ln=En();for(;Re(TOKEN_TYPES.Is);){++t;const Cn=Re(TOKEN_TYPES.Not);Cn&&++t;let Dn=Pn();if(Dn instanceof BooleanLiteral&&(Dn=new Identifier(Dn.value.toString())),!(Dn instanceof Identifier))throw new SyntaxError("Expected identifier for the test");Ln=new TestExpression(Ln,Cn,Dn)}return Ln}function En(){let Ln=fn();for(;Re(TOKEN_TYPES.Pipe);){++t;let Cn=Pn();if(!(Cn instanceof Identifier))throw new SyntaxError("Expected identifier for the filter");Re(TOKEN_TYPES.OpenParen)&&(Cn=yn(Cn)),Ln=new FilterExpression(Ln,Cn)}return Ln}function Pn(){const Ln=n[t];switch(Ln.type){case TOKEN_TYPES.NumericLiteral:return++t,new NumericLiteral(Number(Ln.value));case TOKEN_TYPES.StringLiteral:return++t,new StringLiteral(Ln.value);case TOKEN_TYPES.BooleanLiteral:return++t,new BooleanLiteral(Ln.value==="true");case TOKEN_TYPES.Identifier:return++t,new Identifier(Ln.value);case TOKEN_TYPES.OpenParen:{++t;const Cn=Ce();if(n[t].type!==TOKEN_TYPES.CloseParen)throw new SyntaxError(`Expected closing parenthesis, got ${n[t].type} instead`);return++t,Cn}case TOKEN_TYPES.OpenSquareBracket:{++t;const Cn=[];for(;!Re(TOKEN_TYPES.CloseSquareBracket);)Cn.push(Ue()),Re(TOKEN_TYPES.Comma)&&++t;return++t,new ArrayLiteral(Cn)}case TOKEN_TYPES.OpenCurlyBracket:{++t;const Cn=new Map;for(;!Re(TOKEN_TYPES.CloseCurlyBracket);){const Dn=Ue();r(TOKEN_TYPES.Colon,"Expected colon between key and value in object literal");const Un=Ue();Cn.set(Dn,Un),Re(TOKEN_TYPES.Comma)&&++t}return++t,new ObjectLiteral(Cn)}default:throw new SyntaxError(`Unexpected token: ${Ln.type}`)}}for(;t<n.length;)e.body.push(Ee());return e}function range(n,e,t=1){e===void 0&&(e=n,n=0);const r=[];for(let Ee=n;Ee<e;Ee+=t)r.push(Ee);return r}function slice(n,e,t,r=1){const Ee=Math.sign(r);Ee>=0?(e=(e??=0)<0?Math.max(n.length+e,0):Math.min(e,n.length),t=(t??=n.length)<0?Math.max(n.length+t,0):Math.min(t,n.length)):(e=(e??=n.length-1)<0?Math.max(n.length+e,-1):Math.min(e,n.length-1),t=(t??=-1)<-1?Math.max(n.length+t,-1):Math.min(t,n.length-1));const Te=[];for(let Re=e;Ee*Re<Ee*t;Re+=r)Te.push(n[Re]);return Te}function titleCase(n){return n.replace(/\b\w/g,e=>e.toUpperCase())}var RuntimeValue=class{type="RuntimeValue";value;builtins=new Map;constructor(n=void 0){this.value=n}__bool__(){return new BooleanValue(!!this.value)}},NumericValue=class extends RuntimeValue{type="NumericValue"},StringValue=class extends RuntimeValue{type="StringValue";builtins=new Map([["upper",new FunctionValue(()=>new StringValue(this.value.toUpperCase()))],["lower",new FunctionValue(()=>new StringValue(this.value.toLowerCase()))],["strip",new FunctionValue(()=>new StringValue(this.value.trim()))],["title",new FunctionValue(()=>new StringValue(titleCase(this.value)))],["length",new NumericValue(this.value.length)]])},BooleanValue=class extends RuntimeValue{type="BooleanValue"},ObjectValue=class extends RuntimeValue{type="ObjectValue";__bool__(){return new BooleanValue(this.value.size>0)}builtins=new Map([["get",new FunctionValue(([n,e])=>{if(!(n instanceof StringValue))throw new Error(`Object key must be a string: got ${n.type}`);return this.value.get(n.value)??e??new NullValue})],["items",new FunctionValue(()=>new ArrayValue(Array.from(this.value.entries()).map(([n,e])=>new ArrayValue([new StringValue(n),e]))))]])},ArrayValue=class extends RuntimeValue{type="ArrayValue";builtins=new Map([["length",new NumericValue(this.value.length)]]);__bool__(){return new BooleanValue(this.value.length>0)}},TupleValue=class extends ArrayValue{type="TupleValue"},FunctionValue=class extends RuntimeValue{type="FunctionValue"},NullValue=class extends RuntimeValue{type="NullValue"},UndefinedValue=class extends RuntimeValue{type="UndefinedValue"},Environment=class{constructor(n){this.parent=n}variables=new Map([["namespace",new FunctionValue(n=>{if(n.length===0)return new ObjectValue(new Map);if(n.length!==1||!(n[0]instanceof ObjectValue))throw new Error("`namespace` expects either zero arguments or a single object argument");return n[0]})]]);tests=new Map([["boolean",n=>n.type==="BooleanValue"],["callable",n=>n instanceof FunctionValue],["odd",n=>{if(n.type!=="NumericValue")throw new Error(`Cannot apply test "odd" to type: ${n.type}`);return n.value%2!==0}],["even",n=>{if(n.type!=="NumericValue")throw new Error(`Cannot apply test "even" to type: ${n.type}`);return n.value%2===0}],["false",n=>n.type==="BooleanValue"&&!n.value],["true",n=>n.type==="BooleanValue"&&n.value],["number",n=>n.type==="NumericValue"],["integer",n=>n.type==="NumericValue"&&Number.isInteger(n.value)],["iterable",n=>n instanceof ArrayValue||n instanceof StringValue],["lower",n=>{const e=n.value;return n.type==="StringValue"&&e===e.toLowerCase()}],["upper",n=>{const e=n.value;return n.type==="StringValue"&&e===e.toUpperCase()}],["none",n=>n.type==="NullValue"],["defined",n=>n.type!=="UndefinedValue"],["undefined",n=>n.type==="UndefinedValue"],["equalto",(n,e)=>n.value===e.value]]);set(n,e){return this.declareVariable(n,convertToRuntimeValues(e))}declareVariable(n,e){if(this.variables.has(n))throw new SyntaxError(`Variable already declared: ${n}`);return this.variables.set(n,e),e}setVariable(n,e){return this.variables.set(n,e),e}resolve(n){if(this.variables.has(n))return this;if(this.parent)return this.parent.resolve(n);throw new Error(`Unknown variable: ${n}`)}lookupVariable(n){try{return this.resolve(n).variables.get(n)??new UndefinedValue}catch{return new UndefinedValue}}},Interpreter=class{global;constructor(n){this.global=n??new Environment}run(n){return this.evaluate(n,this.global)}evaluateBinaryExpression(n,e){const t=this.evaluate(n.left,e);switch(n.operator.value){case"and":return t.__bool__().value?this.evaluate(n.right,e):t;case"or":return t.__bool__().value?t:this.evaluate(n.right,e)}const r=this.evaluate(n.right,e);switch(n.operator.value){case"==":return new BooleanValue(t.value==r.value);case"!=":return new BooleanValue(t.value!=r.value)}if(t instanceof UndefinedValue||r instanceof UndefinedValue)throw new Error("Cannot perform operation on undefined values");if(t instanceof NullValue||r instanceof NullValue)throw new Error("Cannot perform operation on null values");if(t instanceof NumericValue&&r instanceof NumericValue)switch(n.operator.value){case"+":return new NumericValue(t.value+r.value);case"-":return new NumericValue(t.value-r.value);case"*":return new NumericValue(t.value*r.value);case"/":return new NumericValue(t.value/r.value);case"%":return new NumericValue(t.value%r.value);case"<":return new BooleanValue(t.value<r.value);case">":return new BooleanValue(t.value>r.value);case">=":return new BooleanValue(t.value>=r.value);case"<=":return new BooleanValue(t.value<=r.value)}else if(t instanceof ArrayValue&&r instanceof ArrayValue)switch(n.operator.value){case"+":return new ArrayValue(t.value.concat(r.value))}else if(r instanceof ArrayValue){const Ee=r.value.find(Te=>Te.value===t.value)!==void 0;switch(n.operator.value){case"in":return new BooleanValue(Ee);case"not in":return new BooleanValue(!Ee)}}if(t instanceof StringValue||r instanceof StringValue)switch(n.operator.value){case"+":return new StringValue(t.value.toString()+r.value.toString())}if(t instanceof StringValue&&r instanceof StringValue)switch(n.operator.value){case"in":return new BooleanValue(r.value.includes(t.value));case"not in":return new BooleanValue(!r.value.includes(t.value))}if(t instanceof StringValue&&r instanceof ObjectValue)switch(n.operator.value){case"in":return new BooleanValue(r.value.has(t.value));case"not in":return new BooleanValue(!r.value.has(t.value))}throw new SyntaxError(`Unknown operator "${n.operator.value}" between ${t.type} and ${r.type}`)}evaluateFilterExpression(n,e){const t=this.evaluate(n.operand,e);if(n.filter.type==="Identifier"){const r=n.filter;if(t instanceof ArrayValue)switch(r.value){case"list":return t;case"first":return t.value[0];case"last":return t.value[t.value.length-1];case"length":return new NumericValue(t.value.length);case"reverse":return new ArrayValue(t.value.reverse());case"sort":return new ArrayValue(t.value.sort((Ee,Te)=>{if(Ee.type!==Te.type)throw new Error(`Cannot compare different types: ${Ee.type} and ${Te.type}`);switch(Ee.type){case"NumericValue":return Ee.value-Te.value;case"StringValue":return Ee.value.localeCompare(Te.value);default:throw new Error(`Cannot compare type: ${Ee.type}`)}}));default:throw new Error(`Unknown ArrayValue filter: ${r.value}`)}else if(t instanceof StringValue)switch(r.value){case"length":return new NumericValue(t.value.length);case"upper":return new StringValue(t.value.toUpperCase());case"lower":return new StringValue(t.value.toLowerCase());case"title":return new StringValue(titleCase(t.value));case"capitalize":return new StringValue(t.value.charAt(0).toUpperCase()+t.value.slice(1));case"trim":return new StringValue(t.value.trim());default:throw new Error(`Unknown StringValue filter: ${r.value}`)}else if(t instanceof NumericValue)switch(r.value){case"abs":return new NumericValue(Math.abs(t.value));default:throw new Error(`Unknown NumericValue filter: ${r.value}`)}else if(t instanceof ObjectValue)switch(r.value){case"items":return new ArrayValue(Array.from(t.value.entries()).map(([Ee,Te])=>new ArrayValue([new StringValue(Ee),Te])));case"length":return new NumericValue(t.value.size);default:throw new Error(`Unknown ObjectValue filter: ${r.value}`)}throw new Error(`Cannot apply filter "${r.value}" to type: ${t.type}`)}else if(n.filter.type==="CallExpression"){const r=n.filter;if(r.callee.type!=="Identifier")throw new Error(`Unknown filter: ${r.callee.type}`);const Ee=r.callee.value;if(t instanceof ArrayValue){switch(Ee){case"selectattr":{if(t.value.some($e=>!($e instanceof ObjectValue)))throw new Error("`selectattr` can only be applied to array of objects");if(r.args.some($e=>$e.type!=="StringLiteral"))throw new Error("arguments of `selectattr` must be strings");const[Te,Re,Me]=r.args.map($e=>this.evaluate($e,e));let Ve;if(Re){const $e=e.tests.get(Re.value);if(!$e)throw new Error(`Unknown test: ${Re.value}`);Ve=$e}else Ve=(...$e)=>$e[0].__bool__().value;const De=t.value.filter($e=>{const Oe=$e.value.get(Te.value);return Oe?Ve(Oe,Me):!1});return new ArrayValue(De)}}throw new Error(`Unknown ArrayValue filter: ${Ee}`)}else throw new Error(`Cannot apply filter "${Ee}" to type: ${t.type}`)}throw new Error(`Unknown filter: ${n.filter.type}`)}evaluateTestExpression(n,e){const t=this.evaluate(n.operand,e),r=e.tests.get(n.test.value);if(!r)throw new Error(`Unknown test: ${n.test.value}`);const Ee=r(t);return new BooleanValue(n.negate?!Ee:Ee)}evaluateUnaryExpression(n,e){const t=this.evaluate(n.argument,e);switch(n.operator.value){case"not":return new BooleanValue(!t.value);default:throw new SyntaxError(`Unknown operator: ${n.operator.value}`)}}evalProgram(n,e){return this.evaluateBlock(n.body,e)}evaluateBlock(n,e){let t="";for(const r of n){const Ee=this.evaluate(r,e);Ee.type!=="NullValue"&&Ee.type!=="UndefinedValue"&&(t+=Ee.value)}return new StringValue(t)}evaluateIdentifier(n,e){return e.lookupVariable(n.value)}evaluateCallExpression(n,e){const t=[],r=new Map;for(const Te of n.args)if(Te.type==="KeywordArgumentExpression"){const Re=Te;r.set(Re.key.value,this.evaluate(Re.value,e))}else t.push(this.evaluate(Te,e));r.size>0&&t.push(new ObjectValue(r));const Ee=this.evaluate(n.callee,e);if(Ee.type!=="FunctionValue")throw new Error(`Cannot call something that is not a function: got ${Ee.type}`);return Ee.value(t,e)}evaluateSliceExpression(n,e,t){if(!(n instanceof ArrayValue||n instanceof StringValue))throw new Error("Slice object must be an array or string");const r=this.evaluate(e.start,t),Ee=this.evaluate(e.stop,t),Te=this.evaluate(e.step,t);if(!(r instanceof NumericValue||r instanceof UndefinedValue))throw new Error("Slice start must be numeric or undefined");if(!(Ee instanceof NumericValue||Ee instanceof UndefinedValue))throw new Error("Slice stop must be numeric or undefined");if(!(Te instanceof NumericValue||Te instanceof UndefinedValue))throw new Error("Slice step must be numeric or undefined");return n instanceof ArrayValue?new ArrayValue(slice(n.value,r.value,Ee.value,Te.value)):new StringValue(slice(Array.from(n.value),r.value,Ee.value,Te.value).join(""))}evaluateMemberExpression(n,e){const t=this.evaluate(n.object,e);let r;if(n.computed){if(n.property.type==="SliceExpression")return this.evaluateSliceExpression(t,n.property,e);r=this.evaluate(n.property,e)}else r=new StringValue(n.property.value);let Ee;if(t instanceof ObjectValue){if(!(r instanceof StringValue))throw new Error(`Cannot access property with non-string: got ${r.type}`);Ee=t.value.get(r.value)??t.builtins.get(r.value)}else if(t instanceof ArrayValue||t instanceof StringValue)if(r instanceof NumericValue)Ee=t.value.at(r.value),t instanceof StringValue&&(Ee=new StringValue(t.value.at(r.value)));else if(r instanceof StringValue)Ee=t.builtins.get(r.value);else throw new Error(`Cannot access property with non-string/non-number: got ${r.type}`);else{if(!(r instanceof StringValue))throw new Error(`Cannot access property with non-string: got ${r.type}`);Ee=t.builtins.get(r.value)}return Ee instanceof RuntimeValue?Ee:new UndefinedValue}evaluateSet(n,e){const t=this.evaluate(n.value,e);if(n.assignee.type==="Identifier"){const r=n.assignee.value;e.setVariable(r,t)}else if(n.assignee.type==="MemberExpression"){const r=n.assignee,Ee=this.evaluate(r.object,e);if(!(Ee instanceof ObjectValue))throw new Error("Cannot assign to member of non-object");if(r.property.type!=="Identifier")throw new Error("Cannot assign to member with non-identifier property");Ee.value.set(r.property.value,t)}else throw new Error(`Invalid LHS inside assignment expression: ${JSON.stringify(n.assignee)}`);return new NullValue}evaluateIf(n,e){const t=this.evaluate(n.test,e);return this.evaluateBlock(t.__bool__().value?n.body:n.alternate,e)}evaluateFor(n,e){const t=new Environment(e),r=this.evaluate(n.iterable,t);if(!(r instanceof ArrayValue))throw new Error(`Expected iterable type in for loop: got ${r.type}`);let Ee="";for(let Te=0;Te<r.value.length;++Te){const Re=new Map([["index",new NumericValue(Te+1)],["index0",new NumericValue(Te)],["revindex",new NumericValue(r.value.length-Te)],["revindex0",new NumericValue(r.value.length-Te-1)],["first",new BooleanValue(Te===0)],["last",new BooleanValue(Te===r.value.length-1)],["length",new NumericValue(r.value.length)],["previtem",Te>0?r.value[Te-1]:new UndefinedValue],["nextitem",Te<r.value.length-1?r.value[Te+1]:new UndefinedValue]]);t.setVariable("loop",new ObjectValue(Re));const Me=r.value[Te];if(n.loopvar.type==="Identifier")t.setVariable(n.loopvar.value,Me);else if(n.loopvar.type==="TupleLiteral"){const De=n.loopvar;if(Me.type!=="ArrayValue")throw new Error(`Cannot unpack non-iterable type: ${Me.type}`);const $e=Me;if(De.value.length!==$e.value.length)throw new Error(`Too ${De.value.length>$e.value.length?"few":"many"} items to unpack`);for(let Oe=0;Oe<De.value.length;++Oe){if(De.value[Oe].type!=="Identifier")throw new Error(`Cannot unpack non-identifier type: ${De.value[Oe].type}`);t.setVariable(De.value[Oe].value,$e.value[Oe])}}const Ve=this.evaluateBlock(n.body,t);Ee+=Ve.value}return new StringValue(Ee)}evaluate(n,e){if(n===void 0)return new UndefinedValue;switch(n.type){case"Program":return this.evalProgram(n,e);case"Set":return this.evaluateSet(n,e);case"If":return this.evaluateIf(n,e);case"For":return this.evaluateFor(n,e);case"NumericLiteral":return new NumericValue(Number(n.value));case"StringLiteral":return new StringValue(n.value);case"BooleanLiteral":return new BooleanValue(n.value);case"ArrayLiteral":return new ArrayValue(n.value.map(t=>this.evaluate(t,e)));case"TupleLiteral":return new TupleValue(n.value.map(t=>this.evaluate(t,e)));case"ObjectLiteral":{const t=new Map;for(const[r,Ee]of n.value){const Te=this.evaluate(r,e);if(!(Te instanceof StringValue))throw new Error(`Object keys must be strings: got ${Te.type}`);t.set(Te.value,this.evaluate(Ee,e))}return new ObjectValue(t)}case"Identifier":return this.evaluateIdentifier(n,e);case"CallExpression":return this.evaluateCallExpression(n,e);case"MemberExpression":return this.evaluateMemberExpression(n,e);case"UnaryExpression":return this.evaluateUnaryExpression(n,e);case"BinaryExpression":return this.evaluateBinaryExpression(n,e);case"FilterExpression":return this.evaluateFilterExpression(n,e);case"TestExpression":return this.evaluateTestExpression(n,e);default:throw new SyntaxError(`Unknown node type: ${n.type}`)}}};function convertToRuntimeValues(n){switch(typeof n){case"number":return new NumericValue(n);case"string":return new StringValue(n);case"boolean":return new BooleanValue(n);case"object":return n===null?new NullValue:Array.isArray(n)?new ArrayValue(n.map(convertToRuntimeValues)):new ObjectValue(new Map(Object.entries(n).map(([e,t])=>[e,convertToRuntimeValues(t)])));case"function":return new FunctionValue((e,t)=>{const r=n(...e.map(Ee=>Ee.value))??null;return convertToRuntimeValues(r)});default:throw new Error(`Cannot convert to runtime value: ${n}`)}}var Template=class{parsed;constructor(n){const e=tokenize(n,{lstrip_blocks:!0,trim_blocks:!0});this.parsed=parse(e)}render(n){const e=new Environment;e.set("false",!1),e.set("true",!0),e.set("raise_exception",Ee=>{throw new Error(Ee)}),e.set("range",range);for(const[Ee,Te]of Object.entries(n))e.set(Ee,Te);return new Interpreter(e).run(this.parsed).value}};async function loadTokenizer(n,e){const t=await Promise.all([getModelJSON(n,"tokenizer.json",!0,e),getModelJSON(n,"tokenizer_config.json",!0,e)]);return e.legacy!==null&&(t[1].legacy=e.legacy),t}function regexSplit(n,e){const t=[];let r=0;for(const Ee of n.matchAll(e)){const Te=Ee[0];r<Ee.index&&t.push(n.slice(r,Ee.index)),Te.length>0&&t.push(Te),r=Ee.index+Te.length}return r<n.length&&t.push(n.slice(r)),t}function createPattern(n,e=!0){if(n.Regex!==void 0){let t=n.Regex.replace(/\\([#&~])/g,"$1");for(const[r,Ee]of PROBLEMATIC_REGEX_MAP)t=t.replaceAll(r,Ee);return new RegExp(t,"gu")}else if(n.String!==void 0){const t=escapeRegExp(n.String);return new RegExp(e?t:`(${t})`,"gu")}else return console.warn("Unknown pattern type:",n),null}function objectToMap(n){return new Map(Object.entries(n))}function prepareTensorForDecode(n){const e=n.dims;switch(e.length){case 1:return n.tolist();case 2:if(e[0]!==1)throw new Error("Unable to decode tensor with `batch size !== 1`. Use `tokenizer.batch_decode(...)` for batched inputs.");return n.tolist()[0];default:throw new Error(`Expected tensor to have 1-2 dimensions, got ${e.length}.`)}}function clean_up_tokenization(n){return n.replace(/ \./g,".").replace(/ \?/g,"?").replace(/ \!/g,"!").replace(/ ,/g,",").replace(/ \' /g,"'").replace(/ n\'t/g,"n't").replace(/ \'m/g,"'m").replace(/ \'s/g,"'s").replace(/ \'ve/g,"'ve").replace(/ \'re/g,"'re")}function remove_accents(n){return n.replace(/[\u0300-\u036f]/g,"")}function lowercase_and_remove_accent(n){return remove_accents(n.toLowerCase())}function fuse(n,e,t){const r=[];let Ee=0;for(;Ee<n.length;){if(r.push(n[Ee]),(t.get(n[Ee])??e)!==e){++Ee;continue}for(;Ee<n.length&&(t.get(n[Ee])??e)===e;)++Ee}return r}function whitespace_split(n){return n.match(/\S+/g)||[]}const PUNCTUATION_REGEX="\\p{P}\\u0021-\\u002F\\u003A-\\u0040\\u005B-\\u0060\\u007B-\\u007E",PROBLEMATIC_REGEX_MAP=new Map([["(?i:'s|'t|'re|'ve|'m|'ll|'d)","(?:'([sS]|[tT]|[rR][eE]|[vV][eE]|[mM]|[lL][lL]|[dD]))"]]);class AddedToken{constructor(e){this.content=e.content,this.id=e.id,this.single_word=e.single_word??!1,this.lstrip=e.lstrip??!1,this.rstrip=e.rstrip??!1,this.special=e.special??!1,this.normalized=e.normalized??null}}class TokenizerModel extends Callable{constructor(e){super(),this.config=e,this.vocab=[],this.tokens_to_ids=new Map,this.unk_token_id=void 0,this.unk_token=void 0,this.end_of_word_suffix=void 0,this.fuse_unk=this.config.fuse_unk??!1}static fromConfig(e,...t){switch(e.type){case"WordPiece":return new WordPieceTokenizer(e);case"Unigram":return new Unigram(e,...t);case"BPE":return new BPE(e);default:if(e.vocab)return new LegacyTokenizerModel(e,...t);throw new Error(`Unknown TokenizerModel type: ${e.type}`)}}_call(e){let t=this.encode(e);return this.fuse_unk&&(t=fuse(t,this.unk_token_id,this.tokens_to_ids)),t}encode(e){throw Error("encode should be implemented in subclass.")}convert_tokens_to_ids(e){return e.map(t=>this.tokens_to_ids.get(t)??this.unk_token_id)}convert_ids_to_tokens(e){return e.map(t=>this.vocab[t]??this.unk_token)}}class WordPieceTokenizer extends TokenizerModel{constructor(e){super(e),this.tokens_to_ids=objectToMap(e.vocab),this.unk_token_id=this.tokens_to_ids.get(e.unk_token),this.unk_token=e.unk_token,this.max_input_chars_per_word=e.max_input_chars_per_word??100,this.vocab=new Array(this.tokens_to_ids.size);for(const[t,r]of this.tokens_to_ids)this.vocab[r]=t}encode(e){const t=[];for(const r of e){const Ee=[...r];if(Ee.length>this.max_input_chars_per_word){t.push(this.unk_token);continue}let Te=!1,Re=0;const Me=[];for(;Re<Ee.length;){let Ve=Ee.length,De=null;for(;Re<Ve;){let $e=Ee.slice(Re,Ve).join("");if(Re>0&&($e=this.config.continuing_subword_prefix+$e),this.tokens_to_ids.has($e)){De=$e;break}--Ve}if(De===null){Te=!0;break}Me.push(De),Re=Ve}Te?t.push(this.unk_token):t.push(...Me)}return t}}class Unigram extends TokenizerModel{constructor(e,t){super(e);const r=e.vocab.length;this.vocab=new Array(r),this.scores=new Array(r);for(let Ee=0;Ee<r;++Ee){const Te=e.vocab[Ee];this.vocab[Ee]=Te[0],this.scores[Ee]=Te[1]}this.unk_token_id=e.unk_id,this.unk_token=this.vocab[e.unk_id],this.tokens_to_ids=new Map(this.vocab.map((Ee,Te)=>[Ee,Te])),this.bosToken=" ",this.bosTokenId=this.tokens_to_ids.get(this.bosToken),this.eosToken=t.eos_token,this.eosTokenId=this.tokens_to_ids.get(this.eosToken),this.unkToken=this.vocab[this.unk_token_id],this.minScore=min(this.scores)[0],this.unkScore=this.minScore-10,this.scores[this.unk_token_id]=this.unkScore,this.trie=new CharTrie,this.trie.extend(this.vocab),this.fuse_unk=!0}populateNodes(e){const t=e.sentence,r=t.length;let Ee=0;for(;Ee<r;){let Re=!1;for(let Me of this.trie.commonPrefixSearch(t.slice(Ee))){const Ve=this.tokens_to_ids.get(Me),De=this.scores[Ve],$e=Me.length;e.insert(Ee,$e,De,Ve),!Re&&$e===1&&(Re=!0)}Re||e.insert(Ee,1,this.unkScore,this.unk_token_id),Ee+=1}}tokenize(e){const t=new TokenLattice(e,this.bosTokenId,this.eosTokenId);return this.populateNodes(t),t.tokens()}encode(e){const t=[];for(const r of e){const Ee=this.tokenize(r);t.push(...Ee)}return t}}const BYTES_TO_UNICODE=(()=>{const n=[...Array.from({length:94},(Ee,Te)=>Te+33),...Array.from({length:12},(Ee,Te)=>Te+161),...Array.from({length:82},(Ee,Te)=>Te+174)],e=n.slice();let t=0;for(let Ee=0;Ee<256;++Ee)n.includes(Ee)||(n.push(Ee),e.push(256+t),t+=1);const r=e.map(Ee=>String.fromCharCode(Ee));return Object.fromEntries(n.map((Ee,Te)=>[Ee,r[Te]]))})(),UNICODE_TO_BYTES=reverseDictionary(BYTES_TO_UNICODE);class BPE extends TokenizerModel{constructor(e){super(e),this.BPE_SPLIT_TOKEN=" ",this.tokens_to_ids=objectToMap(e.vocab),this.unk_token_id=this.tokens_to_ids.get(e.unk_token),this.unk_token=e.unk_token,this.vocab=new Array(this.tokens_to_ids.size);for(const[t,r]of this.tokens_to_ids)this.vocab[r]=t;this.bpe_ranks=new Map(e.merges.map((t,r)=>[t,r])),this.merges=e.merges.map(t=>t.split(this.BPE_SPLIT_TOKEN)),this.end_of_word_suffix=e.end_of_word_suffix,this.continuing_subword_suffix=e.continuing_subword_suffix??null,this.byte_fallback=this.config.byte_fallback??!1,this.byte_fallback&&(this.text_encoder=new TextEncoder),this.ignore_merges=this.config.ignore_merges??!1,this.cache=new Map}bpe(e){if(e.length===0)return[];const t=this.cache.get(e);if(t!==void 0)return t;const r=Array.from(e);this.end_of_word_suffix&&(r[r.length-1]+=this.end_of_word_suffix);let Ee=[];if(r.length>1){const Te=new PriorityQueue((Ve,De)=>Ve.score<De.score);let Re={token:r[0],bias:0,prev:null,next:null},Me=Re;for(let Ve=1;Ve<r.length;++Ve){const De={bias:Ve/r.length,token:r[Ve],prev:Me,next:null};Me.next=De,this._add_node(Te,Me),Me=De}for(;!Te.isEmpty();){const Ve=Te.pop();if(Ve.deleted||!Ve.next||Ve.next.deleted)continue;if(Ve.deleted=!0,Ve.next.deleted=!0,Ve.prev){const $e={...Ve.prev};Ve.prev.deleted=!0,Ve.prev=$e,$e.prev?$e.prev.next=$e:Re=$e}const De={token:Ve.token+Ve.next.token,bias:Ve.bias,prev:Ve.prev,next:Ve.next.next};De.prev?(De.prev.next=De,this._add_node(Te,De.prev)):Re=De,De.next&&(De.next.prev=De,this._add_node(Te,De))}for(let Ve=Re;Ve!==null;Ve=Ve.next)Ee.push(Ve.token)}else Ee=r;if(this.continuing_subword_suffix)for(let Te=0;Te<Ee.length-1;++Te)Ee[Te]+=this.continuing_subword_suffix;return this.cache.set(e,Ee),Ee}_add_node(e,t){const r=this.bpe_ranks.get(t.token+this.BPE_SPLIT_TOKEN+t.next.token);r!==void 0&&(t.score=r+t.bias,e.push(t))}encode(e){const t=[];for(const r of e){if(this.ignore_merges&&this.tokens_to_ids.has(r)){t.push(r);continue}const Ee=this.bpe(r);for(const Te of Ee)this.tokens_to_ids.has(Te)?t.push(Te):this.byte_fallback?t.push(...Array.from(this.text_encoder.encode(Te)).map(Re=>`<0x${Re.toString(16).toUpperCase().padStart(2,"0")}>`)):t.push(this.unk_token)}return t}}class LegacyTokenizerModel extends TokenizerModel{constructor(e,t){super(e),this.tokens_to_ids=objectToMap(t.target_lang?e.vocab[t.target_lang]:e.vocab),this.bos_token=t.bos_token,this.bos_token_id=this.tokens_to_ids.get(this.bos_token),this.eos_token=t.eos_token,this.eos_token_id=this.tokens_to_ids.get(this.eos_token),this.pad_token=t.pad_token,this.pad_token_id=this.tokens_to_ids.get(this.pad_token),this.unk_token=t.unk_token,this.unk_token_id=this.tokens_to_ids.get(this.unk_token),this.vocab=new Array(this.tokens_to_ids.size);for(const[r,Ee]of this.tokens_to_ids)this.vocab[Ee]=r}encode(e){return e}}class Normalizer extends Callable{constructor(e){super(),this.config=e}static fromConfig(e){if(e===null)return null;switch(e.type){case"BertNormalizer":return new BertNormalizer(e);case"Precompiled":return new Precompiled(e);case"Sequence":return new NormalizerSequence(e);case"Replace":return new Replace(e);case"NFC":return new NFC(e);case"NFKC":return new NFKC(e);case"NFKD":return new NFKD(e);case"Strip":return new StripNormalizer(e);case"StripAccents":return new StripAccents(e);case"Lowercase":return new Lowercase(e);case"Prepend":return new Prepend(e);default:throw new Error(`Unknown Normalizer type: ${e.type}`)}}normalize(e){throw Error("normalize should be implemented in subclass.")}_call(e){return this.normalize(e)}}class Replace extends Normalizer{normalize(e){const t=createPattern(this.config.pattern);return t===null?e:e.replaceAll(t,this.config.content)}}class NFC extends Normalizer{normalize(e){return e=e.normalize("NFC"),e}}class NFKC extends Normalizer{normalize(e){return e=e.normalize("NFKC"),e}}class NFKD extends Normalizer{normalize(e){return e=e.normalize("NFKD"),e}}class StripNormalizer extends Normalizer{normalize(e){return this.config.strip_left&&this.config.strip_right?e=e.trim():(this.config.strip_left&&(e=e.trimStart()),this.config.strip_right&&(e=e.trimEnd())),e}}class StripAccents extends Normalizer{normalize(e){return e=remove_accents(e),e}}class Lowercase extends Normalizer{normalize(e){return e=e.toLowerCase(),e}}class Prepend extends Normalizer{normalize(e){return e=this.config.prepend+e,e}}class NormalizerSequence extends Normalizer{constructor(e){super(e),this.normalizers=e.normalizers.map(t=>Normalizer.fromConfig(t))}normalize(e){return this.normalizers.reduce((t,r)=>r.normalize(t),e)}}class BertNormalizer extends Normalizer{_tokenize_chinese_chars(e){const t=[];for(let r=0;r<e.length;++r){const Ee=e[r],Te=Ee.charCodeAt(0);this._is_chinese_char(Te)?(t.push(" "),t.push(Ee),t.push(" ")):t.push(Ee)}return t.join("")}_is_chinese_char(e){return e>=19968&&e<=40959||e>=13312&&e<=19903||e>=131072&&e<=173791||e>=173824&&e<=177983||e>=177984&&e<=178207||e>=178208&&e<=183983||e>=63744&&e<=64255||e>=194560&&e<=195103}stripAccents(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}_is_control(e){switch(e){case"	":case`
`:case"\r":return!1;default:return new RegExp("^\\p{Cc}|\\p{Cf}|\\p{Co}|\\p{Cs}$","u").test(e)}}_clean_text(e){const t=[];for(const r of e){const Ee=r.charCodeAt(0);Ee===0||Ee===65533||this._is_control(r)||(/^\s$/.test(r)?t.push(" "):t.push(r))}return t.join("")}normalize(e){return this.config.clean_text&&(e=this._clean_text(e)),this.config.handle_chinese_chars&&(e=this._tokenize_chinese_chars(e)),this.config.lowercase?(e=e.toLowerCase(),this.config.strip_accents!==!1&&(e=this.stripAccents(e))):this.config.strip_accents&&(e=this.stripAccents(e)),e}}class PreTokenizer extends Callable{static fromConfig(e){if(e===null)return null;switch(e.type){case"BertPreTokenizer":return new BertPreTokenizer(e);case"Sequence":return new PreTokenizerSequence(e);case"Whitespace":return new WhitespacePreTokenizer(e);case"WhitespaceSplit":return new WhitespaceSplit(e);case"Metaspace":return new MetaspacePreTokenizer(e);case"ByteLevel":return new ByteLevelPreTokenizer(e);case"Split":return new SplitPreTokenizer(e);case"Punctuation":return new PunctuationPreTokenizer(e);case"Digits":return new DigitsPreTokenizer(e);case"Replace":return new ReplacePreTokenizer(e);default:throw new Error(`Unknown PreTokenizer type: ${e.type}`)}}pre_tokenize_text(e,t){throw Error("pre_tokenize_text should be implemented in subclass.")}pre_tokenize(e,t){return(Array.isArray(e)?e.map(r=>this.pre_tokenize_text(r,t)):this.pre_tokenize_text(e,t)).flat()}_call(e,t){return this.pre_tokenize(e,t)}}class BertPreTokenizer extends PreTokenizer{constructor(e){super(),this.pattern=new RegExp(`[^\\s${PUNCTUATION_REGEX}]+|[${PUNCTUATION_REGEX}]`,"gu")}pre_tokenize_text(e,t){return e.trim().match(this.pattern)||[]}}class ByteLevelPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.add_prefix_space=this.config.add_prefix_space,this.trim_offsets=this.config.trim_offsets,this.use_regex=this.config.use_regex??!0,this.pattern=new RegExp("'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+","gu"),this.byte_encoder=BYTES_TO_UNICODE,this.text_encoder=new TextEncoder}pre_tokenize_text(e,t){return this.add_prefix_space&&!e.startsWith(" ")&&(e=" "+e),(this.use_regex?e.match(this.pattern)||[]:[e]).map(Ee=>Array.from(this.text_encoder.encode(Ee),Te=>this.byte_encoder[Te]).join(""))}}class SplitPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.pattern=createPattern(this.config.pattern,this.config.invert)}pre_tokenize_text(e,t){return this.pattern===null?[]:this.config.invert?e.match(this.pattern)||[]:regexSplit(e,this.pattern)}}class PunctuationPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.pattern=new RegExp(`[^${PUNCTUATION_REGEX}]+|[${PUNCTUATION_REGEX}]+`,"gu")}pre_tokenize_text(e,t){return e.match(this.pattern)||[]}}class DigitsPreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e;const t=`[^\\d]+|\\d${this.config.individual_digits?"":"+"}`;this.pattern=new RegExp(t,"gu")}pre_tokenize_text(e,t){return e.match(this.pattern)||[]}}class PostProcessor extends Callable{constructor(e){super(),this.config=e}static fromConfig(e){if(e===null)return null;switch(e.type){case"TemplateProcessing":return new TemplateProcessing(e);case"ByteLevel":return new ByteLevelPostProcessor(e);case"RobertaProcessing":return new RobertaProcessing(e);case"BertProcessing":return new BertProcessing(e);case"Sequence":return new PostProcessorSequence(e);default:throw new Error(`Unknown PostProcessor type: ${e.type}`)}}post_process(e,...t){throw Error("post_process should be implemented in subclass.")}_call(e,...t){return this.post_process(e,...t)}}class BertProcessing extends PostProcessor{constructor(e){super(e),this.cls=e.cls[0],this.sep=e.sep[0]}post_process(e,t=null,{add_special_tokens:r=!0}={}){r&&(e=mergeArrays([this.cls],e,[this.sep]));let Ee=new Array(e.length).fill(0);if(t!==null){const Te=r&&this instanceof RobertaProcessing?[this.sep]:[],Re=r?[this.sep]:[];e=mergeArrays(e,Te,t,Re),Ee=mergeArrays(Ee,new Array(t.length+Te.length+Re.length).fill(1))}return{tokens:e,token_type_ids:Ee}}}class RobertaProcessing extends BertProcessing{}class TemplateProcessing extends PostProcessor{constructor(e){super(e),this.single=e.single,this.pair=e.pair}post_process(e,t=null,{add_special_tokens:r=!0}={}){const Ee=t===null?this.single:this.pair;let Te=[],Re=[];for(const Me of Ee)"SpecialToken"in Me?r&&(Te.push(Me.SpecialToken.id),Re.push(Me.SpecialToken.type_id)):"Sequence"in Me&&(Me.Sequence.id==="A"?(Te=mergeArrays(Te,e),Re=mergeArrays(Re,new Array(e.length).fill(Me.Sequence.type_id))):Me.Sequence.id==="B"&&(Te=mergeArrays(Te,t),Re=mergeArrays(Re,new Array(t.length).fill(Me.Sequence.type_id))));return{tokens:Te,token_type_ids:Re}}}class ByteLevelPostProcessor extends PostProcessor{post_process(e,t=null){return t&&(e=mergeArrays(e,t)),{tokens:e}}}class PostProcessorSequence extends PostProcessor{constructor(e){super(e),this.processors=e.processors.map(t=>PostProcessor.fromConfig(t))}post_process(e,t=null,r={}){let Ee;for(const Te of this.processors)if(Te instanceof ByteLevelPostProcessor)e=Te.post_process(e).tokens,t&&(t=Te.post_process(t).tokens);else{const Re=Te.post_process(e,t,r);e=Re.tokens,Ee=Re.token_type_ids}return{tokens:e,token_type_ids:Ee}}}class Decoder extends Callable{constructor(e){super(),this.config=e,this.added_tokens=[],this.end_of_word_suffix=null,this.trim_offsets=e.trim_offsets}static fromConfig(e){if(e===null)return null;switch(e.type){case"WordPiece":return new WordPieceDecoder(e);case"Metaspace":return new MetaspaceDecoder(e);case"ByteLevel":return new ByteLevelDecoder(e);case"Replace":return new ReplaceDecoder(e);case"ByteFallback":return new ByteFallback(e);case"Fuse":return new FuseDecoder(e);case"Strip":return new StripDecoder(e);case"Sequence":return new DecoderSequence(e);case"CTC":return new CTCDecoder(e);case"BPEDecoder":return new BPEDecoder(e);default:throw new Error(`Unknown Decoder type: ${e.type}`)}}_call(e){return this.decode(e)}decode(e){return this.decode_chain(e).join("")}decode_chain(e){throw Error("`decode_chain` should be implemented in subclass.")}}class ReplaceDecoder extends Decoder{decode_chain(e){const t=createPattern(this.config.pattern);return t===null?e:e.map(r=>r.replaceAll(t,this.config.content))}}class ByteFallback extends Decoder{constructor(e){super(e),this.text_decoder=new TextDecoder}decode_chain(e){const t=[];let r=[];for(const Ee of e){let Te=null;if(Ee.length===6&&Ee.startsWith("<0x")&&Ee.endsWith(">")){const Re=parseInt(Ee.slice(3,5),16);isNaN(Re)||(Te=Re)}if(Te!==null)r.push(Te);else{if(r.length>0){const Re=this.text_decoder.decode(Uint8Array.from(r));t.push(Re),r=[]}t.push(Ee)}}if(r.length>0){const Ee=this.text_decoder.decode(Uint8Array.from(r));t.push(Ee),r=[]}return t}}class FuseDecoder extends Decoder{decode_chain(e){return[e.join("")]}}class StripDecoder extends Decoder{constructor(e){super(e),this.content=this.config.content,this.start=this.config.start,this.stop=this.config.stop}decode_chain(e){return e.map(t=>{let r=0;for(let Te=0;Te<this.start&&t[Te]===this.content;++Te){r=Te+1;continue}let Ee=t.length;for(let Te=0;Te<this.stop;++Te){const Re=t.length-Te-1;if(t[Re]===this.content){Ee=Re;continue}else break}return t.slice(r,Ee)})}}class WordPieceDecoder extends Decoder{constructor(e){super(e),this.cleanup=e.cleanup}decode_chain(e){return e.map((t,r)=>(r!==0&&(t.startsWith(this.config.prefix)?t=t.replace(this.config.prefix,""):t=" "+t),this.cleanup&&(t=clean_up_tokenization(t)),t))}}class ByteLevelDecoder extends Decoder{constructor(e){super(e),this.byte_decoder=UNICODE_TO_BYTES,this.text_decoder=new TextDecoder("utf-8",{fatal:!1,ignoreBOM:!0}),this.end_of_word_suffix=null}convert_tokens_to_string(e){const t=e.join(""),r=new Uint8Array([...t].map(Te=>this.byte_decoder[Te]));return this.text_decoder.decode(r)}decode_chain(e){const t=[];let r=[];for(const Ee of e)this.added_tokens.find(Te=>Te.content===Ee)!==void 0?(r.length>0&&(t.push(this.convert_tokens_to_string(r)),r=[]),t.push(Ee)):r.push(Ee);return r.length>0&&t.push(this.convert_tokens_to_string(r)),t}}class CTCDecoder extends Decoder{constructor(e){super(e),this.pad_token=this.config.pad_token,this.word_delimiter_token=this.config.word_delimiter_token,this.cleanup=this.config.cleanup}convert_tokens_to_string(e){if(e.length===0)return"";const t=[e[0]];for(let Te=1;Te<e.length;++Te)e[Te]!==t.at(-1)&&t.push(e[Te]);let Ee=t.filter(Te=>Te!==this.pad_token).join("");return this.cleanup&&(Ee=clean_up_tokenization(Ee).replaceAll(this.word_delimiter_token," ").trim()),Ee}decode_chain(e){return[this.convert_tokens_to_string(e)]}}class DecoderSequence extends Decoder{constructor(e){super(e),this.decoders=e.decoders.map(t=>Decoder.fromConfig(t))}decode_chain(e){return this.decoders.reduce((t,r)=>r.decode_chain(t),e)}}class BPEDecoder extends Decoder{constructor(e){super(e),this.suffix=this.config.suffix}decode_chain(e){return e.map((t,r)=>t.replaceAll(this.suffix,r===e.length-1?"":" "))}}class VitsDecoder extends Decoder{decode_chain(e){let t="";for(let r=1;r<e.length;r+=2)t+=e[r];return[t]}}class MetaspacePreTokenizer extends PreTokenizer{constructor(e){super(),this.addPrefixSpace=e.add_prefix_space,this.replacement=e.replacement,this.strRep=e.str_rep||this.replacement,this.prepend_scheme=e.prepend_scheme??"always"}pre_tokenize_text(e,{section_index:t=void 0}={}){let r=e.replaceAll(" ",this.strRep);return this.addPrefixSpace&&!r.startsWith(this.replacement)&&(this.prepend_scheme==="always"||this.prepend_scheme==="first"&&t===0)&&(r=this.strRep+r),[r]}}class MetaspaceDecoder extends Decoder{constructor(e){super(e),this.addPrefixSpace=e.add_prefix_space,this.replacement=e.replacement}decode_chain(e){const t=[];for(let r=0;r<e.length;++r){let Ee=e[r].replaceAll(this.replacement," ");this.addPrefixSpace&&r==0&&Ee.startsWith(" ")&&(Ee=Ee.substring(1)),t.push(Ee)}return t}}class Precompiled extends Normalizer{constructor(e){super(e),this.charsmap=e.precompiled_charsmap}normalize(e){return e=e.replace(/[\u0001-\u0008\u000B\u000E-\u001F\u007F\u008F\u009F]/gm,""),e=e.replace(/[\u0009\u000A\u000C\u000D\u1680\u200B\u200C\u200E\u200F\u2028\u2029\u2581\uFEFF\uFFFD]/gm," "),e.includes("～")?e=e.split("～").map(r=>r.normalize("NFKC")).join("～"):e=e.normalize("NFKC"),e}}class PreTokenizerSequence extends PreTokenizer{constructor(e){super(),this.tokenizers=e.pretokenizers.map(t=>PreTokenizer.fromConfig(t))}pre_tokenize_text(e,t){return this.tokenizers.reduce((r,Ee)=>Ee.pre_tokenize(r,t),[e])}}class WhitespacePreTokenizer extends PreTokenizer{constructor(e){super()}pre_tokenize_text(e,t){return e.match(/\w+|[^\w\s]+/g)||[]}}class WhitespaceSplit extends PreTokenizer{constructor(e){super()}pre_tokenize_text(e,t){return whitespace_split(e)}}class ReplacePreTokenizer extends PreTokenizer{constructor(e){super(),this.config=e,this.pattern=createPattern(this.config.pattern),this.content=this.config.content}pre_tokenize_text(e,t){return this.pattern===null?[e]:[e.replaceAll(this.pattern,this.config.content)]}}const SPECIAL_TOKEN_ATTRIBUTES=["bos_token","eos_token","unk_token","sep_token","pad_token","cls_token","mask_token"];function padHelper(n,e,t,r){for(const Ee of Object.keys(n)){const Te=e-n[Ee].length,Re=t(Ee),Me=new Array(Te).fill(Re);n[Ee]=r==="right"?mergeArrays(n[Ee],Me):mergeArrays(Me,n[Ee])}}function truncateHelper(n,e){for(const t of Object.keys(n))n[t].length=e}class PreTrainedTokenizer extends Callable{return_token_type_ids=!1;_default_chat_template=`{% for message in messages %}{{'<|im_start|>' + message['role'] + '
' + message['content'] + '<|im_end|>' + '
'}}{% endfor %}{% if add_generation_prompt %}{{ '<|im_start|>assistant
' }}{% endif %}`;constructor(e,t){super(),this._tokenizer_config=t,this.normalizer=Normalizer.fromConfig(e.normalizer),this.pre_tokenizer=PreTokenizer.fromConfig(e.pre_tokenizer),this.model=TokenizerModel.fromConfig(e.model,t),this.post_processor=PostProcessor.fromConfig(e.post_processor),this.decoder=Decoder.fromConfig(e.decoder),this.special_tokens=[],this.all_special_ids=[],this.added_tokens=[];for(const r of e.added_tokens){const Ee=new AddedToken(r);this.added_tokens.push(Ee),this.model.tokens_to_ids.set(Ee.content,Ee.id),this.model.vocab[Ee.id]=Ee.content,Ee.special&&(this.special_tokens.push(Ee.content),this.all_special_ids.push(Ee.id))}if(this.additional_special_tokens=t.additional_special_tokens??[],this.special_tokens.push(...this.additional_special_tokens),this.special_tokens=[...new Set(this.special_tokens)],this.decoder&&(this.decoder.added_tokens=this.added_tokens,this.decoder.end_of_word_suffix=this.model.end_of_word_suffix),this.added_tokens_regex=this.added_tokens.length>0?new RegExp(this.added_tokens.map(r=>`${r.lstrip?"\\s*":""}(${escapeRegExp(r.content)})${r.rstrip?"\\s*":""}`).join("|")):null,this.mask_token=this.getToken("mask_token"),this.mask_token_id=this.model.tokens_to_ids.get(this.mask_token),this.pad_token=this.getToken("pad_token","eos_token"),this.pad_token_id=this.model.tokens_to_ids.get(this.pad_token),this.sep_token=this.getToken("sep_token"),this.sep_token_id=this.model.tokens_to_ids.get(this.sep_token),this.unk_token=this.getToken("unk_token"),this.unk_token_id=this.model.tokens_to_ids.get(this.unk_token),this.model_max_length=t.model_max_length,this.remove_space=t.remove_space,this.clean_up_tokenization_spaces=t.clean_up_tokenization_spaces??!0,this.do_lowercase_and_remove_accent=t.do_lowercase_and_remove_accent??!1,this.padding_side="right",this.legacy=!1,this.chat_template=t.chat_template??null,Array.isArray(this.chat_template)){const r=Object.create(null);for(const{name:Ee,template:Te}of this.chat_template){if(typeof Ee!="string"||typeof Te!="string")throw new Error('Chat template must be a list of objects with "name" and "template" properties');r[Ee]=Te}this.chat_template=r}this._compiled_template_cache=new Map}getToken(...e){for(const t of e){const r=this._tokenizer_config[t];if(r)if(typeof r=="object"){if(r.__type==="AddedToken")return r.content;throw Error(`Unknown token: ${r}`)}else return r}return null}static async from_pretrained(e,{progress_callback:t=null,config:r=null,cache_dir:Ee=null,local_files_only:Te=!1,revision:Re="main",legacy:Me=null}={}){const Ve=await loadTokenizer(e,{progress_callback:t,cache_dir:Ee,local_files_only:Te,revision:Re,legacy:Me});return new this(...Ve)}_call(e,{text_pair:t=null,add_special_tokens:r=!0,padding:Ee=!1,truncation:Te=null,max_length:Re=null,return_tensor:Me=!0,return_token_type_ids:Ve=null}={}){const De=Array.isArray(e);let $e;if(De){if(e.length===0)throw Error("text array must be non-empty");if(t!==null){if(Array.isArray(t)){if(e.length!==t.length)throw Error("text and text_pair must have the same length")}else throw Error("text_pair must also be an array");$e=e.map((Ce,Be)=>this._encode_plus(Ce,t[Be],{add_special_tokens:r,return_token_type_ids:Ve}))}else $e=e.map(Ce=>this._encode_plus(Ce,null,{add_special_tokens:r,return_token_type_ids:Ve}))}else{if(e==null)throw Error("text may not be null or undefined");if(Array.isArray(t))throw Error("When specifying `text_pair`, since `text` is a string, `text_pair` must also be a string (i.e., not an array).");$e=[this._encode_plus(e,t,{add_special_tokens:r,return_token_type_ids:Ve})]}if(Re===null?Ee==="max_length"?Re=this.model_max_length:Re=max($e.map(Ce=>Ce.input_ids.length))[0]:Te||console.warn("Truncation was not explicitly activated but `max_length` is provided a specific value, please use `truncation=true` to explicitly truncate examples to max length."),Re=Math.min(Re,this.model_max_length),Ee||Te)for(let Ce=0;Ce<$e.length;++Ce)$e[Ce].input_ids.length!==Re&&($e[Ce].input_ids.length>Re?Te&&truncateHelper($e[Ce],Re):Ee&&padHelper($e[Ce],Re,Be=>Be==="input_ids"?this.pad_token_id:0,this.padding_side));const Oe={};if(Me){if(!(Ee&&Te)&&$e.some(Be=>{for(const Ue of Object.keys(Be))if(Be[Ue].length!==$e[0][Ue]?.length)return!0;return!1}))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=true' and 'truncation=true' to have batched tensors with the same length.");const Ce=[$e.length,$e[0].input_ids.length];for(const Be of Object.keys($e[0]))Oe[Be]=new Tensor("int64",BigInt64Array.from($e.flatMap(Ue=>Ue[Be]).map(BigInt)),Ce)}else{for(const Ce of Object.keys($e[0]))Oe[Ce]=$e.map(Be=>Be[Ce]);if(!De)for(const Ce of Object.keys(Oe))Oe[Ce]=Oe[Ce][0]}return Oe}_encode_text(e){return e===null?null:(this.added_tokens_regex?e.split(this.added_tokens_regex).filter(Ee=>Ee):[e]).map((Ee,Te)=>{if(this.added_tokens.find(Me=>Me.content===Ee)!==void 0)return Ee;{if(this.remove_space===!0&&(Ee=Ee.trim().split(/\s+/).join(" ")),this.do_lowercase_and_remove_accent&&(Ee=lowercase_and_remove_accent(Ee)),this.normalizer!==null&&(Ee=this.normalizer(Ee)),Ee.length===0)return[];const Me=this.pre_tokenizer!==null?this.pre_tokenizer(Ee,{section_index:Te}):[Ee];return this.model(Me)}}).flat()}_encode_plus(e,t=null,{add_special_tokens:r=!0,return_token_type_ids:Ee=null}={}){const Te=this._encode_text(e),Re=this._encode_text(t),Me=this.post_processor?this.post_processor(Te,Re,{add_special_tokens:r}):{tokens:mergeArrays(Te??[],Re??[])},Ve=this.model.convert_tokens_to_ids(Me.tokens),De={input_ids:Ve,attention_mask:new Array(Ve.length).fill(1)};return(Ee??this.return_token_type_ids)&&Me.token_type_ids&&(De.token_type_ids=Me.token_type_ids),De}encode(e,t=null,{add_special_tokens:r=!0,return_token_type_ids:Ee=null}={}){const{input_ids:Te}=this._encode_plus(e,t,{add_special_tokens:r,return_token_type_ids:Ee});return Te}batch_decode(e,t={}){return e instanceof Tensor&&(e=e.tolist()),e.map(r=>this.decode(r,t))}decode(e,t={}){if(e instanceof Tensor&&(e=prepareTensorForDecode(e)),!Array.isArray(e)||e.length===0||!isIntegralNumber(e[0]))throw Error("token_ids must be a non-empty array of integers.");return this.decode_single(e,t)}decode_single(e,{skip_special_tokens:t=!1,clean_up_tokenization_spaces:r=null}){let Ee=this.model.convert_ids_to_tokens(e);t&&(Ee=Ee.filter(Re=>!this.special_tokens.includes(Re)));let Te=this.decoder?this.decoder(Ee):Ee.join(" ");return this.decoder&&this.decoder.end_of_word_suffix&&(Te=Te.replaceAll(this.decoder.end_of_word_suffix," "),t&&(Te=Te.trim())),(r??this.clean_up_tokenization_spaces)&&(Te=clean_up_tokenization(Te)),Te}get default_chat_template(){return this._warned_about_chat_template||(console.warn("No chat template is defined for this tokenizer - using a default chat template that implements the ChatML format. If the default is not appropriate for your model, please set `tokenizer.chat_template` to an appropriate template. See https://huggingface.co/docs/transformers/main/chat_templating for more information."),this._warned_about_chat_template=!0),this._default_chat_template}apply_chat_template(e,{chat_template:t=null,add_generation_prompt:r=!1,tokenize:Ee=!0,padding:Te=!1,truncation:Re=!1,max_length:Me=null,return_tensor:Ve=!0,tokenizer_kwargs:De={},...$e}={}){if(this.chat_template&&typeof this.chat_template=="object"||this.chat_template===null&&this.default_chat_template&&typeof this.default_chat_template=="object"){const Ue=this.chat_template??this.default_chat_template;if(t!==null&&Object.hasOwn(Ue,t))t=Ue[t];else if(t===null&&"default"in Ue)t=Ue.default;else if(t===null)throw Error(`This model has multiple chat templates with no default specified! Please either pass a chat template or the name of the template you wish to use to the 'chat_template' argument. Available template names are ${Object.keys(Ue).sort()}.`)}else t??=this.chat_template??this.default_chat_template;if(typeof t!="string")throw Error(`chat_template must be a string, but got ${typeof t}`);let Oe=this._compiled_template_cache.get(t);Oe===void 0&&(Oe=new Template(t),this._compiled_template_cache.set(t,Oe));const Ce=Object.create(null);for(const Ue of SPECIAL_TOKEN_ATTRIBUTES){const We=this.getToken(Ue);We&&(Ce[Ue]=We)}const Be=Oe.render({messages:e,add_generation_prompt:r,...Ce,...$e});return Ee?this._call(Be,{add_special_tokens:!1,padding:Te,truncation:Re,max_length:Me,return_tensor:Ve,...De}).input_ids:Be}}class BertTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class AlbertTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class MobileBertTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class SqueezeBertTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class DebertaTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class DebertaV2Tokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class HerbertTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class ConvBertTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class RoFormerTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class DistilBertTokenizer extends PreTrainedTokenizer{}class CamembertTokenizer extends PreTrainedTokenizer{}class XLMTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0;constructor(e,t){super(e,t),console.warn('WARNING: `XLMTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}}class ElectraTokenizer extends PreTrainedTokenizer{return_token_type_ids=!0}class T5Tokenizer extends PreTrainedTokenizer{}class GPT2Tokenizer extends PreTrainedTokenizer{_default_chat_template='{% for message in messages %}" "{{ message.content }}{{ eos_token }}" "{% endfor %}'}class BartTokenizer extends PreTrainedTokenizer{}class MBartTokenizer extends PreTrainedTokenizer{constructor(e,t){super(e,t),this.languageRegex=/^[a-z]{2}_[A-Z]{2}$/,this.language_codes=this.special_tokens.filter(r=>this.languageRegex.test(r)),this.lang_to_token=r=>r}_build_translation_inputs(e,t,r){return _build_translation_inputs(this,e,t,r)}}class MBart50Tokenizer extends MBartTokenizer{}class RobertaTokenizer extends PreTrainedTokenizer{}class BloomTokenizer extends GPT2Tokenizer{constructor(e,t){const r=".,!?…。，、।۔،",Ee=e.pre_tokenizer?.pretokenizers[0]?.pattern;Ee&&Ee.Regex===` ?[^(\\s|[${r}])]+`&&(Ee.Regex=` ?[^\\s${r}]+`),super(e,t)}}const SPIECE_UNDERLINE="▁";class LlamaTokenizer extends PreTrainedTokenizer{_default_chat_template=`{% if messages[0]['role'] == 'system' %}{% set loop_messages = messages[1:] %}{% set system_message = messages[0]['content'] %}{% elif USE_DEFAULT_PROMPT == true and not '<<SYS>>' in messages[0]['content'] %}{% set loop_messages = messages %}{% set system_message = 'DEFAULT_SYSTEM_MESSAGE' %}{% else %}{% set loop_messages = messages %}{% set system_message = false %}{% endif %}{% for message in loop_messages %}{% if (message['role'] == 'user') != (loop.index0 % 2 == 0) %}{{ raise_exception('Conversation roles must alternate user/assistant/user/assistant/...') }}{% endif %}{% if loop.index0 == 0 and system_message != false %}{% set content = '<<SYS>>
' + system_message + '
<</SYS>>

' + message['content'] %}{% else %}{% set content = message['content'] %}{% endif %}{% if message['role'] == 'user' %}{{ bos_token + '[INST] ' + content.strip() + ' [/INST]' }}{% elif message['role'] == 'system' %}{{ '<<SYS>>
' + content.strip() + '
<</SYS>>

' }}{% elif message['role'] == 'assistant' %}{{ ' '  + content.strip() + ' ' + eos_token }}{% endif %}{% endfor %}`;DEFAULT_SYSTEM_PROMPT=`You are a helpful, respectful and honest assistant. Always answer as helpfully as possible, while being safe. Your answers should not include any harmful, unethical, racist, sexist, toxic, dangerous, or illegal content. Please ensure that your responses are socially unbiased and positive in nature.

If a question does not make any sense, or is not factually coherent, explain why instead of answering something not correct. If you don't know the answer to a question, please don't share false information.`;constructor(e,t){super(e,t),this.use_default_system_prompt=t.use_default_system_prompt??!1,this.legacy=t.legacy??!0,this.legacy||(this.normalizer=null,this.pre_tokenizer=new MetaspacePreTokenizer({replacement:SPIECE_UNDERLINE,add_prefix_space:!0,prepend_scheme:"first"}))}_encode_text(e){if(e===null)return null;if(this.legacy||e.length===0)return super._encode_text(e);let t=super._encode_text(SPIECE_UNDERLINE+e.replaceAll(SPIECE_UNDERLINE," "));return t.length>1&&t[0]===SPIECE_UNDERLINE&&this.special_tokens.includes(t[1])&&(t=t.slice(1)),t}get default_chat_template(){return super.default_chat_template.replaceAll("USE_DEFAULT_PROMPT",this.use_default_system_prompt?"true":"false").replaceAll("DEFAULT_SYSTEM_MESSAGE",this.DEFAULT_SYSTEM_PROMPT.replaceAll(`
`,"\\n").replaceAll("'","\\'"))}}class CodeLlamaTokenizer extends LlamaTokenizer{}class XLMRobertaTokenizer extends PreTrainedTokenizer{}class MPNetTokenizer extends PreTrainedTokenizer{}class FalconTokenizer extends PreTrainedTokenizer{}class GPTNeoXTokenizer extends PreTrainedTokenizer{}class EsmTokenizer extends PreTrainedTokenizer{}class Qwen2Tokenizer extends PreTrainedTokenizer{}class GemmaTokenizer extends PreTrainedTokenizer{_default_chat_template=`{% if messages[0]['role'] == 'system' %}{{ raise_exception('System role not supported') }}{% endif %}{% for message in messages %}{% if (message['role'] == 'user') != (loop.index0 % 2 == 0) %}{{ raise_exception('Conversation roles must alternate user/assistant/user/assistant/...') }}{% endif %}{% if (message['role'] == 'assistant') %}{% set role = 'model' %}{% else %}{% set role = message['role'] %}{% endif %}{{ '<start_of_turn>' + role + '
' + message['content'] | trim + '<end_of_turn>
' }}{% endfor %}{% if add_generation_prompt %}{{'<start_of_turn>model
'}}{% endif %}`}class Grok1Tokenizer extends PreTrainedTokenizer{}function _build_translation_inputs(n,e,t,r){if(!("language_codes"in n)||!Array.isArray(n.language_codes))throw new Error("Tokenizer must have `language_codes` attribute set and it should be an array of language ids.");if(!("languageRegex"in n)||!(n.languageRegex instanceof RegExp))throw new Error("Tokenizer must have `languageRegex` attribute set and it should be a regular expression.");if(!("lang_to_token"in n)||typeof n.lang_to_token!="function")throw new Error("Tokenizer must have `lang_to_token` attribute set and it should be a function.");const Ee=r.src_lang,Te=r.tgt_lang;if(!n.language_codes.includes(Te))throw new Error(`Target language code "${Te}" is not valid. Must be one of: {${n.language_codes.join(", ")}}`);if(Ee!==void 0){if(!n.language_codes.includes(Ee))throw new Error(`Source language code "${Ee}" is not valid. Must be one of: {${n.language_codes.join(", ")}}`);for(const Re of n.post_processor.config.single)if("SpecialToken"in Re&&n.languageRegex.test(Re.SpecialToken.id)){Re.SpecialToken.id=n.lang_to_token(Ee);break}}return r.forced_bos_token_id=n.model.convert_tokens_to_ids([n.lang_to_token(Te)])[0],n._call(e,t)}class NllbTokenizer extends PreTrainedTokenizer{constructor(e,t){super(e,t),this.languageRegex=/^[a-z]{3}_[A-Z][a-z]{3}$/,this.language_codes=this.special_tokens.filter(r=>this.languageRegex.test(r)),this.lang_to_token=r=>r}_build_translation_inputs(e,t,r){return _build_translation_inputs(this,e,t,r)}}class M2M100Tokenizer extends PreTrainedTokenizer{constructor(e,t){super(e,t),this.languageRegex=/^__[a-z]{2,3}__$/,this.language_codes=this.special_tokens.filter(r=>this.languageRegex.test(r)).map(r=>r.slice(2,-2)),this.lang_to_token=r=>`__${r}__`}_build_translation_inputs(e,t,r){return _build_translation_inputs(this,e,t,r)}}const WHISPER_LANGUAGES=[["en","english"],["zh","chinese"],["de","german"],["es","spanish"],["ru","russian"],["ko","korean"],["fr","french"],["ja","japanese"],["pt","portuguese"],["tr","turkish"],["pl","polish"],["ca","catalan"],["nl","dutch"],["ar","arabic"],["sv","swedish"],["it","italian"],["id","indonesian"],["hi","hindi"],["fi","finnish"],["vi","vietnamese"],["he","hebrew"],["uk","ukrainian"],["el","greek"],["ms","malay"],["cs","czech"],["ro","romanian"],["da","danish"],["hu","hungarian"],["ta","tamil"],["no","norwegian"],["th","thai"],["ur","urdu"],["hr","croatian"],["bg","bulgarian"],["lt","lithuanian"],["la","latin"],["mi","maori"],["ml","malayalam"],["cy","welsh"],["sk","slovak"],["te","telugu"],["fa","persian"],["lv","latvian"],["bn","bengali"],["sr","serbian"],["az","azerbaijani"],["sl","slovenian"],["kn","kannada"],["et","estonian"],["mk","macedonian"],["br","breton"],["eu","basque"],["is","icelandic"],["hy","armenian"],["ne","nepali"],["mn","mongolian"],["bs","bosnian"],["kk","kazakh"],["sq","albanian"],["sw","swahili"],["gl","galician"],["mr","marathi"],["pa","punjabi"],["si","sinhala"],["km","khmer"],["sn","shona"],["yo","yoruba"],["so","somali"],["af","afrikaans"],["oc","occitan"],["ka","georgian"],["be","belarusian"],["tg","tajik"],["sd","sindhi"],["gu","gujarati"],["am","amharic"],["yi","yiddish"],["lo","lao"],["uz","uzbek"],["fo","faroese"],["ht","haitian creole"],["ps","pashto"],["tk","turkmen"],["nn","nynorsk"],["mt","maltese"],["sa","sanskrit"],["lb","luxembourgish"],["my","myanmar"],["bo","tibetan"],["tl","tagalog"],["mg","malagasy"],["as","assamese"],["tt","tatar"],["haw","hawaiian"],["ln","lingala"],["ha","hausa"],["ba","bashkir"],["jw","javanese"],["su","sundanese"]],WHISPER_LANGUAGE_MAPPING=new Map(WHISPER_LANGUAGES),WHISPER_TO_LANGUAGE_CODE_MAPPING=new Map([...WHISPER_LANGUAGES.map(([n,e])=>[e,n]),["burmese","my"],["valencian","ca"],["flemish","nl"],["haitian","ht"],["letzeburgesch","lb"],["pushto","ps"],["panjabi","pa"],["moldavian","ro"],["moldovan","ro"],["sinhalese","si"],["castilian","es"]]);class WhisperTokenizer extends PreTrainedTokenizer{_default_chat_template='{% for message in messages %}" "{{ message.content }}{{ eos_token }}" "{% endfor %}';_decode_asr(e,{return_timestamps:t=!1,return_language:r=!1,time_precision:Ee=null,force_full_sequences:Te=!0}={}){if(Ee===null)throw Error("Must specify time_precision");let Re=null;const Me=t==="word";function Ve(){return{language:Re,timestamp:[null,null],text:""}}const De=[];let $e=Ve(),Oe=0;const Ce=this.model.convert_tokens_to_ids(["<|notimestamps|>"])[0]+1;let Be=[],Ue=[],We=!1,He=null;const Ge=new Set(this.all_special_ids);for(const Ze of e){const fn=Ze.tokens,yn=Me?Ze.token_timestamps:null;let mn=null,pn=Ce;if("stride"in Ze){const[gn,xn,En]=Ze.stride;if(Oe-=xn,He=gn-En,xn&&(pn=xn/Ee+Ce),En)for(let Pn=fn.length-1;Pn>=0;--Pn){const Ln=fn[Pn];if(Ln>=Ce){if(mn!==null&&(Ln-Ce)*Ee<He)break;mn=Ln}}}let un=[],bn=[];for(let gn=0;gn<fn.length;++gn){const xn=fn[gn];if(Ge.has(xn)){const En=this.decode([xn]),Pn=WHISPER_LANGUAGE_MAPPING.get(En.slice(2,-2));if(Pn!==void 0){if(Re!==null&&Pn!==Re&&!t){Be.push(un);const Ln=this.findLongestCommonSequence(Be)[0],Cn=this.decode(Ln);$e.text=Cn,De.push($e),Be=[],un=[],$e=Ve()}Re=$e.language=Pn}}else if(xn>=Ce){const En=(xn-Ce)*Ee+Oe,Pn=round(En,2);if(mn!==null&&xn>=mn)We=!0;else if(We||Be.length>0&&xn<pn)We=!1;else if($e.timestamp[0]===null)$e.timestamp[0]=Pn;else if(Pn!==$e.timestamp[0]){$e.timestamp[1]=Pn,Be.push(un),Me&&Ue.push(bn);const[Ln,Cn]=this.findLongestCommonSequence(Be,Ue),Dn=this.decode(Ln);$e.text=Dn,Me&&($e.words=this.collateWordTimestamps(Ln,Cn,Re)),De.push($e),Be=[],un=[],Ue=[],bn=[],$e=Ve()}}else if(un.push(xn),Me){let En=round(yn[gn]+Oe,2),Pn;gn+1<yn.length?Pn=round(yn[gn+1]+Oe,2):Pn=null,bn.push([En,Pn])}}if("stride"in Ze){const[gn,xn,En]=Ze.stride;Oe+=gn-En}un.length>0?(Be.push(un),Me&&Ue.push(bn)):Be.every(gn=>gn.length===0)&&($e=Ve(),Be=[],un=[],Ue=[],bn=[])}if(Be.length>0){if(Te&&t)throw new Error("Whisper did not predict an ending timestamp, which can happen if audio is cut off in the middle of a word. Also make sure WhisperTimeStampLogitsProcessor was used during generation.");const[Ze,fn]=this.findLongestCommonSequence(Be,Ue),yn=this.decode(Ze);$e.text=yn,Me&&($e.words=this.collateWordTimestamps(Ze,fn,Re)),De.push($e)}let Ye=Object.create(null);const Je=De.map(Ze=>Ze.text).join("");if(t||r){for(let Ze=0;Ze<De.length;++Ze){const fn=De[Ze];t||delete fn.timestamp,r||delete fn.language}if(Me){const Ze=[];for(const fn of De)for(const yn of fn.words)Ze.push(yn);Ye={chunks:Ze}}else Ye={chunks:De}}return[Je,Ye]}findLongestCommonSequence(e,t=null){let r=e[0],Ee=r.length,Te=[];const Re=Array.isArray(t)&&t.length>0;let Me=Re?[]:null,Ve=Re?t[0]:null;for(let De=1;De<e.length;++De){const $e=e[De];let Oe=0,Ce=[Ee,Ee,0,0];const Be=$e.length;for(let Ze=1;Ze<Ee+Be;++Ze){const fn=Ze/1e4,yn=Math.max(0,Ee-Ze),mn=Math.min(Ee,Ee+Be-Ze),pn=r.slice(yn,mn),un=Math.max(0,Ze-Ee),bn=Math.min(Be,Ze),gn=$e.slice(un,bn);if(pn.length!==gn.length)throw new Error("There is a bug within whisper `decode_asr` function, please report it. Dropping to prevent bad inference.");const xn=pn.filter((Pn,Ln)=>Pn===gn[Ln]).length,En=xn/Ze+fn;xn>1&&En>Oe&&(Oe=En,Ce=[yn,mn,un,bn])}const[Ue,We,He,Ge]=Ce,Ye=Math.floor((We+Ue)/2),Je=Math.floor((Ge+He)/2);Te.push(...r.slice(0,Ye)),r=$e.slice(Je),Ee=r.length,Re&&(Me.push(...Ve.slice(0,Ye)),Ve=t[De].slice(Je))}return Te.push(...r),Re?(Me.push(...Ve),[Te,Me]):[Te,[]]}collateWordTimestamps(e,t,r){const[Ee,Te,Re]=this.combineTokensIntoWords(e,r),Me=[];for(let Ve=0;Ve<Ee.length;++Ve){const De=Re[Ve];Me.push({text:Ee[Ve],timestamp:[t[De.at(0)][0],t[De.at(-1)][1]]})}return Me}combineTokensIntoWords(e,t,r=`"'“¡¿([{-`,Ee=`"'.。,，!！?？:：”)]}、`){t=t??"english";let Te,Re,Me;return["chinese","japanese","thai","lao","myanmar"].includes(t)?[Te,Re,Me]=this.splitTokensOnUnicode(e):[Te,Re,Me]=this.splitTokensOnSpaces(e),this.mergePunctuations(Te,Re,Me,r,Ee)}decode(e,t){let r;return t&&t.decode_with_timestamps?(e instanceof Tensor&&(e=prepareTensorForDecode(e)),r=this.decodeWithTimestamps(e,t)):r=super.decode(e,t),r}decodeWithTimestamps(e,t){const r=t?.time_precision??.02,Ee=Array.from(this.all_special_ids).at(-1)+1;let Te=[[]];for(const Re of e)if(Re>=Ee){const Me=round((Re-Ee)*r,2);Te.push(`<|${Me}|>`),Te.push([])}else Te[Te.length-1].push(Re);return Te=Te.map(Re=>typeof Re=="string"?Re:super.decode(Re,t)),Te.join("")}splitTokensOnUnicode(e){const t=this.decode(e,{decode_with_timestamps:!0}),r="�",Ee=[],Te=[],Re=[];let Me=[],Ve=[],De=0;for(let $e=0;$e<e.length;++$e){const Oe=e[$e];Me.push(Oe),Ve.push($e);const Ce=this.decode(Me,{decode_with_timestamps:!0});(!Ce.includes(r)||t[De+Ce.indexOf(r)]===r)&&(Ee.push(Ce),Te.push(Me),Re.push(Ve),Me=[],Ve=[],De+=Ce.length)}return[Ee,Te,Re]}splitTokensOnSpaces(e){const[t,r,Ee]=this.splitTokensOnUnicode(e),Te=[],Re=[],Me=[],Ve=new RegExp(`^[${PUNCTUATION_REGEX}]$`,"gu");for(let De=0;De<t.length;++De){const $e=t[De],Oe=r[De],Ce=Ee[De],Be=Oe[0]>=this.model.tokens_to_ids.get("<|endoftext|>"),Ue=$e.startsWith(" "),We=$e.trim(),He=Ve.test(We);if(Be||Ue||He||Te.length===0)Te.push($e),Re.push(Oe),Me.push(Ce);else{const Ge=Te.length-1;Te[Ge]+=$e,Re[Ge].push(...Oe),Me[Ge].push(...Ce)}}return[Te,Re,Me]}mergePunctuations(e,t,r,Ee,Te){const Re=structuredClone(e),Me=structuredClone(t),Ve=structuredClone(r);let De=Re.length-2,$e=Re.length-1;for(;De>=0;)Re[De].startsWith(" ")&&Ee.includes(Re[De].trim())?(Re[$e]=Re[De]+Re[$e],Me[$e]=mergeArrays(Me[De],Me[$e]),Ve[$e]=mergeArrays(Ve[De],Ve[$e]),Re[De]="",Me[De]=[],Ve[De]=[]):$e=De,--De;for(De=0,$e=1;$e<Re.length;)!Re[De].endsWith(" ")&&Te.includes(Re[$e])?(Re[De]+=Re[$e],Me[De]=mergeArrays(Me[De],Me[$e]),Ve[De]=mergeArrays(Ve[De],Ve[$e]),Re[$e]="",Me[$e]=[],Ve[$e]=[]):De=$e,++$e;return[Re.filter(Oe=>Oe),Me.filter(Oe=>Oe.length>0),Ve.filter(Oe=>Oe.length>0)]}get_decoder_prompt_ids({language:e=null,task:t=null,no_timestamps:r=!0}={}){const Ee=[];if(e){e=e.toLowerCase();let Te=WHISPER_TO_LANGUAGE_CODE_MAPPING.get(e);if(Te===void 0)if(WHISPER_LANGUAGE_MAPPING.has(e))Te=e;else{const Ve=e.length===2?WHISPER_LANGUAGE_MAPPING.keys():WHISPER_LANGUAGE_MAPPING.values();throw new Error(`Language "${e}" is not supported. Must be one of: ${JSON.stringify(Ve)}`)}const Re=this.model.tokens_to_ids.get(`<|${Te}|>`);if(Re===void 0)throw new Error(`Unable to find language "${Te}" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.`);Ee.push(Re)}else Ee.push(null);if(t){if(t=t.toLowerCase(),t!=="transcribe"&&t!=="translate")throw new Error(`Task "${t}" is not supported. Must be one of: ["transcribe", "translate"]`);const Te=this.model.tokens_to_ids.get(`<|${t}|>`);if(Te===void 0)throw new Error(`Unable to find task "${t}" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.`);Ee.push(Te)}else Ee.push(null);if(r){const Te=this.model.tokens_to_ids.get("<|notimestamps|>");if(Te===void 0)throw new Error('Unable to find "<|notimestamps|>" in model vocabulary. Please report this issue at https://github.com/xenova/transformers.js/issues/new/choose.');Ee.push(Te)}return Ee.map((Te,Re)=>[Re+1,Te]).filter(Te=>Te[1]!==null)}}class CodeGenTokenizer extends PreTrainedTokenizer{}class CLIPTokenizer extends PreTrainedTokenizer{}class SiglipTokenizer extends PreTrainedTokenizer{}class MarianTokenizer extends PreTrainedTokenizer{constructor(e,t){super(e,t),this.languageRegex=/^(>>\w+<<)\s*/g,this.supported_language_codes=this.model.vocab.filter(r=>this.languageRegex.test(r)),console.warn('WARNING: `MarianTokenizer` is not yet supported by Hugging Face\'s "fast" tokenizers library. Therefore, you may experience slightly inaccurate results.')}_encode_text(e){if(e===null)return null;const[t,...r]=e.trim().split(this.languageRegex);if(r.length===0)return super._encode_text(t);if(r.length===2){const[Ee,Te]=r;return this.supported_language_codes.includes(Ee)||console.warn(`Unsupported language code "${Ee}" detected, which may lead to unexpected behavior. Should be one of: ${JSON.stringify(this.supported_language_codes)}`),mergeArrays([Ee],super._encode_text(Te))}}}class Wav2Vec2CTCTokenizer extends PreTrainedTokenizer{}class BlenderbotTokenizer extends PreTrainedTokenizer{_default_chat_template="{% for message in messages %}{% if message['role'] == 'user' %}{{ ' ' }}{% endif %}{{ message['content'] }}{% if not loop.last %}{{ '  ' }}{% endif %}{% endfor %}{{ eos_token }}"}class BlenderbotSmallTokenizer extends BlenderbotTokenizer{}class SpeechT5Tokenizer extends PreTrainedTokenizer{}class NougatTokenizer extends PreTrainedTokenizer{}class VitsTokenizer extends PreTrainedTokenizer{constructor(e,t){super(e,t),this.decoder=new VitsDecoder({})}}class CohereTokenizer extends PreTrainedTokenizer{}class AutoTokenizer{static TOKENIZER_CLASS_MAPPING={T5Tokenizer,DistilBertTokenizer,CamembertTokenizer,DebertaTokenizer,DebertaV2Tokenizer,BertTokenizer,HerbertTokenizer,ConvBertTokenizer,RoFormerTokenizer,XLMTokenizer,ElectraTokenizer,MobileBertTokenizer,SqueezeBertTokenizer,AlbertTokenizer,GPT2Tokenizer,BartTokenizer,MBartTokenizer,MBart50Tokenizer,RobertaTokenizer,WhisperTokenizer,CodeGenTokenizer,CLIPTokenizer,SiglipTokenizer,MarianTokenizer,BloomTokenizer,NllbTokenizer,M2M100Tokenizer,LlamaTokenizer,CodeLlamaTokenizer,XLMRobertaTokenizer,MPNetTokenizer,FalconTokenizer,GPTNeoXTokenizer,EsmTokenizer,Wav2Vec2CTCTokenizer,BlenderbotTokenizer,BlenderbotSmallTokenizer,SpeechT5Tokenizer,NougatTokenizer,VitsTokenizer,Qwen2Tokenizer,GemmaTokenizer,Grok1Tokenizer,CohereTokenizer,PreTrainedTokenizer};static async from_pretrained(e,{quantized:t=!0,progress_callback:r=null,config:Ee=null,cache_dir:Te=null,local_files_only:Re=!1,revision:Me="main",legacy:Ve=null}={}){const[De,$e]=await loadTokenizer(e,{progress_callback:r,cache_dir:Te,local_files_only:Re,revision:Me,legacy:Ve}),Oe=$e.tokenizer_class?.replace(/Fast$/,"")??"PreTrainedTokenizer";let Ce=this.TOKENIZER_CLASS_MAPPING[Oe];return Ce||(console.warn(`Unknown tokenizer class "${Oe}", attempting to construct from base class.`),Ce=PreTrainedTokenizer),new Ce(De,$e)}}async function loadConfig(n,e){return await getModelJSON(n,"config.json",!0,e)}class PretrainedConfig{constructor(e){this.model_type=null,this.is_encoder_decoder=!1,Object.assign(this,e)}static async from_pretrained(e,{progress_callback:t=null,config:r=null,cache_dir:Ee=null,local_files_only:Te=!1,revision:Re="main"}={}){let Me=r??await loadConfig(e,{progress_callback:t,cache_dir:Ee,local_files_only:Te,revision:Re});return new this(Me)}}class AutoConfig{static async from_pretrained(...e){return PretrainedConfig.from_pretrained(...e)}}class LogitsProcessorList extends Callable{constructor(){super(),this.processors=[]}push(e){this.processors.push(e)}extend(e){this.processors.push(...e)}_call(e,t){for(let r of t)this.processors.forEach(Ee=>Ee(e,r))}[Symbol.iterator](){return this.processors.values()}}class LogitsProcessor extends Callable{_call(e,t){throw Error("`_call` should be implemented in a subclass")}}class ForceTokensLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.force_token_map=Object.fromEntries(e??[])}_call(e,t){let r=this.force_token_map[e.length];return exists(r)&&(t.data.fill(-1/0),t.data[r]=0),t}}class ForcedBOSTokenLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.bos_token_id=e}_call(e,t){return e.length===1&&(t.data.fill(-1/0),t.data[this.bos_token_id]=0),t}}class ForcedEOSTokenLogitsProcessor extends LogitsProcessor{constructor(e,t){super(),this.max_length=e,this.forced_eos_token_id=t}_call(e,t){}}class SuppressTokensAtBeginLogitsProcessor extends LogitsProcessor{constructor(e,t){super(),this.begin_suppress_tokens=e,this.begin_index=t}_call(e,t){if(e.length===this.begin_index)for(let r of this.begin_suppress_tokens)t.data[r]=-1/0;return t}}class WhisperTimeStampLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.eos_token_id=e.eos_token_id,this.no_timestamps_token_id=e.no_timestamps_token_id,this.timestamp_begin=this.no_timestamps_token_id+1,this.begin_index=(e.forced_decoder_ids||[]).length+2,e.forced_decoder_ids.slice(-1)[0][1]===this.no_timestamps_token_id&&(this.begin_index-=1),this.max_initial_timestamp_index=e.max_initial_timestamp_index}_call(e,t){const r=t.data;if(r[this.no_timestamps_token_id]=-1/0,e.length===this.begin_index-1)return r.fill(-1/0),r[this.timestamp_begin]=0,t;const Ee=e.slice(this.begin_index),Te=Ee.length>=1&&Ee[Ee.length-1]>=this.timestamp_begin,Re=Ee.length<2||Ee[Ee.length-2]>=this.timestamp_begin;if(Te&&(Re?r.subarray(this.timestamp_begin).fill(-1/0):r.subarray(0,this.eos_token_id).fill(-1/0)),e.length===this.begin_index&&this.max_initial_timestamp_index!==null){const $e=this.timestamp_begin+this.max_initial_timestamp_index;r.subarray($e+1).fill(-1/0)}const Me=log_softmax(r),Ve=Math.log(Me.subarray(this.timestamp_begin).map(Math.exp).reduce(($e,Oe)=>$e+Oe)),De=max(Me.subarray(0,this.timestamp_begin))[0];return Ve>De&&r.subarray(0,this.timestamp_begin).fill(-1/0),t}}class NoRepeatNGramLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.no_repeat_ngram_size=e}getNgrams(e){const t=e.length,r=[];for(let Te=0;Te<t+1-this.no_repeat_ngram_size;++Te){const Re=[];for(let Me=0;Me<this.no_repeat_ngram_size;++Me)Re.push(e[Te+Me]);r.push(Re)}const Ee=new Map;for(const Te of r){const Re=Te.slice(0,Te.length-1),Me=JSON.stringify(Re),Ve=Ee.get(Me)??[];Ve.push(Te[Te.length-1]),Ee.set(Me,Ve)}return Ee}getGeneratedNgrams(e,t){const r=t.slice(t.length+1-this.no_repeat_ngram_size,t.length);return e.get(JSON.stringify(r))??[]}calcBannedNgramTokens(e){const t=[];if(e.length+1<this.no_repeat_ngram_size)return t;{const r=this.getNgrams(e);return this.getGeneratedNgrams(r,e)}}_call(e,t){const r=this.calcBannedNgramTokens(e);for(const Ee of r)t.data[Ee]=-1/0;return t}}class RepetitionPenaltyLogitsProcessor extends LogitsProcessor{constructor(e){super(),this.penalty=e}_call(e,t){for(const r of e)t.data[r]<0?t.data[r]*=this.penalty:t.data[r]/=this.penalty;return t}}class MinLengthLogitsProcessor extends LogitsProcessor{constructor(e,t){super(),this.min_length=e,this.eos_token_id=Array.isArray(t)?t:[t]}_call(e,t){if(e.length<this.min_length)for(const r of this.eos_token_id)t.data[r]=-1/0;return t}}class MinNewTokensLengthLogitsProcessor extends LogitsProcessor{constructor(e,t,r){super(),this.prompt_length_to_skip=e,this.min_new_tokens=t,this.eos_token_id=Array.isArray(r)?r:[r]}_call(e,t){if(e.length-this.prompt_length_to_skip<this.min_new_tokens)for(const Ee of this.eos_token_id)t.data[Ee]=-1/0;return t}}class NoBadWordsLogitsProcessor extends LogitsProcessor{constructor(e,t){super(),this.bad_words_ids=e,this.eos_token_id=Array.isArray(t)?t:[t]}_call(e,t){for(const r of this.bad_words_ids){let Ee=!0;for(let Te=1;Te<=r.length-1&&r.length<e.length;++Te)if(r.at(-Te-1)!==e.at(-Te)){Ee=!1;break}Ee&&(t.data[r.at(-1)]=-1/0)}return t}}const GenerationConfig=class{constructor(n={}){this.max_length=n.max_length??20,this.max_new_tokens=n.max_new_tokens??null,this.min_length=n.min_length??0,this.min_new_tokens=n.min_new_tokens??null,this.early_stopping=n.early_stopping??!1,this.max_time=n.max_time??null,this.do_sample=n.do_sample??!1,this.num_beams=n.num_beams??1,this.num_beam_groups=n.num_beam_groups??1,this.penalty_alpha=n.penalty_alpha??null,this.use_cache=n.use_cache??!0,this.temperature=n.temperature??1,this.top_k=n.top_k??50,this.top_p=n.top_p??1,this.typical_p=n.typical_p??1,this.epsilon_cutoff=n.epsilon_cutoff??0,this.eta_cutoff=n.eta_cutoff??0,this.diversity_penalty=n.diversity_penalty??0,this.repetition_penalty=n.repetition_penalty??1,this.encoder_repetition_penalty=n.encoder_repetition_penalty??1,this.length_penalty=n.length_penalty??1,this.no_repeat_ngram_size=n.no_repeat_ngram_size??0,this.bad_words_ids=n.bad_words_ids??null,this.force_words_ids=n.force_words_ids??null,this.renormalize_logits=n.renormalize_logits??!1,this.constraints=n.constraints??null,this.forced_bos_token_id=n.forced_bos_token_id??null,this.forced_eos_token_id=n.forced_eos_token_id??null,this.remove_invalid_values=n.remove_invalid_values??!1,this.exponential_decay_length_penalty=n.exponential_decay_length_penalty??null,this.suppress_tokens=n.suppress_tokens??null,this.begin_suppress_tokens=n.begin_suppress_tokens??null,this.forced_decoder_ids=n.forced_decoder_ids??null,this.num_return_sequences=n.num_return_sequences??1,this.output_attentions=n.output_attentions??!1,this.output_hidden_states=n.output_hidden_states??!1,this.output_scores=n.output_scores??!1,this.return_dict_in_generate=n.return_dict_in_generate??!1,this.pad_token_id=n.pad_token_id??null,this.bos_token_id=n.bos_token_id??null,this.eos_token_id=n.eos_token_id??null,this.encoder_no_repeat_ngram_size=n.encoder_no_repeat_ngram_size??0,this.decoder_start_token_id=n.decoder_start_token_id??null,this.generation_kwargs=n.generation_kwargs??{}}};class Sampler extends Callable{constructor(e){super(),this.generation_config=e}_call(e,t=-1){return this.sample(e,t)}sample(e,t){throw Error("sample should be implemented in subclasses.")}getLogits(e,t){let r=e.dims.at(-1),Ee=e.data;if(t===-1)Ee=Ee.slice(-r);else{let Te=t*r;Ee=Ee.slice(Te,Te+r)}return this.generation_config.temperature>0&&(Ee=Ee.map(Te=>Te/this.generation_config.temperature)),Ee}randomSelect(e){let t=e.reduce((Ee,Te)=>Ee+Te,0),r=Math.random()*t;for(let Ee=0;Ee<e.length;++Ee)if(r-=e[Ee],r<=0)return Ee;return 0}static getSampler(e){if(e.do_sample)return new MultinomialSampler(e);if(e.num_beams>1)return new BeamSearchSampler(e);if(e.num_return_sequences>1)throw Error(`num_return_sequences has to be 1 when doing greedy search, but is ${e.num_return_sequences}.`);return new GreedySampler(e)}}class GreedySampler extends Sampler{sample(e,t=-1){let r=this.getLogits(e,t);return[[max(r)[1],0]]}}class MultinomialSampler extends Sampler{sample(e,t=-1){let r=e.dims.at(-1);this.generation_config.top_k>0&&(r=Math.min(this.generation_config.top_k,r));const Ee=this.getLogits(e,t),Te=getTopItems(Ee,r),Re=softmax(Te.map(Me=>Me[1]));return Array.from({length:this.generation_config.num_beams},()=>{const Me=this.randomSelect(Re);return[Te[Me][0],Math.log(Re[Me])]})}}class BeamSearchSampler extends Sampler{sample(e,t=-1){let r=e.dims.at(-1);this.generation_config.top_k>0&&(r=Math.min(this.generation_config.top_k,r));const Ee=this.getLogits(e,t),Te=getTopItems(Ee,r),Re=softmax(Te.map(Me=>Me[1]));return Array.from({length:this.generation_config.num_beams},(Me,Ve)=>[Te[Ve][0],Math.log(Re[Ve])])}}const{InferenceSession,Tensor:ONNXTensor,env}=ONNX,MODEL_TYPES={EncoderOnly:0,EncoderDecoder:1,Seq2Seq:2,Vision2Seq:3,DecoderOnly:4,MaskGeneration:5},MODEL_TYPE_MAPPING=new Map,MODEL_NAME_TO_CLASS_MAPPING=new Map,MODEL_CLASS_TO_NAME_MAPPING=new Map;async function constructSession(n,e,t){let r=`onnx/${e}${t.quantized?"_quantized":""}.onnx`,Ee=await getModelFile(n,r,!0,t);try{return await InferenceSession.create(Ee,{executionProviders})}catch(Te){if(executionProviders.length===1&&executionProviders[0]==="wasm")throw Te;return console.warn(Te),console.warn("Something went wrong during model construction (most likely a missing operation). Using `wasm` as a fallback. "),await InferenceSession.create(Ee,{executionProviders:["wasm"]})}}function validateInputs(n,e){const t=Object.create(null),r=[];for(const Re of n.inputNames){const Me=e[Re];if(!(Me instanceof Tensor)){r.push(Re);continue}t[Re]=env.wasm.proxy?Me.clone():Me}if(r.length>0)throw new Error(`An error occurred during model execution: "Missing the following inputs: ${r.join(", ")}.`);const Ee=Object.keys(e).length,Te=n.inputNames.length;if(Ee>Te){let Re=Object.keys(e).filter(Me=>!n.inputNames.includes(Me));console.warn(`WARNING: Too many inputs were provided (${Ee} > ${Te}). The following inputs will be ignored: "${Re.join(", ")}".`)}return t}async function sessionRun(n,e){const t=validateInputs(n,e);try{let r=await n.run(t);return r=replaceTensors(r),r}catch(r){throw console.error(`An error occurred during model execution: "${r}".`),console.error("Inputs given to model:",t),r}}function replaceTensors(n){for(let e in n)n[e]instanceof ONNXTensor?n[e]=new Tensor(n[e]):typeof n[e]=="object"&&replaceTensors(n[e]);return n}function toI64Tensor(n){if(n instanceof Tensor)return n;if(n.length===0)throw Error("items must be non-empty");if(Array.isArray(n[0])){if(n.some(e=>e.length!==n[0].length))throw Error("Unable to create tensor, you should probably activate truncation and/or padding with 'padding=True' and/or 'truncation=True' to have batched tensors with the same length.");return new Tensor("int64",BigInt64Array.from(n.flat().map(e=>BigInt(e))),[n.length,n[0].length])}else return new Tensor("int64",BigInt64Array.from(n.map(e=>BigInt(e))),[1,n.length])}function prepareAttentionMask(n,e){let t=n.config.pad_token_id??null,r=n.config.eos_token_id??null;isIntegralNumber(r)&&(r=[r]);let Ee=e.indexOf(t)!==-1,Te=r===null||!r.includes(t);if(Ee&&Te){let Re=BigInt64Array.from(e.data.map(Me=>Me!=t));return new Tensor("int64",Re,e.dims)}else return ones_like(e)}function preparePositionIds(n,e,t){if(!n.inputNames.includes("position_ids"))return;const r=new BigInt64Array(e.attention_mask.data.length);for(let Ee=0;Ee<e.attention_mask.dims[0];++Ee){let Te=Ee*e.attention_mask.dims[1],Re=BigInt(0);for(let Me=0;Me<e.attention_mask.dims[1];++Me){const Ve=Te+Me;e.attention_mask.data[Ve]===0n?r[Ve]=BigInt(1):(r[Ve]=Re,Re+=e.attention_mask.data[Ve])}}e.position_ids=new Tensor("int64",r,e.attention_mask.dims),t&&(e.position_ids=e.position_ids.slice(null,-1).unsqueeze_(-1))}function boolTensor(n){return new Tensor("bool",[n],[1])}async function seq2seqForward(n,e){let{encoder_outputs:t,past_key_values:r}=e;t||(t=(await encoderForward(n,e)).last_hidden_state);let Ee={input_ids:e.decoder_input_ids,encoder_hidden_states:t};const Te=!!r;n.decoder_merged_session.inputNames.includes("use_cache_branch")&&(Ee.use_cache_branch=boolTensor(Te)),n.decoder_merged_session.inputNames.includes("encoder_attention_mask")&&(Ee.encoder_attention_mask=e.attention_mask),preparePositionIds(n.decoder_merged_session,Ee,Te),n.addPastKeyValues(Ee,r);const Re=await sessionRun(n.decoder_merged_session,Ee);let Me=Re.logits;r=n.getPastKeyValues(Re,r);const Ve=n.getAttentions(Re);return new Seq2SeqLMOutput({logits:Me,past_key_values:r,encoder_outputs:t,...Ve})}function seq2seqStartBeams(n,e,t,r){let Ee=[],Te=0;const Re=n.requires_attention_mask??!0;let Me=t.decoder_input_ids??t.decoder_start_token_id??t.bos_token_id??t.eos_token_id;Me instanceof Tensor?Me=Me.tolist().flat():Array.isArray(Me)||(Me=[Me]);for(let Ve of e){Ve.dims=[1,...Ve.dims];let De={inputs:Ve,encoder_outputs:null,prev_model_outputs:null,output_token_ids:Me,done:!1,score:0,id:Te++};Re&&(De.attention_mask=prepareAttentionMask(n,Ve)),Ee.push(De)}return Ee}async function seq2seqRunBeam(n,e){const t=n.main_input_name;let r=e.output_token_ids;e.prev_model_outputs&&(r=r.slice(-1));let Ee={[t]:e.inputs,decoder_input_ids:toI64Tensor(r),encoder_outputs:e.encoder_outputs,past_key_values:e.prev_model_outputs?.past_key_values};e.attention_mask&&(Ee.attention_mask=e.attention_mask);let Te=await n.forward(Ee);return e.prev_model_outputs=Te,e.encoder_outputs=Te.encoder_outputs,Te}function seq2seqUpdatebeam(n,e){n.output_token_ids=[...n.output_token_ids,e]}async function encoderForward(n,e){const t=Object.create(null);for(const r of n.session.inputNames)t[r]=e[r];return n.session.inputNames.includes("token_type_ids")&&!t.token_type_ids&&(t.token_type_ids=new Tensor("int64",new BigInt64Array(t.input_ids.data.length),t.input_ids.dims)),await sessionRun(n.session,t)}async function decoderForward(n,e){let{input_ids:t,past_key_values:r,attention_mask:Ee}=e,Te={input_ids:t,attention_mask:Ee??prepareAttentionMask(n,t)};const Re=!!r;n.session.inputNames.includes("use_cache_branch")&&(Te.use_cache_branch=boolTensor(Re)),preparePositionIds(n.session,Te,Re),n.addPastKeyValues(Te,r);let Me=await sessionRun(n.session,Te),Ve=Me.logits;return r=n.getPastKeyValues(Me,r),{logits:Ve,past_key_values:r}}function decoderStartBeams(n,e,t,r,Ee){let Te=[],Re=0;for(let Me of e){let Ve=Me.tolist().map(Number);Me.dims=[1,...Me.dims];let De;Ee?(De=Ee[Re],De.dims=[1,...De.dims]):De=prepareAttentionMask(n,Me);let $e={input:Me,model_input_ids:Me,attention_mask:De,prev_model_outputs:null,output_token_ids:Ve,num_output_tokens:r,done:!1,score:0,id:Re++};Te.push($e)}return Te}async function decoderRunBeam(n,e){let t=new BigInt64Array(e.output_token_ids.length).fill(1n),r={input_ids:e.model_input_ids,attention_mask:new Tensor("int64",t,[1,t.length]),past_key_values:e.prev_model_outputs?.past_key_values},Ee=await n.forward(r);return e.prev_model_outputs=Ee,Ee}function decoderUpdatebeam(n,e){n.output_token_ids=[...n.output_token_ids,e],n.model_input_ids=new Tensor("int64",[BigInt(e)],[1,1])}class PreTrainedModel extends Callable{main_input_name="input_ids";constructor(e,t){super(),this.config=e,this.session=t;const r=MODEL_CLASS_TO_NAME_MAPPING.get(this.constructor),Ee=MODEL_TYPE_MAPPING.get(r);this.can_generate=!1,this._runBeam=null,this._getStartBeams=null,this._updateBeam=null,this._forward=null,Ee===MODEL_TYPES.DecoderOnly?(this.can_generate=!0,this._runBeam=decoderRunBeam,this._getStartBeams=decoderStartBeams,this._updateBeam=decoderUpdatebeam,this._forward=decoderForward):Ee===MODEL_TYPES.Seq2Seq||Ee===MODEL_TYPES.Vision2Seq?(this.can_generate=!0,this._runBeam=seq2seqRunBeam,this._getStartBeams=seq2seqStartBeams,this._updateBeam=seq2seqUpdatebeam,this._forward=seq2seqForward):Ee===MODEL_TYPES.EncoderDecoder?this._forward=encoderForward:this._forward=encoderForward}async dispose(){const e=[];for(let t of Object.keys(this)){const r=this[t];r instanceof InferenceSession&&e.push(r.handler.dispose())}return await Promise.all(e)}static async from_pretrained(e,{quantized:t=!0,progress_callback:r=null,config:Ee=null,cache_dir:Te=null,local_files_only:Re=!1,revision:Me="main",model_file_name:Ve=null}={}){let De={quantized:t,progress_callback:r,config:Ee,cache_dir:Te,local_files_only:Re,revision:Me,model_file_name:Ve};const $e=MODEL_CLASS_TO_NAME_MAPPING.get(this),Oe=MODEL_TYPE_MAPPING.get($e);let Ce;return Oe===MODEL_TYPES.DecoderOnly?Ce=await Promise.all([AutoConfig.from_pretrained(e,De),constructSession(e,De.model_file_name??"decoder_model_merged",De),getModelJSON(e,"generation_config.json",!1,De)]):Oe===MODEL_TYPES.Seq2Seq||Oe===MODEL_TYPES.Vision2Seq?Ce=await Promise.all([AutoConfig.from_pretrained(e,De),constructSession(e,"encoder_model",De),constructSession(e,"decoder_model_merged",De),getModelJSON(e,"generation_config.json",!1,De)]):Oe===MODEL_TYPES.MaskGeneration?Ce=await Promise.all([AutoConfig.from_pretrained(e,De),constructSession(e,"vision_encoder",De),constructSession(e,"prompt_encoder_mask_decoder",De)]):Oe===MODEL_TYPES.EncoderDecoder?Ce=await Promise.all([AutoConfig.from_pretrained(e,De),constructSession(e,"encoder_model",De),constructSession(e,"decoder_model_merged",De)]):(Oe!==MODEL_TYPES.EncoderOnly&&console.warn(`Model type for '${$e??Ee?.model_type}' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.`),Ce=await Promise.all([AutoConfig.from_pretrained(e,De),constructSession(e,De.model_file_name??"model",De)])),new this(...Ce)}async _call(e){return await this.forward(e)}async forward(e){return await this._forward(this,e)}_get_logits_processor(e,t,r=null){const Ee=new LogitsProcessorList;if(e.repetition_penalty!==null&&e.repetition_penalty!==1&&Ee.push(new RepetitionPenaltyLogitsProcessor(e.repetition_penalty)),e.no_repeat_ngram_size!==null&&e.no_repeat_ngram_size>0&&Ee.push(new NoRepeatNGramLogitsProcessor(e.no_repeat_ngram_size)),e.bad_words_ids!==null&&Ee.push(new NoBadWordsLogitsProcessor(e.bad_words_ids,e.eos_token_id)),e.min_length!==null&&e.eos_token_id!==null&&e.min_length>0&&Ee.push(new MinLengthLogitsProcessor(e.min_length,e.eos_token_id)),e.min_new_tokens!==null&&e.eos_token_id!==null&&e.min_new_tokens>0&&Ee.push(new MinNewTokensLengthLogitsProcessor(t,e.min_new_tokens,e.eos_token_id)),e.forced_bos_token_id!==null&&Ee.push(new ForcedBOSTokenLogitsProcessor(e.forced_bos_token_id)),e.forced_eos_token_id!==null&&Ee.push(new ForcedEOSTokenLogitsProcessor(e.max_length,e.forced_eos_token_id)),e.begin_suppress_tokens!==null){let Te=t>1||e.forced_bos_token_id===null?t:t+1;e.forced_decoder_ids!==null&&(Te+=e.forced_decoder_ids[e.forced_decoder_ids.length-1][0]),Ee.push(new SuppressTokensAtBeginLogitsProcessor(e.begin_suppress_tokens,Te))}return e.forced_decoder_ids!==null&&Ee.push(new ForceTokensLogitsProcessor(e.forced_decoder_ids)),r!==null&&Ee.extend(r),Ee}_get_generation_config(e){let t=new GenerationConfig(this.config);return"generation_config"in this&&Object.assign(t,this.generation_config),e!==null&&Object.assign(t,e),t}async generate(e,t=null,r=null,{inputs_attention_mask:Ee=null}={}){if(!this.can_generate){let He=`The current model class (${MODEL_CLASS_TO_NAME_MAPPING.get(this.constructor)}) is not compatible with \`.generate()\`, as it doesn't have a language model head.`;const Ge=this.config.model_type,Ye=MODEL_WITH_LM_HEAD_MAPPING_NAMES.get(Ge)??MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES.get(Ge)??MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES.get(Ge)??MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES.get(Ge);throw Ye&&(He+=` Please use the following class instead: '${Ye[0]}'`),Error(He)}if(!(e instanceof Tensor)&&!isTypedArray(e)&&!Array.isArray(e))throw Error(`\`inputs\` must be a Tensor, TypedArray, or Array, but is "${e.constructor.name}".`);let Te;if(this.config.is_encoder_decoder)Te=0;else if(Te=e instanceof Tensor?e.dims.at(-1):e.length,Te===0)throw Error("Must supply a non-empty array of input token ids.");t=this._get_generation_config(t),r=r??new LogitsProcessorList,r=this._get_logits_processor(t,Te,r);let Re=t.eos_token_id;Re!==null&&!Array.isArray(Re)&&(Re=[Re]);let Me=1;const Ve=Me+(t.max_new_tokens??1/0),De=Number.isInteger(t.max_length)&&(t.max_new_tokens??null)===null;let $e=Sampler.getSampler(t),Oe=this.getStartBeams(e,t,Me,Ee);for(;Oe.some(We=>!We.done)&&Me<Ve;){let We=[];for(let He of Oe){if(He.done){We.push(He);continue}if(De&&He.output_token_ids.length>=t.max_length){He.done=!0,We.push(He);continue}let Ge=await this.runBeam(He);t.output_attentions&&this.addAttentionsToBeam(He,Ge),t.output_scores;let Ye=Ge.logits.slice(null,-1,null);r(He.output_token_ids,Ye);let Je=$e(Ye);for(let[Ze,fn]of Je){let yn={...He};this.updateBeam(yn,Ze),yn.score+=fn,Re&&Re.includes(Ze)&&(yn.done=!0),We.push(yn)}}++Me,We=this.groupBeams(We).map(He=>He.sort((Ge,Ye)=>Ye.score-Ge.score).slice(0,t.num_beams)),Oe=We.flat(),t.callback_function&&t.callback_function(Oe)}const Ce=this.groupBeams(Oe),Be=We=>Ce.map(He=>t.num_return_sequences>1?He.slice(0,t.num_return_sequences).map(Ge=>Ge[We]):[He[0][We]]).flat(),Ue=Be("output_token_ids");if(t.return_dict_in_generate){const We=Be("decoder_attentions"),He=Be("cross_attentions");return{sequences:Ue,decoder_attentions:We,cross_attentions:He}}else return Ue}addAttentionsToBeam(e,t){if(this.config.is_encoder_decoder){if(!t.cross_attentions||t.cross_attentions.length===0)throw Error("`output_attentions` is true, but the model did not produce cross-attentions. This is most likely because the model was not exported with `output_attentions=True`.");e.cross_attentions||(e.cross_attentions=[]),e.cross_attentions.push(t.cross_attentions)}if(!t.decoder_attentions||t.decoder_attentions.length===0)throw Error("`output_attentions` is true, but the model did not produce decoder-attentions. This is most likely because the model was not exported with `output_attentions=True`.");e.decoder_attentions||(e.decoder_attentions=[]),e.decoder_attentions.push(t.decoder_attentions)}groupBeams(e){const t=Object.create(null);for(const r of e)t[r.id]===void 0?t[r.id]=[r]:t[r.id].push(r);return Object.values(t)}getPastKeyValues(e,t){const r=Object.create(null);for(const Ee in e)if(Ee.startsWith("present")){let Te=Ee.replace("present","past_key_values");t&&Ee.includes("encoder")?r[Te]=t[Te]:r[Te]=e[Ee]}return r}getAttentions(e){const t=Object.create(null);for(const r of["cross_attentions","decoder_attentions"]){const Ee=[];for(const Te in e)if(Te.startsWith(r)){const Re=Te.split(".").pop();Ee[Re]=e[Te]}t[r]=Ee}return t}addPastKeyValues(e,t){if(t)Object.assign(e,t);else if(this.config.is_encoder_decoder&&(this.add_encoder_pkv??!0)){let Ee=[1,this.num_encoder_heads,0,this.encoder_dim_kv],Te=[1,this.num_decoder_heads,0,this.decoder_dim_kv];for(let Re=0;Re<this.num_decoder_layers;++Re)e[`past_key_values.${Re}.encoder.key`]=new Tensor("float32",[],Ee),e[`past_key_values.${Re}.encoder.value`]=new Tensor("float32",[],Ee),e[`past_key_values.${Re}.decoder.key`]=new Tensor("float32",[],Te),e[`past_key_values.${Re}.decoder.value`]=new Tensor("float32",[],Te)}else if(this.config.model_type==="falcon"){let Ee=[1*this.num_heads,0,this.dim_kv];for(let Te=0;Te<this.num_layers;++Te)e[`past_key_values.${Te}.key`]=new Tensor("float32",[],Ee),e[`past_key_values.${Te}.value`]=new Tensor("float32",[],Ee)}else if(this.config.multi_query){let Ee=[1*this.num_heads,0,2*this.dim_kv];for(let Te=0;Te<this.num_layers;++Te)e[`past_key_values.${Te}.key_value`]=new Tensor("float32",[],Ee)}else if(this.config.model_type==="bloom"){let Ee=[1*this.num_heads,this.dim_kv,0],Te=[1*this.num_heads,0,this.dim_kv];for(let Re=0;Re<this.num_layers;++Re)e[`past_key_values.${Re}.key`]=new Tensor("float32",[],Ee),e[`past_key_values.${Re}.value`]=new Tensor("float32",[],Te)}else{let Ee=[1,this.num_heads,0,this.dim_kv];for(let Te=0;Te<this.num_layers;++Te)e[`past_key_values.${Te}.key`]=new Tensor("float32",[],Ee),e[`past_key_values.${Te}.value`]=new Tensor("float32",[],Ee)}}getStartBeams(e,t,r,Ee){return this._getStartBeams(this,e,t,r,Ee)}async runBeam(e){return await this._runBeam(this,e)}updateBeam(e,t){return this._updateBeam(e,t)}}class ModelOutput{}class BertPreTrainedModel extends PreTrainedModel{}class BertModel extends BertPreTrainedModel{}class BertForMaskedLM extends BertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class BertForSequenceClassification extends BertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class BertForTokenClassification extends BertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class BertForQuestionAnswering extends BertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class NomicBertPreTrainedModel extends PreTrainedModel{}class NomicBertModel extends NomicBertPreTrainedModel{}class RoFormerPreTrainedModel extends PreTrainedModel{}class RoFormerModel extends RoFormerPreTrainedModel{}class RoFormerForMaskedLM extends RoFormerPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class RoFormerForSequenceClassification extends RoFormerPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class RoFormerForTokenClassification extends RoFormerPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class RoFormerForQuestionAnswering extends RoFormerPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class ConvBertPreTrainedModel extends PreTrainedModel{}class ConvBertModel extends ConvBertPreTrainedModel{}class ConvBertForMaskedLM extends ConvBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class ConvBertForSequenceClassification extends ConvBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ConvBertForTokenClassification extends ConvBertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class ConvBertForQuestionAnswering extends ConvBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class ElectraPreTrainedModel extends PreTrainedModel{}class ElectraModel extends ElectraPreTrainedModel{}class ElectraForMaskedLM extends ElectraPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class ElectraForSequenceClassification extends ElectraPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ElectraForTokenClassification extends ElectraPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class ElectraForQuestionAnswering extends ElectraPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class CamembertPreTrainedModel extends PreTrainedModel{}class CamembertModel extends CamembertPreTrainedModel{}class CamembertForMaskedLM extends CamembertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class CamembertForSequenceClassification extends CamembertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class CamembertForTokenClassification extends CamembertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class CamembertForQuestionAnswering extends CamembertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DebertaPreTrainedModel extends PreTrainedModel{}class DebertaModel extends DebertaPreTrainedModel{}class DebertaForMaskedLM extends DebertaPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class DebertaForSequenceClassification extends DebertaPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DebertaForTokenClassification extends DebertaPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class DebertaForQuestionAnswering extends DebertaPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DebertaV2PreTrainedModel extends PreTrainedModel{}class DebertaV2Model extends DebertaV2PreTrainedModel{}class DebertaV2ForMaskedLM extends DebertaV2PreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class DebertaV2ForSequenceClassification extends DebertaV2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DebertaV2ForTokenClassification extends DebertaV2PreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class DebertaV2ForQuestionAnswering extends DebertaV2PreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DistilBertPreTrainedModel extends PreTrainedModel{}class DistilBertModel extends DistilBertPreTrainedModel{}class DistilBertForSequenceClassification extends DistilBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DistilBertForTokenClassification extends DistilBertPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class DistilBertForQuestionAnswering extends DistilBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class DistilBertForMaskedLM extends DistilBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class EsmPreTrainedModel extends PreTrainedModel{}class EsmModel extends EsmPreTrainedModel{}class EsmForMaskedLM extends EsmPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class EsmForSequenceClassification extends EsmPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class EsmForTokenClassification extends EsmPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class MobileBertPreTrainedModel extends PreTrainedModel{}class MobileBertModel extends MobileBertPreTrainedModel{}class MobileBertForMaskedLM extends MobileBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class MobileBertForSequenceClassification extends MobileBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MobileBertForQuestionAnswering extends MobileBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class MPNetPreTrainedModel extends PreTrainedModel{}class MPNetModel extends MPNetPreTrainedModel{}class MPNetForMaskedLM extends MPNetPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class MPNetForSequenceClassification extends MPNetPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MPNetForTokenClassification extends MPNetPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class MPNetForQuestionAnswering extends MPNetPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class SqueezeBertPreTrainedModel extends PreTrainedModel{}class SqueezeBertModel extends SqueezeBertPreTrainedModel{}class SqueezeBertForMaskedLM extends SqueezeBertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class SqueezeBertForSequenceClassification extends SqueezeBertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class SqueezeBertForQuestionAnswering extends SqueezeBertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class AlbertPreTrainedModel extends PreTrainedModel{}class AlbertModel extends AlbertPreTrainedModel{}class AlbertForSequenceClassification extends AlbertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class AlbertForQuestionAnswering extends AlbertPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class AlbertForMaskedLM extends AlbertPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class T5PreTrainedModel extends PreTrainedModel{}class T5Model extends T5PreTrainedModel{}class T5ForConditionalGeneration extends T5PreTrainedModel{constructor(e,t,r,Ee){super(e,t),this.decoder_merged_session=r,this.generation_config=Ee,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class LongT5PreTrainedModel extends PreTrainedModel{}class LongT5Model extends LongT5PreTrainedModel{}class LongT5ForConditionalGeneration extends LongT5PreTrainedModel{constructor(e,t,r,Ee){super(e,t),this.decoder_merged_session=r,this.generation_config=Ee,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class MT5PreTrainedModel extends PreTrainedModel{}class MT5Model extends MT5PreTrainedModel{}class MT5ForConditionalGeneration extends MT5PreTrainedModel{constructor(e,t,r,Ee){super(e,t),this.decoder_merged_session=r,this.generation_config=Ee,this.num_decoder_layers=this.config.num_decoder_layers,this.num_decoder_heads=this.config.num_heads,this.decoder_dim_kv=this.config.d_kv,this.num_encoder_layers=this.config.num_layers,this.num_encoder_heads=this.config.num_heads,this.encoder_dim_kv=this.config.d_kv}}class BartPretrainedModel extends PreTrainedModel{}class BartModel extends BartPretrainedModel{}class BartForConditionalGeneration extends BartPretrainedModel{constructor(e,t,r,Ee){super(e,t),this.decoder_merged_session=r,this.generation_config=Ee,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BartForSequenceClassification extends BartPretrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MBartPreTrainedModel extends PreTrainedModel{}class MBartModel extends MBartPreTrainedModel{}class MBartForConditionalGeneration extends MBartPreTrainedModel{constructor(e,t,r,Ee){super(e,t),this.decoder_merged_session=r,this.generation_config=Ee,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class MBartForSequenceClassification extends MBartPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MBartForCausalLM extends MBartPreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BlenderbotPreTrainedModel extends PreTrainedModel{}class BlenderbotModel extends BlenderbotPreTrainedModel{}class BlenderbotForConditionalGeneration extends BlenderbotPreTrainedModel{constructor(e,t,r,Ee){super(e,t),this.decoder_merged_session=r,this.generation_config=Ee,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class BlenderbotSmallPreTrainedModel extends PreTrainedModel{}class BlenderbotSmallModel extends BlenderbotSmallPreTrainedModel{}class BlenderbotSmallForConditionalGeneration extends BlenderbotSmallPreTrainedModel{constructor(e,t,r,Ee){super(e,t),this.decoder_merged_session=r,this.generation_config=Ee,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class RobertaPreTrainedModel extends PreTrainedModel{}class RobertaModel extends RobertaPreTrainedModel{}class RobertaForMaskedLM extends RobertaPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class RobertaForSequenceClassification extends RobertaPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class RobertaForTokenClassification extends RobertaPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class RobertaForQuestionAnswering extends RobertaPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class XLMPreTrainedModel extends PreTrainedModel{}class XLMModel extends XLMPreTrainedModel{}class XLMWithLMHeadModel extends XLMPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class XLMForSequenceClassification extends XLMPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class XLMForTokenClassification extends XLMPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class XLMForQuestionAnswering extends XLMPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class XLMRobertaPreTrainedModel extends PreTrainedModel{}class XLMRobertaModel extends XLMRobertaPreTrainedModel{}class XLMRobertaForMaskedLM extends XLMRobertaPreTrainedModel{async _call(e){return new MaskedLMOutput(await super._call(e))}}class XLMRobertaForSequenceClassification extends XLMRobertaPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class XLMRobertaForTokenClassification extends XLMRobertaPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class XLMRobertaForQuestionAnswering extends XLMRobertaPreTrainedModel{async _call(e){return new QuestionAnsweringModelOutput(await super._call(e))}}class ASTPreTrainedModel extends PreTrainedModel{}class ASTModel extends ASTPreTrainedModel{}class ASTForAudioClassification extends ASTPreTrainedModel{}class WhisperPreTrainedModel extends PreTrainedModel{}class WhisperModel extends WhisperPreTrainedModel{}class WhisperForConditionalGeneration extends WhisperPreTrainedModel{requires_attention_mask=!1;main_input_name="input_features";constructor(e,t,r,Ee){super(e,t),this.decoder_merged_session=r,this.generation_config=Ee,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}async generate(e,t=null,r=null){if(t=this._get_generation_config(t),t.return_timestamps??=!1,t.return_timestamps&&(r=[new WhisperTimeStampLogitsProcessor(t)]),t.return_token_timestamps&&(t.output_attentions=!0,t.return_dict_in_generate=!0,t.task==="translate"&&console.warn("Token-level timestamps may not be reliable for task 'translate'."),!t.alignment_heads))throw new Error("Model generation config has no `alignment_heads`, token-level timestamps not available. See https://gist.github.com/hollance/42e32852f24243b748ae6bc1f985b13a on how to add this property to the generation config.");const Ee=await super.generate(e,t,r);return t.return_token_timestamps&&t.alignment_heads&&(Ee.token_timestamps=this._extract_token_timestamps(Ee,t.alignment_heads,t.num_frames)),Ee}_extract_token_timestamps(e,t,r=null,Ee=.02){if(!e.cross_attentions)throw new Error("Model outputs must contain cross attentions to extract timestamps. This is most likely because the model was not exported with `output_attentions=True`.");let Te=this.config.median_filter_width;Te===void 0&&(console.warn("Model config has no `median_filter_width`, using default value of 7."),Te=7);const Re=e.cross_attentions.map(De=>{let $e=Array.from({length:this.config.decoder_layers},(He,Ge)=>cat(De.map(Ye=>Ye[Ge]),2)),Oe=stack(t.map(([He,Ge])=>r?$e[He].slice(null,Ge,null,[0,r]):$e[He].slice(null,Ge)));Oe=Oe.transpose(1,0,2,3);let[Ce,Be]=std_mean(Oe,-2,0,!0),Ue=Oe.clone();for(let He=0;He<Ue.dims[0];++He){let Ge=Ue[He];for(let Ye=0;Ye<Ge.dims[0];++Ye){let Je=Ge[Ye];const Ze=Ce[He][Ye][0],fn=Be[He][Ye][0];for(let yn=0;yn<Je.dims[0];++yn){let mn=Je[yn];for(let pn=0;pn<mn.data.length;++pn)mn.data[pn]=(mn.data[pn]-fn.data[pn])/Ze.data[pn];mn.data.set(medianFilter(mn.data,Te))}}}return mean(Ue,1)}),Me=[e.sequences.length,e.sequences[0].length],Ve=new Tensor("float32",new Float32Array(Me[0]*Me[1]),Me);for(let De=0;De<Me[0];++De){const $e=Re[De].neg().squeeze_(0);let[Oe,Ce]=dynamicTimeWarping($e),Be=Array.from({length:Oe.length-1},(He,Ge)=>Oe[Ge+1]-Oe[Ge]),Ue=mergeArrays([1],Be).map(He=>!!He),We=[];for(let He=0;He<Ue.length;++He)Ue[He]&&We.push(Ce[He]*Ee);Ve[De].data.set(We,1)}return Ve}}class VisionEncoderDecoderModel extends PreTrainedModel{main_input_name="pixel_values";constructor(e,t,r,Ee){super(e,t),this.decoder_merged_session=r,this.generation_config=Ee;const Te=this.config.encoder,Re=this.config.decoder,Me=Te.model_type;(MODEL_MAPPING_NAMES_ENCODER_ONLY.get(Me)??MODEL_MAPPING_NAMES_ENCODER_DECODER.get(Me))||console.warn(`Model type for encoder '${Me}' not found, assuming encoder-only architecture. Please report this at https://github.com/xenova/transformers.js/issues/new/choose.`);const De=MODEL_WITH_LM_HEAD_MAPPING_NAMES.get(Re.model_type);if(!De)throw new Error(`Unable to construct \`VisionEncoderDecoder\` due to unsupported decoder: "${this.config.decoder.model_type}"`);const $e=De[1],Oe=new $e(Re,r,Ee);this.add_encoder_pkv="num_decoder_layers"in Oe,this.add_encoder_pkv?(this.num_decoder_layers=Oe.num_decoder_layers,this.num_decoder_heads=Oe.num_decoder_heads,this.decoder_dim_kv=Oe.decoder_dim_kv,this.num_encoder_layers=Oe.num_encoder_layers,this.num_encoder_heads=Oe.num_encoder_heads,this.encoder_dim_kv=Oe.encoder_dim_kv):(this.num_layers=Oe.num_layers,this.num_heads=Oe.num_heads,this.dim_kv=Oe.dim_kv)}}class CLIPPreTrainedModel extends PreTrainedModel{}class CLIPModel extends CLIPPreTrainedModel{}class CLIPTextModelWithProjection extends CLIPPreTrainedModel{static async from_pretrained(e,t={}){return t.model_file_name??="text_model",super.from_pretrained(e,t)}}class CLIPVisionModelWithProjection extends CLIPPreTrainedModel{static async from_pretrained(e,t={}){return t.model_file_name??="vision_model",super.from_pretrained(e,t)}}class SiglipPreTrainedModel extends PreTrainedModel{}class SiglipModel extends SiglipPreTrainedModel{}class SiglipTextModel extends SiglipPreTrainedModel{static async from_pretrained(e,t={}){return t.model_file_name??="text_model",super.from_pretrained(e,t)}}class SiglipVisionModel extends CLIPPreTrainedModel{static async from_pretrained(e,t={}){return t.model_file_name??="vision_model",super.from_pretrained(e,t)}}class ChineseCLIPPreTrainedModel extends PreTrainedModel{}class ChineseCLIPModel extends ChineseCLIPPreTrainedModel{}class CLIPSegPreTrainedModel extends PreTrainedModel{}class CLIPSegModel extends CLIPSegPreTrainedModel{}class CLIPSegForImageSegmentation extends CLIPSegPreTrainedModel{}class GPT2PreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPT2Model extends GPT2PreTrainedModel{}class GPT2LMHeadModel extends GPT2PreTrainedModel{}class GPTNeoPreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_heads,this.num_layers=this.config.num_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class GPTNeoModel extends GPTNeoPreTrainedModel{}class GPTNeoForCausalLM extends GPTNeoPreTrainedModel{}class GPTNeoXPreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class GPTNeoXModel extends GPTNeoXPreTrainedModel{}class GPTNeoXForCausalLM extends GPTNeoXPreTrainedModel{}class GPTJPreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPTJModel extends GPTJPreTrainedModel{}class GPTJForCausalLM extends GPTJPreTrainedModel{}class GPTBigCodePreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class GPTBigCodeModel extends GPTBigCodePreTrainedModel{}class GPTBigCodeForCausalLM extends GPTBigCodePreTrainedModel{}class CodeGenPreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.n_embd/this.num_heads}}class CodeGenModel extends CodeGenPreTrainedModel{}class CodeGenForCausalLM extends CodeGenPreTrainedModel{}class LlamaPreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads??this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class LlamaModel extends LlamaPreTrainedModel{}class LlamaForCausalLM extends LlamaPreTrainedModel{}class Qwen2PreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads??this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class Qwen2Model extends Qwen2PreTrainedModel{}class Qwen2ForCausalLM extends Qwen2PreTrainedModel{}class PhiPreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class PhiModel extends PhiPreTrainedModel{}class PhiForCausalLM extends PhiPreTrainedModel{}class BloomPreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_head,this.num_layers=this.config.n_layer,this.dim_kv=this.config.hidden_size/this.num_heads}}class BloomModel extends BloomPreTrainedModel{}class BloomForCausalLM extends BloomPreTrainedModel{}class MptPreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.n_heads,this.num_layers=this.config.n_layers,this.dim_kv=this.config.d_model/this.num_heads}}class MptModel extends MptPreTrainedModel{}class MptForCausalLM extends MptPreTrainedModel{}class OPTPreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class OPTModel extends OPTPreTrainedModel{}class OPTForCausalLM extends OPTPreTrainedModel{}class ViTPreTrainedModel extends PreTrainedModel{}class ViTModel extends ViTPreTrainedModel{}class ViTForImageClassification extends ViTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class FastViTPreTrainedModel extends PreTrainedModel{}class FastViTModel extends FastViTPreTrainedModel{}class FastViTForImageClassification extends FastViTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class VitMattePreTrainedModel extends PreTrainedModel{}class VitMatteForImageMatting extends VitMattePreTrainedModel{async _call(e){return new ImageMattingOutput(await super._call(e))}}class MobileViTPreTrainedModel extends PreTrainedModel{}class MobileViTModel extends MobileViTPreTrainedModel{}class MobileViTForImageClassification extends MobileViTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class MobileViTV2PreTrainedModel extends PreTrainedModel{}class MobileViTV2Model extends MobileViTV2PreTrainedModel{}class MobileViTV2ForImageClassification extends MobileViTV2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class OwlViTPreTrainedModel extends PreTrainedModel{}class OwlViTModel extends OwlViTPreTrainedModel{}class OwlViTForObjectDetection extends OwlViTPreTrainedModel{}class Owlv2PreTrainedModel extends PreTrainedModel{}class Owlv2Model extends Owlv2PreTrainedModel{}class Owlv2ForObjectDetection extends Owlv2PreTrainedModel{}class BeitPreTrainedModel extends PreTrainedModel{}class BeitModel extends BeitPreTrainedModel{}class BeitForImageClassification extends BeitPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class DetrPreTrainedModel extends PreTrainedModel{}class DetrModel extends DetrPreTrainedModel{}class DetrForObjectDetection extends DetrPreTrainedModel{async _call(e){return new DetrObjectDetectionOutput(await super._call(e))}}class DetrForSegmentation extends DetrPreTrainedModel{async _call(e){return new DetrSegmentationOutput(await super._call(e))}}class DetrObjectDetectionOutput extends ModelOutput{constructor({logits:e,pred_boxes:t}){super(),this.logits=e,this.pred_boxes=t}}class DetrSegmentationOutput extends ModelOutput{constructor({logits:e,pred_boxes:t,pred_masks:r}){super(),this.logits=e,this.pred_boxes=t,this.pred_masks=r}}class TableTransformerPreTrainedModel extends PreTrainedModel{}class TableTransformerModel extends TableTransformerPreTrainedModel{}class TableTransformerForObjectDetection extends TableTransformerPreTrainedModel{async _call(e){return new TableTransformerObjectDetectionOutput(await super._call(e))}}class TableTransformerObjectDetectionOutput extends DetrObjectDetectionOutput{}class DeiTPreTrainedModel extends PreTrainedModel{}class DeiTModel extends DeiTPreTrainedModel{}class DeiTForImageClassification extends DeiTPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ResNetPreTrainedModel extends PreTrainedModel{}class ResNetModel extends ResNetPreTrainedModel{}class ResNetForImageClassification extends ResNetPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class SwinPreTrainedModel extends PreTrainedModel{}class SwinModel extends SwinPreTrainedModel{}class SwinForImageClassification extends SwinPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class Swin2SRPreTrainedModel extends PreTrainedModel{}class Swin2SRModel extends Swin2SRPreTrainedModel{}class Swin2SRForImageSuperResolution extends Swin2SRPreTrainedModel{}class DPTPreTrainedModel extends PreTrainedModel{}class DPTModel extends DPTPreTrainedModel{}class DPTForDepthEstimation extends DPTPreTrainedModel{}class DepthAnythingPreTrainedModel extends PreTrainedModel{}class DepthAnythingForDepthEstimation extends DepthAnythingPreTrainedModel{}class GLPNPreTrainedModel extends PreTrainedModel{}class GLPNModel extends GLPNPreTrainedModel{}class GLPNForDepthEstimation extends GLPNPreTrainedModel{}class DonutSwinPreTrainedModel extends PreTrainedModel{}class DonutSwinModel extends DonutSwinPreTrainedModel{}class ConvNextPreTrainedModel extends PreTrainedModel{}class ConvNextModel extends ConvNextPreTrainedModel{}class ConvNextForImageClassification extends ConvNextPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class ConvNextV2PreTrainedModel extends PreTrainedModel{}class ConvNextV2Model extends ConvNextV2PreTrainedModel{}class ConvNextV2ForImageClassification extends ConvNextV2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class Dinov2PreTrainedModel extends PreTrainedModel{}class Dinov2Model extends Dinov2PreTrainedModel{}class Dinov2ForImageClassification extends Dinov2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class YolosPreTrainedModel extends PreTrainedModel{}class YolosModel extends YolosPreTrainedModel{}class YolosForObjectDetection extends YolosPreTrainedModel{async _call(e){return new YolosObjectDetectionOutput(await super._call(e))}}class YolosObjectDetectionOutput extends ModelOutput{constructor({logits:e,pred_boxes:t}){super(),this.logits=e,this.pred_boxes=t}}class SamPreTrainedModel extends PreTrainedModel{}class SamModel extends SamPreTrainedModel{constructor(e,t,r){super(e,t),this.prompt_encoder_mask_decoder=r}async get_image_embeddings({pixel_values:e}){return await encoderForward(this,{pixel_values:e})}async forward(e){if((!e.image_embeddings||!e.image_positional_embeddings)&&(e={...e,...await this.get_image_embeddings(e)}),!e.input_labels){const t=e.input_points.dims.slice(0,-1),r=t.reduce((Ee,Te)=>Ee*Te,1);e.input_labels=new Tensor("int64",new BigInt64Array(r).fill(1n),t)}return await sessionRun(this.prompt_encoder_mask_decoder,{input_points:e.input_points,input_labels:e.input_labels,image_embeddings:e.image_embeddings,image_positional_embeddings:e.image_positional_embeddings})}async _call(e){return new SamImageSegmentationOutput(await super._call(e))}}class SamImageSegmentationOutput extends ModelOutput{constructor({iou_scores:e,pred_masks:t}){super(),this.iou_scores=e,this.pred_masks=t}}class MarianPreTrainedModel extends PreTrainedModel{}class MarianModel extends MarianPreTrainedModel{}class MarianMTModel extends MarianPreTrainedModel{constructor(e,t,r,Ee){super(e,t),this.decoder_merged_session=r,this.generation_config=Ee,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class M2M100PreTrainedModel extends PreTrainedModel{}class M2M100Model extends M2M100PreTrainedModel{}class M2M100ForConditionalGeneration extends M2M100PreTrainedModel{constructor(e,t,r,Ee){super(e,t),this.decoder_merged_session=r,this.generation_config=Ee,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.d_model/this.num_encoder_heads}}class Wav2Vec2PreTrainedModel extends PreTrainedModel{}class Wav2Vec2Model extends Wav2Vec2PreTrainedModel{}class Wav2Vec2ForCTC extends Wav2Vec2PreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class Wav2Vec2ForSequenceClassification extends Wav2Vec2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class Wav2Vec2ForAudioFrameClassification extends Wav2Vec2PreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class UniSpeechPreTrainedModel extends PreTrainedModel{}class UniSpeechModel extends UniSpeechPreTrainedModel{}class UniSpeechForCTC extends UniSpeechPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class UniSpeechForSequenceClassification extends UniSpeechPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class UniSpeechSatPreTrainedModel extends PreTrainedModel{}class UniSpeechSatModel extends UniSpeechSatPreTrainedModel{}class UniSpeechSatForCTC extends UniSpeechSatPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class UniSpeechSatForSequenceClassification extends UniSpeechSatPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class UniSpeechSatForAudioFrameClassification extends UniSpeechSatPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class Wav2Vec2BertPreTrainedModel extends PreTrainedModel{}class Wav2Vec2BertModel extends Wav2Vec2BertPreTrainedModel{}class Wav2Vec2BertForCTC extends Wav2Vec2BertPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class Wav2Vec2BertForSequenceClassification extends Wav2Vec2BertPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class HubertModel extends Wav2Vec2PreTrainedModel{}class HubertForCTC extends Wav2Vec2PreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class HubertForSequenceClassification extends Wav2Vec2PreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class WavLMPreTrainedModel extends PreTrainedModel{}class WavLMModel extends WavLMPreTrainedModel{}class WavLMForCTC extends WavLMPreTrainedModel{async _call(e){return new CausalLMOutput(await super._call(e))}}class WavLMForSequenceClassification extends WavLMPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class WavLMForXVector extends WavLMPreTrainedModel{async _call(e){return new XVectorOutput(await super._call(e))}}class WavLMForAudioFrameClassification extends WavLMPreTrainedModel{async _call(e){return new TokenClassifierOutput(await super._call(e))}}class SpeechT5PreTrainedModel extends PreTrainedModel{}class SpeechT5ForSpeechToText extends SpeechT5PreTrainedModel{}class SpeechT5ForTextToSpeech extends SpeechT5PreTrainedModel{constructor(e,t,r,Ee){super(e,t),this.decoder_merged_session=r,this.generation_config=Ee,this.num_decoder_layers=this.config.decoder_layers,this.num_decoder_heads=this.config.decoder_attention_heads,this.decoder_dim_kv=this.config.hidden_size/this.num_decoder_heads,this.num_encoder_layers=this.config.encoder_layers,this.num_encoder_heads=this.config.encoder_attention_heads,this.encoder_dim_kv=this.config.hidden_size/this.num_encoder_heads}async generate_speech(e,t,{threshold:r=.5,minlenratio:Ee=0,maxlenratio:Te=20,vocoder:Re=null}={}){const Me={input_ids:e},{encoder_outputs:Ve,encoder_attention_mask:De}=await encoderForward(this,Me),$e=Ve.dims[1]/this.config.reduction_factor,Oe=Math.floor($e*Te),Ce=Math.floor($e*Ee),Be=this.config.num_mel_bins;let Ue=[],We=null,He=null,Ge=0;for(;;){++Ge;const Ze=boolTensor(!!He);let fn;He?fn=He.output_sequence_out:fn=new Tensor("float32",new Float32Array(Be),[1,1,Be]);let yn={use_cache_branch:Ze,output_sequence:fn,encoder_attention_mask:De,speaker_embeddings:t,encoder_hidden_states:Ve};this.addPastKeyValues(yn,We),He=await sessionRun(this.decoder_merged_session,yn),We=this.getPastKeyValues(He,We);const{prob:mn,spectrum:pn}=He;if(Ue.push(pn),Ge>=Ce&&(Array.from(mn.data).filter(un=>un>=r).length>0||Ge>=Oe))break}const Ye=cat(Ue),{waveform:Je}=await sessionRun(Re.session,{spectrogram:Ye});return{spectrogram:Ye,waveform:Je}}}class SpeechT5HifiGan extends PreTrainedModel{main_input_name="spectrogram"}class TrOCRPreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_encoder_layers=this.num_decoder_layers=this.config.decoder_layers,this.num_encoder_heads=this.num_decoder_heads=this.config.decoder_attention_heads,this.encoder_dim_kv=this.decoder_dim_kv=this.config.d_model/this.num_decoder_heads}}class TrOCRForCausalLM extends TrOCRPreTrainedModel{}class MistralPreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class MistralModel extends MistralPreTrainedModel{}class MistralForCausalLM extends MistralPreTrainedModel{}class Starcoder2PreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_key_value_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class Starcoder2Model extends Starcoder2PreTrainedModel{}class Starcoder2ForCausalLM extends Starcoder2PreTrainedModel{}class FalconPreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.config.num_attention_heads}}class FalconModel extends FalconPreTrainedModel{}class FalconForCausalLM extends FalconPreTrainedModel{}class ClapPreTrainedModel extends PreTrainedModel{}class ClapModel extends ClapPreTrainedModel{}class ClapTextModelWithProjection extends ClapPreTrainedModel{static async from_pretrained(e,t={}){return t.model_file_name??="text_model",super.from_pretrained(e,t)}}class ClapAudioModelWithProjection extends ClapPreTrainedModel{static async from_pretrained(e,t={}){return t.model_file_name??="audio_model",super.from_pretrained(e,t)}}class VitsPreTrainedModel extends PreTrainedModel{}class VitsModel extends VitsPreTrainedModel{async _call(e){return new VitsModelOutput(await super._call(e))}}class SegformerPreTrainedModel extends PreTrainedModel{}class SegformerForImageClassification extends SegformerPreTrainedModel{}class SegformerForSemanticSegmentation extends SegformerPreTrainedModel{}class StableLmPreTrainedModel extends PreTrainedModel{constructor(e,t,r){super(e,t),this.generation_config=r,this.config.pad_token_id=this.config.eos_token_id,this.num_heads=this.config.num_attention_heads,this.num_layers=this.config.num_hidden_layers,this.dim_kv=this.config.hidden_size/this.num_heads}}class StableLmForCausalLM extends StableLmPreTrainedModel{}class EfficientNetPreTrainedModel extends PreTrainedModel{}class EfficientNetModel extends EfficientNetPreTrainedModel{}class EfficientNetForImageClassification extends EfficientNetPreTrainedModel{async _call(e){return new SequenceClassifierOutput(await super._call(e))}}class PretrainedMixin{static MODEL_CLASS_MAPPINGS=null;static BASE_IF_FAIL=!1;static async from_pretrained(e,{quantized:t=!0,progress_callback:r=null,config:Ee=null,cache_dir:Te=null,local_files_only:Re=!1,revision:Me="main",model_file_name:Ve=null}={}){let De={quantized:t,progress_callback:r,config:Ee,cache_dir:Te,local_files_only:Re,revision:Me,model_file_name:Ve};if(Ee=await AutoConfig.from_pretrained(e,De),De.config||(De.config=Ee),!this.MODEL_CLASS_MAPPINGS)throw new Error("`MODEL_CLASS_MAPPINGS` not implemented for this type of `AutoClass`: "+this.name);for(let $e of this.MODEL_CLASS_MAPPINGS){const Oe=$e.get(Ee.model_type);if(Oe)return await Oe[1].from_pretrained(e,De)}if(this.BASE_IF_FAIL)return console.warn(`Unknown model class "${Ee.model_type}", attempting to construct from base class.`),await PreTrainedModel.from_pretrained(e,De);throw Error(`Unsupported model type: ${Ee.model_type}`)}}const MODEL_MAPPING_NAMES_ENCODER_ONLY=new Map([["bert",["BertModel",BertModel]],["nomic_bert",["NomicBertModel",NomicBertModel]],["roformer",["RoFormerModel",RoFormerModel]],["electra",["ElectraModel",ElectraModel]],["esm",["EsmModel",EsmModel]],["convbert",["ConvBertModel",ConvBertModel]],["camembert",["CamembertModel",CamembertModel]],["deberta",["DebertaModel",DebertaModel]],["deberta-v2",["DebertaV2Model",DebertaV2Model]],["mpnet",["MPNetModel",MPNetModel]],["albert",["AlbertModel",AlbertModel]],["distilbert",["DistilBertModel",DistilBertModel]],["roberta",["RobertaModel",RobertaModel]],["xlm",["XLMModel",XLMModel]],["xlm-roberta",["XLMRobertaModel",XLMRobertaModel]],["clap",["ClapModel",ClapModel]],["clip",["CLIPModel",CLIPModel]],["clipseg",["CLIPSegModel",CLIPSegModel]],["chinese_clip",["ChineseCLIPModel",ChineseCLIPModel]],["siglip",["SiglipModel",SiglipModel]],["mobilebert",["MobileBertModel",MobileBertModel]],["squeezebert",["SqueezeBertModel",SqueezeBertModel]],["wav2vec2",["Wav2Vec2Model",Wav2Vec2Model]],["wav2vec2-bert",["Wav2Vec2BertModel",Wav2Vec2BertModel]],["unispeech",["UniSpeechModel",UniSpeechModel]],["unispeech-sat",["UniSpeechSatModel",UniSpeechSatModel]],["hubert",["HubertModel",HubertModel]],["wavlm",["WavLMModel",WavLMModel]],["audio-spectrogram-transformer",["ASTModel",ASTModel]],["vits",["VitsModel",VitsModel]],["detr",["DetrModel",DetrModel]],["table-transformer",["TableTransformerModel",TableTransformerModel]],["vit",["ViTModel",ViTModel]],["fastvit",["FastViTModel",FastViTModel]],["mobilevit",["MobileViTModel",MobileViTModel]],["mobilevitv2",["MobileViTV2Model",MobileViTV2Model]],["owlvit",["OwlViTModel",OwlViTModel]],["owlv2",["Owlv2Model",Owlv2Model]],["beit",["BeitModel",BeitModel]],["deit",["DeiTModel",DeiTModel]],["convnext",["ConvNextModel",ConvNextModel]],["convnextv2",["ConvNextV2Model",ConvNextV2Model]],["dinov2",["Dinov2Model",Dinov2Model]],["resnet",["ResNetModel",ResNetModel]],["swin",["SwinModel",SwinModel]],["swin2sr",["Swin2SRModel",Swin2SRModel]],["donut-swin",["DonutSwinModel",DonutSwinModel]],["yolos",["YolosModel",YolosModel]],["dpt",["DPTModel",DPTModel]],["glpn",["GLPNModel",GLPNModel]],["hifigan",["SpeechT5HifiGan",SpeechT5HifiGan]],["efficientnet",["EfficientNetModel",EfficientNetModel]]]),MODEL_MAPPING_NAMES_ENCODER_DECODER=new Map([["t5",["T5Model",T5Model]],["longt5",["LongT5Model",LongT5Model]],["mt5",["MT5Model",MT5Model]],["bart",["BartModel",BartModel]],["mbart",["MBartModel",MBartModel]],["marian",["MarianModel",MarianModel]],["whisper",["WhisperModel",WhisperModel]],["m2m_100",["M2M100Model",M2M100Model]],["blenderbot",["BlenderbotModel",BlenderbotModel]],["blenderbot-small",["BlenderbotSmallModel",BlenderbotSmallModel]]]),MODEL_MAPPING_NAMES_DECODER_ONLY=new Map([["bloom",["BloomModel",BloomModel]],["gpt2",["GPT2Model",GPT2Model]],["gptj",["GPTJModel",GPTJModel]],["gpt_bigcode",["GPTBigCodeModel",GPTBigCodeModel]],["gpt_neo",["GPTNeoModel",GPTNeoModel]],["gpt_neox",["GPTNeoXModel",GPTNeoXModel]],["codegen",["CodeGenModel",CodeGenModel]],["llama",["LlamaModel",LlamaModel]],["qwen2",["Qwen2Model",Qwen2Model]],["phi",["PhiModel",PhiModel]],["mpt",["MptModel",MptModel]],["opt",["OPTModel",OPTModel]],["mistral",["MistralModel",MistralModel]],["starcoder2",["Starcoder2Model",Starcoder2Model]],["falcon",["FalconModel",FalconModel]]]),MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES=new Map([["speecht5",["SpeechT5ForSpeechToText",SpeechT5ForSpeechToText]],["whisper",["WhisperForConditionalGeneration",WhisperForConditionalGeneration]]]),MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES=new Map([["speecht5",["SpeechT5ForTextToSpeech",SpeechT5ForTextToSpeech]]]),MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES=new Map([["vits",["VitsModel",VitsModel]]]),MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES=new Map([["bert",["BertForSequenceClassification",BertForSequenceClassification]],["roformer",["RoFormerForSequenceClassification",RoFormerForSequenceClassification]],["electra",["ElectraForSequenceClassification",ElectraForSequenceClassification]],["esm",["EsmForSequenceClassification",EsmForSequenceClassification]],["convbert",["ConvBertForSequenceClassification",ConvBertForSequenceClassification]],["camembert",["CamembertForSequenceClassification",CamembertForSequenceClassification]],["deberta",["DebertaForSequenceClassification",DebertaForSequenceClassification]],["deberta-v2",["DebertaV2ForSequenceClassification",DebertaV2ForSequenceClassification]],["mpnet",["MPNetForSequenceClassification",MPNetForSequenceClassification]],["albert",["AlbertForSequenceClassification",AlbertForSequenceClassification]],["distilbert",["DistilBertForSequenceClassification",DistilBertForSequenceClassification]],["roberta",["RobertaForSequenceClassification",RobertaForSequenceClassification]],["xlm",["XLMForSequenceClassification",XLMForSequenceClassification]],["xlm-roberta",["XLMRobertaForSequenceClassification",XLMRobertaForSequenceClassification]],["bart",["BartForSequenceClassification",BartForSequenceClassification]],["mbart",["MBartForSequenceClassification",MBartForSequenceClassification]],["mobilebert",["MobileBertForSequenceClassification",MobileBertForSequenceClassification]],["squeezebert",["SqueezeBertForSequenceClassification",SqueezeBertForSequenceClassification]]]),MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES=new Map([["bert",["BertForTokenClassification",BertForTokenClassification]],["roformer",["RoFormerForTokenClassification",RoFormerForTokenClassification]],["electra",["ElectraForTokenClassification",ElectraForTokenClassification]],["esm",["EsmForTokenClassification",EsmForTokenClassification]],["convbert",["ConvBertForTokenClassification",ConvBertForTokenClassification]],["camembert",["CamembertForTokenClassification",CamembertForTokenClassification]],["deberta",["DebertaForTokenClassification",DebertaForTokenClassification]],["deberta-v2",["DebertaV2ForTokenClassification",DebertaV2ForTokenClassification]],["mpnet",["MPNetForTokenClassification",MPNetForTokenClassification]],["distilbert",["DistilBertForTokenClassification",DistilBertForTokenClassification]],["roberta",["RobertaForTokenClassification",RobertaForTokenClassification]],["xlm",["XLMForTokenClassification",XLMForTokenClassification]],["xlm-roberta",["XLMRobertaForTokenClassification",XLMRobertaForTokenClassification]]]),MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES=new Map([["t5",["T5ForConditionalGeneration",T5ForConditionalGeneration]],["longt5",["LongT5ForConditionalGeneration",LongT5ForConditionalGeneration]],["mt5",["MT5ForConditionalGeneration",MT5ForConditionalGeneration]],["bart",["BartForConditionalGeneration",BartForConditionalGeneration]],["mbart",["MBartForConditionalGeneration",MBartForConditionalGeneration]],["marian",["MarianMTModel",MarianMTModel]],["m2m_100",["M2M100ForConditionalGeneration",M2M100ForConditionalGeneration]],["blenderbot",["BlenderbotForConditionalGeneration",BlenderbotForConditionalGeneration]],["blenderbot-small",["BlenderbotSmallForConditionalGeneration",BlenderbotSmallForConditionalGeneration]]]),MODEL_WITH_LM_HEAD_MAPPING_NAMES=new Map([["bloom",["BloomForCausalLM",BloomForCausalLM]],["gpt2",["GPT2LMHeadModel",GPT2LMHeadModel]],["gptj",["GPTJForCausalLM",GPTJForCausalLM]],["gpt_bigcode",["GPTBigCodeForCausalLM",GPTBigCodeForCausalLM]],["gpt_neo",["GPTNeoForCausalLM",GPTNeoForCausalLM]],["gpt_neox",["GPTNeoXForCausalLM",GPTNeoXForCausalLM]],["codegen",["CodeGenForCausalLM",CodeGenForCausalLM]],["llama",["LlamaForCausalLM",LlamaForCausalLM]],["qwen2",["Qwen2ForCausalLM",Qwen2ForCausalLM]],["phi",["PhiForCausalLM",PhiForCausalLM]],["mpt",["MptForCausalLM",MptForCausalLM]],["opt",["OPTForCausalLM",OPTForCausalLM]],["mbart",["MBartForCausalLM",MBartForCausalLM]],["mistral",["MistralForCausalLM",MistralForCausalLM]],["starcoder2",["Starcoder2ForCausalLM",Starcoder2ForCausalLM]],["falcon",["FalconForCausalLM",FalconForCausalLM]],["trocr",["TrOCRForCausalLM",TrOCRForCausalLM]],["stablelm",["StableLmForCausalLM",StableLmForCausalLM]]]),MODEL_FOR_MASKED_LM_MAPPING_NAMES=new Map([["bert",["BertForMaskedLM",BertForMaskedLM]],["roformer",["RoFormerForMaskedLM",RoFormerForMaskedLM]],["electra",["ElectraForMaskedLM",ElectraForMaskedLM]],["esm",["EsmForMaskedLM",EsmForMaskedLM]],["convbert",["ConvBertForMaskedLM",ConvBertForMaskedLM]],["camembert",["CamembertForMaskedLM",CamembertForMaskedLM]],["deberta",["DebertaForMaskedLM",DebertaForMaskedLM]],["deberta-v2",["DebertaV2ForMaskedLM",DebertaV2ForMaskedLM]],["mpnet",["MPNetForMaskedLM",MPNetForMaskedLM]],["albert",["AlbertForMaskedLM",AlbertForMaskedLM]],["distilbert",["DistilBertForMaskedLM",DistilBertForMaskedLM]],["roberta",["RobertaForMaskedLM",RobertaForMaskedLM]],["xlm",["XLMWithLMHeadModel",XLMWithLMHeadModel]],["xlm-roberta",["XLMRobertaForMaskedLM",XLMRobertaForMaskedLM]],["mobilebert",["MobileBertForMaskedLM",MobileBertForMaskedLM]],["squeezebert",["SqueezeBertForMaskedLM",SqueezeBertForMaskedLM]]]),MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES=new Map([["bert",["BertForQuestionAnswering",BertForQuestionAnswering]],["roformer",["RoFormerForQuestionAnswering",RoFormerForQuestionAnswering]],["electra",["ElectraForQuestionAnswering",ElectraForQuestionAnswering]],["convbert",["ConvBertForQuestionAnswering",ConvBertForQuestionAnswering]],["camembert",["CamembertForQuestionAnswering",CamembertForQuestionAnswering]],["deberta",["DebertaForQuestionAnswering",DebertaForQuestionAnswering]],["deberta-v2",["DebertaV2ForQuestionAnswering",DebertaV2ForQuestionAnswering]],["mpnet",["MPNetForQuestionAnswering",MPNetForQuestionAnswering]],["albert",["AlbertForQuestionAnswering",AlbertForQuestionAnswering]],["distilbert",["DistilBertForQuestionAnswering",DistilBertForQuestionAnswering]],["roberta",["RobertaForQuestionAnswering",RobertaForQuestionAnswering]],["xlm",["XLMForQuestionAnswering",XLMForQuestionAnswering]],["xlm-roberta",["XLMRobertaForQuestionAnswering",XLMRobertaForQuestionAnswering]],["mobilebert",["MobileBertForQuestionAnswering",MobileBertForQuestionAnswering]],["squeezebert",["SqueezeBertForQuestionAnswering",SqueezeBertForQuestionAnswering]]]),MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",VisionEncoderDecoderModel]]]),MODEL_FOR_DOCUMENT_QUESTION_ANSWERING_MAPPING_NAMES=new Map([["vision-encoder-decoder",["VisionEncoderDecoderModel",VisionEncoderDecoderModel]]]),MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES=new Map([["vit",["ViTForImageClassification",ViTForImageClassification]],["fastvit",["FastViTForImageClassification",FastViTForImageClassification]],["mobilevit",["MobileViTForImageClassification",MobileViTForImageClassification]],["mobilevitv2",["MobileViTV2ForImageClassification",MobileViTV2ForImageClassification]],["beit",["BeitForImageClassification",BeitForImageClassification]],["deit",["DeiTForImageClassification",DeiTForImageClassification]],["convnext",["ConvNextForImageClassification",ConvNextForImageClassification]],["convnextv2",["ConvNextV2ForImageClassification",ConvNextV2ForImageClassification]],["dinov2",["Dinov2ForImageClassification",Dinov2ForImageClassification]],["resnet",["ResNetForImageClassification",ResNetForImageClassification]],["swin",["SwinForImageClassification",SwinForImageClassification]],["segformer",["SegformerForImageClassification",SegformerForImageClassification]],["efficientnet",["EfficientNetForImageClassification",EfficientNetForImageClassification]]]),MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES=new Map([["detr",["DetrForObjectDetection",DetrForObjectDetection]],["table-transformer",["TableTransformerForObjectDetection",TableTransformerForObjectDetection]],["yolos",["YolosForObjectDetection",YolosForObjectDetection]]]),MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES=new Map([["owlvit",["OwlViTForObjectDetection",OwlViTForObjectDetection]],["owlv2",["Owlv2ForObjectDetection",Owlv2ForObjectDetection]]]),MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES=new Map([["detr",["DetrForSegmentation",DetrForSegmentation]],["clipseg",["CLIPSegForImageSegmentation",CLIPSegForImageSegmentation]]]),MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES=new Map([["segformer",["SegformerForSemanticSegmentation",SegformerForSemanticSegmentation]]]),MODEL_FOR_MASK_GENERATION_MAPPING_NAMES=new Map([["sam",["SamModel",SamModel]]]),MODEL_FOR_CTC_MAPPING_NAMES=new Map([["wav2vec2",["Wav2Vec2ForCTC",Wav2Vec2ForCTC]],["wav2vec2-bert",["Wav2Vec2BertForCTC",Wav2Vec2BertForCTC]],["unispeech",["UniSpeechForCTC",UniSpeechForCTC]],["unispeech-sat",["UniSpeechSatForCTC",UniSpeechSatForCTC]],["wavlm",["WavLMForCTC",WavLMForCTC]],["hubert",["HubertForCTC",HubertForCTC]]]),MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES=new Map([["wav2vec2",["Wav2Vec2ForSequenceClassification",Wav2Vec2ForSequenceClassification]],["wav2vec2-bert",["Wav2Vec2BertForSequenceClassification",Wav2Vec2BertForSequenceClassification]],["unispeech",["UniSpeechForSequenceClassification",UniSpeechForSequenceClassification]],["unispeech-sat",["UniSpeechSatForSequenceClassification",UniSpeechSatForSequenceClassification]],["wavlm",["WavLMForSequenceClassification",WavLMForSequenceClassification]],["hubert",["HubertForSequenceClassification",HubertForSequenceClassification]],["audio-spectrogram-transformer",["ASTForAudioClassification",ASTForAudioClassification]]]),MODEL_FOR_AUDIO_XVECTOR_MAPPING_NAMES=new Map([["wavlm",["WavLMForXVector",WavLMForXVector]]]),MODEL_FOR_AUDIO_FRAME_CLASSIFICATION_MAPPING_NAMES=new Map([["unispeech-sat",["UniSpeechSatForAudioFrameClassification",UniSpeechSatForAudioFrameClassification]],["wavlm",["WavLMForAudioFrameClassification",WavLMForAudioFrameClassification]],["wav2vec2",["Wav2Vec2ForAudioFrameClassification",Wav2Vec2ForAudioFrameClassification]]]),MODEL_FOR_IMAGE_MATTING_MAPPING_NAMES=new Map([["vitmatte",["VitMatteForImageMatting",VitMatteForImageMatting]]]),MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES=new Map([["swin2sr",["Swin2SRForImageSuperResolution",Swin2SRForImageSuperResolution]]]),MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES=new Map([["dpt",["DPTForDepthEstimation",DPTForDepthEstimation]],["depth_anything",["DepthAnythingForDepthEstimation",DepthAnythingForDepthEstimation]],["glpn",["GLPNForDepthEstimation",GLPNForDepthEstimation]]]),MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES=new Map([["clip",["CLIPVisionModelWithProjection",CLIPVisionModelWithProjection]],["siglip",["SiglipVisionModel",SiglipVisionModel]]]),MODEL_CLASS_TYPE_MAPPING=[[MODEL_MAPPING_NAMES_ENCODER_ONLY,MODEL_TYPES.EncoderOnly],[MODEL_MAPPING_NAMES_ENCODER_DECODER,MODEL_TYPES.EncoderDecoder],[MODEL_MAPPING_NAMES_DECODER_ONLY,MODEL_TYPES.DecoderOnly],[MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_WITH_LM_HEAD_MAPPING_NAMES,MODEL_TYPES.DecoderOnly],[MODEL_FOR_MASKED_LM_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES,MODEL_TYPES.Vision2Seq],[MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_MATTING_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_MASK_GENERATION_MAPPING_NAMES,MODEL_TYPES.MaskGeneration],[MODEL_FOR_CTC_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES,MODEL_TYPES.Seq2Seq],[MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_XVECTOR_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_AUDIO_FRAME_CLASSIFICATION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly],[MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES,MODEL_TYPES.EncoderOnly]];for(const[n,e]of MODEL_CLASS_TYPE_MAPPING)for(const[t,r]of n.values())MODEL_TYPE_MAPPING.set(t,e),MODEL_CLASS_TO_NAME_MAPPING.set(r,t),MODEL_NAME_TO_CLASS_MAPPING.set(t,r);const CUSTOM_MAPPING=[["CLIPTextModelWithProjection",CLIPTextModelWithProjection,MODEL_TYPES.EncoderOnly],["SiglipTextModel",SiglipTextModel,MODEL_TYPES.EncoderOnly],["ClapTextModelWithProjection",ClapTextModelWithProjection,MODEL_TYPES.EncoderOnly],["ClapAudioModelWithProjection",ClapAudioModelWithProjection,MODEL_TYPES.EncoderOnly]];for(const[n,e,t]of CUSTOM_MAPPING)MODEL_TYPE_MAPPING.set(n,t),MODEL_CLASS_TO_NAME_MAPPING.set(e,n),MODEL_NAME_TO_CLASS_MAPPING.set(n,e);class AutoModel extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=MODEL_CLASS_TYPE_MAPPING.map(e=>e[0]);static BASE_IF_FAIL=!0}class AutoModelForSequenceClassification extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_SEQUENCE_CLASSIFICATION_MAPPING_NAMES]}class AutoModelForTokenClassification extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_TOKEN_CLASSIFICATION_MAPPING_NAMES]}class AutoModelForSeq2SeqLM extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_SEQ_TO_SEQ_CAUSAL_LM_MAPPING_NAMES]}class AutoModelForSpeechSeq2Seq extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_SPEECH_SEQ_2_SEQ_MAPPING_NAMES]}class AutoModelForTextToSpectrogram extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_TEXT_TO_SPECTROGRAM_MAPPING_NAMES]}class AutoModelForTextToWaveform extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_TEXT_TO_WAVEFORM_MAPPING_NAMES]}class AutoModelForCausalLM extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_WITH_LM_HEAD_MAPPING_NAMES]}class AutoModelForMaskedLM extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_MASKED_LM_MAPPING_NAMES]}class AutoModelForQuestionAnswering extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_QUESTION_ANSWERING_MAPPING_NAMES]}class AutoModelForVision2Seq extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_VISION_2_SEQ_MAPPING_NAMES]}class AutoModelForImageClassification extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_IMAGE_CLASSIFICATION_MAPPING_NAMES]}class AutoModelForImageSegmentation extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_IMAGE_SEGMENTATION_MAPPING_NAMES]}class AutoModelForSemanticSegmentation extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_SEMANTIC_SEGMENTATION_MAPPING_NAMES]}class AutoModelForObjectDetection extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_OBJECT_DETECTION_MAPPING_NAMES]}class AutoModelForZeroShotObjectDetection extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_ZERO_SHOT_OBJECT_DETECTION_MAPPING_NAMES]}class AutoModelForCTC extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_CTC_MAPPING_NAMES]}class AutoModelForAudioClassification extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_AUDIO_CLASSIFICATION_MAPPING_NAMES]}class AutoModelForDocumentQuestionAnswering extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_DOCUMENT_QUESTION_ANSWERING_MAPPING_NAMES]}class AutoModelForImageToImage extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_IMAGE_TO_IMAGE_MAPPING_NAMES]}class AutoModelForDepthEstimation extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_DEPTH_ESTIMATION_MAPPING_NAMES]}class AutoModelForImageFeatureExtraction extends PretrainedMixin{static MODEL_CLASS_MAPPINGS=[MODEL_FOR_IMAGE_FEATURE_EXTRACTION_MAPPING_NAMES]}class Seq2SeqLMOutput extends ModelOutput{constructor({logits:e,past_key_values:t,encoder_outputs:r,decoder_attentions:Ee=null,cross_attentions:Te=null}){super(),this.logits=e,this.past_key_values=t,this.encoder_outputs=r,this.decoder_attentions=Ee,this.cross_attentions=Te}}class SequenceClassifierOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class XVectorOutput extends ModelOutput{constructor({logits:e,embeddings:t}){super(),this.logits=e,this.embeddings=t}}class TokenClassifierOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class MaskedLMOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class QuestionAnsweringModelOutput extends ModelOutput{constructor({start_logits:e,end_logits:t}){super(),this.start_logits=e,this.end_logits=t}}class CausalLMOutput extends ModelOutput{constructor({logits:e}){super(),this.logits=e}}class ImageMattingOutput extends ModelOutput{constructor({alphas:e}){super(),this.alphas=e}}class VitsModelOutput extends ModelOutput{constructor({waveform:e,spectrogram:t}){super(),this.waveform=e,this.spectrogram=t}}const BROWSER_ENV=typeof self<"u",WEBWORKER_ENV=BROWSER_ENV&&self.constructor.name==="DedicatedWorkerGlobalScope";let createCanvasFunction,ImageDataClass,loadImageFunction;if(BROWSER_ENV)createCanvasFunction=(n,e)=>{if(!self.OffscreenCanvas)throw new Error("OffscreenCanvas not supported by this browser.");return new self.OffscreenCanvas(n,e)},loadImageFunction=self.createImageBitmap,ImageDataClass=self.ImageData;else if(sharp)loadImageFunction=async n=>{const t=(await n.metadata()).channels;let{data:r,info:Ee}=await n.rotate().raw().toBuffer({resolveWithObject:!0});const Te=new RawImage(new Uint8ClampedArray(r),Ee.width,Ee.height,Ee.channels);return t!==void 0&&t!==Ee.channels&&Te.convert(t),Te};else throw new Error("Unable to load image processing library.");const RESAMPLING_MAPPING={0:"nearest",1:"lanczos",2:"bilinear",3:"bicubic",4:"box",5:"hamming"},CONTENT_TYPE_MAP=new Map([["png","image/png"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["gif","image/gif"]]);class RawImage{constructor(e,t,r,Ee){this.data=e,this.width=t,this.height=r,this.channels=Ee}get size(){return[this.width,this.height]}static async read(e){if(e instanceof RawImage)return e;if(typeof e=="string"||e instanceof URL)return await this.fromURL(e);throw new Error(`Unsupported input type: ${typeof e}`)}static async fromURL(e){let t=await getFile(e);if(t.status!==200)throw new Error(`Unable to read image from "${e}" (${t.status} ${t.statusText})`);let r=await t.blob();return this.fromBlob(r)}static async fromBlob(e){if(BROWSER_ENV){let t=await loadImageFunction(e);const r=createCanvasFunction(t.width,t.height).getContext("2d");return r.drawImage(t,0,0),new this(r.getImageData(0,0,t.width,t.height).data,t.width,t.height,4)}else{let t=sharp(await e.arrayBuffer());return await loadImageFunction(t)}}static fromTensor(e,t="CHW"){if(e.dims.length!==3)throw new Error(`Tensor should have 3 dimensions, but has ${e.dims.length} dimensions.`);if(t==="CHW")e=e.transpose(1,2,0);else if(t!=="HWC")throw new Error(`Unsupported channel format: ${t}`);if(!(e.data instanceof Uint8ClampedArray||e.data instanceof Uint8Array))throw new Error(`Unsupported tensor type: ${e.type}`);switch(e.dims[2]){case 1:case 2:case 3:case 4:return new RawImage(e.data,e.dims[1],e.dims[0],e.dims[2]);default:throw new Error(`Unsupported number of channels: ${e.dims[2]}`)}}grayscale(){if(this.channels===1)return this;let e=new Uint8ClampedArray(this.width*this.height*1);switch(this.channels){case 3:case 4:for(let t=0,r=0;t<this.data.length;t+=this.channels){const Ee=this.data[t],Te=this.data[t+1],Re=this.data[t+2];e[r++]=Math.round(.2989*Ee+.587*Te+.114*Re)}break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,1)}rgb(){if(this.channels===3)return this;let e=new Uint8ClampedArray(this.width*this.height*3);switch(this.channels){case 1:for(let t=0,r=0;t<this.data.length;++t)e[r++]=this.data[t],e[r++]=this.data[t],e[r++]=this.data[t];break;case 4:for(let t=0,r=0;t<this.data.length;t+=4)e[r++]=this.data[t],e[r++]=this.data[t+1],e[r++]=this.data[t+2];break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,3)}rgba(){if(this.channels===4)return this;let e=new Uint8ClampedArray(this.width*this.height*4);switch(this.channels){case 1:for(let t=0,r=0;t<this.data.length;++t)e[r++]=this.data[t],e[r++]=this.data[t],e[r++]=this.data[t],e[r++]=255;break;case 3:for(let t=0,r=0;t<this.data.length;t+=3)e[r++]=this.data[t],e[r++]=this.data[t+1],e[r++]=this.data[t+2],e[r++]=255;break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this._update(e,this.width,this.height,4)}async resize(e,t,{resample:r=2}={}){let Ee=RESAMPLING_MAPPING[r]??r;if(BROWSER_ENV){let Te=this.channels,Re=this.toCanvas();const Me=createCanvasFunction(e,t).getContext("2d");return Me.drawImage(Re,0,0,e,t),new RawImage(Me.getImageData(0,0,e,t).data,e,t,4).convert(Te)}else{let Te=this.toSharp();switch(Ee){case"box":case"hamming":(Ee==="box"||Ee==="hamming")&&(console.warn(`Resampling method ${Ee} is not yet supported. Using bilinear instead.`),Ee="bilinear");case"nearest":case"bilinear":case"bicubic":Te=Te.affine([e/this.width,0,0,t/this.height],{interpolator:Ee});break;case"lanczos":Te=Te.resize({width:e,height:t,fit:"fill",kernel:"lanczos3"});break;default:throw new Error(`Resampling method ${Ee} is not supported.`)}return await loadImageFunction(Te)}}async pad([e,t,r,Ee]){if(e=Math.max(e,0),t=Math.max(t,0),r=Math.max(r,0),Ee=Math.max(Ee,0),e===0&&t===0&&r===0&&Ee===0)return this;if(BROWSER_ENV){let Te=this.channels,Re=this.toCanvas(),Me=this.width+e+t,Ve=this.height+r+Ee;const De=createCanvasFunction(Me,Ve).getContext("2d");return De.drawImage(Re,0,0,this.width,this.height,e,r,Me,Ve),new RawImage(De.getImageData(0,0,Me,Ve).data,Me,Ve,4).convert(Te)}else{let Te=this.toSharp().extend({left:e,right:t,top:r,bottom:Ee});return await loadImageFunction(Te)}}async crop([e,t,r,Ee]){if(e=Math.max(e,0),t=Math.max(t,0),r=Math.min(r,this.width-1),Ee=Math.min(Ee,this.height-1),e===0&&t===0&&r===this.width-1&&Ee===this.height-1)return this;const Te=r-e+1,Re=Ee-t+1;if(BROWSER_ENV){const Me=this.channels,Ve=this.toCanvas(),De=createCanvasFunction(Te,Re).getContext("2d");return De.drawImage(Ve,e,t,Te,Re,0,0,Te,Re),new RawImage(De.getImageData(0,0,Te,Re).data,Te,Re,4).convert(Me)}else{const Me=this.toSharp().extract({left:e,top:t,width:Te,height:Re});return await loadImageFunction(Me)}}async center_crop(e,t){if(this.width===e&&this.height===t)return this;let r=(this.width-e)/2,Ee=(this.height-t)/2;if(BROWSER_ENV){let Te=this.channels,Re=this.toCanvas();const Me=createCanvasFunction(e,t).getContext("2d");let Ve=0,De=0,$e=0,Oe=0;return r>=0?Ve=r:$e=-r,Ee>=0?De=Ee:Oe=-Ee,Me.drawImage(Re,Ve,De,e,t,$e,Oe,e,t),new RawImage(Me.getImageData(0,0,e,t).data,e,t,4).convert(Te)}else{let Te=this.toSharp();if(r>=0&&Ee>=0)Te=Te.extract({left:Math.floor(r),top:Math.floor(Ee),width:e,height:t});else if(r<=0&&Ee<=0){let Re=Math.floor(-Ee),Me=Math.floor(-r);Te=Te.extend({top:Re,left:Me,right:e-this.width-Me,bottom:t-this.height-Re})}else{let Re=[0,0],Me=0;Ee<0?(Re[0]=Math.floor(-Ee),Re[1]=t-this.height-Re[0]):Me=Math.floor(Ee);let Ve=[0,0],De=0;r<0?(Ve[0]=Math.floor(-r),Ve[1]=e-this.width-Ve[0]):De=Math.floor(r),Te=Te.extend({top:Re[0],bottom:Re[1],left:Ve[0],right:Ve[1]}).extract({left:De,top:Me,width:e,height:t})}return await loadImageFunction(Te)}}async toBlob(e="image/png",t=1){if(!BROWSER_ENV)throw new Error("toBlob() is only supported in browser environments.");return await this.toCanvas().convertToBlob({type:e,quality:t})}toTensor(e="CHW"){let t=new Tensor("uint8",new Uint8Array(this.data),[this.height,this.width,this.channels]);if(e!=="HWC")if(e==="CHW")t=t.permute(2,0,1);else throw new Error(`Unsupported channel format: ${e}`);return t}toCanvas(){if(!BROWSER_ENV)throw new Error("toCanvas() is only supported in browser environments.");let e=this.clone().rgba(),t=createCanvasFunction(e.width,e.height),r=new ImageDataClass(e.data,e.width,e.height);return t.getContext("2d").putImageData(r,0,0),t}_update(e,t,r,Ee=null){return this.data=e,this.width=t,this.height=r,Ee!==null&&(this.channels=Ee),this}clone(){return new RawImage(this.data.slice(),this.width,this.height,this.channels)}convert(e){if(this.channels===e)return this;switch(e){case 1:this.grayscale();break;case 3:this.rgb();break;case 4:this.rgba();break;default:throw new Error(`Conversion failed due to unsupported number of channels: ${this.channels}`)}return this}async save(e){if(BROWSER_ENV){if(WEBWORKER_ENV)throw new Error("Unable to save an image from a Web Worker.");const t=e.split(".").pop().toLowerCase(),r=CONTENT_TYPE_MAP.get(t)??"image/png",Ee=await this.toBlob(r),Te=URL.createObjectURL(Ee),Re=document.createElement("a");Re.href=Te,Re.download=e,Re.click(),Re.remove()}else{if(env$1.useFS)return await this.toSharp().toFile(e);throw new Error("Unable to save the image because filesystem is disabled in this environment.")}}toSharp(){if(BROWSER_ENV)throw new Error("toSharp() is only supported in server-side environments.");return sharp(this.data,{raw:{width:this.width,height:this.height,channels:this.channels}})}}async function read_audio(n,e){if(typeof AudioContext>"u")throw Error("Unable to load audio from path/URL since `AudioContext` is not available in your environment. Instead, audio data should be passed directly to the pipeline/processor. For more information and some example code, see https://huggingface.co/docs/transformers.js/guides/node-audio-processing.");const t=await(await getFile(n)).arrayBuffer(),r=new AudioContext({sampleRate:e});typeof e>"u"&&console.warn(`No sampling rate provided, using default of ${r.sampleRate}Hz.`);const Ee=await r.decodeAudioData(t);let Te;if(Ee.numberOfChannels===2){const Re=Math.sqrt(2),Me=Ee.getChannelData(0),Ve=Ee.getChannelData(1);Te=new Float32Array(Me.length);for(let De=0;De<Ee.length;++De)Te[De]=Re*(Me[De]+Ve[De])/2}else Te=Ee.getChannelData(0);return Te}function hanning(n){if(n<1)return new Float64Array;if(n===1)return new Float64Array([1]);const e=n-1,t=Math.PI/e,r=new Float64Array(n);for(let Ee=0;Ee<n;++Ee){const Te=2*Ee-e;r[Ee]=.5+.5*Math.cos(t*Te)}return r}const HERTZ_TO_MEL_MAPPING={htk:n=>2595*Math.log10(1+n/700),kaldi:n=>1127*Math.log(1+n/700),slaney:(n,e=1e3,t=15,r=27/Math.log(6.4))=>n>=e?t+Math.log(n/e)*r:3*n/200};function hertz_to_mel(n,e="htk"){const t=HERTZ_TO_MEL_MAPPING[e];if(!t)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof n=="number"?t(n):n.map(r=>t(r))}const MEL_TO_HERTZ_MAPPING={htk:n=>700*(10**(n/2595)-1),kaldi:n=>700*(Math.exp(n/1127)-1),slaney:(n,e=1e3,t=15,r=Math.log(6.4)/27)=>n>=t?e*Math.exp(r*(n-t)):200*n/3};function mel_to_hertz(n,e="htk"){const t=MEL_TO_HERTZ_MAPPING[e];if(!t)throw new Error('mel_scale should be one of "htk", "slaney" or "kaldi".');return typeof n=="number"?t(n):n.map(r=>t(r))}function _create_triangular_filter_bank(n,e){const t=Float64Array.from({length:e.length-1},(Re,Me)=>e[Me+1]-e[Me]),r=Array.from({length:n.length},()=>new Array(e.length));for(let Re=0;Re<n.length;++Re){const Me=r[Re];for(let Ve=0;Ve<e.length;++Ve)Me[Ve]=e[Ve]-n[Re]}const Ee=e.length-2,Te=Array.from({length:Ee},()=>new Array(n.length));for(let Re=0;Re<n.length;++Re){const Me=r[Re];for(let Ve=0;Ve<Ee;++Ve){const De=-Me[Ve]/t[Ve],$e=Me[Ve+2]/t[Ve+1];Te[Ve][Re]=Math.max(0,Math.min(De,$e))}}return Te}function linspace(n,e,t){const r=(e-n)/(t-1);return Float64Array.from({length:t},(Ee,Te)=>n+r*Te)}function mel_filter_bank(n,e,t,r,Ee,Te=null,Re="htk",Me=!1){if(Te!==null&&Te!=="slaney")throw new Error('norm must be one of null or "slaney"');const Ve=hertz_to_mel(t,Re),De=hertz_to_mel(r,Re),$e=linspace(Ve,De,e+2);let Oe=mel_to_hertz($e,Re),Ce;if(Me){const Ue=Ee/(n*2);Ce=hertz_to_mel(Float64Array.from({length:n},(We,He)=>He*Ue),Re),Oe=$e}else Ce=linspace(0,Math.floor(Ee/2),n);const Be=_create_triangular_filter_bank(Ce,Oe);if(Te!==null&&Te==="slaney")for(let Ue=0;Ue<e;++Ue){const We=Be[Ue],He=2/(Oe[Ue+2]-Oe[Ue]);for(let Ge=0;Ge<n;++Ge)We[Ge]*=He}return Be}function padReflect(n,e,t){const r=new n.constructor(n.length+e+t),Ee=n.length-1;for(let Te=0;Te<n.length;++Te)r[e+Te]=n[Te];for(let Te=1;Te<=e;++Te)r[e-Te]=n[calculateReflectOffset(Te,Ee)];for(let Te=1;Te<=t;++Te)r[Ee+e+Te]=n[calculateReflectOffset(Ee-Te,Ee)];return r}function _db_conversion_helper(n,e,t,r,Ee){if(t<=0)throw new Error("reference must be greater than zero");if(r<=0)throw new Error("min_value must be greater than zero");t=Math.max(r,t);const Te=Math.log10(t);for(let Re=0;Re<n.length;++Re)n[Re]=e*Math.log10(Math.max(r,n[Re])-Te);if(Ee!==null){if(Ee<=0)throw new Error("db_range must be greater than zero");const Re=max(n)[0]-Ee;for(let Me=0;Me<n.length;++Me)n[Me]=Math.max(n[Me],Re)}return n}function amplitude_to_db(n,e=1,t=1e-5,r=null){return _db_conversion_helper(n,20,e,t,r)}function power_to_db(n,e=1,t=1e-10,r=null){return _db_conversion_helper(n,10,e,t,r)}function spectrogram(n,e,t,r,{fft_length:Ee=null,power:Te=1,center:Re=!0,pad_mode:Me="reflect",onesided:Ve=!0,preemphasis:De=null,mel_filters:$e=null,mel_floor:Oe=1e-10,log_mel:Ce=null,reference:Be=1,min_value:Ue=1e-10,db_range:We=null,remove_dc_offset:He=null,max_num_frames:Ge=null,do_pad:Ye=!0,transpose:Je=!1}={}){const Ze=e.length;if(Ee===null&&(Ee=t),t>Ee)throw Error(`frame_length (${t}) may not be larger than fft_length (${Ee})`);if(Ze!==t)throw new Error(`Length of the window (${Ze}) must equal frame_length (${t})`);if(r<=0)throw new Error("hop_length must be greater than zero");if(Te===null&&$e!==null)throw new Error("You have provided `mel_filters` but `power` is `None`. Mel spectrogram computation is not yet supported for complex-valued spectrogram. Specify `power` to fix this issue.");if(Re){if(Me!=="reflect")throw new Error(`pad_mode="${Me}" not implemented yet.`);const Cn=Math.floor((Ee-1)/2)+1;n=padReflect(n,Cn,Cn)}const fn=Math.floor(1+Math.floor((n.length-t)/r)),yn=Ve?Math.floor(Ee/2)+1:Ee;let mn=fn,pn=fn;Ge!==null&&(Ge>fn?Ye&&(pn=Ge):pn=mn=Ge);const un=new FFT(Ee),bn=new Float64Array(Ee),gn=new Float64Array(un.outputBufferSize),xn=new Array(mn);for(let Cn=0;Cn<mn;++Cn){const Dn=Cn*r;for(let Wn=0;Wn<t;++Wn)bn[Wn]=n[Dn+Wn];if(He){let Wn=0;for(let $n=0;$n<t;++$n)Wn+=bn[$n];const On=Wn/t;for(let $n=0;$n<t;++$n)bn[$n]-=On}if(De!==null){for(let Wn=t-1;Wn>=1;--Wn)bn[Wn]-=De*bn[Wn-1];bn[0]*=1-De}for(let Wn=0;Wn<e.length;++Wn)bn[Wn]*=e[Wn];un.realTransform(gn,bn);const Un=new Array(yn);for(let Wn=0;Wn<Un.length;++Wn){const On=Wn<<1;Un[Wn]=gn[On]**2+gn[On+1]**2}xn[Cn]=Un}if(Te!==null&&Te!==2){const Cn=2/Te;for(let Dn=0;Dn<xn.length;++Dn){const Un=xn[Dn];for(let Wn=0;Wn<Un.length;++Wn)Un[Wn]**=Cn}}const En=$e.length,Pn=new Float32Array(En*pn),Ln=Je?[pn,En]:[En,pn];for(let Cn=0;Cn<En;++Cn){const Dn=$e[Cn];for(let Un=0;Un<mn;++Un){const Wn=xn[Un];let On=0;for(let $n=0;$n<yn;++$n)On+=Dn[$n]*Wn[$n];Pn[Je?Un*En+Cn:Cn*mn+Un]=Math.max(Oe,On)}}if(Te!==null&&Ce!==null){const Cn=Math.min(Pn.length,mn*En);switch(Ce){case"log":for(let Dn=0;Dn<Cn;++Dn)Pn[Dn]=Math.log(Pn[Dn]);break;case"log10":for(let Dn=0;Dn<Cn;++Dn)Pn[Dn]=Math.log10(Pn[Dn]);break;case"dB":if(Te===1)amplitude_to_db(Pn,Be,Ue,We);else if(Te===2)power_to_db(Pn,Be,Ue,We);else throw new Error(`Cannot use log_mel option '${Ce}' with power ${Te}`);break;default:throw new Error(`log_mel must be one of null, 'log', 'log10' or 'dB'. Got '${Ce}'`)}}return{data:Pn,dims:Ln}}function window_function(n,e,{periodic:t=!0,frame_length:r=null,center:Ee=!0}={}){const Te=t?n+1:n;let Re;switch(e){case"boxcar":Re=new Float64Array(Te).fill(1);break;case"hann":case"hann_window":Re=hanning(Te);break;case"povey":Re=hanning(Te).map(Me=>Math.pow(Me,.85));break;default:throw new Error(`Unknown window type ${e}.`)}if(t&&(Re=Re.subarray(0,n)),r===null)return Re;if(n>r)throw new Error(`Length of the window (${n}) may not be larger than frame_length (${r})`);return Re}function center_to_corners_format([n,e,t,r]){return[n-t/2,e-r/2,n+t/2,e+r/2]}function post_process_object_detection(n,e=.5,t=null,r=!1){const Ee=n.logits,Te=n.pred_boxes,[Re,Me,Ve]=Ee.dims;if(t!==null&&t.length!==Re)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let De=[];for(let $e=0;$e<Re;++$e){let Oe=t!==null?t[$e]:null,Ce={boxes:[],classes:[],scores:[]},Be=Ee[$e],Ue=Te[$e];for(let We=0;We<Me;++We){let He=Be[We],Ge=[],Ye;if(r){Ye=He.sigmoid().data;for(let Je=0;Je<Ye.length;++Je)Ye[Je]>e&&Ge.push(Je)}else{let Je=max(He.data)[1];if(Je===Ve-1)continue;Ge.push(Je),Ye=softmax(He.data)}for(const Je of Ge){let Ze=Ue[We].data;Ze=center_to_corners_format(Ze),Oe!==null&&(Ze=Ze.map((fn,yn)=>fn*Oe[(yn+1)%2])),Ce.boxes.push(Ze),Ce.classes.push(Je),Ce.scores.push(Ye[Je])}}De.push(Ce)}return De}function validate_audio_inputs(n,e){if(!(n instanceof Float32Array||n instanceof Float64Array))throw new Error(`${e} expects input to be a Float32Array or a Float64Array, but got ${n?.constructor?.name??typeof n} instead. If using the feature extractor directly, remember to use \`read_audio(url, sampling_rate)\` to obtain the raw audio data of the file/url.`)}function constraint_to_multiple_of(n,e,t=0,r=null){const Ee=n/e;let Te=bankers_round(Ee)*e;return r!==null&&Te>r&&(Te=Math.floor(Ee)*e),Te<t&&(Te=Math.ceil(Ee)*e),Te}function enforce_size_divisibility([n,e],t){return[Math.max(Math.floor(n/t),1)*t,Math.max(Math.floor(e/t),1)*t]}class FeatureExtractor extends Callable{constructor(e){super(),this.config=e}}class ImageFeatureExtractor extends FeatureExtractor{constructor(e){super(e),this.image_mean=this.config.image_mean??this.config.mean,this.image_std=this.config.image_std??this.config.std,this.resample=this.config.resample??2,this.do_rescale=this.config.do_rescale??!0,this.rescale_factor=this.config.rescale_factor??1/255,this.do_normalize=this.config.do_normalize,this.do_resize=this.config.do_resize,this.do_thumbnail=this.config.do_thumbnail,this.size=this.config.size,this.size_divisibility=this.config.size_divisibility??this.config.size_divisor,this.do_center_crop=this.config.do_center_crop,this.crop_size=this.config.crop_size,this.do_convert_rgb=this.config.do_convert_rgb??!0,this.do_crop_margin=this.config.do_crop_margin,this.pad_size=this.config.pad_size,this.do_pad=this.config.do_pad,this.do_pad&&!this.pad_size&&this.size&&this.size.width!==void 0&&this.size.height!==void 0&&(this.pad_size=this.size),this.do_flip_channel_order=this.config.do_flip_channel_order??!1}async thumbnail(e,t,r=2){const Ee=e.height,Te=e.width,Re=t.height,Me=t.width;let Ve=Math.min(Ee,Re),De=Math.min(Te,Me);return Ve===Ee&&De===Te?e:(Ee>Te?De=Math.floor(Te*Ve/Ee):Te>Ee&&(Ve=Math.floor(Ee*De/Te)),await e.resize(De,Ve,{resample:r}))}async crop_margin(e,t=200){const r=e.clone().grayscale(),Ee=min(r.data)[0],Re=max(r.data)[0]-Ee;if(Re===0)return e;const Me=t/255;let Ve=r.width,De=r.height,$e=0,Oe=0;for(let Ce=0;Ce<r.height;++Ce){const Be=Ce*r.width;for(let Ue=0;Ue<r.width;++Ue)(r.data[Be+Ue]-Ee)/Re<Me&&(Ve=Math.min(Ve,Ue),De=Math.min(De,Ce),$e=Math.max($e,Ue),Oe=Math.max(Oe,Ce))}return e=await e.crop([Ve,De,$e,Oe]),e}pad_image(e,t,r,{mode:Ee="constant",center:Te=!1,constant_values:Re=0}={}){const[Me,Ve,De]=t;let $e,Oe;if(typeof r=="number"?($e=r,Oe=r):($e=r.width,Oe=r.height),$e!==Ve||Oe!==Me){const Ce=new Float32Array($e*Oe*De);if(Array.isArray(Re))for(let We=0;We<Ce.length;++We)Ce[We]=Re[We%De];else Re!==0&&Ce.fill(Re);const[Be,Ue]=Te?[Math.floor(($e-Ve)/2),Math.floor((Oe-Me)/2)]:[0,0];for(let We=0;We<Me;++We){const He=(We+Ue)*$e,Ge=We*Ve;for(let Ye=0;Ye<Ve;++Ye){const Je=(He+Ye+Be)*De,Ze=(Ge+Ye)*De;for(let fn=0;fn<De;++fn)Ce[Je+fn]=e[Ze+fn]}}if(Ee==="symmetric"){if(Te)throw new Error("`center` padding is not supported when `mode` is set to `symmetric`.");const We=Me-1,He=Ve-1;for(let Ge=0;Ge<Oe;++Ge){const Ye=Ge*$e,Je=calculateReflectOffset(Ge,We)*Ve;for(let Ze=0;Ze<$e;++Ze){if(Ge<Me&&Ze<Ve)continue;const fn=(Ye+Ze)*De,yn=(Je+calculateReflectOffset(Ze,He))*De;for(let mn=0;mn<De;++mn)Ce[fn+mn]=e[yn+mn]}}}e=Ce,t=[Oe,$e,De]}return[e,t]}rescale(e){for(let t=0;t<e.length;++t)e[t]=this.rescale_factor*e[t]}get_resize_output_image_size(e,t){const[r,Ee]=e.size;let Te,Re;if(this.do_thumbnail){const{height:Me,width:Ve}=t;Te=Math.min(Me,Ve)}else Number.isInteger(t)?(Te=t,Re=this.config.max_size??Te):t!==void 0&&(Te=t.shortest_edge,Re=t.longest_edge);if(Te!==void 0||Re!==void 0){const Me=Te===void 0?1:Math.max(Te/r,Te/Ee),Ve=r*Me,De=Ee*Me,$e=Re===void 0?1:Math.min(Re/Ve,Re/De);let Oe=Math.floor(Number((Ve*$e).toFixed(2))),Ce=Math.floor(Number((De*$e).toFixed(2)));return this.size_divisibility!==void 0&&([Oe,Ce]=enforce_size_divisibility([Oe,Ce],this.size_divisibility)),[Oe,Ce]}else if(t!==void 0&&t.width!==void 0&&t.height!==void 0){let Me=t.width,Ve=t.height;if(this.config.keep_aspect_ratio&&this.config.ensure_multiple_of){let De=Ve/Ee,$e=Me/r;Math.abs(1-$e)<Math.abs(1-De)?De=$e:$e=De,Ve=constraint_to_multiple_of(De*Ee,this.config.ensure_multiple_of),Me=constraint_to_multiple_of($e*r,this.config.ensure_multiple_of)}return[Me,Ve]}else{if(this.size_divisibility!==void 0)return enforce_size_divisibility([r,Ee],this.size_divisibility);throw new Error(`Could not resize image due to unsupported \`this.size\` option in config: ${JSON.stringify(t)}`)}}async resize(e){const[t,r]=this.get_resize_output_image_size(e,this.size);return await e.resize(t,r,{resample:this.resample})}async preprocess(e,{do_normalize:t=null,do_pad:r=null,do_convert_rgb:Ee=null,do_convert_grayscale:Te=null,do_flip_channel_order:Re=null}={}){this.do_crop_margin&&(e=await this.crop_margin(e));const[Me,Ve]=e.size;if(Ee??this.do_convert_rgb?e=e.rgb():Te&&(e=e.grayscale()),this.do_resize&&(e=await this.resize(e)),this.do_thumbnail&&(e=await this.thumbnail(e,this.size,this.resample)),this.do_center_crop){let Be,Ue;Number.isInteger(this.crop_size)?(Be=this.crop_size,Ue=this.crop_size):(Be=this.crop_size.width,Ue=this.crop_size.height),e=await e.center_crop(Be,Ue)}const De=[e.height,e.width];let $e=Float32Array.from(e.data),Oe=[e.height,e.width,e.channels];if(this.do_rescale&&this.rescale($e),t??this.do_normalize){let Be=this.image_mean;Array.isArray(this.image_mean)||(Be=new Array(e.channels).fill(Be));let Ue=this.image_std;if(Array.isArray(this.image_std)||(Ue=new Array(e.channels).fill(Be)),Be.length!==e.channels||Ue.length!==e.channels)throw new Error(`When set to arrays, the length of \`image_mean\` (${Be.length}) and \`image_std\` (${Ue.length}) must match the number of channels in the image (${e.channels}).`);for(let We=0;We<$e.length;We+=e.channels)for(let He=0;He<e.channels;++He)$e[We+He]=($e[We+He]-Be[He])/Ue[He]}if(r??this.do_pad){if(this.pad_size)[$e,Oe]=this.pad_image($e,[e.height,e.width,e.channels],this.pad_size);else if(this.size_divisibility){const[Be,Ue]=enforce_size_divisibility([Oe[1],Oe[0]],this.size_divisibility);[$e,Oe]=this.pad_image($e,Oe,{width:Be,height:Ue})}}if(Re??this.do_flip_channel_order){if(Oe[2]!==3)throw new Error("Flipping channel order is only supported for RGB images.");for(let Be=0;Be<$e.length;Be+=3){const Ue=$e[Be];$e[Be]=$e[Be+2],$e[Be+2]=Ue}}const Ce=new Tensor("float32",$e,Oe).permute(2,0,1);return{original_size:[Ve,Me],reshaped_input_size:De,pixel_values:Ce}}async _call(e,...t){Array.isArray(e)||(e=[e]);const r=await Promise.all(e.map(Te=>this.preprocess(Te)));return{pixel_values:stack(r.map(Te=>Te.pixel_values),0),original_sizes:r.map(Te=>Te.original_size),reshaped_input_sizes:r.map(Te=>Te.reshaped_input_size)}}}class SegformerFeatureExtractor extends ImageFeatureExtractor{post_process_semantic_segmentation(e,t=null){const r=e.logits,Ee=r.dims[0];if(t!==null&&t.length!==Ee)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");const Te=[];for(let Re=0;Re<Ee;++Re){const Me=t!==null?t[Re]:null;let Ve=r[Re];Me!==null&&(Ve=interpolate(Ve,Me,"bilinear",!1));const[De,$e]=Me??Ve.dims.slice(-2),Oe=new Tensor("int32",new Int32Array(De*$e),[De,$e]),Ce=Ve[0].data;for(let He=1;He<Ve.dims[0];++He){const Ge=Ve[He].data;for(let Ye=0;Ye<Ge.length;++Ye)Ge[Ye]>Ce[Ye]&&(Ce[Ye]=Ge[Ye],Oe.data[Ye]=He)}const Be=new Array(Ve.dims[0]),Ue=Oe.data;for(let He=0;He<Ue.length;++He){const Ge=Ue[He];Be[Ge]=Ge}const We=Be.filter(He=>He!==void 0);Te.push({segmentation:Oe,labels:We})}return Te}}class DPTFeatureExtractor extends ImageFeatureExtractor{}class DPTImageProcessor extends DPTFeatureExtractor{}class BitImageProcessor extends ImageFeatureExtractor{}class GLPNFeatureExtractor extends ImageFeatureExtractor{}class CLIPFeatureExtractor extends ImageFeatureExtractor{}class ChineseCLIPFeatureExtractor extends ImageFeatureExtractor{}class SiglipImageProcessor extends ImageFeatureExtractor{}class ConvNextFeatureExtractor extends ImageFeatureExtractor{constructor(e){super(e),this.crop_pct=this.config.crop_pct??224/256}async resize(e){const t=this.size?.shortest_edge;if(t===void 0)throw new Error("Size dictionary must contain 'shortest_edge' key.");if(t<384){const r=Math.floor(t/this.crop_pct),[Ee,Te]=this.get_resize_output_image_size(e,{shortest_edge:r});e=await e.resize(Ee,Te,{resample:this.resample}),e=await e.center_crop(t,t)}else e=await e.resize(t,t,{resample:this.resample});return e}}class ConvNextImageProcessor extends ConvNextFeatureExtractor{}class ViTFeatureExtractor extends ImageFeatureExtractor{}class ViTImageProcessor extends ImageFeatureExtractor{}class EfficientNetImageProcessor extends ImageFeatureExtractor{constructor(e){super(e),this.include_top=this.config.include_top??!0,this.include_top&&(this.image_std=this.image_std.map(t=>t*t))}}class MobileViTFeatureExtractor extends ImageFeatureExtractor{}class MobileViTImageProcessor extends MobileViTFeatureExtractor{}class OwlViTFeatureExtractor extends ImageFeatureExtractor{post_process_object_detection(...e){return post_process_object_detection(...e)}}class Owlv2ImageProcessor extends OwlViTFeatureExtractor{}class DeiTFeatureExtractor extends ImageFeatureExtractor{}class BeitFeatureExtractor extends ImageFeatureExtractor{}class DonutFeatureExtractor extends ImageFeatureExtractor{pad_image(e,t,r,Ee={}){const[Te,Re,Me]=t;let Ve=this.image_mean;Array.isArray(this.image_mean)||(Ve=new Array(Me).fill(Ve));let De=this.image_std;Array.isArray(De)||(De=new Array(Me).fill(Ve));const $e=Ve.map((Oe,Ce)=>-Oe/De[Ce]);return super.pad_image(e,t,r,{center:!0,constant_values:$e,...Ee})}}class NougatImageProcessor extends DonutFeatureExtractor{}class DetrFeatureExtractor extends ImageFeatureExtractor{async _call(e){const t=await super._call(e),r=[t.pixel_values.dims[0],64,64],Ee=new Tensor("int64",new BigInt64Array(r.reduce((Te,Re)=>Te*Re)).fill(1n),r);return{...t,pixel_mask:Ee}}post_process_object_detection(...e){return post_process_object_detection(...e)}remove_low_and_no_objects(e,t,r,Ee){let Te=[],Re=[],Me=[];for(let Ve=0;Ve<e.dims[0];++Ve){let De=e[Ve],$e=t[Ve],Oe=max(De.data)[1];if(Oe===Ee)continue;let Be=softmax(De.data)[Oe];Be>r&&(Te.push($e),Re.push(Be),Me.push(Oe))}return[Te,Re,Me]}check_segment_validity(e,t,r,Ee=.5,Te=.8){let Re=[],Me=0,Ve=0;for(let $e=0;$e<e.length;++$e)e[$e]===r&&(Re.push($e),++Me),t[r].data[$e]>=Ee&&++Ve;let De=Me>0&&Ve>0;return De&&(De=Me/Ve>Te),[De,Re]}compute_segments(e,t,r,Ee,Te,Re=null,Me=null){let[Ve,De]=Me??e[0].dims,$e=new Tensor("int32",new Int32Array(Ve*De),[Ve,De]),Oe=[];if(Me!==null)for(let We=0;We<e.length;++We)e[We]=interpolate(e[We],Me,"bilinear",!1);let Ce=new Int32Array(e[0].data.length),Be=new Float32Array(e[0].data.length);for(let We=0;We<e.length;++We){let He=t[We];for(let Ge=0;Ge<e[We].data.length;++Ge)e[We].data[Ge]*=He,e[We].data[Ge]>Be[Ge]&&(Ce[Ge]=We,Be[Ge]=e[We].data[Ge])}let Ue=0;for(let We=0;We<r.length;++We){let He=r[We],[Ge,Ye]=this.check_segment_validity(Ce,e,We,Ee,Te);if(Ge){++Ue;for(let Je of Ye)$e.data[Je]=Ue;Oe.push({id:Ue,label_id:He,score:t[We]})}}return[$e,Oe]}post_process_panoptic_segmentation(e,t=.5,r=.5,Ee=.8,Te=null,Re=null){Te===null&&(console.warn("`label_ids_to_fuse` unset. No instance will be fused."),Te=new Set);const Me=e.logits,De=e.pred_masks.sigmoid();let[$e,Oe,Ce]=Me.dims;if(Ce-=1,Re!==null&&Re.length!==$e)throw Error("Make sure that you pass in as many target sizes as the batch dimension of the logits");let Be=[];for(let Ue=0;Ue<$e;++Ue){let We=Re!==null?Re[Ue]:null,He=Me[Ue],Ge=De[Ue],[Ye,Je,Ze]=this.remove_low_and_no_objects(He,Ge,t,Ce);if(Ze.length===0){let[mn,pn]=We??Ge.dims.slice(-2),un=new Tensor("int32",new Int32Array(mn*pn).fill(-1),[mn,pn]);Be.push({segmentation:un,segments_info:[]});continue}let[fn,yn]=this.compute_segments(Ye,Je,Ze,r,Ee,Te,We);Be.push({segmentation:fn,segments_info:yn})}return Be}post_process_instance_segmentation(){throw Error("Not implemented yet")}}class YolosFeatureExtractor extends ImageFeatureExtractor{post_process_object_detection(...e){return post_process_object_detection(...e)}}class SamImageProcessor extends ImageFeatureExtractor{reshape_input_points(e,t,r){e=structuredClone(e);let Ee=calculateDimensions(e);if(Ee.length===3)Ee=[1,...Ee],e=[e];else if(Ee.length!==4)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");for(let Te=0;Te<e.length;++Te){let Re=t[Te],Me=r[Te],Ve=[Me[0]/Re[0],Me[1]/Re[1]];for(let De=0;De<e[Te].length;++De)for(let $e=0;$e<e[Te][De].length;++$e)for(let Oe=0;Oe<e[Te][De][$e].length;++Oe)e[Te][De][$e][Oe]*=Ve[Oe]}return new Tensor("float32",Float32Array.from(e.flat(1/0)),Ee)}add_input_labels(e,t){let r=calculateDimensions(e);if(r.length===2)r=[1,...r],e=[e];else if(r.length!==3)throw Error("The input_points must be a 4D tensor of shape `batch_size`, `point_batch_size`, `nb_points_per_image`, `2`.");if(r.some((Ee,Te)=>Ee!==t.dims[Te]))throw Error(`The first ${r.length} dimensions of 'input_points' and 'input_labels' must be the same.`);return new Tensor("int64",e.flat(1/0).map(BigInt),r)}async _call(e,t=null,r=null){const Ee=await super._call(e);if(t&&(Ee.input_points=this.reshape_input_points(t,Ee.original_sizes,Ee.reshaped_input_sizes)),r){if(!Ee.input_points)throw Error("`input_points` must be provided if `input_labels` are provided.");Ee.input_labels=this.add_input_labels(r,Ee.input_points)}return Ee}post_process_masks(e,t,r,{mask_threshold:Ee=0,binarize:Te=!0,pad_size:Re=null}={}){const Me=[];Re=Re??this.pad_size;const Ve=[Re.height,Re.width];for(let De=0;De<t.length;++De){const $e=t[De],Oe=r[De],Ce=e[De],Be=[];for(let Ue=0;Ue<Ce.dims[0];++Ue){const We=Ce[Ue];let He=interpolate(We,Ve,"bilinear",!1);if(He=He.slice(null,[0,Oe[0]],[0,Oe[1]]),He=interpolate(He,$e,"bilinear",!1),Te){const Ge=new Uint8Array(He.data.length);for(let Ye=0;Ye<He.data.length;++Ye)He.data[Ye]>Ee&&(Ge[Ye]=1);He=new Tensor("bool",Ge,He.dims)}Be.push(He)}Me.push(stack(Be))}return Me}}class Swin2SRImageProcessor extends ImageFeatureExtractor{pad_image(e,t,r,Ee={}){const[Te,Re,Me]=t;return super.pad_image(e,t,{width:Re+(r-Re%r)%r,height:Te+(r-Te%r)%r},{mode:"symmetric",center:!1,constant_values:-1,...Ee})}}class VitMatteImageProcessor extends ImageFeatureExtractor{async _call(e,t){Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]);const r=await Promise.all(e.map(Re=>this.preprocess(Re))),Ee=await Promise.all(t.map(Re=>this.preprocess(Re,{do_normalize:!1,do_convert_rgb:!1,do_convert_grayscale:!0})));return{pixel_values:stack(r.map((Re,Me)=>cat([Re.pixel_values,Ee[Me].pixel_values],0)),0),original_sizes:r.map(Re=>Re.original_size),reshaped_input_sizes:r.map(Re=>Re.reshaped_input_size)}}}class WhisperFeatureExtractor extends FeatureExtractor{constructor(e){super(e),this.config.mel_filters??=mel_filter_bank(Math.floor(1+this.config.n_fft/2),this.config.feature_size,0,8e3,this.config.sampling_rate,"slaney","slaney"),this.window=window_function(this.config.n_fft,"hann")}_extract_fbank_features(e){const{data:t,dims:r}=spectrogram(e,this.window,this.config.n_fft,this.config.hop_length,{power:2,mel_filters:this.config.mel_filters,log_mel:"log10",max_num_frames:this.config.nb_max_frames}),Ee=max(t)[0];for(let Te=0;Te<t.length;++Te)t[Te]=(Math.max(t[Te],Ee-8)+4)/4;return{data:t,dims:r}}async _call(e){validate_audio_inputs(e,"WhisperFeatureExtractor");let t;e.length>this.config.n_samples?(console.warn("Attempting to extract features for audio longer than 30 seconds. If using a pipeline to extract transcript from a long audio clip, remember to specify `chunk_length_s` and/or `stride_length_s`."),t=e.slice(0,this.config.n_samples)):(t=new Float32Array(this.config.n_samples),t.set(e));const{data:r,dims:Ee}=this._extract_fbank_features(t);return{input_features:new Tensor("float32",r,[1,...Ee])}}}class Wav2Vec2FeatureExtractor extends FeatureExtractor{_zero_mean_unit_var_norm(e){const r=e.reduce((Te,Re)=>Te+Re,0)/e.length,Ee=e.reduce((Te,Re)=>Te+(Re-r)**2,0)/e.length;return e.map(Te=>(Te-r)/Math.sqrt(Ee+1e-7))}async _call(e){validate_audio_inputs(e,"Wav2Vec2FeatureExtractor"),e instanceof Float64Array&&(e=new Float32Array(e));let t=e;this.config.do_normalize&&(t=this._zero_mean_unit_var_norm(t));const r=[1,t.length];return{input_values:new Tensor("float32",t,r),attention_mask:new Tensor("int64",new BigInt64Array(t.length).fill(1n),r)}}}class SeamlessM4TFeatureExtractor extends FeatureExtractor{constructor(e){super(e);const t=this.config.sampling_rate,r=mel_filter_bank(256,this.config.num_mel_bins,20,Math.floor(t/2),t,null,"kaldi",!0);for(let Ee=0;Ee<r.length;++Ee)r[Ee].push(0);this.mel_filters=r,this.window=window_function(400,"povey",{periodic:!1})}_extract_fbank_features(e,t){return e=e.map(r=>r*32768),spectrogram(e,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:t,transpose:!0})}async _call(e,{padding:t=!0,pad_to_multiple_of:r=2,do_normalize_per_mel_bins:Ee=!0,return_attention_mask:Te=!0}={}){validate_audio_inputs(e,"SeamlessM4TFeatureExtractor");let Re=this._extract_fbank_features(e,this.config.max_length);if(Ee){const[Ue,We]=Re.dims;for(let He=0;He<We;++He){let Ge=0;for(let fn=0;fn<Ue;++fn)Ge+=Re.data[fn*We+He];const Ye=Ge/Ue;let Je=0;for(let fn=0;fn<Ue;++fn)Je+=(Re.data[fn*We+He]-Ye)**2;Je/=Ue-1;const Ze=Math.sqrt(Je+1e-7);for(let fn=0;fn<Ue;++fn){const yn=fn*We+He;Re.data[yn]=(Re.data[yn]-Ye)/Ze}}}let Me;if(t){const[Ue,We]=Re.dims,He=Ue%r;if(He>0){const Ge=new Float32Array(We*(Ue+He));Ge.set(Re.data),Ge.fill(this.config.padding_value,Re.data.length);const Ye=Ue+He;Re={data:Ge,dims:[Ye,We]},Te&&(Me=new Tensor("int64",new BigInt64Array(Ye),[1,Ye]),Me.data.fill(1n,0,Ue))}}const[Ve,De]=Re.dims,$e=this.config.stride;if(Ve%$e!==0)throw new Error(`The number of frames (${Ve}) must be a multiple of the stride (${$e}).`);const Ce=new Tensor("float32",Re.data,Re.dims).view(1,Math.floor(Ve/$e),De*$e),Be={input_features:Ce};if(Te){const Ue=Ce.dims[1],We=new Tensor("int64",new BigInt64Array(Ue),[1,Ue]);if(Me)for(let He=1,Ge=0;He<Ve;He+=$e,++Ge)We.data[Ge]=Me.data[He];else We.data.fill(1n);Be.attention_mask=We}return Be}}class ASTFeatureExtractor extends FeatureExtractor{constructor(e){super(e);const t=this.config.sampling_rate,r=mel_filter_bank(256,this.config.num_mel_bins,20,Math.floor(t/2),t,null,"kaldi",!0);for(let Ee=0;Ee<r.length;++Ee)r[Ee].push(0);this.mel_filters=r,this.window=window_function(400,"hann",{periodic:!1}),this.mean=this.config.mean,this.std=this.config.std}_extract_fbank_features(e,t){return spectrogram(e,this.window,400,160,{fft_length:512,power:2,center:!1,preemphasis:.97,mel_filters:this.mel_filters,log_mel:"log",mel_floor:1192092955078125e-22,remove_dc_offset:!0,max_num_frames:t,transpose:!0})}async _call(e){validate_audio_inputs(e,"ASTFeatureExtractor");const t=this._extract_fbank_features(e,this.config.max_length);if(this.config.do_normalize){const r=this.std*2;for(let Ee=0;Ee<t.data.length;++Ee)t.data[Ee]=(t.data[Ee]-this.mean)/r}return{input_values:new Tensor("float32",t.data,[1,...t.dims])}}}class ClapFeatureExtractor extends FeatureExtractor{constructor(e){super(e),this.mel_filters=mel_filter_bank(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,null,"htk"),this.mel_filters_slaney=mel_filter_bank(this.config.nb_frequency_bins,this.config.feature_size,this.config.frequency_min,this.config.frequency_max,this.config.sampling_rate,"slaney","slaney"),this.window=window_function(this.config.fft_window_size,"hann")}_get_input_mel(e,t,r,Ee){let Te,Re=!1;const Me=e.length-t;if(Me>0)if(r==="rand_trunc"){Re=!0;const Ve=Math.floor(Math.random()*(Me+1));e=e.subarray(Ve,Ve+t),Te=this._extract_fbank_features(e,this.mel_filters_slaney,this.config.nb_max_samples),Te.dims=[1,...Te.dims]}else throw new Error(`Truncation strategy "${r}" not implemented`);else{if(Me<0){let Ve=new Float64Array(t);if(Ve.set(e),Ee==="repeat")for(let De=e.length;De<t;De+=e.length)Ve.set(e.subarray(0,Math.min(e.length,t-De)),De);else if(Ee==="repeatpad")for(let De=e.length;De<-Me;De+=e.length)Ve.set(e,De);e=Ve}if(r==="fusion")throw new Error(`Truncation strategy "${r}" not implemented`);Te=this._extract_fbank_features(e,this.mel_filters_slaney,this.config.nb_max_samples),Te.dims=[1,...Te.dims]}return{...Te,longer:Re}}_extract_fbank_features(e,t,r=null){return spectrogram(e,this.window,this.config.fft_window_size,this.config.hop_length,{power:2,mel_filters:t,log_mel:"dB",max_num_frames:r,do_pad:!1,transpose:!0})}async _call(e,{max_length:t=null}={}){validate_audio_inputs(e,"ClapFeatureExtractor");const r=this._get_input_mel(e,t??this.config.nb_max_samples,this.config.truncation,this.config.padding);return{input_features:new Tensor("float32",r.data,[1,...r.dims])}}}class SpeechT5FeatureExtractor extends FeatureExtractor{}class Processor extends Callable{constructor(e){super(),this.feature_extractor=e}async _call(e,...t){return await this.feature_extractor(e,...t)}}class SamProcessor extends Processor{async _call(...e){return await this.feature_extractor(...e)}post_process_masks(...e){return this.feature_extractor.post_process_masks(...e)}reshape_input_points(...e){return this.feature_extractor.reshape_input_points(...e)}}class WhisperProcessor extends Processor{async _call(e){return await this.feature_extractor(e)}}class Wav2Vec2ProcessorWithLM extends Processor{async _call(e){return await this.feature_extractor(e)}}class SpeechT5Processor extends Processor{async _call(e){return await this.feature_extractor(e)}}class OwlViTProcessor extends Processor{}class AutoProcessor{static FEATURE_EXTRACTOR_CLASS_MAPPING={ImageFeatureExtractor,WhisperFeatureExtractor,ViTFeatureExtractor,MobileViTFeatureExtractor,MobileViTImageProcessor,OwlViTFeatureExtractor,Owlv2ImageProcessor,CLIPFeatureExtractor,ChineseCLIPFeatureExtractor,SiglipImageProcessor,ConvNextFeatureExtractor,ConvNextImageProcessor,SegformerFeatureExtractor,BitImageProcessor,DPTImageProcessor,DPTFeatureExtractor,GLPNFeatureExtractor,BeitFeatureExtractor,DeiTFeatureExtractor,DetrFeatureExtractor,YolosFeatureExtractor,DonutFeatureExtractor,NougatImageProcessor,EfficientNetImageProcessor,ViTImageProcessor,VitMatteImageProcessor,SamImageProcessor,Swin2SRImageProcessor,Wav2Vec2FeatureExtractor,SeamlessM4TFeatureExtractor,SpeechT5FeatureExtractor,ASTFeatureExtractor,ClapFeatureExtractor};static PROCESSOR_CLASS_MAPPING={WhisperProcessor,Wav2Vec2ProcessorWithLM,SamProcessor,SpeechT5Processor,OwlViTProcessor};static async from_pretrained(e,{progress_callback:t=null,config:r=null,cache_dir:Ee=null,local_files_only:Te=!1,revision:Re="main"}={}){let Me=r??await getModelJSON(e,"preprocessor_config.json",!0,{progress_callback:t,cache_dir:Ee,local_files_only:Te,revision:Re}),Ve=Me.feature_extractor_type??Me.image_processor_type,De=this.FEATURE_EXTRACTOR_CLASS_MAPPING[Ve];if(!De)if(Me.size!==void 0)console.warn(`Feature extractor type "${Ve}" not found, assuming ImageFeatureExtractor due to size parameter in config.`),De=ImageFeatureExtractor;else throw new Error(`Unknown Feature Extractor type: ${Ve}`);let $e=this.PROCESSOR_CLASS_MAPPING[Me.processor_class]??Processor,Oe=new De(Me);return new $e(Oe)}}async function prepareImages(n){return Array.isArray(n)||(n=[n]),await Promise.all(n.map(e=>RawImage.read(e)))}async function prepareAudios(n,e){return Array.isArray(n)||(n=[n]),await Promise.all(n.map(t=>typeof t=="string"||t instanceof URL?read_audio(t,e):t instanceof Float64Array?new Float32Array(t):t))}function get_bounding_box(n,e){e&&(n=n.map(Re=>Re|0));const[t,r,Ee,Te]=n;return{xmin:t,ymin:r,xmax:Ee,ymax:Te}}class Pipeline extends Callable{constructor({task:e,model:t,tokenizer:r=null,processor:Ee=null}){super(),this.task=e,this.model=t,this.tokenizer=r,this.processor=Ee}async dispose(){await this.model.dispose()}}class TextClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:t=1}={}){const r=this.tokenizer(e,{padding:!0,truncation:!0}),Ee=await this.model(r),Te=this.model.config.problem_type==="multi_label_classification"?Ve=>Ve.sigmoid().data:Ve=>softmax(Ve.data),Re=this.model.config.id2label,Me=[];for(const Ve of Ee.logits){const De=Te(Ve),Oe=getTopItems(De,t).map(Ce=>({label:Re[Ce[0]],score:Ce[1]}));t===1?Me.push(...Oe):Me.push(Oe)}return Array.isArray(e)||t===1?Me:Me[0]}}class TokenClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{ignore_labels:t=["O"]}={}){const r=Array.isArray(e),Ee=this.tokenizer(r?e:[e],{padding:!0,truncation:!0}),Re=(await this.model(Ee)).logits,Me=this.model.config.id2label,Ve=[];for(let De=0;De<Re.dims[0];++De){const $e=Ee.input_ids[De],Oe=Re[De],Ce=[];for(let Be=0;Be<Oe.dims[0];++Be){const Ue=Oe[Be],We=max(Ue.data)[1],He=Me?Me[We]:`LABEL_${We}`;if(t.includes(He))continue;const Ge=this.tokenizer.decode([$e[Be].item()],{skip_special_tokens:!0});if(Ge==="")continue;const Ye=softmax(Ue.data);Ce.push({entity:He,score:Ye[We],index:Be,word:Ge,start:null,end:null})}Ve.push(Ce)}return r?Ve:Ve[0]}}class QuestionAnsweringPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t,{topk:r=1}={}){const Ee=this.tokenizer(e,{text_pair:t,padding:!0,truncation:!0}),Te=await this.model(Ee),Re=[];for(let Me=0;Me<Te.start_logits.dims[0];++Me){const Ve=Ee.input_ids[Me],De=Ve.indexOf(this.tokenizer.sep_token_id),$e=Array.from(softmax(Te.start_logits[Me].data)).map((Be,Ue)=>[Be,Ue]).filter(Be=>Be[1]>De),Oe=Array.from(softmax(Te.end_logits[Me].data)).map((Be,Ue)=>[Be,Ue]).filter(Be=>Be[1]>De),Ce=product($e,Oe).filter(Be=>Be[0][1]<=Be[1][1]).map(Be=>[Be[0][1],Be[1][1],Be[0][0]*Be[1][0]]).sort((Be,Ue)=>Ue[2]-Be[2]);for(let Be=0;Be<Math.min(Ce.length,r);++Be){const[Ue,We,He]=Ce[Be],Ge=[...Ve].slice(Ue,We+1),Ye=this.tokenizer.decode(Ge,{skip_special_tokens:!0});Re.push({answer:Ye,score:He})}}return r===1?Re[0]:Re}}class FillMaskPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:t=5}={}){const r=this.tokenizer(e,{padding:!0,truncation:!0}),Ee=await this.model(r),Te=[];for(let Re=0;Re<r.input_ids.dims[0];++Re){const Me=r.input_ids[Re],Ve=Me.indexOf(this.tokenizer.mask_token_id);if(Ve===-1)throw Error(`Mask token (${this.tokenizer.mask_token}) not found in text.`);const $e=Ee.logits[Re][Ve],Oe=getTopItems(softmax($e.data),t);Te.push(Oe.map(Ce=>{const Be=[...Me];return Be[Ve]=Ce[0],{score:Ce[1],token:Ce[0],token_str:this.tokenizer.model.vocab[Ce[0]],sequence:this.tokenizer.decode(Be,{skip_special_tokens:!0})}}))}return Array.isArray(e)?Te:Te[0]}}class Text2TextGenerationPipeline extends Pipeline{_key="generated_text";constructor(e){super(e)}async _call(e,t={}){Array.isArray(e)||(e=[e]),this.model.config.prefix&&(e=e.map(Ve=>this.model.config.prefix+Ve));const r=this.model.config.task_specific_params;r&&r[this.task]&&r[this.task].prefix&&(e=e.map(Ve=>r[this.task].prefix+Ve));const Ee=this.tokenizer,Te={padding:!0,truncation:!0};let Re;this instanceof TranslationPipeline&&"_build_translation_inputs"in Ee?Re=Ee._build_translation_inputs(e,Te,t).input_ids:Re=Ee(e,Te).input_ids;const Me=await this.model.generate(Re,t);return Ee.batch_decode(Me,{skip_special_tokens:!0}).map(Ve=>({[this._key]:Ve}))}}class SummarizationPipeline extends Text2TextGenerationPipeline{_key="summary_text";constructor(e){super(e)}}class TranslationPipeline extends Text2TextGenerationPipeline{_key="translation_text";constructor(e){super(e)}}function isChat(n){return Array.isArray(n)&&n.every(e=>"role"in e&&"content"in e)}class TextGenerationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t={}){let r=!1,Ee=!1,Te;if(typeof e=="string")Te=e=[e];else if(Array.isArray(e)&&e.every(Ue=>typeof Ue=="string"))r=!0,Te=e;else{if(isChat(e))e=[e];else if(Array.isArray(e)&&e.every(isChat))r=!0;else throw new Error("Input must be a string, an array of strings, a Chat, or an array of Chats");Ee=!0,Te=e.map(Ue=>this.tokenizer.apply_chat_template(Ue,{tokenize:!1,add_generation_prompt:!0}))}const Re=t.add_special_tokens??!1,Me=Ee?!1:t.return_full_text??!0;this.tokenizer.padding_side="left";const{input_ids:Ve,attention_mask:De}=this.tokenizer(Te,{add_special_tokens:Re,padding:!0,truncation:!0}),$e=await this.model.generate(Ve,t,null,{inputs_attention_mask:De});let Oe=this.tokenizer.batch_decode($e,{skip_special_tokens:!0}),Ce;!Me&&Ve.dims.at(-1)>0&&(Ce=this.tokenizer.batch_decode(Ve,{skip_special_tokens:!0}).map(Ue=>Ue.length));const Be=Array.from({length:e.length},Ue=>[]);for(let Ue=0;Ue<Oe.length;++Ue){const We=Math.floor(Ue/$e.length*e.length);Ce&&(Oe[Ue]=Oe[Ue].slice(Ce[We])),Be[We].push({generated_text:Ee?[...e[We],{role:"assistant",content:Oe[Ue]}]:Oe[Ue]})}return!r&&Be.length===1?Be[0]:Be}}class ZeroShotClassificationPipeline extends Pipeline{constructor(e){super(e),this.label2id=Object.fromEntries(Object.entries(this.model.config.label2id).map(([t,r])=>[t.toLowerCase(),r])),this.entailment_id=this.label2id.entailment,this.entailment_id===void 0&&(console.warn("Could not find 'entailment' in label2id mapping. Using 2 as entailment_id."),this.entailment_id=2),this.contradiction_id=this.label2id.contradiction??this.label2id.not_entailment,this.contradiction_id===void 0&&(console.warn("Could not find 'contradiction' in label2id mapping. Using 0 as contradiction_id."),this.contradiction_id=0)}async _call(e,t,{hypothesis_template:r="This example is {}.",multi_label:Ee=!1}={}){const Te=Array.isArray(e);Te||(e=[e]),Array.isArray(t)||(t=[t]);const Re=t.map(De=>r.replace("{}",De)),Me=Ee||t.length===1,Ve=[];for(const De of e){const $e=[];for(const Be of Re){const Ue=this.tokenizer(De,{text_pair:Be,padding:!0,truncation:!0}),We=await this.model(Ue);Me?$e.push([We.logits.data[this.contradiction_id],We.logits.data[this.entailment_id]]):$e.push(We.logits.data[this.entailment_id])}const Ce=(Me?$e.map(Be=>softmax(Be)[1]):softmax($e)).map((Be,Ue)=>[Be,Ue]).sort((Be,Ue)=>Ue[0]-Be[0]);Ve.push({sequence:De,labels:Ce.map(Be=>t[Be[1]]),scores:Ce.map(Be=>Be[0])})}return Te?Ve:Ve[0]}}class FeatureExtractionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{pooling:t="none",normalize:r=!1,quantize:Ee=!1,precision:Te="binary"}={}){const Re=this.tokenizer(e,{padding:!0,truncation:!0}),Me=await this.model(Re);let Ve=Me.last_hidden_state??Me.logits??Me.token_embeddings;if(t!=="none")if(t==="mean")Ve=mean_pooling(Ve,Re.attention_mask);else if(t==="cls")Ve=Ve.slice(null,0);else throw Error(`Pooling method '${t}' not supported.`);return r&&(Ve=Ve.normalize(2,-1)),Ee&&(Ve=quantize_embeddings(Ve,Te)),Ve}}class ImageFeatureExtractionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{pool:t=null}={}){const r=await prepareImages(e),{pixel_values:Ee}=await this.processor(r),Te=await this.model({pixel_values:Ee});let Re;if(t){if(!("pooler_output"in Te))throw Error("No pooled output was returned. Make sure the model has a 'pooler' layer when using the 'pool' option.");Re=Te.pooler_output}else Re=Te.last_hidden_state??Te.logits??Te.image_embeds;return Re}}class AudioClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:t=null}={}){const r=!Array.isArray(e),Ee=this.processor.feature_extractor.config.sampling_rate,Te=await prepareAudios(e,Ee),Re=this.model.config.id2label,Me=[];for(const Ve of Te){const De=await this.processor(Ve),Oe=(await this.model(De)).logits[0],Be=getTopItems(softmax(Oe.data),t).map(Ue=>({label:Re[Ue[0]],score:Ue[1]}));t===1?Me.push(...Be):Me.push(Be)}return!r||t===1?Me:Me[0]}}class ZeroShotAudioClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t,{hypothesis_template:r="This is a sound of {}."}={}){const Ee=!Array.isArray(e);Ee&&(e=[e]);const Te=t.map($e=>r.replace("{}",$e)),Re=this.tokenizer(Te,{padding:!0,truncation:!0}),Me=this.processor.feature_extractor.config.sampling_rate,Ve=await prepareAudios(e,Me),De=[];for(const $e of Ve){const Oe=await this.processor($e),Ce=await this.model({...Re,...Oe}),Be=softmax(Ce.logits_per_audio.data);De.push([...Be].map((Ue,We)=>({score:Ue,label:t[We]})))}return Ee?De[0]:De}}class AutomaticSpeechRecognitionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t={}){switch(this.model.config.model_type){case"whisper":return this._call_whisper(e,t);case"wav2vec2":case"wav2vec2-bert":case"unispeech":case"unispeech-sat":case"hubert":return this._call_wav2vec2(e,t);default:throw new Error(`AutomaticSpeechRecognitionPipeline does not support model type '${this.model.config.model_type}'.`)}}async _call_wav2vec2(e,t={}){t.language&&console.warn('`language` parameter is not yet supported for `wav2vec2` models, defaulting to "English".'),t.task&&console.warn('`task` parameter is not yet supported for `wav2vec2` models, defaulting to "transcribe".');const r=!Array.isArray(e);r&&(e=[e]);const Ee=this.processor.feature_extractor.config.sampling_rate,Te=await prepareAudios(e,Ee),Re=[];for(const Me of Te){const Ve=await this.processor(Me),$e=(await this.model(Ve)).logits[0],Oe=[];for(const Be of $e)Oe.push(max(Be.data)[1]);const Ce=this.tokenizer.decode(Oe);Re.push({text:Ce})}return r?Re[0]:Re}async _call_whisper(e,t={}){const r=t.return_timestamps??!1,Ee=t.chunk_length_s??0,Te=t.chunk_callback??null,Re=t.force_full_sequences??!1;let Me=t.stride_length_s??null;r==="word"&&(t.return_token_timestamps=!0);const Ve=pop(t,"language",null),De=pop(t,"task",null);if(Ve||De||r){if(t.forced_decoder_ids)throw new Error("Cannot specify `language`/`task`/`return_timestamps` and `forced_decoder_ids` at the same time.");const He=this.tokenizer.get_decoder_prompt_ids({language:Ve,task:De,no_timestamps:!r});He.length>0&&(t.forced_decoder_ids=He)}const $e=!Array.isArray(e);$e&&(e=[e]);const Oe=this.processor.feature_extractor.config.chunk_length/this.model.config.max_source_positions,Ce=this.processor.feature_extractor.config.hop_length,Be=this.processor.feature_extractor.config.sampling_rate,Ue=await prepareAudios(e,Be),We=[];for(const He of Ue){let Ge=[];if(Ee>0){if(Me===null)Me=Ee/6;else if(Ee<=Me)throw Error("`chunk_length_s` must be larger than `stride_length_s`.");const Ze=Be*Ee,fn=Be*Me,yn=Ze-2*fn;let mn=0;for(;mn<He.length;){const pn=He.subarray(mn,mn+Ze),un=await this.processor(pn),bn=mn===0,gn=mn+yn>=He.length;Ge.push({stride:[pn.length,bn?0:fn,gn?0:fn],input_features:un.input_features,is_last:gn}),mn+=yn}}else Ge=[{stride:[He.length,0,0],input_features:(await this.processor(He)).input_features,is_last:!0}];for(const Ze of Ge){t.num_frames=Math.floor(Ze.stride[0]/Ce);const fn=await this.model.generate(Ze.input_features,t);r==="word"?(Ze.tokens=fn.sequences[0],Ze.token_timestamps=fn.token_timestamps.tolist()[0].map(yn=>round(yn,2))):Ze.tokens=fn[0],Ze.stride=Ze.stride.map(yn=>yn/Be),Te!==null&&Te(Ze)}const[Ye,Je]=this.tokenizer._decode_asr(Ge,{time_precision:Oe,return_timestamps:r,force_full_sequences:Re});We.push({text:Ye,...Je})}return $e?We[0]:We}}class ImageToTextPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t={}){const r=Array.isArray(e),Ee=await prepareImages(e),{pixel_values:Te}=await this.processor(Ee),Re=[];for(const Me of Te){Me.dims=[1,...Me.dims];const Ve=await this.model.generate(Me,t),De=this.tokenizer.batch_decode(Ve,{skip_special_tokens:!0}).map($e=>({generated_text:$e.trim()}));Re.push(De)}return r?Re:Re[0]}}class ImageClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{topk:t=1}={}){const r=Array.isArray(e),Ee=await prepareImages(e),{pixel_values:Te}=await this.processor(Ee),Re=await this.model({pixel_values:Te}),Me=this.model.config.id2label,Ve=[];for(const De of Re.logits){const Oe=getTopItems(softmax(De.data),t).map(Ce=>({label:Me[Ce[0]],score:Ce[1]}));t===1?Ve.push(...Oe):Ve.push(Oe)}return r||t===1?Ve:Ve[0]}}class ImageSegmentationPipeline extends Pipeline{constructor(e){super(e),this.subtasks_mapping={panoptic:"post_process_panoptic_segmentation",instance:"post_process_instance_segmentation",semantic:"post_process_semantic_segmentation"}}async _call(e,{threshold:t=.5,mask_threshold:r=.5,overlap_mask_area_threshold:Ee=.8,label_ids_to_fuse:Te=null,target_sizes:Re=null,subtask:Me=null}={}){if(Array.isArray(e)&&e.length!==1)throw Error("Image segmentation pipeline currently only supports a batch size of 1.");const De=await prepareImages(e),$e=De.map(Ge=>[Ge.height,Ge.width]),{pixel_values:Oe,pixel_mask:Ce}=await this.processor(De),Be=await this.model({pixel_values:Oe,pixel_mask:Ce});let Ue=null;if(Me!==null)Ue=this.subtasks_mapping[Me];else for(let[Ge,Ye]of Object.entries(this.subtasks_mapping))if(Ye in this.processor.feature_extractor){Ue=this.processor.feature_extractor[Ye].bind(this.processor.feature_extractor),Me=Ge;break}const We=this.model.config.id2label,He=[];if(Me==="panoptic"||Me==="instance"){const Ge=Ue(Be,t,r,Ee,Te,Re??$e)[0],Ye=Ge.segmentation;for(const Je of Ge.segments_info){const Ze=new Uint8ClampedArray(Ye.data.length);for(let yn=0;yn<Ye.data.length;++yn)Ye.data[yn]===Je.id&&(Ze[yn]=255);const fn=new RawImage(Ze,Ye.dims[1],Ye.dims[0],1);He.push({score:Je.score,label:We[Je.label_id],mask:fn})}}else if(Me==="semantic"){const{segmentation:Ge,labels:Ye}=Ue(Be,Re??$e)[0];for(const Je of Ye){const Ze=new Uint8ClampedArray(Ge.data.length);for(let yn=0;yn<Ge.data.length;++yn)Ge.data[yn]===Je&&(Ze[yn]=255);const fn=new RawImage(Ze,Ge.dims[1],Ge.dims[0],1);He.push({score:null,label:We[Je],mask:fn})}}else throw Error(`Subtask ${Me} not supported.`);return He}}class ZeroShotImageClassificationPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t,{hypothesis_template:r="This is a photo of {}"}={}){const Ee=Array.isArray(e),Te=await prepareImages(e),Re=t.map(Ce=>r.replace("{}",Ce)),Me=this.tokenizer(Re,{padding:this.model.config.model_type==="siglip"?"max_length":!0,truncation:!0}),{pixel_values:Ve}=await this.processor(Te),De=await this.model({...Me,pixel_values:Ve}),$e=this.model.config.model_type==="siglip"?Ce=>Ce.sigmoid().data:Ce=>softmax(Ce.data),Oe=[];for(const Ce of De.logits_per_image){const Ue=[...$e(Ce)].map((We,He)=>({score:We,label:t[He]}));Ue.sort((We,He)=>He.score-We.score),Oe.push(Ue)}return Ee?Oe:Oe[0]}}class ObjectDetectionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,{threshold:t=.9,percentage:r=!1}={}){const Ee=Array.isArray(e);if(Ee&&e.length!==1)throw Error("Object detection pipeline currently only supports a batch size of 1.");const Te=await prepareImages(e),Re=r?null:Te.map(Be=>[Be.height,Be.width]),{pixel_values:Me,pixel_mask:Ve}=await this.processor(Te),De=await this.model({pixel_values:Me,pixel_mask:Ve}),$e=this.processor.feature_extractor.post_process_object_detection(De,t,Re),Oe=this.model.config.id2label,Ce=$e.map(Be=>Be.boxes.map((Ue,We)=>({score:Be.scores[We],label:Oe[Be.classes[We]],box:get_bounding_box(Ue,!r)})));return Ee?Ce:Ce[0]}}class ZeroShotObjectDetectionPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t,{threshold:r=.1,topk:Ee=null,percentage:Te=!1}={}){const Re=Array.isArray(e),Me=await prepareImages(e),Ve=this.tokenizer(t,{padding:!0,truncation:!0}),De=await this.processor(Me),$e=[];for(let Oe=0;Oe<Me.length;++Oe){const Ce=Me[Oe],Be=Te?null:[[Ce.height,Ce.width]],Ue=De.pixel_values[Oe].unsqueeze_(0),We=await this.model({...Ve,pixel_values:Ue}),He=this.processor.feature_extractor.post_process_object_detection(We,r,Be,!0)[0];let Ge=He.boxes.map((Ye,Je)=>({score:He.scores[Je],label:t[He.classes[Je]],box:get_bounding_box(Ye,!Te)})).sort((Ye,Je)=>Je.score-Ye.score);Ee!==null&&(Ge=Ge.slice(0,Ee)),$e.push(Ge)}return Re?$e:$e[0]}}class DocumentQuestionAnsweringPipeline extends Pipeline{constructor(e){super(e)}async _call(e,t,r={}){const Ee=(await prepareImages(e))[0],{pixel_values:Te}=await this.processor(Ee),Re=`<s_docvqa><s_question>${t}</s_question><s_answer>`,Me=this.tokenizer(Re,{add_special_tokens:!1,padding:!0,truncation:!0}).input_ids,Ve=await this.model.generate(Te,{...r,decoder_input_ids:Me,max_length:this.model.config.decoder.max_position_embeddings}),$e=this.tokenizer.batch_decode(Ve)[0].match(/<s_answer>(.*?)<\/s_answer>/);let Oe=null;return $e&&$e.length>=2&&(Oe=$e[1].trim()),[{answer:Oe}]}}class TextToAudioPipeline extends Pipeline{DEFAULT_VOCODER_ID="Xenova/speecht5_hifigan";constructor(e){super(e),this.vocoder=e.vocoder??null}async _call(e,{speaker_embeddings:t=null}={}){return this.processor?this._call_text_to_spectrogram(e,{speaker_embeddings:t}):this._call_text_to_waveform(e)}async _call_text_to_waveform(e){const t=this.tokenizer(e,{padding:!0,truncation:!0}),{waveform:r}=await this.model(t),Ee=this.model.config.sampling_rate;return{audio:r.data,sampling_rate:Ee}}async _call_text_to_spectrogram(e,{speaker_embeddings:t}){if(this.vocoder||(console.log("No vocoder specified, using default HifiGan vocoder."),this.vocoder=await AutoModel.from_pretrained(this.DEFAULT_VOCODER_ID,{quantized:!1})),(typeof t=="string"||t instanceof URL)&&(t=new Float32Array(await(await fetch(t)).arrayBuffer())),t instanceof Float32Array)t=new Tensor("float32",t,[1,t.length]);else if(!(t instanceof Tensor))throw new Error("Speaker embeddings must be a `Tensor`, `Float32Array`, `string`, or `URL`.");const{input_ids:r}=this.tokenizer(e,{padding:!0,truncation:!0}),{waveform:Ee}=await this.model.generate_speech(r,t,{vocoder:this.vocoder}),Te=this.processor.feature_extractor.config.sampling_rate;return{audio:Ee.data,sampling_rate:Te}}}class ImageToImagePipeline extends Pipeline{constructor(e){super(e)}async _call(e){const t=await prepareImages(e),r=await this.processor(t),Ee=await this.model(r),Te=[];for(const Re of Ee.reconstruction){const Me=Re.squeeze().clamp_(0,1).mul_(255).round_().to("uint8");Te.push(RawImage.fromTensor(Me))}return Te.length>1?Te:Te[0]}}class DepthEstimationPipeline extends Pipeline{constructor(e){super(e)}async _call(e){const t=await prepareImages(e),r=await this.processor(t),{predicted_depth:Ee}=await this.model(r),Te=[];for(let Re=0;Re<t.length;++Re){const Me=interpolate(Ee[Re],t[Re].size.reverse(),"bilinear",!1),Ve=Me.mul_(255/max(Me.data)[0]).to("uint8");Te.push({predicted_depth:Ee[Re],depth:RawImage.fromTensor(Ve)})}return Te.length>1?Te:Te[0]}}const SUPPORTED_TASKS=Object.freeze({"text-classification":{tokenizer:AutoTokenizer,pipeline:TextClassificationPipeline,model:AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-finetuned-sst-2-english"},type:"text"},"token-classification":{tokenizer:AutoTokenizer,pipeline:TokenClassificationPipeline,model:AutoModelForTokenClassification,default:{model:"Xenova/bert-base-multilingual-cased-ner-hrl"},type:"text"},"question-answering":{tokenizer:AutoTokenizer,pipeline:QuestionAnsweringPipeline,model:AutoModelForQuestionAnswering,default:{model:"Xenova/distilbert-base-cased-distilled-squad"},type:"text"},"fill-mask":{tokenizer:AutoTokenizer,pipeline:FillMaskPipeline,model:AutoModelForMaskedLM,default:{model:"Xenova/bert-base-uncased"},type:"text"},summarization:{tokenizer:AutoTokenizer,pipeline:SummarizationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/distilbart-cnn-6-6"},type:"text"},translation:{tokenizer:AutoTokenizer,pipeline:TranslationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/t5-small"},type:"text"},"text2text-generation":{tokenizer:AutoTokenizer,pipeline:Text2TextGenerationPipeline,model:AutoModelForSeq2SeqLM,default:{model:"Xenova/flan-t5-small"},type:"text"},"text-generation":{tokenizer:AutoTokenizer,pipeline:TextGenerationPipeline,model:AutoModelForCausalLM,default:{model:"Xenova/gpt2"},type:"text"},"zero-shot-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotClassificationPipeline,model:AutoModelForSequenceClassification,default:{model:"Xenova/distilbert-base-uncased-mnli"},type:"text"},"audio-classification":{pipeline:AudioClassificationPipeline,model:AutoModelForAudioClassification,processor:AutoProcessor,default:{model:"Xenova/wav2vec2-base-superb-ks"},type:"audio"},"zero-shot-audio-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotAudioClassificationPipeline,model:AutoModel,processor:AutoProcessor,default:{model:"Xenova/clap-htsat-unfused"},type:"multimodal"},"automatic-speech-recognition":{tokenizer:AutoTokenizer,pipeline:AutomaticSpeechRecognitionPipeline,model:[AutoModelForSpeechSeq2Seq,AutoModelForCTC],processor:AutoProcessor,default:{model:"Xenova/whisper-tiny.en"},type:"multimodal"},"text-to-audio":{tokenizer:AutoTokenizer,pipeline:TextToAudioPipeline,model:[AutoModelForTextToWaveform,AutoModelForTextToSpectrogram],processor:[AutoProcessor,null],default:{model:"Xenova/speecht5_tts"},type:"text"},"image-to-text":{tokenizer:AutoTokenizer,pipeline:ImageToTextPipeline,model:AutoModelForVision2Seq,processor:AutoProcessor,default:{model:"Xenova/vit-gpt2-image-captioning"},type:"multimodal"},"image-classification":{pipeline:ImageClassificationPipeline,model:AutoModelForImageClassification,processor:AutoProcessor,default:{model:"Xenova/vit-base-patch16-224"},type:"multimodal"},"image-segmentation":{pipeline:ImageSegmentationPipeline,model:[AutoModelForImageSegmentation,AutoModelForSemanticSegmentation],processor:AutoProcessor,default:{model:"Xenova/detr-resnet-50-panoptic"},type:"multimodal"},"zero-shot-image-classification":{tokenizer:AutoTokenizer,pipeline:ZeroShotImageClassificationPipeline,model:AutoModel,processor:AutoProcessor,default:{model:"Xenova/clip-vit-base-patch32"},type:"multimodal"},"object-detection":{pipeline:ObjectDetectionPipeline,model:AutoModelForObjectDetection,processor:AutoProcessor,default:{model:"Xenova/detr-resnet-50"},type:"multimodal"},"zero-shot-object-detection":{tokenizer:AutoTokenizer,pipeline:ZeroShotObjectDetectionPipeline,model:AutoModelForZeroShotObjectDetection,processor:AutoProcessor,default:{model:"Xenova/owlvit-base-patch32"},type:"multimodal"},"document-question-answering":{tokenizer:AutoTokenizer,pipeline:DocumentQuestionAnsweringPipeline,model:AutoModelForDocumentQuestionAnswering,processor:AutoProcessor,default:{model:"Xenova/donut-base-finetuned-docvqa"},type:"multimodal"},"image-to-image":{pipeline:ImageToImagePipeline,model:AutoModelForImageToImage,processor:AutoProcessor,default:{model:"Xenova/swin2SR-classical-sr-x2-64"},type:"image"},"depth-estimation":{pipeline:DepthEstimationPipeline,model:AutoModelForDepthEstimation,processor:AutoProcessor,default:{model:"Xenova/dpt-large"},type:"image"},"feature-extraction":{tokenizer:AutoTokenizer,pipeline:FeatureExtractionPipeline,model:AutoModel,default:{model:"Xenova/all-MiniLM-L6-v2"},type:"text"},"image-feature-extraction":{processor:AutoProcessor,pipeline:ImageFeatureExtractionPipeline,model:[AutoModelForImageFeatureExtraction,AutoModel],default:{model:"Xenova/vit-base-patch16-224-in21k"},type:"image"}}),TASK_ALIASES=Object.freeze({"sentiment-analysis":"text-classification",ner:"token-classification",asr:"automatic-speech-recognition","text-to-speech":"text-to-audio",embeddings:"feature-extraction"});async function pipeline(n,e=null,{quantized:t=!0,progress_callback:r=null,config:Ee=null,cache_dir:Te=null,local_files_only:Re=!1,revision:Me="main",model_file_name:Ve=null}={}){n=TASK_ALIASES[n]??n;const De=SUPPORTED_TASKS[n.split("_",1)[0]];if(!De)throw Error(`Unsupported pipeline: ${n}. Must be one of [${Object.keys(SUPPORTED_TASKS)}]`);e||(e=De.default.model,console.log(`No model specified. Using default model: "${e}".`));const $e={quantized:t,progress_callback:r,config:Ee,cache_dir:Te,local_files_only:Re,revision:Me,model_file_name:Ve},Oe=new Map([["tokenizer",De.tokenizer],["model",De.model],["processor",De.processor]]),Ce=await loadItems(Oe,e,$e);Ce.task=n,dispatchCallback(r,{status:"ready",task:n,model:e});const Be=De.pipeline;return new Be(Ce)}async function loadItems(n,e,t){const r=Object.create(null),Ee=[];for(let[Te,Re]of n.entries()){if(!Re)continue;let Me;Array.isArray(Re)?Me=new Promise(async(Ve,De)=>{let $e;for(let Oe of Re){if(Oe===null){Ve(null);return}try{Ve(await Oe.from_pretrained(e,t));return}catch(Ce){$e=Ce}}De($e)}):Me=Re.from_pretrained(e,t),r[Te]=Me,Ee.push(Me)}await Promise.all(Ee);for(let[Te,Re]of Object.entries(r))r[Te]=await Re;return r}let transcriber=null;async function loadModel(){if(!transcriber)try{console.log("📦 Loading Whisper model from /models/whisper-tiny..."),transcriber=await pipeline("automatic-speech-recognition","/models/whisper-tiny",{quantized:!0,local_files_only:!0}),console.log("✅ Whisper model loaded successfully.")}catch{}return transcriber}function VoiceFeedback(){const[n,e]=reactExports.useState(!1),[t,r]=reactExports.useState(!1),[Ee,Te]=reactExports.useState(""),[Re,Me]=reactExports.useState(""),[Ve,De]=reactExports.useState(null),[$e,Oe]=reactExports.useState("👍"),[Ce,Be]=reactExports.useState(!1),Ue=reactExports.useRef(null),We=reactExports.useRef([]);reactExports.useEffect(()=>(loadModel(),onAuthStateChanged(auth,yn=>{yn&&De(yn.uid)})),[]);const He=async()=>{try{const yn=await navigator.mediaDevices.getUserMedia({audio:!0});Ue.current=new MediaRecorder(yn),We.current=[],Ue.current.ondataavailable=mn=>We.current.push(mn.data),Ue.current.onstop=Ye,Ue.current.start(),e(!0),Be(!0)}catch(yn){console.error("🎙️ Mic access failed:",yn),alert("⚠️ Please allow microphone access.")}},Ge=()=>Ue.current?.stop(),Ye=async()=>{r(!0);const yn=new Blob(We.current,{type:"audio/webm"});try{const mn=await yn.arrayBuffer(),pn=await loadModel();if(!pn){Te("❌ Whisper model not available.");return}const{text:un}=await pn(mn);Te(un),await Je(un)}catch(mn){console.error("❌ Transcription failed:",mn),Te("❌ Could not transcribe audio.")}finally{r(!1),e(!1),Be(!1)}},Je=async yn=>{try{const pn=(await axios.post("https://api.groq.com/openai/v1/chat/completions",{model:"llama3-8b-8192",messages:[{role:"system",content:"You're VoiceMirror by Mindmorph: give warm, constructive speaking feedback."},{role:"user",content:yn}],temperature:.7},{headers:{Authorization:"Bearer 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"}})).data.choices[0]?.message?.content||"⚠️ No feedback generated.";Me(pn),Ze(pn),Ve&&await addDoc(collection(db,"voicemirror",Ve,"sessions"),{transcript:yn,feedback:pn,reaction:$e,createdAt:serverTimestamp()})}catch(mn){console.error("⚠️ AI response error:",mn),Me("⚠️ Could not generate feedback.")}},Ze=yn=>{const mn=new SpeechSynthesisUtterance(yn);mn.lang="en-IN",speechSynthesis.speak(mn)},fn=()=>{const yn=new E;yn.text("🎙️ Transcript:",10,10),yn.text(Ee||"None",10,20),yn.text("🧠 Feedback:",10,40),yn.text(Re||"None",10,50),yn.save("VoiceMirror.pdf")};return jsxRuntimeExports.jsx("div",{className:"min-h-screen p-6 bg-gradient-to-br from-indigo-100 to-white dark:from-gray-900 dark:to-black text-gray-900 dark:text-white font-poppins",children:jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto bg-white/30 dark:bg-white/10 backdrop-blur-md p-6 rounded-2xl shadow-lg",children:[jsxRuntimeExports.jsx("h1",{className:"text-center text-3xl font-bold text-indigo-700 dark:text-indigo-300 mb-6",children:"🎤 VoiceMirror – Speak. Reflect. Improve."}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[jsxRuntimeExports.jsxs("button",{onClick:n?Ge:He,className:`px-6 py-3 rounded-full text-white shadow-md flex items-center gap-2 transition-all ${n?"bg-red-600 hover:bg-red-700":"bg-indigo-600 hover:bg-indigo-700"}`,children:[n?jsxRuntimeExports.jsx(CircleStop,{size:20}):jsxRuntimeExports.jsx(Mic,{size:20}),n?"Stop":"Record"]}),jsxRuntimeExports.jsx("button",{onClick:fn,className:"underline text-indigo-600 hover:text-indigo-800 text-sm self-center",children:"📄 Export PDF"})]}),Ce&&jsxRuntimeExports.jsx("div",{className:"flex justify-center mb-6 space-x-1 h-10",children:[...Array(10)].map((yn,mn)=>jsxRuntimeExports.jsx("div",{className:"w-2 bg-indigo-400 rounded animate-pulse",style:{animationDelay:`${mn*100}ms`}},mn))}),t&&jsxRuntimeExports.jsx("p",{className:"text-center text-gray-600 mb-4",children:"🧠 Processing…"}),Ee&&jsxRuntimeExports.jsxs("div",{className:"bg-white/40 dark:bg-white/10 p-4 mb-6 rounded-xl border shadow-inner",children:[jsxRuntimeExports.jsx("h2",{className:"font-semibold text-indigo-700 dark:text-indigo-300 mb-2",children:"📝 Transcript"}),jsxRuntimeExports.jsx("p",{children:Ee})]}),Re&&jsxRuntimeExports.jsxs("div",{className:"bg-indigo-100/40 dark:bg-indigo-300/10 p-4 rounded-xl border shadow-md",children:[jsxRuntimeExports.jsx("h2",{className:"font-semibold text-indigo-800 dark:text-indigo-300 mb-2",children:"🤖 Feedback"}),jsxRuntimeExports.jsx("p",{children:Re}),jsxRuntimeExports.jsxs("div",{className:"mt-3 flex justify-between items-center",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>Ze(Re),className:"flex items-center gap-2 text-indigo-600 hover:text-indigo-800 text-sm",children:[jsxRuntimeExports.jsx(Volume2,{size:18})," Hear Again"]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 text-xl",children:["👍","❤️","😂","🤯","🤔"].map(yn=>jsxRuntimeExports.jsx("button",{onClick:()=>Oe(yn),className:$e===yn?"opacity-100":"opacity-50",children:yn},yn))})]})]})]})})}function Home({user:n}){const[e,t]=reactExports.useState(!0),r=reactExports.useRef(null),Ee=useNavigate();reactExports.useEffect(()=>{const Ze=setTimeout(()=>t(!1),1500);return()=>clearTimeout(Ze)},[]);const Te=[{title:"Career Mentor",desc:"Get career advice powered by your strengths and passions.",icon:jsxRuntimeExports.jsx(GraduationCap,{className:"w-6 h-6 text-purple-400"}),link:"/careercrack"},{title:"Mood Mirror",desc:"Chat with an AI that understands your emotions and tracks your mood.",icon:jsxRuntimeExports.jsx(Brain,{className:"w-6 h-6 text-purple-400"}),link:"/moodmirror"},{title:"Scholarship Scout",desc:"Find best-fit scholarships based on your background & interests.",icon:jsxRuntimeExports.jsx(Target,{className:"w-6 h-6 text-purple-400"}),link:"/scholarships"},{title:"Smart Notes",desc:"Organize your notes with AI tagging and outlines.",icon:jsxRuntimeExports.jsx(NotebookPen,{className:"w-6 h-6 text-purple-400"}),link:"/smartnotes"},{title:"Voice to Text",desc:"Transcribe your ideas with whisper-accurate AI.",icon:jsxRuntimeExports.jsx(Mic,{className:"w-6 h-6 text-purple-400"}),link:"/voicefeedback"},{title:"PDF Exports",desc:"Download your chats and notes instantly.",icon:jsxRuntimeExports.jsx(FileText,{className:"w-6 h-6 text-purple-400"}),link:"/careercrack"},{title:"Resume Analyzer",desc:"Upload your resume for an ATS score and improvement tips.",icon:jsxRuntimeExports.jsx(FileText,{className:"w-6 h-6 text-purple-400"}),link:"/resume-analyzer"},{title:"Resource Vault",desc:"Discover, upvote, and manage useful resources together.",icon:jsxRuntimeExports.jsx(BookOpen,{className:"w-6 h-6 text-purple-400"}),link:"/resourcevault"}],Re=[{name:"Ananya S.",quote:"EDGEx helped me discover a career path I never even considered. Life-changing!",role:"Class 12, Delhi"},{name:"Rohan M.",quote:"MoodMirror is like talking to a friend who truly understands you. So cool!",role:"Class 10, Mumbai"},{name:"Sneha T.",quote:"The scholarship tool got me 3 perfect matches. This is the future of guidance!",role:"Commerce Student, Kolkata"}],[[Me,Ve],De]=reactExports.useState([0,0]),$e=Ze=>{De(([fn])=>[(fn+Ze+Re.length)%Re.length,Ze])},{scrollYProgress:Oe}=useScroll(),Ce=useTransform(Oe,[0,1],["0%","50%"]),Be=[{label:"Students Helped",value:5700},{label:"Scholarships Found",value:1300},{label:"Mood Sessions",value:25e3}],[Ue,We]=reactExports.useState(Be.map(()=>1)),[He,Ge]=reactExports.useState(!1);reactExports.useEffect(()=>{let Ze=0,fn=null,yn=!1;const mn=()=>{if(!r.current||He)return;const pn=window.pageYOffset||document.documentElement.scrollTop,un=r.current.getBoundingClientRect(),bn=window.innerHeight;fn&&clearTimeout(fn),un.top<=bn*.5&&un.bottom>=bn*.5&&Math.abs(pn-Ze)>10&&!yn&&(yn=!0,Ye(),setTimeout(()=>{yn=!1},3e3)),Ze=pn,fn=setTimeout(()=>{},150)};return mn(),window.addEventListener("scroll",mn,{passive:!0}),()=>{window.removeEventListener("scroll",mn),fn&&clearTimeout(fn)}},[He]);const Ye=()=>{if(He)return;Ge(!0),We(Be.map(()=>1));const Ze=2e3,fn=60,yn=Ze/fn;let mn=0;const pn=setInterval(()=>{mn++,We(un=>{const bn=un.map((gn,xn)=>{const En=Be[xn].value,Pn=mn/fn,Ln=Math.floor(1+(En-1)*Pn);return Math.min(Ln,En)});return mn>=fn&&(clearInterval(pn),setTimeout(()=>{Ge(!1)},1e4)),bn})},yn)},Je=()=>{Ee(n?"/careercrack":"/login")};return e?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center h-screen bg-[#0a0a14]",children:jsxRuntimeExports.jsx(motion.div,{className:"w-10 h-10 rounded-full bg-purple-500",animate:{scale:[1,1.5,1]},transition:{repeat:1/0,duration:1}})}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-[#0a0a14] text-white font-sans overflow-x-hidden",children:[jsxRuntimeExports.jsxs("section",{className:"relative overflow-hidden py-24 px-6 lg:px-20 flex flex-col items-center text-center",children:[jsxRuntimeExports.jsx(motion.div,{style:{y:Ce},className:"absolute top-0 left-1/2 -translate-x-1/2 w-[800px] h-[800px] bg-purple-500 opacity-30 blur-3xl rounded-full z-0"}),jsxRuntimeExports.jsxs(motion.svg,{className:"absolute inset-0 w-full h-full z-0 opacity-5",viewBox:"0 0 100 100",preserveAspectRatio:"none",style:{y:Ce},children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsx("pattern",{id:"grid",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:jsxRuntimeExports.jsx("path",{d:"M 10 0 L 0 0 0 10",fill:"none",stroke:"white",strokeWidth:"0.2"})})}),jsxRuntimeExports.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]}),jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.7},className:"z-10 max-w-4xl",children:[jsxRuntimeExports.jsxs("h1",{className:"text-4xl md:text-6xl font-bold leading-tight text-white mb-6",children:["Think better with ",jsxRuntimeExports.jsx("span",{className:"text-purple-400",children:"EDGEx"})]}),jsxRuntimeExports.jsx("p",{className:"text-lg text-gray-300 mb-8",children:"Your all-in-one AI toolkit: career mentor, mood companion, scholarship tracker & more."}),jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-center gap-4",children:[jsxRuntimeExports.jsxs("button",{onClick:Je,className:"bg-purple-600 hover:bg-purple-700 transition px-6 py-3 rounded-lg text-white font-semibold flex items-center gap-2",children:["Start Exploring ",jsxRuntimeExports.jsx(ArrowRight,{size:18})]}),jsxRuntimeExports.jsx("a",{href:"#features",className:"text-gray-400 hover:text-white underline flex items-center h-full px-6 py-3 rounded-lg font-semibold",children:"Learn More"})]})]})]}),jsxRuntimeExports.jsxs("section",{id:"features",className:"py-20 px-6 lg:px-20 bg-[#0e0e1a]",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-center mb-12 text-white",children:"What can EDGEx AI do?"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto text-white",children:Te.map((Ze,fn)=>{const yn=jsxRuntimeExports.jsxs(motion.div,{whileHover:{scale:1.03},initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.3},viewport:{once:!0},className:"bg-glass backdrop-blur-md p-6 rounded-xl border border-white/10 transition-[box-shadow,colors] duration-300 cursor-pointer flex flex-col justify-between h-full hover:shadow-2xl hover:border-white/20 hover:bg-white/5",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[Ze.icon,jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold",children:Ze.title})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 flex-grow",children:Ze.desc})]},fn);return Ze.link?jsxRuntimeExports.jsx(Link,{to:Ze.link,children:yn},fn):jsxRuntimeExports.jsx("div",{children:yn},fn)})})]}),jsxRuntimeExports.jsxs("section",{ref:r,className:"py-20 bg-[#0a0a14] text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-white mb-12",children:"Our Impact So Far 🚀"}),!He&&jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("button",{onClick:Ye,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors"}),jsxRuntimeExports.jsx("div",{className:"text-blue-400 text-sm mt-2"})]}),He&&jsxRuntimeExports.jsx("div",{className:"text-green-400 text-sm mb-6 animate-pulse"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-10 max-w-6xl mx-auto",children:Be.map((Ze,fn)=>jsxRuntimeExports.jsxs(motion.div,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:fn*.2},viewport:{once:!0},className:"p-6 rounded-xl transition transform hover:scale-105 hover:bg-gray-800 hover:shadow-lg cursor-pointer",title:Ze.label==="Students Helped"?"Number of students who received guidance":Ze.label==="Scholarships Found"?"Scholarships we helped students find":"Sessions that improved students",children:[jsxRuntimeExports.jsxs("p",{className:"text-4xl font-bold text-purple-400",children:[Ue[fn].toLocaleString(),"+",He&&Ue[fn]===1&&jsxRuntimeExports.jsx("span",{className:"text-green-400 text-sm ml-2",children:"→ Starting..."})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 mt-2",children:Ze.label})]},fn))})]}),jsxRuntimeExports.jsxs("section",{className:"py-24 px-6 lg:px-20 bg-[#0e0e1a]",children:[jsxRuntimeExports.jsx("h2",{className:"text-3xl font-bold text-center mb-12 text-white",children:"🌟 What Students Say"}),jsxRuntimeExports.jsxs("div",{className:"relative max-w-3xl mx-auto",children:[jsxRuntimeExports.jsx(AnimatePresence,{initial:!1,custom:Ve,children:jsxRuntimeExports.jsxs(motion.div,{className:"bg-[#1a1a2e] p-8 rounded-xl border border-white/10 text-white",initial:{x:Ve>0?300:-300,opacity:0},animate:{x:0,opacity:1},exit:{x:Ve<0?300:-300,opacity:0},transition:{duration:.6},children:[jsxRuntimeExports.jsxs("p",{className:"text-lg italic mb-4",children:["“",Re[Me].quote,"”"]}),jsxRuntimeExports.jsx("p",{className:"font-semibold",children:Re[Me].name}),jsxRuntimeExports.jsx("p",{className:"text-sm text-purple-300",children:Re[Me].role})]},Me)}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between mt-6",children:[jsxRuntimeExports.jsx("button",{onClick:()=>$e(-1),className:"text-purple-400 hover:text-purple-600 transition",children:"← Previous"}),jsxRuntimeExports.jsx("button",{onClick:()=>$e(1),className:"text-purple-400 hover:text-purple-600 transition",children:"Next →"})]})]})]}),jsxRuntimeExports.jsxs("section",{className:"relative z-10 bg-[#12121c] py-20 px-6 lg:px-20 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[600px] h-[600px] bg-purple-600/30 blur-[150px] rounded-full z-0"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 right-0 w-[400px] h-[400px] bg-indigo-500/20 blur-[120px] rounded-full z-0"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto text-center",children:[jsxRuntimeExports.jsxs(motion.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},className:"text-4xl font-bold mb-4 text-white",children:["Ready to ",jsxRuntimeExports.jsx("span",{className:"text-purple-400",children:"level up"})," your journey?"]}),jsxRuntimeExports.jsx(motion.p,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"text-gray-400 text-lg mb-8",children:"Start exploring EDGEx’s tools and get ahead in your academic & personal path."}),jsxRuntimeExports.jsx(motion.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},transition:{duration:.7,delay:.3},children:jsxRuntimeExports.jsx("button",{onClick:Je,className:"inline-block bg-purple-600 hover:bg-purple-700 transition px-8 py-3 text-lg font-semibold rounded-lg text-white shadow-xl",children:"Start Now →"})})]})]}),jsxRuntimeExports.jsx("footer",{className:"py-8  text-gray-500 text-sm px-8 lg:px-20 ",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center ",children:["© ",new Date().getFullYear()," EDGEx by Ayushman. All rights reserved.",jsxRuntimeExports.jsxs("div",{className:"flex  space-x-4 text-purple-400 text-3xl ",children:[jsxRuntimeExports.jsx("a",{href:"https://github.com/ayush585/edgex",target:"_blank",className:"hover:text-purple-200 transition",children:jsxRuntimeExports.jsx(FaGithub,{})}),jsxRuntimeExports.jsx("a",{href:"https://www.linkedin.com/in/ayushman-mukherjee-437a49314/",target:"_blank",className:"hover:text-purple-200 transition",children:jsxRuntimeExports.jsx(FaLinkedin,{})})]})]})})]})}function ResumeAnalyzer(){const[n,e]=reactExports.useState(""),[t,r]=reactExports.useState(null),[Ee,Te]=reactExports.useState([]),Re=()=>new Promise(($e,Oe)=>{if(window.pdfjsLib)return $e(window.pdfjsLib);const Ce=document.createElement("script");Ce.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.5.136/pdf.min.js",Ce.onload=()=>$e(window.pdfjsLib),Ce.onerror=Oe,document.body.appendChild(Ce)}),Me=async $e=>{const Oe=await Re();Oe.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.5.136/pdf.worker.min.js";const Ce=new Uint8Array($e),Be=await Oe.getDocument({data:Ce}).promise;let Ue="";for(let We=1;We<=Be.numPages;We++){const Ge=await(await Be.getPage(We)).getTextContent();Ue+=Ge.items.map(Ye=>Ye.str).join(" ")+`
`}return Ue},Ve=async $e=>{if(!$e)return;const Oe=($e.name.split(".").pop()||"").toLowerCase();if(Oe==="txt"){const Ce=new FileReader;Ce.onload=Be=>e(String(Be.target?.result||"")),Ce.readAsText($e)}else if(Oe==="pdf"){const Ce=new FileReader;Ce.onload=async Be=>{try{const Ue=Be.target?.result,We=await Me(Ue);e(We)}catch(Ue){console.error(Ue),alert("Could not read PDF text. Please try a .txt export of your resume.")}},Ce.readAsArrayBuffer($e)}else alert("Supported files: .pdf, .txt")},De=()=>{const $e=n||"",Oe=[];let Ce=50;/\b(email|@)\b/i.test($e)||(Oe.push("Add a professional email."),Ce-=5),/\b(phone|\+?\d{7,})\b/i.test($e)||(Oe.push("Include a reachable phone number."),Ce-=5),/\b(education|b\.tech|btech|m\.tech|degree)\b/i.test($e)||(Oe.push("Add an Education section."),Ce-=10),/\b(experience|internship|project)\b/i.test($e)||(Oe.push("Highlight experience, internships, or projects."),Ce-=10),/\b(skills|technologies|tools)\b/i.test($e)||(Oe.push("List key skills and tools."),Ce-=10),/\b(achievements|awards|certifications)\b/i.test($e)||(Oe.push("Add achievements or certifications."),Ce-=5),($e.match(/\b(responsible for|worked on)\b/gi)||[]).length>3&&Oe.push("Use action verbs (built, led, delivered) over passive phrasing."),$e.length>8e3&&(Oe.push("Try to keep the resume concise (1–2 pages)."),Ce-=5),Ce=Math.max(0,Math.min(100,Ce+Math.min(20,Math.floor(($e.match(/\b(project|react|node|ml|api|sql|aws)\b/gi)||[]).length*2)))),r(Ce),Te(Oe.length?Oe:["Looks good! Consider tailoring to each job’s keywords."])};return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 p-6",children:jsxRuntimeExports.jsxs("div",{className:"max-w-4xl mx-auto",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Resume Analyzer (ATS)"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 mb-4",children:"Upload your resume (.pdf or .txt) or paste text below, then get an ATS-style score with improvement tips."}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-3 mb-4",children:jsxRuntimeExports.jsx("input",{type:"file",accept:".pdf,.txt",onChange:$e=>Ve($e.target.files?.[0]||null),className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100"})}),jsxRuntimeExports.jsx("textarea",{className:"w-full h-56 p-4 rounded-md border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Paste your resume text here...",value:n,onChange:$e=>e($e.target.value)}),jsxRuntimeExports.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:De,className:"px-5 py-2 rounded-md bg-purple-600 hover:bg-purple-700 text-white font-semibold",children:"Analyze"}),t!==null&&jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-500",children:["Score: ",jsxRuntimeExports.jsxs("span",{className:"font-semibold",children:[t,"/100"]})]})]}),Ee.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-6 p-4 rounded-md border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Suggestions"}),jsxRuntimeExports.jsx("ul",{className:"list-disc pl-5 text-sm space-y-1",children:Ee.map(($e,Oe)=>jsxRuntimeExports.jsx("li",{children:$e},Oe))})]})]})})}const ScrollToTopButton=()=>{const[n,e]=reactExports.useState(!1),[t,r]=reactExports.useState(130);reactExports.useEffect(()=>{const Te=()=>{const Re=window.scrollY>300;e(Re);const Me=window.innerHeight,Ve=document.documentElement.scrollHeight,$e=window.scrollY+Me>Ve-300;r(Re?$e?130:20:130)};return Te(),window.addEventListener("scroll",Te),()=>window.removeEventListener("scroll",Te)},[]);const Ee=()=>{window.scrollTo({top:0,behavior:"smooth"})};return jsxRuntimeExports.jsx("button",{onClick:Ee,"aria-label":"Scroll to top",className:`fixed right-6 z-50 p-4 rounded-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white shadow-lg hover:from-purple-700 hover:to-indigo-700 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 ${n?"opacity-100":"opacity-0 pointer-events-none"}`,style:{bottom:`${t}px`},children:jsxRuntimeExports.jsx(FaArrowUp,{className:"w-5 h-5"})})},ResourceVault=React.lazy(()=>__vitePreload(()=>import("./ResourceVault-BC5FfqzA.js"),[]));function App(){const[n,e]=reactExports.useState(null),[t,r]=reactExports.useState(!0),[Ee,Te]=reactExports.useState(()=>{try{if(typeof document<"u")return document.documentElement.classList.contains("dark")?"dark":"light"}catch{}return"light"});reactExports.useEffect(()=>{try{Ee==="dark"?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))}catch{}},[Ee]);const Re=()=>Te(Me=>Me==="dark"?"light":"dark");return reactExports.useEffect(()=>{const Me=onAuthStateChanged(auth,Ve=>{e(Ve),r(!1)});return()=>Me()},[]),t?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center min-h-screen",children:jsxRuntimeExports.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 transition-all duration-500",children:[jsxRuntimeExports.jsx(Navbar,{user:n,theme:Ee,toggleTheme:Re}),jsxRuntimeExports.jsx("main",{className:"flex-1",children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Home,{user:n})}),jsxRuntimeExports.jsx(Route,{path:"/careercrack",element:jsxRuntimeExports.jsx(CareerCrack,{user:n})}),jsxRuntimeExports.jsx(Route,{path:"/moodmirror",element:jsxRuntimeExports.jsx(MoodMirror,{user:n})}),jsxRuntimeExports.jsx(Route,{path:"/scholarships",element:jsxRuntimeExports.jsx(ScholarshipScout,{})}),jsxRuntimeExports.jsx(Route,{path:"/smartnotes",element:jsxRuntimeExports.jsx(SmartNotes,{})}),jsxRuntimeExports.jsx(Route,{path:"/voicefeedback",element:jsxRuntimeExports.jsx(VoiceFeedback,{user:n})}),jsxRuntimeExports.jsx(Route,{path:"/resume-analyzer",element:jsxRuntimeExports.jsx(ResumeAnalyzer,{})}),jsxRuntimeExports.jsx(Route,{path:"/resourcevault",element:jsxRuntimeExports.jsx(React.Suspense,{fallback:jsxRuntimeExports.jsx("div",{className:"p-6 text-gray-500",children:"Loading Resource Vault…"}),children:jsxRuntimeExports.jsx(ResourceVault,{user:n})})}),jsxRuntimeExports.jsx(Route,{path:"/login",element:jsxRuntimeExports.jsx(LoginModal$1,{})})]})}),jsxRuntimeExports.jsx(ScrollToTopButton,{})]})})}ReactDOM.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));export{AnimatePresence as A,BookOpen as B,X$1 as X,_typeof as _,commonjsGlobal$2 as a,createLucideIcon as c,getDefaultExportFromCjs as g,jsxRuntimeExports as j,motion as m,reactExports as r};
